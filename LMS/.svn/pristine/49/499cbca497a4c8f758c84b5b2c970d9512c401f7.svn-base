function p0(a,s){for(var l=0;l<s.length;l++){const i=s[l];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in a)){const d=Object.getOwnPropertyDescriptor(i,c);d&&Object.defineProperty(a,c,d.get?d:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function l(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=l(c);fetch(c.href,d)}})();function g0(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Uu={exports:{}},Ui={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lg;function x0(){if(Lg)return Ui;Lg=1;var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function l(i,c,d){var u=null;if(d!==void 0&&(u=""+d),c.key!==void 0&&(u=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:a,type:i,key:u,ref:c!==void 0?c:null,props:d}}return Ui.Fragment=s,Ui.jsx=l,Ui.jsxs=l,Ui}var zg;function b0(){return zg||(zg=1,Uu.exports=x0()),Uu.exports}var e=b0(),Bu={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ug;function y0(){if(Ug)return Je;Ug=1;var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function S(k){return k===null||typeof k!="object"?null:(k=v&&k[v]||k["@@iterator"],typeof k=="function"?k:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},E=Object.assign,A={};function T(k,X,ae){this.props=k,this.context=X,this.refs=A,this.updater=ae||N}T.prototype.isReactComponent={},T.prototype.setState=function(k,X){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,X,"setState")},T.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function $(){}$.prototype=T.prototype;function D(k,X,ae){this.props=k,this.context=X,this.refs=A,this.updater=ae||N}var I=D.prototype=new $;I.constructor=D,E(I,T.prototype),I.isPureReactComponent=!0;var G=Array.isArray;function L(){}var _={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function H(k,X,ae){var Y=ae.ref;return{$$typeof:a,type:k,key:X,ref:Y!==void 0?Y:null,props:ae}}function C(k,X){return H(k.type,X,k.props)}function P(k){return typeof k=="object"&&k!==null&&k.$$typeof===a}function U(k){var X={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(ae){return X[ae]})}var Z=/\/+/g;function z(k,X){return typeof k=="object"&&k!==null&&k.key!=null?U(""+k.key):X.toString(36)}function W(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(L,L):(k.status="pending",k.then(function(X){k.status==="pending"&&(k.status="fulfilled",k.value=X)},function(X){k.status==="pending"&&(k.status="rejected",k.reason=X)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function w(k,X,ae,Y,te){var K=typeof k;(K==="undefined"||K==="boolean")&&(k=null);var le=!1;if(k===null)le=!0;else switch(K){case"bigint":case"string":case"number":le=!0;break;case"object":switch(k.$$typeof){case a:case s:le=!0;break;case b:return le=k._init,w(le(k._payload),X,ae,Y,te)}}if(le)return te=te(k),le=Y===""?"."+z(k,0):Y,G(te)?(ae="",le!=null&&(ae=le.replace(Z,"$&/")+"/"),w(te,X,ae,"",function(J){return J})):te!=null&&(P(te)&&(te=C(te,ae+(te.key==null||k&&k.key===te.key?"":(""+te.key).replace(Z,"$&/")+"/")+le)),X.push(te)),1;le=0;var ve=Y===""?".":Y+":";if(G(k))for(var ke=0;ke<k.length;ke++)Y=k[ke],K=ve+z(Y,ke),le+=w(Y,X,ae,K,te);else if(ke=S(k),typeof ke=="function")for(k=ke.call(k),ke=0;!(Y=k.next()).done;)Y=Y.value,K=ve+z(Y,ke++),le+=w(Y,X,ae,K,te);else if(K==="object"){if(typeof k.then=="function")return w(W(k),X,ae,Y,te);throw X=String(k),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return le}function M(k,X,ae){if(k==null)return k;var Y=[],te=0;return w(k,Y,"","",function(K){return X.call(ae,K,te++)}),Y}function B(k){if(k._status===-1){var X=k._result;X=X(),X.then(function(ae){(k._status===0||k._status===-1)&&(k._status=1,k._result=ae)},function(ae){(k._status===0||k._status===-1)&&(k._status=2,k._result=ae)}),k._status===-1&&(k._status=0,k._result=X)}if(k._status===1)return k._result.default;throw k._result}var F=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},q={map:M,forEach:function(k,X,ae){M(k,function(){X.apply(this,arguments)},ae)},count:function(k){var X=0;return M(k,function(){X++}),X},toArray:function(k){return M(k,function(X){return X})||[]},only:function(k){if(!P(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Je.Activity=y,Je.Children=q,Je.Component=T,Je.Fragment=l,Je.Profiler=c,Je.PureComponent=D,Je.StrictMode=i,Je.Suspense=f,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_,Je.__COMPILER_RUNTIME={__proto__:null,c:function(k){return _.H.useMemoCache(k)}},Je.cache=function(k){return function(){return k.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(k,X,ae){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var Y=E({},k.props),te=k.key;if(X!=null)for(K in X.key!==void 0&&(te=""+X.key),X)!O.call(X,K)||K==="key"||K==="__self"||K==="__source"||K==="ref"&&X.ref===void 0||(Y[K]=X[K]);var K=arguments.length-2;if(K===1)Y.children=ae;else if(1<K){for(var le=Array(K),ve=0;ve<K;ve++)le[ve]=arguments[ve+2];Y.children=le}return H(k.type,te,Y)},Je.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:d,_context:k},k},Je.createElement=function(k,X,ae){var Y,te={},K=null;if(X!=null)for(Y in X.key!==void 0&&(K=""+X.key),X)O.call(X,Y)&&Y!=="key"&&Y!=="__self"&&Y!=="__source"&&(te[Y]=X[Y]);var le=arguments.length-2;if(le===1)te.children=ae;else if(1<le){for(var ve=Array(le),ke=0;ke<le;ke++)ve[ke]=arguments[ke+2];te.children=ve}if(k&&k.defaultProps)for(Y in le=k.defaultProps,le)te[Y]===void 0&&(te[Y]=le[Y]);return H(k,K,te)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(k){return{$$typeof:h,render:k}},Je.isValidElement=P,Je.lazy=function(k){return{$$typeof:b,_payload:{_status:-1,_result:k},_init:B}},Je.memo=function(k,X){return{$$typeof:g,type:k,compare:X===void 0?null:X}},Je.startTransition=function(k){var X=_.T,ae={};_.T=ae;try{var Y=k(),te=_.S;te!==null&&te(ae,Y),typeof Y=="object"&&Y!==null&&typeof Y.then=="function"&&Y.then(L,F)}catch(K){F(K)}finally{X!==null&&ae.types!==null&&(X.types=ae.types),_.T=X}},Je.unstable_useCacheRefresh=function(){return _.H.useCacheRefresh()},Je.use=function(k){return _.H.use(k)},Je.useActionState=function(k,X,ae){return _.H.useActionState(k,X,ae)},Je.useCallback=function(k,X){return _.H.useCallback(k,X)},Je.useContext=function(k){return _.H.useContext(k)},Je.useDebugValue=function(){},Je.useDeferredValue=function(k,X){return _.H.useDeferredValue(k,X)},Je.useEffect=function(k,X){return _.H.useEffect(k,X)},Je.useEffectEvent=function(k){return _.H.useEffectEvent(k)},Je.useId=function(){return _.H.useId()},Je.useImperativeHandle=function(k,X,ae){return _.H.useImperativeHandle(k,X,ae)},Je.useInsertionEffect=function(k,X){return _.H.useInsertionEffect(k,X)},Je.useLayoutEffect=function(k,X){return _.H.useLayoutEffect(k,X)},Je.useMemo=function(k,X){return _.H.useMemo(k,X)},Je.useOptimistic=function(k,X){return _.H.useOptimistic(k,X)},Je.useReducer=function(k,X,ae){return _.H.useReducer(k,X,ae)},Je.useRef=function(k){return _.H.useRef(k)},Je.useState=function(k){return _.H.useState(k)},Je.useSyncExternalStore=function(k,X,ae){return _.H.useSyncExternalStore(k,X,ae)},Je.useTransition=function(){return _.H.useTransition()},Je.version="19.2.0",Je}var Bg;function Ch(){return Bg||(Bg=1,Bu.exports=y0()),Bu.exports}var x=Ch();const qs=g0(x),v0=p0({__proto__:null,default:qs},[x]);var Fu={exports:{}},Bi={},Hu={exports:{}},Yu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fg;function j0(){return Fg||(Fg=1,(function(a){function s(w,M){var B=w.length;w.push(M);e:for(;0<B;){var F=B-1>>>1,q=w[F];if(0<c(q,M))w[F]=M,w[B]=q,B=F;else break e}}function l(w){return w.length===0?null:w[0]}function i(w){if(w.length===0)return null;var M=w[0],B=w.pop();if(B!==M){w[0]=B;e:for(var F=0,q=w.length,k=q>>>1;F<k;){var X=2*(F+1)-1,ae=w[X],Y=X+1,te=w[Y];if(0>c(ae,B))Y<q&&0>c(te,ae)?(w[F]=te,w[Y]=B,F=Y):(w[F]=ae,w[X]=B,F=X);else if(Y<q&&0>c(te,B))w[F]=te,w[Y]=B,F=Y;else break e}}return M}function c(w,M){var B=w.sortIndex-M.sortIndex;return B!==0?B:w.id-M.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var u=Date,h=u.now();a.unstable_now=function(){return u.now()-h}}var f=[],g=[],b=1,y=null,v=3,S=!1,N=!1,E=!1,A=!1,T=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function I(w){for(var M=l(g);M!==null;){if(M.callback===null)i(g);else if(M.startTime<=w)i(g),M.sortIndex=M.expirationTime,s(f,M);else break;M=l(g)}}function G(w){if(E=!1,I(w),!N)if(l(f)!==null)N=!0,L||(L=!0,U());else{var M=l(g);M!==null&&W(G,M.startTime-w)}}var L=!1,_=-1,O=5,H=-1;function C(){return A?!0:!(a.unstable_now()-H<O)}function P(){if(A=!1,L){var w=a.unstable_now();H=w;var M=!0;try{e:{N=!1,E&&(E=!1,$(_),_=-1),S=!0;var B=v;try{t:{for(I(w),y=l(f);y!==null&&!(y.expirationTime>w&&C());){var F=y.callback;if(typeof F=="function"){y.callback=null,v=y.priorityLevel;var q=F(y.expirationTime<=w);if(w=a.unstable_now(),typeof q=="function"){y.callback=q,I(w),M=!0;break t}y===l(f)&&i(f),I(w)}else i(f);y=l(f)}if(y!==null)M=!0;else{var k=l(g);k!==null&&W(G,k.startTime-w),M=!1}}break e}finally{y=null,v=B,S=!1}M=void 0}}finally{M?U():L=!1}}}var U;if(typeof D=="function")U=function(){D(P)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,z=Z.port2;Z.port1.onmessage=P,U=function(){z.postMessage(null)}}else U=function(){T(P,0)};function W(w,M){_=T(function(){w(a.unstable_now())},M)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(w){w.callback=null},a.unstable_forceFrameRate=function(w){0>w||125<w?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<w?Math.floor(1e3/w):5},a.unstable_getCurrentPriorityLevel=function(){return v},a.unstable_next=function(w){switch(v){case 1:case 2:case 3:var M=3;break;default:M=v}var B=v;v=M;try{return w()}finally{v=B}},a.unstable_requestPaint=function(){A=!0},a.unstable_runWithPriority=function(w,M){switch(w){case 1:case 2:case 3:case 4:case 5:break;default:w=3}var B=v;v=w;try{return M()}finally{v=B}},a.unstable_scheduleCallback=function(w,M,B){var F=a.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?F+B:F):B=F,w){case 1:var q=-1;break;case 2:q=250;break;case 5:q=1073741823;break;case 4:q=1e4;break;default:q=5e3}return q=B+q,w={id:b++,callback:M,priorityLevel:w,startTime:B,expirationTime:q,sortIndex:-1},B>F?(w.sortIndex=B,s(g,w),l(f)===null&&w===l(g)&&(E?($(_),_=-1):E=!0,W(G,B-F))):(w.sortIndex=q,s(f,w),N||S||(N=!0,L||(L=!0,U()))),w},a.unstable_shouldYield=C,a.unstable_wrapCallback=function(w){var M=v;return function(){var B=v;v=M;try{return w.apply(this,arguments)}finally{v=B}}}})(Yu)),Yu}var Hg;function N0(){return Hg||(Hg=1,Hu.exports=j0()),Hu.exports}var Vu={exports:{}},os={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yg;function S0(){if(Yg)return os;Yg=1;var a=Ch();function s(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var i={d:{f:l,r:function(){throw Error(s(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(f,g,b){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:y==null?null:""+y,children:f,containerInfo:g,implementation:b}}var u=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return os.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,os.createPortal=function(f,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(s(299));return d(f,g,null,b)},os.flushSync=function(f){var g=u.T,b=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=g,i.p=b,i.d.f()}},os.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(f,g))},os.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},os.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var b=g.as,y=h(b,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,S=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?i.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:S}):b==="script"&&i.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:S,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},os.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=h(g.as,g.crossOrigin);i.d.M(f,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(f)},os.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,y=h(b,g.crossOrigin);i.d.L(f,b,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},os.preloadModule=function(f,g){if(typeof f=="string")if(g){var b=h(g.as,g.crossOrigin);i.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(f)},os.requestFormReset=function(f){i.d.r(f)},os.unstable_batchedUpdates=function(f,g){return f(g)},os.useFormState=function(f,g,b){return u.H.useFormState(f,g,b)},os.useFormStatus=function(){return u.H.useHostTransitionStatus()},os.version="19.2.0",os}var Vg;function Zb(){if(Vg)return Vu.exports;Vg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(s){console.error(s)}}return a(),Vu.exports=S0(),Vu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pg;function w0(){if(Pg)return Bi;Pg=1;var a=N0(),s=Ch(),l=Zb();function i(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function u(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function h(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function f(t){if(d(t)!==t)throw Error(i(188))}function g(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(i(188));return n!==t?null:t}for(var r=t,o=n;;){var m=r.return;if(m===null)break;var p=m.alternate;if(p===null){if(o=m.return,o!==null){r=o;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===r)return f(m),t;if(p===o)return f(m),n;p=p.sibling}throw Error(i(188))}if(r.return!==o.return)r=m,o=p;else{for(var j=!1,R=m.child;R;){if(R===r){j=!0,r=m,o=p;break}if(R===o){j=!0,o=m,r=p;break}R=R.sibling}if(!j){for(R=p.child;R;){if(R===r){j=!0,r=p,o=m;break}if(R===o){j=!0,o=p,r=m;break}R=R.sibling}if(!j)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?t:n}function b(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=b(t),n!==null)return n;t=t.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),N=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),D=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),G=Symbol.for("react.suspense"),L=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),H=Symbol.for("react.activity"),C=Symbol.for("react.memo_cache_sentinel"),P=Symbol.iterator;function U(t){return t===null||typeof t!="object"?null:(t=P&&t[P]||t["@@iterator"],typeof t=="function"?t:null)}var Z=Symbol.for("react.client.reference");function z(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Z?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case E:return"Fragment";case T:return"Profiler";case A:return"StrictMode";case G:return"Suspense";case L:return"SuspenseList";case H:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case N:return"Portal";case D:return t.displayName||"Context";case $:return(t._context.displayName||"Context")+".Consumer";case I:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _:return n=t.displayName||null,n!==null?n:z(t.type)||"Memo";case O:n=t._payload,t=t._init;try{return z(t(n))}catch{}}return null}var W=Array.isArray,w=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,B={pending:!1,data:null,method:null,action:null},F=[],q=-1;function k(t){return{current:t}}function X(t){0>q||(t.current=F[q],F[q]=null,q--)}function ae(t,n){q++,F[q]=t.current,t.current=n}var Y=k(null),te=k(null),K=k(null),le=k(null);function ve(t,n){switch(ae(K,n),ae(te,t),ae(Y,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?ig(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=ig(n),t=rg(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}X(Y),ae(Y,t)}function ke(){X(Y),X(te),X(K)}function J(t){t.memoizedState!==null&&ae(le,t);var n=Y.current,r=rg(n,t.type);n!==r&&(ae(te,t),ae(Y,r))}function ue(t){te.current===t&&(X(Y),X(te)),le.current===t&&(X(le),Ii._currentValue=B)}var Se,Me;function re(t){if(Se===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Se=n&&n[1]||"",Me=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Se+t+Me}var he=!1;function Re(t,n){if(!t||he)return"";he=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var ye=function(){throw Error()};if(Object.defineProperty(ye.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ye,[])}catch(de){var ce=de}Reflect.construct(t,[],ye)}else{try{ye.call()}catch(de){ce=de}t.call(ye.prototype)}}else{try{throw Error()}catch(de){ce=de}(ye=t())&&typeof ye.catch=="function"&&ye.catch(function(){})}}catch(de){if(de&&ce&&typeof de.stack=="string")return[de.stack,ce.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=o.DetermineComponentFrameRoot(),j=p[0],R=p[1];if(j&&R){var Q=j.split(`
`),ie=R.split(`
`);for(m=o=0;o<Q.length&&!Q[o].includes("DetermineComponentFrameRoot");)o++;for(;m<ie.length&&!ie[m].includes("DetermineComponentFrameRoot");)m++;if(o===Q.length||m===ie.length)for(o=Q.length-1,m=ie.length-1;1<=o&&0<=m&&Q[o]!==ie[m];)m--;for(;1<=o&&0<=m;o--,m--)if(Q[o]!==ie[m]){if(o!==1||m!==1)do if(o--,m--,0>m||Q[o]!==ie[m]){var pe=`
`+Q[o].replace(" at new "," at ");return t.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",t.displayName)),pe}while(1<=o&&0<=m);break}}}finally{he=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?re(r):""}function Be(t,n){switch(t.tag){case 26:case 27:case 5:return re(t.type);case 16:return re("Lazy");case 13:return t.child!==n&&n!==null?re("Suspense Fallback"):re("Suspense");case 19:return re("SuspenseList");case 0:case 15:return Re(t.type,!1);case 11:return Re(t.type.render,!1);case 1:return Re(t.type,!0);case 31:return re("Activity");default:return""}}function fe(t){try{var n="",r=null;do n+=Be(t,r),r=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Le=Object.prototype.hasOwnProperty,oe=a.unstable_scheduleCallback,Ne=a.unstable_cancelCallback,we=a.unstable_shouldYield,Ye=a.unstable_requestPaint,Xe=a.unstable_now,Ke=a.unstable_getCurrentPriorityLevel,He=a.unstable_ImmediatePriority,Ht=a.unstable_UserBlockingPriority,Ns=a.unstable_NormalPriority,ua=a.unstable_LowPriority,xt=a.unstable_IdlePriority,Kn=a.log,Fa=a.unstable_setDisableYieldValue,ha=null,es=null;function Xs(t){if(typeof Kn=="function"&&Fa(t),es&&typeof es.setStrictMode=="function")try{es.setStrictMode(ha,t)}catch{}}var ts=Math.clz32?Math.clz32:mr,ur=Math.log,hr=Math.LN2;function mr(t){return t>>>=0,t===0?32:31-(ur(t)/hr|0)|0}var Sn=256,wn=262144,Qn=4194304;function ma(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Zn(t,n,r){var o=t.pendingLanes;if(o===0)return 0;var m=0,p=t.suspendedLanes,j=t.pingedLanes;t=t.warmLanes;var R=o&134217727;return R!==0?(o=R&~p,o!==0?m=ma(o):(j&=R,j!==0?m=ma(j):r||(r=R&~t,r!==0&&(m=ma(r))))):(R=o&~p,R!==0?m=ma(R):j!==0?m=ma(j):r||(r=o&~t,r!==0&&(m=ma(r)))),m===0?0:n!==0&&n!==m&&(n&p)===0&&(p=m&-m,r=n&-n,p>=r||p===32&&(r&4194048)!==0)?n:m}function cs(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function Do(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fr(){var t=Qn;return Qn<<=1,(Qn&62914560)===0&&(Qn=4194304),t}function Ss(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function ds(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function fa(t,n,r,o,m,p){var j=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var R=t.entanglements,Q=t.expirationTimes,ie=t.hiddenUpdates;for(r=j&~r;0<r;){var pe=31-ts(r),ye=1<<pe;R[pe]=0,Q[pe]=-1;var ce=ie[pe];if(ce!==null)for(ie[pe]=null,pe=0;pe<ce.length;pe++){var de=ce[pe];de!==null&&(de.lane&=-536870913)}r&=~ye}o!==0&&Ms(t,o,0),p!==0&&m===0&&t.tag!==0&&(t.suspendedLanes|=p&~(j&~n))}function Ms(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-ts(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function Jn(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var o=31-ts(r),m=1<<o;m&n|t[o]&n&&(t[o]|=n),r&=~m}}function el(t,n){var r=n&-n;return r=(r&42)!==0?1:tl(r),(r&(t.suspendedLanes|n))!==0?0:r}function tl(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function ge(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function _e(){var t=M.p;return t!==0?t:(t=window.event,t===void 0?32:kg(t.type))}function Ce(t,n){var r=M.p;try{return M.p=t,n()}finally{M.p=r}}var $e=Math.random().toString(36).slice(2),V="__reactFiber$"+$e,me="__reactProps$"+$e,je="__reactContainer$"+$e,be="__reactEvents$"+$e,Ie="__reactListeners$"+$e,Ae="__reactHandles$"+$e,Te="__reactResources$"+$e,Oe="__reactMarker$"+$e;function Ee(t){delete t[V],delete t[me],delete t[be],delete t[Ie],delete t[Ae]}function Fe(t){var n=t[V];if(n)return n;for(var r=t.parentNode;r;){if(n=r[je]||r[V]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=fg(t);t!==null;){if(r=t[V])return r;t=fg(t)}return n}t=r,r=t.parentNode}return null}function De(t){if(t=t[V]||t[je]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function ze(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(i(33))}function et(t){var n=t[Te];return n||(n=t[Te]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Qe(t){t[Oe]=!0}var Rt=new Set,Yt={};function st(t,n){yt(t,n),yt(t+"Capture",n)}function yt(t,n){for(Yt[t]=n,t=0;t<n.length;t++)Rt.add(n[t])}var Ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ws={},ss={};function pr(t){return Le.call(ss,t)?!0:Le.call(Ws,t)?!1:Ze.test(t)?ss[t]=!0:(Ws[t]=!0,!1)}function sl(t,n,r){if(pr(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function al(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function Ks(t,n,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+o)}}function Rs(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qh(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function cv(t,n,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,p=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return m.call(this)},set:function(j){r=""+j,p.call(this,j)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(j){r=""+j},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Mo(t){if(!t._valueTracker){var n=Qh(t)?"checked":"value";t._valueTracker=cv(t,n,""+t[n])}}function Zh(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return t&&(o=Qh(t)?t.checked?"true":"false":t.value),t=o,t!==r?(n.setValue(t),!0):!1}function gr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var ov=/[\n"\\]/g;function $s(t){return t.replace(ov,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Ro(t,n,r,o,m,p,j,R){t.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?t.type=j:t.removeAttribute("type"),n!=null?j==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+Rs(n)):t.value!==""+Rs(n)&&(t.value=""+Rs(n)):j!=="submit"&&j!=="reset"||t.removeAttribute("value"),n!=null?$o(t,j,Rs(n)):r!=null?$o(t,j,Rs(r)):o!=null&&t.removeAttribute("value"),m==null&&p!=null&&(t.defaultChecked=!!p),m!=null&&(t.checked=m&&typeof m!="function"&&typeof m!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.name=""+Rs(R):t.removeAttribute("name")}function Jh(t,n,r,o,m,p,j,R){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),n!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||n!=null)){Mo(t);return}r=r!=null?""+Rs(r):"",n=n!=null?""+Rs(n):r,R||n===t.value||(t.value=n),t.defaultValue=n}o=o??m,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=R?t.checked:!!o,t.defaultChecked=!!o,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(t.name=j),Mo(t)}function $o(t,n,r){n==="number"&&gr(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function nl(t,n,r,o){if(t=t.options,n){n={};for(var m=0;m<r.length;m++)n["$"+r[m]]=!0;for(r=0;r<t.length;r++)m=n.hasOwnProperty("$"+t[r].value),t[r].selected!==m&&(t[r].selected=m),m&&o&&(t[r].defaultSelected=!0)}else{for(r=""+Rs(r),n=null,m=0;m<t.length;m++){if(t[m].value===r){t[m].selected=!0,o&&(t[m].defaultSelected=!0);return}n!==null||t[m].disabled||(n=t[m])}n!==null&&(n.selected=!0)}}function em(t,n,r){if(n!=null&&(n=""+Rs(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+Rs(r):""}function tm(t,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(i(92));if(W(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=Rs(n),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),Mo(t)}function ll(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var dv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sm(t,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,r):typeof r!="number"||r===0||dv.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function am(t,n,r){if(n!=null&&typeof n!="object")throw Error(i(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var m in n)o=n[m],n.hasOwnProperty(m)&&r[m]!==o&&sm(t,m,o)}else for(var p in n)n.hasOwnProperty(p)&&sm(t,p,n[p])}function Io(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var uv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),hv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function xr(t){return hv.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function pa(){}var Oo=null;function Lo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var il=null,rl=null;function nm(t){var n=De(t);if(n&&(t=n.stateNode)){var r=t[me]||null;e:switch(t=n.stateNode,n.type){case"input":if(Ro(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+$s(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==t&&o.form===t.form){var m=o[me]||null;if(!m)throw Error(i(90));Ro(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===t.form&&Zh(o)}break e;case"textarea":em(t,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&nl(t,!!r.multiple,n,!1)}}}var zo=!1;function lm(t,n,r){if(zo)return t(n,r);zo=!0;try{var o=t(n);return o}finally{if(zo=!1,(il!==null||rl!==null)&&(nc(),il&&(n=il,t=rl,rl=il=null,nm(n),t)))for(n=0;n<t.length;n++)nm(t[n])}}function Zl(t,n){var r=t.stateNode;if(r===null)return null;var o=r[me]||null;if(o===null)return null;r=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(i(231,n,typeof r));return r}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uo=!1;if(ga)try{var Jl={};Object.defineProperty(Jl,"passive",{get:function(){Uo=!0}}),window.addEventListener("test",Jl,Jl),window.removeEventListener("test",Jl,Jl)}catch{Uo=!1}var Ha=null,Bo=null,br=null;function im(){if(br)return br;var t,n=Bo,r=n.length,o,m="value"in Ha?Ha.value:Ha.textContent,p=m.length;for(t=0;t<r&&n[t]===m[t];t++);var j=r-t;for(o=1;o<=j&&n[r-o]===m[p-o];o++);return br=m.slice(t,1<o?1-o:void 0)}function yr(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function vr(){return!0}function rm(){return!1}function hs(t){function n(r,o,m,p,j){this._reactName=r,this._targetInst=m,this.type=o,this.nativeEvent=p,this.target=j,this.currentTarget=null;for(var R in t)t.hasOwnProperty(R)&&(r=t[R],this[R]=r?r(p):p[R]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?vr:rm,this.isPropagationStopped=rm,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=vr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=vr)},persist:function(){},isPersistent:vr}),n}var Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},jr=hs(Cn),ei=y({},Cn,{view:0,detail:0}),mv=hs(ei),Fo,Ho,ti,Nr=y({},ei,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vo,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ti&&(ti&&t.type==="mousemove"?(Fo=t.screenX-ti.screenX,Ho=t.screenY-ti.screenY):Ho=Fo=0,ti=t),Fo)},movementY:function(t){return"movementY"in t?t.movementY:Ho}}),cm=hs(Nr),fv=y({},Nr,{dataTransfer:0}),pv=hs(fv),gv=y({},ei,{relatedTarget:0}),Yo=hs(gv),xv=y({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0}),bv=hs(xv),yv=y({},Cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vv=hs(yv),jv=y({},Cn,{data:0}),om=hs(jv),Nv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cv(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=wv[t])?!!n[t]:!1}function Vo(){return Cv}var Av=y({},ei,{key:function(t){if(t.key){var n=Nv[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=yr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Sv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vo,charCode:function(t){return t.type==="keypress"?yr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Ev=hs(Av),Tv=y({},Nr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dm=hs(Tv),_v=y({},ei,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vo}),kv=hs(_v),Dv=y({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Mv=hs(Dv),Rv=y({},Nr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),$v=hs(Rv),Iv=y({},Cn,{newState:0,oldState:0}),Ov=hs(Iv),Lv=[9,13,27,32],Po=ga&&"CompositionEvent"in window,si=null;ga&&"documentMode"in document&&(si=document.documentMode);var zv=ga&&"TextEvent"in window&&!si,um=ga&&(!Po||si&&8<si&&11>=si),hm=" ",mm=!1;function fm(t,n){switch(t){case"keyup":return Lv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cl=!1;function Uv(t,n){switch(t){case"compositionend":return pm(n);case"keypress":return n.which!==32?null:(mm=!0,hm);case"textInput":return t=n.data,t===hm&&mm?null:t;default:return null}}function Bv(t,n){if(cl)return t==="compositionend"||!Po&&fm(t,n)?(t=im(),br=Bo=Ha=null,cl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return um&&n.locale!=="ko"?null:n.data;default:return null}}var Fv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gm(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Fv[t.type]:n==="textarea"}function xm(t,n,r,o){il?rl?rl.push(o):rl=[o]:il=o,n=uc(n,"onChange"),0<n.length&&(r=new jr("onChange","change",null,r,o),t.push({event:r,listeners:n}))}var ai=null,ni=null;function Hv(t){eg(t,0)}function Sr(t){var n=ze(t);if(Zh(n))return t}function bm(t,n){if(t==="change")return n}var ym=!1;if(ga){var qo;if(ga){var Go="oninput"in document;if(!Go){var vm=document.createElement("div");vm.setAttribute("oninput","return;"),Go=typeof vm.oninput=="function"}qo=Go}else qo=!1;ym=qo&&(!document.documentMode||9<document.documentMode)}function jm(){ai&&(ai.detachEvent("onpropertychange",Nm),ni=ai=null)}function Nm(t){if(t.propertyName==="value"&&Sr(ni)){var n=[];xm(n,ni,t,Lo(t)),lm(Hv,n)}}function Yv(t,n,r){t==="focusin"?(jm(),ai=n,ni=r,ai.attachEvent("onpropertychange",Nm)):t==="focusout"&&jm()}function Vv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Sr(ni)}function Pv(t,n){if(t==="click")return Sr(n)}function qv(t,n){if(t==="input"||t==="change")return Sr(n)}function Gv(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var ws=typeof Object.is=="function"?Object.is:Gv;function li(t,n){if(ws(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var m=r[o];if(!Le.call(n,m)||!ws(t[m],n[m]))return!1}return!0}function Sm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wm(t,n){var r=Sm(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=n&&o>=n)return{node:r,offset:n-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Sm(r)}}function Cm(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Cm(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Am(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=gr(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=gr(t.document)}return n}function Xo(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var Xv=ga&&"documentMode"in document&&11>=document.documentMode,ol=null,Wo=null,ii=null,Ko=!1;function Em(t,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ko||ol==null||ol!==gr(o)||(o=ol,"selectionStart"in o&&Xo(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ii&&li(ii,o)||(ii=o,o=uc(Wo,"onSelect"),0<o.length&&(n=new jr("onSelect","select",null,n,r),t.push({event:n,listeners:o}),n.target=ol)))}function An(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var dl={animationend:An("Animation","AnimationEnd"),animationiteration:An("Animation","AnimationIteration"),animationstart:An("Animation","AnimationStart"),transitionrun:An("Transition","TransitionRun"),transitionstart:An("Transition","TransitionStart"),transitioncancel:An("Transition","TransitionCancel"),transitionend:An("Transition","TransitionEnd")},Qo={},Tm={};ga&&(Tm=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function En(t){if(Qo[t])return Qo[t];if(!dl[t])return t;var n=dl[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in Tm)return Qo[t]=n[r];return t}var _m=En("animationend"),km=En("animationiteration"),Dm=En("animationstart"),Wv=En("transitionrun"),Kv=En("transitionstart"),Qv=En("transitioncancel"),Mm=En("transitionend"),Rm=new Map,Zo="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Zo.push("scrollEnd");function Qs(t,n){Rm.set(t,n),st(n,[t])}var wr=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Is=[],ul=0,Jo=0;function Cr(){for(var t=ul,n=Jo=ul=0;n<t;){var r=Is[n];Is[n++]=null;var o=Is[n];Is[n++]=null;var m=Is[n];Is[n++]=null;var p=Is[n];if(Is[n++]=null,o!==null&&m!==null){var j=o.pending;j===null?m.next=m:(m.next=j.next,j.next=m),o.pending=m}p!==0&&$m(r,m,p)}}function Ar(t,n,r,o){Is[ul++]=t,Is[ul++]=n,Is[ul++]=r,Is[ul++]=o,Jo|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function ed(t,n,r,o){return Ar(t,n,r,o),Er(t)}function Tn(t,n){return Ar(t,null,null,n),Er(t)}function $m(t,n,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var m=!1,p=t.return;p!==null;)p.childLanes|=r,o=p.alternate,o!==null&&(o.childLanes|=r),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(m=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,m&&n!==null&&(m=31-ts(r),t=p.hiddenUpdates,o=t[m],o===null?t[m]=[n]:o.push(n),n.lane=r|536870912),p):null}function Er(t){if(50<Ti)throw Ti=0,ou=null,Error(i(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var hl={};function Zv(t,n,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cs(t,n,r,o){return new Zv(t,n,r,o)}function td(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xa(t,n){var r=t.alternate;return r===null?(r=Cs(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Im(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function Tr(t,n,r,o,m,p){var j=0;if(o=t,typeof t=="function")td(t)&&(j=1);else if(typeof t=="string")j=a0(t,r,Y.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case H:return t=Cs(31,r,n,m),t.elementType=H,t.lanes=p,t;case E:return _n(r.children,m,p,n);case A:j=8,m|=24;break;case T:return t=Cs(12,r,n,m|2),t.elementType=T,t.lanes=p,t;case G:return t=Cs(13,r,n,m),t.elementType=G,t.lanes=p,t;case L:return t=Cs(19,r,n,m),t.elementType=L,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D:j=10;break e;case $:j=9;break e;case I:j=11;break e;case _:j=14;break e;case O:j=16,o=null;break e}j=29,r=Error(i(130,t===null?"null":typeof t,"")),o=null}return n=Cs(j,r,n,m),n.elementType=t,n.type=o,n.lanes=p,n}function _n(t,n,r,o){return t=Cs(7,t,o,n),t.lanes=r,t}function sd(t,n,r){return t=Cs(6,t,null,n),t.lanes=r,t}function Om(t){var n=Cs(18,null,null,0);return n.stateNode=t,n}function ad(t,n,r){return n=Cs(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var Lm=new WeakMap;function Os(t,n){if(typeof t=="object"&&t!==null){var r=Lm.get(t);return r!==void 0?r:(n={value:t,source:n,stack:fe(n)},Lm.set(t,n),n)}return{value:t,source:n,stack:fe(n)}}var ml=[],fl=0,_r=null,ri=0,Ls=[],zs=0,Ya=null,ta=1,sa="";function ba(t,n){ml[fl++]=ri,ml[fl++]=_r,_r=t,ri=n}function zm(t,n,r){Ls[zs++]=ta,Ls[zs++]=sa,Ls[zs++]=Ya,Ya=t;var o=ta;t=sa;var m=32-ts(o)-1;o&=~(1<<m),r+=1;var p=32-ts(n)+m;if(30<p){var j=m-m%5;p=(o&(1<<j)-1).toString(32),o>>=j,m-=j,ta=1<<32-ts(n)+m|r<<m|o,sa=p+t}else ta=1<<p|r<<m|o,sa=t}function nd(t){t.return!==null&&(ba(t,1),zm(t,1,0))}function ld(t){for(;t===_r;)_r=ml[--fl],ml[fl]=null,ri=ml[--fl],ml[fl]=null;for(;t===Ya;)Ya=Ls[--zs],Ls[zs]=null,sa=Ls[--zs],Ls[zs]=null,ta=Ls[--zs],Ls[zs]=null}function Um(t,n){Ls[zs++]=ta,Ls[zs++]=sa,Ls[zs++]=Ya,ta=n.id,sa=n.overflow,Ya=t}var as=null,_t=null,ut=!1,Va=null,Us=!1,id=Error(i(519));function Pa(t){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ci(Os(n,t)),id}function Bm(t){var n=t.stateNode,r=t.type,o=t.memoizedProps;switch(n[V]=t,n[me]=o,r){case"dialog":rt("cancel",n),rt("close",n);break;case"iframe":case"object":case"embed":rt("load",n);break;case"video":case"audio":for(r=0;r<ki.length;r++)rt(ki[r],n);break;case"source":rt("error",n);break;case"img":case"image":case"link":rt("error",n),rt("load",n);break;case"details":rt("toggle",n);break;case"input":rt("invalid",n),Jh(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":rt("invalid",n);break;case"textarea":rt("invalid",n),tm(n,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||ng(n.textContent,r)?(o.popover!=null&&(rt("beforetoggle",n),rt("toggle",n)),o.onScroll!=null&&rt("scroll",n),o.onScrollEnd!=null&&rt("scrollend",n),o.onClick!=null&&(n.onclick=pa),n=!0):n=!1,n||Pa(t,!0)}function Fm(t){for(as=t.return;as;)switch(as.tag){case 5:case 31:case 13:Us=!1;return;case 27:case 3:Us=!0;return;default:as=as.return}}function pl(t){if(t!==as)return!1;if(!ut)return Fm(t),ut=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||wu(t.type,t.memoizedProps)),r=!r),r&&_t&&Pa(t),Fm(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));_t=mg(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));_t=mg(t)}else n===27?(n=_t,ln(t.type)?(t=_u,_u=null,_t=t):_t=n):_t=as?Fs(t.stateNode.nextSibling):null;return!0}function kn(){_t=as=null,ut=!1}function rd(){var t=Va;return t!==null&&(gs===null?gs=t:gs.push.apply(gs,t),Va=null),t}function ci(t){Va===null?Va=[t]:Va.push(t)}var cd=k(null),Dn=null,ya=null;function qa(t,n,r){ae(cd,n._currentValue),n._currentValue=r}function va(t){t._currentValue=cd.current,X(cd)}function od(t,n,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===r)break;t=t.return}}function dd(t,n,r,o){var m=t.child;for(m!==null&&(m.return=t);m!==null;){var p=m.dependencies;if(p!==null){var j=m.child;p=p.firstContext;e:for(;p!==null;){var R=p;p=m;for(var Q=0;Q<n.length;Q++)if(R.context===n[Q]){p.lanes|=r,R=p.alternate,R!==null&&(R.lanes|=r),od(p.return,r,t),o||(j=null);break e}p=R.next}}else if(m.tag===18){if(j=m.return,j===null)throw Error(i(341));j.lanes|=r,p=j.alternate,p!==null&&(p.lanes|=r),od(j,r,t),j=null}else j=m.child;if(j!==null)j.return=m;else for(j=m;j!==null;){if(j===t){j=null;break}if(m=j.sibling,m!==null){m.return=j.return,j=m;break}j=j.return}m=j}}function gl(t,n,r,o){t=null;for(var m=n,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var j=m.alternate;if(j===null)throw Error(i(387));if(j=j.memoizedProps,j!==null){var R=m.type;ws(m.pendingProps.value,j.value)||(t!==null?t.push(R):t=[R])}}else if(m===le.current){if(j=m.alternate,j===null)throw Error(i(387));j.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(t!==null?t.push(Ii):t=[Ii])}m=m.return}t!==null&&dd(n,t,r,o),n.flags|=262144}function kr(t){for(t=t.firstContext;t!==null;){if(!ws(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Mn(t){Dn=t,ya=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ns(t){return Hm(Dn,t)}function Dr(t,n){return Dn===null&&Mn(t),Hm(t,n)}function Hm(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},ya===null){if(t===null)throw Error(i(308));ya=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else ya=ya.next=n;return r}var Jv=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},ej=a.unstable_scheduleCallback,tj=a.unstable_NormalPriority,Vt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ud(){return{controller:new Jv,data:new Map,refCount:0}}function oi(t){t.refCount--,t.refCount===0&&ej(tj,function(){t.controller.abort()})}var di=null,hd=0,xl=0,bl=null;function sj(t,n){if(di===null){var r=di=[];hd=0,xl=pu(),bl={status:"pending",value:void 0,then:function(o){r.push(o)}}}return hd++,n.then(Ym,Ym),n}function Ym(){if(--hd===0&&di!==null){bl!==null&&(bl.status="fulfilled");var t=di;di=null,xl=0,bl=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function aj(t,n){var r=[],o={status:"pending",value:null,reason:null,then:function(m){r.push(m)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var m=0;m<r.length;m++)(0,r[m])(n)},function(m){for(o.status="rejected",o.reason=m,m=0;m<r.length;m++)(0,r[m])(void 0)}),o}var Vm=w.S;w.S=function(t,n){Tp=Xe(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&sj(t,n),Vm!==null&&Vm(t,n)};var Rn=k(null);function md(){var t=Rn.current;return t!==null?t:At.pooledCache}function Mr(t,n){n===null?ae(Rn,Rn.current):ae(Rn,n.pool)}function Pm(){var t=md();return t===null?null:{parent:Vt._currentValue,pool:t}}var yl=Error(i(460)),fd=Error(i(474)),Rr=Error(i(542)),$r={then:function(){}};function qm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Gm(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(pa,pa),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Wm(t),t;default:if(typeof n.status=="string")n.then(pa,pa);else{if(t=At,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var m=n;m.status="fulfilled",m.value=o}},function(o){if(n.status==="pending"){var m=n;m.status="rejected",m.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,Wm(t),t}throw In=n,yl}}function $n(t){try{var n=t._init;return n(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(In=r,yl):r}}var In=null;function Xm(){if(In===null)throw Error(i(459));var t=In;return In=null,t}function Wm(t){if(t===yl||t===Rr)throw Error(i(483))}var vl=null,ui=0;function Ir(t){var n=ui;return ui+=1,vl===null&&(vl=[]),Gm(vl,t,n)}function hi(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function Or(t,n){throw n.$$typeof===v?Error(i(525)):(t=Object.prototype.toString.call(n),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Km(t){function n(se,ee){if(t){var ne=se.deletions;ne===null?(se.deletions=[ee],se.flags|=16):ne.push(ee)}}function r(se,ee){if(!t)return null;for(;ee!==null;)n(se,ee),ee=ee.sibling;return null}function o(se){for(var ee=new Map;se!==null;)se.key!==null?ee.set(se.key,se):ee.set(se.index,se),se=se.sibling;return ee}function m(se,ee){return se=xa(se,ee),se.index=0,se.sibling=null,se}function p(se,ee,ne){return se.index=ne,t?(ne=se.alternate,ne!==null?(ne=ne.index,ne<ee?(se.flags|=67108866,ee):ne):(se.flags|=67108866,ee)):(se.flags|=1048576,ee)}function j(se){return t&&se.alternate===null&&(se.flags|=67108866),se}function R(se,ee,ne,xe){return ee===null||ee.tag!==6?(ee=sd(ne,se.mode,xe),ee.return=se,ee):(ee=m(ee,ne),ee.return=se,ee)}function Q(se,ee,ne,xe){var qe=ne.type;return qe===E?pe(se,ee,ne.props.children,xe,ne.key):ee!==null&&(ee.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===O&&$n(qe)===ee.type)?(ee=m(ee,ne.props),hi(ee,ne),ee.return=se,ee):(ee=Tr(ne.type,ne.key,ne.props,null,se.mode,xe),hi(ee,ne),ee.return=se,ee)}function ie(se,ee,ne,xe){return ee===null||ee.tag!==4||ee.stateNode.containerInfo!==ne.containerInfo||ee.stateNode.implementation!==ne.implementation?(ee=ad(ne,se.mode,xe),ee.return=se,ee):(ee=m(ee,ne.children||[]),ee.return=se,ee)}function pe(se,ee,ne,xe,qe){return ee===null||ee.tag!==7?(ee=_n(ne,se.mode,xe,qe),ee.return=se,ee):(ee=m(ee,ne),ee.return=se,ee)}function ye(se,ee,ne){if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return ee=sd(""+ee,se.mode,ne),ee.return=se,ee;if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case S:return ne=Tr(ee.type,ee.key,ee.props,null,se.mode,ne),hi(ne,ee),ne.return=se,ne;case N:return ee=ad(ee,se.mode,ne),ee.return=se,ee;case O:return ee=$n(ee),ye(se,ee,ne)}if(W(ee)||U(ee))return ee=_n(ee,se.mode,ne,null),ee.return=se,ee;if(typeof ee.then=="function")return ye(se,Ir(ee),ne);if(ee.$$typeof===D)return ye(se,Dr(se,ee),ne);Or(se,ee)}return null}function ce(se,ee,ne,xe){var qe=ee!==null?ee.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return qe!==null?null:R(se,ee,""+ne,xe);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case S:return ne.key===qe?Q(se,ee,ne,xe):null;case N:return ne.key===qe?ie(se,ee,ne,xe):null;case O:return ne=$n(ne),ce(se,ee,ne,xe)}if(W(ne)||U(ne))return qe!==null?null:pe(se,ee,ne,xe,null);if(typeof ne.then=="function")return ce(se,ee,Ir(ne),xe);if(ne.$$typeof===D)return ce(se,ee,Dr(se,ne),xe);Or(se,ne)}return null}function de(se,ee,ne,xe,qe){if(typeof xe=="string"&&xe!==""||typeof xe=="number"||typeof xe=="bigint")return se=se.get(ne)||null,R(ee,se,""+xe,qe);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case S:return se=se.get(xe.key===null?ne:xe.key)||null,Q(ee,se,xe,qe);case N:return se=se.get(xe.key===null?ne:xe.key)||null,ie(ee,se,xe,qe);case O:return xe=$n(xe),de(se,ee,ne,xe,qe)}if(W(xe)||U(xe))return se=se.get(ne)||null,pe(ee,se,xe,qe,null);if(typeof xe.then=="function")return de(se,ee,ne,Ir(xe),qe);if(xe.$$typeof===D)return de(se,ee,ne,Dr(ee,xe),qe);Or(ee,xe)}return null}function Ue(se,ee,ne,xe){for(var qe=null,ft=null,Ve=ee,at=ee=0,ot=null;Ve!==null&&at<ne.length;at++){Ve.index>at?(ot=Ve,Ve=null):ot=Ve.sibling;var pt=ce(se,Ve,ne[at],xe);if(pt===null){Ve===null&&(Ve=ot);break}t&&Ve&&pt.alternate===null&&n(se,Ve),ee=p(pt,ee,at),ft===null?qe=pt:ft.sibling=pt,ft=pt,Ve=ot}if(at===ne.length)return r(se,Ve),ut&&ba(se,at),qe;if(Ve===null){for(;at<ne.length;at++)Ve=ye(se,ne[at],xe),Ve!==null&&(ee=p(Ve,ee,at),ft===null?qe=Ve:ft.sibling=Ve,ft=Ve);return ut&&ba(se,at),qe}for(Ve=o(Ve);at<ne.length;at++)ot=de(Ve,se,at,ne[at],xe),ot!==null&&(t&&ot.alternate!==null&&Ve.delete(ot.key===null?at:ot.key),ee=p(ot,ee,at),ft===null?qe=ot:ft.sibling=ot,ft=ot);return t&&Ve.forEach(function(un){return n(se,un)}),ut&&ba(se,at),qe}function We(se,ee,ne,xe){if(ne==null)throw Error(i(151));for(var qe=null,ft=null,Ve=ee,at=ee=0,ot=null,pt=ne.next();Ve!==null&&!pt.done;at++,pt=ne.next()){Ve.index>at?(ot=Ve,Ve=null):ot=Ve.sibling;var un=ce(se,Ve,pt.value,xe);if(un===null){Ve===null&&(Ve=ot);break}t&&Ve&&un.alternate===null&&n(se,Ve),ee=p(un,ee,at),ft===null?qe=un:ft.sibling=un,ft=un,Ve=ot}if(pt.done)return r(se,Ve),ut&&ba(se,at),qe;if(Ve===null){for(;!pt.done;at++,pt=ne.next())pt=ye(se,pt.value,xe),pt!==null&&(ee=p(pt,ee,at),ft===null?qe=pt:ft.sibling=pt,ft=pt);return ut&&ba(se,at),qe}for(Ve=o(Ve);!pt.done;at++,pt=ne.next())pt=de(Ve,se,at,pt.value,xe),pt!==null&&(t&&pt.alternate!==null&&Ve.delete(pt.key===null?at:pt.key),ee=p(pt,ee,at),ft===null?qe=pt:ft.sibling=pt,ft=pt);return t&&Ve.forEach(function(f0){return n(se,f0)}),ut&&ba(se,at),qe}function Ct(se,ee,ne,xe){if(typeof ne=="object"&&ne!==null&&ne.type===E&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case S:e:{for(var qe=ne.key;ee!==null;){if(ee.key===qe){if(qe=ne.type,qe===E){if(ee.tag===7){r(se,ee.sibling),xe=m(ee,ne.props.children),xe.return=se,se=xe;break e}}else if(ee.elementType===qe||typeof qe=="object"&&qe!==null&&qe.$$typeof===O&&$n(qe)===ee.type){r(se,ee.sibling),xe=m(ee,ne.props),hi(xe,ne),xe.return=se,se=xe;break e}r(se,ee);break}else n(se,ee);ee=ee.sibling}ne.type===E?(xe=_n(ne.props.children,se.mode,xe,ne.key),xe.return=se,se=xe):(xe=Tr(ne.type,ne.key,ne.props,null,se.mode,xe),hi(xe,ne),xe.return=se,se=xe)}return j(se);case N:e:{for(qe=ne.key;ee!==null;){if(ee.key===qe)if(ee.tag===4&&ee.stateNode.containerInfo===ne.containerInfo&&ee.stateNode.implementation===ne.implementation){r(se,ee.sibling),xe=m(ee,ne.children||[]),xe.return=se,se=xe;break e}else{r(se,ee);break}else n(se,ee);ee=ee.sibling}xe=ad(ne,se.mode,xe),xe.return=se,se=xe}return j(se);case O:return ne=$n(ne),Ct(se,ee,ne,xe)}if(W(ne))return Ue(se,ee,ne,xe);if(U(ne)){if(qe=U(ne),typeof qe!="function")throw Error(i(150));return ne=qe.call(ne),We(se,ee,ne,xe)}if(typeof ne.then=="function")return Ct(se,ee,Ir(ne),xe);if(ne.$$typeof===D)return Ct(se,ee,Dr(se,ne),xe);Or(se,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,ee!==null&&ee.tag===6?(r(se,ee.sibling),xe=m(ee,ne),xe.return=se,se=xe):(r(se,ee),xe=sd(ne,se.mode,xe),xe.return=se,se=xe),j(se)):r(se,ee)}return function(se,ee,ne,xe){try{ui=0;var qe=Ct(se,ee,ne,xe);return vl=null,qe}catch(Ve){if(Ve===yl||Ve===Rr)throw Ve;var ft=Cs(29,Ve,null,se.mode);return ft.lanes=xe,ft.return=se,ft}finally{}}}var On=Km(!0),Qm=Km(!1),Ga=!1;function pd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function gd(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Xa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Wa(t,n,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(bt&2)!==0){var m=o.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),o.pending=n,n=Er(t),$m(t,null,r),n}return Ar(t,o,n,r),Er(t)}function mi(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,Jn(t,r)}}function xd(t,n){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var m=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var j={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?m=p=j:p=p.next=j,r=r.next}while(r!==null);p===null?m=p=n:p=p.next=n}else m=p=n;r={baseState:o.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var bd=!1;function fi(){if(bd){var t=bl;if(t!==null)throw t}}function pi(t,n,r,o){bd=!1;var m=t.updateQueue;Ga=!1;var p=m.firstBaseUpdate,j=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var Q=R,ie=Q.next;Q.next=null,j===null?p=ie:j.next=ie,j=Q;var pe=t.alternate;pe!==null&&(pe=pe.updateQueue,R=pe.lastBaseUpdate,R!==j&&(R===null?pe.firstBaseUpdate=ie:R.next=ie,pe.lastBaseUpdate=Q))}if(p!==null){var ye=m.baseState;j=0,pe=ie=Q=null,R=p;do{var ce=R.lane&-536870913,de=ce!==R.lane;if(de?(ct&ce)===ce:(o&ce)===ce){ce!==0&&ce===xl&&(bd=!0),pe!==null&&(pe=pe.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Ue=t,We=R;ce=n;var Ct=r;switch(We.tag){case 1:if(Ue=We.payload,typeof Ue=="function"){ye=Ue.call(Ct,ye,ce);break e}ye=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=We.payload,ce=typeof Ue=="function"?Ue.call(Ct,ye,ce):Ue,ce==null)break e;ye=y({},ye,ce);break e;case 2:Ga=!0}}ce=R.callback,ce!==null&&(t.flags|=64,de&&(t.flags|=8192),de=m.callbacks,de===null?m.callbacks=[ce]:de.push(ce))}else de={lane:ce,tag:R.tag,payload:R.payload,callback:R.callback,next:null},pe===null?(ie=pe=de,Q=ye):pe=pe.next=de,j|=ce;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;de=R,R=de.next,de.next=null,m.lastBaseUpdate=de,m.shared.pending=null}}while(!0);pe===null&&(Q=ye),m.baseState=Q,m.firstBaseUpdate=ie,m.lastBaseUpdate=pe,p===null&&(m.shared.lanes=0),en|=j,t.lanes=j,t.memoizedState=ye}}function Zm(t,n){if(typeof t!="function")throw Error(i(191,t));t.call(n)}function Jm(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Zm(r[t],n)}var jl=k(null),Lr=k(0);function ef(t,n){t=_a,ae(Lr,t),ae(jl,n),_a=t|n.baseLanes}function yd(){ae(Lr,_a),ae(jl,jl.current)}function vd(){_a=Lr.current,X(jl),X(Lr)}var As=k(null),Bs=null;function Ka(t){var n=t.alternate;ae(Ut,Ut.current&1),ae(As,t),Bs===null&&(n===null||jl.current!==null||n.memoizedState!==null)&&(Bs=t)}function jd(t){ae(Ut,Ut.current),ae(As,t),Bs===null&&(Bs=t)}function tf(t){t.tag===22?(ae(Ut,Ut.current),ae(As,t),Bs===null&&(Bs=t)):Qa()}function Qa(){ae(Ut,Ut.current),ae(As,As.current)}function Es(t){X(As),Bs===t&&(Bs=null),X(Ut)}var Ut=k(0);function zr(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Eu(r)||Tu(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ja=0,tt=null,St=null,Pt=null,Ur=!1,Nl=!1,Ln=!1,Br=0,gi=0,Sl=null,nj=0;function Lt(){throw Error(i(321))}function Nd(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!ws(t[r],n[r]))return!1;return!0}function Sd(t,n,r,o,m,p){return ja=p,tt=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,w.H=t===null||t.memoizedState===null?Uf:zd,Ln=!1,p=r(o,m),Ln=!1,Nl&&(p=af(n,r,o,m)),sf(t),p}function sf(t){w.H=yi;var n=St!==null&&St.next!==null;if(ja=0,Pt=St=tt=null,Ur=!1,gi=0,Sl=null,n)throw Error(i(300));t===null||qt||(t=t.dependencies,t!==null&&kr(t)&&(qt=!0))}function af(t,n,r,o){tt=t;var m=0;do{if(Nl&&(Sl=null),gi=0,Nl=!1,25<=m)throw Error(i(301));if(m+=1,Pt=St=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}w.H=Bf,p=n(r,o)}while(Nl);return p}function lj(){var t=w.H,n=t.useState()[0];return n=typeof n.then=="function"?xi(n):n,t=t.useState()[0],(St!==null?St.memoizedState:null)!==t&&(tt.flags|=1024),n}function wd(){var t=Br!==0;return Br=0,t}function Cd(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function Ad(t){if(Ur){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Ur=!1}ja=0,Pt=St=tt=null,Nl=!1,gi=Br=0,Sl=null}function us(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?tt.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function Bt(){if(St===null){var t=tt.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var n=Pt===null?tt.memoizedState:Pt.next;if(n!==null)Pt=n,St=t;else{if(t===null)throw tt.alternate===null?Error(i(467)):Error(i(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Pt===null?tt.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function Fr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function xi(t){var n=gi;return gi+=1,Sl===null&&(Sl=[]),t=Gm(Sl,t,n),n=tt,(Pt===null?n.memoizedState:Pt.next)===null&&(n=n.alternate,w.H=n===null||n.memoizedState===null?Uf:zd),t}function Hr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return xi(t);if(t.$$typeof===D)return ns(t)}throw Error(i(438,String(t)))}function Ed(t){var n=null,r=tt.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=tt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(m){return m.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Fr(),tt.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),o=0;o<t;o++)r[o]=C;return n.index++,r}function Na(t,n){return typeof n=="function"?n(t):n}function Yr(t){var n=Bt();return Td(n,St,t)}function Td(t,n,r){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var m=t.baseQueue,p=o.pending;if(p!==null){if(m!==null){var j=m.next;m.next=p.next,p.next=j}n.baseQueue=m=p,o.pending=null}if(p=t.baseState,m===null)t.memoizedState=p;else{n=m.next;var R=j=null,Q=null,ie=n,pe=!1;do{var ye=ie.lane&-536870913;if(ye!==ie.lane?(ct&ye)===ye:(ja&ye)===ye){var ce=ie.revertLane;if(ce===0)Q!==null&&(Q=Q.next={lane:0,revertLane:0,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null}),ye===xl&&(pe=!0);else if((ja&ce)===ce){ie=ie.next,ce===xl&&(pe=!0);continue}else ye={lane:0,revertLane:ie.revertLane,gesture:null,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},Q===null?(R=Q=ye,j=p):Q=Q.next=ye,tt.lanes|=ce,en|=ce;ye=ie.action,Ln&&r(p,ye),p=ie.hasEagerState?ie.eagerState:r(p,ye)}else ce={lane:ye,revertLane:ie.revertLane,gesture:ie.gesture,action:ie.action,hasEagerState:ie.hasEagerState,eagerState:ie.eagerState,next:null},Q===null?(R=Q=ce,j=p):Q=Q.next=ce,tt.lanes|=ye,en|=ye;ie=ie.next}while(ie!==null&&ie!==n);if(Q===null?j=p:Q.next=R,!ws(p,t.memoizedState)&&(qt=!0,pe&&(r=bl,r!==null)))throw r;t.memoizedState=p,t.baseState=j,t.baseQueue=Q,o.lastRenderedState=p}return m===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function _d(t){var n=Bt(),r=n.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=t;var o=r.dispatch,m=r.pending,p=n.memoizedState;if(m!==null){r.pending=null;var j=m=m.next;do p=t(p,j.action),j=j.next;while(j!==m);ws(p,n.memoizedState)||(qt=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),r.lastRenderedState=p}return[p,o]}function nf(t,n,r){var o=tt,m=Bt(),p=ut;if(p){if(r===void 0)throw Error(i(407));r=r()}else r=n();var j=!ws((St||m).memoizedState,r);if(j&&(m.memoizedState=r,qt=!0),m=m.queue,Md(cf.bind(null,o,m,t),[t]),m.getSnapshot!==n||j||Pt!==null&&Pt.memoizedState.tag&1){if(o.flags|=2048,wl(9,{destroy:void 0},rf.bind(null,o,m,r,n),null),At===null)throw Error(i(349));p||(ja&127)!==0||lf(o,n,r)}return r}function lf(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=tt.updateQueue,n===null?(n=Fr(),tt.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function rf(t,n,r,o){n.value=r,n.getSnapshot=o,of(n)&&df(t)}function cf(t,n,r){return r(function(){of(n)&&df(t)})}function of(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!ws(t,r)}catch{return!0}}function df(t){var n=Tn(t,2);n!==null&&xs(n,t,2)}function kd(t){var n=us();if(typeof t=="function"){var r=t;if(t=r(),Ln){Xs(!0);try{r()}finally{Xs(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:t},n}function uf(t,n,r,o){return t.baseState=r,Td(t,St,typeof o=="function"?o:Na)}function ij(t,n,r,o,m){if(qr(t))throw Error(i(485));if(t=n.action,t!==null){var p={payload:m,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){p.listeners.push(j)}};w.T!==null?r(!0):p.isTransition=!1,o(p),r=n.pending,r===null?(p.next=n.pending=p,hf(n,p)):(p.next=r.next,n.pending=r.next=p)}}function hf(t,n){var r=n.action,o=n.payload,m=t.state;if(n.isTransition){var p=w.T,j={};w.T=j;try{var R=r(m,o),Q=w.S;Q!==null&&Q(j,R),mf(t,n,R)}catch(ie){Dd(t,n,ie)}finally{p!==null&&j.types!==null&&(p.types=j.types),w.T=p}}else try{p=r(m,o),mf(t,n,p)}catch(ie){Dd(t,n,ie)}}function mf(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){ff(t,n,o)},function(o){return Dd(t,n,o)}):ff(t,n,r)}function ff(t,n,r){n.status="fulfilled",n.value=r,pf(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,hf(t,r)))}function Dd(t,n,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,pf(n),n=n.next;while(n!==o)}t.action=null}function pf(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function gf(t,n){return n}function xf(t,n){if(ut){var r=At.formState;if(r!==null){e:{var o=tt;if(ut){if(_t){t:{for(var m=_t,p=Us;m.nodeType!==8;){if(!p){m=null;break t}if(m=Fs(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){_t=Fs(m.nextSibling),o=m.data==="F!";break e}}Pa(o)}o=!1}o&&(n=r[0])}}return r=us(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gf,lastRenderedState:n},r.queue=o,r=Of.bind(null,tt,o),o.dispatch=r,o=kd(!1),p=Ld.bind(null,tt,!1,o.queue),o=us(),m={state:n,dispatch:null,action:t,pending:null},o.queue=m,r=ij.bind(null,tt,m,p,r),m.dispatch=r,o.memoizedState=t,[n,r,!1]}function bf(t){var n=Bt();return yf(n,St,t)}function yf(t,n,r){if(n=Td(t,n,gf)[0],t=Yr(Na)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=xi(n)}catch(j){throw j===yl?Rr:j}else o=n;n=Bt();var m=n.queue,p=m.dispatch;return r!==n.memoizedState&&(tt.flags|=2048,wl(9,{destroy:void 0},rj.bind(null,m,r),null)),[o,p,t]}function rj(t,n){t.action=n}function vf(t){var n=Bt(),r=St;if(r!==null)return yf(n,r,t);Bt(),n=n.memoizedState,r=Bt();var o=r.queue.dispatch;return r.memoizedState=t,[n,o,!1]}function wl(t,n,r,o){return t={tag:t,create:r,deps:o,inst:n,next:null},n=tt.updateQueue,n===null&&(n=Fr(),tt.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,n.lastEffect=t),t}function jf(){return Bt().memoizedState}function Vr(t,n,r,o){var m=us();tt.flags|=t,m.memoizedState=wl(1|n,{destroy:void 0},r,o===void 0?null:o)}function Pr(t,n,r,o){var m=Bt();o=o===void 0?null:o;var p=m.memoizedState.inst;St!==null&&o!==null&&Nd(o,St.memoizedState.deps)?m.memoizedState=wl(n,p,r,o):(tt.flags|=t,m.memoizedState=wl(1|n,p,r,o))}function Nf(t,n){Vr(8390656,8,t,n)}function Md(t,n){Pr(2048,8,t,n)}function cj(t){tt.flags|=4;var n=tt.updateQueue;if(n===null)n=Fr(),tt.updateQueue=n,n.events=[t];else{var r=n.events;r===null?n.events=[t]:r.push(t)}}function Sf(t){var n=Bt().memoizedState;return cj({ref:n,nextImpl:t}),function(){if((bt&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function wf(t,n){return Pr(4,2,t,n)}function Cf(t,n){return Pr(4,4,t,n)}function Af(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function Ef(t,n,r){r=r!=null?r.concat([t]):null,Pr(4,4,Af.bind(null,n,t),r)}function Rd(){}function Tf(t,n){var r=Bt();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&Nd(n,o[1])?o[0]:(r.memoizedState=[t,n],t)}function _f(t,n){var r=Bt();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&Nd(n,o[1]))return o[0];if(o=t(),Ln){Xs(!0);try{t()}finally{Xs(!1)}}return r.memoizedState=[o,n],o}function $d(t,n,r){return r===void 0||(ja&1073741824)!==0&&(ct&261930)===0?t.memoizedState=n:(t.memoizedState=r,t=kp(),tt.lanes|=t,en|=t,r)}function kf(t,n,r,o){return ws(r,n)?r:jl.current!==null?(t=$d(t,r,o),ws(t,n)||(qt=!0),t):(ja&42)===0||(ja&1073741824)!==0&&(ct&261930)===0?(qt=!0,t.memoizedState=r):(t=kp(),tt.lanes|=t,en|=t,n)}function Df(t,n,r,o,m){var p=M.p;M.p=p!==0&&8>p?p:8;var j=w.T,R={};w.T=R,Ld(t,!1,n,r);try{var Q=m(),ie=w.S;if(ie!==null&&ie(R,Q),Q!==null&&typeof Q=="object"&&typeof Q.then=="function"){var pe=aj(Q,o);bi(t,n,pe,ks(t))}else bi(t,n,o,ks(t))}catch(ye){bi(t,n,{then:function(){},status:"rejected",reason:ye},ks())}finally{M.p=p,j!==null&&R.types!==null&&(j.types=R.types),w.T=j}}function oj(){}function Id(t,n,r,o){if(t.tag!==5)throw Error(i(476));var m=Mf(t).queue;Df(t,m,n,B,r===null?oj:function(){return Rf(t),r(o)})}function Mf(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:B,baseState:B,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:B},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function Rf(t){var n=Mf(t);n.next===null&&(n=t.alternate.memoizedState),bi(t,n.next.queue,{},ks())}function Od(){return ns(Ii)}function $f(){return Bt().memoizedState}function If(){return Bt().memoizedState}function dj(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=ks();t=Xa(r);var o=Wa(n,t,r);o!==null&&(xs(o,n,r),mi(o,n,r)),n={cache:ud()},t.payload=n;return}n=n.return}}function uj(t,n,r){var o=ks();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},qr(t)?Lf(n,r):(r=ed(t,n,r,o),r!==null&&(xs(r,t,o),zf(r,n,o)))}function Of(t,n,r){var o=ks();bi(t,n,r,o)}function bi(t,n,r,o){var m={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(qr(t))Lf(n,m);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var j=n.lastRenderedState,R=p(j,r);if(m.hasEagerState=!0,m.eagerState=R,ws(R,j))return Ar(t,n,m,0),At===null&&Cr(),!1}catch{}finally{}if(r=ed(t,n,m,o),r!==null)return xs(r,t,o),zf(r,n,o),!0}return!1}function Ld(t,n,r,o){if(o={lane:2,revertLane:pu(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},qr(t)){if(n)throw Error(i(479))}else n=ed(t,r,o,2),n!==null&&xs(n,t,2)}function qr(t){var n=t.alternate;return t===tt||n!==null&&n===tt}function Lf(t,n){Nl=Ur=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function zf(t,n,r){if((r&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,Jn(t,r)}}var yi={readContext:ns,use:Hr,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt,useHostTransitionStatus:Lt,useFormState:Lt,useActionState:Lt,useOptimistic:Lt,useMemoCache:Lt,useCacheRefresh:Lt};yi.useEffectEvent=Lt;var Uf={readContext:ns,use:Hr,useCallback:function(t,n){return us().memoizedState=[t,n===void 0?null:n],t},useContext:ns,useEffect:Nf,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,Vr(4194308,4,Af.bind(null,n,t),r)},useLayoutEffect:function(t,n){return Vr(4194308,4,t,n)},useInsertionEffect:function(t,n){Vr(4,2,t,n)},useMemo:function(t,n){var r=us();n=n===void 0?null:n;var o=t();if(Ln){Xs(!0);try{t()}finally{Xs(!1)}}return r.memoizedState=[o,n],o},useReducer:function(t,n,r){var o=us();if(r!==void 0){var m=r(n);if(Ln){Xs(!0);try{r(n)}finally{Xs(!1)}}}else m=n;return o.memoizedState=o.baseState=m,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:m},o.queue=t,t=t.dispatch=uj.bind(null,tt,t),[o.memoizedState,t]},useRef:function(t){var n=us();return t={current:t},n.memoizedState=t},useState:function(t){t=kd(t);var n=t.queue,r=Of.bind(null,tt,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:Rd,useDeferredValue:function(t,n){var r=us();return $d(r,t,n)},useTransition:function(){var t=kd(!1);return t=Df.bind(null,tt,t.queue,!0,!1),us().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var o=tt,m=us();if(ut){if(r===void 0)throw Error(i(407));r=r()}else{if(r=n(),At===null)throw Error(i(349));(ct&127)!==0||lf(o,n,r)}m.memoizedState=r;var p={value:r,getSnapshot:n};return m.queue=p,Nf(cf.bind(null,o,p,t),[t]),o.flags|=2048,wl(9,{destroy:void 0},rf.bind(null,o,p,r,n),null),r},useId:function(){var t=us(),n=At.identifierPrefix;if(ut){var r=sa,o=ta;r=(o&~(1<<32-ts(o)-1)).toString(32)+r,n="_"+n+"R_"+r,r=Br++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=nj++,n="_"+n+"r_"+r.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Od,useFormState:xf,useActionState:xf,useOptimistic:function(t){var n=us();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Ld.bind(null,tt,!0,r),r.dispatch=n,[t,n]},useMemoCache:Ed,useCacheRefresh:function(){return us().memoizedState=dj.bind(null,tt)},useEffectEvent:function(t){var n=us(),r={impl:t};return n.memoizedState=r,function(){if((bt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},zd={readContext:ns,use:Hr,useCallback:Tf,useContext:ns,useEffect:Md,useImperativeHandle:Ef,useInsertionEffect:wf,useLayoutEffect:Cf,useMemo:_f,useReducer:Yr,useRef:jf,useState:function(){return Yr(Na)},useDebugValue:Rd,useDeferredValue:function(t,n){var r=Bt();return kf(r,St.memoizedState,t,n)},useTransition:function(){var t=Yr(Na)[0],n=Bt().memoizedState;return[typeof t=="boolean"?t:xi(t),n]},useSyncExternalStore:nf,useId:$f,useHostTransitionStatus:Od,useFormState:bf,useActionState:bf,useOptimistic:function(t,n){var r=Bt();return uf(r,St,t,n)},useMemoCache:Ed,useCacheRefresh:If};zd.useEffectEvent=Sf;var Bf={readContext:ns,use:Hr,useCallback:Tf,useContext:ns,useEffect:Md,useImperativeHandle:Ef,useInsertionEffect:wf,useLayoutEffect:Cf,useMemo:_f,useReducer:_d,useRef:jf,useState:function(){return _d(Na)},useDebugValue:Rd,useDeferredValue:function(t,n){var r=Bt();return St===null?$d(r,t,n):kf(r,St.memoizedState,t,n)},useTransition:function(){var t=_d(Na)[0],n=Bt().memoizedState;return[typeof t=="boolean"?t:xi(t),n]},useSyncExternalStore:nf,useId:$f,useHostTransitionStatus:Od,useFormState:vf,useActionState:vf,useOptimistic:function(t,n){var r=Bt();return St!==null?uf(r,St,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:Ed,useCacheRefresh:If};Bf.useEffectEvent=Sf;function Ud(t,n,r,o){n=t.memoizedState,r=r(o,n),r=r==null?n:y({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Bd={enqueueSetState:function(t,n,r){t=t._reactInternals;var o=ks(),m=Xa(o);m.payload=n,r!=null&&(m.callback=r),n=Wa(t,m,o),n!==null&&(xs(n,t,o),mi(n,t,o))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var o=ks(),m=Xa(o);m.tag=1,m.payload=n,r!=null&&(m.callback=r),n=Wa(t,m,o),n!==null&&(xs(n,t,o),mi(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=ks(),o=Xa(r);o.tag=2,n!=null&&(o.callback=n),n=Wa(t,o,r),n!==null&&(xs(n,t,r),mi(n,t,r))}};function Ff(t,n,r,o,m,p,j){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,p,j):n.prototype&&n.prototype.isPureReactComponent?!li(r,o)||!li(m,p):!0}function Hf(t,n,r,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==t&&Bd.enqueueReplaceState(n,n.state,null)}function zn(t,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(t=t.defaultProps){r===n&&(r=y({},r));for(var m in t)r[m]===void 0&&(r[m]=t[m])}return r}function Yf(t){wr(t)}function Vf(t){console.error(t)}function Pf(t){wr(t)}function Gr(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function qf(t,n,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Fd(t,n,r){return r=Xa(r),r.tag=3,r.payload={element:null},r.callback=function(){Gr(t,n)},r}function Gf(t){return t=Xa(t),t.tag=3,t}function Xf(t,n,r,o){var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var p=o.value;t.payload=function(){return m(p)},t.callback=function(){qf(n,r,o)}}var j=r.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(t.callback=function(){qf(n,r,o),typeof m!="function"&&(tn===null?tn=new Set([this]):tn.add(this));var R=o.stack;this.componentDidCatch(o.value,{componentStack:R!==null?R:""})})}function hj(t,n,r,o,m){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&gl(n,r,m,!0),r=As.current,r!==null){switch(r.tag){case 31:case 13:return Bs===null?lc():r.alternate===null&&zt===0&&(zt=3),r.flags&=-257,r.flags|=65536,r.lanes=m,o===$r?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),hu(t,o,m)),!1;case 22:return r.flags|=65536,o===$r?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),hu(t,o,m)),!1}throw Error(i(435,r.tag))}return hu(t,o,m),lc(),!1}if(ut)return n=As.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=m,o!==id&&(t=Error(i(422),{cause:o}),ci(Os(t,r)))):(o!==id&&(n=Error(i(423),{cause:o}),ci(Os(n,r))),t=t.current.alternate,t.flags|=65536,m&=-m,t.lanes|=m,o=Os(o,r),m=Fd(t.stateNode,o,m),xd(t,m),zt!==4&&(zt=2)),!1;var p=Error(i(520),{cause:o});if(p=Os(p,r),Ei===null?Ei=[p]:Ei.push(p),zt!==4&&(zt=2),n===null)return!0;o=Os(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=m&-m,r.lanes|=t,t=Fd(r.stateNode,o,t),xd(r,t),!1;case 1:if(n=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(tn===null||!tn.has(p))))return r.flags|=65536,m&=-m,r.lanes|=m,m=Gf(m),Xf(m,t,r,o),xd(r,m),!1}r=r.return}while(r!==null);return!1}var Hd=Error(i(461)),qt=!1;function ls(t,n,r,o){n.child=t===null?Qm(n,null,r,o):On(n,t.child,r,o)}function Wf(t,n,r,o,m){r=r.render;var p=n.ref;if("ref"in o){var j={};for(var R in o)R!=="ref"&&(j[R]=o[R])}else j=o;return Mn(n),o=Sd(t,n,r,j,p,m),R=wd(),t!==null&&!qt?(Cd(t,n,m),Sa(t,n,m)):(ut&&R&&nd(n),n.flags|=1,ls(t,n,o,m),n.child)}function Kf(t,n,r,o,m){if(t===null){var p=r.type;return typeof p=="function"&&!td(p)&&p.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=p,Qf(t,n,p,o,m)):(t=Tr(r.type,null,o,n,n.mode,m),t.ref=n.ref,t.return=n,n.child=t)}if(p=t.child,!Kd(t,m)){var j=p.memoizedProps;if(r=r.compare,r=r!==null?r:li,r(j,o)&&t.ref===n.ref)return Sa(t,n,m)}return n.flags|=1,t=xa(p,o),t.ref=n.ref,t.return=n,n.child=t}function Qf(t,n,r,o,m){if(t!==null){var p=t.memoizedProps;if(li(p,o)&&t.ref===n.ref)if(qt=!1,n.pendingProps=o=p,Kd(t,m))(t.flags&131072)!==0&&(qt=!0);else return n.lanes=t.lanes,Sa(t,n,m)}return Yd(t,n,r,o,m)}function Zf(t,n,r,o){var m=o.children,p=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,t!==null){for(o=n.child=t.child,m=0;o!==null;)m=m|o.lanes|o.childLanes,o=o.sibling;o=m&~p}else o=0,n.child=null;return Jf(t,n,p,r,o)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&Mr(n,p!==null?p.cachePool:null),p!==null?ef(n,p):yd(),tf(n);else return o=n.lanes=536870912,Jf(t,n,p!==null?p.baseLanes|r:r,r,o)}else p!==null?(Mr(n,p.cachePool),ef(n,p),Qa(),n.memoizedState=null):(t!==null&&Mr(n,null),yd(),Qa());return ls(t,n,m,r),n.child}function vi(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Jf(t,n,r,o,m){var p=md();return p=p===null?null:{parent:Vt._currentValue,pool:p},n.memoizedState={baseLanes:r,cachePool:p},t!==null&&Mr(n,null),yd(),tf(n),t!==null&&gl(t,n,o,!0),n.childLanes=m,null}function Xr(t,n){return n=Kr({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function ep(t,n,r){return On(n,t.child,null,r),t=Xr(n,n.pendingProps),t.flags|=2,Es(n),n.memoizedState=null,t}function mj(t,n,r){var o=n.pendingProps,m=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(ut){if(o.mode==="hidden")return t=Xr(n,o),n.lanes=536870912,vi(null,t);if(jd(n),(t=_t)?(t=hg(t,Us),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Ya!==null?{id:ta,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},r=Om(t),r.return=n,n.child=r,as=n,_t=null)):t=null,t===null)throw Pa(n);return n.lanes=536870912,null}return Xr(n,o)}var p=t.memoizedState;if(p!==null){var j=p.dehydrated;if(jd(n),m)if(n.flags&256)n.flags&=-257,n=ep(t,n,r);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(i(558));else if(qt||gl(t,n,r,!1),m=(r&t.childLanes)!==0,qt||m){if(o=At,o!==null&&(j=el(o,r),j!==0&&j!==p.retryLane))throw p.retryLane=j,Tn(t,j),xs(o,t,j),Hd;lc(),n=ep(t,n,r)}else t=p.treeContext,_t=Fs(j.nextSibling),as=n,ut=!0,Va=null,Us=!1,t!==null&&Um(n,t),n=Xr(n,o),n.flags|=4096;return n}return t=xa(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function Wr(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function Yd(t,n,r,o,m){return Mn(n),r=Sd(t,n,r,o,void 0,m),o=wd(),t!==null&&!qt?(Cd(t,n,m),Sa(t,n,m)):(ut&&o&&nd(n),n.flags|=1,ls(t,n,r,m),n.child)}function tp(t,n,r,o,m,p){return Mn(n),n.updateQueue=null,r=af(n,o,r,m),sf(t),o=wd(),t!==null&&!qt?(Cd(t,n,p),Sa(t,n,p)):(ut&&o&&nd(n),n.flags|=1,ls(t,n,r,p),n.child)}function sp(t,n,r,o,m){if(Mn(n),n.stateNode===null){var p=hl,j=r.contextType;typeof j=="object"&&j!==null&&(p=ns(j)),p=new r(o,p),n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Bd,n.stateNode=p,p._reactInternals=n,p=n.stateNode,p.props=o,p.state=n.memoizedState,p.refs={},pd(n),j=r.contextType,p.context=typeof j=="object"&&j!==null?ns(j):hl,p.state=n.memoizedState,j=r.getDerivedStateFromProps,typeof j=="function"&&(Ud(n,r,j,o),p.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(j=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),j!==p.state&&Bd.enqueueReplaceState(p,p.state,null),pi(n,o,p,m),fi(),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){p=n.stateNode;var R=n.memoizedProps,Q=zn(r,R);p.props=Q;var ie=p.context,pe=r.contextType;j=hl,typeof pe=="object"&&pe!==null&&(j=ns(pe));var ye=r.getDerivedStateFromProps;pe=typeof ye=="function"||typeof p.getSnapshotBeforeUpdate=="function",R=n.pendingProps!==R,pe||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(R||ie!==j)&&Hf(n,p,o,j),Ga=!1;var ce=n.memoizedState;p.state=ce,pi(n,o,p,m),fi(),ie=n.memoizedState,R||ce!==ie||Ga?(typeof ye=="function"&&(Ud(n,r,ye,o),ie=n.memoizedState),(Q=Ga||Ff(n,r,Q,o,ce,ie,j))?(pe||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=ie),p.props=o,p.state=ie,p.context=j,o=Q):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{p=n.stateNode,gd(t,n),j=n.memoizedProps,pe=zn(r,j),p.props=pe,ye=n.pendingProps,ce=p.context,ie=r.contextType,Q=hl,typeof ie=="object"&&ie!==null&&(Q=ns(ie)),R=r.getDerivedStateFromProps,(ie=typeof R=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(j!==ye||ce!==Q)&&Hf(n,p,o,Q),Ga=!1,ce=n.memoizedState,p.state=ce,pi(n,o,p,m),fi();var de=n.memoizedState;j!==ye||ce!==de||Ga||t!==null&&t.dependencies!==null&&kr(t.dependencies)?(typeof R=="function"&&(Ud(n,r,R,o),de=n.memoizedState),(pe=Ga||Ff(n,r,pe,o,ce,de,Q)||t!==null&&t.dependencies!==null&&kr(t.dependencies))?(ie||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(o,de,Q),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(o,de,Q)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||j===t.memoizedProps&&ce===t.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ce===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=de),p.props=o,p.state=de,p.context=Q,o=pe):(typeof p.componentDidUpdate!="function"||j===t.memoizedProps&&ce===t.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ce===t.memoizedState||(n.flags|=1024),o=!1)}return p=o,Wr(t,n),o=(n.flags&128)!==0,p||o?(p=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:p.render(),n.flags|=1,t!==null&&o?(n.child=On(n,t.child,null,m),n.child=On(n,null,r,m)):ls(t,n,r,m),n.memoizedState=p.state,t=n.child):t=Sa(t,n,m),t}function ap(t,n,r,o){return kn(),n.flags|=256,ls(t,n,r,o),n.child}var Vd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Pd(t){return{baseLanes:t,cachePool:Pm()}}function qd(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=_s),t}function np(t,n,r){var o=n.pendingProps,m=!1,p=(n.flags&128)!==0,j;if((j=p)||(j=t!==null&&t.memoizedState===null?!1:(Ut.current&2)!==0),j&&(m=!0,n.flags&=-129),j=(n.flags&32)!==0,n.flags&=-33,t===null){if(ut){if(m?Ka(n):Qa(),(t=_t)?(t=hg(t,Us),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Ya!==null?{id:ta,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},r=Om(t),r.return=n,n.child=r,as=n,_t=null)):t=null,t===null)throw Pa(n);return Tu(t)?n.lanes=32:n.lanes=536870912,null}var R=o.children;return o=o.fallback,m?(Qa(),m=n.mode,R=Kr({mode:"hidden",children:R},m),o=_n(o,m,r,null),R.return=n,o.return=n,R.sibling=o,n.child=R,o=n.child,o.memoizedState=Pd(r),o.childLanes=qd(t,j,r),n.memoizedState=Vd,vi(null,o)):(Ka(n),Gd(n,R))}var Q=t.memoizedState;if(Q!==null&&(R=Q.dehydrated,R!==null)){if(p)n.flags&256?(Ka(n),n.flags&=-257,n=Xd(t,n,r)):n.memoizedState!==null?(Qa(),n.child=t.child,n.flags|=128,n=null):(Qa(),R=o.fallback,m=n.mode,o=Kr({mode:"visible",children:o.children},m),R=_n(R,m,r,null),R.flags|=2,o.return=n,R.return=n,o.sibling=R,n.child=o,On(n,t.child,null,r),o=n.child,o.memoizedState=Pd(r),o.childLanes=qd(t,j,r),n.memoizedState=Vd,n=vi(null,o));else if(Ka(n),Tu(R)){if(j=R.nextSibling&&R.nextSibling.dataset,j)var ie=j.dgst;j=ie,o=Error(i(419)),o.stack="",o.digest=j,ci({value:o,source:null,stack:null}),n=Xd(t,n,r)}else if(qt||gl(t,n,r,!1),j=(r&t.childLanes)!==0,qt||j){if(j=At,j!==null&&(o=el(j,r),o!==0&&o!==Q.retryLane))throw Q.retryLane=o,Tn(t,o),xs(j,t,o),Hd;Eu(R)||lc(),n=Xd(t,n,r)}else Eu(R)?(n.flags|=192,n.child=t.child,n=null):(t=Q.treeContext,_t=Fs(R.nextSibling),as=n,ut=!0,Va=null,Us=!1,t!==null&&Um(n,t),n=Gd(n,o.children),n.flags|=4096);return n}return m?(Qa(),R=o.fallback,m=n.mode,Q=t.child,ie=Q.sibling,o=xa(Q,{mode:"hidden",children:o.children}),o.subtreeFlags=Q.subtreeFlags&65011712,ie!==null?R=xa(ie,R):(R=_n(R,m,r,null),R.flags|=2),R.return=n,o.return=n,o.sibling=R,n.child=o,vi(null,o),o=n.child,R=t.child.memoizedState,R===null?R=Pd(r):(m=R.cachePool,m!==null?(Q=Vt._currentValue,m=m.parent!==Q?{parent:Q,pool:Q}:m):m=Pm(),R={baseLanes:R.baseLanes|r,cachePool:m}),o.memoizedState=R,o.childLanes=qd(t,j,r),n.memoizedState=Vd,vi(t.child,o)):(Ka(n),r=t.child,t=r.sibling,r=xa(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,t!==null&&(j=n.deletions,j===null?(n.deletions=[t],n.flags|=16):j.push(t)),n.child=r,n.memoizedState=null,r)}function Gd(t,n){return n=Kr({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Kr(t,n){return t=Cs(22,t,null,n),t.lanes=0,t}function Xd(t,n,r){return On(n,t.child,null,r),t=Gd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function lp(t,n,r){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),od(t.return,n,r)}function Wd(t,n,r,o,m,p){var j=t.memoizedState;j===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:m,treeForkCount:p}:(j.isBackwards=n,j.rendering=null,j.renderingStartTime=0,j.last=o,j.tail=r,j.tailMode=m,j.treeForkCount=p)}function ip(t,n,r){var o=n.pendingProps,m=o.revealOrder,p=o.tail;o=o.children;var j=Ut.current,R=(j&2)!==0;if(R?(j=j&1|2,n.flags|=128):j&=1,ae(Ut,j),ls(t,n,o,r),o=ut?ri:0,!R&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&lp(t,r,n);else if(t.tag===19)lp(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(m){case"forwards":for(r=n.child,m=null;r!==null;)t=r.alternate,t!==null&&zr(t)===null&&(m=r),r=r.sibling;r=m,r===null?(m=n.child,n.child=null):(m=r.sibling,r.sibling=null),Wd(n,!1,m,r,p,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,m=n.child,n.child=null;m!==null;){if(t=m.alternate,t!==null&&zr(t)===null){n.child=m;break}t=m.sibling,m.sibling=r,r=m,m=t}Wd(n,!0,r,null,p,o);break;case"together":Wd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Sa(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),en|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(gl(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(i(153));if(n.child!==null){for(t=n.child,r=xa(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=xa(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Kd(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&kr(t)))}function fj(t,n,r){switch(n.tag){case 3:ve(n,n.stateNode.containerInfo),qa(n,Vt,t.memoizedState.cache),kn();break;case 27:case 5:J(n);break;case 4:ve(n,n.stateNode.containerInfo);break;case 10:qa(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,jd(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Ka(n),n.flags|=128,null):(r&n.child.childLanes)!==0?np(t,n,r):(Ka(n),t=Sa(t,n,r),t!==null?t.sibling:null);Ka(n);break;case 19:var m=(t.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(gl(t,n,r,!1),o=(r&n.childLanes)!==0),m){if(o)return ip(t,n,r);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),ae(Ut,Ut.current),o)break;return null;case 22:return n.lanes=0,Zf(t,n,r,n.pendingProps);case 24:qa(n,Vt,t.memoizedState.cache)}return Sa(t,n,r)}function rp(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)qt=!0;else{if(!Kd(t,r)&&(n.flags&128)===0)return qt=!1,fj(t,n,r);qt=(t.flags&131072)!==0}else qt=!1,ut&&(n.flags&1048576)!==0&&zm(n,ri,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=$n(n.elementType),n.type=t,typeof t=="function")td(t)?(o=zn(t,o),n.tag=1,n=sp(null,n,t,o,r)):(n.tag=0,n=Yd(null,n,t,o,r));else{if(t!=null){var m=t.$$typeof;if(m===I){n.tag=11,n=Wf(null,n,t,o,r);break e}else if(m===_){n.tag=14,n=Kf(null,n,t,o,r);break e}}throw n=z(t)||t,Error(i(306,n,""))}}return n;case 0:return Yd(t,n,n.type,n.pendingProps,r);case 1:return o=n.type,m=zn(o,n.pendingProps),sp(t,n,o,m,r);case 3:e:{if(ve(n,n.stateNode.containerInfo),t===null)throw Error(i(387));o=n.pendingProps;var p=n.memoizedState;m=p.element,gd(t,n),pi(n,o,null,r);var j=n.memoizedState;if(o=j.cache,qa(n,Vt,o),o!==p.cache&&dd(n,[Vt],r,!0),fi(),o=j.element,p.isDehydrated)if(p={element:o,isDehydrated:!1,cache:j.cache},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){n=ap(t,n,o,r);break e}else if(o!==m){m=Os(Error(i(424)),n),ci(m),n=ap(t,n,o,r);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_t=Fs(t.firstChild),as=n,ut=!0,Va=null,Us=!0,r=Qm(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(kn(),o===m){n=Sa(t,n,r);break e}ls(t,n,o,r)}n=n.child}return n;case 26:return Wr(t,n),t===null?(r=bg(n.type,null,n.pendingProps,null))?n.memoizedState=r:ut||(r=n.type,t=n.pendingProps,o=hc(K.current).createElement(r),o[V]=n,o[me]=t,is(o,r,t),Qe(o),n.stateNode=o):n.memoizedState=bg(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return J(n),t===null&&ut&&(o=n.stateNode=pg(n.type,n.pendingProps,K.current),as=n,Us=!0,m=_t,ln(n.type)?(_u=m,_t=Fs(o.firstChild)):_t=m),ls(t,n,n.pendingProps.children,r),Wr(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&ut&&((m=o=_t)&&(o=Vj(o,n.type,n.pendingProps,Us),o!==null?(n.stateNode=o,as=n,_t=Fs(o.firstChild),Us=!1,m=!0):m=!1),m||Pa(n)),J(n),m=n.type,p=n.pendingProps,j=t!==null?t.memoizedProps:null,o=p.children,wu(m,p)?o=null:j!==null&&wu(m,j)&&(n.flags|=32),n.memoizedState!==null&&(m=Sd(t,n,lj,null,null,r),Ii._currentValue=m),Wr(t,n),ls(t,n,o,r),n.child;case 6:return t===null&&ut&&((t=r=_t)&&(r=Pj(r,n.pendingProps,Us),r!==null?(n.stateNode=r,as=n,_t=null,t=!0):t=!1),t||Pa(n)),null;case 13:return np(t,n,r);case 4:return ve(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=On(n,null,o,r):ls(t,n,o,r),n.child;case 11:return Wf(t,n,n.type,n.pendingProps,r);case 7:return ls(t,n,n.pendingProps,r),n.child;case 8:return ls(t,n,n.pendingProps.children,r),n.child;case 12:return ls(t,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,qa(n,n.type,o.value),ls(t,n,o.children,r),n.child;case 9:return m=n.type._context,o=n.pendingProps.children,Mn(n),m=ns(m),o=o(m),n.flags|=1,ls(t,n,o,r),n.child;case 14:return Kf(t,n,n.type,n.pendingProps,r);case 15:return Qf(t,n,n.type,n.pendingProps,r);case 19:return ip(t,n,r);case 31:return mj(t,n,r);case 22:return Zf(t,n,r,n.pendingProps);case 24:return Mn(n),o=ns(Vt),t===null?(m=md(),m===null&&(m=At,p=ud(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=r),m=p),n.memoizedState={parent:o,cache:m},pd(n),qa(n,Vt,m)):((t.lanes&r)!==0&&(gd(t,n),pi(n,null,null,r),fi()),m=t.memoizedState,p=n.memoizedState,m.parent!==o?(m={parent:o,cache:o},n.memoizedState=m,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=m),qa(n,Vt,o)):(o=p.cache,qa(n,Vt,o),o!==m.cache&&dd(n,[Vt],r,!0))),ls(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function wa(t){t.flags|=4}function Qd(t,n,r,o,m){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(m&335544128)===m)if(t.stateNode.complete)t.flags|=8192;else if($p())t.flags|=8192;else throw In=$r,fd}else t.flags&=-16777217}function cp(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Sg(n))if($p())t.flags|=8192;else throw In=$r,fd}function Qr(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?fr():536870912,t.lanes|=n,Tl|=n)}function ji(t,n){if(!ut)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function kt(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(n)for(var m=t.child;m!==null;)r|=m.lanes|m.childLanes,o|=m.subtreeFlags&65011712,o|=m.flags&65011712,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)r|=m.lanes|m.childLanes,o|=m.subtreeFlags,o|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=o,t.childLanes=r,n}function pj(t,n,r){var o=n.pendingProps;switch(ld(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(n),null;case 1:return kt(n),null;case 3:return r=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),va(Vt),ke(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pl(n)?wa(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,rd())),kt(n),null;case 26:var m=n.type,p=n.memoizedState;return t===null?(wa(n),p!==null?(kt(n),cp(n,p)):(kt(n),Qd(n,m,null,o,r))):p?p!==t.memoizedState?(wa(n),kt(n),cp(n,p)):(kt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&wa(n),kt(n),Qd(n,m,t,o,r)),null;case 27:if(ue(n),r=K.current,m=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&wa(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return kt(n),null}t=Y.current,pl(n)?Bm(n):(t=pg(m,o,r),n.stateNode=t,wa(n))}return kt(n),null;case 5:if(ue(n),m=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&wa(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return kt(n),null}if(p=Y.current,pl(n))Bm(n);else{var j=hc(K.current);switch(p){case 1:p=j.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=j.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=j.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=j.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=j.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof o.is=="string"?j.createElement("select",{is:o.is}):j.createElement("select"),o.multiple?p.multiple=!0:o.size&&(p.size=o.size);break;default:p=typeof o.is=="string"?j.createElement(m,{is:o.is}):j.createElement(m)}}p[V]=n,p[me]=o;e:for(j=n.child;j!==null;){if(j.tag===5||j.tag===6)p.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===n)break e;for(;j.sibling===null;){if(j.return===null||j.return===n)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}n.stateNode=p;e:switch(is(p,m,o),m){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&wa(n)}}return kt(n),Qd(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,r),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&wa(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(i(166));if(t=K.current,pl(n)){if(t=n.stateNode,r=n.memoizedProps,o=null,m=as,m!==null)switch(m.tag){case 27:case 5:o=m.memoizedProps}t[V]=n,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||ng(t.nodeValue,r)),t||Pa(n,!0)}else t=hc(t).createTextNode(o),t[V]=n,n.stateNode=t}return kt(n),null;case 31:if(r=n.memoizedState,t===null||t.memoizedState!==null){if(o=pl(n),r!==null){if(t===null){if(!o)throw Error(i(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[V]=n}else kn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;kt(n),t=!1}else r=rd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return n.flags&256?(Es(n),n):(Es(n),null);if((n.flags&128)!==0)throw Error(i(558))}return kt(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(m=pl(n),o!==null&&o.dehydrated!==null){if(t===null){if(!m)throw Error(i(318));if(m=n.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[V]=n}else kn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;kt(n),m=!1}else m=rd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=m),m=!0;if(!m)return n.flags&256?(Es(n),n):(Es(n),null)}return Es(n),(n.flags&128)!==0?(n.lanes=r,n):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=n.child,m=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(m=o.alternate.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==m&&(o.flags|=2048)),r!==t&&r&&(n.child.flags|=8192),Qr(n,n.updateQueue),kt(n),null);case 4:return ke(),t===null&&yu(n.stateNode.containerInfo),kt(n),null;case 10:return va(n.type),kt(n),null;case 19:if(X(Ut),o=n.memoizedState,o===null)return kt(n),null;if(m=(n.flags&128)!==0,p=o.rendering,p===null)if(m)ji(o,!1);else{if(zt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(p=zr(t),p!==null){for(n.flags|=128,ji(o,!1),t=p.updateQueue,n.updateQueue=t,Qr(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)Im(r,t),r=r.sibling;return ae(Ut,Ut.current&1|2),ut&&ba(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&Xe()>sc&&(n.flags|=128,m=!0,ji(o,!1),n.lanes=4194304)}else{if(!m)if(t=zr(p),t!==null){if(n.flags|=128,m=!0,t=t.updateQueue,n.updateQueue=t,Qr(n,t),ji(o,!0),o.tail===null&&o.tailMode==="hidden"&&!p.alternate&&!ut)return kt(n),null}else 2*Xe()-o.renderingStartTime>sc&&r!==536870912&&(n.flags|=128,m=!0,ji(o,!1),n.lanes=4194304);o.isBackwards?(p.sibling=n.child,n.child=p):(t=o.last,t!==null?t.sibling=p:n.child=p,o.last=p)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,r=Ut.current,ae(Ut,m?r&1|2:r&1),ut&&ba(n,o.treeForkCount),t):(kt(n),null);case 22:case 23:return Es(n),vd(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(kt(n),n.subtreeFlags&6&&(n.flags|=8192)):kt(n),r=n.updateQueue,r!==null&&Qr(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),t!==null&&X(Rn),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),va(Vt),kt(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function gj(t,n){switch(ld(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return va(Vt),ke(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return ue(n),null;case 31:if(n.memoizedState!==null){if(Es(n),n.alternate===null)throw Error(i(340));kn()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Es(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(i(340));kn()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return X(Ut),null;case 4:return ke(),null;case 10:return va(n.type),null;case 22:case 23:return Es(n),vd(),t!==null&&X(Rn),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return va(Vt),null;case 25:return null;default:return null}}function op(t,n){switch(ld(n),n.tag){case 3:va(Vt),ke();break;case 26:case 27:case 5:ue(n);break;case 4:ke();break;case 31:n.memoizedState!==null&&Es(n);break;case 13:Es(n);break;case 19:X(Ut);break;case 10:va(n.type);break;case 22:case 23:Es(n),vd(),t!==null&&X(Rn);break;case 24:va(Vt)}}function Ni(t,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var m=o.next;r=m;do{if((r.tag&t)===t){o=void 0;var p=r.create,j=r.inst;o=p(),j.destroy=o}r=r.next}while(r!==m)}}catch(R){jt(n,n.return,R)}}function Za(t,n,r){try{var o=n.updateQueue,m=o!==null?o.lastEffect:null;if(m!==null){var p=m.next;o=p;do{if((o.tag&t)===t){var j=o.inst,R=j.destroy;if(R!==void 0){j.destroy=void 0,m=n;var Q=r,ie=R;try{ie()}catch(pe){jt(m,Q,pe)}}}o=o.next}while(o!==p)}}catch(pe){jt(n,n.return,pe)}}function dp(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{Jm(n,r)}catch(o){jt(t,t.return,o)}}}function up(t,n,r){r.props=zn(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){jt(t,n,o)}}function Si(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(m){jt(t,n,m)}}function aa(t,n){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(m){jt(t,n,m)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(m){jt(t,n,m)}else r.current=null}function hp(t){var n=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(m){jt(t,t.return,m)}}function Zd(t,n,r){try{var o=t.stateNode;zj(o,t.type,r,n),o[me]=n}catch(m){jt(t,t.return,m)}}function mp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&ln(t.type)||t.tag===4}function Jd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||mp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&ln(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function eu(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=pa));else if(o!==4&&(o===27&&ln(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(eu(t,n,r),t=t.sibling;t!==null;)eu(t,n,r),t=t.sibling}function Zr(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(o!==4&&(o===27&&ln(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(Zr(t,n,r),t=t.sibling;t!==null;)Zr(t,n,r),t=t.sibling}function fp(t){var n=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,m=n.attributes;m.length;)n.removeAttributeNode(m[0]);is(n,o,r),n[V]=t,n[me]=r}catch(p){jt(t,t.return,p)}}var Ca=!1,Gt=!1,tu=!1,pp=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function xj(t,n){if(t=t.containerInfo,Nu=yc,t=Am(t),Xo(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var m=o.anchorOffset,p=o.focusNode;o=o.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var j=0,R=-1,Q=-1,ie=0,pe=0,ye=t,ce=null;t:for(;;){for(var de;ye!==r||m!==0&&ye.nodeType!==3||(R=j+m),ye!==p||o!==0&&ye.nodeType!==3||(Q=j+o),ye.nodeType===3&&(j+=ye.nodeValue.length),(de=ye.firstChild)!==null;)ce=ye,ye=de;for(;;){if(ye===t)break t;if(ce===r&&++ie===m&&(R=j),ce===p&&++pe===o&&(Q=j),(de=ye.nextSibling)!==null)break;ye=ce,ce=ye.parentNode}ye=de}r=R===-1||Q===-1?null:{start:R,end:Q}}else r=null}r=r||{start:0,end:0}}else r=null;for(Su={focusedElem:t,selectionRange:r},yc=!1,Qt=n;Qt!==null;)if(n=Qt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Qt=t;else for(;Qt!==null;){switch(n=Qt,p=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)m=t[r],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,r=n,m=p.memoizedProps,p=p.memoizedState,o=r.stateNode;try{var Ue=zn(r.type,m);t=o.getSnapshotBeforeUpdate(Ue,p),o.__reactInternalSnapshotBeforeUpdate=t}catch(We){jt(r,r.return,We)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)Au(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Au(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=n.sibling,t!==null){t.return=n.return,Qt=t;break}Qt=n.return}}function gp(t,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Ea(t,r),o&4&&Ni(5,r);break;case 1:if(Ea(t,r),o&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(j){jt(r,r.return,j)}else{var m=zn(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(m,n,t.__reactInternalSnapshotBeforeUpdate)}catch(j){jt(r,r.return,j)}}o&64&&dp(r),o&512&&Si(r,r.return);break;case 3:if(Ea(t,r),o&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Jm(t,n)}catch(j){jt(r,r.return,j)}}break;case 27:n===null&&o&4&&fp(r);case 26:case 5:Ea(t,r),n===null&&o&4&&hp(r),o&512&&Si(r,r.return);break;case 12:Ea(t,r);break;case 31:Ea(t,r),o&4&&yp(t,r);break;case 13:Ea(t,r),o&4&&vp(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=Aj.bind(null,r),qj(t,r))));break;case 22:if(o=r.memoizedState!==null||Ca,!o){n=n!==null&&n.memoizedState!==null||Gt,m=Ca;var p=Gt;Ca=o,(Gt=n)&&!p?Ta(t,r,(r.subtreeFlags&8772)!==0):Ea(t,r),Ca=m,Gt=p}break;case 30:break;default:Ea(t,r)}}function xp(t){var n=t.alternate;n!==null&&(t.alternate=null,xp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Ee(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var $t=null,ms=!1;function Aa(t,n,r){for(r=r.child;r!==null;)bp(t,n,r),r=r.sibling}function bp(t,n,r){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(ha,r)}catch{}switch(r.tag){case 26:Gt||aa(r,n),Aa(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Gt||aa(r,n);var o=$t,m=ms;ln(r.type)&&($t=r.stateNode,ms=!1),Aa(t,n,r),Mi(r.stateNode),$t=o,ms=m;break;case 5:Gt||aa(r,n);case 6:if(o=$t,m=ms,$t=null,Aa(t,n,r),$t=o,ms=m,$t!==null)if(ms)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(r.stateNode)}catch(p){jt(r,n,p)}else try{$t.removeChild(r.stateNode)}catch(p){jt(r,n,p)}break;case 18:$t!==null&&(ms?(t=$t,dg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Ol(t)):dg($t,r.stateNode));break;case 4:o=$t,m=ms,$t=r.stateNode.containerInfo,ms=!0,Aa(t,n,r),$t=o,ms=m;break;case 0:case 11:case 14:case 15:Za(2,r,n),Gt||Za(4,r,n),Aa(t,n,r);break;case 1:Gt||(aa(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&up(r,n,o)),Aa(t,n,r);break;case 21:Aa(t,n,r);break;case 22:Gt=(o=Gt)||r.memoizedState!==null,Aa(t,n,r),Gt=o;break;default:Aa(t,n,r)}}function yp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Ol(t)}catch(r){jt(n,n.return,r)}}}function vp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Ol(t)}catch(r){jt(n,n.return,r)}}function bj(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new pp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new pp),n;default:throw Error(i(435,t.tag))}}function Jr(t,n){var r=bj(t);n.forEach(function(o){if(!r.has(o)){r.add(o);var m=Ej.bind(null,t,o);o.then(m,m)}})}function fs(t,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var m=r[o],p=t,j=n,R=j;e:for(;R!==null;){switch(R.tag){case 27:if(ln(R.type)){$t=R.stateNode,ms=!1;break e}break;case 5:$t=R.stateNode,ms=!1;break e;case 3:case 4:$t=R.stateNode.containerInfo,ms=!0;break e}R=R.return}if($t===null)throw Error(i(160));bp(p,j,m),$t=null,ms=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)jp(n,t),n=n.sibling}var Zs=null;function jp(t,n){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:fs(n,t),ps(t),o&4&&(Za(3,t,t.return),Ni(3,t),Za(5,t,t.return));break;case 1:fs(n,t),ps(t),o&512&&(Gt||r===null||aa(r,r.return)),o&64&&Ca&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var m=Zs;if(fs(n,t),ps(t),o&512&&(Gt||r===null||aa(r,r.return)),o&4){var p=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,m=m.ownerDocument||m;t:switch(o){case"title":p=m.getElementsByTagName("title")[0],(!p||p[Oe]||p[V]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(o),m.head.insertBefore(p,m.querySelector("head > title"))),is(p,o,r),p[V]=t,Qe(p),o=p;break e;case"link":var j=jg("link","href",m).get(o+(r.href||""));if(j){for(var R=0;R<j.length;R++)if(p=j[R],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){j.splice(R,1);break t}}p=m.createElement(o),is(p,o,r),m.head.appendChild(p);break;case"meta":if(j=jg("meta","content",m).get(o+(r.content||""))){for(R=0;R<j.length;R++)if(p=j[R],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){j.splice(R,1);break t}}p=m.createElement(o),is(p,o,r),m.head.appendChild(p);break;default:throw Error(i(468,o))}p[V]=t,Qe(p),o=p}t.stateNode=o}else Ng(m,t.type,t.stateNode);else t.stateNode=vg(m,o,t.memoizedProps);else p!==o?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,o===null?Ng(m,t.type,t.stateNode):vg(m,o,t.memoizedProps)):o===null&&t.stateNode!==null&&Zd(t,t.memoizedProps,r.memoizedProps)}break;case 27:fs(n,t),ps(t),o&512&&(Gt||r===null||aa(r,r.return)),r!==null&&o&4&&Zd(t,t.memoizedProps,r.memoizedProps);break;case 5:if(fs(n,t),ps(t),o&512&&(Gt||r===null||aa(r,r.return)),t.flags&32){m=t.stateNode;try{ll(m,"")}catch(Ue){jt(t,t.return,Ue)}}o&4&&t.stateNode!=null&&(m=t.memoizedProps,Zd(t,m,r!==null?r.memoizedProps:m)),o&1024&&(tu=!0);break;case 6:if(fs(n,t),ps(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(Ue){jt(t,t.return,Ue)}}break;case 3:if(pc=null,m=Zs,Zs=mc(n.containerInfo),fs(n,t),Zs=m,ps(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Ol(n.containerInfo)}catch(Ue){jt(t,t.return,Ue)}tu&&(tu=!1,Np(t));break;case 4:o=Zs,Zs=mc(t.stateNode.containerInfo),fs(n,t),ps(t),Zs=o;break;case 12:fs(n,t),ps(t);break;case 31:fs(n,t),ps(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Jr(t,o)));break;case 13:fs(n,t),ps(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(tc=Xe()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Jr(t,o)));break;case 22:m=t.memoizedState!==null;var Q=r!==null&&r.memoizedState!==null,ie=Ca,pe=Gt;if(Ca=ie||m,Gt=pe||Q,fs(n,t),Gt=pe,Ca=ie,ps(t),o&8192)e:for(n=t.stateNode,n._visibility=m?n._visibility&-2:n._visibility|1,m&&(r===null||Q||Ca||Gt||Un(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){Q=r=n;try{if(p=Q.stateNode,m)j=p.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{R=Q.stateNode;var ye=Q.memoizedProps.style,ce=ye!=null&&ye.hasOwnProperty("display")?ye.display:null;R.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(Ue){jt(Q,Q.return,Ue)}}}else if(n.tag===6){if(r===null){Q=n;try{Q.stateNode.nodeValue=m?"":Q.memoizedProps}catch(Ue){jt(Q,Q.return,Ue)}}}else if(n.tag===18){if(r===null){Q=n;try{var de=Q.stateNode;m?ug(de,!0):ug(Q.stateNode,!1)}catch(Ue){jt(Q,Q.return,Ue)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,Jr(t,r))));break;case 19:fs(n,t),ps(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,Jr(t,o)));break;case 30:break;case 21:break;default:fs(n,t),ps(t)}}function ps(t){var n=t.flags;if(n&2){try{for(var r,o=t.return;o!==null;){if(mp(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var m=r.stateNode,p=Jd(t);Zr(t,p,m);break;case 5:var j=r.stateNode;r.flags&32&&(ll(j,""),r.flags&=-33);var R=Jd(t);Zr(t,R,j);break;case 3:case 4:var Q=r.stateNode.containerInfo,ie=Jd(t);eu(t,ie,Q);break;default:throw Error(i(161))}}catch(pe){jt(t,t.return,pe)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function Np(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;Np(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Ea(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)gp(t,n.alternate,n),n=n.sibling}function Un(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Za(4,n,n.return),Un(n);break;case 1:aa(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&up(n,n.return,r),Un(n);break;case 27:Mi(n.stateNode);case 26:case 5:aa(n,n.return),Un(n);break;case 22:n.memoizedState===null&&Un(n);break;case 30:Un(n);break;default:Un(n)}t=t.sibling}}function Ta(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,m=t,p=n,j=p.flags;switch(p.tag){case 0:case 11:case 15:Ta(m,p,r),Ni(4,p);break;case 1:if(Ta(m,p,r),o=p,m=o.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(ie){jt(o,o.return,ie)}if(o=p,m=o.updateQueue,m!==null){var R=o.stateNode;try{var Q=m.shared.hiddenCallbacks;if(Q!==null)for(m.shared.hiddenCallbacks=null,m=0;m<Q.length;m++)Zm(Q[m],R)}catch(ie){jt(o,o.return,ie)}}r&&j&64&&dp(p),Si(p,p.return);break;case 27:fp(p);case 26:case 5:Ta(m,p,r),r&&o===null&&j&4&&hp(p),Si(p,p.return);break;case 12:Ta(m,p,r);break;case 31:Ta(m,p,r),r&&j&4&&yp(m,p);break;case 13:Ta(m,p,r),r&&j&4&&vp(m,p);break;case 22:p.memoizedState===null&&Ta(m,p,r),Si(p,p.return);break;case 30:break;default:Ta(m,p,r)}n=n.sibling}}function su(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&oi(r))}function au(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&oi(t))}function Js(t,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Sp(t,n,r,o),n=n.sibling}function Sp(t,n,r,o){var m=n.flags;switch(n.tag){case 0:case 11:case 15:Js(t,n,r,o),m&2048&&Ni(9,n);break;case 1:Js(t,n,r,o);break;case 3:Js(t,n,r,o),m&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&oi(t)));break;case 12:if(m&2048){Js(t,n,r,o),t=n.stateNode;try{var p=n.memoizedProps,j=p.id,R=p.onPostCommit;typeof R=="function"&&R(j,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(Q){jt(n,n.return,Q)}}else Js(t,n,r,o);break;case 31:Js(t,n,r,o);break;case 13:Js(t,n,r,o);break;case 23:break;case 22:p=n.stateNode,j=n.alternate,n.memoizedState!==null?p._visibility&2?Js(t,n,r,o):wi(t,n):p._visibility&2?Js(t,n,r,o):(p._visibility|=2,Cl(t,n,r,o,(n.subtreeFlags&10256)!==0||!1)),m&2048&&su(j,n);break;case 24:Js(t,n,r,o),m&2048&&au(n.alternate,n);break;default:Js(t,n,r,o)}}function Cl(t,n,r,o,m){for(m=m&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var p=t,j=n,R=r,Q=o,ie=j.flags;switch(j.tag){case 0:case 11:case 15:Cl(p,j,R,Q,m),Ni(8,j);break;case 23:break;case 22:var pe=j.stateNode;j.memoizedState!==null?pe._visibility&2?Cl(p,j,R,Q,m):wi(p,j):(pe._visibility|=2,Cl(p,j,R,Q,m)),m&&ie&2048&&su(j.alternate,j);break;case 24:Cl(p,j,R,Q,m),m&&ie&2048&&au(j.alternate,j);break;default:Cl(p,j,R,Q,m)}n=n.sibling}}function wi(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,o=n,m=o.flags;switch(o.tag){case 22:wi(r,o),m&2048&&su(o.alternate,o);break;case 24:wi(r,o),m&2048&&au(o.alternate,o);break;default:wi(r,o)}n=n.sibling}}var Ci=8192;function Al(t,n,r){if(t.subtreeFlags&Ci)for(t=t.child;t!==null;)wp(t,n,r),t=t.sibling}function wp(t,n,r){switch(t.tag){case 26:Al(t,n,r),t.flags&Ci&&t.memoizedState!==null&&n0(r,Zs,t.memoizedState,t.memoizedProps);break;case 5:Al(t,n,r);break;case 3:case 4:var o=Zs;Zs=mc(t.stateNode.containerInfo),Al(t,n,r),Zs=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Ci,Ci=16777216,Al(t,n,r),Ci=o):Al(t,n,r));break;default:Al(t,n,r)}}function Cp(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function Ai(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Qt=o,Ep(o,t)}Cp(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Ap(t),t=t.sibling}function Ap(t){switch(t.tag){case 0:case 11:case 15:Ai(t),t.flags&2048&&Za(9,t,t.return);break;case 3:Ai(t);break;case 12:Ai(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,ec(t)):Ai(t);break;default:Ai(t)}}function ec(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Qt=o,Ep(o,t)}Cp(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Za(8,n,n.return),ec(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,ec(n));break;default:ec(n)}t=t.sibling}}function Ep(t,n){for(;Qt!==null;){var r=Qt;switch(r.tag){case 0:case 11:case 15:Za(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:oi(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,Qt=o;else e:for(r=t;Qt!==null;){o=Qt;var m=o.sibling,p=o.return;if(xp(o),o===r){Qt=null;break e}if(m!==null){m.return=p,Qt=m;break e}Qt=p}}}var yj={getCacheForType:function(t){var n=ns(Vt),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r},cacheSignal:function(){return ns(Vt).controller.signal}},vj=typeof WeakMap=="function"?WeakMap:Map,bt=0,At=null,it=null,ct=0,vt=0,Ts=null,Ja=!1,El=!1,nu=!1,_a=0,zt=0,en=0,Bn=0,lu=0,_s=0,Tl=0,Ei=null,gs=null,iu=!1,tc=0,Tp=0,sc=1/0,ac=null,tn=null,Wt=0,sn=null,_l=null,ka=0,ru=0,cu=null,_p=null,Ti=0,ou=null;function ks(){return(bt&2)!==0&&ct!==0?ct&-ct:w.T!==null?pu():_e()}function kp(){if(_s===0)if((ct&536870912)===0||ut){var t=wn;wn<<=1,(wn&3932160)===0&&(wn=262144),_s=t}else _s=536870912;return t=As.current,t!==null&&(t.flags|=32),_s}function xs(t,n,r){(t===At&&(vt===2||vt===9)||t.cancelPendingCommit!==null)&&(kl(t,0),an(t,ct,_s,!1)),ds(t,r),((bt&2)===0||t!==At)&&(t===At&&((bt&2)===0&&(Bn|=r),zt===4&&an(t,ct,_s,!1)),na(t))}function Dp(t,n,r){if((bt&6)!==0)throw Error(i(327));var o=!r&&(n&127)===0&&(n&t.expiredLanes)===0||cs(t,n),m=o?Sj(t,n):uu(t,n,!0),p=o;do{if(m===0){El&&!o&&an(t,n,0,!1);break}else{if(r=t.current.alternate,p&&!jj(r)){m=uu(t,n,!1),p=!1;continue}if(m===2){if(p=n,t.errorRecoveryDisabledLanes&p)var j=0;else j=t.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){n=j;e:{var R=t;m=Ei;var Q=R.current.memoizedState.isDehydrated;if(Q&&(kl(R,j).flags|=256),j=uu(R,j,!1),j!==2){if(nu&&!Q){R.errorRecoveryDisabledLanes|=p,Bn|=p,m=4;break e}p=gs,gs=m,p!==null&&(gs===null?gs=p:gs.push.apply(gs,p))}m=j}if(p=!1,m!==2)continue}}if(m===1){kl(t,0),an(t,n,0,!0);break}e:{switch(o=t,p=m,p){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:an(o,n,_s,!Ja);break e;case 2:gs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(m=tc+300-Xe(),10<m)){if(an(o,n,_s,!Ja),Zn(o,0,!0)!==0)break e;ka=n,o.timeoutHandle=cg(Mp.bind(null,o,r,gs,ac,iu,n,_s,Bn,Tl,Ja,p,"Throttled",-0,0),m);break e}Mp(o,r,gs,ac,iu,n,_s,Bn,Tl,Ja,p,null,-0,0)}}break}while(!0);na(t)}function Mp(t,n,r,o,m,p,j,R,Q,ie,pe,ye,ce,de){if(t.timeoutHandle=-1,ye=n.subtreeFlags,ye&8192||(ye&16785408)===16785408){ye={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pa},wp(n,p,ye);var Ue=(p&62914560)===p?tc-Xe():(p&4194048)===p?Tp-Xe():0;if(Ue=l0(ye,Ue),Ue!==null){ka=p,t.cancelPendingCommit=Ue(Bp.bind(null,t,n,p,r,o,m,j,R,Q,pe,ye,null,ce,de)),an(t,p,j,!ie);return}}Bp(t,n,p,r,o,m,j,R,Q)}function jj(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var m=r[o],p=m.getSnapshot;m=m.value;try{if(!ws(p(),m))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function an(t,n,r,o){n&=~lu,n&=~Bn,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var m=n;0<m;){var p=31-ts(m),j=1<<p;o[p]=-1,m&=~j}r!==0&&Ms(t,r,n)}function nc(){return(bt&6)===0?(_i(0),!1):!0}function du(){if(it!==null){if(vt===0)var t=it.return;else t=it,ya=Dn=null,Ad(t),vl=null,ui=0,t=it;for(;t!==null;)op(t.alternate,t),t=t.return;it=null}}function kl(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,Fj(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),ka=0,du(),At=t,it=r=xa(t.current,null),ct=n,vt=0,Ts=null,Ja=!1,El=cs(t,n),nu=!1,Tl=_s=lu=Bn=en=zt=0,gs=Ei=null,iu=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var m=31-ts(o),p=1<<m;n|=t[m],o&=~p}return _a=n,Cr(),r}function Rp(t,n){tt=null,w.H=yi,n===yl||n===Rr?(n=Xm(),vt=3):n===fd?(n=Xm(),vt=4):vt=n===Hd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,Ts=n,it===null&&(zt=1,Gr(t,Os(n,t.current)))}function $p(){var t=As.current;return t===null?!0:(ct&4194048)===ct?Bs===null:(ct&62914560)===ct||(ct&536870912)!==0?t===Bs:!1}function Ip(){var t=w.H;return w.H=yi,t===null?yi:t}function Op(){var t=w.A;return w.A=yj,t}function lc(){zt=4,Ja||(ct&4194048)!==ct&&As.current!==null||(El=!0),(en&134217727)===0&&(Bn&134217727)===0||At===null||an(At,ct,_s,!1)}function uu(t,n,r){var o=bt;bt|=2;var m=Ip(),p=Op();(At!==t||ct!==n)&&(ac=null,kl(t,n)),n=!1;var j=zt;e:do try{if(vt!==0&&it!==null){var R=it,Q=Ts;switch(vt){case 8:du(),j=6;break e;case 3:case 2:case 9:case 6:As.current===null&&(n=!0);var ie=vt;if(vt=0,Ts=null,Dl(t,R,Q,ie),r&&El){j=0;break e}break;default:ie=vt,vt=0,Ts=null,Dl(t,R,Q,ie)}}Nj(),j=zt;break}catch(pe){Rp(t,pe)}while(!0);return n&&t.shellSuspendCounter++,ya=Dn=null,bt=o,w.H=m,w.A=p,it===null&&(At=null,ct=0,Cr()),j}function Nj(){for(;it!==null;)Lp(it)}function Sj(t,n){var r=bt;bt|=2;var o=Ip(),m=Op();At!==t||ct!==n?(ac=null,sc=Xe()+500,kl(t,n)):El=cs(t,n);e:do try{if(vt!==0&&it!==null){n=it;var p=Ts;t:switch(vt){case 1:vt=0,Ts=null,Dl(t,n,p,1);break;case 2:case 9:if(qm(p)){vt=0,Ts=null,zp(n);break}n=function(){vt!==2&&vt!==9||At!==t||(vt=7),na(t)},p.then(n,n);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:qm(p)?(vt=0,Ts=null,zp(n)):(vt=0,Ts=null,Dl(t,n,p,7));break;case 5:var j=null;switch(it.tag){case 26:j=it.memoizedState;case 5:case 27:var R=it;if(j?Sg(j):R.stateNode.complete){vt=0,Ts=null;var Q=R.sibling;if(Q!==null)it=Q;else{var ie=R.return;ie!==null?(it=ie,ic(ie)):it=null}break t}}vt=0,Ts=null,Dl(t,n,p,5);break;case 6:vt=0,Ts=null,Dl(t,n,p,6);break;case 8:du(),zt=6;break e;default:throw Error(i(462))}}wj();break}catch(pe){Rp(t,pe)}while(!0);return ya=Dn=null,w.H=o,w.A=m,bt=r,it!==null?0:(At=null,ct=0,Cr(),zt)}function wj(){for(;it!==null&&!we();)Lp(it)}function Lp(t){var n=rp(t.alternate,t,_a);t.memoizedProps=t.pendingProps,n===null?ic(t):it=n}function zp(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=tp(r,n,n.pendingProps,n.type,void 0,ct);break;case 11:n=tp(r,n,n.pendingProps,n.type.render,n.ref,ct);break;case 5:Ad(n);default:op(r,n),n=it=Im(n,_a),n=rp(r,n,_a)}t.memoizedProps=t.pendingProps,n===null?ic(t):it=n}function Dl(t,n,r,o){ya=Dn=null,Ad(n),vl=null,ui=0;var m=n.return;try{if(hj(t,m,n,r,ct)){zt=1,Gr(t,Os(r,t.current)),it=null;return}}catch(p){if(m!==null)throw it=m,p;zt=1,Gr(t,Os(r,t.current)),it=null;return}n.flags&32768?(ut||o===1?t=!0:El||(ct&536870912)!==0?t=!1:(Ja=t=!0,(o===2||o===9||o===3||o===6)&&(o=As.current,o!==null&&o.tag===13&&(o.flags|=16384))),Up(n,t)):ic(n)}function ic(t){var n=t;do{if((n.flags&32768)!==0){Up(n,Ja);return}t=n.return;var r=pj(n.alternate,n,_a);if(r!==null){it=r;return}if(n=n.sibling,n!==null){it=n;return}it=n=t}while(n!==null);zt===0&&(zt=5)}function Up(t,n){do{var r=gj(t.alternate,t);if(r!==null){r.flags&=32767,it=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){it=t;return}it=t=r}while(t!==null);zt=6,it=null}function Bp(t,n,r,o,m,p,j,R,Q){t.cancelPendingCommit=null;do rc();while(Wt!==0);if((bt&6)!==0)throw Error(i(327));if(n!==null){if(n===t.current)throw Error(i(177));if(p=n.lanes|n.childLanes,p|=Jo,fa(t,r,p,j,R,Q),t===At&&(it=At=null,ct=0),_l=n,sn=t,ka=r,ru=p,cu=m,_p=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,Tj(Ns,function(){return Pp(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=w.T,w.T=null,m=M.p,M.p=2,j=bt,bt|=4;try{xj(t,n,r)}finally{bt=j,M.p=m,w.T=o}}Wt=1,Fp(),Hp(),Yp()}}function Fp(){if(Wt===1){Wt=0;var t=sn,n=_l,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=w.T,w.T=null;var o=M.p;M.p=2;var m=bt;bt|=4;try{jp(n,t);var p=Su,j=Am(t.containerInfo),R=p.focusedElem,Q=p.selectionRange;if(j!==R&&R&&R.ownerDocument&&Cm(R.ownerDocument.documentElement,R)){if(Q!==null&&Xo(R)){var ie=Q.start,pe=Q.end;if(pe===void 0&&(pe=ie),"selectionStart"in R)R.selectionStart=ie,R.selectionEnd=Math.min(pe,R.value.length);else{var ye=R.ownerDocument||document,ce=ye&&ye.defaultView||window;if(ce.getSelection){var de=ce.getSelection(),Ue=R.textContent.length,We=Math.min(Q.start,Ue),Ct=Q.end===void 0?We:Math.min(Q.end,Ue);!de.extend&&We>Ct&&(j=Ct,Ct=We,We=j);var se=wm(R,We),ee=wm(R,Ct);if(se&&ee&&(de.rangeCount!==1||de.anchorNode!==se.node||de.anchorOffset!==se.offset||de.focusNode!==ee.node||de.focusOffset!==ee.offset)){var ne=ye.createRange();ne.setStart(se.node,se.offset),de.removeAllRanges(),We>Ct?(de.addRange(ne),de.extend(ee.node,ee.offset)):(ne.setEnd(ee.node,ee.offset),de.addRange(ne))}}}}for(ye=[],de=R;de=de.parentNode;)de.nodeType===1&&ye.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<ye.length;R++){var xe=ye[R];xe.element.scrollLeft=xe.left,xe.element.scrollTop=xe.top}}yc=!!Nu,Su=Nu=null}finally{bt=m,M.p=o,w.T=r}}t.current=n,Wt=2}}function Hp(){if(Wt===2){Wt=0;var t=sn,n=_l,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=w.T,w.T=null;var o=M.p;M.p=2;var m=bt;bt|=4;try{gp(t,n.alternate,n)}finally{bt=m,M.p=o,w.T=r}}Wt=3}}function Yp(){if(Wt===4||Wt===3){Wt=0,Ye();var t=sn,n=_l,r=ka,o=_p;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Wt=5:(Wt=0,_l=sn=null,Vp(t,t.pendingLanes));var m=t.pendingLanes;if(m===0&&(tn=null),ge(r),n=n.stateNode,es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(ha,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=w.T,m=M.p,M.p=2,w.T=null;try{for(var p=t.onRecoverableError,j=0;j<o.length;j++){var R=o[j];p(R.value,{componentStack:R.stack})}}finally{w.T=n,M.p=m}}(ka&3)!==0&&rc(),na(t),m=t.pendingLanes,(r&261930)!==0&&(m&42)!==0?t===ou?Ti++:(Ti=0,ou=t):Ti=0,_i(0)}}function Vp(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,oi(n)))}function rc(){return Fp(),Hp(),Yp(),Pp()}function Pp(){if(Wt!==5)return!1;var t=sn,n=ru;ru=0;var r=ge(ka),o=w.T,m=M.p;try{M.p=32>r?32:r,w.T=null,r=cu,cu=null;var p=sn,j=ka;if(Wt=0,_l=sn=null,ka=0,(bt&6)!==0)throw Error(i(331));var R=bt;if(bt|=4,Ap(p.current),Sp(p,p.current,j,r),bt=R,_i(0,!1),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(ha,p)}catch{}return!0}finally{M.p=m,w.T=o,Vp(t,n)}}function qp(t,n,r){n=Os(r,n),n=Fd(t.stateNode,n,2),t=Wa(t,n,2),t!==null&&(ds(t,2),na(t))}function jt(t,n,r){if(t.tag===3)qp(t,t,r);else for(;n!==null;){if(n.tag===3){qp(n,t,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(tn===null||!tn.has(o))){t=Os(r,t),r=Gf(2),o=Wa(n,r,2),o!==null&&(Xf(r,o,n,t),ds(o,2),na(o));break}}n=n.return}}function hu(t,n,r){var o=t.pingCache;if(o===null){o=t.pingCache=new vj;var m=new Set;o.set(n,m)}else m=o.get(n),m===void 0&&(m=new Set,o.set(n,m));m.has(r)||(nu=!0,m.add(r),t=Cj.bind(null,t,n,r),n.then(t,t))}function Cj(t,n,r){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,At===t&&(ct&r)===r&&(zt===4||zt===3&&(ct&62914560)===ct&&300>Xe()-tc?(bt&2)===0&&kl(t,0):lu|=r,Tl===ct&&(Tl=0)),na(t)}function Gp(t,n){n===0&&(n=fr()),t=Tn(t,n),t!==null&&(ds(t,n),na(t))}function Aj(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),Gp(t,r)}function Ej(t,n){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,m=t.memoizedState;m!==null&&(r=m.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(n),Gp(t,r)}function Tj(t,n){return oe(t,n)}var cc=null,Ml=null,mu=!1,oc=!1,fu=!1,nn=0;function na(t){t!==Ml&&t.next===null&&(Ml===null?cc=Ml=t:Ml=Ml.next=t),oc=!0,mu||(mu=!0,kj())}function _i(t,n){if(!fu&&oc){fu=!0;do for(var r=!1,o=cc;o!==null;){if(t!==0){var m=o.pendingLanes;if(m===0)var p=0;else{var j=o.suspendedLanes,R=o.pingedLanes;p=(1<<31-ts(42|t)+1)-1,p&=m&~(j&~R),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,Qp(o,p))}else p=ct,p=Zn(o,o===At?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(p&3)===0||cs(o,p)||(r=!0,Qp(o,p));o=o.next}while(r);fu=!1}}function _j(){Xp()}function Xp(){oc=mu=!1;var t=0;nn!==0&&Bj()&&(t=nn);for(var n=Xe(),r=null,o=cc;o!==null;){var m=o.next,p=Wp(o,n);p===0?(o.next=null,r===null?cc=m:r.next=m,m===null&&(Ml=r)):(r=o,(t!==0||(p&3)!==0)&&(oc=!0)),o=m}Wt!==0&&Wt!==5||_i(t),nn!==0&&(nn=0)}function Wp(t,n){for(var r=t.suspendedLanes,o=t.pingedLanes,m=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var j=31-ts(p),R=1<<j,Q=m[j];Q===-1?((R&r)===0||(R&o)!==0)&&(m[j]=Do(R,n)):Q<=n&&(t.expiredLanes|=R),p&=~R}if(n=At,r=ct,r=Zn(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===n&&(vt===2||vt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Ne(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||cs(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(o!==null&&Ne(o),ge(r)){case 2:case 8:r=Ht;break;case 32:r=Ns;break;case 268435456:r=xt;break;default:r=Ns}return o=Kp.bind(null,t),r=oe(r,o),t.callbackPriority=n,t.callbackNode=r,n}return o!==null&&o!==null&&Ne(o),t.callbackPriority=2,t.callbackNode=null,2}function Kp(t,n){if(Wt!==0&&Wt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(rc()&&t.callbackNode!==r)return null;var o=ct;return o=Zn(t,t===At?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Dp(t,o,n),Wp(t,Xe()),t.callbackNode!=null&&t.callbackNode===r?Kp.bind(null,t):null)}function Qp(t,n){if(rc())return null;Dp(t,n,!0)}function kj(){Hj(function(){(bt&6)!==0?oe(He,_j):Xp()})}function pu(){if(nn===0){var t=xl;t===0&&(t=Sn,Sn<<=1,(Sn&261888)===0&&(Sn=256)),nn=t}return nn}function Zp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:xr(""+t)}function Jp(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function Dj(t,n,r,o,m){if(n==="submit"&&r&&r.stateNode===m){var p=Zp((m[me]||null).action),j=o.submitter;j&&(n=(n=j[me]||null)?Zp(n.formAction):j.getAttribute("formAction"),n!==null&&(p=n,j=null));var R=new jr("action","action",null,o,m);t.push({event:R,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(nn!==0){var Q=j?Jp(m,j):new FormData(m);Id(r,{pending:!0,data:Q,method:m.method,action:p},null,Q)}}else typeof p=="function"&&(R.preventDefault(),Q=j?Jp(m,j):new FormData(m),Id(r,{pending:!0,data:Q,method:m.method,action:p},p,Q))},currentTarget:m}]})}}for(var gu=0;gu<Zo.length;gu++){var xu=Zo[gu],Mj=xu.toLowerCase(),Rj=xu[0].toUpperCase()+xu.slice(1);Qs(Mj,"on"+Rj)}Qs(_m,"onAnimationEnd"),Qs(km,"onAnimationIteration"),Qs(Dm,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(Wv,"onTransitionRun"),Qs(Kv,"onTransitionStart"),Qs(Qv,"onTransitionCancel"),Qs(Mm,"onTransitionEnd"),yt("onMouseEnter",["mouseout","mouseover"]),yt("onMouseLeave",["mouseout","mouseover"]),yt("onPointerEnter",["pointerout","pointerover"]),yt("onPointerLeave",["pointerout","pointerover"]),st("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),st("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),st("onBeforeInput",["compositionend","keypress","textInput","paste"]),st("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),st("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$j=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ki));function eg(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],m=o.event;o=o.listeners;e:{var p=void 0;if(n)for(var j=o.length-1;0<=j;j--){var R=o[j],Q=R.instance,ie=R.currentTarget;if(R=R.listener,Q!==p&&m.isPropagationStopped())break e;p=R,m.currentTarget=ie;try{p(m)}catch(pe){wr(pe)}m.currentTarget=null,p=Q}else for(j=0;j<o.length;j++){if(R=o[j],Q=R.instance,ie=R.currentTarget,R=R.listener,Q!==p&&m.isPropagationStopped())break e;p=R,m.currentTarget=ie;try{p(m)}catch(pe){wr(pe)}m.currentTarget=null,p=Q}}}}function rt(t,n){var r=n[be];r===void 0&&(r=n[be]=new Set);var o=t+"__bubble";r.has(o)||(tg(n,t,2,!1),r.add(o))}function bu(t,n,r){var o=0;n&&(o|=4),tg(r,t,o,n)}var dc="_reactListening"+Math.random().toString(36).slice(2);function yu(t){if(!t[dc]){t[dc]=!0,Rt.forEach(function(r){r!=="selectionchange"&&($j.has(r)||bu(r,!1,t),bu(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[dc]||(n[dc]=!0,bu("selectionchange",!1,n))}}function tg(t,n,r,o){switch(kg(n)){case 2:var m=c0;break;case 8:m=o0;break;default:m=$u}r=m.bind(null,n,r,t),m=void 0,!Uo||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),o?m!==void 0?t.addEventListener(n,r,{capture:!0,passive:m}):t.addEventListener(n,r,!0):m!==void 0?t.addEventListener(n,r,{passive:m}):t.addEventListener(n,r,!1)}function vu(t,n,r,o,m){var p=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var j=o.tag;if(j===3||j===4){var R=o.stateNode.containerInfo;if(R===m)break;if(j===4)for(j=o.return;j!==null;){var Q=j.tag;if((Q===3||Q===4)&&j.stateNode.containerInfo===m)return;j=j.return}for(;R!==null;){if(j=Fe(R),j===null)return;if(Q=j.tag,Q===5||Q===6||Q===26||Q===27){o=p=j;continue e}R=R.parentNode}}o=o.return}lm(function(){var ie=p,pe=Lo(r),ye=[];e:{var ce=Rm.get(t);if(ce!==void 0){var de=jr,Ue=t;switch(t){case"keypress":if(yr(r)===0)break e;case"keydown":case"keyup":de=Ev;break;case"focusin":Ue="focus",de=Yo;break;case"focusout":Ue="blur",de=Yo;break;case"beforeblur":case"afterblur":de=Yo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=cm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=pv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=kv;break;case _m:case km:case Dm:de=bv;break;case Mm:de=Mv;break;case"scroll":case"scrollend":de=mv;break;case"wheel":de=$v;break;case"copy":case"cut":case"paste":de=vv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=dm;break;case"toggle":case"beforetoggle":de=Ov}var We=(n&4)!==0,Ct=!We&&(t==="scroll"||t==="scrollend"),se=We?ce!==null?ce+"Capture":null:ce;We=[];for(var ee=ie,ne;ee!==null;){var xe=ee;if(ne=xe.stateNode,xe=xe.tag,xe!==5&&xe!==26&&xe!==27||ne===null||se===null||(xe=Zl(ee,se),xe!=null&&We.push(Di(ee,xe,ne))),Ct)break;ee=ee.return}0<We.length&&(ce=new de(ce,Ue,null,r,pe),ye.push({event:ce,listeners:We}))}}if((n&7)===0){e:{if(ce=t==="mouseover"||t==="pointerover",de=t==="mouseout"||t==="pointerout",ce&&r!==Oo&&(Ue=r.relatedTarget||r.fromElement)&&(Fe(Ue)||Ue[je]))break e;if((de||ce)&&(ce=pe.window===pe?pe:(ce=pe.ownerDocument)?ce.defaultView||ce.parentWindow:window,de?(Ue=r.relatedTarget||r.toElement,de=ie,Ue=Ue?Fe(Ue):null,Ue!==null&&(Ct=d(Ue),We=Ue.tag,Ue!==Ct||We!==5&&We!==27&&We!==6)&&(Ue=null)):(de=null,Ue=ie),de!==Ue)){if(We=cm,xe="onMouseLeave",se="onMouseEnter",ee="mouse",(t==="pointerout"||t==="pointerover")&&(We=dm,xe="onPointerLeave",se="onPointerEnter",ee="pointer"),Ct=de==null?ce:ze(de),ne=Ue==null?ce:ze(Ue),ce=new We(xe,ee+"leave",de,r,pe),ce.target=Ct,ce.relatedTarget=ne,xe=null,Fe(pe)===ie&&(We=new We(se,ee+"enter",Ue,r,pe),We.target=ne,We.relatedTarget=Ct,xe=We),Ct=xe,de&&Ue)t:{for(We=Ij,se=de,ee=Ue,ne=0,xe=se;xe;xe=We(xe))ne++;xe=0;for(var qe=ee;qe;qe=We(qe))xe++;for(;0<ne-xe;)se=We(se),ne--;for(;0<xe-ne;)ee=We(ee),xe--;for(;ne--;){if(se===ee||ee!==null&&se===ee.alternate){We=se;break t}se=We(se),ee=We(ee)}We=null}else We=null;de!==null&&sg(ye,ce,de,We,!1),Ue!==null&&Ct!==null&&sg(ye,Ct,Ue,We,!0)}}e:{if(ce=ie?ze(ie):window,de=ce.nodeName&&ce.nodeName.toLowerCase(),de==="select"||de==="input"&&ce.type==="file")var ft=bm;else if(gm(ce))if(ym)ft=qv;else{ft=Vv;var Ve=Yv}else de=ce.nodeName,!de||de.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?ie&&Io(ie.elementType)&&(ft=bm):ft=Pv;if(ft&&(ft=ft(t,ie))){xm(ye,ft,r,pe);break e}Ve&&Ve(t,ce,ie),t==="focusout"&&ie&&ce.type==="number"&&ie.memoizedProps.value!=null&&$o(ce,"number",ce.value)}switch(Ve=ie?ze(ie):window,t){case"focusin":(gm(Ve)||Ve.contentEditable==="true")&&(ol=Ve,Wo=ie,ii=null);break;case"focusout":ii=Wo=ol=null;break;case"mousedown":Ko=!0;break;case"contextmenu":case"mouseup":case"dragend":Ko=!1,Em(ye,r,pe);break;case"selectionchange":if(Xv)break;case"keydown":case"keyup":Em(ye,r,pe)}var at;if(Po)e:{switch(t){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else cl?fm(t,r)&&(ot="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(ot="onCompositionStart");ot&&(um&&r.locale!=="ko"&&(cl||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&cl&&(at=im()):(Ha=pe,Bo="value"in Ha?Ha.value:Ha.textContent,cl=!0)),Ve=uc(ie,ot),0<Ve.length&&(ot=new om(ot,t,null,r,pe),ye.push({event:ot,listeners:Ve}),at?ot.data=at:(at=pm(r),at!==null&&(ot.data=at)))),(at=zv?Uv(t,r):Bv(t,r))&&(ot=uc(ie,"onBeforeInput"),0<ot.length&&(Ve=new om("onBeforeInput","beforeinput",null,r,pe),ye.push({event:Ve,listeners:ot}),Ve.data=at)),Dj(ye,t,ie,r,pe)}eg(ye,n)})}function Di(t,n,r){return{instance:t,listener:n,currentTarget:r}}function uc(t,n){for(var r=n+"Capture",o=[];t!==null;){var m=t,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=Zl(t,r),m!=null&&o.unshift(Di(t,m,p)),m=Zl(t,n),m!=null&&o.push(Di(t,m,p))),t.tag===3)return o;t=t.return}return[]}function Ij(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function sg(t,n,r,o,m){for(var p=n._reactName,j=[];r!==null&&r!==o;){var R=r,Q=R.alternate,ie=R.stateNode;if(R=R.tag,Q!==null&&Q===o)break;R!==5&&R!==26&&R!==27||ie===null||(Q=ie,m?(ie=Zl(r,p),ie!=null&&j.unshift(Di(r,ie,Q))):m||(ie=Zl(r,p),ie!=null&&j.push(Di(r,ie,Q)))),r=r.return}j.length!==0&&t.push({event:n,listeners:j})}var Oj=/\r\n?/g,Lj=/\u0000|\uFFFD/g;function ag(t){return(typeof t=="string"?t:""+t).replace(Oj,`
`).replace(Lj,"")}function ng(t,n){return n=ag(n),ag(t)===n}function wt(t,n,r,o,m,p){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||ll(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&ll(t,""+o);break;case"className":al(t,"class",o);break;case"tabIndex":al(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":al(t,r,o);break;case"style":am(t,o,p);break;case"data":if(n!=="object"){al(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=xr(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(n!=="input"&&wt(t,n,"name",m.name,m,null),wt(t,n,"formEncType",m.formEncType,m,null),wt(t,n,"formMethod",m.formMethod,m,null),wt(t,n,"formTarget",m.formTarget,m,null)):(wt(t,n,"encType",m.encType,m,null),wt(t,n,"method",m.method,m,null),wt(t,n,"target",m.target,m,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=xr(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=pa);break;case"onScroll":o!=null&&rt("scroll",t);break;case"onScrollEnd":o!=null&&rt("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(m.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=xr(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":rt("beforetoggle",t),rt("toggle",t),sl(t,"popover",o);break;case"xlinkActuate":Ks(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ks(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ks(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ks(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ks(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ks(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ks(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ks(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ks(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":sl(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=uv.get(r)||r,sl(t,r,o))}}function ju(t,n,r,o,m,p){switch(r){case"style":am(t,o,p);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(m.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"children":typeof o=="string"?ll(t,o):(typeof o=="number"||typeof o=="bigint")&&ll(t,""+o);break;case"onScroll":o!=null&&rt("scroll",t);break;case"onScrollEnd":o!=null&&rt("scrollend",t);break;case"onClick":o!=null&&(t.onclick=pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Yt.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(m=r.endsWith("Capture"),n=r.slice(2,m?r.length-7:void 0),p=t[me]||null,p=p!=null?p[r]:null,typeof p=="function"&&t.removeEventListener(n,p,m),typeof o=="function")){typeof p!="function"&&p!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,o,m);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):sl(t,r,o)}}}function is(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",t),rt("load",t);var o=!1,m=!1,p;for(p in r)if(r.hasOwnProperty(p)){var j=r[p];if(j!=null)switch(p){case"src":o=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:wt(t,n,p,j,r,null)}}m&&wt(t,n,"srcSet",r.srcSet,r,null),o&&wt(t,n,"src",r.src,r,null);return;case"input":rt("invalid",t);var R=p=j=m=null,Q=null,ie=null;for(o in r)if(r.hasOwnProperty(o)){var pe=r[o];if(pe!=null)switch(o){case"name":m=pe;break;case"type":j=pe;break;case"checked":Q=pe;break;case"defaultChecked":ie=pe;break;case"value":p=pe;break;case"defaultValue":R=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(i(137,n));break;default:wt(t,n,o,pe,r,null)}}Jh(t,p,R,Q,ie,j,m,!1);return;case"select":rt("invalid",t),o=j=p=null;for(m in r)if(r.hasOwnProperty(m)&&(R=r[m],R!=null))switch(m){case"value":p=R;break;case"defaultValue":j=R;break;case"multiple":o=R;default:wt(t,n,m,R,r,null)}n=p,r=j,t.multiple=!!o,n!=null?nl(t,!!o,n,!1):r!=null&&nl(t,!!o,r,!0);return;case"textarea":rt("invalid",t),p=m=o=null;for(j in r)if(r.hasOwnProperty(j)&&(R=r[j],R!=null))switch(j){case"value":o=R;break;case"defaultValue":m=R;break;case"children":p=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:wt(t,n,j,R,r,null)}tm(t,o,m,p);return;case"option":for(Q in r)if(r.hasOwnProperty(Q)&&(o=r[Q],o!=null))switch(Q){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:wt(t,n,Q,o,r,null)}return;case"dialog":rt("beforetoggle",t),rt("toggle",t),rt("cancel",t),rt("close",t);break;case"iframe":case"object":rt("load",t);break;case"video":case"audio":for(o=0;o<ki.length;o++)rt(ki[o],t);break;case"image":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"embed":case"source":case"link":rt("error",t),rt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ie in r)if(r.hasOwnProperty(ie)&&(o=r[ie],o!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:wt(t,n,ie,o,r,null)}return;default:if(Io(n)){for(pe in r)r.hasOwnProperty(pe)&&(o=r[pe],o!==void 0&&ju(t,n,pe,o,r,void 0));return}}for(R in r)r.hasOwnProperty(R)&&(o=r[R],o!=null&&wt(t,n,R,o,r,null))}function zj(t,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,j=null,R=null,Q=null,ie=null,pe=null;for(de in r){var ye=r[de];if(r.hasOwnProperty(de)&&ye!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":Q=ye;default:o.hasOwnProperty(de)||wt(t,n,de,null,o,ye)}}for(var ce in o){var de=o[ce];if(ye=r[ce],o.hasOwnProperty(ce)&&(de!=null||ye!=null))switch(ce){case"type":p=de;break;case"name":m=de;break;case"checked":ie=de;break;case"defaultChecked":pe=de;break;case"value":j=de;break;case"defaultValue":R=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,n));break;default:de!==ye&&wt(t,n,ce,de,o,ye)}}Ro(t,j,R,Q,ie,pe,p,m);return;case"select":de=j=R=ce=null;for(p in r)if(Q=r[p],r.hasOwnProperty(p)&&Q!=null)switch(p){case"value":break;case"multiple":de=Q;default:o.hasOwnProperty(p)||wt(t,n,p,null,o,Q)}for(m in o)if(p=o[m],Q=r[m],o.hasOwnProperty(m)&&(p!=null||Q!=null))switch(m){case"value":ce=p;break;case"defaultValue":R=p;break;case"multiple":j=p;default:p!==Q&&wt(t,n,m,p,o,Q)}n=R,r=j,o=de,ce!=null?nl(t,!!r,ce,!1):!!o!=!!r&&(n!=null?nl(t,!!r,n,!0):nl(t,!!r,r?[]:"",!1));return;case"textarea":de=ce=null;for(R in r)if(m=r[R],r.hasOwnProperty(R)&&m!=null&&!o.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:wt(t,n,R,null,o,m)}for(j in o)if(m=o[j],p=r[j],o.hasOwnProperty(j)&&(m!=null||p!=null))switch(j){case"value":ce=m;break;case"defaultValue":de=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==p&&wt(t,n,j,m,o,p)}em(t,ce,de);return;case"option":for(var Ue in r)if(ce=r[Ue],r.hasOwnProperty(Ue)&&ce!=null&&!o.hasOwnProperty(Ue))switch(Ue){case"selected":t.selected=!1;break;default:wt(t,n,Ue,null,o,ce)}for(Q in o)if(ce=o[Q],de=r[Q],o.hasOwnProperty(Q)&&ce!==de&&(ce!=null||de!=null))switch(Q){case"selected":t.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:wt(t,n,Q,ce,o,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var We in r)ce=r[We],r.hasOwnProperty(We)&&ce!=null&&!o.hasOwnProperty(We)&&wt(t,n,We,null,o,ce);for(ie in o)if(ce=o[ie],de=r[ie],o.hasOwnProperty(ie)&&ce!==de&&(ce!=null||de!=null))switch(ie){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,n));break;default:wt(t,n,ie,ce,o,de)}return;default:if(Io(n)){for(var Ct in r)ce=r[Ct],r.hasOwnProperty(Ct)&&ce!==void 0&&!o.hasOwnProperty(Ct)&&ju(t,n,Ct,void 0,o,ce);for(pe in o)ce=o[pe],de=r[pe],!o.hasOwnProperty(pe)||ce===de||ce===void 0&&de===void 0||ju(t,n,pe,ce,o,de);return}}for(var se in r)ce=r[se],r.hasOwnProperty(se)&&ce!=null&&!o.hasOwnProperty(se)&&wt(t,n,se,null,o,ce);for(ye in o)ce=o[ye],de=r[ye],!o.hasOwnProperty(ye)||ce===de||ce==null&&de==null||wt(t,n,ye,ce,o,de)}function lg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Uj(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var m=r[o],p=m.transferSize,j=m.initiatorType,R=m.duration;if(p&&R&&lg(j)){for(j=0,R=m.responseEnd,o+=1;o<r.length;o++){var Q=r[o],ie=Q.startTime;if(ie>R)break;var pe=Q.transferSize,ye=Q.initiatorType;pe&&lg(ye)&&(Q=Q.responseEnd,j+=pe*(Q<R?1:(R-ie)/(Q-ie)))}if(--o,n+=8*(p+j)/(m.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Nu=null,Su=null;function hc(t){return t.nodeType===9?t:t.ownerDocument}function ig(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function rg(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function wu(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Cu=null;function Bj(){var t=window.event;return t&&t.type==="popstate"?t===Cu?!1:(Cu=t,!0):(Cu=null,!1)}var cg=typeof setTimeout=="function"?setTimeout:void 0,Fj=typeof clearTimeout=="function"?clearTimeout:void 0,og=typeof Promise=="function"?Promise:void 0,Hj=typeof queueMicrotask=="function"?queueMicrotask:typeof og<"u"?function(t){return og.resolve(null).then(t).catch(Yj)}:cg;function Yj(t){setTimeout(function(){throw t})}function ln(t){return t==="head"}function dg(t,n){var r=n,o=0;do{var m=r.nextSibling;if(t.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(m),Ol(n);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Mi(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,Mi(r);for(var p=r.firstChild;p;){var j=p.nextSibling,R=p.nodeName;p[Oe]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=j}}else r==="body"&&Mi(t.ownerDocument.body);r=m}while(r);Ol(n)}function ug(t,n){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function Au(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Au(r),Ee(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function Vj(t,n,r,o){for(;t.nodeType===1;){var m=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Oe])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==m.rel||t.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||t.getAttribute("title")!==(m.title==null?null:m.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(m.src==null?null:m.src)||t.getAttribute("type")!==(m.type==null?null:m.type)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=Fs(t.nextSibling),t===null)break}return null}function Pj(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Fs(t.nextSibling),t===null))return null;return t}function hg(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Fs(t.nextSibling),t===null))return null;return t}function Eu(t){return t.data==="$?"||t.data==="$~"}function Tu(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function qj(t,n){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||r.readyState!=="loading")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Fs(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var _u=null;function mg(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(n===0)return Fs(t.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}t=t.nextSibling}return null}function fg(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return t;n--}else r!=="/$"&&r!=="/&"||n++}t=t.previousSibling}return null}function pg(t,n,r){switch(n=hc(r),t){case"html":if(t=n.documentElement,!t)throw Error(i(452));return t;case"head":if(t=n.head,!t)throw Error(i(453));return t;case"body":if(t=n.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function Mi(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Ee(t)}var Hs=new Map,gg=new Set;function mc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Da=M.d;M.d={f:Gj,r:Xj,D:Wj,C:Kj,L:Qj,m:Zj,X:e0,S:Jj,M:t0};function Gj(){var t=Da.f(),n=nc();return t||n}function Xj(t){var n=De(t);n!==null&&n.tag===5&&n.type==="form"?Rf(n):Da.r(t)}var Rl=typeof document>"u"?null:document;function xg(t,n,r){var o=Rl;if(o&&typeof n=="string"&&n){var m=$s(n);m='link[rel="'+t+'"][href="'+m+'"]',typeof r=="string"&&(m+='[crossorigin="'+r+'"]'),gg.has(m)||(gg.add(m),t={rel:t,crossOrigin:r,href:n},o.querySelector(m)===null&&(n=o.createElement("link"),is(n,"link",t),Qe(n),o.head.appendChild(n)))}}function Wj(t){Da.D(t),xg("dns-prefetch",t,null)}function Kj(t,n){Da.C(t,n),xg("preconnect",t,n)}function Qj(t,n,r){Da.L(t,n,r);var o=Rl;if(o&&t&&n){var m='link[rel="preload"][as="'+$s(n)+'"]';n==="image"&&r&&r.imageSrcSet?(m+='[imagesrcset="'+$s(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(m+='[imagesizes="'+$s(r.imageSizes)+'"]')):m+='[href="'+$s(t)+'"]';var p=m;switch(n){case"style":p=$l(t);break;case"script":p=Il(t)}Hs.has(p)||(t=y({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),Hs.set(p,t),o.querySelector(m)!==null||n==="style"&&o.querySelector(Ri(p))||n==="script"&&o.querySelector($i(p))||(n=o.createElement("link"),is(n,"link",t),Qe(n),o.head.appendChild(n)))}}function Zj(t,n){Da.m(t,n);var r=Rl;if(r&&t){var o=n&&typeof n.as=="string"?n.as:"script",m='link[rel="modulepreload"][as="'+$s(o)+'"][href="'+$s(t)+'"]',p=m;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Il(t)}if(!Hs.has(p)&&(t=y({rel:"modulepreload",href:t},n),Hs.set(p,t),r.querySelector(m)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector($i(p)))return}o=r.createElement("link"),is(o,"link",t),Qe(o),r.head.appendChild(o)}}}function Jj(t,n,r){Da.S(t,n,r);var o=Rl;if(o&&t){var m=et(o).hoistableStyles,p=$l(t);n=n||"default";var j=m.get(p);if(!j){var R={loading:0,preload:null};if(j=o.querySelector(Ri(p)))R.loading=5;else{t=y({rel:"stylesheet",href:t,"data-precedence":n},r),(r=Hs.get(p))&&ku(t,r);var Q=j=o.createElement("link");Qe(Q),is(Q,"link",t),Q._p=new Promise(function(ie,pe){Q.onload=ie,Q.onerror=pe}),Q.addEventListener("load",function(){R.loading|=1}),Q.addEventListener("error",function(){R.loading|=2}),R.loading|=4,fc(j,n,o)}j={type:"stylesheet",instance:j,count:1,state:R},m.set(p,j)}}}function e0(t,n){Da.X(t,n);var r=Rl;if(r&&t){var o=et(r).hoistableScripts,m=Il(t),p=o.get(m);p||(p=r.querySelector($i(m)),p||(t=y({src:t,async:!0},n),(n=Hs.get(m))&&Du(t,n),p=r.createElement("script"),Qe(p),is(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(m,p))}}function t0(t,n){Da.M(t,n);var r=Rl;if(r&&t){var o=et(r).hoistableScripts,m=Il(t),p=o.get(m);p||(p=r.querySelector($i(m)),p||(t=y({src:t,async:!0,type:"module"},n),(n=Hs.get(m))&&Du(t,n),p=r.createElement("script"),Qe(p),is(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(m,p))}}function bg(t,n,r,o){var m=(m=K.current)?mc(m):null;if(!m)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=$l(r.href),r=et(m).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=$l(r.href);var p=et(m).hoistableStyles,j=p.get(t);if(j||(m=m.ownerDocument||m,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,j),(p=m.querySelector(Ri(t)))&&!p._p&&(j.instance=p,j.state.loading=5),Hs.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Hs.set(t,r),p||s0(m,t,r,j.state))),n&&o===null)throw Error(i(528,""));return j}if(n&&o!==null)throw Error(i(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Il(r),r=et(m).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function $l(t){return'href="'+$s(t)+'"'}function Ri(t){return'link[rel="stylesheet"]['+t+"]"}function yg(t){return y({},t,{"data-precedence":t.precedence,precedence:null})}function s0(t,n,r,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),is(n,"link",r),Qe(n),t.head.appendChild(n))}function Il(t){return'[src="'+$s(t)+'"]'}function $i(t){return"script[async]"+t}function vg(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+$s(r.href)+'"]');if(o)return n.instance=o,Qe(o),o;var m=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Qe(o),is(o,"style",m),fc(o,r.precedence,t),n.instance=o;case"stylesheet":m=$l(r.href);var p=t.querySelector(Ri(m));if(p)return n.state.loading|=4,n.instance=p,Qe(p),p;o=yg(r),(m=Hs.get(m))&&ku(o,m),p=(t.ownerDocument||t).createElement("link"),Qe(p);var j=p;return j._p=new Promise(function(R,Q){j.onload=R,j.onerror=Q}),is(p,"link",o),n.state.loading|=4,fc(p,r.precedence,t),n.instance=p;case"script":return p=Il(r.src),(m=t.querySelector($i(p)))?(n.instance=m,Qe(m),m):(o=r,(m=Hs.get(p))&&(o=y({},r),Du(o,m)),t=t.ownerDocument||t,m=t.createElement("script"),Qe(m),is(m,"link",o),t.head.appendChild(m),n.instance=m);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,fc(o,r.precedence,t));return n.instance}function fc(t,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=o.length?o[o.length-1]:null,p=m,j=0;j<o.length;j++){var R=o[j];if(R.dataset.precedence===n)p=R;else if(p!==m)break}p?p.parentNode.insertBefore(t,p.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function ku(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function Du(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var pc=null;function jg(t,n,r){if(pc===null){var o=new Map,m=pc=new Map;m.set(r,o)}else m=pc,o=m.get(r),o||(o=new Map,m.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),m=0;m<r.length;m++){var p=r[m];if(!(p[Oe]||p[V]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var j=p.getAttribute(n)||"";j=t+j;var R=o.get(j);R?R.push(p):o.set(j,[p])}}return o}function Ng(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function a0(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function Sg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function n0(t,n,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=$l(o.href),p=n.querySelector(Ri(m));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=gc.bind(t),n.then(t,t)),r.state.loading|=4,r.instance=p,Qe(p);return}p=n.ownerDocument||n,o=yg(o),(m=Hs.get(m))&&ku(o,m),p=p.createElement("link"),Qe(p);var j=p;j._p=new Promise(function(R,Q){j.onload=R,j.onerror=Q}),is(p,"link",o),r.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=gc.bind(t),n.addEventListener("load",r),n.addEventListener("error",r))}}var Mu=0;function l0(t,n){return t.stylesheets&&t.count===0&&bc(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&bc(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+n);0<t.imgBytes&&Mu===0&&(Mu=62500*Uj());var m=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&bc(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>Mu?50:800)+n);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(m)}}:null}function gc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)bc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var xc=null;function bc(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,xc=new Map,n.forEach(i0,t),xc=null,gc.call(t))}function i0(t,n){if(!(n.state.loading&4)){var r=xc.get(t);if(r)var o=r.get(null);else{r=new Map,xc.set(t,r);for(var m=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var j=m[p];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(r.set(j.dataset.precedence,j),o=j)}o&&r.set(null,o)}m=n.instance,j=m.getAttribute("data-precedence"),p=r.get(j)||o,p===o&&r.set(null,m),r.set(j,m),this.count++,o=gc.bind(this),m.addEventListener("load",o),m.addEventListener("error",o),p?p.parentNode.insertBefore(m,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(m,t.firstChild)),n.state.loading|=4}}var Ii={$$typeof:D,Provider:null,Consumer:null,_currentValue:B,_currentValue2:B,_threadCount:0};function r0(t,n,r,o,m,p,j,R,Q){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ss(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ss(0),this.hiddenUpdates=Ss(null),this.identifierPrefix=o,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Q,this.incompleteTransitions=new Map}function wg(t,n,r,o,m,p,j,R,Q,ie,pe,ye){return t=new r0(t,n,r,j,Q,ie,pe,ye,R),n=1,p===!0&&(n|=24),p=Cs(3,null,null,n),t.current=p,p.stateNode=t,n=ud(),n.refCount++,t.pooledCache=n,n.refCount++,p.memoizedState={element:o,isDehydrated:r,cache:n},pd(p),t}function Cg(t){return t?(t=hl,t):hl}function Ag(t,n,r,o,m,p){m=Cg(m),o.context===null?o.context=m:o.pendingContext=m,o=Xa(n),o.payload={element:r},p=p===void 0?null:p,p!==null&&(o.callback=p),r=Wa(t,o,n),r!==null&&(xs(r,t,n),mi(r,t,n))}function Eg(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function Ru(t,n){Eg(t,n),(t=t.alternate)&&Eg(t,n)}function Tg(t){if(t.tag===13||t.tag===31){var n=Tn(t,67108864);n!==null&&xs(n,t,67108864),Ru(t,67108864)}}function _g(t){if(t.tag===13||t.tag===31){var n=ks();n=tl(n);var r=Tn(t,n);r!==null&&xs(r,t,n),Ru(t,n)}}var yc=!0;function c0(t,n,r,o){var m=w.T;w.T=null;var p=M.p;try{M.p=2,$u(t,n,r,o)}finally{M.p=p,w.T=m}}function o0(t,n,r,o){var m=w.T;w.T=null;var p=M.p;try{M.p=8,$u(t,n,r,o)}finally{M.p=p,w.T=m}}function $u(t,n,r,o){if(yc){var m=Iu(o);if(m===null)vu(t,n,o,vc,r),Dg(t,o);else if(u0(m,t,n,r,o))o.stopPropagation();else if(Dg(t,o),n&4&&-1<d0.indexOf(t)){for(;m!==null;){var p=De(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var j=ma(p.pendingLanes);if(j!==0){var R=p;for(R.pendingLanes|=2,R.entangledLanes|=2;j;){var Q=1<<31-ts(j);R.entanglements[1]|=Q,j&=~Q}na(p),(bt&6)===0&&(sc=Xe()+500,_i(0))}}break;case 31:case 13:R=Tn(p,2),R!==null&&xs(R,p,2),nc(),Ru(p,2)}if(p=Iu(o),p===null&&vu(t,n,o,vc,r),p===m)break;m=p}m!==null&&o.stopPropagation()}else vu(t,n,o,null,r)}}function Iu(t){return t=Lo(t),Ou(t)}var vc=null;function Ou(t){if(vc=null,t=Fe(t),t!==null){var n=d(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=u(n),t!==null)return t;t=null}else if(r===31){if(t=h(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return vc=t,null}function kg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case He:return 2;case Ht:return 8;case Ns:case ua:return 32;case xt:return 268435456;default:return 32}default:return 32}}var Lu=!1,rn=null,cn=null,on=null,Oi=new Map,Li=new Map,dn=[],d0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Dg(t,n){switch(t){case"focusin":case"focusout":rn=null;break;case"dragenter":case"dragleave":cn=null;break;case"mouseover":case"mouseout":on=null;break;case"pointerover":case"pointerout":Oi.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Li.delete(n.pointerId)}}function zi(t,n,r,o,m,p){return t===null||t.nativeEvent!==p?(t={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:p,targetContainers:[m]},n!==null&&(n=De(n),n!==null&&Tg(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),t)}function u0(t,n,r,o,m){switch(n){case"focusin":return rn=zi(rn,t,n,r,o,m),!0;case"dragenter":return cn=zi(cn,t,n,r,o,m),!0;case"mouseover":return on=zi(on,t,n,r,o,m),!0;case"pointerover":var p=m.pointerId;return Oi.set(p,zi(Oi.get(p)||null,t,n,r,o,m)),!0;case"gotpointercapture":return p=m.pointerId,Li.set(p,zi(Li.get(p)||null,t,n,r,o,m)),!0}return!1}function Mg(t){var n=Fe(t.target);if(n!==null){var r=d(n);if(r!==null){if(n=r.tag,n===13){if(n=u(r),n!==null){t.blockedOn=n,Ce(t.priority,function(){_g(r)});return}}else if(n===31){if(n=h(r),n!==null){t.blockedOn=n,Ce(t.priority,function(){_g(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=Iu(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);Oo=o,r.target.dispatchEvent(o),Oo=null}else return n=De(r),n!==null&&Tg(n),t.blockedOn=r,!1;n.shift()}return!0}function Rg(t,n,r){jc(t)&&r.delete(n)}function h0(){Lu=!1,rn!==null&&jc(rn)&&(rn=null),cn!==null&&jc(cn)&&(cn=null),on!==null&&jc(on)&&(on=null),Oi.forEach(Rg),Li.forEach(Rg)}function Nc(t,n){t.blockedOn===n&&(t.blockedOn=null,Lu||(Lu=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,h0)))}var Sc=null;function $g(t){Sc!==t&&(Sc=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Sc===t&&(Sc=null);for(var n=0;n<t.length;n+=3){var r=t[n],o=t[n+1],m=t[n+2];if(typeof o!="function"){if(Ou(o||r)===null)continue;break}var p=De(r);p!==null&&(t.splice(n,3),n-=3,Id(p,{pending:!0,data:m,method:r.method,action:o},o,m))}}))}function Ol(t){function n(Q){return Nc(Q,t)}rn!==null&&Nc(rn,t),cn!==null&&Nc(cn,t),on!==null&&Nc(on,t),Oi.forEach(n),Li.forEach(n);for(var r=0;r<dn.length;r++){var o=dn[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<dn.length&&(r=dn[0],r.blockedOn===null);)Mg(r),r.blockedOn===null&&dn.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var m=r[o],p=r[o+1],j=m[me]||null;if(typeof p=="function")j||$g(r);else if(j){var R=null;if(p&&p.hasAttribute("formAction")){if(m=p,j=p[me]||null)R=j.formAction;else if(Ou(m)!==null)continue}else R=j.action;typeof R=="function"?r[o+1]=R:(r.splice(o,3),o-=3),$g(r)}}}function Ig(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(j){return m=j})},focusReset:"manual",scroll:"manual"})}function n(){m!==null&&(m(),m=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,m=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),m!==null&&(m(),m=null)}}}function zu(t){this._internalRoot=t}wc.prototype.render=zu.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(i(409));var r=n.current,o=ks();Ag(r,o,t,n,null,null)},wc.prototype.unmount=zu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Ag(t.current,2,null,t,null,null),nc(),n[je]=null}};function wc(t){this._internalRoot=t}wc.prototype.unstable_scheduleHydration=function(t){if(t){var n=_e();t={blockedOn:null,target:t,priority:n};for(var r=0;r<dn.length&&n!==0&&n<dn[r].priority;r++);dn.splice(r,0,t),r===0&&Mg(t)}};var Og=s.version;if(Og!=="19.2.0")throw Error(i(527,Og,"19.2.0"));M.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(n),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var m0={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:w,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cc.isDisabled&&Cc.supportsFiber)try{ha=Cc.inject(m0),es=Cc}catch{}}return Bi.createRoot=function(t,n){if(!c(t))throw Error(i(299));var r=!1,o="",m=Yf,p=Vf,j=Pf;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(m=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(j=n.onRecoverableError)),n=wg(t,1,!1,null,null,r,o,null,m,p,j,Ig),t[je]=n.current,yu(t),new zu(n)},Bi.hydrateRoot=function(t,n,r){if(!c(t))throw Error(i(299));var o=!1,m="",p=Yf,j=Vf,R=Pf,Q=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(j=r.onCaughtError),r.onRecoverableError!==void 0&&(R=r.onRecoverableError),r.formState!==void 0&&(Q=r.formState)),n=wg(t,1,!0,n,r??null,o,m,Q,p,j,R,Ig),n.context=Cg(null),r=n.current,o=ks(),o=tl(o),m=Xa(o),m.callback=null,Wa(r,m,o),r=o,n.current.lanes=r,ds(n,r),na(n),t[je]=n.current,yu(t),new wc(n)},Bi.version="19.2.0",Bi}var qg;function C0(){if(qg)return Fu.exports;qg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(s){console.error(s)}}return a(),Fu.exports=w0(),Fu.exports}var A0=C0(),io=Zb();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nr(){return nr=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a[i]=l[i])}return a},nr.apply(this,arguments)}var fn;(function(a){a.Pop="POP",a.Push="PUSH",a.Replace="REPLACE"})(fn||(fn={}));const Gg="popstate";function E0(a){a===void 0&&(a={});function s(i,c){let{pathname:d,search:u,hash:h}=i.location;return ph("",{pathname:d,search:u,hash:h},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function l(i,c){return typeof c=="string"?c:ro(c)}return _0(s,l,null,a)}function Ot(a,s){if(a===!1||a===null||typeof a>"u")throw new Error(s)}function Jb(a,s){if(!a){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function T0(){return Math.random().toString(36).substr(2,8)}function Xg(a,s){return{usr:a.state,key:a.key,idx:s}}function ph(a,s,l,i){return l===void 0&&(l=null),nr({pathname:typeof a=="string"?a:a.pathname,search:"",hash:""},typeof s=="string"?Pl(s):s,{state:l,key:s&&s.key||i||T0()})}function ro(a){let{pathname:s="/",search:l="",hash:i=""}=a;return l&&l!=="?"&&(s+=l.charAt(0)==="?"?l:"?"+l),i&&i!=="#"&&(s+=i.charAt(0)==="#"?i:"#"+i),s}function Pl(a){let s={};if(a){let l=a.indexOf("#");l>=0&&(s.hash=a.substr(l),a=a.substr(0,l));let i=a.indexOf("?");i>=0&&(s.search=a.substr(i),a=a.substr(0,i)),a&&(s.pathname=a)}return s}function _0(a,s,l,i){i===void 0&&(i={});let{window:c=document.defaultView,v5Compat:d=!1}=i,u=c.history,h=fn.Pop,f=null,g=b();g==null&&(g=0,u.replaceState(nr({},u.state,{idx:g}),""));function b(){return(u.state||{idx:null}).idx}function y(){h=fn.Pop;let A=b(),T=A==null?null:A-g;g=A,f&&f({action:h,location:E.location,delta:T})}function v(A,T){h=fn.Push;let $=ph(E.location,A,T);g=b()+1;let D=Xg($,g),I=E.createHref($);try{u.pushState(D,"",I)}catch(G){if(G instanceof DOMException&&G.name==="DataCloneError")throw G;c.location.assign(I)}d&&f&&f({action:h,location:E.location,delta:1})}function S(A,T){h=fn.Replace;let $=ph(E.location,A,T);g=b();let D=Xg($,g),I=E.createHref($);u.replaceState(D,"",I),d&&f&&f({action:h,location:E.location,delta:0})}function N(A){let T=c.location.origin!=="null"?c.location.origin:c.location.href,$=typeof A=="string"?A:ro(A);return $=$.replace(/ $/,"%20"),Ot(T,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,T)}let E={get action(){return h},get location(){return a(c,u)},listen(A){if(f)throw new Error("A history only accepts one active listener");return c.addEventListener(Gg,y),f=A,()=>{c.removeEventListener(Gg,y),f=null}},createHref(A){return s(c,A)},createURL:N,encodeLocation(A){let T=N(A);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:v,replace:S,go(A){return u.go(A)}};return E}var Wg;(function(a){a.data="data",a.deferred="deferred",a.redirect="redirect",a.error="error"})(Wg||(Wg={}));function k0(a,s,l){return l===void 0&&(l="/"),D0(a,s,l)}function D0(a,s,l,i){let c=typeof s=="string"?Pl(s):s,d=Yl(c.pathname||"/",l);if(d==null)return null;let u=ey(a);M0(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let g=Y0(d);h=F0(u[f],g)}return h}function ey(a,s,l,i){s===void 0&&(s=[]),l===void 0&&(l=[]),i===void 0&&(i="");let c=(d,u,h)=>{let f={relativePath:h===void 0?d.path||"":h,caseSensitive:d.caseSensitive===!0,childrenIndex:u,route:d};f.relativePath.startsWith("/")&&(Ot(f.relativePath.startsWith(i),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(i.length));let g=yn([i,f.relativePath]),b=l.concat(f);d.children&&d.children.length>0&&(Ot(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),ey(d.children,s,b,g)),!(d.path==null&&!d.index)&&s.push({path:g,score:U0(g,d.index),routesMeta:b})};return a.forEach((d,u)=>{var h;if(d.path===""||!((h=d.path)!=null&&h.includes("?")))c(d,u);else for(let f of ty(d.path))c(d,u,f)}),s}function ty(a){let s=a.split("/");if(s.length===0)return[];let[l,...i]=s,c=l.endsWith("?"),d=l.replace(/\?$/,"");if(i.length===0)return c?[d,""]:[d];let u=ty(i.join("/")),h=[];return h.push(...u.map(f=>f===""?d:[d,f].join("/"))),c&&h.push(...u),h.map(f=>a.startsWith("/")&&f===""?"/":f)}function M0(a){a.sort((s,l)=>s.score!==l.score?l.score-s.score:B0(s.routesMeta.map(i=>i.childrenIndex),l.routesMeta.map(i=>i.childrenIndex)))}const R0=/^:[\w-]+$/,$0=3,I0=2,O0=1,L0=10,z0=-2,Kg=a=>a==="*";function U0(a,s){let l=a.split("/"),i=l.length;return l.some(Kg)&&(i+=z0),s&&(i+=I0),l.filter(c=>!Kg(c)).reduce((c,d)=>c+(R0.test(d)?$0:d===""?O0:L0),i)}function B0(a,s){return a.length===s.length&&a.slice(0,-1).every((i,c)=>i===s[c])?a[a.length-1]-s[s.length-1]:0}function F0(a,s,l){let{routesMeta:i}=a,c={},d="/",u=[];for(let h=0;h<i.length;++h){let f=i[h],g=h===i.length-1,b=d==="/"?s:s.slice(d.length)||"/",y=gh({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},b),v=f.route;if(!y)return null;Object.assign(c,y.params),u.push({params:c,pathname:yn([d,y.pathname]),pathnameBase:G0(yn([d,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(d=yn([d,y.pathnameBase]))}return u}function gh(a,s){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[l,i]=H0(a.path,a.caseSensitive,a.end),c=s.match(l);if(!c)return null;let d=c[0],u=d.replace(/(.)\/+$/,"$1"),h=c.slice(1);return{params:i.reduce((g,b,y)=>{let{paramName:v,isOptional:S}=b;if(v==="*"){let E=h[y]||"";u=d.slice(0,d.length-E.length).replace(/(.)\/+$/,"$1")}const N=h[y];return S&&!N?g[v]=void 0:g[v]=(N||"").replace(/%2F/g,"/"),g},{}),pathname:d,pathnameBase:u,pattern:a}}function H0(a,s,l){s===void 0&&(s=!1),l===void 0&&(l=!0),Jb(a==="*"||!a.endsWith("*")||a.endsWith("/*"),'Route path "'+a+'" will be treated as if it were '+('"'+a.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+a.replace(/\*$/,"/*")+'".'));let i=[],c="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(i.push({paramName:"*"}),c+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?c+="\\/*$":a!==""&&a!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,s?void 0:"i"),i]}function Y0(a){try{return a.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return Jb(!1,'The URL path "'+a+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),a}}function Yl(a,s){if(s==="/")return a;if(!a.toLowerCase().startsWith(s.toLowerCase()))return null;let l=s.endsWith("/")?s.length-1:s.length,i=a.charAt(l);return i&&i!=="/"?null:a.slice(l)||"/"}function V0(a,s){s===void 0&&(s="/");let{pathname:l,search:i="",hash:c=""}=typeof a=="string"?Pl(a):a;return{pathname:l?l.startsWith("/")?l:P0(l,s):s,search:X0(i),hash:W0(c)}}function P0(a,s){let l=s.replace(/\/+$/,"").split("/");return a.split("/").forEach(c=>{c===".."?l.length>1&&l.pop():c!=="."&&l.push(c)}),l.length>1?l.join("/"):"/"}function Pu(a,s,l,i){return"Cannot include a '"+a+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+l+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function q0(a){return a.filter((s,l)=>l===0||s.route.path&&s.route.path.length>0)}function Ah(a,s){let l=q0(a);return s?l.map((i,c)=>c===l.length-1?i.pathname:i.pathnameBase):l.map(i=>i.pathnameBase)}function Eh(a,s,l,i){i===void 0&&(i=!1);let c;typeof a=="string"?c=Pl(a):(c=nr({},a),Ot(!c.pathname||!c.pathname.includes("?"),Pu("?","pathname","search",c)),Ot(!c.pathname||!c.pathname.includes("#"),Pu("#","pathname","hash",c)),Ot(!c.search||!c.search.includes("#"),Pu("#","search","hash",c)));let d=a===""||c.pathname==="",u=d?"/":c.pathname,h;if(u==null)h=l;else{let y=s.length-1;if(!i&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),y-=1;c.pathname=v.join("/")}h=y>=0?s[y]:"/"}let f=V0(c,h),g=u&&u!=="/"&&u.endsWith("/"),b=(d||u===".")&&l.endsWith("/");return!f.pathname.endsWith("/")&&(g||b)&&(f.pathname+="/"),f}const yn=a=>a.join("/").replace(/\/\/+/g,"/"),G0=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),X0=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,W0=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function K0(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}const sy=["post","put","patch","delete"];new Set(sy);const Q0=["get",...sy];new Set(Q0);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lr(){return lr=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a[i]=l[i])}return a},lr.apply(this,arguments)}const wo=x.createContext(null),ay=x.createContext(null),Ba=x.createContext(null),Co=x.createContext(null),da=x.createContext({outlet:null,matches:[],isDataRoute:!1}),ny=x.createContext(null);function Z0(a,s){let{relative:l}=s===void 0?{}:s;ql()||Ot(!1);let{basename:i,navigator:c}=x.useContext(Ba),{hash:d,pathname:u,search:h}=Ao(a,{relative:l}),f=u;return i!=="/"&&(f=u==="/"?i:yn([i,u])),c.createHref({pathname:f,search:h,hash:d})}function ql(){return x.useContext(Co)!=null}function Gl(){return ql()||Ot(!1),x.useContext(Co).location}function ly(a){x.useContext(Ba).static||x.useLayoutEffect(a)}function rs(){let{isDataRoute:a}=x.useContext(da);return a?mN():J0()}function J0(){ql()||Ot(!1);let a=x.useContext(wo),{basename:s,future:l,navigator:i}=x.useContext(Ba),{matches:c}=x.useContext(da),{pathname:d}=Gl(),u=JSON.stringify(Ah(c,l.v7_relativeSplatPath)),h=x.useRef(!1);return ly(()=>{h.current=!0}),x.useCallback(function(g,b){if(b===void 0&&(b={}),!h.current)return;if(typeof g=="number"){i.go(g);return}let y=Eh(g,JSON.parse(u),d,b.relative==="path");a==null&&s!=="/"&&(y.pathname=y.pathname==="/"?s:yn([s,y.pathname])),(b.replace?i.replace:i.push)(y,b.state,b)},[s,i,u,d,a])}const eN=x.createContext(null);function tN(a){let s=x.useContext(da).outlet;return s&&x.createElement(eN.Provider,{value:a},s)}function dt(){let{matches:a}=x.useContext(da),s=a[a.length-1];return s?s.params:{}}function Ao(a,s){let{relative:l}=s===void 0?{}:s,{future:i}=x.useContext(Ba),{matches:c}=x.useContext(da),{pathname:d}=Gl(),u=JSON.stringify(Ah(c,i.v7_relativeSplatPath));return x.useMemo(()=>Eh(a,JSON.parse(u),d,l==="path"),[a,u,d,l])}function sN(a,s){return aN(a,s)}function aN(a,s,l,i){ql()||Ot(!1);let{navigator:c}=x.useContext(Ba),{matches:d}=x.useContext(da),u=d[d.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let g=Gl(),b;if(s){var y;let A=typeof s=="string"?Pl(s):s;f==="/"||(y=A.pathname)!=null&&y.startsWith(f)||Ot(!1),b=A}else b=g;let v=b.pathname||"/",S=v;if(f!=="/"){let A=f.replace(/^\//,"").split("/");S="/"+v.replace(/^\//,"").split("/").slice(A.length).join("/")}let N=k0(a,{pathname:S}),E=cN(N&&N.map(A=>Object.assign({},A,{params:Object.assign({},h,A.params),pathname:yn([f,c.encodeLocation?c.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?f:yn([f,c.encodeLocation?c.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),d,l,i);return s&&E?x.createElement(Co.Provider,{value:{location:lr({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:fn.Pop}},E):E}function nN(){let a=hN(),s=K0(a)?a.status+" "+a.statusText:a instanceof Error?a.message:JSON.stringify(a),l=a instanceof Error?a.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},s),l?x.createElement("pre",{style:c},l):null,null)}const lN=x.createElement(nN,null);class iN extends x.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,l){return l.location!==s.location||l.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:l.error,location:l.location,revalidation:s.revalidation||l.revalidation}}componentDidCatch(s,l){console.error("React Router caught the following error during render",s,l)}render(){return this.state.error!==void 0?x.createElement(da.Provider,{value:this.props.routeContext},x.createElement(ny.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rN(a){let{routeContext:s,match:l,children:i}=a,c=x.useContext(wo);return c&&c.static&&c.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=l.route.id),x.createElement(da.Provider,{value:s},i)}function cN(a,s,l,i){var c;if(s===void 0&&(s=[]),l===void 0&&(l=null),i===void 0&&(i=null),a==null){var d;if(!l)return null;if(l.errors)a=l.matches;else if((d=i)!=null&&d.v7_partialHydration&&s.length===0&&!l.initialized&&l.matches.length>0)a=l.matches;else return null}let u=a,h=(c=l)==null?void 0:c.errors;if(h!=null){let b=u.findIndex(y=>y.route.id&&h?.[y.route.id]!==void 0);b>=0||Ot(!1),u=u.slice(0,Math.min(u.length,b+1))}let f=!1,g=-1;if(l&&i&&i.v7_partialHydration)for(let b=0;b<u.length;b++){let y=u[b];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(g=b),y.route.id){let{loaderData:v,errors:S}=l,N=y.route.loader&&v[y.route.id]===void 0&&(!S||S[y.route.id]===void 0);if(y.route.lazy||N){f=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((b,y,v)=>{let S,N=!1,E=null,A=null;l&&(S=h&&y.route.id?h[y.route.id]:void 0,E=y.route.errorElement||lN,f&&(g<0&&v===0?(fN("route-fallback"),N=!0,A=null):g===v&&(N=!0,A=y.route.hydrateFallbackElement||null)));let T=s.concat(u.slice(0,v+1)),$=()=>{let D;return S?D=E:N?D=A:y.route.Component?D=x.createElement(y.route.Component,null):y.route.element?D=y.route.element:D=b,x.createElement(rN,{match:y,routeContext:{outlet:b,matches:T,isDataRoute:l!=null},children:D})};return l&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?x.createElement(iN,{location:l.location,revalidation:l.revalidation,component:E,error:S,children:$(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):$()},null)}var iy=(function(a){return a.UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a})(iy||{}),ry=(function(a){return a.UseBlocker="useBlocker",a.UseLoaderData="useLoaderData",a.UseActionData="useActionData",a.UseRouteError="useRouteError",a.UseNavigation="useNavigation",a.UseRouteLoaderData="useRouteLoaderData",a.UseMatches="useMatches",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a.UseRouteId="useRouteId",a})(ry||{});function oN(a){let s=x.useContext(wo);return s||Ot(!1),s}function dN(a){let s=x.useContext(ay);return s||Ot(!1),s}function uN(a){let s=x.useContext(da);return s||Ot(!1),s}function cy(a){let s=uN(),l=s.matches[s.matches.length-1];return l.route.id||Ot(!1),l.route.id}function hN(){var a;let s=x.useContext(ny),l=dN(),i=cy();return s!==void 0?s:(a=l.errors)==null?void 0:a[i]}function mN(){let{router:a}=oN(iy.UseNavigateStable),s=cy(ry.UseNavigateStable),l=x.useRef(!1);return ly(()=>{l.current=!0}),x.useCallback(function(c,d){d===void 0&&(d={}),l.current&&(typeof c=="number"?a.navigate(c):a.navigate(c,lr({fromRouteId:s},d)))},[a,s])}const Qg={};function fN(a,s,l){Qg[a]||(Qg[a]=!0)}function pN(a,s){a?.v7_startTransition,a?.v7_relativeSplatPath}function Zg(a){let{to:s,replace:l,state:i,relative:c}=a;ql()||Ot(!1);let{future:d,static:u}=x.useContext(Ba),{matches:h}=x.useContext(da),{pathname:f}=Gl(),g=rs(),b=Eh(s,Ah(h,d.v7_relativeSplatPath),f,c==="path"),y=JSON.stringify(b);return x.useEffect(()=>g(JSON.parse(y),{replace:l,state:i,relative:c}),[g,y,c,l,i]),null}function oy(a){return tN(a.context)}function lt(a){Ot(!1)}function gN(a){let{basename:s="/",children:l=null,location:i,navigationType:c=fn.Pop,navigator:d,static:u=!1,future:h}=a;ql()&&Ot(!1);let f=s.replace(/^\/*/,"/"),g=x.useMemo(()=>({basename:f,navigator:d,static:u,future:lr({v7_relativeSplatPath:!1},h)}),[f,h,d,u]);typeof i=="string"&&(i=Pl(i));let{pathname:b="/",search:y="",hash:v="",state:S=null,key:N="default"}=i,E=x.useMemo(()=>{let A=Yl(b,f);return A==null?null:{location:{pathname:A,search:y,hash:v,state:S,key:N},navigationType:c}},[f,b,y,v,S,N,c]);return E==null?null:x.createElement(Ba.Provider,{value:g},x.createElement(Co.Provider,{children:l,value:E}))}function xN(a){let{children:s,location:l}=a;return sN(xh(s),l)}new Promise(()=>{});function xh(a,s){s===void 0&&(s=[]);let l=[];return x.Children.forEach(a,(i,c)=>{if(!x.isValidElement(i))return;let d=[...s,c];if(i.type===x.Fragment){l.push.apply(l,xh(i.props.children,d));return}i.type!==lt&&Ot(!1),!i.props.index||!i.props.children||Ot(!1);let u={id:i.props.id||d.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=xh(i.props.children,d)),l.push(u)}),l}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function co(){return co=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a[i]=l[i])}return a},co.apply(this,arguments)}function dy(a,s){if(a==null)return{};var l={},i=Object.keys(a),c,d;for(d=0;d<i.length;d++)c=i[d],!(s.indexOf(c)>=0)&&(l[c]=a[c]);return l}function bN(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function yN(a,s){return a.button===0&&(!s||s==="_self")&&!bN(a)}const vN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],NN="6";try{window.__reactRouterVersion=NN}catch{}const SN=x.createContext({isTransitioning:!1}),wN="startTransition",Jg=v0[wN];function CN(a){let{basename:s,children:l,future:i,window:c}=a,d=x.useRef();d.current==null&&(d.current=E0({window:c,v5Compat:!0}));let u=d.current,[h,f]=x.useState({action:u.action,location:u.location}),{v7_startTransition:g}=i||{},b=x.useCallback(y=>{g&&Jg?Jg(()=>f(y)):f(y)},[f,g]);return x.useLayoutEffect(()=>u.listen(b),[u,b]),x.useEffect(()=>pN(i),[i]),x.createElement(gN,{basename:s,children:l,location:h.location,navigationType:h.action,navigator:u,future:i})}const AN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",EN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Pe=x.forwardRef(function(s,l){let{onClick:i,relative:c,reloadDocument:d,replace:u,state:h,target:f,to:g,preventScrollReset:b,viewTransition:y}=s,v=dy(s,vN),{basename:S}=x.useContext(Ba),N,E=!1;if(typeof g=="string"&&EN.test(g)&&(N=g,AN))try{let D=new URL(window.location.href),I=g.startsWith("//")?new URL(D.protocol+g):new URL(g),G=Yl(I.pathname,S);I.origin===D.origin&&G!=null?g=G+I.search+I.hash:E=!0}catch{}let A=Z0(g,{relative:c}),T=_N(g,{replace:u,state:h,target:f,preventScrollReset:b,relative:c,viewTransition:y});function $(D){i&&i(D),D.defaultPrevented||T(D)}return x.createElement("a",co({},v,{href:N||A,onClick:E||d?i:$,ref:l,target:f}))}),uy=x.forwardRef(function(s,l){let{"aria-current":i="page",caseSensitive:c=!1,className:d="",end:u=!1,style:h,to:f,viewTransition:g,children:b}=s,y=dy(s,jN),v=Ao(f,{relative:y.relative}),S=Gl(),N=x.useContext(ay),{navigator:E,basename:A}=x.useContext(Ba),T=N!=null&&kN(v)&&g===!0,$=E.encodeLocation?E.encodeLocation(v).pathname:v.pathname,D=S.pathname,I=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;c||(D=D.toLowerCase(),I=I?I.toLowerCase():null,$=$.toLowerCase()),I&&A&&(I=Yl(I,A)||I);const G=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let L=D===$||!u&&D.startsWith($)&&D.charAt(G)==="/",_=I!=null&&(I===$||!u&&I.startsWith($)&&I.charAt($.length)==="/"),O={isActive:L,isPending:_,isTransitioning:T},H=L?i:void 0,C;typeof d=="function"?C=d(O):C=[d,L?"active":null,_?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let P=typeof h=="function"?h(O):h;return x.createElement(Pe,co({},y,{"aria-current":H,className:C,ref:l,style:P,to:f,viewTransition:g}),typeof b=="function"?b(O):b)});var bh;(function(a){a.UseScrollRestoration="useScrollRestoration",a.UseSubmit="useSubmit",a.UseSubmitFetcher="useSubmitFetcher",a.UseFetcher="useFetcher",a.useViewTransitionState="useViewTransitionState"})(bh||(bh={}));var ex;(function(a){a.UseFetcher="useFetcher",a.UseFetchers="useFetchers",a.UseScrollRestoration="useScrollRestoration"})(ex||(ex={}));function TN(a){let s=x.useContext(wo);return s||Ot(!1),s}function _N(a,s){let{target:l,replace:i,state:c,preventScrollReset:d,relative:u,viewTransition:h}=s===void 0?{}:s,f=rs(),g=Gl(),b=Ao(a,{relative:u});return x.useCallback(y=>{if(yN(y,l)){y.preventDefault();let v=i!==void 0?i:ro(g)===ro(b);f(a,{replace:v,state:c,preventScrollReset:d,relative:u,viewTransition:h})}},[g,f,b,i,c,l,a,d,u,h])}function kN(a,s){s===void 0&&(s={});let l=x.useContext(SN);l==null&&Ot(!1);let{basename:i}=TN(bh.useViewTransitionState),c=Ao(a,{relative:s.relative});if(!l.isTransitioning)return!1;let d=Yl(l.currentLocation.pathname,i)||l.currentLocation.pathname,u=Yl(l.nextLocation.pathname,i)||l.nextLocation.pathname;return gh(c.pathname,u)!=null||gh(c.pathname,d)!=null}const hy=x.createContext(null);function DN({children:a}){const[s,l]=x.useState(null),[i,c]=x.useState(null),d=x.useMemo(()=>{const u=()=>s&&(s.userId||s.id||s.username||s.userName)||null;return{user:s,role:i,setUser:l,setRole:c,getUserId:u,isCurrentUser:f=>{if(!f)return!1;const g=u();return g!=null&&String(g)===String(f)}}},[s,i]);return e.jsx(hy.Provider,{value:d,children:a})}function my(){const a=x.useContext(hy);if(!a)throw new Error("useUser must be used within <UserProvider>");return a}function MN({role:a="student"}){const s=x.useRef(null),l=x.useRef(null),i=x.useRef(null),[c,d]=x.useState(null),[u,h]=x.useState(null),f=my(),g=a==="professor"?"/classroom/api/v1/professor/me":"/classroom/api/v1/student/me";x.useMemo(()=>({lastName:"",firstName:"",engLname:" ",engFname:" ",mobileNo:"",email:"",professorNo:"",studentNo:"",univDeptName:"",gradeName:"",stuStatusName:"",prfStatusName:"",prfAppntName:"",prfPositName:""}),[]);const b=(v,S)=>{if(!v)return'<div class="text-muted"> </div>';const N=v.lastName||"",E=v.firstName||"",A=`${N}${E}`.trim();let T='<div class="container-fluid p-0">';const $=(D,I,G=!1)=>I?G?`
          <div class="d-flex mb-1">
            <div class="text-muted small me-2">${y(D)}</div>
            <div class="fw-semibold text-nowrap">${y(String(I))}</div>
          </div>
        `:`
        <div class="row g-0 mb-1">
          <div class="col-4 text-muted small">${y(D)}</div>
          <div class="col-8 fw-semibold">${y(String(I))}</div>
        </div>
      `:"";return A&&(T+=$("",A)),v.studentNo?T+=$("",v.studentNo):v.professorNo&&(T+=$("",v.professorNo)),v.univDeptName&&(T+=$("",v.univDeptName)),v.gradeName&&S==="student"&&(T+=$("",v.gradeName)),v.stuStatusName?T+=$("",v.stuStatusName):v.prfStatusName&&(T+=$("",v.prfStatusName)),v.mobileNo&&(T+=$("",v.mobileNo)),v.email&&(T+=$("",v.email,!0)),T+="</div>",T};function y(v){return String(v).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}return x.useEffect(()=>{let v=!0;return(async()=>{try{const S=await fetch(g,{headers:{Accept:"application/json"},credentials:"include"});if(!S.ok)throw new Error(`HTTP ${S.status}`);const N=await S.json();if(!v)return;d(N);try{f.setUser(N),f.setRole(a)}catch{}}catch(S){if(!v)return;h(S)}})(),()=>{v=!1}},[g]),x.useEffect(()=>{if(l.current){if(u)l.current.textContent="  ";else if(c){const v=c.lastName||"",S=c.firstName||"",N=`${v}${S}`.trim(),E=c.univDeptName||"";if(a==="professor")l.current.innerHTML=`<i class="bi bi-person-circle me-1"></i> ${y(`${E} ${N}`.trim())} `;else{const A=c.gradeName||"";l.current.innerHTML=`<i class="bi bi-person-circle me-1"></i> ${y(`${E} ${A} ${N}`.trim())}`}}}},[c,u,a]),x.useEffect(()=>{const v=s.current;if(!v||!window.bootstrap)return;i.current&&i.current.dispose&&(i.current.dispose(),i.current=null);const S=new window.bootstrap.Popover(v,{trigger:"hover",placement:"bottom",html:!0,title:" ",content:()=>b(c,a)});return i.current=S,()=>{i.current&&i.current.dispose&&(i.current.dispose(),i.current=null)}},[c]),e.jsx("li",{ref:s,className:"nav-item",id:"user-info-container",style:{cursor:"pointer"},"data-user-role":a,children:e.jsxs("span",{className:"navbar-text",id:"user-info-text",ref:l,children:[e.jsx("i",{className:"bi bi-person-circle me-1"}),"  "]})})}async function RN(a){const l=`/classroom/api/v1/common/${encodeURIComponent(a)}`,i=await fetch(l,{headers:{Accept:"application/json"},credentials:"include"});if(!i.ok)throw new Error(`(${i.status})    .`);return i.json()}function $N(a){if(!a)return[];try{if(Array.isArray(a))return a;if(typeof a=="string")return JSON.parse(a)}catch{}return[]}const fy=x.createContext(null);function IN({children:a}){const[s,l]=x.useState(null),[i,c]=x.useState(null),d=x.useRef(new Map),u=x.useCallback(()=>s?.lectureId||s?.id||s?.lectureNo||null,[s]),h=x.useCallback(S=>{if(!S)return null;const[N,E]=String(S).split("_");return`${N} ${{REG1:"1",REG2:"2",SUB1:"",SUB2:""}[E]||E||""}`.trim()},[]),f=x.useCallback((S,N)=>{const E=N||u();return!E||!S?null:`/classroom/api/v1/common/photo/student/${encodeURIComponent(E)}/${encodeURIComponent(S)}`},[u]),g=x.useCallback(S=>d.current.get(String(S))||null,[]),b=x.useCallback((S,N)=>{!S||!N||d.current.set(String(S),String(N))},[]),y=x.useCallback(()=>{c(null);for(const S of d.current.values())try{URL.revokeObjectURL(S)}catch{}d.current.clear()},[]),v=x.useMemo(()=>({lecture:s,setLecture:l,getLectureId:u,formatYearTerm:h,students:i,setStudents:c,getStudentPhotoUrl:f,getStudentPhotoBlobUrl:g,cacheStudentPhotoBlobUrl:b,clearLectureScoped:y}),[s,i,u,h,f,g,b,y]);return e.jsx(fy.Provider,{value:v,children:a})}function Jt(){const a=x.useContext(fy);if(!a)throw new Error("useLecture must be used within <LectureProvider>");return a}function ON({lectureId:a}){const s=x.useRef(null),l=x.useRef(null),[i,c]=x.useState(null),[d,u]=x.useState(null),[h,f]=x.useState(!1),{lecture:g,setLecture:b,formatYearTerm:y}=Jt(),v=x.useMemo(()=>({MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""}),[]),S=T=>{if(!T||String(T).length<4)return"--:--";const $=String(T);return`${$.slice(0,2)}:${$.slice(2,4)}`},N=T=>String(T??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),E=T=>{if(!T)return null;const $=y(T.yeartermCd),D=$N(T.scheduleJson),I=T.currentCap!=null||T.maxCap!=null?`${T.currentCap??"-"} / ${T.maxCap??"-"}`:null;return{subjectName:T.subjectName,professorName:T.professorName,univDeptName:T.univDeptName,completionName:T.completionName,subjectTypeName:T.subjectTypeName,yearTerm:$,credit:T.credit,hour:T.hour,capacity:I,ended:!!T.ended,endAt:T.endAt,schedules:D}},A=T=>{if(h)return'<div class="d-flex align-items-center"><div class="spinner-border spinner-border-sm me-2" role="status"></div> </div>';if(d)return`<div class="text-danger small">${N(String(d.message||d))}</div>`;if(!T)return'<div class="text-muted small"> </div>';const $=[[" ",T.professorName],["",T.univDeptName]].filter(([,_])=>_!=null&&String(_).trim().length>0),D=[["",T.completionName],["",T.subjectTypeName],["/",T.credit!=null||T.hour!=null?`${T.credit??"-"} / ${T.hour??"-"}`:null],["",T.capacity],["",T.yearTerm]].filter(([,_])=>_!=null&&String(_).trim().length>0),I=T.schedules&&T.schedules.length?T.schedules.map((_,O)=>{const H=_.placeName||_.placeCd||" ";return(Array.isArray(_.slots)?_.slots:[]).map((C,P)=>`<div class="lecture-schedule-line d-flex justify-content-between">
               <span>${N(v[C.day]??C.day??"")} ${S(C.start)} ~ ${S(C.end)}</span>
               <span>${N(H)}</span>
             </div>`).join("")}).join(""):'<div class="text-muted small">  </div>',G=$.map(([_,O])=>`
        <div class="lecture-info-item">
          <strong class="lecture-info-label">${_===" "?'<i class="bi bi-person-fill"></i>':'<i class="bi bi-building"></i>'} ${N(_)}</strong>
          <span class="lecture-info-value">${N(String(O))}</span>
        </div>
      `).join(""),L=D.map(([_,O])=>`
      <div class="lecture-sub-info-item">
        <strong class="lecture-sub-info-label">${N(_)}</strong>
        <span class="lecture-sub-info-value">${N(String(O))}</span>
      </div>
    `).join("");return`
      <div class="lecture-info-popover-content">
        <div class="lecture-info-main">${G}</div>
        <hr class="my-2">
        <div class="lecture-info-sub">${L}</div>
        <hr class="my-2">
        <div class="lecture-schedule-section">
          <strong class="lecture-info-label"><i class="bi bi-clock-fill"></i> </strong>
          <div class="lecture-schedule-list mt-1">${I}</div>
        </div>
      </div>
    `};return x.useEffect(()=>{let T=!0;if(a)return(async()=>{try{f(!0),u(null);const $=await RN(a);if(!T)return;c($),b($)}catch($){if(!T)return;u($)}finally{T&&f(!1)}})(),()=>{T=!1}},[a,b]),x.useEffect(()=>{const T=s.current;if(!T||!window.bootstrap)return;l.current?.dispose&&(l.current.dispose(),l.current=null);const $=new window.bootstrap.Popover(T,{trigger:"hover",placement:"bottom",html:!0,title:" ",content:()=>A(E(i)),customClass:"lecture-info-popover"});return l.current=$,()=>{l.current?.dispose&&(l.current.dispose(),l.current=null)}},[i,h,d]),e.jsxs("button",{ref:s,type:"button",className:"btn btn-link nav-link text-white-50 p-0 ms-1","aria-label":"  ",children:[e.jsx("i",{className:"bi bi-info-circle","aria-hidden":"true"}),"  "]})}const Ac=["","","","","",""],tx={:"MO",:"TU",:"WE",:"TH",:"FR",:"SA"},La=[];for(let a=9;a<19;a++)La.push(`${String(a).padStart(2,"0")}00`),La.push(`${String(a).padStart(2,"0")}30`);La.push("1900");La.push("1930");const LN=[{value:"REG1",label:"1"},{value:"REG2",label:"2"},{value:"SUB1",label:""},{value:"SUB2",label:""}],sx=["#FFB3BA","#FFDFBA","#FFFFBA","#BAFFC9","#BAE1FF","#D4BAFF","#FFB3E6","#FFC9BA","#BAF0FF","#E6BAFF","#FFBABA","#FFE5BA","#F0FFBA","#BAFFDB","#BADEFF"];function zN(){const a=rs(),[s,l]=x.useState(""),[i,c]=x.useState(""),[d,u]=x.useState([]),[h,f]=x.useState(!1),[g,b]=x.useState(!1),[y,v]=x.useState(!1),S=new Date().getFullYear(),N=[];for(let L=S-3;L<=S+1;L++)N.push(L);x.useEffect(()=>{g&&!y&&(E(),v(!0))},[g]),x.useEffect(()=>{s&&i&&E()},[s,i]);const E=async()=>{f(!0);try{let L="/classroom/api/v1/professor/schedule";s&&i&&(L+=`?yeartermCd=${s}_${i}`);const _=await fetch(L);if(!_.ok)throw new Error("Failed to fetch schedule");const O=await _.json();u(O||[])}catch(L){console.error("Failed to fetch schedule:",L),u([])}finally{f(!1)}},A=L=>{const O=!L.currentTarget.closest(".dropdown").classList.contains("show");b(O)},T=L=>{const _=L.substring(0,2),O=L.substring(2);return{dayCode:_,time:O}},$=L=>{const _={};return L.forEach(O=>{_[O.lectureId]||(_[O.lectureId]=[]),_[O.lectureId].push(O)}),Object.keys(_).forEach(O=>{_[O].sort((H,C)=>{const P=T(H.timeblockCd),U=T(C.timeblockCd);return P.dayCode!==U.dayCode?P.dayCode.localeCompare(U.dayCode):P.time.localeCompare(U.time)})}),_},D=L=>{const _=[];let O=null;return L.forEach(H=>{const{dayCode:C,time:P}=T(H.timeblockCd);if(!O||O.dayCode!==C)O&&_.push(O),O={lectureId:H.lectureId,subjectName:H.subjectName,placeName:H.placeName,dayCode:C,startTime:P,endTime:P,items:[H]};else{const U=O.endTime,Z=I(U);P===Z?(O.endTime=P,O.items.push(H)):(_.push(O),O={lectureId:H.lectureId,subjectName:H.subjectName,placeName:H.placeName,dayCode:C,startTime:P,endTime:P,items:[H]})}}),O&&_.push(O),_},I=L=>{const _=parseInt(L.substring(0,2));return parseInt(L.substring(2))===30?`${String(_+1).padStart(2,"0")}00`:`${String(_).padStart(2,"0")}30`},G=()=>{const L=$(d),_=[],O={};let H=0;Object.keys(L).sort((U,Z)=>{const z=T(L[U][0].timeblockCd),W=T(L[Z][0].timeblockCd);return z.dayCode!==W.dayCode?z.dayCode.localeCompare(W.dayCode):z.time.localeCompare(W.time)}).forEach(U=>{O[U]=sx[H%sx.length],H++;const Z=D(L[U]);_.push(...Z)});const P={};return Ac.forEach(U=>{P[U]={},La.forEach(Z=>{P[U][Z]=null})}),_.forEach(U=>{const Z=Object.keys(tx).find(M=>tx[M]===U.dayCode);if(!Z)return;const z=La.indexOf(U.startTime),W=I(U.endTime),w=La.indexOf(W);if(z!==-1&&w!==-1){const M=w-z;P[Z][U.startTime]={...U,rowSpan:M,color:O[U.lectureId]};for(let B=z+1;B<w;B++)P[Z][La[B]]="occupied"}}),e.jsxs("table",{className:"table table-bordered table-sm",style:{tableLayout:"fixed"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"80px"}}),Ac.map(U=>e.jsx("col",{style:{width:"100px"}},U))]}),e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"80px",minWidth:"80px"},children:""}),Ac.map(U=>e.jsx("th",{style:{width:"100px"},children:U},U))]})}),e.jsx("tbody",{children:La.slice(0,-1).map((U,Z)=>e.jsxs("tr",{style:{height:"30px"},children:[e.jsxs("td",{className:"text-center align-middle",style:{fontSize:"0.85rem"},children:[U.substring(0,2),":",U.substring(2),"~",I(U).substring(0,2),":",I(U).substring(2)]}),Ac.map(z=>{const W=P[z][U];return W==="occupied"?null:W&&W.rowSpan?e.jsxs("td",{rowSpan:W.rowSpan,className:"p-2 text-center align-middle position-relative",style:{backgroundColor:W.color,cursor:"pointer",verticalAlign:"middle"},onClick:()=>a(`/classroom/professor/lecture/${W.lectureId}`),children:[e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600"},children:W.subjectName}),e.jsx("div",{style:{fontSize:"0.75rem",marginTop:"4px"},children:W.placeName})]},z):e.jsx("td",{},z)})]},U))})]})};return e.jsxs("div",{className:"dropdown",children:[e.jsx("a",{className:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:A,children:""}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-dark dropdown-menu-end p-3",style:{minWidth:"500px",maxWidth:"600px"},children:[e.jsxs("div",{className:"mb-3 d-flex gap-2",children:[e.jsxs("select",{className:"form-select form-select-sm",value:s,onChange:L=>l(L.target.value),style:{width:"auto"},children:[e.jsx("option",{value:"",children:""}),N.map(L=>e.jsxs("option",{value:L,children:[L,""]},L))]}),e.jsxs("select",{className:"form-select form-select-sm",value:i,onChange:L=>c(L.target.value),style:{width:"auto"},children:[e.jsx("option",{value:"",children:""}),LN.map(L=>e.jsx("option",{value:L.value,children:L.label},L.value))]})]}),h&&e.jsx("div",{className:"text-center py-3",children:e.jsx("div",{className:"spinner-border spinner-border-sm text-light",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),!h&&y&&e.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",backgroundColor:"white",borderRadius:"4px",padding:"8px"},children:d.length>0?G():e.jsx("div",{className:"text-center py-3 text-muted",children:"   ."})})]})]})}const Ec=["","","","","",""],ax={:"MO",:"TU",:"WE",:"TH",:"FR",:"SA"},za=[];for(let a=9;a<19;a++)za.push(`${String(a).padStart(2,"0")}00`),za.push(`${String(a).padStart(2,"0")}30`);za.push("1900");za.push("1930");const UN=[{value:"REG1",label:"1"},{value:"REG2",label:"2"},{value:"SUB1",label:""},{value:"SUB2",label:""}],nx=["#FFB3BA","#FFDFBA","#FFFFBA","#BAFFC9","#BAE1FF","#D4BAFF","#FFB3E6","#FFC9BA","#BAF0FF","#E6BAFF","#FFBABA","#FFE5BA","#F0FFBA","#BAFFDB","#BADEFF"];function BN(){const a=rs(),[s,l]=x.useState(""),[i,c]=x.useState(""),[d,u]=x.useState([]),[h,f]=x.useState(!1),[g,b]=x.useState(!1),[y,v]=x.useState(!1),S=new Date().getFullYear(),N=[];for(let L=S-3;L<=S+1;L++)N.push(L);x.useEffect(()=>{g&&!y&&(E(),v(!0))},[g]),x.useEffect(()=>{s&&i&&E()},[s,i]);const E=async()=>{f(!0);try{let L="/classroom/api/v1/student/schedule";s&&i&&(L+=`?yeartermCd=${s}_${i}`);const _=await fetch(L);if(!_.ok)throw new Error("Failed to fetch schedule");const O=await _.json();u(O||[])}catch(L){console.error("Failed to fetch schedule:",L),u([])}finally{f(!1)}},A=L=>{const O=!L.currentTarget.closest(".dropdown").classList.contains("show");b(O)},T=L=>{const _=L.substring(0,2),O=L.substring(2);return{dayCode:_,time:O}},$=L=>{const _={};return L.forEach(O=>{_[O.lectureId]||(_[O.lectureId]=[]),_[O.lectureId].push(O)}),Object.keys(_).forEach(O=>{_[O].sort((H,C)=>{const P=T(H.timeblockCd),U=T(C.timeblockCd);return P.dayCode!==U.dayCode?P.dayCode.localeCompare(U.dayCode):P.time.localeCompare(U.time)})}),_},D=L=>{const _=[];let O=null;return L.forEach(H=>{const{dayCode:C,time:P}=T(H.timeblockCd);if(!O||O.dayCode!==C)O&&_.push(O),O={lectureId:H.lectureId,subjectName:H.subjectName,placeName:H.placeName,dayCode:C,startTime:P,endTime:P,items:[H]};else{const U=O.endTime,Z=I(U);P===Z?(O.endTime=P,O.items.push(H)):(_.push(O),O={lectureId:H.lectureId,subjectName:H.subjectName,placeName:H.placeName,dayCode:C,startTime:P,endTime:P,items:[H]})}}),O&&_.push(O),_},I=L=>{const _=parseInt(L.substring(0,2));return parseInt(L.substring(2))===30?`${String(_+1).padStart(2,"0")}00`:`${String(_).padStart(2,"0")}30`},G=()=>{const L=$(d),_=[],O={};let H=0;Object.keys(L).sort((U,Z)=>{const z=T(L[U][0].timeblockCd),W=T(L[Z][0].timeblockCd);return z.dayCode!==W.dayCode?z.dayCode.localeCompare(W.dayCode):z.time.localeCompare(W.time)}).forEach(U=>{O[U]=nx[H%nx.length],H++;const Z=D(L[U]);_.push(...Z)});const P={};return Ec.forEach(U=>{P[U]={},za.forEach(Z=>{P[U][Z]=null})}),_.forEach(U=>{const Z=Object.keys(ax).find(M=>ax[M]===U.dayCode);if(!Z)return;const z=za.indexOf(U.startTime),W=I(U.endTime),w=za.indexOf(W);if(z!==-1&&w!==-1){const M=w-z;P[Z][U.startTime]={...U,rowSpan:M,color:O[U.lectureId]};for(let B=z+1;B<w;B++)P[Z][za[B]]="occupied"}}),e.jsxs("table",{className:"table table-bordered table-sm",style:{tableLayout:"fixed"},children:[e.jsxs("colgroup",{children:[e.jsx("col",{style:{width:"80px"}}),Ec.map(U=>e.jsx("col",{style:{width:"100px"}},U))]}),e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"80px",minWidth:"80px"},children:""}),Ec.map(U=>e.jsx("th",{style:{width:"100px"},children:U},U))]})}),e.jsx("tbody",{children:za.slice(0,-1).map((U,Z)=>e.jsxs("tr",{style:{height:"30px"},children:[e.jsxs("td",{className:"text-center align-middle",style:{fontSize:"0.85rem"},children:[U.substring(0,2),":",U.substring(2),"~",I(U).substring(0,2),":",I(U).substring(2)]}),Ec.map(z=>{const W=P[z][U];return W==="occupied"?null:W&&W.rowSpan?e.jsxs("td",{rowSpan:W.rowSpan,className:"p-2 text-center align-middle position-relative",style:{backgroundColor:W.color,cursor:"pointer",verticalAlign:"middle"},onClick:()=>a(`/classroom/student/lecture/${W.lectureId}`),children:[e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600"},children:W.subjectName}),e.jsx("div",{style:{fontSize:"0.75rem",marginTop:"4px"},children:W.placeName})]},z):e.jsx("td",{},z)})]},U))})]})};return e.jsxs("div",{className:"dropdown",children:[e.jsx("a",{className:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:A,children:""}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-dark dropdown-menu-end p-3",style:{minWidth:"500px",maxWidth:"600px"},children:[e.jsxs("div",{className:"mb-3 d-flex gap-2",children:[e.jsxs("select",{className:"form-select form-select-sm",value:s,onChange:L=>l(L.target.value),style:{width:"auto"},children:[e.jsx("option",{value:"",children:""}),N.map(L=>e.jsxs("option",{value:L,children:[L,""]},L))]}),e.jsxs("select",{className:"form-select form-select-sm",value:i,onChange:L=>c(L.target.value),style:{width:"auto"},children:[e.jsx("option",{value:"",children:""}),UN.map(L=>e.jsx("option",{value:L.value,children:L.label},L.value))]})]}),h&&e.jsx("div",{className:"text-center py-3",children:e.jsx("div",{className:"spinner-border spinner-border-sm text-light",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),!h&&y&&e.jsx("div",{style:{maxHeight:"400px",overflowY:"auto",backgroundColor:"white",borderRadius:"4px",padding:"8px"},children:d.length>0?G():e.jsx("div",{className:"text-center py-3 text-muted",children:"   ."})})]})]})}function FN({role:a="student",lectureId:s}){const{lecture:l}=Jt();return e.jsx("nav",{className:"navbar navbar-dark app-header",children:e.jsxs("div",{className:"container-fluid d-flex align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center me-auto gap-2",children:[e.jsx(Pe,{className:"navbar-brand fw-bold m-0",to:`/classroom/${a}`,children:"Classroom"}),s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"navbar-text text-white fw-semibold ms-2","data-lecture-subject-label":"true",children:l?.subjectName||" "}),e.jsx(ON,{lectureId:s})]}):null]}),e.jsxs("ul",{className:"navbar-nav flex-row ms-auto align-items-center gap-3",children:[e.jsx(MN,{role:a}),e.jsx("li",{className:"nav-item",children:a==="professor"?e.jsx(zN,{}):e.jsx(BN,{})}),e.jsxs("li",{className:"nav-item dropdown",children:[e.jsx("a",{className:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:""}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-dark dropdown-menu-end",children:[e.jsx("li",{children:e.jsx("a",{className:"dropdown-item",href:"http://localhost/portal",target:"_blank",rel:"noopener noreferrer",children:" "})}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),a==="professor"?e.jsx("li",{children:e.jsx("a",{className:"dropdown-item",href:"http://localhost/professor",target:"_blank",rel:"noopener noreferrer",children:""})}):e.jsx("li",{children:e.jsx("a",{className:"dropdown-item",href:"http://localhost/student",target:"_blank",rel:"noopener noreferrer",children:""})})]})]}),e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link p-0 text-danger",href:"/logout",children:""})})]})]})})}var py={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},lx=qs.createContext&&qs.createContext(py),HN=["attr","size","title"];function YN(a,s){if(a==null)return{};var l=VN(a,s),i,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);for(c=0;c<d.length;c++)i=d[c],!(s.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(a,i)&&(l[i]=a[i])}return l}function VN(a,s){if(a==null)return{};var l={};for(var i in a)if(Object.prototype.hasOwnProperty.call(a,i)){if(s.indexOf(i)>=0)continue;l[i]=a[i]}return l}function oo(){return oo=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a[i]=l[i])}return a},oo.apply(this,arguments)}function ix(a,s){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);s&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable})),l.push.apply(l,i)}return l}function uo(a){for(var s=1;s<arguments.length;s++){var l=arguments[s]!=null?arguments[s]:{};s%2?ix(Object(l),!0).forEach(function(i){PN(a,i,l[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ix(Object(l)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(l,i))})}return a}function PN(a,s,l){return s=qN(s),s in a?Object.defineProperty(a,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[s]=l,a}function qN(a){var s=GN(a,"string");return typeof s=="symbol"?s:s+""}function GN(a,s){if(typeof a!="object"||!a)return a;var l=a[Symbol.toPrimitive];if(l!==void 0){var i=l.call(a,s);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(a)}function gy(a){return a&&a.map((s,l)=>qs.createElement(s.tag,uo({key:l},s.attr),gy(s.child)))}function Th(a){return s=>qs.createElement(XN,oo({attr:uo({},a.attr)},s),gy(a.child))}function XN(a){var s=l=>{var{attr:i,size:c,title:d}=a,u=YN(a,HN),h=c||l.size||"1em",f;return l.className&&(f=l.className),a.className&&(f=(f?f+" ":"")+a.className),qs.createElement("svg",oo({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,i,u,{className:f,style:uo(uo({color:a.color||l.color},l.style),a.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),d&&qs.createElement("title",null,d),a.children)};return lx!==void 0?qs.createElement(lx.Consumer,null,l=>s(l)):s(py)}function WN(a){return Th({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2m.995-14.901a1 1 0 1 0-1.99 0A5 5 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901"},child:[]}]})(a)}function KN(a){return Th({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"},child:[]}]})(a)}function QN(a){return Th({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5z"},child:[]},{tag:"path",attr:{d:"M3 2.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 0 0-1h-.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1H12a.5.5 0 0 0 0 1h.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5z"},child:[]},{tag:"path",attr:{d:"M10.854 7.854a.5.5 0 0 0-.708-.708L7.5 9.793 6.354 8.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0z"},child:[]}]})(a)}const Ys={loading:" ...",loadError:"    .",ongoingLectures:" ",ongoingEmpty:"   .",tasks:" ",tasksEmpty:"  .",reviews:" ",reviewsEmpty:"   ."},ZN="/classroom/api/v1/student/mylist",JN="/classroom/api/v1/student/me/indivtask",eS="/classroom/api/v1/student/review",Tc=a=>String(a).padStart(2,"0"),tS=a=>{if(!a)return"";const s=new Date(a);return Number.isNaN(s.getTime())?"":`${s.getFullYear()}-${Tc(s.getMonth()+1)}-${Tc(s.getDate())} ${Tc(s.getHours())}:${Tc(s.getMinutes())}`};function sS(){const[a,s]=x.useState(!1),[l,i]=x.useState([]),[c,d]=x.useState(!1),[u,h]=x.useState(""),[f,g]=x.useState(!1),[b,y]=x.useState([]),[v,S]=x.useState(!1),[N,E]=x.useState(""),[A,T]=x.useState(!1),[$,D]=x.useState([]),[I,G]=x.useState(!1),[L,_]=x.useState("");x.useEffect(()=>{let U=!1;async function Z(){try{d(!0),h("");const z=await fetch(ZN,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!z.ok)throw new Error(`HTTP ${z.status}`);const W=await z.json();U||i(Array.isArray(W)?W:[])}catch(z){console.error("[SidebarStudent] failed to load lectures",z),U||(i([]),h(Ys.loadError))}finally{U||d(!1)}}return Z(),()=>{U=!0}},[]),x.useEffect(()=>{let U=!1;async function Z(){try{S(!0),E("");const z=await fetch(JN,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!z.ok)throw new Error(`HTTP ${z.status}`);const W=await z.json();U||y(Array.isArray(W)?W:[])}catch(z){console.error("[SidebarStudent] failed to load tasks",z),U||(y([]),E(Ys.loadError))}finally{U||S(!1)}}return Z(),()=>{U=!0}},[]),x.useEffect(()=>{let U=!1;async function Z(){try{G(!0),_("");const z=await fetch(eS,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!z.ok)throw new Error(`HTTP ${z.status}`);const W=await z.json();U||D(Array.isArray(W)?W:[])}catch(z){console.error("[SidebarStudent] failed to load reviews",z),U||(D([]),_(Ys.loadError))}finally{U||G(!1)}}return Z(),()=>{U=!0}},[]);const O=x.useMemo(()=>l.filter(U=>U&&U.ended===!1),[l]),H=x.useMemo(()=>$.length===0?[]:$.map(U=>l.find(Z=>Z.lectureId===U)).filter(Boolean),[$,l]),C=v?"...":b.length,P=I?"...":$.length;return e.jsxs("nav",{className:"list-group list-group-flush rounded-0",children:[e.jsx("button",{type:"button",className:`list-group-item list-group-item-action d-flex justify-content-between align-items-center fw-semibold ${a?"bg-primary-subtle text-primary-emphasis":"bg-body-tertiary"}`,onClick:()=>s(U=>!U),children:e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(KN,{className:"me-2 fs-5"})," ",Ys.ongoingLectures]})}),a&&e.jsxs("div",{className:"list-group list-group-flush bg-primary-subtle border-top border-primary-subtle",children:[c&&e.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:Ys.loading}),!c&&u&&e.jsx("div",{className:"list-group-item small text-danger bg-transparent border-0",children:u}),!c&&!u&&O.length===0&&e.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:Ys.ongoingEmpty}),!c&&!u&&O.map(U=>e.jsxs(Pe,{to:`/classroom/student/${encodeURIComponent(U.lectureId||"")}`,className:"list-group-item list-group-item-action ps-4 bg-transparent border-0",children:[e.jsx("div",{className:"fw-semibold text-truncate text-primary-emphasis",children:U.subjectName||"-"}),e.jsx("div",{className:"text-muted small text-truncate",children:U.completionName||""})]},U.lectureId))]}),e.jsx("button",{type:"button",className:`list-group-item list-group-item-action d-flex justify-content-between align-items-center fw-semibold ${f?"bg-primary-subtle text-primary-emphasis":"bg-body-tertiary"}`,onClick:()=>g(U=>!U),children:e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(QN,{className:"me-2 fs-5"})," ",Ys.tasks,e.jsx("span",{className:"ms-2 badge text-bg-secondary",children:C})]})}),f&&e.jsxs("div",{className:"list-group list-group-flush bg-primary-subtle border-top border-primary-subtle",children:[v&&e.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:Ys.loading}),!v&&N&&e.jsx("div",{className:"list-group-item small text-danger bg-transparent border-0",children:N}),!v&&!N&&b.length===0&&e.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:Ys.tasksEmpty}),!v&&!N&&b.map(U=>e.jsxs(Pe,{to:`/classroom/student/${encodeURIComponent(U.lectureId||"")}/task/indiv/${encodeURIComponent(U.indivtaskId||"")}`,className:"list-group-item list-group-item-action ps-4 bg-transparent border-0",children:[e.jsx("div",{className:"fw-semibold text-truncate text-primary-emphasis",children:U.indivtaskName||"-"}),e.jsx("div",{className:"text-muted small text-truncate",children:(U.subjectName||"")+(U.subjectName&&U.endAt?"  ":"")+(tS(U.endAt)||"")})]},U.indivtaskId))]}),$.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:`list-group-item list-group-item-action d-flex justify-content-between align-items-center fw-semibold ${A?"bg-primary-subtle text-primary-emphasis":"bg-body-tertiary"}`,onClick:()=>T(U=>!U),children:e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(WN,{className:"me-2 fs-5"})," ",Ys.reviews,e.jsx("span",{className:"ms-2 badge text-bg-secondary",children:P})]})}),A&&e.jsxs("div",{className:"list-group list-group-flush bg-primary-subtle border-top border-primary-subtle",children:[I&&e.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:Ys.loading}),!I&&L&&e.jsx("div",{className:"list-group-item small text-danger bg-transparent border-0",children:L}),!I&&!L&&H.length===0&&e.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:Ys.reviewsEmpty}),!I&&!L&&H.map(U=>e.jsxs(Pe,{to:`/classroom/student/${encodeURIComponent(U.lectureId||"")}`,className:"list-group-item list-group-item-action ps-4 bg-transparent border-0",children:[e.jsx("div",{className:"fw-semibold text-truncate text-primary-emphasis",children:U.subjectName||"-"}),e.jsx("div",{className:"text-muted small text-truncate",children:U.completionName||""})]},U.lectureId))]})]})]})}function aS(){const[a,s]=x.useState(!1),[l,i]=x.useState(!1),[c,d]=x.useState(null),[u,h]=x.useState([]);x.useEffect(()=>{let y=!0;return(async()=>{try{i(!0),d(null);const v=await fetch("/classroom/api/v1/professor/me/indivtask",{headers:{Accept:"application/json"},credentials:"include"});if(!v.ok)throw new Error(`(${v.status})    .`);const S=await v.json();if(!y)return;h(Array.isArray(S)?S:[])}catch(v){if(!y)return;d(v)}finally{y&&i(!1)}})(),()=>{y=!1}},[]);const f=x.useMemo(()=>u.map(y=>{const v=y?.lecture||{},S=y?.indivtask||{},N=v.lectureId||"",E=v.subjectName||N||" ",A=S.indivtaskId||"",T=S.indivtaskName||" ",$=Number(y?.submitCount??0);return{lectureId:N,lectureLabel:E,taskId:A,taskLabel:T,submitCount:Number.isFinite($)?$:0}}),[u]),g=f.length,b=()=>s(y=>!y);return e.jsxs("nav",{className:"list-group list-group-flush rounded-0",children:[e.jsx(Pe,{to:"/classroom/professor",className:"list-group-item list-group-item-action",children:" "}),e.jsxs("button",{type:"button",className:"list-group-item list-group-item-action d-flex align-items-center justify-content-between",onClick:b,"aria-expanded":a,"aria-controls":"sidebar-review-task-panel",children:[e.jsx("span",{children:"  "}),e.jsxs("span",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"badge text-bg-secondary",children:g}),e.jsx("span",{"aria-hidden":"true",children:a?"^":"v"})]})]}),a&&e.jsxs("div",{id:"sidebar-review-task-panel",className:"list-group list-group-flush border-bottom rounded-0",children:[l&&e.jsx("div",{className:"list-group-item small text-muted",children:" ..."}),c&&!l&&e.jsx("div",{className:"list-group-item small text-danger",children:String(c.message||c)}),!l&&!c&&f.length===0&&e.jsx("div",{className:"list-group-item small text-muted",children:"  ."}),!l&&!c&&f.map(y=>{const{lectureId:v,lectureLabel:S,taskId:N,taskLabel:E,submitCount:A}=y;if(!v||!N)return null;const T=`/classroom/professor/${encodeURIComponent(v)}/task/indiv/${encodeURIComponent(N)}`;return e.jsxs(Pe,{to:T,className:"list-group-item list-group-item-action small",children:[e.jsxs("div",{className:"fw-semibold text-truncate",children:["[",S,"] ",E]}),e.jsxs("div",{className:"text-muted",children:["  : ",A,""]})]},`${v}-${N}`)})]})]})}function nS(){const a=new Date().getFullYear();return e.jsx("footer",{className:"app-footer",children:e.jsxs("div",{className:"container py-3 text-muted small d-flex justify-content-between",children:[e.jsxs("span",{children:[" ",e.jsx("span",{children:a})," JSU Classroom"]}),e.jsx("span",{children:"v0.1 Prototype"})]})})}function Eo({role:a="student",children:s,lectureId:l,onLectureInfo:i}){return e.jsxs("div",{className:"app",children:[e.jsx(FN,{role:a,lectureId:l,onLectureInfo:i}),e.jsxs("main",{className:"app-main",children:[e.jsx("aside",{className:"app-sidebar",children:a==="professor"?e.jsx(aS,{}):e.jsx(sS,{})}),e.jsx("section",{className:"app-content",children:e.jsx("div",{className:"container p-3",children:s})})]}),e.jsx(nS,{})]})}const lS={MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""},iS={REG1:"1",REG2:"2",SUB1:"",SUB2:""},rS={REG1:1,REG2:2,SUB1:3,SUB2:4},It={pageTitle:"  ",summary:(a,s)=>` ${a}   ${s}`,ongoingTitle:" ",endedTitle:" ",loading:"   ...",empty:"  .",error:"     .",cannotDisplay:"    .",professorFallback:"  ",deptFallback:"-",completionFallback:"-",creditUnknown:"  ",hourUnknown:"  ",capacityLabel:(a,s)=>s>0?`${a} / ${s}`:`${a}`,scheduleHeading:"",scheduleEmpty:"  .",endInfo:a=>`: ${a}`,statusEnded:"",statusOngoing:""},rx=a=>{if(!a||String(a).length<4)return"--:--";const s=String(a),l=parseInt(s.slice(0,2),10),i=s.slice(2,4);return`${l}:${i}`},cS=a=>{if(!a)return[];if(Array.isArray(a))return a;if(typeof a=="string")try{const s=JSON.parse(a);return Array.isArray(s)?s:[]}catch{return[]}return[]},cx=a=>{if(!a)return{year:0,order:99};const[s="0",l=""]=String(a).split("_");return{year:Number(s)||0,order:rS[l]??99}},oS=a=>{if(!a)return"  ";const[s,l]=String(a).split("_"),i=iS[l]||l||"";return i?`${s} ${i}`:`${s}`},dS=a=>{if(!a)return"  ";const s=new Date(a);if(Number.isNaN(s.getTime()))return"  ";const l=s.getFullYear(),i=String(s.getMonth()+1).padStart(2,"0"),c=String(s.getDate()).padStart(2,"0");return`${l}-${i}-${c}`},ox=a=>a.slice().sort((s,l)=>{const i=cx(s.yeartermCd),c=cx(l.yeartermCd);return i.year!==c.year?c.year-i.year:i.order!==c.order?i.order-c.order:String(s.subjectName||"").localeCompare(String(l.subjectName||""),"ko")}),uS=a=>a?`/classroom/student/${encodeURIComponent(a)}`:"#",hS=a=>{if(!a&&a!==0)return null;const s=String(a).trim();return s?`/classroom/api/v1/common/photo/professor/${encodeURIComponent(s)}`:null},mS=a=>a.length?a.map((s,l)=>{const i=s?.placeName||s?.placeCd||"  ",c=Array.isArray(s?.slots)?s.slots:[];return e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"badge bg-light text-dark border me-2",children:i}),e.jsx("ul",{className:"mb-0 ps-3",children:c.length===0?e.jsx("li",{className:"text-muted",children:It.scheduleEmpty}):c.map((d,u)=>{const h=lS[d?.day]??d?.day??"";return e.jsxs("li",{children:[h," ",rx(d?.start),"-",rx(d?.end)]},`${i}-${l}-${u}`)})})]},`${i}-${l}`)}):e.jsx("p",{className:"text-muted mb-0",children:It.scheduleEmpty}),fS=({lecture:a})=>{const s=cS(a?.scheduleJson),l=uS(a?.lectureId),i=!!a?.ended,c=hS(a?.professorNo),d=a?.professorName||It.professorFallback,u=a?.univDeptName||It.deptFallback,h=a?.completionName||It.completionFallback,f=a?.subjectTypeName||"-",g=Number.isFinite(Number(a?.credit))?`${a.credit}`:It.creditUnknown,b=Number.isFinite(Number(a?.hour))?`${a.hour}`:It.hourUnknown,y=Number.isFinite(Number(a?.currentCap))?Number(a.currentCap):0,v=Number.isFinite(Number(a?.maxCap))?Number(a.maxCap):0,S=It.capacityLabel(y,v),N=i?It.endInfo(dS(a?.endAt)):null;return e.jsx("div",{className:"col-12 col-lg-6 col-xl-4",children:e.jsx("article",{className:"card shadow-sm h-100",children:e.jsxs("div",{className:"card-body d-flex flex-column",children:[e.jsxs("div",{className:"d-flex align-items-start justify-content-between mb-2",children:[e.jsx("h2",{className:"h5 lh-base mb-0",children:e.jsx(Pe,{className:"stretched-link text-decoration-none",to:l,children:a?.subjectName||" "})}),e.jsx("span",{className:`badge ${i?"bg-secondary-subtle text-secondary border border-secondary-subtle":"bg-success-subtle text-success border border-success-subtle"}`,children:i?It.statusEnded:It.statusOngoing})]}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"clearfix",children:[c?e.jsx("img",{src:c,alt:`${d}  `,className:"stu-card-professor float-end ms-3 mb-2"}):null,e.jsx("div",{className:"mb-2 small text-body-secondary",children:u}),e.jsx("div",{className:"text-muted small mb-1",children:oS(a?.yeartermCd)}),e.jsxs("ul",{className:"list-unstyled small mb-0",children:[e.jsxs("li",{children:[" : ",d]}),e.jsxs("li",{children:[" : ",h]}),e.jsxs("li",{children:[" : ",f]}),e.jsxs("li",{children:[" / : ",g,"  ",b]}),e.jsxs("li",{children:[" : ",S]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("strong",{className:"d-block mb-1",children:It.scheduleHeading}),mS(s)]})]}),N?e.jsx("div",{className:"text-muted small mt-auto pt-3 border-top",children:N}):null]})})})},dx=({idPrefix:a,title:s,count:l,open:i,onToggle:c,children:d,badgeClassName:u="bg-secondary-subtle text-secondary border border-secondary-subtle"})=>e.jsx("div",{className:"accordion mt-2",id:`${a}-accordion`,children:e.jsxs("div",{className:"accordion-item",children:[e.jsx("h2",{className:"accordion-header",id:`${a}-heading`,children:e.jsxs("button",{className:`accordion-button${i?"":" collapsed"}`,type:"button","aria-expanded":i,"aria-controls":`${a}-collapse`,onClick:c,children:[s,e.jsxs("span",{className:`badge ${u} ms-2`,children:[l,""]})]})}),e.jsx("div",{id:`${a}-collapse`,className:`accordion-collapse collapse${i?" show":""}`,"aria-labelledby":`${a}-heading`,children:e.jsx("div",{className:"accordion-body",children:d})})]})});function pS(){const[a,s]=x.useState([]),[l,i]=x.useState(!0),[c,d]=x.useState(""),[u,h]=x.useState("ongoing");x.useEffect(()=>{let v=!0;return(async()=>{try{i(!0),d("");const S=await fetch("/classroom/api/v1/student/mylist",{headers:{Accept:"application/json"},credentials:"include"});if(!S.ok)throw new Error(`(${S.status}) ${It.error}`);const N=await S.json();if(!v)return;if(!Array.isArray(N))throw new Error(It.error);s(Array.isArray(N)?N:[])}catch(S){if(!v)return;d(S instanceof Error?S.message:It.error),s([])}finally{v&&i(!1)}})(),()=>{v=!1}},[]);const f=x.useMemo(()=>ox(a.filter(v=>!v?.ended)),[a]),g=x.useMemo(()=>ox(a.filter(v=>!!v?.ended)),[a]),b=It.summary(f.length,g.length),y=v=>l?e.jsx("div",{className:"text-center text-muted py-4",children:It.loading}):c?e.jsx("div",{className:"text-center text-muted py-4",children:It.cannotDisplay}):v.length?e.jsx("div",{className:"row g-3",children:v.map(S=>e.jsx(fS,{lecture:S},S?.lectureId||S?.subjectName))}):e.jsx("div",{className:"text-muted text-center py-4",children:It.empty});return e.jsx(Eo,{role:"student",children:e.jsxs("div",{id:"stu-main-root",className:"container my-4","data-api":"/classroom/api/v1/student/mylist",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:It.pageTitle}),e.jsx("div",{className:"text-muted small",id:"stu-lecture-summary","aria-live":"polite",children:c?"":b})]}),c&&e.jsx("div",{id:"stu-error-box",className:"alert alert-danger",role:"alert",children:c}),e.jsxs("section",{className:"accordion-section mb-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h5 mb-0",children:It.ongoingTitle}),e.jsxs("span",{className:"badge bg-success-subtle text-success border border-success-subtle",id:"stu-ongoing-count",children:[f.length,""]})]}),e.jsx(dx,{idPrefix:"stu-ongoing",title:It.ongoingTitle,count:f.length,open:u==="ongoing",onToggle:()=>h(u==="ongoing"?null:"ongoing"),badgeClassName:"bg-success-subtle text-success border border-success-subtle",children:y(f)})]}),e.jsxs("section",{className:"accordion-section",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h5 mb-0",children:It.endedTitle}),e.jsxs("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle",id:"stu-ended-count",children:[g.length,""]})]}),e.jsx(dx,{idPrefix:"stu-ended",title:It.endedTitle,count:g.length,open:u==="ended",onToggle:()=>h(u==="ended"?null:"ended"),children:y(g)})]})]})})}const Ge={defaultTitle:" ",subtitleLoading:"   ...",planHeading:"  ",planLoadingTitle:"   ...",planLoadingBody:" .",planEmpty:"   .",planGoalLabel:" ",planDescLabel:" ",overviewHeading:" ",overviewLoading:"   ...",overviewProfessorLabel:" ",overviewIndexLabel:"",overviewGoalLabel:" ",overviewPrereqLabel:" ",overviewCapacityLabel:"",overviewEndLabel:"",overviewGoalFallback:"  .",overviewPrereqFallback:"  .",overviewCapacityFallback:"  .",overviewProfessorFallback:"  ",overviewIndexFallback:" ",overviewEndFallback:"",scheduleHeading:" /",scheduleLoading:"   ...",scheduleEmpty:"  .",scheduleDay:"",scheduleTime:"",schedulePlace:"",classmateHeading:"  ",classmateLoading:"   ...",classmateEmpty:"    .",classmateFallback:"    .",classmateModalTitle:"  ",modalClose:"",tableStudentNo:"",tableName:"",tableDept:"",tableStatus:"",summaryExtraPrefix:" ",summaryExtraSuffix:"",unknownTerm:"  ",unknownProfessor:"",unknownStudentName:" ",countSuffix:"",genericError:"    .",missingLecture:"  ."},gS={MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""},Fi="/classroom/api/v1/common",ux="/classroom/api/v1/student",hx=a=>{if(!a||String(a).length<4)return"--:--";const s=String(a);return`${s.slice(0,2)}:${s.slice(2,4)}`},xS=a=>{if(!a)return"-";if(typeof a=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(a))return a;const s=new Date(a);if(Number.isNaN(s.getTime()))return"-";const l=s.getFullYear(),i=String(s.getMonth()+1).padStart(2,"0"),c=String(s.getDate()).padStart(2,"0");return`${l}-${i}-${c}`},bS=a=>{if(!a)return[];if(Array.isArray(a))return a;if(typeof a=="string")try{const s=JSON.parse(a);return Array.isArray(s)?s:[]}catch{return[]}return[]},qu=(a,s)=>{const l=typeof a=="string"?a.trim():"";if(!l)return e.jsx("span",{className:"text-body-secondary",children:s});const i=l.split(/\r?\n/);return i.map((c,d)=>e.jsxs(x.Fragment,{children:[c||"",d<i.length-1?e.jsx("br",{}):null]},`${d}-${c}`))};function yS(){const{lectureId:a}=dt(),{setLecture:s,setStudents:l,formatYearTerm:i}=Jt(),[c,d]=x.useState(Ge.defaultTitle),[u,h]=x.useState(Ge.subtitleLoading),[f,g]=x.useState(!0),[b,y]=x.useState(null),[v,S]=x.useState(null),[N,E]=x.useState([]),[A,T]=x.useState(1),[$,D]=x.useState([]),[I,G]=x.useState([]);x.useEffect(()=>{let H=!0;return(async()=>{try{if(!a)throw new Error(Ge.missingLecture);g(!0),y(null);const C=encodeURIComponent(a),P={headers:{Accept:"application/json"},credentials:"include"},U=[fetch(`${Fi}/${C}`,P),fetch(`${Fi}/${C}/plan`,P),fetch(`${Fi}/${C}/schedule`,P),fetch(`${ux}/${C}/students`,P)],Z=async Y=>{if(Y.status===404)return{data:null,notFound:!0};if(Y.status===204)return{data:[]};if(!Y.ok){const le=await Y.text().catch(()=>""),ve=le?` - ${le}`:"";throw new Error(`HTTP ${Y.status} ${Y.statusText}${ve}`)}if((Y.headers.get("content-type")||"").includes("application/json"))return{data:await Y.json()};const K=await Y.text();try{return{data:JSON.parse(K)}}catch{return{data:K}}},[z,W,w,M]=await Promise.all(U.map(Y=>Y.then(Z)));if(!H)return;const B=z.notFound?null:z.data;if(S(B||null),s(B||null),B){d(B.subjectName||Ge.defaultTitle);const Y=B.professorName||Ge.overviewProfessorFallback,te=i(B.yeartermCd)||Ge.unknownTerm;h(`${Y}  ${te}`)}else d(Ge.defaultTitle),h(Ge.subtitleLoading);const F=W.notFound?[]:W.data,q=Array.isArray(F)?F.filter(Y=>Y&&Y.lectureWeek!==void 0):[];q.sort((Y,te)=>(Number(Y.lectureWeek)||0)-(Number(te.lectureWeek)||0)),E(q);const k=w.notFound?[]:w.data;D(bS(k));const X=M.notFound?[]:M.data,ae=Array.isArray(X)?X.slice():[];ae.sort((Y,te)=>{const K=String(Y?.gradeCd||"").localeCompare(String(te?.gradeCd||""));if(K!==0)return K;const le=`${Y?.lastName||""}${Y?.firstName||""}`,ve=`${te?.lastName||""}${te?.firstName||""}`;return le.localeCompare(ve,"ko")}),G(ae),l(ae)}catch(C){if(!H)return;y(C instanceof Error?C.message:Ge.genericError)}finally{H&&g(!1)}})(),()=>{H=!1}},[a,s,l,i]),`${I.length}${Ge.countSuffix}`;const L=x.useMemo(()=>v?.professorNo?`${Fi}/photo/professor/${encodeURIComponent(String(v.professorNo).trim())}`:null,[v?.professorNo]),_=x.useMemo(()=>f?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:Ge.planLoadingTitle})}),e.jsx("p",{className:"text-muted mt-2 mb-0",children:Ge.planLoadingBody})]}):N.length?e.jsxs(e.Fragment,{children:[e.jsx("ul",{className:"nav nav-tabs mb-3",id:"planTabs",role:"tablist",children:N.map(H=>{const C=Number(H.lectureWeek);return e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx("button",{className:`nav-link ${A===C?"active":""}`,id:`week-${C}-tab`,type:"button",role:"tab","aria-controls":`#week-${C}-tab-pane`,"aria-selected":A===C,onClick:()=>T(C),children:`${C}`})},C)})}),e.jsx("div",{className:"tab-content flex-grow-1 border border-top-0 rounded-bottom p-3",id:"planTabContent",children:N.map(H=>{const C=Number(H.lectureWeek);return e.jsx("div",{className:`tab-pane fade ${A===C?"show active":""}`,id:`week-${C}-tab-pane`,role:"tabpanel","aria-labelledby":`week-${C}-tab`,tabIndex:"0",children:e.jsxs("div",{className:"card-body bg-light-subtle",children:[e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"fw-semibold mb-1 text-primary",children:Ge.planGoalLabel}),e.jsx("p",{className:"mb-0",children:qu(H.weekGoal,Ge.overviewGoalFallback)})]}),e.jsx("div",{className:"fw-semibold mb-1",children:Ge.planDescLabel}),e.jsx("p",{className:"mb-0",children:qu(H.weekDesc,Ge.overviewGoalFallback)})]})},C)})})]}):e.jsx("div",{className:"text-muted text-center py-4",children:Ge.planEmpty}),[N,A,f]),O=x.useMemo(()=>{if(f)return e.jsx("div",{className:"text-body-secondary",children:Ge.scheduleLoading});if(!$.length)return e.jsx("div",{className:"text-body-secondary",children:Ge.scheduleEmpty});const H=[];return $.forEach((C,P)=>{const U=C&&(C.placeName||C.placeCd||"-");(Array.isArray(C?.slots)&&C.slots.length?C.slots:[{}]).forEach((z,W)=>{H.push(e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:gS[z.day]||z.day||"-"}),e.jsx("td",{className:"text-center",children:z.start?`${hx(z.start)} ~ ${hx(z.end)}`:"-"}),e.jsx("td",{children:U||"-"})]},`${P}-${W}`))})}),e.jsxs("div",{className:"table-responsive border rounded",children:[" ",e.jsxs("table",{className:"table table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",style:{width:"5.5rem"},children:Ge.scheduleDay}),e.jsx("th",{className:"text-center",style:{width:"9rem"},children:Ge.scheduleTime}),e.jsx("th",{children:Ge.schedulePlace})]})}),e.jsx("tbody",{children:H})]})]})},[$,f]);return e.jsxs("section",{id:"stu-lecture-root",className:"container py-4","data-lecture-id":a||"","data-common-api":Fi,"data-student-api":ux,children:[e.jsxs("header",{className:"mb-4",children:[e.jsx("h1",{className:"h3 mb-1 text-primary",id:"stu-lecture-title",children:c}),e.jsx("p",{className:"text-muted mb-0",id:"stu-lecture-subtitle",children:u})]}),b&&e.jsx("div",{id:"stu-lecture-alert",className:"alert alert-danger",role:"alert",children:b||Ge.genericError}),e.jsxs("div",{className:"row g-4 align-items-stretch mb-4",children:[e.jsxs("div",{className:"col-12 col-xl-8 d-flex flex-column gap-4",children:[e.jsxs("section",{id:"plan-section",className:"card h-100 flex-fill","aria-labelledby":"plan-heading",style:{height:"350px !important"},children:[e.jsx("div",{className:"card-header d-flex align-items-center justify-content-between",children:e.jsxs("h2",{className:"h5 mb-0",id:"plan-heading",children:[" ",Ge.planHeading]})}),e.jsxs("div",{className:"card-body d-flex flex-column",children:[_,e.jsx("div",{id:"plan-empty",className:`text-body-secondary small mt-3${N.length||f?" d-none":""}`,children:Ge.planEmpty})]})]}),e.jsxs("section",{id:"classmate-section",className:"card h-100 flex-fill","aria-labelledby":"classmate-heading",children:[e.jsxs("div",{className:"card-header d-flex flex-wrap align-items-center justify-content-between gap-2",children:[e.jsxs("h2",{className:"h6 mb-0",id:"classmate-heading",children:[" ",Ge.classmateHeading]}),e.jsxs("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle",id:"classmate-total-badge",children:[I.length,Ge.countSuffix]})]}),e.jsxs("div",{className:"card-body p-0",children:[" ",f&&e.jsx("div",{className:"text-body-secondary text-center py-4",children:Ge.classmateLoading}),!f&&I.length===0?e.jsx("div",{className:"text-body-secondary text-center py-4",children:Ge.classmateEmpty}):e.jsx("div",{className:"p-3",children:e.jsx("div",{className:"table-responsive",style:{maxHeight:"240px",overflowY:"auto"},children:e.jsxs("table",{className:"table table-sm table-hover align-middle mb-0",children:[e.jsx("thead",{className:"table-primary sticky-top",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",children:Ge.tableStudentNo}),e.jsx("th",{className:"text-center",children:Ge.tableName}),e.jsx("th",{className:"text-center",children:Ge.tableDept})]})}),e.jsx("tbody",{children:I.map((H,C)=>{const P=`${H?.lastName||""}${H?.firstName||""}`.trim()||H?.studentName||Ge.unknownStudentName,U=H?.gradeName||H?.grade||"";return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:H?.studentNo||"-"}),e.jsxs("td",{className:"text-center",children:[P,U?e.jsx("span",{className:"badge bg-primary-subtle text-primary-emphasis border-primary-subtle ms-2",children:U}):null]}),e.jsx("td",{className:"text-center",children:H?.univDeptName||H?.deptName||"-"})]},`${H?.enrollId||H?.studentNo||C}`)})})]})})})]})]})]}),e.jsxs("div",{className:"col-12 col-xl-4 d-flex flex-column gap-4",children:[e.jsxs("section",{id:"overview-section",className:"card h-100 flex-fill","aria-labelledby":"overview-heading",style:{height:"350px !important"},children:[e.jsx("div",{className:"card-header",children:e.jsxs("h2",{className:"h6 mb-0",id:"overview-heading",children:[" ",Ge.overviewHeading]})}),e.jsxs("div",{className:"card-body px-3 d-flex flex-column",id:"overview-body",children:[f&&e.jsx("div",{className:"text-body-secondary",children:Ge.overviewLoading}),!f&&!v&&e.jsx("div",{className:"text-body-secondary",children:Ge.classmateFallback}),!f&&v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex gap-3",children:[L?e.jsx("img",{src:L,alt:`${v.professorName||Ge.overviewProfessorFallback}`,className:"overview-photo flex-shrink-0"}):e.jsx("div",{className:"overview-photo-placeholder flex-shrink-0",children:Ge.overviewProfessorFallback}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"text-muted small mb-1",children:i(v.yeartermCd)||Ge.unknownTerm}),e.jsx("div",{className:"fw-semibold",children:v.subjectName||Ge.defaultTitle}),e.jsx("div",{className:"small text-body-secondary",children:`${Ge.overviewProfessorLabel}: ${v.professorName||Ge.overviewProfessorFallback}`}),e.jsx("div",{className:"small text-body-secondary",children:`${Ge.overviewIndexLabel}: ${v.lectureIndex||Ge.overviewIndexFallback}`})]})]}),e.jsxs("div",{className:"d-flex flex-column gap-0 mt-3 mb-0 border-top pt-3",children:[" ",e.jsxs("div",{className:"d-flex",children:[e.jsx("dt",{className:"text-primary col-4",style:{fontSize:"0.9rem"},children:Ge.overviewGoalLabel})," ",e.jsx("dd",{className:"mb-0 text-end col-8",style:{fontSize:"0.9rem"},children:qu(v.lectureGoal,Ge.overviewGoalFallback)})," "]}),e.jsxs("div",{className:"d-flex",children:[e.jsx("dt",{className:"text-info col-4",style:{fontSize:"0.9rem"},children:Ge.overviewPrereqLabel})," ",e.jsx("dd",{className:"mb-0 text-end col-8",style:{fontSize:"0.9rem"},children:v.prereqSubject||Ge.overviewPrereqFallback})," "]}),e.jsxs("div",{className:"d-flex",children:[e.jsx("dt",{className:"text-success col-4",style:{fontSize:"0.9rem"},children:Ge.overviewCapacityLabel})," ",e.jsx("dd",{className:"mb-0 text-end col-8",style:{fontSize:"0.9rem"},children:Number.isFinite(Number(v.maxCap))?`${v.maxCap}${Ge.countSuffix}`:Ge.overviewCapacityFallback})]}),e.jsxs("div",{className:"d-flex",children:[e.jsx("dt",{className:"text-danger col-4",style:{fontSize:"0.9rem"},children:Ge.overviewEndLabel})," ",e.jsx("dd",{className:"mb-0 text-end col-8",style:{fontSize:"0.9rem"},children:v.endAt?xS(v.endAt):Ge.overviewEndFallback})," "]})]})]})]})]}),e.jsxs("section",{id:"schedule-section",className:"card h-100 flex-fill","aria-labelledby":"schedule-heading",children:[e.jsx("div",{className:"card-header",children:e.jsxs("h2",{className:"h6 mb-0",id:"schedule-heading",children:[" ",Ge.scheduleHeading]})}),e.jsx("div",{className:"card-body",id:"schedule-body",children:O})]})]})]})]})}const Ma={dashboard:"",board:"",attendance:"",exam:"",task:"",review:"",grade:"/"};function vS(){const{lectureId:a}=dt(),{lecture:s}=Jt(),[l,i]=x.useState({show:!1,enabled:!1}),[c,d]=x.useState(null);x.useEffect(()=>{let g=!0;return(async()=>{if(!s||!s.ended){i({show:!1,enabled:!1});return}i({show:!0,enabled:!1});try{const y=await fetch("/classroom/api/v1/student/review",{headers:{Accept:"application/json"},credentials:"include"});if(!y.ok)return;const v=await y.json();if(!g)return;const N=(Array.isArray(v)?v:[]).includes(a);i({show:!0,enabled:N})}catch{}})(),()=>{g=!1}},[s,a]);const u=`/classroom/student/${encodeURIComponent(a||"")}`,h=(g,b,y={})=>e.jsx("li",{className:"nav-item",children:e.jsx(uy,{end:y.end,className:({isActive:v})=>`nav-link${v?" active":""}`,to:g,children:b})},g),f=(g,b,y)=>{const v=y&&c===b,S=()=>d(b),N=()=>d(E=>E===b?null:E);return e.jsxs("li",{className:"nav-item position-relative",onMouseEnter:S,onMouseLeave:N,onFocus:S,onBlur:N,children:[e.jsx("span",{className:"nav-link disabled text-muted",style:{cursor:"not-allowed",pointerEvents:"auto"},role:"button","aria-disabled":"true",tabIndex:0,children:g}),v&&e.jsxs("div",{className:"position-absolute text-nowrap",style:{top:"100%",left:"50%",transform:"translate(-50%, 0.5rem)",backgroundColor:"#212529",color:"#fff",padding:"0.35rem 0.6rem",borderRadius:"0.375rem",fontSize:"0.8rem",boxShadow:"0 0.5rem 1rem rgba(0, 0, 0, 0.18)",whiteSpace:"nowrap",zIndex:1050,pointerEvents:"none"},role:"tooltip",children:[y,e.jsx("div",{style:{position:"absolute",top:"-0.4rem",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"0.4rem solid transparent",borderRight:"0.4rem solid transparent",borderBottom:"0.4rem solid #212529"}})]})]},b)};return e.jsxs("ul",{className:"nav nav-pills mb-4",children:[h(u,Ma.dashboard,{end:!0}),h(`${u}/board`,Ma.board),h(`${u}/attendance`,Ma.attendance),h(`${u}/exam`,Ma.exam),h(`${u}/task`,Ma.task),l.show&&e.jsxs(e.Fragment,{children:[l.enabled?h(`${u}/review`,Ma.review):f(Ma.review,"review","  "),l.enabled?f(Ma.grade,"grade","     "):h(`${u}/grade`,Ma.grade)]})]})}function jS(){const{lectureId:a}=dt(),{setLecture:s,clearLectureScoped:l}=Jt();return x.useEffect(()=>{let i=!0;return a&&(async()=>{try{const d=await fetch(`/classroom/api/v1/common/lecture/${a}`);if(!d.ok)throw new Error("Failed to fetch lecture info");const u=await d.json();i&&s(u)}catch(d){console.error(d),i&&s(null)}})(),()=>{i=!1,l(),s(null)}},[a,s,l]),e.jsxs(Eo,{role:"student",lectureId:a,children:[e.jsx(vS,{}),e.jsx(oy,{})]})}const Gu=10;function NS(a){return a==="NOTICE"?e.jsx("span",{className:"badge bg-warning text-dark border border-warning-subtle",children:""}):a==="MATERIAL"?e.jsx("span",{className:"badge bg-info text-dark border border-info-subtle",children:""}):e.jsx("span",{className:"badge text-bg-secondary",children:""})}const SS=a=>{if(!a)return"";const s=new Date(a);if(Number.isNaN(s.getTime()))return String(a);const l=b=>String(b).padStart(2,"0"),i=new Date().getFullYear(),c=s.getFullYear(),d=l(s.getMonth()+1),u=l(s.getDate()),h=l(s.getHours()),f=l(s.getMinutes());return`${c===i?`${d}-${u}`:`${c}-${d}-${u}`} ${h}:${f}`};function wS(){const{lectureId:a}=dt(),[s,l]=x.useState([]),[i,c]=x.useState(!0),[d,u]=x.useState(null),[h,f]=x.useState("all"),[g,b]=x.useState(""),[y,v]=x.useState(""),[S,N]=x.useState(1);x.useEffect(()=>{let _=!0;return(async()=>{try{c(!0),u(null);const O=`/classroom/api/v1/student/board/${encodeURIComponent(a)}/post`,H=await fetch(O,{headers:{Accept:"application/json"},credentials:"include"});if(!H.ok)throw new Error(`(${H.status})    .`);const C=await H.json();if(!Array.isArray(C))throw new Error("    .");if(!_)return;l(C)}catch(O){if(!_)return;u(O)}finally{_&&c(!1)}})(),()=>{_=!1}},[a]);const E=_=>_.postType||_.classification||"",A=x.useMemo(()=>{let _=s.length,O=0,H=0;for(const C of s){const P=E(C);P==="NOTICE"?O++:P==="MATERIAL"&&H++}return{all:_,notice:O,material:H}},[s]);x.useEffect(()=>{h==="all"?b(""):h==="notice"?b("NOTICE"):h==="material"&&b("MATERIAL"),N(1)},[h]);const T=x.useMemo(()=>{let _=s;if(g&&(_=_.filter(O=>E(O)===g)),y&&y.trim().length){const O=y.trim().toLowerCase();_=_.filter(H=>String(H.title||"").toLowerCase().includes(O)||String(H.content||"").toLowerCase().includes(O))}return _},[s,g,y]),$=Math.max(1,Math.ceil(T.length/Gu)),D=x.useMemo(()=>T.slice((S-1)*Gu,S*Gu),[T,S]);x.useEffect(()=>{S>$&&N(1)},[$,S]);const I=(_,O)=>{const C=(_.lctPostId||_.postId||_.id)??_.id;if(C==null)return null;const P=E(_),U=SS(_.createAt||_.createdAt);let Z="";for(const w of[_.summary,_.content]){if(!w)continue;const M=String(w).replace(/\s+/g," ").trim();if(M.length){Z=M;break}}const z=_.title||"( )",W=`/classroom/student/${encodeURIComponent(a)}/board/${encodeURIComponent(String(C))}`;return e.jsx(Pe,{to:W,className:"list-group-item list-group-item-action text-reset text-decoration-none py-2",children:e.jsxs("div",{className:"d-flex align-items-center gap-2 flex-nowrap",children:[e.jsx("div",{className:"d-flex align-items-center gap-1 flex-shrink-0",children:NS(P)}),e.jsxs("div",{className:"flex-grow-1 text-truncate",style:{minWidth:0},children:[e.jsx("span",{className:"fw-semibold",children:z}),Z&&e.jsxs("span",{className:"text-muted",children:["  ",Z]})]}),e.jsxs("span",{className:"text-muted small text-nowrap flex-shrink-0",children:[": ",U]})]})},String(C))},G=({id:_,label:O,active:H,onClick:C,badge:P})=>e.jsxs("button",{className:`nav-link ${H?"active":""}`,id:`tab-${_}`,type:"button",onClick:C,role:"tab",children:[O," ",P!=null&&e.jsx("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle ms-1",children:P})]}),L=()=>e.jsx("nav",{className:"mt-3","aria-label":"  ",children:e.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[e.jsx("li",{className:`page-item ${S<=1?"disabled":""}`,children:e.jsx("a",{className:"page-link",href:"#",onClick:_=>{_.preventDefault(),S>1&&N(S-1)},children:""})}),Array.from({length:$},(_,O)=>O+1).map(_=>e.jsx("li",{className:`page-item ${_===S?"active":""}`,children:e.jsx("a",{className:"page-link",href:"#",onClick:O=>{O.preventDefault(),N(_)},children:_})},_)),e.jsx("li",{className:`page-item ${S>=$?"disabled":""}`,children:e.jsx("a",{className:"page-link",href:"#",onClick:_=>{_.preventDefault(),S<$&&N(S+1)},children:""})})]})});return e.jsxs("section",{id:"board-root",className:"container py-0","data-lecture-id":a,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:""}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs("select",{id:"filter-type",className:"form-select form-select-sm",style:{minWidth:120},value:g,onChange:_=>b(_.target.value),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"NOTICE",children:""}),e.jsx("option",{value:"MATERIAL",children:""})]}),e.jsxs("div",{className:"input-group input-group-sm",style:{minWidth:220},children:[e.jsx("input",{id:"search-q",type:"text",className:"form-control",placeholder:"/ ",value:y,onChange:_=>{v(_.target.value),N(1)}}),e.jsx("button",{id:"btn-search",className:"btn btn-outline-secondary",onClick:()=>N(1),children:""})]})]})]}),e.jsxs("section",{className:"mt-4","aria-labelledby":"tablist-h",children:[e.jsxs("ul",{className:"nav nav-tabs mt-2",id:"post-tabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx(G,{id:"all",label:"",active:h==="all",onClick:()=>f("all"),badge:A.all})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx(G,{id:"notice",label:"",active:h==="notice",onClick:()=>f("notice"),badge:A.notice})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx(G,{id:"material",label:"",active:h==="material",onClick:()=>f("material"),badge:A.material})})]}),e.jsxs("div",{className:"tab-content border border-top-0 rounded-bottom p-3",children:[(i||d)&&e.jsxs("div",{children:[i&&e.jsx("div",{className:"text-muted",children:" "}),d&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(d.message||d)})]}),!i&&!d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"pane-all",className:`tab-pane fade ${h==="all"?"show active":""} p-0`,role:"tabpanel","aria-labelledby":"tab-all",children:[e.jsx("div",{id:"list-all",children:g&&h==="all"?null:D.length===0?e.jsx("div",{className:"text-center text-muted py-4",children:"   ."}):e.jsx("div",{className:"list-group list-group-flush",children:D.map((_,O)=>I(_))})}),e.jsx("div",{className:"mt-3 d-flex align-items-center justify-content-between",children:e.jsx(L,{})})]}),e.jsx("div",{id:"pane-notice",className:`tab-pane fade ${h==="notice"?"show active":""} p-0`,role:"tabpanel","aria-labelledby":"tab-notice",children:e.jsx("div",{id:"list-notice",children:T.filter(_=>E(_)==="NOTICE").length===0?e.jsx("div",{className:"text-center text-muted py-4",children:"  ."}):e.jsx("div",{className:"list-group list-group-flush",children:T.filter(_=>E(_)==="NOTICE").map((_,O)=>I(_))})})}),e.jsx("div",{id:"pane-material",className:`tab-pane fade ${h==="material"?"show active":""} p-0`,role:"tabpanel","aria-labelledby":"tab-material",children:e.jsx("div",{id:"list-material",children:T.filter(_=>E(_)==="MATERIAL").length===0?e.jsx("div",{className:"text-center text-muted py-4",children:"  ."}):e.jsx("div",{className:"list-group list-group-flush",children:T.filter(_=>E(_)==="MATERIAL").map((_,O)=>I(_))})})})]})]}),e.jsx("div",{id:"notfound-box",className:"alert alert-danger mt-3 d-none",role:"alert"})]})]})}const CS=()=>{const{lectureId:a}=dt(),[s,l]=x.useState(null),[i,c]=x.useState(!0),[d,u]=x.useState("summary"),[h,f]=x.useState(null),b="/classroom/api/v1/student";x.useEffect(()=>{(async()=>{c(!0);try{const N=await fetch(`${b}/${a}/attendance`);if(!N.ok)throw new Error("Failed to fetch attendance data");const E=await N.json(),A=E.length;let T=0,$=0,D=0;E.forEach(I=>{I.attStatusCd==="ATTD_OK"?T++:I.attStatusCd==="ATTD_LATE"?$++:I.attStatusCd==="ATTD_NO"&&D++}),l({summary:{totalLectures:A,attended:T,tardy:$,absent:D},details:E})}catch(N){f(N.message)}finally{c(!1)}})()},[a,b]);const y=()=>{if(!s||!s.summary)return null;const{totalLectures:S,attended:N,tardy:E,absent:A}=s.summary,T=S>0?(N/S*100).toFixed(1):0,$=[{label:" ",value:`${S}`,color:"primary"},{label:"",value:`${N}`,color:"success"},{label:"",value:`${E}`,color:"warning"},{label:"",value:`${A}`,color:"danger"}];return e.jsxs("div",{className:"bg-white rounded shadow-sm p-3",children:[e.jsx("div",{className:"row g-3",children:$.map(D=>e.jsx("div",{className:"col-md-6 col-lg-3",children:e.jsx("div",{className:"bg-light p-3 rounded h-100",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:`fs-5 text-${D.color}`,children:D.label}),e.jsx("span",{className:"fs-4 fw-bold",children:D.value})]})})},D.label))}),e.jsxs("div",{className:"mt-4 pt-3 border-top",children:[e.jsx("h5",{className:"mb-3",children:""}),e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs("p",{className:"fs-3 fw-bold mb-0 me-3",children:[T,"%"]}),e.jsx("div",{className:"progress flex-grow-1",style:{height:"25px"},children:e.jsx("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${T}%`},"aria-valuenow":T,"aria-valuemin":"0","aria-valuemax":"100"})})]})]})]})},v=()=>{if(!s||!s.details)return null;const S=N=>{switch(N){case"":return{color:"success",icon:e.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})};case"":return{color:"warning",icon:e.jsx("path",{d:"M8.982 1.566a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566zM8 5c.535 0 .954.462.9.995l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995A.905.905 0 0 1 8 5zm.002 6a1 1 0 1 1 0 2 1 1 0 0 1 0-2z"})};case"":return{color:"danger",icon:e.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"})};default:return{color:"secondary",icon:e.jsx("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"})}}};return e.jsxs("div",{className:"bg-white rounded shadow-sm",children:[e.jsxs("div",{className:"d-flex fw-bold text-secondary border-bottom p-3",children:[e.jsx("div",{style:{width:"10%"}}),e.jsx("div",{style:{width:"20%"},children:""}),e.jsx("div",{style:{width:"40%"},children:""}),e.jsx("div",{style:{width:"30%",textAlign:"center"},children:" "})]}),e.jsx("ul",{className:"list-unstyled mb-0",children:s.details.map((N,E)=>{const A=S(N.attStatusName);return e.jsxs("li",{className:`d-flex align-items-center p-3 ${E%2===1?"bg-light":""}`,children:[e.jsx("div",{className:`text-${A.color}`,style:{width:"10%"},children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",fill:"currentColor",className:"bi",viewBox:"0 0 16 16",children:A.icon})}),e.jsxs("div",{className:"fw-bold",style:{width:"20%"},children:[N.lctPrintRound,""]}),e.jsx("div",{className:"text-muted",style:{width:"40%"},children:N.attDay}),e.jsx("div",{style:{width:"30%",textAlign:"center"},children:e.jsx("span",{className:`badge fs-6 bg-${A.color}`,children:N.attStatusName})})]},E)})})]})};return i?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):h?e.jsxs("div",{className:"alert alert-danger",role:"alert",children:["Error: ",h]}):e.jsxs("div",{className:"container mt-4",children:[e.jsx("h2",{className:"mb-4",children:" "}),e.jsxs("ul",{className:"nav nav-tabs mb-3",children:[e.jsx("li",{className:"nav-item",children:e.jsx("button",{className:`nav-link ${d==="summary"?"active":""}`,onClick:()=>u("summary"),children:""})}),e.jsx("li",{className:"nav-item",children:e.jsx("button",{className:`nav-link ${d==="details"?"active":""}`,onClick:()=>u("details"),children:" "})})]}),e.jsx("div",{className:"tab-content p-3 border bg-light",children:d==="summary"?y():v()})]})},_c=a=>String(a).padStart(2,"0"),Xu=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${_c(s.getMonth()+1)}-${_c(s.getDate())} ${_c(s.getHours())}:${_c(s.getMinutes())}`},AS=(a,s)=>{const l=Date.now(),i=a?new Date(a).getTime():null,c=s?new Date(s).getTime():null;return i&&l<i?"upcoming":i&&(!c||l<=c)?"ongoing":c&&l>c?"closed":"unknown"},ES=a=>{switch(a){case"ongoing":return e.jsx("span",{className:"badge text-bg-success",children:" "});case"upcoming":return e.jsx("span",{className:"badge text-bg-secondary",children:""});case"closed":return e.jsx("span",{className:"badge text-bg-dark",children:""});default:return e.jsx("span",{className:"badge text-bg-light text-muted",children:"-"})}},TS={OFF:"",ON:""},_S=["ongoing","upcoming","closed","all"],kS={ongoing:"   .",upcoming:"  .",closed:"  .",all:"  ."};function DS(){const{lectureId:a}=dt(),[s,l]=x.useState([]),[i,c]=x.useState(!0),[d,u]=x.useState(""),[h,f]=x.useState("ongoing");x.useEffect(()=>{let N=!0;return(async()=>{if(!a){u("    ."),c(!1);return}try{c(!0),u("");const A=await fetch(`/classroom/api/v1/student/${encodeURIComponent(a)}/exam`,{headers:{Accept:"application/json"},credentials:"include"});if(!A.ok){const $=await A.text().catch(()=>"");throw new Error($||`(${A.status})    .`)}const T=await A.json();if(!N)return;l(Array.isArray(T)?T:[])}catch(A){if(!N)return;u(A instanceof Error?A.message:"     ."),l([])}finally{N&&c(!1)}})(),()=>{N=!1}},[a]);const g=x.useMemo(()=>s.map(N=>({...N,status:AS(N.startAt,N.endAt)})),[s]),b=x.useMemo(()=>{const N={ongoing:[],upcoming:[],closed:[],all:[]};return g.forEach(E=>{N.all.push(E),N[E.status]&&N[E.status].push(E)}),N},[g]);x.useMemo(()=>Object.fromEntries(_S.map(N=>[N,b[N]?.length||0])),[b]);const y=b[h]||[],v=kS[h]||"  .",S=`/classroom/student/${encodeURIComponent(a||"")}`;return e.jsxs("section",{className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:""}),e.jsx("p",{className:"text-muted small mb-0",children:"       ."})]}),d&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:d}),e.jsx("div",{className:"tab-content border border-top-0 rounded-bottom p-3",children:e.jsx("div",{id:`pane-${h}`,className:"tab-pane fade show active p-0",role:"tabpanel","aria-labelledby":`tab-${h}`,children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"30%"},children:""}),e.jsx("th",{style:{width:"10%"},children:""}),e.jsx("th",{style:{width:"20%"},children:" "}),e.jsx("th",{style:{width:"10%"},children:""}),e.jsx("th",{style:{width:"10%"},children:" "}),e.jsx("th",{style:{width:"10%"},children:" "}),e.jsx("th",{style:{width:"10%"},className:"text-center",children:""})]})}),e.jsx("tbody",{children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:" ..."})}):y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:v})}):y.sort((N,E)=>{const A=N.startAt?new Date(N.startAt).getTime():0;return(E.startAt?new Date(E.startAt).getTime():0)-A}).map(N=>{const E=`${Xu(N.startAt)} ~ ${Xu(N.endAt)}`;return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold",children:N.examName}),e.jsxs("div",{className:"text-muted small",children:[" ",Xu(N.createAt)]})]}),e.jsx("td",{children:TS[N.examType]||""}),e.jsx("td",{className:"text-muted small",children:E}),e.jsx("td",{children:Number.isFinite(Number(N.weightValue))?`${N.weightValue}%`:"-"}),e.jsx("td",{children:ES(N.status)}),e.jsx("td",{children:N.submitted?e.jsx("span",{className:"badge text-bg-success",children:" "}):e.jsx("span",{className:"badge text-bg-secondary",children:""})}),e.jsx("td",{className:"text-center",children:e.jsx(Pe,{className:"btn btn-sm btn-outline-primary",to:`${S}/exam/${encodeURIComponent(N.lctExamId)}`,children:""})})]},N.lctExamId)})})]})})})})]})}const kc=a=>String(a).padStart(2,"0"),Dc=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${kc(s.getMonth()+1)}-${kc(s.getDate())} ${kc(s.getHours())}:${kc(s.getMinutes())}`},MS={OFF:"",ON:""};function RS(){const{lectureId:a,examId:s}=dt(),[l,i]=x.useState(null),[c,d]=x.useState(!0),[u,h]=x.useState("");x.useEffect(()=>{let E=!0;return(async()=>{if(!a||!s){h("    ."),d(!1);return}try{d(!0),h("");const T=await fetch(`/classroom/api/v1/student/${encodeURIComponent(a)}/exam/${encodeURIComponent(s)}`,{headers:{Accept:"application/json"},credentials:"include"});if(!T.ok){const D=await T.text().catch(()=>"");throw new Error(D||`(${T.status})    .`)}const $=await T.json();if(!E)return;i($||null)}catch(T){if(!E)return;h(T instanceof Error?T.message:"     ."),i(null)}finally{E&&d(!1)}})(),()=>{E=!1}},[a,s]);const f=x.useMemo(()=>!l?.submitList||!Array.isArray(l.submitList)?null:(l.submitList.find(A=>A?.submit)||l.submitList[0])?.submit||null,[l]),g=f?.submitAt?Dc(f.submitAt):null,b=f?.autoScore,y=f?.modifiedScore,v=y??b,S=typeof y=="number"&&!Number.isNaN(y),N=`/classroom/student/${encodeURIComponent(a||"")}/exam`;return e.jsxs("section",{className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(Pe,{to:N,children:""})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:" "})]})}),e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",to:N,children:""})]}),u&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:u}),e.jsx("div",{className:"card shadow-sm mb-4",children:e.jsx("div",{className:"card-body",children:c?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h4 placeholder-glow",children:e.jsx("span",{className:"placeholder col-6"})}),e.jsxs("div",{className:"placeholder-glow",children:[e.jsx("span",{className:"placeholder col-3 me-2"}),e.jsx("span",{className:"placeholder col-3 me-2"}),e.jsx("span",{className:"placeholder col-3"})]})]}):l?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h4 mb-3",children:l.examName||"  "}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{children:MS[l.examType]||""})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{children:Number.isFinite(Number(l.weightValue))?`${l.weightValue}%`:"-"})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsxs("div",{children:[Dc(l.startAt)," ~ ",Dc(l.endAt)]})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{children:Dc(l.createAt)})]})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"text-break",dangerouslySetInnerHTML:{__html:l.examDesc||'<p class="text-muted mb-0">  .</p>'}})]}):e.jsx("p",{className:"text-muted mb-0",children:"    ."})})}),e.jsxs("div",{className:"card shadow-sm",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:"  "})}),e.jsx("div",{className:"card-body",children:c?e.jsx("p",{className:"text-muted placeholder-glow",children:e.jsx("span",{className:"placeholder col-3"})}):f?e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{children:g||"  "})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsxs("div",{children:[typeof v=="number"?`${v}`:"  ",S&&typeof b=="number"&&e.jsxs("span",{className:"text-muted small ms-2",children:["( ",b,")"]})]})]}),typeof b=="number"&&!S&&e.jsxs("div",{className:"col-12",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{children:l.examType==="ON"?"   .":"  ."})]}),S&&e.jsxs("div",{className:"col-12",children:[e.jsx("div",{className:"small text-muted",children:"  "}),e.jsx("div",{children:f.modifyReason||"  ."})]})]}):e.jsx("p",{className:"text-muted mb-0",children:"  ."})})]})]})}const nt={breadcrumbLabel:"",detailLabel:"",back:"",taskLoading:" ...",taskLoadFailed:"   .",attachments:"",submitStatus:" ",submitHistoryLoading:"   ...",submitNotFound:"  .",submitButtonNew:"",submitButtonEdit:" ",formTitleNew:" ",formTitleEdit:" ",formDescription:"",formFiles:" ",existingFiles:"  ",newFiles:"  ",fileGuide:"      .",submit:"",cancel:"",scoreLabel:"",feedbackLabel:" ",evaluatedAtLabel:"",submittedAtLabel:"",descriptionLabel:" ",noFiles:"  .",download:"",uploadSuccess:" .",uploadError:"  .",submitSuccess:" .",submitError:"    .",invalidLecture:"      .",fileLimit:" 5   ."},Ji=a=>String(a).padStart(2,"0"),mx=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${Ji(s.getMonth()+1)}-${Ji(s.getDate())}`},fx=a=>{if(!a)return"-";const s=new Date(a);if(Number.isNaN(s.getTime()))return"-";let l=s.getHours();const i=l>=12?"PM":"AM";return l=l%12,l=l||12,`${s.getFullYear()}-${Ji(s.getMonth()+1)}-${Ji(s.getDate())} ${i} ${l}:${Ji(s.getMinutes())}`},$S=a=>{const s=a.bundleId||a.fileId||Array.isArray(a.fileIds)&&a.fileIds[0]||Array.isArray(a.files)&&a.files[0]?.fileId||Array.isArray(a.details)&&a.details[0]?.fileId||"",l=Array.isArray(a.files)&&a.files||Array.isArray(a.details)&&a.details||[];return{fileId:s||"",details:l}},IS=(a,s,l)=>`/classroom/api/v1/common/task/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}/attach/${encodeURIComponent(String(l))}`,OS=(a,s,l,i)=>l?`/classroom/api/v1/common/${encodeURIComponent(a)}/indivtask/${encodeURIComponent(s)}/submit/${encodeURIComponent(l)}/attach/${encodeURIComponent(String(i))}`:"#";function LS(){const{lectureId:a,indivtaskId:s}=dt(),l=a||"",i=s||"",[c,d]=x.useState(null),[u,h]=x.useState(null),[f,g]=x.useState(!0),[b,y]=x.useState(""),[v,S]=x.useState(!1),[N,E]=x.useState(""),[A,T]=x.useState(""),[$,D]=x.useState([]),[I,G]=x.useState([]),[L,_]=x.useState(!1),[O,H]=x.useState(""),[C,P]=x.useState(""),[U,Z]=x.useState(""),z=x.useRef(null),W=encodeURIComponent(l),w=encodeURIComponent(i),M=x.useMemo(()=>!l||!i?null:`/classroom/api/v1/student/${W}/task/indiv/${w}`,[l,i,W,w]),B=x.useMemo(()=>{if(!c?.studentSubmitList||c.studentSubmitList.length===0)return null;const K=[...c.studentSubmitList].sort((le,ve)=>{const ke=le.submitAt?new Date(le.submitAt).getTime():0,J=ve.submitAt?new Date(ve.submitAt).getTime():0;return ke-J});return K[K.length-1]},[c]),F=x.useCallback(async()=>{if(!M){y(nt.invalidLecture),g(!1);return}try{g(!0),y("");const[K,le]=await Promise.all([fetch(M,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/student/${W}/me`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!K.ok){const J=await K.text().catch(()=>"");throw new Error(`(${K.status}) ${J||nt.taskLoadFailed}`)}if(!le.ok){const J=await le.text().catch(()=>"");throw new Error(`(${le.status}) ${J||nt.taskLoadFailed}`)}const ve=await K.json(),ke=await le.json();d(ve),h(ke)}catch(K){y(K instanceof Error?K.message:nt.taskLoadFailed),d(null)}finally{g(!1)}},[M,W]);x.useEffect(()=>{F()},[F]);const q=()=>{if(H(""),P(""),Z(""),B){E(B.submitDesc||"");const K=Array.isArray(B.submitFiles)&&B.submitFiles[0]?.fileId||"";T(K),D(Array.isArray(B.submitFiles)?B.submitFiles:[])}else E(""),T(""),D([]);G([]),z.current&&(z.current.value=""),S(!0)},k=()=>{S(!1),P(""),H(""),Z(""),G([]),z.current&&(z.current.value="")},X=async K=>{const le=Array.from(K.target.files||[]);if(P(""),H(""),le.length!==0){if(!l){P(nt.invalidLecture);return}if(le.length>5){P(nt.fileLimit),K.target.value="";return}try{_(!0);const ve=new FormData;le.forEach(re=>ve.append("files",re));const ke=`/classroom/api/v1/common/${W}/upload?type=task`,J=await fetch(ke,{method:"POST",body:ve,credentials:"include"});if(!J.ok){const re=await J.text().catch(()=>"");throw new Error(re||nt.uploadError)}const ue=await J.json(),{fileId:Se,details:Me}=$S(ue);T(Se),G(Me),H(nt.uploadSuccess),D([])}catch(ve){P(ve instanceof Error?ve.message:nt.uploadError)}finally{_(!1),K.target&&(K.target.value="")}}},ae=async K=>{if(K.preventDefault(),!M){P(nt.invalidLecture);return}try{_(!0),P(""),H("");const ve=await fetch(M,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({submitDesc:N,submitFileId:A||null})});if(ve.status!==204){const ke=await ve.text().catch(()=>"");throw new Error(ke||nt.submitError)}H(nt.submitSuccess),Z(nt.submitSuccess),S(!1),G([]),z.current&&(z.current.value=""),await F()}catch(le){P(le instanceof Error?le.message:nt.submitError)}finally{_(!1)}},Y=!!(c?.attachFileList&&c.attachFileList.length>0),te=B?nt.submitButtonEdit:nt.submitButtonNew;return e.jsxs("section",{id:"indivtask-post-root",className:"container-fluid",style:{display:"flex",flexDirection:"column",padding:"1rem",maxHeight:"100vh"},children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsxs("li",{children:[e.jsx(Pe,{id:"bc-task",className:"text-decoration-none",to:`/classroom/student/${encodeURIComponent(l)}/task`,children:nt.breadcrumbLabel}),e.jsx("span",{className:"mx-2",children:">"})]}),e.jsx("li",{className:"breadcrumb-item active fw-bold","aria-current":"page",children:nt.detailLabel})]})}),e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",id:"btn-list",to:`/classroom/student/${encodeURIComponent(l)}/task`,children:nt.back})]}),e.jsx("div",{style:{display:"flex",flexDirection:"row",gap:"0.75rem",height:"70vh",minHeight:0},children:f?e.jsx("div",{className:"card shadow-sm",style:{flex:1},children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start flex-wrap mb-2",children:[e.jsx("span",{className:"badge skeleton",style:{width:64,height:22}}),e.jsx("span",{className:"badge skeleton ms-2",style:{width:56,height:22}})]}),e.jsx("h1",{className:"h4 mb-3 skeleton",style:{width:"60%",height:"1.5rem"}}),e.jsxs("div",{className:"d-flex flex-wrap meta-list mb-3",children:[e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"task-content mb-4",children:e.jsx("div",{className:"skeleton",style:{height:"8rem"}})})]})}):b?e.jsx("div",{className:"alert alert-danger",role:"alert",children:b}):c?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card shadow-sm",style:{flex:"3",minHeight:0,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"badge text-bg-primary",children:""}),e.jsx("h1",{className:"h5 mb-0",children:!f&&c?c.indivtaskName:" "})]}),!f&&c&&e.jsxs("div",{className:"d-flex gap-3 small text-nowrap",children:[e.jsxs("span",{className:"small",children:[": ",e.jsx("span",{className:"fw-bold text-primary",children:mx(c.startAt)})]}),e.jsxs("span",{className:"small",children:[": ",e.jsx("span",{className:"fw-bold text-danger",children:mx(c.endAt)})]})]})]}),e.jsx("div",{className:"card-body",style:{overflow:"auto",flex:1,display:"flex",flexDirection:"column"},children:e.jsx("article",{className:"task-content mb-4",dangerouslySetInnerHTML:{__html:c.indivtaskDesc||"( )"}})}),Y&&e.jsxs("div",{className:"card-footer",id:"attach-area",children:[e.jsx("h2",{className:"h6 mb-2",children:nt.attachments}),e.jsx("ul",{className:"list-group list-group-flush",id:"attach-list",children:c.attachFileList.map((K,le)=>{const ve=K.originalFileName||K.originName||` ${K.fileOrder??le+1}`,ke=typeof K.fileSize=="number"?` (${(K.fileSize/1024).toFixed(2)} KB)`:"",J=IS(l,i,K.fileOrder??le+1);return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[e.jsx("i",{className:"bi bi-paperclip me-1"}),ve,e.jsx("small",{className:"text-muted",children:ke})]}),e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:J,children:nt.download})]},`task-attach-${K.fileOrder??le}`)})})]})]}),e.jsxs("div",{className:"card shadow-sm",style:{flex:"2",minHeight:0,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"h5 mb-0",children:nt.submitStatus}),!v&&e.jsx("button",{type:"button",id:"show-submit-form-btn",className:"btn btn-primary btn-sm",onClick:q,disabled:f||L,children:te}),v&&e.jsx("button",{type:"button",className:"btn-close",onClick:k,"aria-label":"Close"})]}),!v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card-body",id:"submission-history-body",style:{overflow:"auto",flex:1},children:[U&&e.jsx("div",{className:"alert alert-success",role:"alert",children:U}),f&&e.jsx("p",{className:"text-muted",children:nt.submitHistoryLoading}),!f&&!B&&e.jsx("div",{className:"text-center p-4",children:e.jsx("p",{className:"text-muted",children:nt.submitNotFound})}),!f&&B&&e.jsxs("div",{children:[e.jsxs("dl",{className:"row",children:[e.jsx("dt",{className:"col-sm-3",children:nt.submittedAtLabel}),e.jsx("dd",{className:"col-sm-9",children:fx(B.submitAt)}),e.jsx("dt",{className:"col-sm-3",children:nt.descriptionLabel}),e.jsx("dd",{className:"col-sm-9",children:B.submitDesc||"-"})]}),e.jsx("h6",{className:"mt-3 mb-2",children:nt.attachments}),e.jsx("ul",{className:"list-group",children:Array.isArray(B.submitFiles)&&B.submitFiles.length>0?B.submitFiles.map((K,le)=>{const ve=K.originalFileName||K.originName||` ${K.fileOrder??le+1}`,ke=typeof K.fileSize=="number"?` (${(K.fileSize/1024).toFixed(2)} KB)`:"",J=OS(l,i,u?.studentNo,K.fileOrder??le+1);return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[e.jsx("i",{className:"bi bi-paperclip me-1"}),ve,e.jsx("small",{className:"text-muted",children:ke})]}),e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:J,children:nt.download})]},`submit-file-${K.fileOrder??le}`)}):e.jsx("li",{className:"list-group-item text-muted",children:nt.noFiles})})]})]}),!f&&B?.evaluAt&&e.jsxs("div",{className:"card-footer bg-success-subtle",children:[e.jsx("h2",{className:"h6 mb-2 text-success-emphasis",children:" "}),e.jsxs("dl",{className:"row mb-0",children:[e.jsx("dt",{className:"col-sm-3",children:nt.scoreLabel}),e.jsx("dd",{className:"col-sm-9 fw-bold",children:B.evaluScore??"-"}),e.jsx("dt",{className:"col-sm-3",children:nt.feedbackLabel}),e.jsx("dd",{className:"col-sm-9",children:B.evaluDesc||"-"}),e.jsx("dt",{className:"col-sm-3 text-muted",children:nt.evaluatedAtLabel}),e.jsx("dd",{className:"col-sm-9 text-muted",children:fx(B.evaluAt)})]})]})]}),v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card-body",id:"submission-form-body",style:{overflow:"auto",flex:1},children:[C&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:C}),O&&e.jsx("div",{className:"alert alert-success",role:"alert",children:O}),e.jsxs("form",{id:"submit-form",onSubmit:ae,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"submit-desc",className:"form-label",children:nt.formDescription}),e.jsx("textarea",{className:"form-control",id:"submit-desc",rows:4,placeholder:"   .",value:N,onChange:K=>E(K.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"submit-file-input",className:"form-label",children:nt.formFiles}),$.length>0&&I.length===0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label text-muted small",children:nt.existingFiles}),e.jsx("ul",{className:"list-group",children:$.map((K,le)=>{const ve=K.originalFileName||K.originName||` ${K.fileOrder??le+1}`,ke=typeof K.fileSize=="number"?` (${(K.fileSize/1024).toFixed(2)} KB)`:"";return e.jsxs("li",{className:"list-group-item list-group-item-light d-flex justify-content-between align-items-center",children:[e.jsx("span",{children:ve}),e.jsx("small",{className:"text-muted",children:ke})]},`existing-${K.fileOrder??le}`)})})]}),I.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label text-muted small",children:nt.newFiles}),e.jsx("ul",{className:"list-group",children:I.map((K,le)=>{const ve=K.originalName||K.originName||K.originalFileName||` ${K.fileOrder??le+1}`,ke=typeof K.fileSize=="number"?` (${(K.fileSize/1024).toFixed(2)} KB)`:"";return e.jsxs("li",{className:"list-group-item list-group-item-light d-flex justify-content-between align-items-center",children:[e.jsx("span",{children:ve}),e.jsx("small",{className:"text-muted",children:ke})]},`uploaded-${K.fileId??le}`)})})]}),e.jsx("input",{className:"form-control",type:"file",id:"submit-file-input",ref:z,multiple:!0,onChange:X,disabled:L}),e.jsx("div",{className:"form-text",children:nt.fileGuide})]})]})]}),e.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",id:"cancel-submit-btn",className:"btn btn-secondary",onClick:k,disabled:L,children:nt.cancel}),e.jsx("button",{type:"submit",className:"btn btn-primary",id:"submit-button",disabled:L,form:"submit-form",children:L?nt.taskLoading:nt.submit})]})]})]})]}):null}),b&&e.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:b})]})}const Wi=[{key:"all",label:""},{key:"ongoing",label:""},{key:"closed",label:""}],Ll=10,Hi=()=>({all:[],ongoing:[],closed:[]}),Mc=()=>({all:1,ongoing:1,closed:1}),px=a=>String(a).padStart(2,"0"),gx=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${px(s.getMonth()+1)}-${px(s.getDate())}`},zS=a=>{const s=Date.now(),l=a.startAt?new Date(a.startAt).getTime():null,i=a.endAt?new Date(a.endAt).getTime():null;return l&&l>s?"upcoming":i&&i<s?"closed":"ongoing"},US=a=>({type:"indiv",id:a.indivtaskId,name:a.indivtaskName,createAt:a.createAt,startAt:a.startAt,endAt:a.endAt,hasAttachFile:!!a.hasAttachFile,submitted:!!a.submitted}),BS=a=>({type:"group",id:a.grouptaskId,name:a.grouptaskName,createAt:a.createAt,startAt:a.startAt,endAt:a.endAt,hasAttachFile:!!a.hasAttachFile,submitted:!!a.submitted,target:!!a.target}),FS=a=>{const[s,l]=x.useState(!0),[i,c]=x.useState(""),[d,u]=x.useState(Hi),[h,f]=x.useState(Hi);return x.useEffect(()=>{let g=!0;return(async()=>{if(!a){c("    ."),l(!1);return}try{l(!0),c("");const y={headers:{Accept:"application/json"},credentials:"include"},v=`/classroom/api/v1/student/${encodeURIComponent(a)}/task`,[S,N]=await Promise.all([fetch(`${v}/indiv`,y),fetch(`${v}/group`,y)]);if(!g)return;if(!S.ok)throw new Error(`(${S.status})    .`);if(!N.ok)throw new Error(`(${N.status})    .`);const E=await S.json().catch(()=>[]),A=await N.json().catch(()=>[]);if(!g)return;const T=($,D)=>{const I=(Array.isArray($)?$:[]).map(D);I.sort((L,_)=>{const O=L.createAt?new Date(L.createAt).getTime():0;return(_.createAt?new Date(_.createAt).getTime():0)-O});const G=Hi();for(const L of I){const _=zS(L);G.all.push(L),G[_]&&G[_].push(L)}return G};u(()=>T(E,US)),f(()=>T(A,BS))}catch(y){if(!g)return;c(y instanceof Error?y.message:"    ."),u(Hi),f(Hi)}finally{g&&l(!1)}})(),()=>{g=!1}},[a]),{loading:s,error:i,indivBuckets:d,groupBuckets:h}},xx=({totalCount:a,pageSize:s,currentPage:l,onChange:i,label:c})=>{const d=Math.max(1,Math.ceil(a/s));if(d<=1)return null;const u=[],h=(f,g,b=!1,y=!1,v)=>{u.push(e.jsx("li",{className:`page-item${b?" disabled":""}${y?" active":""}`,children:e.jsx("button",{type:"button",className:"page-link",onClick:()=>{b||i(f)},children:g})},v??g))};h(Math.max(1,l-1),"",l===1,!1,"prev");for(let f=1;f<=d;f+=1)h(f,String(f),!1,f===l);return h(Math.min(d,l+1),"",l===d,!1,"next"),e.jsx("nav",{className:"mt-3","aria-label":c,children:e.jsx("ul",{className:"pagination pagination-sm mb-0",children:u})})},bx=({lectureId:a,tasks:s,loading:l})=>l?e.jsx("div",{className:"text-muted p-3 text-center",children:" ..."}):!s||s.length===0?e.jsx("div",{className:"text-muted p-3 text-center",children:"  ."}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-light",children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:"100px"},children:" "}),e.jsx("th",{className:"text-center d-none d-md-table-cell",style:{width:"120px"},children:" "})]})}),e.jsx("tbody",{children:s.map(i=>{const c=`/classroom/student/${encodeURIComponent(a||"")}/task/${i.type}/${encodeURIComponent(i.id)}`;return e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle",style:{width:"250px",overflow:"hidden",textOverflow:"ellipsis"},children:e.jsx(Pe,{to:c,className:"text-decoration-none d-block",children:e.jsx("div",{className:"fw-bold text-primary",children:i.name||"-"})})}),e.jsx("td",{className:"align-middle text-center",style:{width:"100px"},children:i.type==="group"&&i.target===!1?e.jsx("span",{className:"badge bg-secondary",children:""}):e.jsx("span",{className:`badge ${i.submitted?"bg-primary":"bg-secondary"}`,children:i.submitted?" ":""})}),e.jsxs("td",{className:"align-middle text-center d-none d-md-table-cell text-nowrap small",style:{width:"120px"},children:[gx(i.createAt)," ~ ",gx(i.endAt)]})]},`${i.type}-${i.id}`)})})]})}),yx=({scope:a,activeKey:s,onChange:l,counts:i})=>e.jsx("ul",{className:"nav nav-pills mb-3",id:`${a}-status-tabs`,role:"tablist",children:Wi.map(c=>{const d=c.key==="all"?"bg-primary":c.key==="ongoing"?"bg-success":"bg-secondary";return e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:`nav-link${s===c.key?" active":""}`,id:`${a}-${c.key}-tab`,type:"button",role:"tab","aria-selected":s===c.key,onClick:()=>l(c.key),children:[c.label,e.jsx("span",{className:`badge rounded-pill ${d} ms-1 ${c.key==="ongoing"?"text-white":""}`,id:`${a}-count-${c.key}`,style:{minWidth:"30px"},children:i[c.key]??0})]})},c.key)})});function HS(){const{lectureId:a}=dt(),{loading:s,error:l,indivBuckets:i,groupBuckets:c}=FS(a),[d,u]=x.useState("ongoing"),[h,f]=x.useState("ongoing"),[g,b]=x.useState(Mc),[y,v]=x.useState(Mc);x.useEffect(()=>{b(Mc()),v(Mc()),u("ongoing"),f("ongoing")},[a,i.all.length,c.all.length]);const S=x.useMemo(()=>Wi.reduce((D,I)=>(D[I.key]=i[I.key]?.length??0,D),{}),[i]),N=x.useMemo(()=>Wi.reduce((D,I)=>(D[I.key]=c[I.key]?.length??0,D),{}),[c]),E=x.useMemo(()=>{const D=i[d]??[],G=((g[d]??1)-1)*Ll;return D.slice(G,G+Ll)},[i,d,g]),A=x.useMemo(()=>{const D=c[h]??[],G=((y[h]??1)-1)*Ll;return D.slice(G,G+Ll)},[c,h,y]),T=D=>{u(D),b(I=>({...I,[D]:1}))},$=D=>{f(D),v(I=>({...I,[D]:1}))};return e.jsxs("section",{id:"task-root",className:"container py-4","data-lecture-id":a||"","data-api":`/classroom/api/v1/student/${encodeURIComponent(a||"")}/task`,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:""}),e.jsx("p",{className:"text-muted small mb-0",children:"       ."})]}),e.jsxs("div",{className:"row g-4 align-items-start",children:[e.jsx("div",{className:"col-12 col-xl-6",children:e.jsxs("div",{className:"card shadow-sm",children:[e.jsx("div",{className:"card-header d-flex align-items-center justify-content-between",children:e.jsx("h2",{className:"h5 mb-0",children:" "})}),e.jsxs("div",{className:"card-body",children:[e.jsx(yx,{scope:"indiv",activeKey:d,onChange:T,counts:S}),e.jsx("div",{className:"tab-content",id:"indiv-status-content",children:Wi.map(D=>{const I=d===D.key,G=`indiv-${D.key}`,L=g[D.key]??1;return e.jsx("div",{id:G,role:"tabpanel","aria-labelledby":`${G}-tab`,className:`tab-pane fade${I?" show active":""}`,children:I?e.jsxs(e.Fragment,{children:[e.jsx(bx,{lectureId:a,tasks:E,loading:s}),e.jsx(xx,{totalCount:S[D.key]||0,pageSize:Ll,currentPage:L,onChange:_=>b(O=>({...O,[D.key]:_})),label:"    "})]}):null},D.key)})})]})]})}),e.jsx("div",{className:"col-12 col-xl-6",children:e.jsxs("div",{className:"card shadow-sm",children:[e.jsx("div",{className:"card-header d-flex align-items-center justify-content-between",children:e.jsx("h2",{className:"h5 mb-0",children:" "})}),e.jsxs("div",{className:"card-body",children:[e.jsx(yx,{scope:"group",activeKey:h,onChange:$,counts:N}),e.jsx("div",{className:"tab-content",id:"group-status-content",children:Wi.map(D=>{const I=h===D.key,G=`group-${D.key}`,L=y[D.key]??1;return e.jsx("div",{id:G,role:"tabpanel","aria-labelledby":`${G}-tab`,className:`tab-pane fade${I?" show active":""}`,children:I?e.jsxs(e.Fragment,{children:[e.jsx(bx,{lectureId:a,tasks:A,loading:s}),e.jsx(xx,{totalCount:N[D.key]||0,pageSize:Ll,currentPage:L,onChange:_=>v(O=>({...O,[D.key]:_})),label:"    "})]}):null},D.key)})})]})]})})]}),l&&e.jsx("div",{id:"task-notice-box",className:"alert alert-danger mt-3",role:"alert",children:l})]})}const Bl=a=>String(a).padStart(2,"0"),vx=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${Bl(s.getMonth()+1)}-${Bl(s.getDate())}`},Wu=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${Bl(s.getMonth()+1)}-${Bl(s.getDate())} ${Bl(s.getHours())}:${Bl(s.getMinutes())}`};function YS(){const{lectureId:a,grouptaskId:s}=dt(),{students:l,setStudents:i}=Jt(),[c,d]=x.useState(null),[u,h]=x.useState(null),[f,g]=x.useState(null),[b,y]=x.useState(Array.isArray(l)?l:[]),[v,S]=x.useState(!0),[N,E]=x.useState(!0),[A,T]=x.useState(""),[$,D]=x.useState(!1),[I,G]=x.useState(0),[L,_]=x.useState(!1),[O,H]=x.useState(""),[C,P]=x.useState(""),[U,Z]=x.useState([]),[z,W]=x.useState(!1),[w,M]=x.useState(""),[B,F]=x.useState(""),q=x.useRef(null),k=a?encodeURIComponent(a):"",X=s?encodeURIComponent(s):"",ae=fe=>{const Le=fe.bundleId||fe.fileId||Array.isArray(fe.fileIds)&&fe.fileIds[0]||Array.isArray(fe.files)&&fe.files[0]?.fileId||Array.isArray(fe.details)&&fe.details[0]?.fileId||"",oe=Array.isArray(fe.files)&&fe.files||Array.isArray(fe.details)&&fe.details||[];return{fileId:Le,details:oe}};x.useEffect(()=>{let fe=!0;return(async()=>{if(!a||!s){T("    ."),S(!1);return}try{S(!0),T("");const oe=encodeURIComponent(a),Ne=encodeURIComponent(s),[we,Ye]=await Promise.all([fetch(`/classroom/api/v1/student/${oe}/task/group/${Ne}`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/student/${oe}/me`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!we.ok){const He=await we.text().catch(()=>"");throw new Error(He||`(${we.status})    .`)}const Xe=await we.json(),Ke=Ye.ok?await Ye.json():null;if(!fe)return;d(Xe||null),h(Ke||null)}catch(oe){if(!fe)return;T(oe instanceof Error?oe.message:"     ."),d(null)}finally{fe&&S(!1)}})(),()=>{fe=!1}},[a,s,I]),x.useEffect(()=>{let fe=!0;return(async()=>{if(!a||!s){E(!1);return}try{E(!0);const oe=encodeURIComponent(a),Ne=encodeURIComponent(s),we=await fetch(`/classroom/api/v1/student/${oe}/task/group/${Ne}/jo`,{headers:{Accept:"application/json"},credentials:"include"});if(!we.ok){if(we.status===404){if(!fe)return;g(null);return}const Xe=await we.text().catch(()=>"");throw new Error(Xe||`(${we.status})    .`)}const Ye=await we.json();if(!fe)return;g(Ye||null)}catch(oe){if(!fe)return;console.error(oe),g(null)}finally{fe&&E(!1)}})(),()=>{fe=!1}},[a,s,I]),x.useEffect(()=>{if(Array.isArray(b)&&b.length>0)return;let fe=!0;return(async()=>{if(a)try{D(!0);const oe=await fetch(`/classroom/api/v1/student/${encodeURIComponent(a)}/students`,{headers:{Accept:"application/json"},credentials:"include"});if(!oe.ok)return;const Ne=await oe.json();if(!fe)return;const we=Array.isArray(Ne)?Ne:[];y(we),i&&i(we)}finally{fe&&D(!1)}})(),()=>{fe=!1}},[a,b,i]);const Y=x.useMemo(()=>new Map((b||[]).map(fe=>[fe.enrollId,fe])),[b]),te=u?.enrollId,K=f?.leaderEnrollId,le=x.useMemo(()=>f?.crewList?f.crewList.map(fe=>{const Le=Y.get(fe.enrollId)||{},oe=`${Le.lastName||""}${Le.firstName||""}`.trim()||Le.studentName||"-",Ne=Le.studentNo||"-";return{enrollId:fe.enrollId,name:oe,studentNo:Ne,isLeader:fe.enrollId===K,isSelf:fe.enrollId===te,evaluScore:fe.evaluScore,evaluDesc:fe.evaluDesc,evaluAt:fe.evaluAt,initial:(oe||"?").charAt(0)}}):[],[f,Y,K,te]),ve={submitDesc:f?.submitDesc,submitFileId:f?.submitFileId,submitAt:f?.submitAt},ke=Array.isArray(c?.attachFileList)?c.attachFileList:[],J=ve?.submitDesc,ue=ve?.submitAt?Wu(ve.submitAt):null,Se=!!(te&&K&&te===K),Me="/classroom/api/v1/common/task",re="/classroom/api/v1/student",he=(fe,Le)=>{const oe=fe.fileOrder??Le;return`${Me}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}/attach/${encodeURIComponent(oe)}`},Re=ve?.submitFileId&&f?.groupId?`${re}/${k}/task/group/${X}/submit/${encodeURIComponent(f.groupId)}`:null,Be=`/classroom/student/${encodeURIComponent(a||"")}/task`;return e.jsxs("section",{className:"container py-4",id:"student-group-task-detail",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(Pe,{to:Be,children:""})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:" "})]})}),e.jsx(Pe,{to:Be,className:"btn btn-sm btn-outline-secondary",children:""})]}),A&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:A}),e.jsx("div",{className:"card shadow-sm mb-4",children:e.jsx("div",{className:"card-body",children:v?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h4 placeholder-glow",children:e.jsx("span",{className:"placeholder col-6"})}),e.jsxs("div",{className:"placeholder-glow d-flex gap-2 flex-wrap text-muted small mb-3",children:[e.jsx("span",{className:"placeholder col-3"}),e.jsx("span",{className:"placeholder col-3"}),e.jsx("span",{className:"placeholder col-3"})]})]}):c?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h4 mb-3",children:c.grouptaskName||"  "}),e.jsxs("div",{className:"d-flex flex-wrap gap-3 text-muted small mb-3",children:[e.jsxs("span",{children:[" ",Wu(c.createAt)]}),e.jsxs("span",{className:"text-nowrap small",children:["  ",vx(c.startAt)," ~ ",vx(c.endAt)]})]}),e.jsx("article",{className:"task-content mb-3",dangerouslySetInnerHTML:{__html:c.grouptaskDesc||'<p class="text-muted mb-0"> .</p>'}}),ke.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{className:"h6 mb-2",children:" "}),e.jsx("ul",{className:"list-group",children:ke.map((fe,Le)=>{const oe=fe.originalFileName||fe.originName||` ${fe.fileOrder??Le+1}`,Ne=typeof fe.fileSize=="number"?`(${fe.fileSize.toLocaleString()} Byte)`:"";return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[e.jsx("i",{className:"bi bi-paperclip me-2"}),oe," ",e.jsx("small",{className:"text-muted",children:Ne})]}),e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:he(fe,Le),children:""})]},fe.fileId||Le)})})]})]}):e.jsx("p",{className:"text-muted mb-0",children:"    ."})})}),e.jsxs("div",{className:"card shadow-sm mb-4",children:[e.jsx("div",{className:"card-header d-flex justify-content-between align-items-center",children:e.jsx("h2",{className:"h6 mb-0",children:"   "})}),e.jsx("div",{className:"card-body",children:N?e.jsx("p",{className:"text-muted placeholder-glow",children:e.jsx("span",{className:"placeholder col-3"})}):f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{children:f.groupName||"  "})]}),e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{children:le.find(fe=>fe.isLeader)?.name||"-"})]}),e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{children:ve?.submitAt?`  (${ue})`:""})]})]}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted mb-1",children:" "}),e.jsx("div",{className:"p-2 bg-body-secondary rounded",children:J||e.jsx("span",{className:"text-muted",children:"  ."})})]}),Re&&e.jsx("div",{className:"mt-3",children:e.jsx("a",{className:"btn btn-sm btn-outline-primary",href:Re,children:"   "})})]}):e.jsx("p",{className:"text-muted mb-0",children:"     ."})})]}),Se&&f&&e.jsx("div",{className:"mb-4",children:e.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>{F(""),M(""),H(J||""),P(ve?.submitFileId||""),Z([]),q.current&&(q.current.value=""),_(!0)},disabled:z,children:"/"})}),Se&&L&&e.jsxs("div",{className:"card shadow-sm mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:" "})}),e.jsxs("div",{className:"card-body",children:[B&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:B}),w&&e.jsx("div",{className:"alert alert-success",role:"alert",children:w}),e.jsxs("form",{onSubmit:async fe=>{if(fe.preventDefault(),!a||!s||!f?.groupId){F("    .");return}try{W(!0),F(""),M("");const Le={submitDesc:O||"",submitFileId:C||null},oe=await fetch(`/classroom/api/v1/student/${k}/task/group/${X}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Le)});if(!oe.ok){const Ne=await oe.text().catch(()=>"");throw new Error(Ne||`(${oe.status})   .`)}M(" ."),_(!1),G(Ne=>Ne+1)}catch(Le){F(Le instanceof Error?Le.message:"    .")}finally{W(!1),Z([]),q.current&&(q.current.value="")}},children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"group-submit-desc",className:"form-label",children:" "}),e.jsx("textarea",{id:"group-submit-desc",className:"form-control",rows:4,placeholder:"   .",value:O,onChange:fe=>H(fe.target.value),disabled:z})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"group-submit-file",className:"form-label",children:" "}),C&&U.length===0&&e.jsxs("div",{className:"alert alert-info small py-2",children:["   ID: ",C,e.jsx("br",{}),"      ."]}),U.length>0&&e.jsx("ul",{className:"list-group mb-2",children:U.map((fe,Le)=>{const oe=fe.originalName||fe.originName||fe.originalFileName||` ${fe.fileOrder??Le+1}`,Ne=typeof fe.fileSize=="number"?` (${(fe.fileSize/1024).toFixed(2)} KB)`:"";return e.jsxs("li",{className:"list-group-item",children:[oe,e.jsx("small",{className:"text-muted",children:Ne})]},`${fe.fileId||Le}`)})}),e.jsx("input",{id:"group-submit-file",className:"form-control",type:"file",multiple:!0,ref:q,onChange:async fe=>{const Le=Array.from(fe.target.files||[]);if(Le.length){if(!a){F("    .");return}if(Le.length>5){F("  5   ."),fe.target.value="";return}try{W(!0),F(""),M("");const oe=new FormData;Le.forEach(He=>oe.append("files",He));const Ne=`/classroom/api/v1/common/${k}/upload?type=task`,we=await fetch(Ne,{method:"POST",body:oe,credentials:"include"});if(!we.ok){const He=await we.text().catch(()=>"");throw new Error(He||`(${we.status})   .`)}const Ye=await we.json(),{fileId:Xe,details:Ke}=ae(Ye);P(Xe||""),Z(Ke),M(" .")}catch(oe){F(oe instanceof Error?oe.message:"    .")}finally{W(!1),fe.target&&(fe.target.value="")}}},disabled:z}),e.jsx("div",{className:"form-text",children:"      ."})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{_(!1),F(""),M(""),Z([]),q.current&&(q.current.value="")},disabled:z,children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:z,children:z?" ...":""})]})]})]})]}),e.jsxs("div",{className:"card shadow-sm",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:N||$?e.jsx("p",{className:"text-muted placeholder-glow",children:e.jsx("span",{className:"placeholder col-4"})}):le.length===0?e.jsx("p",{className:"text-muted mb-0",children:"    ."}):e.jsx("div",{className:"row g-3",children:le.map(fe=>e.jsx("div",{className:"col-12 col-md-6 col-lg-4",children:e.jsxs("div",{className:`member-card h-100 ${fe.isSelf?"border-primary":""}`,children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("div",{className:"avatar-48 bg-light border d-flex align-items-center justify-content-center",children:fe.initial}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold",children:fe.name}),e.jsx("div",{className:"member-meta",children:fe.studentNo}),fe.isLeader&&e.jsx("span",{className:"badge text-bg-primary mt-2",children:""})]})]}),fe.isSelf&&e.jsxs("div",{className:"evaluation-box mt-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"fw-semibold",children:"  :"})," ",typeof fe.evaluScore=="number"?`${fe.evaluScore}`:""]}),e.jsx("div",{className:"evaluation-note mt-2",children:fe.evaluDesc||" ."}),e.jsxs("div",{className:"evaluation-note mt-2",children:[" : ",fe.evaluAt?Wu(fe.evaluAt):""]})]})]})},fe.enrollId))})})]})]})}const gt={breadcrumbBoard:"",breadcrumbCurrent:"",listButton:"",attachments:"",noContent:" .",replySectionTitle:"",replySortNewest:"",replySortOldest:"",replyPlaceholder:" .",replySubmit:"",replySubmitLoading:" ...",replyEmpty:"  .   .",replyLoading:"  ...",replyAlertEmpty:"  .",replyAlertInvalid:"   .",replySubmitSuccess:" .",replySubmitFail:"  .",replyDelete:"",replyDeleteConfirm:" ?",replyDeleteSuccess:" .",replyDeleteFail:"  .",replyNoContent:" ",invalidParams:" . (lectureId/postId)",postLoadError:"    .",replyLoadError:"    ."},Rc={author:"",createdAt:"",revealAt:" ",viewCount:""},$c=a=>String(a).padStart(2,"0"),Ku=a=>{if(!a)return"";const s=new Date(a);return Number.isNaN(s.getTime())?String(a):`${s.getFullYear()}-${$c(s.getMonth()+1)}-${$c(s.getDate())} ${$c(s.getHours())}:${$c(s.getMinutes())}`},VS=a=>{if(!a)return"";if(!/[&<>"']/.test(a)||/<[^>]+>/.test(a))return a;const s=document.createElement("textarea");return s.innerHTML=a,s.value},PS=a=>{if(!a)return"";try{const l=new DOMParser().parseFromString(a,"text/html");return l.querySelectorAll("script, style, iframe, object, embed, link[rel='import']").forEach(i=>i.remove()),l.querySelectorAll("*").forEach(i=>{Array.from(i.attributes).forEach(c=>{/^on/i.test(c.name)&&i.removeAttribute(c.name)})}),l.body.innerHTML}catch(s){return console.warn("[StudentBoardPost] sanitize failed",s),a}},qS=a=>String(a??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;"),GS=a=>{const s=qS(a||"");return s?s.replace(/\r?\n/g,"<br />"):""},XS=a=>{if(!Number.isFinite(a)||a<=0)return"";const s=1024,l=s*1024;if(a>=l){const c=a/l;return`${c>=10?Math.round(c):Math.round(c*10)/10} mb`}const i=a/s;return`${i>=10?Math.round(i):Math.round(i*10)/10} kb`},WS=a=>{if(!a)return"PUBLISHED";if(a.tempSaveYn==="Y")return"DRAFT";if(a.revealAt){const s=new Date(a.revealAt);if(!Number.isNaN(s.getTime())&&s.getTime()>Date.now())return"SCHEDULED"}return"PUBLISHED"},KS=({type:a})=>a==="NOTICE"?e.jsx("span",{className:"badge badge-type bg-warning text-dark border border-warning-subtle",children:""}):a==="MATERIAL"?e.jsx("span",{className:"badge badge-type bg-info text-dark border border-info-subtle",children:""}):e.jsx("span",{className:"badge badge-type text-bg-secondary",children:""}),QS=({status:a})=>{switch(a){case"DRAFT":return e.jsx("span",{className:"badge text-bg-secondary",children:""});case"SCHEDULED":return e.jsx("span",{className:"badge text-bg-primary",children:""});default:return e.jsx("span",{className:"badge text-bg-success",children:""})}},mn=a=>String(a?.lctReplyId||a?.replyId||a?.id||""),ZS=a=>{if(!a)return"";if(a.parentReplyId)return a.parentReplyId;const s=a.parentReply||a.parent;return s?typeof s=="string"?s:typeof s=="object"&&(s.lctReplyId||s.replyId||s.id||s.parentReplyId)||"":""},jx=a=>{if(a?.createAt||a?.createdAt){const l=Date.parse(a.createAt||a.createdAt);if(!Number.isNaN(l))return l}const s=Number(String(a?.lctReplyId||a?.replyId||a?.id||"").replace(/\D/g,""));return Number.isNaN(s)?0:s},JS=(a,s)=>{const l=jx(a)-jx(s);return l!==0?l:mn(a).localeCompare(mn(s))};function ew(){const{lectureId:a,postId:s}=dt(),l=a||"",i=s||"",c=encodeURIComponent(l),d=encodeURIComponent(i),[u,h]=x.useState(null),[f,g]=x.useState(!0),[b,y]=x.useState(""),[v,S]=x.useState(null),[N,E]=x.useState(()=>new Map),[A,T]=x.useState([]),[$,D]=x.useState("desc"),[I,G]=x.useState(!1),[L,_]=x.useState(""),[O,H]=x.useState(""),[C,P]=x.useState({variant:"",message:""}),[U,Z]=x.useState(!1),[z,W]=x.useState(""),w=`/classroom/student/${encodeURIComponent(l||"")}/board`,M=x.useCallback(()=>{P({variant:"",message:""})},[]),B=x.useCallback(async()=>{if(!l||!i)throw new Error(gt.invalidParams);const re=`/classroom/api/v1/student/board/${c}/post/${d}`,he=await fetch(re,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!he.ok)throw new Error(`${gt.postLoadError} (HTTP ${he.status})`);return he.json()},[l,i,c,d]),F=x.useCallback(async()=>{if(!l)return null;const re=`/classroom/api/v1/common/${c}/professor`;try{const he=await fetch(re,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!he.ok)throw new Error(`HTTP ${he.status}`);return he.json()}catch(he){return console.warn("[StudentBoardPost] professor info load failed",he),null}},[l,c]),q=x.useCallback(async()=>{const re=new Map;if(!l)return re;const he=`/classroom/api/v1/student/${c}/students`;try{const Re=await fetch(he,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!Re.ok)throw new Error(`HTTP ${Re.status}`);const Be=await Re.json();Array.isArray(Be)&&Be.forEach(fe=>{if(!fe)return;const Le=String(fe.userId||"").trim();Le&&re.set(Le,fe)})}catch(Re){console.warn("[StudentBoardPost] student roster load failed",Re)}return re},[l,c]),k=x.useCallback(async()=>{if(!l||!i)return T([]),_(gt.replyLoadError),[];const re=`/classroom/api/v1/student/board/${c}/post/${d}/reply`;try{G(!0),_("");const he=await fetch(re,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!he.ok)throw new Error(`HTTP ${he.status}`);const Re=await he.json(),Be=Array.isArray(Re)?Re:[];return T(Be),Be}catch(he){return console.error("[StudentBoardPost] reply load error",he),T([]),_(gt.replyLoadError),[]}finally{G(!1)}},[l,i,c,d]);x.useEffect(()=>{if(!l||!i){h(null),y(gt.invalidParams),g(!1);return}let re=!1;return(async()=>{try{g(!0),y("");const he=await B();re||h(he)}catch(he){re||(h(null),y(he.message||gt.postLoadError))}finally{re||g(!1)}})(),()=>{re=!0}},[l,i,B]),x.useEffect(()=>{let re=!1;return(async()=>{const[he,Re]=await Promise.all([F(),q()]);re||(S(he),E(new Map(Re)))})(),()=>{re=!0}},[F,q]),x.useEffect(()=>{let re=!1;return(async()=>await k())(),()=>{re=!0}},[k]);const X=x.useMemo(()=>{if(!u)return[];const re=u.attachFileList||u.attachFiles||u.attachments||u.files||[];return Array.isArray(re)?re.map((he,Re)=>{const Be=` ${he?.fileOrder||Re+1}`,fe=he?.originName||he?.originalFilename||he?.originalFileName||he?.fileName||he?.fileNm||Be,Le=String(he?.extension||he?.fileExtension||"").replace(/^\./,"");let oe=typeof fe=="string"?fe:String(fe??Be);Le&&typeof oe=="string"&&!oe.toLowerCase().endsWith(`.${Le.toLowerCase()}`)&&(oe=`${oe}.${Le}`);const Ne=he?.fileOrder??he?.atchFileSn??he?.fileSn??he?.attachFileOrder??he?.fileId??he?.id??Re,we=typeof he?.downloadUrl=="string"&&he.downloadUrl||typeof he?.url=="string"&&he.url||typeof he?.fileUrl=="string"&&he.fileUrl||`/classroom/api/v1/common/board/${c}/post/${d}/attach/${encodeURIComponent(String(Ne))}`,Ye=XS(Number(he?.fileSize??he?.size??he?.fileLength??0));return{key:`${Ne}-${Re}`,name:oe,href:we,sizeLabel:Ye}}):[]},[u,c,d]),ae=x.useMemo(()=>{if(!u)return"";const re=u.content||u.postContent||u.contentHtml||"",he=VS(re);return PS(he)},[u]),Y=x.useMemo(()=>{const re=new Map;return A.forEach(he=>{const Re=mn(he);Re&&re.set(Re,he)}),re},[A]),te=x.useMemo(()=>{if(!A.length)return{top:[],children:new Map};const re=new Map,he=[];A.forEach(Be=>{const fe=mn(Be),Le=ZS(Be);Le&&Le!==fe&&Y.has(Le)?(re.has(Le)||re.set(Le,[]),re.get(Le).push(Be)):he.push(Be)});const Re=(Be,fe)=>JS(Be,fe);return he.sort(Re),re.forEach((Be,fe)=>{const Le=Be.slice().sort(Re);re.set(fe,Le)}),$==="desc"&&he.reverse(),{top:he,children:re}},[A,Y,$]),K=x.useCallback(re=>{if(!re)return"";const he=re.lastName||"",Re=re.firstName||"",Be=`${he}${Re}`.trim();return Be||re.userName||re.userId||""},[]),le=x.useCallback(re=>{if(!re)return"";const he=re.lastName||"",Re=re.firstName||"",Be=`${he}${Re}`.trim();return Be||re.userName||re.professorName||re.userId||""},[]),ve=x.useCallback(re=>{if(!re)return"";const he=String(re.userId||"").trim();if(he&&v?.userId&&v.userId===he){const Re=le(v);return Re?`${Re} `:" "}if(he&&N instanceof Map&&N.has(he)){const Re=N.get(he),Be=K(Re)||he,fe=Re?.univDeptName||"";return fe?`${Be}(${fe})`:Be}return re.writerName||re.authorName||re.studentName||he||""},[v,N,le,K]),ke=x.useCallback(re=>{const he=String(re?.userId||"").trim();return!!(he&&v?.userId&&v.userId===he)},[v]),J=x.useCallback(async re=>{re.preventDefault(),M();const he=O.trim();if(!he){P({variant:"warning",message:gt.replyAlertEmpty});return}if(!l||!i){P({variant:"danger",message:gt.replyAlertInvalid});return}const Re=`/classroom/api/v1/student/board/${c}/post/${d}/reply`;try{Z(!0);const Be=await fetch(Re,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin",body:JSON.stringify({replyContent:he})});if(!Be.ok)throw new Error(`HTTP ${Be.status}`);H(""),P({variant:"success",message:gt.replySubmitSuccess}),await k()}catch(Be){console.error("[StudentBoardPost] reply submit error",Be),P({variant:"danger",message:gt.replySubmitFail})}finally{Z(!1)}},[M,l,i,c,d,O,k]),ue=x.useCallback(async re=>{if(!re)return;if(!l||!i){P({variant:"danger",message:gt.replyAlertInvalid});return}if(!window.confirm(gt.replyDeleteConfirm))return;const Re=`/classroom/api/v1/student/board/${c}/post/${d}/reply/${encodeURIComponent(re)}`;try{W(re);const Be=await fetch(Re,{method:"DELETE",headers:{Accept:"application/json"},credentials:"same-origin"});if(!Be.ok)throw new Error(`HTTP ${Be.status}`);P({variant:"info",message:gt.replyDeleteSuccess}),await k()}catch(Be){console.error("[StudentBoardPost] reply delete error",Be),P({variant:"danger",message:gt.replyDeleteFail})}finally{W("")}},[l,i,c,d,k]),Se=x.useCallback((re,he=0,Re="root")=>{const Be=mn(re)||`${Re}-${he}`,fe=["reply-item","border","rounded","px-3","py-2"],Le=ke(re);Le&&fe.push("reply-professor"),he>0&&(fe.push("reply-child","ms-4"),Le||fe.push("bg-light"));const oe=te.children.get(mn(re))||[],Ne=GS(re?.replyContent||re?.content||"");return e.jsxs("div",{className:fe.join(" "),children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"fw-semibold text-body",children:ve(re)}),e.jsx("span",{className:"text-muted small",children:Ku(re?.createAt||re?.createdAt)})]}),e.jsx("div",{className:"d-flex align-items-center gap-2 flex-shrink-0",children:e.jsx("button",{type:"button",className:"btn btn-link btn-sm text-danger text-decoration-none px-0",onClick:()=>ue(mn(re)),disabled:!!z&&z===mn(re),children:gt.replyDelete})})]}),e.jsx("div",{className:"reply-body text-break small mt-1",children:Ne?e.jsx("span",{dangerouslySetInnerHTML:{__html:Ne}}):e.jsx("span",{className:"text-muted fst-italic small",children:gt.replyNoContent})}),oe.length>0&&e.jsx("div",{className:"mt-2 vstack gap-1",children:oe.map((we,Ye)=>Se(we,he+1,`${Be}-${Ye}`))})]},Be)},[te.children,ve,ue,z,ke]),Me=x.useMemo(()=>{if(!u)return[];const re=[],he=u.writerName||u.professorName||u.authorName;he&&re.push(`${Rc.author}: ${he}`);const Re=Ku(u.createAt||u.createdAt);Re&&re.push(`${Rc.createdAt}: ${Re}`);const Be=Ku(u.revealAt);return Be&&re.push(`${Rc.revealAt}: ${Be}`),u.viewCount!=null&&re.push(`${Rc.viewCount}: ${u.viewCount}`),re},[u]);return e.jsx("section",{className:"container py-4",children:e.jsxs("div",{className:"board-layout mx-auto",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(Pe,{to:w,children:gt.breadcrumbBoard})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:gt.breadcrumbCurrent})]})}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",to:w,children:gt.listButton})})]}),e.jsx("div",{className:"card shadow-sm mb-4",children:e.jsx("div",{className:"card-body",id:"post-body",children:b?e.jsx("div",{className:"alert alert-danger mb-0",role:"alert",children:b}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex align-items-start justify-content-between gap-3 mb-3 flex-wrap",id:"post-header",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"d-flex align-items-center flex-wrap gap-2 mb-2",id:"post-badge-row",children:f?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"badge skeleton",style:{width:"72px",height:"24px"}}),e.jsx("span",{className:"badge skeleton",style:{width:"56px",height:"24px"}})]}):e.jsxs(e.Fragment,{children:[e.jsx(KS,{type:u?.postType}),e.jsx(QS,{status:WS(u)})]})}),e.jsx("h1",{className:`h4 mb-2 ${f?"skeleton":""}`,id:"post-title",style:f?{width:"70%",height:"1.75rem"}:void 0,children:f?null:(u?.title||u?.postTitle||"").trim()||gt.noContent}),e.jsx("div",{className:"d-flex flex-wrap meta-list mb-0",id:"post-meta-row",children:f?[1,2,3].map(re=>e.jsx("div",{className:"meta-item skeleton",style:{width:"220px",height:"1rem"}},re)):Me.map((re,he)=>e.jsx("div",{className:"meta-item",children:re},he))})]}),e.jsx("div",{className:"d-flex align-items-start gap-2 post-header-actions"})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"post-content mb-4",id:"post-content",children:f?e.jsx("div",{className:"skeleton",style:{height:"8rem"}}):ae?e.jsx("div",{dangerouslySetInnerHTML:{__html:ae}}):e.jsx("p",{className:"text-muted mb-0",children:gt.noContent})}),!f&&X.length>0&&e.jsxs("div",{id:"attach-area",className:"mt-4",children:[e.jsx("h2",{className:"h6 mb-2",children:gt.attachments}),e.jsx("ul",{className:"list-group",id:"attach-list",children:X.map(re=>e.jsxs("li",{className:"list-group-item d-flex align-items-center gap-3",children:[e.jsxs("a",{className:"d-flex align-items-center gap-2 text-decoration-none flex-grow-1",href:re.href,download:!0,children:[e.jsx("i",{className:"bi bi-paperclip text-secondary","aria-hidden":"true"}),e.jsx("span",{className:"text-truncate",children:re.name})]}),re.sizeLabel&&e.jsx("small",{className:"text-muted text-nowrap",children:re.sizeLabel})]},re.key))})]})]})})}),!b&&e.jsx("section",{className:"mt-5",id:"reply-section",children:e.jsxs("div",{className:"card shadow-sm",children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[e.jsx("h2",{className:"h5 mb-0",children:gt.replySectionTitle}),e.jsxs("div",{className:"btn-group btn-group-sm",role:"group","aria-label":gt.replySectionTitle,children:[e.jsx("button",{type:"button",className:`btn ${$==="desc"?"btn-primary active":"btn-outline-secondary"}`,id:"reply-sort-newest","aria-pressed":$==="desc",onClick:()=>D("desc"),children:gt.replySortNewest}),e.jsx("button",{type:"button",className:`btn ${$==="asc"?"btn-primary active":"btn-outline-secondary"}`,id:"reply-sort-oldest","aria-pressed":$==="asc",onClick:()=>D("asc"),children:gt.replySortOldest})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{id:"reply-form",className:"vstack gap-3 mb-4",onSubmit:J,children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"reply-content",className:"form-label",children:[gt.replySectionTitle," ",""]}),e.jsx("textarea",{className:"form-control reply-textarea",id:"reply-content",rows:3,placeholder:gt.replyPlaceholder,value:O,onChange:re=>{H(re.target.value),C.variant&&M()},disabled:U})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",id:"reply-submit",disabled:U,children:U?gt.replySubmitLoading:gt.replySubmit})})]}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"vstack gap-1",children:I?e.jsx("div",{className:"text-muted small text-center py-4",children:gt.replyLoading}):te.top.length===0?e.jsx("div",{id:"reply-empty",className:`small text-center py-4 ${L?"text-danger":"text-muted"}`,children:L||gt.replyEmpty}):e.jsx("div",{id:"reply-list",className:"vstack gap-1",children:te.top.map((re,he)=>Se(re,0,`root-${he}`))})}),C.message&&e.jsx("div",{id:"reply-alert",className:`alert mt-4 alert-${C.variant}`,role:"alert",children:C.message})]})]})}),b&&e.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:b})]})})}function tw(){const{lectureId:a}=dt(),s=rs(),[l,i]=x.useState([]),[c,d]=x.useState({}),[u,h]=x.useState(!0),[f,g]=x.useState(""),[b,y]=x.useState(!1);x.useEffect(()=>{let A=!0;return(async()=>{if(!a){g("    ."),h(!1);return}try{h(!0),g("");const $=await fetch("/classroom/api/v1/student/review",{headers:{Accept:"application/json"},credentials:"include"});if($.ok){const G=await $.json();if(!A)return;if(Array.isArray(G)&&!G.includes(a)){alert("  ."),s(-1);return}}const D=await fetch(`/classroom/api/v1/student/${encodeURIComponent(a)}/review/question`,{headers:{Accept:"application/json"},credentials:"include"});if(!D.ok){const G=await D.text().catch(()=>"");throw new Error(G||`(${D.status})    .`)}const I=await D.json();if(!A)return;i(Array.isArray(I)?I:[])}catch($){if(!A)return;g($ instanceof Error?$.message:"     ."),i([])}finally{A&&h(!1)}})(),()=>{A=!1}},[a,s]);const v=x.useMemo(()=>{const A=l.filter(D=>D.answerTypeCd==="OBJ_SINGLE"),T=l.filter(D=>D.answerTypeCd==="SUBJ_SRT"),$=l.filter(D=>D.answerTypeCd==="SUBJ_LONG");return{objective:A,shortAnswer:T,longAnswer:$}},[l]),S=(A,T)=>{d($=>({...$,[A]:T}))},N=A=>{A.target.style.height="auto",A.target.style.height=A.target.scrollHeight+"px"},E=async A=>{A.preventDefault();const T=[];if(v.objective.forEach(($,D)=>{(!c[$.questionNo]||c[$.questionNo].toString().trim()==="")&&T.push({section:" ",number:D+1})}),v.shortAnswer.forEach(($,D)=>{(!c[$.questionNo]||c[$.questionNo].toString().trim()==="")&&T.push({section:" ",number:D+1})}),v.longAnswer.forEach(($,D)=>{(!c[$.questionNo]||c[$.questionNo].toString().trim()==="")&&T.push({section:" ",number:D+1})}),T.length>0){const $=T.map(D=>`${D.section} ${D.number}`);alert(`  :
${$.join(", ")}`);return}if(window.confirm(" ?     ."))try{y(!0),g("");const $=Object.entries(c).map(([I,G])=>({questionNo:Number(I),answer:G.toString()}));console.log("  :"),console.log(JSON.stringify($,null,2));const D=await fetch(`/classroom/api/v1/student/${encodeURIComponent(a)}/review`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify($)});if(!D.ok){const I=await D.text().catch(()=>"");throw new Error(I||`(${D.status})   .`)}alert(" ."),s(`/classroom/student/${a}`)}catch($){g($ instanceof Error?$.message:"    .")}finally{y(!1)}};return e.jsxs("section",{className:"container py-4",children:[f&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:f}),e.jsxs("div",{className:"card shadow-sm",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsx("h1",{className:"h5 mb-0",children:""})}),e.jsx("div",{className:"card-body",children:u?e.jsx("div",{className:"text-center py-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:" ..."})})}):l.length===0?e.jsx("p",{className:"text-muted mb-0",children:"    ."}):e.jsxs("form",{onSubmit:E,children:[e.jsxs("div",{className:"alert alert-info mb-4",children:[e.jsx("strong",{children:":"}),"     .     ."]}),v.objective.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"h6 mb-3",children:" "}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"5%"},children:""}),e.jsx("th",{style:{width:"45%"},children:""}),e.jsxs("th",{className:"text-center",style:{width:"10%"},children:["",e.jsx("br",{}),""]}),e.jsx("th",{className:"text-center",style:{width:"10%"},children:""}),e.jsx("th",{className:"text-center",style:{width:"10%"},children:""}),e.jsx("th",{className:"text-center",style:{width:"10%"},children:""}),e.jsx("th",{className:"text-center",style:{width:"10%"},children:""})]})}),e.jsx("tbody",{children:v.objective.map((A,T)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:T+1}),e.jsx("td",{children:A.question}),["1","2","3","4","5"].map($=>e.jsx("td",{className:"text-center",children:e.jsx("input",{type:"radio",name:`question-${A.questionNo}`,value:$,checked:c[A.questionNo]===$,onChange:D=>S(A.questionNo,D.target.value),disabled:b,className:"form-check-input"})},$))]},A.questionNo))})]})})]}),v.shortAnswer.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"h6 mb-3",children:" "}),v.shortAnswer.map((A,T)=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"form-label fw-bold",children:[T+1,". ",A.question]}),e.jsx("input",{type:"text",className:"form-control",value:c[A.questionNo]||"",onChange:$=>S(A.questionNo,$.target.value),placeholder:" ",disabled:b,maxLength:200})]},A.questionNo))]}),v.longAnswer.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"h6 mb-3",children:" "}),v.longAnswer.map((A,T)=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"form-label fw-bold",children:[T+1,". ",A.question]}),e.jsx("textarea",{className:"form-control",value:c[A.questionNo]||"",onChange:$=>S(A.questionNo,$.target.value),onInput:N,placeholder:" ",rows:3,disabled:b,maxLength:1e3,style:{resize:"none",overflow:"hidden"}})]},A.questionNo))]}),e.jsx("div",{className:"d-flex gap-2 justify-content-end mt-4",children:e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"})," ..."]}):""})})]})})]})]})}const Tt={heading:"/",intro:"1   .     .",cta:" ",loading:"  ...",error:"    .    .",missingLecture:"    .",gradeLabel:"",gradeFallback:"-",professorTitle:"  ",nameLabel:"",deptLabel:"",emailLabel:"",phoneLabel:"()",officeLabel:"",emptyData:"   ."},sw=a=>{if(a==null)return"";const s=Number(a);return Number.isFinite(s)?s.toFixed(2).replace(/\.?0+$/,""):""};function aw(){const{lectureId:a}=dt(),[s,l]=x.useState("idle"),[i,c]=x.useState(""),[d,u]=x.useState(null),[h,f]=x.useState(null),[g,b]=x.useState(!1),y=x.useMemo(()=>{if(!d)return null;const A=d.gpaCd||Tt.gradeFallback,T=d.autoGrade,$=sw(T);return $?`${A}(${$})`:A},[d]),v=x.useMemo(()=>{if(!h)return"";const A=h.lastName||"",T=h.firstName||"";return`${A}${T}`.trim()},[h]),S=x.useMemo(()=>!h?.professorNo||g?null:`/classroom/api/v1/common/photo/professor/${encodeURIComponent(h.professorNo)}`,[g,h]),N=x.useCallback(async()=>{if(!a){c(Tt.missingLecture),l("error");return}l("loading"),c(""),u(null),f(null),b(!1);try{const A=encodeURIComponent(a),[T,$]=await Promise.all([fetch(`/classroom/api/v1/student/${A}/score`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/common/${A}/professor`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!T.ok)throw new Error(`${T.status} ${T.statusText}`);if(!$.ok)throw new Error(`${$.status} ${$.statusText}`);const D=await T.json(),I=await $.json(),G=Array.isArray(D)?D[0]||null:D||null;if(!G)throw new Error(Tt.emptyData);u(G),f(I&&typeof I=="object"?I:null),l("done")}catch(A){l("error"),c(A?.message||Tt.error)}},[a]),E=x.useMemo(()=>h?[{label:Tt.nameLabel,value:v||Tt.gradeFallback},{label:Tt.deptLabel,value:h.univDeptName||Tt.gradeFallback},{label:Tt.emailLabel,value:h.email||Tt.gradeFallback},{label:Tt.phoneLabel,value:h.mobileNo||Tt.gradeFallback},{label:Tt.officeLabel,value:h.officeNo||Tt.gradeFallback}]:[],[h,v]);return e.jsx("div",{className:"card border-0 shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"h5 mb-3",children:Tt.heading}),e.jsx("p",{className:"text-muted mb-4",children:Tt.intro}),s==="error"&&e.jsx("div",{className:"alert alert-danger rounded-4",role:"alert",children:i||Tt.error}),s==="done"&&e.jsx("div",{className:"text-center mb-4",children:e.jsx("div",{className:"h4 mb-2 fw-bold text-primary",children:`${Tt.gradeLabel} : ${y||Tt.gradeFallback}`})}),s==="loading"&&e.jsx("div",{className:"text-center text-muted mb-4",children:Tt.loading}),e.jsx("div",{className:"d-flex justify-content-center mb-4",children:e.jsx("button",{type:"button",className:"btn btn-primary btn-lg px-4 shadow-sm",onClick:N,disabled:s==="loading",children:s==="loading"?Tt.loading:Tt.cta})}),s==="done"&&h&&e.jsx("div",{className:"border rounded-4 p-4 bg-light",children:e.jsxs("div",{className:"d-flex flex-column flex-md-row align-items-start justify-content-between gap-4",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h3",{className:"h6 mb-3 text-secondary fw-semibold",children:Tt.professorTitle}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"fw-semibold fs-5",children:v||Tt.gradeFallback}),e.jsx("div",{className:"text-muted small",children:h.univDeptName||Tt.gradeFallback})]}),e.jsx("dl",{className:"row mb-0",children:E.map(({label:A,value:T})=>e.jsxs(qs.Fragment,{children:[e.jsx("dt",{className:"col-sm-4 text-muted",children:A}),e.jsx("dd",{className:"col-sm-8",children:T||Tt.gradeFallback})]},A))})]}),e.jsx("div",{className:"flex-shrink-0 d-flex justify-content-end",children:S?e.jsx("img",{src:S,alt:v?`${v} Professor photo`:"Professor photo",className:"shadow-sm",style:{maxHeight:"240px",width:"auto",borderRadius:"1rem",objectFit:"contain"},onError:()=>b(!0)}):e.jsx("div",{className:"bg-secondary-subtle border d-flex align-items-center justify-content-center text-muted fw-semibold shadow-sm",style:{width:"180px",height:"220px",borderRadius:"1rem"},children:v?v[0]:"P"})})]})})]})})}function nw(){const[a,s]=x.useState([]),[l,i]=x.useState(!0),[c,d]=x.useState(null),u=x.useMemo(()=>({MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""}),[]),h=x.useMemo(()=>({REG1:"1",REG2:"2",SUB1:"",SUB2:""}),[]),f=x.useMemo(()=>({REG1:1,REG2:2,SUB1:3,SUB2:4}),[]),g=x.useMemo(()=>({scheduleHeading:"",scheduleEmpty:"  ."}),[]),b=_=>{if(!_||String(_).length<4)return"--:--";const O=String(_);return`${O.slice(0,2)}:${O.slice(2,4)}`},y=_=>String(_??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),v=_=>{if(!_)return[];try{if(Array.isArray(_))return _;if(typeof _=="string")return JSON.parse(_)}catch{}return[]},S=_=>{if(!_)return{year:0,order:99,termCd:""};const[O="0",H=""]=String(_).split("_");return{year:Number(O)||0,order:f[H]??99,termCd:H}},N=_=>_.slice().sort((O,H)=>{const C=S(O.yeartermCd),P=S(H.yeartermCd);return C.year!==P.year?P.year-C.year:C.order!==P.order?C.order-P.order:(O.subjectName||"").localeCompare(H.subjectName||"","ko")}),E=_=>{if(!_)return"  ";const[O,H]=String(_).split("_"),C=h[H]??H??"";return C?`${O} ${C}`:`${O}`},A=_=>{if(!_)return"";const O=new Date(_);if(Number.isNaN(O.getTime()))return"";const H=String(O.getMonth()+1).padStart(2,"0"),C=String(O.getDate()).padStart(2,"0");return`${O.getFullYear()}-${H}-${C}`},T=_=>_.length?_.map((O,H)=>{const C=O?.placeName||O?.placeCd||"  ",P=Array.isArray(O?.slots)?O.slots:[];return e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"badge bg-light text-dark border me-2",children:C}),e.jsx("ul",{className:"mb-0 ps-3",children:P.length===0?e.jsx("li",{className:"text-muted",children:g.scheduleEmpty}):P.map((U,Z)=>{const z=u[U?.day]??U?.day??"";return e.jsxs("li",{children:[z," ",b(U?.start),"-",b(U?.end)]},`${C}-${H}-${Z}`)})})]},`${C}-${H}`)}):e.jsx("p",{className:"text-muted mb-0",children:g.scheduleEmpty});x.useEffect(()=>{let _=!0;return(async()=>{try{i(!0),d(null);const O=await fetch("/classroom/api/v1/professor/mylist",{headers:{Accept:"application/json"},credentials:"include"});if(!O.ok)throw new Error(`(${O.status})    .`);const H=await O.json();if(!Array.isArray(H))throw new Error("    .");if(!_)return;s(H)}catch(O){if(!_)return;d(O)}finally{_&&i(!1)}})(),()=>{_=!1}},[]);const $=x.useMemo(()=>{const _=a.filter(O=>!O.started&&!O.ended);return N(_)},[a]),D=x.useMemo(()=>{const _=a.filter(O=>O.started&&!O.ended);return N(_)},[a]),I=x.useMemo(()=>N(a.filter(_=>!!_.ended)),[a]),G=({lecture:_})=>{const O=v(_.scheduleJson);let H;_.ended?H=e.jsx("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle",children:""}):_.started?H=e.jsx("span",{className:"badge bg-success-subtle text-success border border-success-subtle",children:""}):H=e.jsx("span",{className:"badge bg-info-subtle text-info border border-info-subtle",children:""});const C=E(_.yeartermCd),P=_.deptName||"-",U=_.subjectName||"-",Z=_.professorName||"-",z=_.completion||_.completionName||"-",W=_.subjectTypeName||"-",w=_.credit??_.creditPoint??"-",M=_.hour??_.classHour??"-",B=_.capacityText||_.capacity||"",F=_.ended?_.endDate?`: ${A(_.endDate)}`:"":"",q=_.lectureId||_.id||_.lectureNo;return e.jsx("div",{className:"col-12 col-md-6 col-lg-4",children:e.jsx("article",{className:"card h-100 position-relative",children:e.jsxs("div",{className:"card-body d-flex flex-column",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("h3",{className:"h6 mb-0 text-truncate",title:U,children:U}),H]}),e.jsx("div",{className:"text-muted small mb-2",children:C}),e.jsx("div",{className:"mb-2 small text-body-secondary",children:P}),e.jsxs("ul",{className:"list-unstyled small mb-3",children:[e.jsxs("li",{children:[": ",y(Z)]}),e.jsxs("li",{children:[": ",y(z)]}),e.jsxs("li",{children:[": ",y(W)]}),e.jsxs("li",{children:[" / : ",y(String(w)),"  ",y(String(M))]}),B?e.jsxs("li",{children:[": ",y(String(B))]}):null]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"d-block mb-1",children:""}),T(O)]}),F&&e.jsx("div",{className:"mt-auto text-muted small",children:F}),q&&e.jsx(Pe,{to:`/classroom/professor/${encodeURIComponent(q)}`,className:"stretched-link","aria-label":`${U}  `})]})})})},L=({id:_,title:O,items:H,defaultOpen:C})=>e.jsxs("div",{className:"accordion-item",children:[e.jsx("h2",{className:"accordion-header",id:`${_}-heading`,children:e.jsxs("button",{className:`accordion-button ${C?"":"collapsed"}`,type:"button","data-bs-toggle":"collapse","data-bs-target":`#${_}-collapse`,"aria-expanded":C?"true":"false","aria-controls":`${_}-collapse`,"data-bs-parent":"#lectures-accordion",children:[O,e.jsxs("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle ms-2",children:[H.length,""]})]})}),e.jsx("div",{id:`${_}-collapse`,className:`accordion-collapse collapse ${C?"show":""}`,"aria-labelledby":`${_}-heading`,"data-bs-parent":"#lectures-accordion",children:e.jsx("div",{className:"accordion-body",children:H.length?e.jsx("div",{className:"row g-3",children:H.map(P=>e.jsx(G,{lecture:P},P.lectureId||`${P.subjectName}-${P.yeartermCd}`))}):e.jsx("div",{className:"text-muted text-center py-4",children:"  ."})})})]});return e.jsxs(Eo,{role:"professor",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h4 mb-0",children:" "}),e.jsx("div",{className:"text-muted small","aria-live":"polite",children:l?" ":` ${$.length}   ${D.length}   ${I.length}`})]}),c&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(c.message||c)}),!c&&e.jsxs("div",{className:"accordion",id:"lectures-accordion",children:[e.jsx(L,{id:"prof-ongoing",title:" ",items:D,defaultOpen:!0}),e.jsx(L,{id:"prof-upcoming",title:" ",items:$,defaultOpen:!1}),e.jsx(L,{id:"prof-ended",title:" ",items:I,defaultOpen:!1})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function dr(a){return a+.5|0}const pn=(a,s,l)=>Math.max(Math.min(a,l),s);function Ki(a){return pn(dr(a*2.55),0,255)}function vn(a){return pn(dr(a*255),0,255)}function Oa(a){return pn(dr(a/2.55)/100,0,1)}function Nx(a){return pn(dr(a*100),0,100)}const Vs={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},yh=[..."0123456789ABCDEF"],lw=a=>yh[a&15],iw=a=>yh[(a&240)>>4]+yh[a&15],Ic=a=>(a&240)>>4===(a&15),rw=a=>Ic(a.r)&&Ic(a.g)&&Ic(a.b)&&Ic(a.a);function cw(a){var s=a.length,l;return a[0]==="#"&&(s===4||s===5?l={r:255&Vs[a[1]]*17,g:255&Vs[a[2]]*17,b:255&Vs[a[3]]*17,a:s===5?Vs[a[4]]*17:255}:(s===7||s===9)&&(l={r:Vs[a[1]]<<4|Vs[a[2]],g:Vs[a[3]]<<4|Vs[a[4]],b:Vs[a[5]]<<4|Vs[a[6]],a:s===9?Vs[a[7]]<<4|Vs[a[8]]:255})),l}const ow=(a,s)=>a<255?s(a):"";function dw(a){var s=rw(a)?lw:iw;return a?"#"+s(a.r)+s(a.g)+s(a.b)+ow(a.a,s):void 0}const uw=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function xy(a,s,l){const i=s*Math.min(l,1-l),c=(d,u=(d+a/30)%12)=>l-i*Math.max(Math.min(u-3,9-u,1),-1);return[c(0),c(8),c(4)]}function hw(a,s,l){const i=(c,d=(c+a/60)%6)=>l-l*s*Math.max(Math.min(d,4-d,1),0);return[i(5),i(3),i(1)]}function mw(a,s,l){const i=xy(a,1,.5);let c;for(s+l>1&&(c=1/(s+l),s*=c,l*=c),c=0;c<3;c++)i[c]*=1-s-l,i[c]+=s;return i}function fw(a,s,l,i,c){return a===c?(s-l)/i+(s<l?6:0):s===c?(l-a)/i+2:(a-s)/i+4}function _h(a){const l=a.r/255,i=a.g/255,c=a.b/255,d=Math.max(l,i,c),u=Math.min(l,i,c),h=(d+u)/2;let f,g,b;return d!==u&&(b=d-u,g=h>.5?b/(2-d-u):b/(d+u),f=fw(l,i,c,b,d),f=f*60+.5),[f|0,g||0,h]}function kh(a,s,l,i){return(Array.isArray(s)?a(s[0],s[1],s[2]):a(s,l,i)).map(vn)}function Dh(a,s,l){return kh(xy,a,s,l)}function pw(a,s,l){return kh(mw,a,s,l)}function gw(a,s,l){return kh(hw,a,s,l)}function by(a){return(a%360+360)%360}function xw(a){const s=uw.exec(a);let l=255,i;if(!s)return;s[5]!==i&&(l=s[6]?Ki(+s[5]):vn(+s[5]));const c=by(+s[2]),d=+s[3]/100,u=+s[4]/100;return s[1]==="hwb"?i=pw(c,d,u):s[1]==="hsv"?i=gw(c,d,u):i=Dh(c,d,u),{r:i[0],g:i[1],b:i[2],a:l}}function bw(a,s){var l=_h(a);l[0]=by(l[0]+s),l=Dh(l),a.r=l[0],a.g=l[1],a.b=l[2]}function yw(a){if(!a)return;const s=_h(a),l=s[0],i=Nx(s[1]),c=Nx(s[2]);return a.a<255?`hsla(${l}, ${i}%, ${c}%, ${Oa(a.a)})`:`hsl(${l}, ${i}%, ${c}%)`}const Sx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},wx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function vw(){const a={},s=Object.keys(wx),l=Object.keys(Sx);let i,c,d,u,h;for(i=0;i<s.length;i++){for(u=h=s[i],c=0;c<l.length;c++)d=l[c],h=h.replace(d,Sx[d]);d=parseInt(wx[u],16),a[h]=[d>>16&255,d>>8&255,d&255]}return a}let Oc;function jw(a){Oc||(Oc=vw(),Oc.transparent=[0,0,0,0]);const s=Oc[a.toLowerCase()];return s&&{r:s[0],g:s[1],b:s[2],a:s.length===4?s[3]:255}}const Nw=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Sw(a){const s=Nw.exec(a);let l=255,i,c,d;if(s){if(s[7]!==i){const u=+s[7];l=s[8]?Ki(u):pn(u*255,0,255)}return i=+s[1],c=+s[3],d=+s[5],i=255&(s[2]?Ki(i):pn(i,0,255)),c=255&(s[4]?Ki(c):pn(c,0,255)),d=255&(s[6]?Ki(d):pn(d,0,255)),{r:i,g:c,b:d,a:l}}}function ww(a){return a&&(a.a<255?`rgba(${a.r}, ${a.g}, ${a.b}, ${Oa(a.a)})`:`rgb(${a.r}, ${a.g}, ${a.b})`)}const Qu=a=>a<=.0031308?a*12.92:Math.pow(a,1/2.4)*1.055-.055,zl=a=>a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4);function Cw(a,s,l){const i=zl(Oa(a.r)),c=zl(Oa(a.g)),d=zl(Oa(a.b));return{r:vn(Qu(i+l*(zl(Oa(s.r))-i))),g:vn(Qu(c+l*(zl(Oa(s.g))-c))),b:vn(Qu(d+l*(zl(Oa(s.b))-d))),a:a.a+l*(s.a-a.a)}}function Lc(a,s,l){if(a){let i=_h(a);i[s]=Math.max(0,Math.min(i[s]+i[s]*l,s===0?360:1)),i=Dh(i),a.r=i[0],a.g=i[1],a.b=i[2]}}function yy(a,s){return a&&Object.assign(s||{},a)}function Cx(a){var s={r:0,g:0,b:0,a:255};return Array.isArray(a)?a.length>=3&&(s={r:a[0],g:a[1],b:a[2],a:255},a.length>3&&(s.a=vn(a[3]))):(s=yy(a,{r:0,g:0,b:0,a:1}),s.a=vn(s.a)),s}function Aw(a){return a.charAt(0)==="r"?Sw(a):xw(a)}class ir{constructor(s){if(s instanceof ir)return s;const l=typeof s;let i;l==="object"?i=Cx(s):l==="string"&&(i=cw(s)||jw(s)||Aw(s)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var s=yy(this._rgb);return s&&(s.a=Oa(s.a)),s}set rgb(s){this._rgb=Cx(s)}rgbString(){return this._valid?ww(this._rgb):void 0}hexString(){return this._valid?dw(this._rgb):void 0}hslString(){return this._valid?yw(this._rgb):void 0}mix(s,l){if(s){const i=this.rgb,c=s.rgb;let d;const u=l===d?.5:l,h=2*u-1,f=i.a-c.a,g=((h*f===-1?h:(h+f)/(1+h*f))+1)/2;d=1-g,i.r=255&g*i.r+d*c.r+.5,i.g=255&g*i.g+d*c.g+.5,i.b=255&g*i.b+d*c.b+.5,i.a=u*i.a+(1-u)*c.a,this.rgb=i}return this}interpolate(s,l){return s&&(this._rgb=Cw(this._rgb,s._rgb,l)),this}clone(){return new ir(this.rgb)}alpha(s){return this._rgb.a=vn(s),this}clearer(s){const l=this._rgb;return l.a*=1-s,this}greyscale(){const s=this._rgb,l=dr(s.r*.3+s.g*.59+s.b*.11);return s.r=s.g=s.b=l,this}opaquer(s){const l=this._rgb;return l.a*=1+s,this}negate(){const s=this._rgb;return s.r=255-s.r,s.g=255-s.g,s.b=255-s.b,this}lighten(s){return Lc(this._rgb,2,s),this}darken(s){return Lc(this._rgb,2,-s),this}saturate(s){return Lc(this._rgb,1,s),this}desaturate(s){return Lc(this._rgb,1,-s),this}rotate(s){return bw(this._rgb,s),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ra(){}const Ew=(()=>{let a=0;return()=>a++})();function Et(a){return a==null}function Zt(a){if(Array.isArray&&Array.isArray(a))return!0;const s=Object.prototype.toString.call(a);return s.slice(0,7)==="[object"&&s.slice(-6)==="Array]"}function mt(a){return a!==null&&Object.prototype.toString.call(a)==="[object Object]"}function Gs(a){return(typeof a=="number"||a instanceof Number)&&isFinite(+a)}function la(a,s){return Gs(a)?a:s}function ht(a,s){return typeof a>"u"?s:a}const Tw=(a,s)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100:+a/s,vy=(a,s)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100*s:+a;function Dt(a,s,l){if(a&&typeof a.call=="function")return a.apply(l,s)}function Nt(a,s,l,i){let c,d,u;if(Zt(a))for(d=a.length,c=0;c<d;c++)s.call(l,a[c],c);else if(mt(a))for(u=Object.keys(a),d=u.length,c=0;c<d;c++)s.call(l,a[u[c]],u[c])}function ho(a,s){let l,i,c,d;if(!a||!s||a.length!==s.length)return!1;for(l=0,i=a.length;l<i;++l)if(c=a[l],d=s[l],c.datasetIndex!==d.datasetIndex||c.index!==d.index)return!1;return!0}function mo(a){if(Zt(a))return a.map(mo);if(mt(a)){const s=Object.create(null),l=Object.keys(a),i=l.length;let c=0;for(;c<i;++c)s[l[c]]=mo(a[l[c]]);return s}return a}function jy(a){return["__proto__","prototype","constructor"].indexOf(a)===-1}function _w(a,s,l,i){if(!jy(a))return;const c=s[a],d=l[a];mt(c)&&mt(d)?rr(c,d,i):s[a]=mo(d)}function rr(a,s,l){const i=Zt(s)?s:[s],c=i.length;if(!mt(a))return a;l=l||{};const d=l.merger||_w;let u;for(let h=0;h<c;++h){if(u=i[h],!mt(u))continue;const f=Object.keys(u);for(let g=0,b=f.length;g<b;++g)d(f[g],a,u,l)}return a}function er(a,s){return rr(a,s,{merger:kw})}function kw(a,s,l){if(!jy(a))return;const i=s[a],c=l[a];mt(i)&&mt(c)?er(i,c):Object.prototype.hasOwnProperty.call(s,a)||(s[a]=mo(c))}const Ax={"":a=>a,x:a=>a.x,y:a=>a.y};function Dw(a){const s=a.split("."),l=[];let i="";for(const c of s)i+=c,i.endsWith("\\")?i=i.slice(0,-1)+".":(l.push(i),i="");return l}function Mw(a){const s=Dw(a);return l=>{for(const i of s){if(i==="")break;l=l&&l[i]}return l}}function Xn(a,s){return(Ax[s]||(Ax[s]=Mw(s)))(a)}function Mh(a){return a.charAt(0).toUpperCase()+a.slice(1)}const cr=a=>typeof a<"u",Nn=a=>typeof a=="function",Ex=(a,s)=>{if(a.size!==s.size)return!1;for(const l of a)if(!s.has(l))return!1;return!0};function Rw(a){return a.type==="mouseup"||a.type==="click"||a.type==="contextmenu"}const Mt=Math.PI,Xt=2*Mt,fo=Number.POSITIVE_INFINITY,$w=Mt/180,Kt=Mt/2,Fn=Mt/4,Tx=Mt*2/3,Ny=Math.log10,jn=Math.sign;function ao(a,s,l){return Math.abs(a-s)<l}function _x(a){const s=Math.round(a);a=ao(a,s,a/1e3)?s:a;const l=Math.pow(10,Math.floor(Ny(a))),i=a/l;return(i<=1?1:i<=2?2:i<=5?5:10)*l}function Iw(a){const s=[],l=Math.sqrt(a);let i;for(i=1;i<l;i++)a%i===0&&(s.push(i),s.push(a/i));return l===(l|0)&&s.push(l),s.sort((c,d)=>c-d).pop(),s}function Ow(a){return typeof a=="symbol"||typeof a=="object"&&a!==null&&!(Symbol.toPrimitive in a||"toString"in a||"valueOf"in a)}function po(a){return!Ow(a)&&!isNaN(parseFloat(a))&&isFinite(a)}function Lw(a,s){const l=Math.round(a);return l-s<=a&&l+s>=a}function zw(a,s,l){let i,c,d;for(i=0,c=a.length;i<c;i++)d=a[i][l],isNaN(d)||(s.min=Math.min(s.min,d),s.max=Math.max(s.max,d))}function Ua(a){return a*(Mt/180)}function Uw(a){return a*(180/Mt)}function kx(a){if(!Gs(a))return;let s=1,l=0;for(;Math.round(a*s)/s!==a;)s*=10,l++;return l}function Sy(a,s){const l=s.x-a.x,i=s.y-a.y,c=Math.sqrt(l*l+i*i);let d=Math.atan2(i,l);return d<-.5*Mt&&(d+=Xt),{angle:d,distance:c}}function Bw(a,s){return Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2))}function oa(a){return(a%Xt+Xt)%Xt}function go(a,s,l,i){const c=oa(a),d=oa(s),u=oa(l),h=oa(d-c),f=oa(u-c),g=oa(c-d),b=oa(c-u);return c===d||c===u||i&&d===u||h>f&&g<b}function vs(a,s,l){return Math.max(s,Math.min(l,a))}function Fw(a){return vs(a,-32768,32767)}function qn(a,s,l,i=1e-6){return a>=Math.min(s,l)-i&&a<=Math.max(s,l)+i}function Rh(a,s,l){l=l||(u=>a[u]<s);let i=a.length-1,c=0,d;for(;i-c>1;)d=c+i>>1,l(d)?c=d:i=d;return{lo:c,hi:i}}const vh=(a,s,l,i)=>Rh(a,l,i?c=>{const d=a[c][s];return d<l||d===l&&a[c+1][s]===l}:c=>a[c][s]<l),Hw=(a,s,l)=>Rh(a,l,i=>a[i][s]>=l);function Yw(a,s,l){let i=0,c=a.length;for(;i<c&&a[i]<s;)i++;for(;c>i&&a[c-1]>l;)c--;return i>0||c<a.length?a.slice(i,c):a}const wy=["push","pop","shift","splice","unshift"];function Vw(a,s){if(a._chartjs){a._chartjs.listeners.push(s);return}Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),wy.forEach(l=>{const i="_onData"+Mh(l),c=a[l];Object.defineProperty(a,l,{configurable:!0,enumerable:!1,value(...d){const u=c.apply(this,d);return a._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...d)}),u}})})}function Dx(a,s){const l=a._chartjs;if(!l)return;const i=l.listeners,c=i.indexOf(s);c!==-1&&i.splice(c,1),!(i.length>0)&&(wy.forEach(d=>{delete a[d]}),delete a._chartjs)}function Cy(a){const s=new Set(a);return s.size===a.length?a:Array.from(s)}const Ay=(function(){return typeof window>"u"?function(a){return a()}:window.requestAnimationFrame})();function Ey(a,s){let l=[],i=!1;return function(...c){l=c,i||(i=!0,Ay.call(window,()=>{i=!1,a.apply(s,l)}))}}function Pw(a,s){let l;return function(...i){return s?(clearTimeout(l),l=setTimeout(a,s,i)):a.apply(this,i),s}}const Ty=a=>a==="start"?"left":a==="end"?"right":"center",Ds=(a,s,l)=>a==="start"?s:a==="end"?l:(s+l)/2,qw=(a,s,l,i)=>a===(i?"left":"right")?l:a==="center"?(s+l)/2:s,zc=a=>a===0||a===1,Mx=(a,s,l)=>-(Math.pow(2,10*(a-=1))*Math.sin((a-s)*Xt/l)),Rx=(a,s,l)=>Math.pow(2,-10*a)*Math.sin((a-s)*Xt/l)+1,tr={linear:a=>a,easeInQuad:a=>a*a,easeOutQuad:a=>-a*(a-2),easeInOutQuad:a=>(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1),easeInCubic:a=>a*a*a,easeOutCubic:a=>(a-=1)*a*a+1,easeInOutCubic:a=>(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2),easeInQuart:a=>a*a*a*a,easeOutQuart:a=>-((a-=1)*a*a*a-1),easeInOutQuart:a=>(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2),easeInQuint:a=>a*a*a*a*a,easeOutQuint:a=>(a-=1)*a*a*a*a+1,easeInOutQuint:a=>(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2),easeInSine:a=>-Math.cos(a*Kt)+1,easeOutSine:a=>Math.sin(a*Kt),easeInOutSine:a=>-.5*(Math.cos(Mt*a)-1),easeInExpo:a=>a===0?0:Math.pow(2,10*(a-1)),easeOutExpo:a=>a===1?1:-Math.pow(2,-10*a)+1,easeInOutExpo:a=>zc(a)?a:a<.5?.5*Math.pow(2,10*(a*2-1)):.5*(-Math.pow(2,-10*(a*2-1))+2),easeInCirc:a=>a>=1?a:-(Math.sqrt(1-a*a)-1),easeOutCirc:a=>Math.sqrt(1-(a-=1)*a),easeInOutCirc:a=>(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1),easeInElastic:a=>zc(a)?a:Mx(a,.075,.3),easeOutElastic:a=>zc(a)?a:Rx(a,.075,.3),easeInOutElastic(a){return zc(a)?a:a<.5?.5*Mx(a*2,.1125,.45):.5+.5*Rx(a*2-1,.1125,.45)},easeInBack(a){return a*a*((1.70158+1)*a-1.70158)},easeOutBack(a){return(a-=1)*a*((1.70158+1)*a+1.70158)+1},easeInOutBack(a){let s=1.70158;return(a/=.5)<1?.5*(a*a*(((s*=1.525)+1)*a-s)):.5*((a-=2)*a*(((s*=1.525)+1)*a+s)+2)},easeInBounce:a=>1-tr.easeOutBounce(1-a),easeOutBounce(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInOutBounce:a=>a<.5?tr.easeInBounce(a*2)*.5:tr.easeOutBounce(a*2-1)*.5+.5};function _y(a){if(a&&typeof a=="object"){const s=a.toString();return s==="[object CanvasPattern]"||s==="[object CanvasGradient]"}return!1}function $x(a){return _y(a)?a:new ir(a)}function Zu(a){return _y(a)?a:new ir(a).saturate(.5).darken(.1).hexString()}const Gw=["x","y","borderWidth","radius","tension"],Xw=["color","borderColor","backgroundColor"];function Ww(a){a.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),a.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:s=>s!=="onProgress"&&s!=="onComplete"&&s!=="fn"}),a.set("animations",{colors:{type:"color",properties:Xw},numbers:{type:"number",properties:Gw}}),a.describe("animations",{_fallback:"animation"}),a.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:s=>s|0}}}})}function Kw(a){a.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Ix=new Map;function Qw(a,s){s=s||{};const l=a+JSON.stringify(s);let i=Ix.get(l);return i||(i=new Intl.NumberFormat(a,s),Ix.set(l,i)),i}function $h(a,s,l){return Qw(s,l).format(a)}const Zw={values(a){return Zt(a)?a:""+a},numeric(a,s,l){if(a===0)return"0";const i=this.chart.options.locale;let c,d=a;if(l.length>1){const g=Math.max(Math.abs(l[0].value),Math.abs(l[l.length-1].value));(g<1e-4||g>1e15)&&(c="scientific"),d=Jw(a,l)}const u=Ny(Math.abs(d)),h=isNaN(u)?1:Math.max(Math.min(-1*Math.floor(u),20),0),f={notation:c,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(f,this.options.ticks.format),$h(a,i,f)}};function Jw(a,s){let l=s.length>3?s[2].value-s[1].value:s[1].value-s[0].value;return Math.abs(l)>=1&&a!==Math.floor(a)&&(l=a-Math.floor(a)),l}var ky={formatters:Zw};function e1(a){a.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(s,l)=>l.lineWidth,tickColor:(s,l)=>l.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ky.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),a.route("scale.ticks","color","","color"),a.route("scale.grid","color","","borderColor"),a.route("scale.border","color","","borderColor"),a.route("scale.title","color","","color"),a.describe("scale",{_fallback:!1,_scriptable:s=>!s.startsWith("before")&&!s.startsWith("after")&&s!=="callback"&&s!=="parser",_indexable:s=>s!=="borderDash"&&s!=="tickBorderDash"&&s!=="dash"}),a.describe("scales",{_fallback:"scale"}),a.describe("scale.ticks",{_scriptable:s=>s!=="backdropPadding"&&s!=="callback",_indexable:s=>s!=="backdropPadding"})}const Wn=Object.create(null),jh=Object.create(null);function sr(a,s){if(!s)return a;const l=s.split(".");for(let i=0,c=l.length;i<c;++i){const d=l[i];a=a[d]||(a[d]=Object.create(null))}return a}function Ju(a,s,l){return typeof s=="string"?rr(sr(a,s),l):rr(sr(a,""),s)}class t1{constructor(s,l){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,c)=>Zu(c.backgroundColor),this.hoverBorderColor=(i,c)=>Zu(c.borderColor),this.hoverColor=(i,c)=>Zu(c.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(s),this.apply(l)}set(s,l){return Ju(this,s,l)}get(s){return sr(this,s)}describe(s,l){return Ju(jh,s,l)}override(s,l){return Ju(Wn,s,l)}route(s,l,i,c){const d=sr(this,s),u=sr(this,i),h="_"+l;Object.defineProperties(d,{[h]:{value:d[l],writable:!0},[l]:{enumerable:!0,get(){const f=this[h],g=u[c];return mt(f)?Object.assign({},g,f):ht(f,g)},set(f){this[h]=f}}})}apply(s){s.forEach(l=>l(this))}}var Ft=new t1({_scriptable:a=>!a.startsWith("on"),_indexable:a=>a!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Ww,Kw,e1]);function s1(a){return!a||Et(a.size)||Et(a.family)?null:(a.style?a.style+" ":"")+(a.weight?a.weight+" ":"")+a.size+"px "+a.family}function Ox(a,s,l,i,c){let d=s[c];return d||(d=s[c]=a.measureText(c).width,l.push(c)),d>i&&(i=d),i}function Hn(a,s,l){const i=a.currentDevicePixelRatio,c=l!==0?Math.max(l/2,.5):0;return Math.round((s-c)*i)/i+c}function Lx(a,s){!s&&!a||(s=s||a.getContext("2d"),s.save(),s.resetTransform(),s.clearRect(0,0,a.width,a.height),s.restore())}function zx(a,s,l,i){Dy(a,s,l,i,null)}function Dy(a,s,l,i,c){let d,u,h,f,g,b,y,v;const S=s.pointStyle,N=s.rotation,E=s.radius;let A=(N||0)*$w;if(S&&typeof S=="object"&&(d=S.toString(),d==="[object HTMLImageElement]"||d==="[object HTMLCanvasElement]")){a.save(),a.translate(l,i),a.rotate(A),a.drawImage(S,-S.width/2,-S.height/2,S.width,S.height),a.restore();return}if(!(isNaN(E)||E<=0)){switch(a.beginPath(),S){default:c?a.ellipse(l,i,c/2,E,0,0,Xt):a.arc(l,i,E,0,Xt),a.closePath();break;case"triangle":b=c?c/2:E,a.moveTo(l+Math.sin(A)*b,i-Math.cos(A)*E),A+=Tx,a.lineTo(l+Math.sin(A)*b,i-Math.cos(A)*E),A+=Tx,a.lineTo(l+Math.sin(A)*b,i-Math.cos(A)*E),a.closePath();break;case"rectRounded":g=E*.516,f=E-g,u=Math.cos(A+Fn)*f,y=Math.cos(A+Fn)*(c?c/2-g:f),h=Math.sin(A+Fn)*f,v=Math.sin(A+Fn)*(c?c/2-g:f),a.arc(l-y,i-h,g,A-Mt,A-Kt),a.arc(l+v,i-u,g,A-Kt,A),a.arc(l+y,i+h,g,A,A+Kt),a.arc(l-v,i+u,g,A+Kt,A+Mt),a.closePath();break;case"rect":if(!N){f=Math.SQRT1_2*E,b=c?c/2:f,a.rect(l-b,i-f,2*b,2*f);break}A+=Fn;case"rectRot":y=Math.cos(A)*(c?c/2:E),u=Math.cos(A)*E,h=Math.sin(A)*E,v=Math.sin(A)*(c?c/2:E),a.moveTo(l-y,i-h),a.lineTo(l+v,i-u),a.lineTo(l+y,i+h),a.lineTo(l-v,i+u),a.closePath();break;case"crossRot":A+=Fn;case"cross":y=Math.cos(A)*(c?c/2:E),u=Math.cos(A)*E,h=Math.sin(A)*E,v=Math.sin(A)*(c?c/2:E),a.moveTo(l-y,i-h),a.lineTo(l+y,i+h),a.moveTo(l+v,i-u),a.lineTo(l-v,i+u);break;case"star":y=Math.cos(A)*(c?c/2:E),u=Math.cos(A)*E,h=Math.sin(A)*E,v=Math.sin(A)*(c?c/2:E),a.moveTo(l-y,i-h),a.lineTo(l+y,i+h),a.moveTo(l+v,i-u),a.lineTo(l-v,i+u),A+=Fn,y=Math.cos(A)*(c?c/2:E),u=Math.cos(A)*E,h=Math.sin(A)*E,v=Math.sin(A)*(c?c/2:E),a.moveTo(l-y,i-h),a.lineTo(l+y,i+h),a.moveTo(l+v,i-u),a.lineTo(l-v,i+u);break;case"line":u=c?c/2:Math.cos(A)*E,h=Math.sin(A)*E,a.moveTo(l-u,i-h),a.lineTo(l+u,i+h);break;case"dash":a.moveTo(l,i),a.lineTo(l+Math.cos(A)*(c?c/2:E),i+Math.sin(A)*E);break;case!1:a.closePath();break}a.fill(),s.borderWidth>0&&a.stroke()}}function My(a,s,l){return l=l||.5,!s||a&&a.x>s.left-l&&a.x<s.right+l&&a.y>s.top-l&&a.y<s.bottom+l}function Ih(a,s){a.save(),a.beginPath(),a.rect(s.left,s.top,s.right-s.left,s.bottom-s.top),a.clip()}function Oh(a){a.restore()}function a1(a,s){s.translation&&a.translate(s.translation[0],s.translation[1]),Et(s.rotation)||a.rotate(s.rotation),s.color&&(a.fillStyle=s.color),s.textAlign&&(a.textAlign=s.textAlign),s.textBaseline&&(a.textBaseline=s.textBaseline)}function n1(a,s,l,i,c){if(c.strikethrough||c.underline){const d=a.measureText(i),u=s-d.actualBoundingBoxLeft,h=s+d.actualBoundingBoxRight,f=l-d.actualBoundingBoxAscent,g=l+d.actualBoundingBoxDescent,b=c.strikethrough?(f+g)/2:g;a.strokeStyle=a.fillStyle,a.beginPath(),a.lineWidth=c.decorationWidth||2,a.moveTo(u,b),a.lineTo(h,b),a.stroke()}}function l1(a,s){const l=a.fillStyle;a.fillStyle=s.color,a.fillRect(s.left,s.top,s.width,s.height),a.fillStyle=l}function xo(a,s,l,i,c,d={}){const u=Zt(s)?s:[s],h=d.strokeWidth>0&&d.strokeColor!=="";let f,g;for(a.save(),a.font=c.string,a1(a,d),f=0;f<u.length;++f)g=u[f],d.backdrop&&l1(a,d.backdrop),h&&(d.strokeColor&&(a.strokeStyle=d.strokeColor),Et(d.strokeWidth)||(a.lineWidth=d.strokeWidth),a.strokeText(g,l,i,d.maxWidth)),a.fillText(g,l,i,d.maxWidth),n1(a,l,i,g,d),i+=Number(c.lineHeight);a.restore()}function bo(a,s){const{x:l,y:i,w:c,h:d,radius:u}=s;a.arc(l+u.topLeft,i+u.topLeft,u.topLeft,1.5*Mt,Mt,!0),a.lineTo(l,i+d-u.bottomLeft),a.arc(l+u.bottomLeft,i+d-u.bottomLeft,u.bottomLeft,Mt,Kt,!0),a.lineTo(l+c-u.bottomRight,i+d),a.arc(l+c-u.bottomRight,i+d-u.bottomRight,u.bottomRight,Kt,0,!0),a.lineTo(l+c,i+u.topRight),a.arc(l+c-u.topRight,i+u.topRight,u.topRight,0,-Kt,!0),a.lineTo(l+u.topLeft,i)}const i1=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,r1=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function c1(a,s){const l=(""+a).match(i1);if(!l||l[1]==="normal")return s*1.2;switch(a=+l[2],l[3]){case"px":return a;case"%":a/=100;break}return s*a}const o1=a=>+a||0;function Lh(a,s){const l={},i=mt(s),c=i?Object.keys(s):s,d=mt(a)?i?u=>ht(a[u],a[s[u]]):u=>a[u]:()=>a;for(const u of c)l[u]=o1(d(u));return l}function Ry(a){return Lh(a,{top:"y",right:"x",bottom:"y",left:"x"})}function Fl(a){return Lh(a,["topLeft","topRight","bottomLeft","bottomRight"])}function ea(a){const s=Ry(a);return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function js(a,s){a=a||{},s=s||Ft.font;let l=ht(a.size,s.size);typeof l=="string"&&(l=parseInt(l,10));let i=ht(a.style,s.style);i&&!(""+i).match(r1)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const c={family:ht(a.family,s.family),lineHeight:c1(ht(a.lineHeight,s.lineHeight),l),size:l,style:i,weight:ht(a.weight,s.weight),string:""};return c.string=s1(c),c}function Uc(a,s,l,i){let c,d,u;for(c=0,d=a.length;c<d;++c)if(u=a[c],u!==void 0&&u!==void 0)return u}function d1(a,s,l){const{min:i,max:c}=a,d=vy(s,(c-i)/2),u=(h,f)=>l&&h===0?0:h+f;return{min:u(i,-Math.abs(d)),max:u(c,d)}}function Xl(a,s){return Object.assign(Object.create(a),s)}function zh(a,s=[""],l,i,c=()=>a[0]){const d=l||a;typeof i>"u"&&(i=Ly("_fallback",a));const u={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:a,_rootScopes:d,_fallback:i,_getTarget:c,override:h=>zh([h,...a],s,d,i)};return new Proxy(u,{deleteProperty(h,f){return delete h[f],delete h._keys,delete a[0][f],!0},get(h,f){return Iy(h,f,()=>b1(f,s,a,h))},getOwnPropertyDescriptor(h,f){return Reflect.getOwnPropertyDescriptor(h._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(a[0])},has(h,f){return Bx(h).includes(f)},ownKeys(h){return Bx(h)},set(h,f,g){const b=h._storage||(h._storage=c());return h[f]=b[f]=g,delete h._keys,!0}})}function Vl(a,s,l,i){const c={_cacheable:!1,_proxy:a,_context:s,_subProxy:l,_stack:new Set,_descriptors:$y(a,i),setContext:d=>Vl(a,d,l,i),override:d=>Vl(a.override(d),s,l,i)};return new Proxy(c,{deleteProperty(d,u){return delete d[u],delete a[u],!0},get(d,u,h){return Iy(d,u,()=>h1(d,u,h))},getOwnPropertyDescriptor(d,u){return d._descriptors.allKeys?Reflect.has(a,u)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(a,u)},getPrototypeOf(){return Reflect.getPrototypeOf(a)},has(d,u){return Reflect.has(a,u)},ownKeys(){return Reflect.ownKeys(a)},set(d,u,h){return a[u]=h,delete d[u],!0}})}function $y(a,s={scriptable:!0,indexable:!0}){const{_scriptable:l=s.scriptable,_indexable:i=s.indexable,_allKeys:c=s.allKeys}=a;return{allKeys:c,scriptable:l,indexable:i,isScriptable:Nn(l)?l:()=>l,isIndexable:Nn(i)?i:()=>i}}const u1=(a,s)=>a?a+Mh(s):s,Uh=(a,s)=>mt(s)&&a!=="adapters"&&(Object.getPrototypeOf(s)===null||s.constructor===Object);function Iy(a,s,l){if(Object.prototype.hasOwnProperty.call(a,s)||s==="constructor")return a[s];const i=l();return a[s]=i,i}function h1(a,s,l){const{_proxy:i,_context:c,_subProxy:d,_descriptors:u}=a;let h=i[s];return Nn(h)&&u.isScriptable(s)&&(h=m1(s,h,a,l)),Zt(h)&&h.length&&(h=f1(s,h,a,u.isIndexable)),Uh(s,h)&&(h=Vl(h,c,d&&d[s],u)),h}function m1(a,s,l,i){const{_proxy:c,_context:d,_subProxy:u,_stack:h}=l;if(h.has(a))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+a);h.add(a);let f=s(d,u||i);return h.delete(a),Uh(a,f)&&(f=Bh(c._scopes,c,a,f)),f}function f1(a,s,l,i){const{_proxy:c,_context:d,_subProxy:u,_descriptors:h}=l;if(typeof d.index<"u"&&i(a))return s[d.index%s.length];if(mt(s[0])){const f=s,g=c._scopes.filter(b=>b!==f);s=[];for(const b of f){const y=Bh(g,c,a,b);s.push(Vl(y,d,u&&u[a],h))}}return s}function Oy(a,s,l){return Nn(a)?a(s,l):a}const p1=(a,s)=>a===!0?s:typeof a=="string"?Xn(s,a):void 0;function g1(a,s,l,i,c){for(const d of s){const u=p1(l,d);if(u){a.add(u);const h=Oy(u._fallback,l,c);if(typeof h<"u"&&h!==l&&h!==i)return h}else if(u===!1&&typeof i<"u"&&l!==i)return null}return!1}function Bh(a,s,l,i){const c=s._rootScopes,d=Oy(s._fallback,l,i),u=[...a,...c],h=new Set;h.add(i);let f=Ux(h,u,l,d||l,i);return f===null||typeof d<"u"&&d!==l&&(f=Ux(h,u,d,f,i),f===null)?!1:zh(Array.from(h),[""],c,d,()=>x1(s,l,i))}function Ux(a,s,l,i,c){for(;l;)l=g1(a,s,l,i,c);return l}function x1(a,s,l){const i=a._getTarget();s in i||(i[s]={});const c=i[s];return Zt(c)&&mt(l)?l:c||{}}function b1(a,s,l,i){let c;for(const d of s)if(c=Ly(u1(d,a),l),typeof c<"u")return Uh(a,c)?Bh(l,i,a,c):c}function Ly(a,s){for(const l of s){if(!l)continue;const i=l[a];if(typeof i<"u")return i}}function Bx(a){let s=a._keys;return s||(s=a._keys=y1(a._scopes)),s}function y1(a){const s=new Set;for(const l of a)for(const i of Object.keys(l).filter(c=>!c.startsWith("_")))s.add(i);return Array.from(s)}function Fh(){return typeof window<"u"&&typeof document<"u"}function Hh(a){let s=a.parentNode;return s&&s.toString()==="[object ShadowRoot]"&&(s=s.host),s}function yo(a,s,l){let i;return typeof a=="string"?(i=parseInt(a,10),a.indexOf("%")!==-1&&(i=i/100*s.parentNode[l])):i=a,i}const To=a=>a.ownerDocument.defaultView.getComputedStyle(a,null);function v1(a,s){return To(a).getPropertyValue(s)}const j1=["top","right","bottom","left"];function Gn(a,s,l){const i={};l=l?"-"+l:"";for(let c=0;c<4;c++){const d=j1[c];i[d]=parseFloat(a[s+"-"+d+l])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const N1=(a,s,l)=>(a>0||s>0)&&(!l||!l.shadowRoot);function S1(a,s){const l=a.touches,i=l&&l.length?l[0]:a,{offsetX:c,offsetY:d}=i;let u=!1,h,f;if(N1(c,d,a.target))h=c,f=d;else{const g=s.getBoundingClientRect();h=i.clientX-g.left,f=i.clientY-g.top,u=!0}return{x:h,y:f,box:u}}function Vn(a,s){if("native"in a)return a;const{canvas:l,currentDevicePixelRatio:i}=s,c=To(l),d=c.boxSizing==="border-box",u=Gn(c,"padding"),h=Gn(c,"border","width"),{x:f,y:g,box:b}=S1(a,l),y=u.left+(b&&h.left),v=u.top+(b&&h.top);let{width:S,height:N}=s;return d&&(S-=u.width+h.width,N-=u.height+h.height),{x:Math.round((f-y)/S*l.width/i),y:Math.round((g-v)/N*l.height/i)}}function w1(a,s,l){let i,c;if(s===void 0||l===void 0){const d=a&&Hh(a);if(!d)s=a.clientWidth,l=a.clientHeight;else{const u=d.getBoundingClientRect(),h=To(d),f=Gn(h,"border","width"),g=Gn(h,"padding");s=u.width-g.width-f.width,l=u.height-g.height-f.height,i=yo(h.maxWidth,d,"clientWidth"),c=yo(h.maxHeight,d,"clientHeight")}}return{width:s,height:l,maxWidth:i||fo,maxHeight:c||fo}}const gn=a=>Math.round(a*10)/10;function C1(a,s,l,i){const c=To(a),d=Gn(c,"margin"),u=yo(c.maxWidth,a,"clientWidth")||fo,h=yo(c.maxHeight,a,"clientHeight")||fo,f=w1(a,s,l);let{width:g,height:b}=f;if(c.boxSizing==="content-box"){const v=Gn(c,"border","width"),S=Gn(c,"padding");g-=S.width+v.width,b-=S.height+v.height}return g=Math.max(0,g-d.width),b=Math.max(0,i?g/i:b-d.height),g=gn(Math.min(g,u,f.maxWidth)),b=gn(Math.min(b,h,f.maxHeight)),g&&!b&&(b=gn(g/2)),(s!==void 0||l!==void 0)&&i&&f.height&&b>f.height&&(b=f.height,g=gn(Math.floor(b*i))),{width:g,height:b}}function Fx(a,s,l){const i=s||1,c=gn(a.height*i),d=gn(a.width*i);a.height=gn(a.height),a.width=gn(a.width);const u=a.canvas;return u.style&&(l||!u.style.height&&!u.style.width)&&(u.style.height=`${a.height}px`,u.style.width=`${a.width}px`),a.currentDevicePixelRatio!==i||u.height!==c||u.width!==d?(a.currentDevicePixelRatio=i,u.height=c,u.width=d,a.ctx.setTransform(i,0,0,i,0,0),!0):!1}const A1=(function(){let a=!1;try{const s={get passive(){return a=!0,!1}};Fh()&&(window.addEventListener("test",null,s),window.removeEventListener("test",null,s))}catch{}return a})();function Hx(a,s){const l=v1(a,s),i=l&&l.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const E1=function(a,s){return{x(l){return a+a+s-l},setWidth(l){s=l},textAlign(l){return l==="center"?l:l==="right"?"left":"right"},xPlus(l,i){return l-i},leftForLtr(l,i){return l-i}}},T1=function(){return{x(a){return a},setWidth(a){},textAlign(a){return a},xPlus(a,s){return a+s},leftForLtr(a,s){return a}}};function Hl(a,s,l){return a?E1(s,l):T1()}function zy(a,s){let l,i;(s==="ltr"||s==="rtl")&&(l=a.canvas.style,i=[l.getPropertyValue("direction"),l.getPropertyPriority("direction")],l.setProperty("direction",s,"important"),a.prevTextDirection=i)}function Uy(a,s){s!==void 0&&(delete a.prevTextDirection,a.canvas.style.setProperty("direction",s[0],s[1]))}function Bc(a,s,l){return a.options.clip?a[l]:s[l]}function _1(a,s){const{xScale:l,yScale:i}=a;return l&&i?{left:Bc(l,s,"left"),right:Bc(l,s,"right"),top:Bc(i,s,"top"),bottom:Bc(i,s,"bottom")}:s}function k1(a,s){const l=s._clip;if(l.disabled)return!1;const i=_1(s,a.chartArea);return{left:l.left===!1?0:i.left-(l.left===!0?0:l.left),right:l.right===!1?a.width:i.right+(l.right===!0?0:l.right),top:l.top===!1?0:i.top-(l.top===!0?0:l.top),bottom:l.bottom===!1?a.height:i.bottom+(l.bottom===!0?0:l.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class D1{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(s,l,i,c){const d=l.listeners[c],u=l.duration;d.forEach(h=>h({chart:s,initial:l.initial,numSteps:u,currentStep:Math.min(i-l.start,u)}))}_refresh(){this._request||(this._running=!0,this._request=Ay.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(s=Date.now()){let l=0;this._charts.forEach((i,c)=>{if(!i.running||!i.items.length)return;const d=i.items;let u=d.length-1,h=!1,f;for(;u>=0;--u)f=d[u],f._active?(f._total>i.duration&&(i.duration=f._total),f.tick(s),h=!0):(d[u]=d[d.length-1],d.pop());h&&(c.draw(),this._notify(c,i,s,"progress")),d.length||(i.running=!1,this._notify(c,i,s,"complete"),i.initial=!1),l+=d.length}),this._lastDate=s,l===0&&(this._running=!1)}_getAnims(s){const l=this._charts;let i=l.get(s);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},l.set(s,i)),i}listen(s,l,i){this._getAnims(s).listeners[l].push(i)}add(s,l){!l||!l.length||this._getAnims(s).items.push(...l)}has(s){return this._getAnims(s).items.length>0}start(s){const l=this._charts.get(s);l&&(l.running=!0,l.start=Date.now(),l.duration=l.items.reduce((i,c)=>Math.max(i,c._duration),0),this._refresh())}running(s){if(!this._running)return!1;const l=this._charts.get(s);return!(!l||!l.running||!l.items.length)}stop(s){const l=this._charts.get(s);if(!l||!l.items.length)return;const i=l.items;let c=i.length-1;for(;c>=0;--c)i[c].cancel();l.items=[],this._notify(s,l,Date.now(),"complete")}remove(s){return this._charts.delete(s)}}var $a=new D1;const Yx="transparent",M1={boolean(a,s,l){return l>.5?s:a},color(a,s,l){const i=$x(a||Yx),c=i.valid&&$x(s||Yx);return c&&c.valid?c.mix(i,l).hexString():s},number(a,s,l){return a+(s-a)*l}};class R1{constructor(s,l,i,c){const d=l[i];c=Uc([s.to,c,d,s.from]);const u=Uc([s.from,d,c]);this._active=!0,this._fn=s.fn||M1[s.type||typeof u],this._easing=tr[s.easing]||tr.linear,this._start=Math.floor(Date.now()+(s.delay||0)),this._duration=this._total=Math.floor(s.duration),this._loop=!!s.loop,this._target=l,this._prop=i,this._from=u,this._to=c,this._promises=void 0}active(){return this._active}update(s,l,i){if(this._active){this._notify(!1);const c=this._target[this._prop],d=i-this._start,u=this._duration-d;this._start=i,this._duration=Math.floor(Math.max(u,s.duration)),this._total+=d,this._loop=!!s.loop,this._to=Uc([s.to,l,c,s.from]),this._from=Uc([s.from,c,l])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(s){const l=s-this._start,i=this._duration,c=this._prop,d=this._from,u=this._loop,h=this._to;let f;if(this._active=d!==h&&(u||l<i),!this._active){this._target[c]=h,this._notify(!0);return}if(l<0){this._target[c]=d;return}f=l/i%2,f=u&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[c]=this._fn(d,h,f)}wait(){const s=this._promises||(this._promises=[]);return new Promise((l,i)=>{s.push({res:l,rej:i})})}_notify(s){const l=s?"res":"rej",i=this._promises||[];for(let c=0;c<i.length;c++)i[c][l]()}}class By{constructor(s,l){this._chart=s,this._properties=new Map,this.configure(l)}configure(s){if(!mt(s))return;const l=Object.keys(Ft.animation),i=this._properties;Object.getOwnPropertyNames(s).forEach(c=>{const d=s[c];if(!mt(d))return;const u={};for(const h of l)u[h]=d[h];(Zt(d.properties)&&d.properties||[c]).forEach(h=>{(h===c||!i.has(h))&&i.set(h,u)})})}_animateOptions(s,l){const i=l.options,c=I1(s,i);if(!c)return[];const d=this._createAnimations(c,i);return i.$shared&&$1(s.options.$animations,i).then(()=>{s.options=i},()=>{}),d}_createAnimations(s,l){const i=this._properties,c=[],d=s.$animations||(s.$animations={}),u=Object.keys(l),h=Date.now();let f;for(f=u.length-1;f>=0;--f){const g=u[f];if(g.charAt(0)==="$")continue;if(g==="options"){c.push(...this._animateOptions(s,l));continue}const b=l[g];let y=d[g];const v=i.get(g);if(y)if(v&&y.active()){y.update(v,b,h);continue}else y.cancel();if(!v||!v.duration){s[g]=b;continue}d[g]=y=new R1(v,s,g,b),c.push(y)}return c}update(s,l){if(this._properties.size===0){Object.assign(s,l);return}const i=this._createAnimations(s,l);if(i.length)return $a.add(this._chart,i),!0}}function $1(a,s){const l=[],i=Object.keys(s);for(let c=0;c<i.length;c++){const d=a[i[c]];d&&d.active()&&l.push(d.wait())}return Promise.all(l)}function I1(a,s){if(!s)return;let l=a.options;if(!l){a.options=s;return}return l.$shared&&(a.options=l=Object.assign({},l,{$shared:!1,$animations:{}})),l}function Vx(a,s){const l=a&&a.options||{},i=l.reverse,c=l.min===void 0?s:0,d=l.max===void 0?s:0;return{start:i?d:c,end:i?c:d}}function O1(a,s,l){if(l===!1)return!1;const i=Vx(a,l),c=Vx(s,l);return{top:c.end,right:i.end,bottom:c.start,left:i.start}}function L1(a){let s,l,i,c;return mt(a)?(s=a.top,l=a.right,i=a.bottom,c=a.left):s=l=i=c=a,{top:s,right:l,bottom:i,left:c,disabled:a===!1}}function Fy(a,s){const l=[],i=a._getSortedDatasetMetas(s);let c,d;for(c=0,d=i.length;c<d;++c)l.push(i[c].index);return l}function Px(a,s,l,i={}){const c=a.keys,d=i.mode==="single";let u,h,f,g;if(s===null)return;let b=!1;for(u=0,h=c.length;u<h;++u){if(f=+c[u],f===l){if(b=!0,i.all)continue;break}g=a.values[f],Gs(g)&&(d||s===0||jn(s)===jn(g))&&(s+=g)}return!b&&!i.all?0:s}function z1(a,s){const{iScale:l,vScale:i}=s,c=l.axis==="x"?"x":"y",d=i.axis==="x"?"x":"y",u=Object.keys(a),h=new Array(u.length);let f,g,b;for(f=0,g=u.length;f<g;++f)b=u[f],h[f]={[c]:b,[d]:a[b]};return h}function eh(a,s){const l=a&&a.options.stacked;return l||l===void 0&&s.stack!==void 0}function U1(a,s,l){return`${a.id}.${s.id}.${l.stack||l.type}`}function B1(a){const{min:s,max:l,minDefined:i,maxDefined:c}=a.getUserBounds();return{min:i?s:Number.NEGATIVE_INFINITY,max:c?l:Number.POSITIVE_INFINITY}}function F1(a,s,l){const i=a[s]||(a[s]={});return i[l]||(i[l]={})}function qx(a,s,l,i){for(const c of s.getMatchingVisibleMetas(i).reverse()){const d=a[c.index];if(l&&d>0||!l&&d<0)return c.index}return null}function Gx(a,s){const{chart:l,_cachedMeta:i}=a,c=l._stacks||(l._stacks={}),{iScale:d,vScale:u,index:h}=i,f=d.axis,g=u.axis,b=U1(d,u,i),y=s.length;let v;for(let S=0;S<y;++S){const N=s[S],{[f]:E,[g]:A}=N,T=N._stacks||(N._stacks={});v=T[g]=F1(c,b,E),v[h]=A,v._top=qx(v,u,!0,i.type),v._bottom=qx(v,u,!1,i.type);const $=v._visualValues||(v._visualValues={});$[h]=A}}function th(a,s){const l=a.scales;return Object.keys(l).filter(i=>l[i].axis===s).shift()}function H1(a,s){return Xl(a,{active:!1,dataset:void 0,datasetIndex:s,index:s,mode:"default",type:"dataset"})}function Y1(a,s,l){return Xl(a,{active:!1,dataIndex:s,parsed:void 0,raw:void 0,element:l,index:s,mode:"default",type:"data"})}function Yi(a,s){const l=a.controller.index,i=a.vScale&&a.vScale.axis;if(i){s=s||a._parsed;for(const c of s){const d=c._stacks;if(!d||d[i]===void 0||d[i][l]===void 0)return;delete d[i][l],d[i]._visualValues!==void 0&&d[i]._visualValues[l]!==void 0&&delete d[i]._visualValues[l]}}}const sh=a=>a==="reset"||a==="none",Xx=(a,s)=>s?a:Object.assign({},a),V1=(a,s,l)=>a&&!s.hidden&&s._stacked&&{keys:Fy(l,!0),values:null};class Yh{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(s,l){this.chart=s,this._ctx=s.ctx,this.index=l,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const s=this._cachedMeta;this.configure(),this.linkScales(),s._stacked=eh(s.vScale,s),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(s){this.index!==s&&Yi(this._cachedMeta),this.index=s}linkScales(){const s=this.chart,l=this._cachedMeta,i=this.getDataset(),c=(y,v,S,N)=>y==="x"?v:y==="r"?N:S,d=l.xAxisID=ht(i.xAxisID,th(s,"x")),u=l.yAxisID=ht(i.yAxisID,th(s,"y")),h=l.rAxisID=ht(i.rAxisID,th(s,"r")),f=l.indexAxis,g=l.iAxisID=c(f,d,u,h),b=l.vAxisID=c(f,u,d,h);l.xScale=this.getScaleForId(d),l.yScale=this.getScaleForId(u),l.rScale=this.getScaleForId(h),l.iScale=this.getScaleForId(g),l.vScale=this.getScaleForId(b)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(s){return this.chart.scales[s]}_getOtherScale(s){const l=this._cachedMeta;return s===l.iScale?l.vScale:l.iScale}reset(){this._update("reset")}_destroy(){const s=this._cachedMeta;this._data&&Dx(this._data,this),s._stacked&&Yi(s)}_dataCheck(){const s=this.getDataset(),l=s.data||(s.data=[]),i=this._data;if(mt(l)){const c=this._cachedMeta;this._data=z1(l,c)}else if(i!==l){if(i){Dx(i,this);const c=this._cachedMeta;Yi(c),c._parsed=[]}l&&Object.isExtensible(l)&&Vw(l,this),this._syncList=[],this._data=l}}addElements(){const s=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(s.dataset=new this.datasetElementType)}buildOrUpdateElements(s){const l=this._cachedMeta,i=this.getDataset();let c=!1;this._dataCheck();const d=l._stacked;l._stacked=eh(l.vScale,l),l.stack!==i.stack&&(c=!0,Yi(l),l.stack=i.stack),this._resyncElements(s),(c||d!==l._stacked)&&(Gx(this,l._parsed),l._stacked=eh(l.vScale,l))}configure(){const s=this.chart.config,l=s.datasetScopeKeys(this._type),i=s.getOptionScopes(this.getDataset(),l,!0);this.options=s.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(s,l){const{_cachedMeta:i,_data:c}=this,{iScale:d,_stacked:u}=i,h=d.axis;let f=s===0&&l===c.length?!0:i._sorted,g=s>0&&i._parsed[s-1],b,y,v;if(this._parsing===!1)i._parsed=c,i._sorted=!0,v=c;else{Zt(c[s])?v=this.parseArrayData(i,c,s,l):mt(c[s])?v=this.parseObjectData(i,c,s,l):v=this.parsePrimitiveData(i,c,s,l);const S=()=>y[h]===null||g&&y[h]<g[h];for(b=0;b<l;++b)i._parsed[b+s]=y=v[b],f&&(S()&&(f=!1),g=y);i._sorted=f}u&&Gx(this,v)}parsePrimitiveData(s,l,i,c){const{iScale:d,vScale:u}=s,h=d.axis,f=u.axis,g=d.getLabels(),b=d===u,y=new Array(c);let v,S,N;for(v=0,S=c;v<S;++v)N=v+i,y[v]={[h]:b||d.parse(g[N],N),[f]:u.parse(l[N],N)};return y}parseArrayData(s,l,i,c){const{xScale:d,yScale:u}=s,h=new Array(c);let f,g,b,y;for(f=0,g=c;f<g;++f)b=f+i,y=l[b],h[f]={x:d.parse(y[0],b),y:u.parse(y[1],b)};return h}parseObjectData(s,l,i,c){const{xScale:d,yScale:u}=s,{xAxisKey:h="x",yAxisKey:f="y"}=this._parsing,g=new Array(c);let b,y,v,S;for(b=0,y=c;b<y;++b)v=b+i,S=l[v],g[b]={x:d.parse(Xn(S,h),v),y:u.parse(Xn(S,f),v)};return g}getParsed(s){return this._cachedMeta._parsed[s]}getDataElement(s){return this._cachedMeta.data[s]}applyStack(s,l,i){const c=this.chart,d=this._cachedMeta,u=l[s.axis],h={keys:Fy(c,!0),values:l._stacks[s.axis]._visualValues};return Px(h,u,d.index,{mode:i})}updateRangeFromParsed(s,l,i,c){const d=i[l.axis];let u=d===null?NaN:d;const h=c&&i._stacks[l.axis];c&&h&&(c.values=h,u=Px(c,d,this._cachedMeta.index)),s.min=Math.min(s.min,u),s.max=Math.max(s.max,u)}getMinMax(s,l){const i=this._cachedMeta,c=i._parsed,d=i._sorted&&s===i.iScale,u=c.length,h=this._getOtherScale(s),f=V1(l,i,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:b,max:y}=B1(h);let v,S;function N(){S=c[v];const E=S[h.axis];return!Gs(S[s.axis])||b>E||y<E}for(v=0;v<u&&!(!N()&&(this.updateRangeFromParsed(g,s,S,f),d));++v);if(d){for(v=u-1;v>=0;--v)if(!N()){this.updateRangeFromParsed(g,s,S,f);break}}return g}getAllParsedValues(s){const l=this._cachedMeta._parsed,i=[];let c,d,u;for(c=0,d=l.length;c<d;++c)u=l[c][s.axis],Gs(u)&&i.push(u);return i}getMaxOverflow(){return!1}getLabelAndValue(s){const l=this._cachedMeta,i=l.iScale,c=l.vScale,d=this.getParsed(s);return{label:i?""+i.getLabelForValue(d[i.axis]):"",value:c?""+c.getLabelForValue(d[c.axis]):""}}_update(s){const l=this._cachedMeta;this.update(s||"default"),l._clip=L1(ht(this.options.clip,O1(l.xScale,l.yScale,this.getMaxOverflow())))}update(s){}draw(){const s=this._ctx,l=this.chart,i=this._cachedMeta,c=i.data||[],d=l.chartArea,u=[],h=this._drawStart||0,f=this._drawCount||c.length-h,g=this.options.drawActiveElementsOnTop;let b;for(i.dataset&&i.dataset.draw(s,d,h,f),b=h;b<h+f;++b){const y=c[b];y.hidden||(y.active&&g?u.push(y):y.draw(s,d))}for(b=0;b<u.length;++b)u[b].draw(s,d)}getStyle(s,l){const i=l?"active":"default";return s===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(s||0,i)}getContext(s,l,i){const c=this.getDataset();let d;if(s>=0&&s<this._cachedMeta.data.length){const u=this._cachedMeta.data[s];d=u.$context||(u.$context=Y1(this.getContext(),s,u)),d.parsed=this.getParsed(s),d.raw=c.data[s],d.index=d.dataIndex=s}else d=this.$context||(this.$context=H1(this.chart.getContext(),this.index)),d.dataset=c,d.index=d.datasetIndex=this.index;return d.active=!!l,d.mode=i,d}resolveDatasetElementOptions(s){return this._resolveElementOptions(this.datasetElementType.id,s)}resolveDataElementOptions(s,l){return this._resolveElementOptions(this.dataElementType.id,l,s)}_resolveElementOptions(s,l="default",i){const c=l==="active",d=this._cachedDataOpts,u=s+"-"+l,h=d[u],f=this.enableOptionSharing&&cr(i);if(h)return Xx(h,f);const g=this.chart.config,b=g.datasetElementScopeKeys(this._type,s),y=c?[`${s}Hover`,"hover",s,""]:[s,""],v=g.getOptionScopes(this.getDataset(),b),S=Object.keys(Ft.elements[s]),N=()=>this.getContext(i,c,l),E=g.resolveNamedOptions(v,S,N,y);return E.$shared&&(E.$shared=f,d[u]=Object.freeze(Xx(E,f))),E}_resolveAnimations(s,l,i){const c=this.chart,d=this._cachedDataOpts,u=`animation-${l}`,h=d[u];if(h)return h;let f;if(c.options.animation!==!1){const b=this.chart.config,y=b.datasetAnimationScopeKeys(this._type,l),v=b.getOptionScopes(this.getDataset(),y);f=b.createResolver(v,this.getContext(s,i,l))}const g=new By(c,f&&f.animations);return f&&f._cacheable&&(d[u]=Object.freeze(g)),g}getSharedOptions(s){if(s.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},s))}includeOptions(s,l){return!l||sh(s)||this.chart._animationsDisabled}_getSharedOptions(s,l){const i=this.resolveDataElementOptions(s,l),c=this._sharedOptions,d=this.getSharedOptions(i),u=this.includeOptions(l,d)||d!==c;return this.updateSharedOptions(d,l,i),{sharedOptions:d,includeOptions:u}}updateElement(s,l,i,c){sh(c)?Object.assign(s,i):this._resolveAnimations(l,c).update(s,i)}updateSharedOptions(s,l,i){s&&!sh(l)&&this._resolveAnimations(void 0,l).update(s,i)}_setStyle(s,l,i,c){s.active=c;const d=this.getStyle(l,c);this._resolveAnimations(l,i,c).update(s,{options:!c&&this.getSharedOptions(d)||d})}removeHoverStyle(s,l,i){this._setStyle(s,i,"active",!1)}setHoverStyle(s,l,i){this._setStyle(s,i,"active",!0)}_removeDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!1)}_setDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!0)}_resyncElements(s){const l=this._data,i=this._cachedMeta.data;for(const[h,f,g]of this._syncList)this[h](f,g);this._syncList=[];const c=i.length,d=l.length,u=Math.min(d,c);u&&this.parse(0,u),d>c?this._insertElements(c,d-c,s):d<c&&this._removeElements(d,c-d)}_insertElements(s,l,i=!0){const c=this._cachedMeta,d=c.data,u=s+l;let h;const f=g=>{for(g.length+=l,h=g.length-1;h>=u;h--)g[h]=g[h-l]};for(f(d),h=s;h<u;++h)d[h]=new this.dataElementType;this._parsing&&f(c._parsed),this.parse(s,l),i&&this.updateElements(d,s,l,"reset")}updateElements(s,l,i,c){}_removeElements(s,l){const i=this._cachedMeta;if(this._parsing){const c=i._parsed.splice(s,l);i._stacked&&Yi(i,c)}i.data.splice(s,l)}_sync(s){if(this._parsing)this._syncList.push(s);else{const[l,i,c]=s;this[l](i,c)}this.chart._dataChanges.push([this.index,...s])}_onDataPush(){const s=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-s,s])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(s,l){l&&this._sync(["_removeElements",s,l]);const i=arguments.length-2;i&&this._sync(["_insertElements",s,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function P1(a,s){if(!a._cache.$bar){const l=a.getMatchingVisibleMetas(s);let i=[];for(let c=0,d=l.length;c<d;c++)i=i.concat(l[c].controller.getAllParsedValues(a));a._cache.$bar=Cy(i.sort((c,d)=>c-d))}return a._cache.$bar}function q1(a){const s=a.iScale,l=P1(s,a.type);let i=s._length,c,d,u,h;const f=()=>{u===32767||u===-32768||(cr(h)&&(i=Math.min(i,Math.abs(u-h)||i)),h=u)};for(c=0,d=l.length;c<d;++c)u=s.getPixelForValue(l[c]),f();for(h=void 0,c=0,d=s.ticks.length;c<d;++c)u=s.getPixelForTick(c),f();return i}function G1(a,s,l,i){const c=l.barThickness;let d,u;return Et(c)?(d=s.min*l.categoryPercentage,u=l.barPercentage):(d=c*i,u=1),{chunk:d/i,ratio:u,start:s.pixels[a]-d/2}}function X1(a,s,l,i){const c=s.pixels,d=c[a];let u=a>0?c[a-1]:null,h=a<c.length-1?c[a+1]:null;const f=l.categoryPercentage;u===null&&(u=d-(h===null?s.end-s.start:h-d)),h===null&&(h=d+d-u);const g=d-(d-Math.min(u,h))/2*f;return{chunk:Math.abs(h-u)/2*f/i,ratio:l.barPercentage,start:g}}function W1(a,s,l,i){const c=l.parse(a[0],i),d=l.parse(a[1],i),u=Math.min(c,d),h=Math.max(c,d);let f=u,g=h;Math.abs(u)>Math.abs(h)&&(f=h,g=u),s[l.axis]=g,s._custom={barStart:f,barEnd:g,start:c,end:d,min:u,max:h}}function Hy(a,s,l,i){return Zt(a)?W1(a,s,l,i):s[l.axis]=l.parse(a,i),s}function Wx(a,s,l,i){const c=a.iScale,d=a.vScale,u=c.getLabels(),h=c===d,f=[];let g,b,y,v;for(g=l,b=l+i;g<b;++g)v=s[g],y={},y[c.axis]=h||c.parse(u[g],g),f.push(Hy(v,y,d,g));return f}function ah(a){return a&&a.barStart!==void 0&&a.barEnd!==void 0}function K1(a,s,l){return a!==0?jn(a):(s.isHorizontal()?1:-1)*(s.min>=l?1:-1)}function Q1(a){let s,l,i,c,d;return a.horizontal?(s=a.base>a.x,l="left",i="right"):(s=a.base<a.y,l="bottom",i="top"),s?(c="end",d="start"):(c="start",d="end"),{start:l,end:i,reverse:s,top:c,bottom:d}}function Z1(a,s,l,i){let c=s.borderSkipped;const d={};if(!c){a.borderSkipped=d;return}if(c===!0){a.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:u,end:h,reverse:f,top:g,bottom:b}=Q1(a);c==="middle"&&l&&(a.enableBorderRadius=!0,(l._top||0)===i?c=g:(l._bottom||0)===i?c=b:(d[Kx(b,u,h,f)]=!0,c=g)),d[Kx(c,u,h,f)]=!0,a.borderSkipped=d}function Kx(a,s,l,i){return i?(a=J1(a,s,l),a=Qx(a,l,s)):a=Qx(a,s,l),a}function J1(a,s,l){return a===s?l:a===l?s:a}function Qx(a,s,l){return a==="start"?s:a==="end"?l:a}function eC(a,{inflateAmount:s},l){a.inflateAmount=s==="auto"?l===1?.33:0:s}class tC extends Yh{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(s,l,i,c){return Wx(s,l,i,c)}parseArrayData(s,l,i,c){return Wx(s,l,i,c)}parseObjectData(s,l,i,c){const{iScale:d,vScale:u}=s,{xAxisKey:h="x",yAxisKey:f="y"}=this._parsing,g=d.axis==="x"?h:f,b=u.axis==="x"?h:f,y=[];let v,S,N,E;for(v=i,S=i+c;v<S;++v)E=l[v],N={},N[d.axis]=d.parse(Xn(E,g),v),y.push(Hy(Xn(E,b),N,u,v));return y}updateRangeFromParsed(s,l,i,c){super.updateRangeFromParsed(s,l,i,c);const d=i._custom;d&&l===this._cachedMeta.vScale&&(s.min=Math.min(s.min,d.min),s.max=Math.max(s.max,d.max))}getMaxOverflow(){return 0}getLabelAndValue(s){const l=this._cachedMeta,{iScale:i,vScale:c}=l,d=this.getParsed(s),u=d._custom,h=ah(u)?"["+u.start+", "+u.end+"]":""+c.getLabelForValue(d[c.axis]);return{label:""+i.getLabelForValue(d[i.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const s=this._cachedMeta;s.stack=this.getDataset().stack}update(s){const l=this._cachedMeta;this.updateElements(l.data,0,l.data.length,s)}updateElements(s,l,i,c){const d=c==="reset",{index:u,_cachedMeta:{vScale:h}}=this,f=h.getBasePixel(),g=h.isHorizontal(),b=this._getRuler(),{sharedOptions:y,includeOptions:v}=this._getSharedOptions(l,c);for(let S=l;S<l+i;S++){const N=this.getParsed(S),E=d||Et(N[h.axis])?{base:f,head:f}:this._calculateBarValuePixels(S),A=this._calculateBarIndexPixels(S,b),T=(N._stacks||{})[h.axis],$={horizontal:g,base:E.base,enableBorderRadius:!T||ah(N._custom)||u===T._top||u===T._bottom,x:g?E.head:A.center,y:g?A.center:E.head,height:g?A.size:Math.abs(E.size),width:g?Math.abs(E.size):A.size};v&&($.options=y||this.resolveDataElementOptions(S,s[S].active?"active":c));const D=$.options||s[S].options;Z1($,D,T,u),eC($,D,b.ratio),this.updateElement(s[S],S,$,c)}}_getStacks(s,l){const{iScale:i}=this._cachedMeta,c=i.getMatchingVisibleMetas(this._type).filter(b=>b.controller.options.grouped),d=i.options.stacked,u=[],h=this._cachedMeta.controller.getParsed(l),f=h&&h[i.axis],g=b=>{const y=b._parsed.find(S=>S[i.axis]===f),v=y&&y[b.vScale.axis];if(Et(v)||isNaN(v))return!0};for(const b of c)if(!(l!==void 0&&g(b))&&((d===!1||u.indexOf(b.stack)===-1||d===void 0&&b.stack===void 0)&&u.push(b.stack),b.index===s))break;return u.length||u.push(void 0),u}_getStackCount(s){return this._getStacks(void 0,s).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const s=this.chart.scales,l=this.chart.options.indexAxis;return Object.keys(s).filter(i=>s[i].axis===l).shift()}_getAxis(){const s={},l=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)s[ht(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,l)]=!0;return Object.keys(s)}_getStackIndex(s,l,i){const c=this._getStacks(s,i),d=l!==void 0?c.indexOf(l):-1;return d===-1?c.length-1:d}_getRuler(){const s=this.options,l=this._cachedMeta,i=l.iScale,c=[];let d,u;for(d=0,u=l.data.length;d<u;++d)c.push(i.getPixelForValue(this.getParsed(d)[i.axis],d));const h=s.barThickness;return{min:h||q1(l),pixels:c,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:s.grouped,ratio:h?1:s.categoryPercentage*s.barPercentage}}_calculateBarValuePixels(s){const{_cachedMeta:{vScale:l,_stacked:i,index:c},options:{base:d,minBarLength:u}}=this,h=d||0,f=this.getParsed(s),g=f._custom,b=ah(g);let y=f[l.axis],v=0,S=i?this.applyStack(l,f,i):y,N,E;S!==y&&(v=S-y,S=y),b&&(y=g.barStart,S=g.barEnd-g.barStart,y!==0&&jn(y)!==jn(g.barEnd)&&(v=0),v+=y);const A=!Et(d)&&!b?d:v;let T=l.getPixelForValue(A);if(this.chart.getDataVisibility(s)?N=l.getPixelForValue(v+S):N=T,E=N-T,Math.abs(E)<u){E=K1(E,l,h)*u,y===h&&(T-=E/2);const $=l.getPixelForDecimal(0),D=l.getPixelForDecimal(1),I=Math.min($,D),G=Math.max($,D);T=Math.max(Math.min(T,G),I),N=T+E,i&&!b&&(f._stacks[l.axis]._visualValues[c]=l.getValueForPixel(N)-l.getValueForPixel(T))}if(T===l.getPixelForValue(h)){const $=jn(E)*l.getLineWidthForValue(h)/2;T+=$,E-=$}return{size:E,base:T,head:N,center:N+E/2}}_calculateBarIndexPixels(s,l){const i=l.scale,c=this.options,d=c.skipNull,u=ht(c.maxBarThickness,1/0);let h,f;const g=this._getAxisCount();if(l.grouped){const b=d?this._getStackCount(s):l.stackCount,y=c.barThickness==="flex"?X1(s,l,c,b*g):G1(s,l,c,b*g),v=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,S=this._getAxis().indexOf(ht(v,this.getFirstScaleIdForIndexAxis())),N=this._getStackIndex(this.index,this._cachedMeta.stack,d?s:void 0)+S;h=y.start+y.chunk*N+y.chunk/2,f=Math.min(u,y.chunk*y.ratio)}else h=i.getPixelForValue(this.getParsed(s)[i.axis],s),f=Math.min(u,l.min*l.ratio);return{base:h-f/2,head:h+f/2,center:h,size:f}}draw(){const s=this._cachedMeta,l=s.vScale,i=s.data,c=i.length;let d=0;for(;d<c;++d)this.getParsed(d)[l.axis]!==null&&!i[d].hidden&&i[d].draw(this._ctx)}}function sC(a,s,l){let i=1,c=1,d=0,u=0;if(s<Xt){const h=a,f=h+s,g=Math.cos(h),b=Math.sin(h),y=Math.cos(f),v=Math.sin(f),S=(D,I,G)=>go(D,h,f,!0)?1:Math.max(I,I*l,G,G*l),N=(D,I,G)=>go(D,h,f,!0)?-1:Math.min(I,I*l,G,G*l),E=S(0,g,y),A=S(Kt,b,v),T=N(Mt,g,y),$=N(Mt+Kt,b,v);i=(E-T)/2,c=(A-$)/2,d=-(E+T)/2,u=-(A+$)/2}return{ratioX:i,ratioY:c,offsetX:d,offsetY:u}}class aC extends Yh{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:s=>s!=="spacing",_indexable:s=>s!=="spacing"&&!s.startsWith("borderDash")&&!s.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(s){const l=s.data,{labels:{pointStyle:i,textAlign:c,color:d,useBorderRadius:u,borderRadius:h}}=s.legend.options;return l.labels.length&&l.datasets.length?l.labels.map((f,g)=>{const y=s.getDatasetMeta(0).controller.getStyle(g);return{text:f,fillStyle:y.backgroundColor,fontColor:d,hidden:!s.getDataVisibility(g),lineDash:y.borderDash,lineDashOffset:y.borderDashOffset,lineJoin:y.borderJoinStyle,lineWidth:y.borderWidth,strokeStyle:y.borderColor,textAlign:c,pointStyle:i,borderRadius:u&&(h||y.borderRadius),index:g}}):[]}},onClick(s,l,i){i.chart.toggleDataVisibility(l.index),i.chart.update()}}}};constructor(s,l){super(s,l),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(s,l){const i=this.getDataset().data,c=this._cachedMeta;if(this._parsing===!1)c._parsed=i;else{let d=f=>+i[f];if(mt(i[s])){const{key:f="value"}=this._parsing;d=g=>+Xn(i[g],f)}let u,h;for(u=s,h=s+l;u<h;++u)c._parsed[u]=d(u)}}_getRotation(){return Ua(this.options.rotation-90)}_getCircumference(){return Ua(this.options.circumference)}_getRotationExtents(){let s=Xt,l=-Xt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const c=this.chart.getDatasetMeta(i).controller,d=c._getRotation(),u=c._getCircumference();s=Math.min(s,d),l=Math.max(l,d+u)}return{rotation:s,circumference:l-s}}update(s){const l=this.chart,{chartArea:i}=l,c=this._cachedMeta,d=c.data,u=this.getMaxBorderWidth()+this.getMaxOffset(d)+this.options.spacing,h=Math.max((Math.min(i.width,i.height)-u)/2,0),f=Math.min(Tw(this.options.cutout,h),1),g=this._getRingWeight(this.index),{circumference:b,rotation:y}=this._getRotationExtents(),{ratioX:v,ratioY:S,offsetX:N,offsetY:E}=sC(y,b,f),A=(i.width-u)/v,T=(i.height-u)/S,$=Math.max(Math.min(A,T)/2,0),D=vy(this.options.radius,$),I=Math.max(D*f,0),G=(D-I)/this._getVisibleDatasetWeightTotal();this.offsetX=N*D,this.offsetY=E*D,c.total=this.calculateTotal(),this.outerRadius=D-G*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-G*g,0),this.updateElements(d,0,d.length,s)}_circumference(s,l){const i=this.options,c=this._cachedMeta,d=this._getCircumference();return l&&i.animation.animateRotate||!this.chart.getDataVisibility(s)||c._parsed[s]===null||c.data[s].hidden?0:this.calculateCircumference(c._parsed[s]*d/Xt)}updateElements(s,l,i,c){const d=c==="reset",u=this.chart,h=u.chartArea,g=u.options.animation,b=(h.left+h.right)/2,y=(h.top+h.bottom)/2,v=d&&g.animateScale,S=v?0:this.innerRadius,N=v?0:this.outerRadius,{sharedOptions:E,includeOptions:A}=this._getSharedOptions(l,c);let T=this._getRotation(),$;for($=0;$<l;++$)T+=this._circumference($,d);for($=l;$<l+i;++$){const D=this._circumference($,d),I=s[$],G={x:b+this.offsetX,y:y+this.offsetY,startAngle:T,endAngle:T+D,circumference:D,outerRadius:N,innerRadius:S};A&&(G.options=E||this.resolveDataElementOptions($,I.active?"active":c)),T+=D,this.updateElement(I,$,G,c)}}calculateTotal(){const s=this._cachedMeta,l=s.data;let i=0,c;for(c=0;c<l.length;c++){const d=s._parsed[c];d!==null&&!isNaN(d)&&this.chart.getDataVisibility(c)&&!l[c].hidden&&(i+=Math.abs(d))}return i}calculateCircumference(s){const l=this._cachedMeta.total;return l>0&&!isNaN(s)?Xt*(Math.abs(s)/l):0}getLabelAndValue(s){const l=this._cachedMeta,i=this.chart,c=i.data.labels||[],d=$h(l._parsed[s],i.options.locale);return{label:c[s]||"",value:d}}getMaxBorderWidth(s){let l=0;const i=this.chart;let c,d,u,h,f;if(!s){for(c=0,d=i.data.datasets.length;c<d;++c)if(i.isDatasetVisible(c)){u=i.getDatasetMeta(c),s=u.data,h=u.controller;break}}if(!s)return 0;for(c=0,d=s.length;c<d;++c)f=h.resolveDataElementOptions(c),f.borderAlign!=="inner"&&(l=Math.max(l,f.borderWidth||0,f.hoverBorderWidth||0));return l}getMaxOffset(s){let l=0;for(let i=0,c=s.length;i<c;++i){const d=this.resolveDataElementOptions(i);l=Math.max(l,d.offset||0,d.hoverOffset||0)}return l}_getRingWeightOffset(s){let l=0;for(let i=0;i<s;++i)this.chart.isDatasetVisible(i)&&(l+=this._getRingWeight(i));return l}_getRingWeight(s){return Math.max(ht(this.chart.data.datasets[s].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function Yn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Vh{static override(s){Object.assign(Vh.prototype,s)}options;constructor(s){this.options=s||{}}init(){}formats(){return Yn()}parse(){return Yn()}format(){return Yn()}add(){return Yn()}diff(){return Yn()}startOf(){return Yn()}endOf(){return Yn()}}var nC={_date:Vh};function lC(a,s,l,i){const{controller:c,data:d,_sorted:u}=a,h=c._cachedMeta.iScale,f=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null;if(h&&s===h.axis&&s!=="r"&&u&&d.length){const g=h._reversePixels?Hw:vh;if(i){if(c._sharedOptions){const b=d[0],y=typeof b.getRange=="function"&&b.getRange(s);if(y){const v=g(d,s,l-y),S=g(d,s,l+y);return{lo:v.lo,hi:S.hi}}}}else{const b=g(d,s,l);if(f){const{vScale:y}=c._cachedMeta,{_parsed:v}=a,S=v.slice(0,b.lo+1).reverse().findIndex(E=>!Et(E[y.axis]));b.lo-=Math.max(0,S);const N=v.slice(b.hi).findIndex(E=>!Et(E[y.axis]));b.hi+=Math.max(0,N)}return b}}return{lo:0,hi:d.length-1}}function _o(a,s,l,i,c){const d=a.getSortedVisibleDatasetMetas(),u=l[s];for(let h=0,f=d.length;h<f;++h){const{index:g,data:b}=d[h],{lo:y,hi:v}=lC(d[h],s,u,c);for(let S=y;S<=v;++S){const N=b[S];N.skip||i(N,g,S)}}}function iC(a){const s=a.indexOf("x")!==-1,l=a.indexOf("y")!==-1;return function(i,c){const d=s?Math.abs(i.x-c.x):0,u=l?Math.abs(i.y-c.y):0;return Math.sqrt(Math.pow(d,2)+Math.pow(u,2))}}function nh(a,s,l,i,c){const d=[];return!c&&!a.isPointInArea(s)||_o(a,l,s,function(h,f,g){!c&&!My(h,a.chartArea,0)||h.inRange(s.x,s.y,i)&&d.push({element:h,datasetIndex:f,index:g})},!0),d}function rC(a,s,l,i){let c=[];function d(u,h,f){const{startAngle:g,endAngle:b}=u.getProps(["startAngle","endAngle"],i),{angle:y}=Sy(u,{x:s.x,y:s.y});go(y,g,b)&&c.push({element:u,datasetIndex:h,index:f})}return _o(a,l,s,d),c}function cC(a,s,l,i,c,d){let u=[];const h=iC(l);let f=Number.POSITIVE_INFINITY;function g(b,y,v){const S=b.inRange(s.x,s.y,c);if(i&&!S)return;const N=b.getCenterPoint(c);if(!(!!d||a.isPointInArea(N))&&!S)return;const A=h(s,N);A<f?(u=[{element:b,datasetIndex:y,index:v}],f=A):A===f&&u.push({element:b,datasetIndex:y,index:v})}return _o(a,l,s,g),u}function lh(a,s,l,i,c,d){return!d&&!a.isPointInArea(s)?[]:l==="r"&&!i?rC(a,s,l,c):cC(a,s,l,i,c,d)}function Zx(a,s,l,i,c){const d=[],u=l==="x"?"inXRange":"inYRange";let h=!1;return _o(a,l,s,(f,g,b)=>{f[u]&&f[u](s[l],c)&&(d.push({element:f,datasetIndex:g,index:b}),h=h||f.inRange(s.x,s.y,c))}),i&&!h?[]:d}var oC={modes:{index(a,s,l,i){const c=Vn(s,a),d=l.axis||"x",u=l.includeInvisible||!1,h=l.intersect?nh(a,c,d,i,u):lh(a,c,d,!1,i,u),f=[];return h.length?(a.getSortedVisibleDatasetMetas().forEach(g=>{const b=h[0].index,y=g.data[b];y&&!y.skip&&f.push({element:y,datasetIndex:g.index,index:b})}),f):[]},dataset(a,s,l,i){const c=Vn(s,a),d=l.axis||"xy",u=l.includeInvisible||!1;let h=l.intersect?nh(a,c,d,i,u):lh(a,c,d,!1,i,u);if(h.length>0){const f=h[0].datasetIndex,g=a.getDatasetMeta(f).data;h=[];for(let b=0;b<g.length;++b)h.push({element:g[b],datasetIndex:f,index:b})}return h},point(a,s,l,i){const c=Vn(s,a),d=l.axis||"xy",u=l.includeInvisible||!1;return nh(a,c,d,i,u)},nearest(a,s,l,i){const c=Vn(s,a),d=l.axis||"xy",u=l.includeInvisible||!1;return lh(a,c,d,l.intersect,i,u)},x(a,s,l,i){const c=Vn(s,a);return Zx(a,c,"x",l.intersect,i)},y(a,s,l,i){const c=Vn(s,a);return Zx(a,c,"y",l.intersect,i)}}};const Yy=["left","top","right","bottom"];function Vi(a,s){return a.filter(l=>l.pos===s)}function Jx(a,s){return a.filter(l=>Yy.indexOf(l.pos)===-1&&l.box.axis===s)}function Pi(a,s){return a.sort((l,i)=>{const c=s?i:l,d=s?l:i;return c.weight===d.weight?c.index-d.index:c.weight-d.weight})}function dC(a){const s=[];let l,i,c,d,u,h;for(l=0,i=(a||[]).length;l<i;++l)c=a[l],{position:d,options:{stack:u,stackWeight:h=1}}=c,s.push({index:l,box:c,pos:d,horizontal:c.isHorizontal(),weight:c.weight,stack:u&&d+u,stackWeight:h});return s}function uC(a){const s={};for(const l of a){const{stack:i,pos:c,stackWeight:d}=l;if(!i||!Yy.includes(c))continue;const u=s[i]||(s[i]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=d}return s}function hC(a,s){const l=uC(a),{vBoxMaxWidth:i,hBoxMaxHeight:c}=s;let d,u,h;for(d=0,u=a.length;d<u;++d){h=a[d];const{fullSize:f}=h.box,g=l[h.stack],b=g&&h.stackWeight/g.weight;h.horizontal?(h.width=b?b*i:f&&s.availableWidth,h.height=c):(h.width=i,h.height=b?b*c:f&&s.availableHeight)}return l}function mC(a){const s=dC(a),l=Pi(s.filter(g=>g.box.fullSize),!0),i=Pi(Vi(s,"left"),!0),c=Pi(Vi(s,"right")),d=Pi(Vi(s,"top"),!0),u=Pi(Vi(s,"bottom")),h=Jx(s,"x"),f=Jx(s,"y");return{fullSize:l,leftAndTop:i.concat(d),rightAndBottom:c.concat(f).concat(u).concat(h),chartArea:Vi(s,"chartArea"),vertical:i.concat(c).concat(f),horizontal:d.concat(u).concat(h)}}function eb(a,s,l,i){return Math.max(a[l],s[l])+Math.max(a[i],s[i])}function Vy(a,s){a.top=Math.max(a.top,s.top),a.left=Math.max(a.left,s.left),a.bottom=Math.max(a.bottom,s.bottom),a.right=Math.max(a.right,s.right)}function fC(a,s,l,i){const{pos:c,box:d}=l,u=a.maxPadding;if(!mt(c)){l.size&&(a[c]-=l.size);const y=i[l.stack]||{size:0,count:1};y.size=Math.max(y.size,l.horizontal?d.height:d.width),l.size=y.size/y.count,a[c]+=l.size}d.getPadding&&Vy(u,d.getPadding());const h=Math.max(0,s.outerWidth-eb(u,a,"left","right")),f=Math.max(0,s.outerHeight-eb(u,a,"top","bottom")),g=h!==a.w,b=f!==a.h;return a.w=h,a.h=f,l.horizontal?{same:g,other:b}:{same:b,other:g}}function pC(a){const s=a.maxPadding;function l(i){const c=Math.max(s[i]-a[i],0);return a[i]+=c,c}a.y+=l("top"),a.x+=l("left"),l("right"),l("bottom")}function gC(a,s){const l=s.maxPadding;function i(c){const d={left:0,top:0,right:0,bottom:0};return c.forEach(u=>{d[u]=Math.max(s[u],l[u])}),d}return i(a?["left","right"]:["top","bottom"])}function Qi(a,s,l,i){const c=[];let d,u,h,f,g,b;for(d=0,u=a.length,g=0;d<u;++d){h=a[d],f=h.box,f.update(h.width||s.w,h.height||s.h,gC(h.horizontal,s));const{same:y,other:v}=fC(s,l,h,i);g|=y&&c.length,b=b||v,f.fullSize||c.push(h)}return g&&Qi(c,s,l,i)||b}function Fc(a,s,l,i,c){a.top=l,a.left=s,a.right=s+i,a.bottom=l+c,a.width=i,a.height=c}function tb(a,s,l,i){const c=l.padding;let{x:d,y:u}=s;for(const h of a){const f=h.box,g=i[h.stack]||{placed:0,weight:1},b=h.stackWeight/g.weight||1;if(h.horizontal){const y=s.w*b,v=g.size||f.height;cr(g.start)&&(u=g.start),f.fullSize?Fc(f,c.left,u,l.outerWidth-c.right-c.left,v):Fc(f,s.left+g.placed,u,y,v),g.start=u,g.placed+=y,u=f.bottom}else{const y=s.h*b,v=g.size||f.width;cr(g.start)&&(d=g.start),f.fullSize?Fc(f,d,c.top,v,l.outerHeight-c.bottom-c.top):Fc(f,d,s.top+g.placed,v,y),g.start=d,g.placed+=y,d=f.right}}s.x=d,s.y=u}var xn={addBox(a,s){a.boxes||(a.boxes=[]),s.fullSize=s.fullSize||!1,s.position=s.position||"top",s.weight=s.weight||0,s._layers=s._layers||function(){return[{z:0,draw(l){s.draw(l)}}]},a.boxes.push(s)},removeBox(a,s){const l=a.boxes?a.boxes.indexOf(s):-1;l!==-1&&a.boxes.splice(l,1)},configure(a,s,l){s.fullSize=l.fullSize,s.position=l.position,s.weight=l.weight},update(a,s,l,i){if(!a)return;const c=ea(a.options.layout.padding),d=Math.max(s-c.width,0),u=Math.max(l-c.height,0),h=mC(a.boxes),f=h.vertical,g=h.horizontal;Nt(a.boxes,E=>{typeof E.beforeLayout=="function"&&E.beforeLayout()});const b=f.reduce((E,A)=>A.box.options&&A.box.options.display===!1?E:E+1,0)||1,y=Object.freeze({outerWidth:s,outerHeight:l,padding:c,availableWidth:d,availableHeight:u,vBoxMaxWidth:d/2/b,hBoxMaxHeight:u/2}),v=Object.assign({},c);Vy(v,ea(i));const S=Object.assign({maxPadding:v,w:d,h:u,x:c.left,y:c.top},c),N=hC(f.concat(g),y);Qi(h.fullSize,S,y,N),Qi(f,S,y,N),Qi(g,S,y,N)&&Qi(f,S,y,N),pC(S),tb(h.leftAndTop,S,y,N),S.x+=S.w,S.y+=S.h,tb(h.rightAndBottom,S,y,N),a.chartArea={left:S.left,top:S.top,right:S.left+S.w,bottom:S.top+S.h,height:S.h,width:S.w},Nt(h.chartArea,E=>{const A=E.box;Object.assign(A,a.chartArea),A.update(S.w,S.h,{left:0,top:0,right:0,bottom:0})})}};class Py{acquireContext(s,l){}releaseContext(s){return!1}addEventListener(s,l,i){}removeEventListener(s,l,i){}getDevicePixelRatio(){return 1}getMaximumSize(s,l,i,c){return l=Math.max(0,l||s.width),i=i||s.height,{width:l,height:Math.max(0,c?Math.floor(l/c):i)}}isAttached(s){return!0}updateConfig(s){}}class xC extends Py{acquireContext(s){return s&&s.getContext&&s.getContext("2d")||null}updateConfig(s){s.options.animation=!1}}const no="$chartjs",bC={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},sb=a=>a===null||a==="";function yC(a,s){const l=a.style,i=a.getAttribute("height"),c=a.getAttribute("width");if(a[no]={initial:{height:i,width:c,style:{display:l.display,height:l.height,width:l.width}}},l.display=l.display||"block",l.boxSizing=l.boxSizing||"border-box",sb(c)){const d=Hx(a,"width");d!==void 0&&(a.width=d)}if(sb(i))if(a.style.height==="")a.height=a.width/(s||2);else{const d=Hx(a,"height");d!==void 0&&(a.height=d)}return a}const qy=A1?{passive:!0}:!1;function vC(a,s,l){a&&a.addEventListener(s,l,qy)}function jC(a,s,l){a&&a.canvas&&a.canvas.removeEventListener(s,l,qy)}function NC(a,s){const l=bC[a.type]||a.type,{x:i,y:c}=Vn(a,s);return{type:l,chart:s,native:a,x:i!==void 0?i:null,y:c!==void 0?c:null}}function vo(a,s){for(const l of a)if(l===s||l.contains(s))return!0}function SC(a,s,l){const i=a.canvas,c=new MutationObserver(d=>{let u=!1;for(const h of d)u=u||vo(h.addedNodes,i),u=u&&!vo(h.removedNodes,i);u&&l()});return c.observe(document,{childList:!0,subtree:!0}),c}function wC(a,s,l){const i=a.canvas,c=new MutationObserver(d=>{let u=!1;for(const h of d)u=u||vo(h.removedNodes,i),u=u&&!vo(h.addedNodes,i);u&&l()});return c.observe(document,{childList:!0,subtree:!0}),c}const or=new Map;let ab=0;function Gy(){const a=window.devicePixelRatio;a!==ab&&(ab=a,or.forEach((s,l)=>{l.currentDevicePixelRatio!==a&&s()}))}function CC(a,s){or.size||window.addEventListener("resize",Gy),or.set(a,s)}function AC(a){or.delete(a),or.size||window.removeEventListener("resize",Gy)}function EC(a,s,l){const i=a.canvas,c=i&&Hh(i);if(!c)return;const d=Ey((h,f)=>{const g=c.clientWidth;l(h,f),g<c.clientWidth&&l()},window),u=new ResizeObserver(h=>{const f=h[0],g=f.contentRect.width,b=f.contentRect.height;g===0&&b===0||d(g,b)});return u.observe(c),CC(a,d),u}function ih(a,s,l){l&&l.disconnect(),s==="resize"&&AC(a)}function TC(a,s,l){const i=a.canvas,c=Ey(d=>{a.ctx!==null&&l(NC(d,a))},a);return vC(i,s,c),c}class _C extends Py{acquireContext(s,l){const i=s&&s.getContext&&s.getContext("2d");return i&&i.canvas===s?(yC(s,l),i):null}releaseContext(s){const l=s.canvas;if(!l[no])return!1;const i=l[no].initial;["height","width"].forEach(d=>{const u=i[d];Et(u)?l.removeAttribute(d):l.setAttribute(d,u)});const c=i.style||{};return Object.keys(c).forEach(d=>{l.style[d]=c[d]}),l.width=l.width,delete l[no],!0}addEventListener(s,l,i){this.removeEventListener(s,l);const c=s.$proxies||(s.$proxies={}),u={attach:SC,detach:wC,resize:EC}[l]||TC;c[l]=u(s,l,i)}removeEventListener(s,l){const i=s.$proxies||(s.$proxies={}),c=i[l];if(!c)return;({attach:ih,detach:ih,resize:ih}[l]||jC)(s,l,c),i[l]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(s,l,i,c){return C1(s,l,i,c)}isAttached(s){const l=s&&Hh(s);return!!(l&&l.isConnected)}}function kC(a){return!Fh()||typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas?xC:_C}class Wl{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(s){const{x:l,y:i}=this.getProps(["x","y"],s);return{x:l,y:i}}hasValue(){return po(this.x)&&po(this.y)}getProps(s,l){const i=this.$animations;if(!l||!i)return this;const c={};return s.forEach(d=>{c[d]=i[d]&&i[d].active()?i[d]._to:this[d]}),c}}function DC(a,s){const l=a.options.ticks,i=MC(a),c=Math.min(l.maxTicksLimit||i,i),d=l.major.enabled?$C(s):[],u=d.length,h=d[0],f=d[u-1],g=[];if(u>c)return IC(s,g,d,u/c),g;const b=RC(d,s,c);if(u>0){let y,v;const S=u>1?Math.round((f-h)/(u-1)):null;for(Hc(s,g,b,Et(S)?0:h-S,h),y=0,v=u-1;y<v;y++)Hc(s,g,b,d[y],d[y+1]);return Hc(s,g,b,f,Et(S)?s.length:f+S),g}return Hc(s,g,b),g}function MC(a){const s=a.options.offset,l=a._tickSize(),i=a._length/l+(s?0:1),c=a._maxLength/l;return Math.floor(Math.min(i,c))}function RC(a,s,l){const i=OC(a),c=s.length/l;if(!i)return Math.max(c,1);const d=Iw(i);for(let u=0,h=d.length-1;u<h;u++){const f=d[u];if(f>c)return f}return Math.max(c,1)}function $C(a){const s=[];let l,i;for(l=0,i=a.length;l<i;l++)a[l].major&&s.push(l);return s}function IC(a,s,l,i){let c=0,d=l[0],u;for(i=Math.ceil(i),u=0;u<a.length;u++)u===d&&(s.push(a[u]),c++,d=l[c*i])}function Hc(a,s,l,i,c){const d=ht(i,0),u=Math.min(ht(c,a.length),a.length);let h=0,f,g,b;for(l=Math.ceil(l),c&&(f=c-i,l=f/Math.floor(f/l)),b=d;b<0;)h++,b=Math.round(d+h*l);for(g=Math.max(d,0);g<u;g++)g===b&&(s.push(a[g]),h++,b=Math.round(d+h*l))}function OC(a){const s=a.length;let l,i;if(s<2)return!1;for(i=a[0],l=1;l<s;++l)if(a[l]-a[l-1]!==i)return!1;return i}const LC=a=>a==="left"?"right":a==="right"?"left":a,nb=(a,s,l)=>s==="top"||s==="left"?a[s]+l:a[s]-l,lb=(a,s)=>Math.min(s||a,a);function ib(a,s){const l=[],i=a.length/s,c=a.length;let d=0;for(;d<c;d+=i)l.push(a[Math.floor(d)]);return l}function zC(a,s,l){const i=a.ticks.length,c=Math.min(s,i-1),d=a._startPixel,u=a._endPixel,h=1e-6;let f=a.getPixelForTick(c),g;if(!(l&&(i===1?g=Math.max(f-d,u-f):s===0?g=(a.getPixelForTick(1)-f)/2:g=(f-a.getPixelForTick(c-1))/2,f+=c<s?g:-g,f<d-h||f>u+h)))return f}function UC(a,s){Nt(a,l=>{const i=l.gc,c=i.length/2;let d;if(c>s){for(d=0;d<c;++d)delete l.data[i[d]];i.splice(0,c)}})}function qi(a){return a.drawTicks?a.tickLength:0}function rb(a,s){if(!a.display)return 0;const l=js(a.font,s),i=ea(a.padding);return(Zt(a.text)?a.text.length:1)*l.lineHeight+i.height}function BC(a,s){return Xl(a,{scale:s,type:"scale"})}function FC(a,s,l){return Xl(a,{tick:l,index:s,type:"tick"})}function HC(a,s,l){let i=Ty(a);return(l&&s!=="right"||!l&&s==="right")&&(i=LC(i)),i}function YC(a,s,l,i){const{top:c,left:d,bottom:u,right:h,chart:f}=a,{chartArea:g,scales:b}=f;let y=0,v,S,N;const E=u-c,A=h-d;if(a.isHorizontal()){if(S=Ds(i,d,h),mt(l)){const T=Object.keys(l)[0],$=l[T];N=b[T].getPixelForValue($)+E-s}else l==="center"?N=(g.bottom+g.top)/2+E-s:N=nb(a,l,s);v=h-d}else{if(mt(l)){const T=Object.keys(l)[0],$=l[T];S=b[T].getPixelForValue($)-A+s}else l==="center"?S=(g.left+g.right)/2-A+s:S=nb(a,l,s);N=Ds(i,u,c),y=l==="left"?-Kt:Kt}return{titleX:S,titleY:N,maxWidth:v,rotation:y}}class Kl extends Wl{constructor(s){super(),this.id=s.id,this.type=s.type,this.options=void 0,this.ctx=s.ctx,this.chart=s.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(s){this.options=s.setContext(this.getContext()),this.axis=s.axis,this._userMin=this.parse(s.min),this._userMax=this.parse(s.max),this._suggestedMin=this.parse(s.suggestedMin),this._suggestedMax=this.parse(s.suggestedMax)}parse(s,l){return s}getUserBounds(){let{_userMin:s,_userMax:l,_suggestedMin:i,_suggestedMax:c}=this;return s=la(s,Number.POSITIVE_INFINITY),l=la(l,Number.NEGATIVE_INFINITY),i=la(i,Number.POSITIVE_INFINITY),c=la(c,Number.NEGATIVE_INFINITY),{min:la(s,i),max:la(l,c),minDefined:Gs(s),maxDefined:Gs(l)}}getMinMax(s){let{min:l,max:i,minDefined:c,maxDefined:d}=this.getUserBounds(),u;if(c&&d)return{min:l,max:i};const h=this.getMatchingVisibleMetas();for(let f=0,g=h.length;f<g;++f)u=h[f].controller.getMinMax(this,s),c||(l=Math.min(l,u.min)),d||(i=Math.max(i,u.max));return l=d&&l>i?i:l,i=c&&l>i?l:i,{min:la(l,la(i,l)),max:la(i,la(l,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const s=this.chart.data;return this.options.labels||(this.isHorizontal()?s.xLabels:s.yLabels)||s.labels||[]}getLabelItems(s=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(s))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Dt(this.options.beforeUpdate,[this])}update(s,l,i){const{beginAtZero:c,grace:d,ticks:u}=this.options,h=u.sampleSize;this.beforeUpdate(),this.maxWidth=s,this.maxHeight=l,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=d1(this,d,c),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=h<this.ticks.length;this._convertTicksToLabels(f?ib(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),u.display&&(u.autoSkip||u.source==="auto")&&(this.ticks=DC(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let s=this.options.reverse,l,i;this.isHorizontal()?(l=this.left,i=this.right):(l=this.top,i=this.bottom,s=!s),this._startPixel=l,this._endPixel=i,this._reversePixels=s,this._length=i-l,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Dt(this.options.afterUpdate,[this])}beforeSetDimensions(){Dt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Dt(this.options.afterSetDimensions,[this])}_callHooks(s){this.chart.notifyPlugins(s,this.getContext()),Dt(this.options[s],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Dt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(s){const l=this.options.ticks;let i,c,d;for(i=0,c=s.length;i<c;i++)d=s[i],d.label=Dt(l.callback,[d.value,i,s],this)}afterTickToLabelConversion(){Dt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Dt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const s=this.options,l=s.ticks,i=lb(this.ticks.length,s.ticks.maxTicksLimit),c=l.minRotation||0,d=l.maxRotation;let u=c,h,f,g;if(!this._isVisible()||!l.display||c>=d||i<=1||!this.isHorizontal()){this.labelRotation=c;return}const b=this._getLabelSizes(),y=b.widest.width,v=b.highest.height,S=vs(this.chart.width-y,0,this.maxWidth);h=s.offset?this.maxWidth/i:S/(i-1),y+6>h&&(h=S/(i-(s.offset?.5:1)),f=this.maxHeight-qi(s.grid)-l.padding-rb(s.title,this.chart.options.font),g=Math.sqrt(y*y+v*v),u=Uw(Math.min(Math.asin(vs((b.highest.height+6)/h,-1,1)),Math.asin(vs(f/g,-1,1))-Math.asin(vs(v/g,-1,1)))),u=Math.max(c,Math.min(d,u))),this.labelRotation=u}afterCalculateLabelRotation(){Dt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Dt(this.options.beforeFit,[this])}fit(){const s={width:0,height:0},{chart:l,options:{ticks:i,title:c,grid:d}}=this,u=this._isVisible(),h=this.isHorizontal();if(u){const f=rb(c,l.options.font);if(h?(s.width=this.maxWidth,s.height=qi(d)+f):(s.height=this.maxHeight,s.width=qi(d)+f),i.display&&this.ticks.length){const{first:g,last:b,widest:y,highest:v}=this._getLabelSizes(),S=i.padding*2,N=Ua(this.labelRotation),E=Math.cos(N),A=Math.sin(N);if(h){const T=i.mirror?0:A*y.width+E*v.height;s.height=Math.min(this.maxHeight,s.height+T+S)}else{const T=i.mirror?0:E*y.width+A*v.height;s.width=Math.min(this.maxWidth,s.width+T+S)}this._calculatePadding(g,b,A,E)}}this._handleMargins(),h?(this.width=this._length=l.width-this._margins.left-this._margins.right,this.height=s.height):(this.width=s.width,this.height=this._length=l.height-this._margins.top-this._margins.bottom)}_calculatePadding(s,l,i,c){const{ticks:{align:d,padding:u},position:h}=this.options,f=this.labelRotation!==0,g=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const b=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,S=0;f?g?(v=c*s.width,S=i*l.height):(v=i*s.height,S=c*l.width):d==="start"?S=l.width:d==="end"?v=s.width:d!=="inner"&&(v=s.width/2,S=l.width/2),this.paddingLeft=Math.max((v-b+u)*this.width/(this.width-b),0),this.paddingRight=Math.max((S-y+u)*this.width/(this.width-y),0)}else{let b=l.height/2,y=s.height/2;d==="start"?(b=0,y=s.height):d==="end"&&(b=l.height,y=0),this.paddingTop=b+u,this.paddingBottom=y+u}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Dt(this.options.afterFit,[this])}isHorizontal(){const{axis:s,position:l}=this.options;return l==="top"||l==="bottom"||s==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(s){this.beforeTickToLabelConversion(),this.generateTickLabels(s);let l,i;for(l=0,i=s.length;l<i;l++)Et(s[l].label)&&(s.splice(l,1),i--,l--);this.afterTickToLabelConversion()}_getLabelSizes(){let s=this._labelSizes;if(!s){const l=this.options.ticks.sampleSize;let i=this.ticks;l<i.length&&(i=ib(i,l)),this._labelSizes=s=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return s}_computeLabelSizes(s,l,i){const{ctx:c,_longestTextCache:d}=this,u=[],h=[],f=Math.floor(l/lb(l,i));let g=0,b=0,y,v,S,N,E,A,T,$,D,I,G;for(y=0;y<l;y+=f){if(N=s[y].label,E=this._resolveTickFontOptions(y),c.font=A=E.string,T=d[A]=d[A]||{data:{},gc:[]},$=E.lineHeight,D=I=0,!Et(N)&&!Zt(N))D=Ox(c,T.data,T.gc,D,N),I=$;else if(Zt(N))for(v=0,S=N.length;v<S;++v)G=N[v],!Et(G)&&!Zt(G)&&(D=Ox(c,T.data,T.gc,D,G),I+=$);u.push(D),h.push(I),g=Math.max(D,g),b=Math.max(I,b)}UC(d,l);const L=u.indexOf(g),_=h.indexOf(b),O=H=>({width:u[H]||0,height:h[H]||0});return{first:O(0),last:O(l-1),widest:O(L),highest:O(_),widths:u,heights:h}}getLabelForValue(s){return s}getPixelForValue(s,l){return NaN}getValueForPixel(s){}getPixelForTick(s){const l=this.ticks;return s<0||s>l.length-1?null:this.getPixelForValue(l[s].value)}getPixelForDecimal(s){this._reversePixels&&(s=1-s);const l=this._startPixel+s*this._length;return Fw(this._alignToPixels?Hn(this.chart,l,0):l)}getDecimalForPixel(s){const l=(s-this._startPixel)/this._length;return this._reversePixels?1-l:l}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:s,max:l}=this;return s<0&&l<0?l:s>0&&l>0?s:0}getContext(s){const l=this.ticks||[];if(s>=0&&s<l.length){const i=l[s];return i.$context||(i.$context=FC(this.getContext(),s,i))}return this.$context||(this.$context=BC(this.chart.getContext(),this))}_tickSize(){const s=this.options.ticks,l=Ua(this.labelRotation),i=Math.abs(Math.cos(l)),c=Math.abs(Math.sin(l)),d=this._getLabelSizes(),u=s.autoSkipPadding||0,h=d?d.widest.width+u:0,f=d?d.highest.height+u:0;return this.isHorizontal()?f*i>h*c?h/i:f/c:f*c<h*i?f/i:h/c}_isVisible(){const s=this.options.display;return s!=="auto"?!!s:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(s){const l=this.axis,i=this.chart,c=this.options,{grid:d,position:u,border:h}=c,f=d.offset,g=this.isHorizontal(),y=this.ticks.length+(f?1:0),v=qi(d),S=[],N=h.setContext(this.getContext()),E=N.display?N.width:0,A=E/2,T=function(w){return Hn(i,w,E)};let $,D,I,G,L,_,O,H,C,P,U,Z;if(u==="top")$=T(this.bottom),_=this.bottom-v,H=$-A,P=T(s.top)+A,Z=s.bottom;else if(u==="bottom")$=T(this.top),P=s.top,Z=T(s.bottom)-A,_=$+A,H=this.top+v;else if(u==="left")$=T(this.right),L=this.right-v,O=$-A,C=T(s.left)+A,U=s.right;else if(u==="right")$=T(this.left),C=s.left,U=T(s.right)-A,L=$+A,O=this.left+v;else if(l==="x"){if(u==="center")$=T((s.top+s.bottom)/2+.5);else if(mt(u)){const w=Object.keys(u)[0],M=u[w];$=T(this.chart.scales[w].getPixelForValue(M))}P=s.top,Z=s.bottom,_=$+A,H=_+v}else if(l==="y"){if(u==="center")$=T((s.left+s.right)/2);else if(mt(u)){const w=Object.keys(u)[0],M=u[w];$=T(this.chart.scales[w].getPixelForValue(M))}L=$-A,O=L-v,C=s.left,U=s.right}const z=ht(c.ticks.maxTicksLimit,y),W=Math.max(1,Math.ceil(y/z));for(D=0;D<y;D+=W){const w=this.getContext(D),M=d.setContext(w),B=h.setContext(w),F=M.lineWidth,q=M.color,k=B.dash||[],X=B.dashOffset,ae=M.tickWidth,Y=M.tickColor,te=M.tickBorderDash||[],K=M.tickBorderDashOffset;I=zC(this,D,f),I!==void 0&&(G=Hn(i,I,F),g?L=O=C=U=G:_=H=P=Z=G,S.push({tx1:L,ty1:_,tx2:O,ty2:H,x1:C,y1:P,x2:U,y2:Z,width:F,color:q,borderDash:k,borderDashOffset:X,tickWidth:ae,tickColor:Y,tickBorderDash:te,tickBorderDashOffset:K}))}return this._ticksLength=y,this._borderValue=$,S}_computeLabelItems(s){const l=this.axis,i=this.options,{position:c,ticks:d}=i,u=this.isHorizontal(),h=this.ticks,{align:f,crossAlign:g,padding:b,mirror:y}=d,v=qi(i.grid),S=v+b,N=y?-b:S,E=-Ua(this.labelRotation),A=[];let T,$,D,I,G,L,_,O,H,C,P,U,Z="middle";if(c==="top")L=this.bottom-N,_=this._getXAxisLabelAlignment();else if(c==="bottom")L=this.top+N,_=this._getXAxisLabelAlignment();else if(c==="left"){const W=this._getYAxisLabelAlignment(v);_=W.textAlign,G=W.x}else if(c==="right"){const W=this._getYAxisLabelAlignment(v);_=W.textAlign,G=W.x}else if(l==="x"){if(c==="center")L=(s.top+s.bottom)/2+S;else if(mt(c)){const W=Object.keys(c)[0],w=c[W];L=this.chart.scales[W].getPixelForValue(w)+S}_=this._getXAxisLabelAlignment()}else if(l==="y"){if(c==="center")G=(s.left+s.right)/2-S;else if(mt(c)){const W=Object.keys(c)[0],w=c[W];G=this.chart.scales[W].getPixelForValue(w)}_=this._getYAxisLabelAlignment(v).textAlign}l==="y"&&(f==="start"?Z="top":f==="end"&&(Z="bottom"));const z=this._getLabelSizes();for(T=0,$=h.length;T<$;++T){D=h[T],I=D.label;const W=d.setContext(this.getContext(T));O=this.getPixelForTick(T)+d.labelOffset,H=this._resolveTickFontOptions(T),C=H.lineHeight,P=Zt(I)?I.length:1;const w=P/2,M=W.color,B=W.textStrokeColor,F=W.textStrokeWidth;let q=_;u?(G=O,_==="inner"&&(T===$-1?q=this.options.reverse?"left":"right":T===0?q=this.options.reverse?"right":"left":q="center"),c==="top"?g==="near"||E!==0?U=-P*C+C/2:g==="center"?U=-z.highest.height/2-w*C+C:U=-z.highest.height+C/2:g==="near"||E!==0?U=C/2:g==="center"?U=z.highest.height/2-w*C:U=z.highest.height-P*C,y&&(U*=-1),E!==0&&!W.showLabelBackdrop&&(G+=C/2*Math.sin(E))):(L=O,U=(1-P)*C/2);let k;if(W.showLabelBackdrop){const X=ea(W.backdropPadding),ae=z.heights[T],Y=z.widths[T];let te=U-X.top,K=0-X.left;switch(Z){case"middle":te-=ae/2;break;case"bottom":te-=ae;break}switch(_){case"center":K-=Y/2;break;case"right":K-=Y;break;case"inner":T===$-1?K-=Y:T>0&&(K-=Y/2);break}k={left:K,top:te,width:Y+X.width,height:ae+X.height,color:W.backdropColor}}A.push({label:I,font:H,textOffset:U,options:{rotation:E,color:M,strokeColor:B,strokeWidth:F,textAlign:q,textBaseline:Z,translation:[G,L],backdrop:k}})}return A}_getXAxisLabelAlignment(){const{position:s,ticks:l}=this.options;if(-Ua(this.labelRotation))return s==="top"?"left":"right";let c="center";return l.align==="start"?c="left":l.align==="end"?c="right":l.align==="inner"&&(c="inner"),c}_getYAxisLabelAlignment(s){const{position:l,ticks:{crossAlign:i,mirror:c,padding:d}}=this.options,u=this._getLabelSizes(),h=s+d,f=u.widest.width;let g,b;return l==="left"?c?(b=this.right+d,i==="near"?g="left":i==="center"?(g="center",b+=f/2):(g="right",b+=f)):(b=this.right-h,i==="near"?g="right":i==="center"?(g="center",b-=f/2):(g="left",b=this.left)):l==="right"?c?(b=this.left+d,i==="near"?g="right":i==="center"?(g="center",b-=f/2):(g="left",b-=f)):(b=this.left+h,i==="near"?g="left":i==="center"?(g="center",b+=f/2):(g="right",b=this.right)):g="right",{textAlign:g,x:b}}_computeLabelArea(){if(this.options.ticks.mirror)return;const s=this.chart,l=this.options.position;if(l==="left"||l==="right")return{top:0,left:this.left,bottom:s.height,right:this.right};if(l==="top"||l==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:s.width}}drawBackground(){const{ctx:s,options:{backgroundColor:l},left:i,top:c,width:d,height:u}=this;l&&(s.save(),s.fillStyle=l,s.fillRect(i,c,d,u),s.restore())}getLineWidthForValue(s){const l=this.options.grid;if(!this._isVisible()||!l.display)return 0;const c=this.ticks.findIndex(d=>d.value===s);return c>=0?l.setContext(this.getContext(c)).lineWidth:0}drawGrid(s){const l=this.options.grid,i=this.ctx,c=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(s));let d,u;const h=(f,g,b)=>{!b.width||!b.color||(i.save(),i.lineWidth=b.width,i.strokeStyle=b.color,i.setLineDash(b.borderDash||[]),i.lineDashOffset=b.borderDashOffset,i.beginPath(),i.moveTo(f.x,f.y),i.lineTo(g.x,g.y),i.stroke(),i.restore())};if(l.display)for(d=0,u=c.length;d<u;++d){const f=c[d];l.drawOnChartArea&&h({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),l.drawTicks&&h({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:s,ctx:l,options:{border:i,grid:c}}=this,d=i.setContext(this.getContext()),u=i.display?d.width:0;if(!u)return;const h=c.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let g,b,y,v;this.isHorizontal()?(g=Hn(s,this.left,u)-u/2,b=Hn(s,this.right,h)+h/2,y=v=f):(y=Hn(s,this.top,u)-u/2,v=Hn(s,this.bottom,h)+h/2,g=b=f),l.save(),l.lineWidth=d.width,l.strokeStyle=d.color,l.beginPath(),l.moveTo(g,y),l.lineTo(b,v),l.stroke(),l.restore()}drawLabels(s){if(!this.options.ticks.display)return;const i=this.ctx,c=this._computeLabelArea();c&&Ih(i,c);const d=this.getLabelItems(s);for(const u of d){const h=u.options,f=u.font,g=u.label,b=u.textOffset;xo(i,g,0,b,f,h)}c&&Oh(i)}drawTitle(){const{ctx:s,options:{position:l,title:i,reverse:c}}=this;if(!i.display)return;const d=js(i.font),u=ea(i.padding),h=i.align;let f=d.lineHeight/2;l==="bottom"||l==="center"||mt(l)?(f+=u.bottom,Zt(i.text)&&(f+=d.lineHeight*(i.text.length-1))):f+=u.top;const{titleX:g,titleY:b,maxWidth:y,rotation:v}=YC(this,f,l,h);xo(s,i.text,0,0,d,{color:i.color,maxWidth:y,rotation:v,textAlign:HC(h,l,c),textBaseline:"middle",translation:[g,b]})}draw(s){this._isVisible()&&(this.drawBackground(),this.drawGrid(s),this.drawBorder(),this.drawTitle(),this.drawLabels(s))}_layers(){const s=this.options,l=s.ticks&&s.ticks.z||0,i=ht(s.grid&&s.grid.z,-1),c=ht(s.border&&s.border.z,0);return!this._isVisible()||this.draw!==Kl.prototype.draw?[{z:l,draw:d=>{this.draw(d)}}]:[{z:i,draw:d=>{this.drawBackground(),this.drawGrid(d),this.drawTitle()}},{z:c,draw:()=>{this.drawBorder()}},{z:l,draw:d=>{this.drawLabels(d)}}]}getMatchingVisibleMetas(s){const l=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",c=[];let d,u;for(d=0,u=l.length;d<u;++d){const h=l[d];h[i]===this.id&&(!s||h.type===s)&&c.push(h)}return c}_resolveTickFontOptions(s){const l=this.options.ticks.setContext(this.getContext(s));return js(l.font)}_maxDigits(){const s=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/s}}class Yc{constructor(s,l,i){this.type=s,this.scope=l,this.override=i,this.items=Object.create(null)}isForType(s){return Object.prototype.isPrototypeOf.call(this.type.prototype,s.prototype)}register(s){const l=Object.getPrototypeOf(s);let i;qC(l)&&(i=this.register(l));const c=this.items,d=s.id,u=this.scope+"."+d;if(!d)throw new Error("class does not have id: "+s);return d in c||(c[d]=s,VC(s,u,i),this.override&&Ft.override(s.id,s.overrides)),u}get(s){return this.items[s]}unregister(s){const l=this.items,i=s.id,c=this.scope;i in l&&delete l[i],c&&i in Ft[c]&&(delete Ft[c][i],this.override&&delete Wn[i])}}function VC(a,s,l){const i=rr(Object.create(null),[l?Ft.get(l):{},Ft.get(s),a.defaults]);Ft.set(s,i),a.defaultRoutes&&PC(s,a.defaultRoutes),a.descriptors&&Ft.describe(s,a.descriptors)}function PC(a,s){Object.keys(s).forEach(l=>{const i=l.split("."),c=i.pop(),d=[a].concat(i).join("."),u=s[l].split("."),h=u.pop(),f=u.join(".");Ft.route(d,c,f,h)})}function qC(a){return"id"in a&&"defaults"in a}class GC{constructor(){this.controllers=new Yc(Yh,"datasets",!0),this.elements=new Yc(Wl,"elements"),this.plugins=new Yc(Object,"plugins"),this.scales=new Yc(Kl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...s){this._each("register",s)}remove(...s){this._each("unregister",s)}addControllers(...s){this._each("register",s,this.controllers)}addElements(...s){this._each("register",s,this.elements)}addPlugins(...s){this._each("register",s,this.plugins)}addScales(...s){this._each("register",s,this.scales)}getController(s){return this._get(s,this.controllers,"controller")}getElement(s){return this._get(s,this.elements,"element")}getPlugin(s){return this._get(s,this.plugins,"plugin")}getScale(s){return this._get(s,this.scales,"scale")}removeControllers(...s){this._each("unregister",s,this.controllers)}removeElements(...s){this._each("unregister",s,this.elements)}removePlugins(...s){this._each("unregister",s,this.plugins)}removeScales(...s){this._each("unregister",s,this.scales)}_each(s,l,i){[...l].forEach(c=>{const d=i||this._getRegistryForType(c);i||d.isForType(c)||d===this.plugins&&c.id?this._exec(s,d,c):Nt(c,u=>{const h=i||this._getRegistryForType(u);this._exec(s,h,u)})})}_exec(s,l,i){const c=Mh(s);Dt(i["before"+c],[],i),l[s](i),Dt(i["after"+c],[],i)}_getRegistryForType(s){for(let l=0;l<this._typedRegistries.length;l++){const i=this._typedRegistries[l];if(i.isForType(s))return i}return this.plugins}_get(s,l,i){const c=l.get(s);if(c===void 0)throw new Error('"'+s+'" is not a registered '+i+".");return c}}var ca=new GC;class XC{constructor(){this._init=void 0}notify(s,l,i,c){if(l==="beforeInit"&&(this._init=this._createDescriptors(s,!0),this._notify(this._init,s,"install")),this._init===void 0)return;const d=c?this._descriptors(s).filter(c):this._descriptors(s),u=this._notify(d,s,l,i);return l==="afterDestroy"&&(this._notify(d,s,"stop"),this._notify(this._init,s,"uninstall"),this._init=void 0),u}_notify(s,l,i,c){c=c||{};for(const d of s){const u=d.plugin,h=u[i],f=[l,c,d.options];if(Dt(h,f,u)===!1&&c.cancelable)return!1}return!0}invalidate(){Et(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(s){if(this._cache)return this._cache;const l=this._cache=this._createDescriptors(s);return this._notifyStateChanges(s),l}_createDescriptors(s,l){const i=s&&s.config,c=ht(i.options&&i.options.plugins,{}),d=WC(i);return c===!1&&!l?[]:QC(s,d,c,l)}_notifyStateChanges(s){const l=this._oldCache||[],i=this._cache,c=(d,u)=>d.filter(h=>!u.some(f=>h.plugin.id===f.plugin.id));this._notify(c(l,i),s,"stop"),this._notify(c(i,l),s,"start")}}function WC(a){const s={},l=[],i=Object.keys(ca.plugins.items);for(let d=0;d<i.length;d++)l.push(ca.getPlugin(i[d]));const c=a.plugins||[];for(let d=0;d<c.length;d++){const u=c[d];l.indexOf(u)===-1&&(l.push(u),s[u.id]=!0)}return{plugins:l,localIds:s}}function KC(a,s){return!s&&a===!1?null:a===!0?{}:a}function QC(a,{plugins:s,localIds:l},i,c){const d=[],u=a.getContext();for(const h of s){const f=h.id,g=KC(i[f],c);g!==null&&d.push({plugin:h,options:ZC(a.config,{plugin:h,local:l[f]},g,u)})}return d}function ZC(a,{plugin:s,local:l},i,c){const d=a.pluginScopeKeys(s),u=a.getOptionScopes(i,d);return l&&s.defaults&&u.push(s.defaults),a.createResolver(u,c,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Nh(a,s){const l=Ft.datasets[a]||{};return((s.datasets||{})[a]||{}).indexAxis||s.indexAxis||l.indexAxis||"x"}function JC(a,s){let l=a;return a==="_index_"?l=s:a==="_value_"&&(l=s==="x"?"y":"x"),l}function eA(a,s){return a===s?"_index_":"_value_"}function cb(a){if(a==="x"||a==="y"||a==="r")return a}function tA(a){if(a==="top"||a==="bottom")return"x";if(a==="left"||a==="right")return"y"}function Sh(a,...s){if(cb(a))return a;for(const l of s){const i=l.axis||tA(l.position)||a.length>1&&cb(a[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${a}' axis. Please provide 'axis' or 'position' option.`)}function ob(a,s,l){if(l[s+"AxisID"]===a)return{axis:s}}function sA(a,s){if(s.data&&s.data.datasets){const l=s.data.datasets.filter(i=>i.xAxisID===a||i.yAxisID===a);if(l.length)return ob(a,"x",l[0])||ob(a,"y",l[0])}return{}}function aA(a,s){const l=Wn[a.type]||{scales:{}},i=s.scales||{},c=Nh(a.type,s),d=Object.create(null);return Object.keys(i).forEach(u=>{const h=i[u];if(!mt(h))return console.error(`Invalid scale configuration for scale: ${u}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${u}`);const f=Sh(u,h,sA(u,a),Ft.scales[h.type]),g=eA(f,c),b=l.scales||{};d[u]=er(Object.create(null),[{axis:f},h,b[f],b[g]])}),a.data.datasets.forEach(u=>{const h=u.type||a.type,f=u.indexAxis||Nh(h,s),b=(Wn[h]||{}).scales||{};Object.keys(b).forEach(y=>{const v=JC(y,f),S=u[v+"AxisID"]||v;d[S]=d[S]||Object.create(null),er(d[S],[{axis:v},i[S],b[y]])})}),Object.keys(d).forEach(u=>{const h=d[u];er(h,[Ft.scales[h.type],Ft.scale])}),d}function Xy(a){const s=a.options||(a.options={});s.plugins=ht(s.plugins,{}),s.scales=aA(a,s)}function Wy(a){return a=a||{},a.datasets=a.datasets||[],a.labels=a.labels||[],a}function nA(a){return a=a||{},a.data=Wy(a.data),Xy(a),a}const db=new Map,Ky=new Set;function Vc(a,s){let l=db.get(a);return l||(l=s(),db.set(a,l),Ky.add(l)),l}const Gi=(a,s,l)=>{const i=Xn(s,l);i!==void 0&&a.add(i)};class lA{constructor(s){this._config=nA(s),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(s){this._config.type=s}get data(){return this._config.data}set data(s){this._config.data=Wy(s)}get options(){return this._config.options}set options(s){this._config.options=s}get plugins(){return this._config.plugins}update(){const s=this._config;this.clearCache(),Xy(s)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(s){return Vc(s,()=>[[`datasets.${s}`,""]])}datasetAnimationScopeKeys(s,l){return Vc(`${s}.transition.${l}`,()=>[[`datasets.${s}.transitions.${l}`,`transitions.${l}`],[`datasets.${s}`,""]])}datasetElementScopeKeys(s,l){return Vc(`${s}-${l}`,()=>[[`datasets.${s}.elements.${l}`,`datasets.${s}`,`elements.${l}`,""]])}pluginScopeKeys(s){const l=s.id,i=this.type;return Vc(`${i}-plugin-${l}`,()=>[[`plugins.${l}`,...s.additionalOptionScopes||[]]])}_cachedScopes(s,l){const i=this._scopeCache;let c=i.get(s);return(!c||l)&&(c=new Map,i.set(s,c)),c}getOptionScopes(s,l,i){const{options:c,type:d}=this,u=this._cachedScopes(s,i),h=u.get(l);if(h)return h;const f=new Set;l.forEach(b=>{s&&(f.add(s),b.forEach(y=>Gi(f,s,y))),b.forEach(y=>Gi(f,c,y)),b.forEach(y=>Gi(f,Wn[d]||{},y)),b.forEach(y=>Gi(f,Ft,y)),b.forEach(y=>Gi(f,jh,y))});const g=Array.from(f);return g.length===0&&g.push(Object.create(null)),Ky.has(l)&&u.set(l,g),g}chartOptionScopes(){const{options:s,type:l}=this;return[s,Wn[l]||{},Ft.datasets[l]||{},{type:l},Ft,jh]}resolveNamedOptions(s,l,i,c=[""]){const d={$shared:!0},{resolver:u,subPrefixes:h}=ub(this._resolverCache,s,c);let f=u;if(rA(u,l)){d.$shared=!1,i=Nn(i)?i():i;const g=this.createResolver(s,i,h);f=Vl(u,i,g)}for(const g of l)d[g]=f[g];return d}createResolver(s,l,i=[""],c){const{resolver:d}=ub(this._resolverCache,s,i);return mt(l)?Vl(d,l,void 0,c):d}}function ub(a,s,l){let i=a.get(s);i||(i=new Map,a.set(s,i));const c=l.join();let d=i.get(c);return d||(d={resolver:zh(s,l),subPrefixes:l.filter(h=>!h.toLowerCase().includes("hover"))},i.set(c,d)),d}const iA=a=>mt(a)&&Object.getOwnPropertyNames(a).some(s=>Nn(a[s]));function rA(a,s){const{isScriptable:l,isIndexable:i}=$y(a);for(const c of s){const d=l(c),u=i(c),h=(u||d)&&a[c];if(d&&(Nn(h)||iA(h))||u&&Zt(h))return!0}return!1}var cA="4.5.1";const oA=["top","bottom","left","right","chartArea"];function hb(a,s){return a==="top"||a==="bottom"||oA.indexOf(a)===-1&&s==="x"}function mb(a,s){return function(l,i){return l[a]===i[a]?l[s]-i[s]:l[a]-i[a]}}function fb(a){const s=a.chart,l=s.options.animation;s.notifyPlugins("afterRender"),Dt(l&&l.onComplete,[a],s)}function dA(a){const s=a.chart,l=s.options.animation;Dt(l&&l.onProgress,[a],s)}function Qy(a){return Fh()&&typeof a=="string"?a=document.getElementById(a):a&&a.length&&(a=a[0]),a&&a.canvas&&(a=a.canvas),a}const lo={},pb=a=>{const s=Qy(a);return Object.values(lo).filter(l=>l.canvas===s).pop()};function uA(a,s,l){const i=Object.keys(a);for(const c of i){const d=+c;if(d>=s){const u=a[c];delete a[c],(l>0||d>s)&&(a[d+l]=u)}}}function hA(a,s,l,i){return!l||a.type==="mouseout"?null:i?s:a}let Ql=class{static defaults=Ft;static instances=lo;static overrides=Wn;static registry=ca;static version=cA;static getChart=pb;static register(...s){ca.add(...s),gb()}static unregister(...s){ca.remove(...s),gb()}constructor(s,l){const i=this.config=new lA(l),c=Qy(s),d=pb(c);if(d)throw new Error("Canvas is already in use. Chart with ID '"+d.id+"' must be destroyed before the canvas with ID '"+d.canvas.id+"' can be reused.");const u=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||kC(c)),this.platform.updateConfig(i);const h=this.platform.acquireContext(c,u.aspectRatio),f=h&&h.canvas,g=f&&f.height,b=f&&f.width;if(this.id=Ew(),this.ctx=h,this.canvas=f,this.width=b,this.height=g,this._options=u,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new XC,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Pw(y=>this.update(y),u.resizeDelay||0),this._dataChanges=[],lo[this.id]=this,!h||!f){console.error("Failed to create chart: can't acquire context from the given item");return}$a.listen(this,"complete",fb),$a.listen(this,"progress",dA),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:s,maintainAspectRatio:l},width:i,height:c,_aspectRatio:d}=this;return Et(s)?l&&d?d:c?i/c:null:s}get data(){return this.config.data}set data(s){this.config.data=s}get options(){return this._options}set options(s){this.config.options=s}get registry(){return ca}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Fx(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Lx(this.canvas,this.ctx),this}stop(){return $a.stop(this),this}resize(s,l){$a.running(this)?this._resizeBeforeDraw={width:s,height:l}:this._resize(s,l)}_resize(s,l){const i=this.options,c=this.canvas,d=i.maintainAspectRatio&&this.aspectRatio,u=this.platform.getMaximumSize(c,s,l,d),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=u.width,this.height=u.height,this._aspectRatio=this.aspectRatio,Fx(this,h,!0)&&(this.notifyPlugins("resize",{size:u}),Dt(i.onResize,[this,u],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const l=this.options.scales||{};Nt(l,(i,c)=>{i.id=c})}buildOrUpdateScales(){const s=this.options,l=s.scales,i=this.scales,c=Object.keys(i).reduce((u,h)=>(u[h]=!1,u),{});let d=[];l&&(d=d.concat(Object.keys(l).map(u=>{const h=l[u],f=Sh(u,h),g=f==="r",b=f==="x";return{options:h,dposition:g?"chartArea":b?"bottom":"left",dtype:g?"radialLinear":b?"category":"linear"}}))),Nt(d,u=>{const h=u.options,f=h.id,g=Sh(f,h),b=ht(h.type,u.dtype);(h.position===void 0||hb(h.position,g)!==hb(u.dposition))&&(h.position=u.dposition),c[f]=!0;let y=null;if(f in i&&i[f].type===b)y=i[f];else{const v=ca.getScale(b);y=new v({id:f,type:b,ctx:this.ctx,chart:this}),i[y.id]=y}y.init(h,s)}),Nt(c,(u,h)=>{u||delete i[h]}),Nt(i,u=>{xn.configure(this,u,u.options),xn.addBox(this,u)})}_updateMetasets(){const s=this._metasets,l=this.data.datasets.length,i=s.length;if(s.sort((c,d)=>c.index-d.index),i>l){for(let c=l;c<i;++c)this._destroyDatasetMeta(c);s.splice(l,i-l)}this._sortedMetasets=s.slice(0).sort(mb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:s,data:{datasets:l}}=this;s.length>l.length&&delete this._stacks,s.forEach((i,c)=>{l.filter(d=>d===i._dataset).length===0&&this._destroyDatasetMeta(c)})}buildOrUpdateControllers(){const s=[],l=this.data.datasets;let i,c;for(this._removeUnreferencedMetasets(),i=0,c=l.length;i<c;i++){const d=l[i];let u=this.getDatasetMeta(i);const h=d.type||this.config.type;if(u.type&&u.type!==h&&(this._destroyDatasetMeta(i),u=this.getDatasetMeta(i)),u.type=h,u.indexAxis=d.indexAxis||Nh(h,this.options),u.order=d.order||0,u.index=i,u.label=""+d.label,u.visible=this.isDatasetVisible(i),u.controller)u.controller.updateIndex(i),u.controller.linkScales();else{const f=ca.getController(h),{datasetElementType:g,dataElementType:b}=Ft.datasets[h];Object.assign(f,{dataElementType:ca.getElement(b),datasetElementType:g&&ca.getElement(g)}),u.controller=new f(this,i),s.push(u.controller)}}return this._updateMetasets(),s}_resetElements(){Nt(this.data.datasets,(s,l)=>{this.getDatasetMeta(l).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(s){const l=this.config;l.update();const i=this._options=l.createResolver(l.chartOptionScopes(),this.getContext()),c=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:s,cancelable:!0})===!1)return;const d=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let u=0;for(let g=0,b=this.data.datasets.length;g<b;g++){const{controller:y}=this.getDatasetMeta(g),v=!c&&d.indexOf(y)===-1;y.buildOrUpdateElements(v),u=Math.max(+y.getMaxOverflow(),u)}u=this._minPadding=i.layout.autoPadding?u:0,this._updateLayout(u),c||Nt(d,g=>{g.reset()}),this._updateDatasets(s),this.notifyPlugins("afterUpdate",{mode:s}),this._layers.sort(mb("z","_idx"));const{_active:h,_lastEvent:f}=this;f?this._eventHandler(f,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){Nt(this.scales,s=>{xn.removeBox(this,s)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const s=this.options,l=new Set(Object.keys(this._listeners)),i=new Set(s.events);(!Ex(l,i)||!!this._responsiveListeners!==s.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:s}=this,l=this._getUniformDataChanges()||[];for(const{method:i,start:c,count:d}of l){const u=i==="_removeElements"?-d:d;uA(s,c,u)}}_getUniformDataChanges(){const s=this._dataChanges;if(!s||!s.length)return;this._dataChanges=[];const l=this.data.datasets.length,i=d=>new Set(s.filter(u=>u[0]===d).map((u,h)=>h+","+u.splice(1).join(","))),c=i(0);for(let d=1;d<l;d++)if(!Ex(c,i(d)))return;return Array.from(c).map(d=>d.split(",")).map(d=>({method:d[1],start:+d[2],count:+d[3]}))}_updateLayout(s){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;xn.update(this,this.width,this.height,s);const l=this.chartArea,i=l.width<=0||l.height<=0;this._layers=[],Nt(this.boxes,c=>{i&&c.position==="chartArea"||(c.configure&&c.configure(),this._layers.push(...c._layers()))},this),this._layers.forEach((c,d)=>{c._idx=d}),this.notifyPlugins("afterLayout")}_updateDatasets(s){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:s,cancelable:!0})!==!1){for(let l=0,i=this.data.datasets.length;l<i;++l)this.getDatasetMeta(l).controller.configure();for(let l=0,i=this.data.datasets.length;l<i;++l)this._updateDataset(l,Nn(s)?s({datasetIndex:l}):s);this.notifyPlugins("afterDatasetsUpdate",{mode:s})}}_updateDataset(s,l){const i=this.getDatasetMeta(s),c={meta:i,index:s,mode:l,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",c)!==!1&&(i.controller._update(l),c.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",c))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&($a.has(this)?this.attached&&!$a.running(this)&&$a.start(this):(this.draw(),fb({chart:this})))}draw(){let s;if(this._resizeBeforeDraw){const{width:i,height:c}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,c)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const l=this._layers;for(s=0;s<l.length&&l[s].z<=0;++s)l[s].draw(this.chartArea);for(this._drawDatasets();s<l.length;++s)l[s].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(s){const l=this._sortedMetasets,i=[];let c,d;for(c=0,d=l.length;c<d;++c){const u=l[c];(!s||u.visible)&&i.push(u)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const s=this.getSortedVisibleDatasetMetas();for(let l=s.length-1;l>=0;--l)this._drawDataset(s[l]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(s){const l=this.ctx,i={meta:s,index:s.index,cancelable:!0},c=k1(this,s);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(c&&Ih(l,c),s.controller.draw(),c&&Oh(l),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(s){return My(s,this.chartArea,this._minPadding)}getElementsAtEventForMode(s,l,i,c){const d=oC.modes[l];return typeof d=="function"?d(this,s,i,c):[]}getDatasetMeta(s){const l=this.data.datasets[s],i=this._metasets;let c=i.filter(d=>d&&d._dataset===l).pop();return c||(c={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:l&&l.order||0,index:s,_dataset:l,_parsed:[],_sorted:!1},i.push(c)),c}getContext(){return this.$context||(this.$context=Xl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(s){const l=this.data.datasets[s];if(!l)return!1;const i=this.getDatasetMeta(s);return typeof i.hidden=="boolean"?!i.hidden:!l.hidden}setDatasetVisibility(s,l){const i=this.getDatasetMeta(s);i.hidden=!l}toggleDataVisibility(s){this._hiddenIndices[s]=!this._hiddenIndices[s]}getDataVisibility(s){return!this._hiddenIndices[s]}_updateVisibility(s,l,i){const c=i?"show":"hide",d=this.getDatasetMeta(s),u=d.controller._resolveAnimations(void 0,c);cr(l)?(d.data[l].hidden=!i,this.update()):(this.setDatasetVisibility(s,i),u.update(d,{visible:i}),this.update(h=>h.datasetIndex===s?c:void 0))}hide(s,l){this._updateVisibility(s,l,!1)}show(s,l){this._updateVisibility(s,l,!0)}_destroyDatasetMeta(s){const l=this._metasets[s];l&&l.controller&&l.controller._destroy(),delete this._metasets[s]}_stop(){let s,l;for(this.stop(),$a.remove(this),s=0,l=this.data.datasets.length;s<l;++s)this._destroyDatasetMeta(s)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:s,ctx:l}=this;this._stop(),this.config.clearCache(),s&&(this.unbindEvents(),Lx(s,l),this.platform.releaseContext(l),this.canvas=null,this.ctx=null),delete lo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...s){return this.canvas.toDataURL(...s)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const s=this._listeners,l=this.platform,i=(d,u)=>{l.addEventListener(this,d,u),s[d]=u},c=(d,u,h)=>{d.offsetX=u,d.offsetY=h,this._eventHandler(d)};Nt(this.options.events,d=>i(d,c))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const s=this._responsiveListeners,l=this.platform,i=(f,g)=>{l.addEventListener(this,f,g),s[f]=g},c=(f,g)=>{s[f]&&(l.removeEventListener(this,f,g),delete s[f])},d=(f,g)=>{this.canvas&&this.resize(f,g)};let u;const h=()=>{c("attach",h),this.attached=!0,this.resize(),i("resize",d),i("detach",u)};u=()=>{this.attached=!1,c("resize",d),this._stop(),this._resize(0,0),i("attach",h)},l.isAttached(this.canvas)?h():u()}unbindEvents(){Nt(this._listeners,(s,l)=>{this.platform.removeEventListener(this,l,s)}),this._listeners={},Nt(this._responsiveListeners,(s,l)=>{this.platform.removeEventListener(this,l,s)}),this._responsiveListeners=void 0}updateHoverStyle(s,l,i){const c=i?"set":"remove";let d,u,h,f;for(l==="dataset"&&(d=this.getDatasetMeta(s[0].datasetIndex),d.controller["_"+c+"DatasetHoverStyle"]()),h=0,f=s.length;h<f;++h){u=s[h];const g=u&&this.getDatasetMeta(u.datasetIndex).controller;g&&g[c+"HoverStyle"](u.element,u.datasetIndex,u.index)}}getActiveElements(){return this._active||[]}setActiveElements(s){const l=this._active||[],i=s.map(({datasetIndex:d,index:u})=>{const h=this.getDatasetMeta(d);if(!h)throw new Error("No dataset found at index "+d);return{datasetIndex:d,element:h.data[u],index:u}});!ho(i,l)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,l))}notifyPlugins(s,l,i){return this._plugins.notify(this,s,l,i)}isPluginEnabled(s){return this._plugins._cache.filter(l=>l.plugin.id===s).length===1}_updateHoverStyles(s,l,i){const c=this.options.hover,d=(f,g)=>f.filter(b=>!g.some(y=>b.datasetIndex===y.datasetIndex&&b.index===y.index)),u=d(l,s),h=i?s:d(s,l);u.length&&this.updateHoverStyle(u,c.mode,!1),h.length&&c.mode&&this.updateHoverStyle(h,c.mode,!0)}_eventHandler(s,l){const i={event:s,replay:l,cancelable:!0,inChartArea:this.isPointInArea(s)},c=u=>(u.options.events||this.options.events).includes(s.native.type);if(this.notifyPlugins("beforeEvent",i,c)===!1)return;const d=this._handleEvent(s,l,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,c),(d||i.changed)&&this.render(),this}_handleEvent(s,l,i){const{_active:c=[],options:d}=this,u=l,h=this._getActiveElements(s,c,i,u),f=Rw(s),g=hA(s,this._lastEvent,i,f);i&&(this._lastEvent=null,Dt(d.onHover,[s,h,this],this),f&&Dt(d.onClick,[s,h,this],this));const b=!ho(h,c);return(b||l)&&(this._active=h,this._updateHoverStyles(h,c,l)),this._lastEvent=g,b}_getActiveElements(s,l,i,c){if(s.type==="mouseout")return[];if(!i)return l;const d=this.options.hover;return this.getElementsAtEventForMode(s,d.mode,d,c)}};function gb(){return Nt(Ql.instances,a=>a._plugins.invalidate())}function mA(a,s,l){const{startAngle:i,x:c,y:d,outerRadius:u,innerRadius:h,options:f}=s,{borderWidth:g,borderJoinStyle:b}=f,y=Math.min(g/u,oa(i-l));if(a.beginPath(),a.arc(c,d,u-g/2,i+y/2,l-y/2),h>0){const v=Math.min(g/h,oa(i-l));a.arc(c,d,h+g/2,l-v/2,i+v/2,!0)}else{const v=Math.min(g/2,u*oa(i-l));if(b==="round")a.arc(c,d,v,l-Mt/2,i+Mt/2,!0);else if(b==="bevel"){const S=2*v*v,N=-S*Math.cos(l+Mt/2)+c,E=-S*Math.sin(l+Mt/2)+d,A=S*Math.cos(i+Mt/2)+c,T=S*Math.sin(i+Mt/2)+d;a.lineTo(N,E),a.lineTo(A,T)}}a.closePath(),a.moveTo(0,0),a.rect(0,0,a.canvas.width,a.canvas.height),a.clip("evenodd")}function fA(a,s,l){const{startAngle:i,pixelMargin:c,x:d,y:u,outerRadius:h,innerRadius:f}=s;let g=c/h;a.beginPath(),a.arc(d,u,h,i-g,l+g),f>c?(g=c/f,a.arc(d,u,f,l+g,i-g,!0)):a.arc(d,u,c,l+Kt,i-Kt),a.closePath(),a.clip()}function pA(a){return Lh(a,["outerStart","outerEnd","innerStart","innerEnd"])}function gA(a,s,l,i){const c=pA(a.options.borderRadius),d=(l-s)/2,u=Math.min(d,i*s/2),h=f=>{const g=(l-Math.min(d,f))*i/2;return vs(f,0,Math.min(d,g))};return{outerStart:h(c.outerStart),outerEnd:h(c.outerEnd),innerStart:vs(c.innerStart,0,u),innerEnd:vs(c.innerEnd,0,u)}}function Ul(a,s,l,i){return{x:l+a*Math.cos(s),y:i+a*Math.sin(s)}}function jo(a,s,l,i,c,d){const{x:u,y:h,startAngle:f,pixelMargin:g,innerRadius:b}=s,y=Math.max(s.outerRadius+i+l-g,0),v=b>0?b+i+l+g:0;let S=0;const N=c-f;if(i){const W=b>0?b-i:0,w=y>0?y-i:0,M=(W+w)/2,B=M!==0?N*M/(M+i):N;S=(N-B)/2}const E=Math.max(.001,N*y-l/Mt)/y,A=(N-E)/2,T=f+A+S,$=c-A-S,{outerStart:D,outerEnd:I,innerStart:G,innerEnd:L}=gA(s,v,y,$-T),_=y-D,O=y-I,H=T+D/_,C=$-I/O,P=v+G,U=v+L,Z=T+G/P,z=$-L/U;if(a.beginPath(),d){const W=(H+C)/2;if(a.arc(u,h,y,H,W),a.arc(u,h,y,W,C),I>0){const F=Ul(O,C,u,h);a.arc(F.x,F.y,I,C,$+Kt)}const w=Ul(U,$,u,h);if(a.lineTo(w.x,w.y),L>0){const F=Ul(U,z,u,h);a.arc(F.x,F.y,L,$+Kt,z+Math.PI)}const M=($-L/v+(T+G/v))/2;if(a.arc(u,h,v,$-L/v,M,!0),a.arc(u,h,v,M,T+G/v,!0),G>0){const F=Ul(P,Z,u,h);a.arc(F.x,F.y,G,Z+Math.PI,T-Kt)}const B=Ul(_,T,u,h);if(a.lineTo(B.x,B.y),D>0){const F=Ul(_,H,u,h);a.arc(F.x,F.y,D,T-Kt,H)}}else{a.moveTo(u,h);const W=Math.cos(H)*y+u,w=Math.sin(H)*y+h;a.lineTo(W,w);const M=Math.cos(C)*y+u,B=Math.sin(C)*y+h;a.lineTo(M,B)}a.closePath()}function xA(a,s,l,i,c){const{fullCircles:d,startAngle:u,circumference:h}=s;let f=s.endAngle;if(d){jo(a,s,l,i,f,c);for(let g=0;g<d;++g)a.fill();isNaN(h)||(f=u+(h%Xt||Xt))}return jo(a,s,l,i,f,c),a.fill(),f}function bA(a,s,l,i,c){const{fullCircles:d,startAngle:u,circumference:h,options:f}=s,{borderWidth:g,borderJoinStyle:b,borderDash:y,borderDashOffset:v,borderRadius:S}=f,N=f.borderAlign==="inner";if(!g)return;a.setLineDash(y||[]),a.lineDashOffset=v,N?(a.lineWidth=g*2,a.lineJoin=b||"round"):(a.lineWidth=g,a.lineJoin=b||"bevel");let E=s.endAngle;if(d){jo(a,s,l,i,E,c);for(let A=0;A<d;++A)a.stroke();isNaN(h)||(E=u+(h%Xt||Xt))}N&&fA(a,s,E),f.selfJoin&&E-u>=Mt&&S===0&&b!=="miter"&&mA(a,s,E),d||(jo(a,s,l,i,E,c),a.stroke())}class Zy extends Wl{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:s=>s!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(s){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,l,i){const c=this.getProps(["x","y"],i),{angle:d,distance:u}=Sy(c,{x:s,y:l}),{startAngle:h,endAngle:f,innerRadius:g,outerRadius:b,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),v=(this.options.spacing+this.options.borderWidth)/2,S=ht(y,f-h),N=go(d,h,f)&&h!==f,E=S>=Xt||N,A=qn(u,g+v,b+v);return E&&A}getCenterPoint(s){const{x:l,y:i,startAngle:c,endAngle:d,innerRadius:u,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:f,spacing:g}=this.options,b=(c+d)/2,y=(u+h+g+f)/2;return{x:l+Math.cos(b)*y,y:i+Math.sin(b)*y}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:l,circumference:i}=this,c=(l.offset||0)/4,d=(l.spacing||0)/2,u=l.circular;if(this.pixelMargin=l.borderAlign==="inner"?.33:0,this.fullCircles=i>Xt?Math.floor(i/Xt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const h=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(h)*c,Math.sin(h)*c);const f=1-Math.sin(Math.min(Mt,i||0)),g=c*f;s.fillStyle=l.backgroundColor,s.strokeStyle=l.borderColor,xA(s,this,g,d,u),bA(s,this,g,d,u),s.restore()}}function Jy(a,s){const{x:l,y:i,base:c,width:d,height:u}=a.getProps(["x","y","base","width","height"],s);let h,f,g,b,y;return a.horizontal?(y=u/2,h=Math.min(l,c),f=Math.max(l,c),g=i-y,b=i+y):(y=d/2,h=l-y,f=l+y,g=Math.min(i,c),b=Math.max(i,c)),{left:h,top:g,right:f,bottom:b}}function bn(a,s,l,i){return a?0:vs(s,l,i)}function yA(a,s,l){const i=a.options.borderWidth,c=a.borderSkipped,d=Ry(i);return{t:bn(c.top,d.top,0,l),r:bn(c.right,d.right,0,s),b:bn(c.bottom,d.bottom,0,l),l:bn(c.left,d.left,0,s)}}function vA(a,s,l){const{enableBorderRadius:i}=a.getProps(["enableBorderRadius"]),c=a.options.borderRadius,d=Fl(c),u=Math.min(s,l),h=a.borderSkipped,f=i||mt(c);return{topLeft:bn(!f||h.top||h.left,d.topLeft,0,u),topRight:bn(!f||h.top||h.right,d.topRight,0,u),bottomLeft:bn(!f||h.bottom||h.left,d.bottomLeft,0,u),bottomRight:bn(!f||h.bottom||h.right,d.bottomRight,0,u)}}function jA(a){const s=Jy(a),l=s.right-s.left,i=s.bottom-s.top,c=yA(a,l/2,i/2),d=vA(a,l/2,i/2);return{outer:{x:s.left,y:s.top,w:l,h:i,radius:d},inner:{x:s.left+c.l,y:s.top+c.t,w:l-c.l-c.r,h:i-c.t-c.b,radius:{topLeft:Math.max(0,d.topLeft-Math.max(c.t,c.l)),topRight:Math.max(0,d.topRight-Math.max(c.t,c.r)),bottomLeft:Math.max(0,d.bottomLeft-Math.max(c.b,c.l)),bottomRight:Math.max(0,d.bottomRight-Math.max(c.b,c.r))}}}}function rh(a,s,l,i){const c=s===null,d=l===null,h=a&&!(c&&d)&&Jy(a,i);return h&&(c||qn(s,h.left,h.right))&&(d||qn(l,h.top,h.bottom))}function NA(a){return a.topLeft||a.topRight||a.bottomLeft||a.bottomRight}function SA(a,s){a.rect(s.x,s.y,s.w,s.h)}function ch(a,s,l={}){const i=a.x!==l.x?-s:0,c=a.y!==l.y?-s:0,d=(a.x+a.w!==l.x+l.w?s:0)-i,u=(a.y+a.h!==l.y+l.h?s:0)-c;return{x:a.x+i,y:a.y+c,w:a.w+d,h:a.h+u,radius:a.radius}}class Ph extends Wl{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(s){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,s&&Object.assign(this,s)}draw(s){const{inflateAmount:l,options:{borderColor:i,backgroundColor:c}}=this,{inner:d,outer:u}=jA(this),h=NA(u.radius)?bo:SA;s.save(),(u.w!==d.w||u.h!==d.h)&&(s.beginPath(),h(s,ch(u,l,d)),s.clip(),h(s,ch(d,-l,u)),s.fillStyle=i,s.fill("evenodd")),s.beginPath(),h(s,ch(d,l)),s.fillStyle=c,s.fill(),s.restore()}inRange(s,l,i){return rh(this,s,l,i)}inXRange(s,l){return rh(this,s,null,l)}inYRange(s,l){return rh(this,null,s,l)}getCenterPoint(s){const{x:l,y:i,base:c,horizontal:d}=this.getProps(["x","y","base","horizontal"],s);return{x:d?(l+c)/2:l,y:d?i:(i+c)/2}}getRange(s){return s==="x"?this.width/2:this.height/2}}const xb=(a,s)=>{let{boxHeight:l=s,boxWidth:i=s}=a;return a.usePointStyle&&(l=Math.min(l,s),i=a.pointStyleWidth||Math.min(i,s)),{boxWidth:i,boxHeight:l,itemHeight:Math.max(s,l)}},wA=(a,s)=>a!==null&&s!==null&&a.datasetIndex===s.datasetIndex&&a.index===s.index;class bb extends Wl{constructor(s){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=s.chart,this.options=s.options,this.ctx=s.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(s,l,i){this.maxWidth=s,this.maxHeight=l,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const s=this.options.labels||{};let l=Dt(s.generateLabels,[this.chart],this)||[];s.filter&&(l=l.filter(i=>s.filter(i,this.chart.data))),s.sort&&(l=l.sort((i,c)=>s.sort(i,c,this.chart.data))),this.options.reverse&&l.reverse(),this.legendItems=l}fit(){const{options:s,ctx:l}=this;if(!s.display){this.width=this.height=0;return}const i=s.labels,c=js(i.font),d=c.size,u=this._computeTitleHeight(),{boxWidth:h,itemHeight:f}=xb(i,d);let g,b;l.font=c.string,this.isHorizontal()?(g=this.maxWidth,b=this._fitRows(u,d,h,f)+10):(b=this.maxHeight,g=this._fitCols(u,c,h,f)+10),this.width=Math.min(g,s.maxWidth||this.maxWidth),this.height=Math.min(b,s.maxHeight||this.maxHeight)}_fitRows(s,l,i,c){const{ctx:d,maxWidth:u,options:{labels:{padding:h}}}=this,f=this.legendHitBoxes=[],g=this.lineWidths=[0],b=c+h;let y=s;d.textAlign="left",d.textBaseline="middle";let v=-1,S=-b;return this.legendItems.forEach((N,E)=>{const A=i+l/2+d.measureText(N.text).width;(E===0||g[g.length-1]+A+2*h>u)&&(y+=b,g[g.length-(E>0?0:1)]=0,S+=b,v++),f[E]={left:0,top:S,row:v,width:A,height:c},g[g.length-1]+=A+h}),y}_fitCols(s,l,i,c){const{ctx:d,maxHeight:u,options:{labels:{padding:h}}}=this,f=this.legendHitBoxes=[],g=this.columnSizes=[],b=u-s;let y=h,v=0,S=0,N=0,E=0;return this.legendItems.forEach((A,T)=>{const{itemWidth:$,itemHeight:D}=CA(i,l,d,A,c);T>0&&S+D+2*h>b&&(y+=v+h,g.push({width:v,height:S}),N+=v+h,E++,v=S=0),f[T]={left:N,top:S,col:E,width:$,height:D},v=Math.max(v,$),S+=D+h}),y+=v,g.push({width:v,height:S}),y}adjustHitBoxes(){if(!this.options.display)return;const s=this._computeTitleHeight(),{legendHitBoxes:l,options:{align:i,labels:{padding:c},rtl:d}}=this,u=Hl(d,this.left,this.width);if(this.isHorizontal()){let h=0,f=Ds(i,this.left+c,this.right-this.lineWidths[h]);for(const g of l)h!==g.row&&(h=g.row,f=Ds(i,this.left+c,this.right-this.lineWidths[h])),g.top+=this.top+s+c,g.left=u.leftForLtr(u.x(f),g.width),f+=g.width+c}else{let h=0,f=Ds(i,this.top+s+c,this.bottom-this.columnSizes[h].height);for(const g of l)g.col!==h&&(h=g.col,f=Ds(i,this.top+s+c,this.bottom-this.columnSizes[h].height)),g.top=f,g.left+=this.left+c,g.left=u.leftForLtr(u.x(g.left),g.width),f+=g.height+c}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const s=this.ctx;Ih(s,this),this._draw(),Oh(s)}}_draw(){const{options:s,columnSizes:l,lineWidths:i,ctx:c}=this,{align:d,labels:u}=s,h=Ft.color,f=Hl(s.rtl,this.left,this.width),g=js(u.font),{padding:b}=u,y=g.size,v=y/2;let S;this.drawTitle(),c.textAlign=f.textAlign("left"),c.textBaseline="middle",c.lineWidth=.5,c.font=g.string;const{boxWidth:N,boxHeight:E,itemHeight:A}=xb(u,y),T=function(L,_,O){if(isNaN(N)||N<=0||isNaN(E)||E<0)return;c.save();const H=ht(O.lineWidth,1);if(c.fillStyle=ht(O.fillStyle,h),c.lineCap=ht(O.lineCap,"butt"),c.lineDashOffset=ht(O.lineDashOffset,0),c.lineJoin=ht(O.lineJoin,"miter"),c.lineWidth=H,c.strokeStyle=ht(O.strokeStyle,h),c.setLineDash(ht(O.lineDash,[])),u.usePointStyle){const C={radius:E*Math.SQRT2/2,pointStyle:O.pointStyle,rotation:O.rotation,borderWidth:H},P=f.xPlus(L,N/2),U=_+v;Dy(c,C,P,U,u.pointStyleWidth&&N)}else{const C=_+Math.max((y-E)/2,0),P=f.leftForLtr(L,N),U=Fl(O.borderRadius);c.beginPath(),Object.values(U).some(Z=>Z!==0)?bo(c,{x:P,y:C,w:N,h:E,radius:U}):c.rect(P,C,N,E),c.fill(),H!==0&&c.stroke()}c.restore()},$=function(L,_,O){xo(c,O.text,L,_+A/2,g,{strikethrough:O.hidden,textAlign:f.textAlign(O.textAlign)})},D=this.isHorizontal(),I=this._computeTitleHeight();D?S={x:Ds(d,this.left+b,this.right-i[0]),y:this.top+b+I,line:0}:S={x:this.left+b,y:Ds(d,this.top+I+b,this.bottom-l[0].height),line:0},zy(this.ctx,s.textDirection);const G=A+b;this.legendItems.forEach((L,_)=>{c.strokeStyle=L.fontColor,c.fillStyle=L.fontColor;const O=c.measureText(L.text).width,H=f.textAlign(L.textAlign||(L.textAlign=u.textAlign)),C=N+v+O;let P=S.x,U=S.y;f.setWidth(this.width),D?_>0&&P+C+b>this.right&&(U=S.y+=G,S.line++,P=S.x=Ds(d,this.left+b,this.right-i[S.line])):_>0&&U+G>this.bottom&&(P=S.x=P+l[S.line].width+b,S.line++,U=S.y=Ds(d,this.top+I+b,this.bottom-l[S.line].height));const Z=f.x(P);if(T(Z,U,L),P=qw(H,P+N+v,D?P+C:this.right,s.rtl),$(f.x(P),U,L),D)S.x+=C+b;else if(typeof L.text!="string"){const z=g.lineHeight;S.y+=ev(L,z)+b}else S.y+=G}),Uy(this.ctx,s.textDirection)}drawTitle(){const s=this.options,l=s.title,i=js(l.font),c=ea(l.padding);if(!l.display)return;const d=Hl(s.rtl,this.left,this.width),u=this.ctx,h=l.position,f=i.size/2,g=c.top+f;let b,y=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),b=this.top+g,y=Ds(s.align,y,this.right-v);else{const N=this.columnSizes.reduce((E,A)=>Math.max(E,A.height),0);b=g+Ds(s.align,this.top,this.bottom-N-s.labels.padding-this._computeTitleHeight())}const S=Ds(h,y,y+v);u.textAlign=d.textAlign(Ty(h)),u.textBaseline="middle",u.strokeStyle=l.color,u.fillStyle=l.color,u.font=i.string,xo(u,l.text,S,b,i)}_computeTitleHeight(){const s=this.options.title,l=js(s.font),i=ea(s.padding);return s.display?l.lineHeight+i.height:0}_getLegendItemAt(s,l){let i,c,d;if(qn(s,this.left,this.right)&&qn(l,this.top,this.bottom)){for(d=this.legendHitBoxes,i=0;i<d.length;++i)if(c=d[i],qn(s,c.left,c.left+c.width)&&qn(l,c.top,c.top+c.height))return this.legendItems[i]}return null}handleEvent(s){const l=this.options;if(!TA(s.type,l))return;const i=this._getLegendItemAt(s.x,s.y);if(s.type==="mousemove"||s.type==="mouseout"){const c=this._hoveredItem,d=wA(c,i);c&&!d&&Dt(l.onLeave,[s,c,this],this),this._hoveredItem=i,i&&!d&&Dt(l.onHover,[s,i,this],this)}else i&&Dt(l.onClick,[s,i,this],this)}}function CA(a,s,l,i,c){const d=AA(i,a,s,l),u=EA(c,i,s.lineHeight);return{itemWidth:d,itemHeight:u}}function AA(a,s,l,i){let c=a.text;return c&&typeof c!="string"&&(c=c.reduce((d,u)=>d.length>u.length?d:u)),s+l.size/2+i.measureText(c).width}function EA(a,s,l){let i=a;return typeof s.text!="string"&&(i=ev(s,l)),i}function ev(a,s){const l=a.text?a.text.length:0;return s*l}function TA(a,s){return!!((a==="mousemove"||a==="mouseout")&&(s.onHover||s.onLeave)||s.onClick&&(a==="click"||a==="mouseup"))}var qh={id:"legend",_element:bb,start(a,s,l){const i=a.legend=new bb({ctx:a.ctx,options:l,chart:a});xn.configure(a,i,l),xn.addBox(a,i)},stop(a){xn.removeBox(a,a.legend),delete a.legend},beforeUpdate(a,s,l){const i=a.legend;xn.configure(a,i,l),i.options=l},afterUpdate(a){const s=a.legend;s.buildLabels(),s.adjustHitBoxes()},afterEvent(a,s){s.replay||a.legend.handleEvent(s.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(a,s,l){const i=s.datasetIndex,c=l.chart;c.isDatasetVisible(i)?(c.hide(i),s.hidden=!0):(c.show(i),s.hidden=!1)},onHover:null,onLeave:null,labels:{color:a=>a.chart.options.color,boxWidth:40,padding:10,generateLabels(a){const s=a.data.datasets,{labels:{usePointStyle:l,pointStyle:i,textAlign:c,color:d,useBorderRadius:u,borderRadius:h}}=a.legend.options;return a._getSortedDatasetMetas().map(f=>{const g=f.controller.getStyle(l?0:void 0),b=ea(g.borderWidth);return{text:s[f.index].label,fillStyle:g.backgroundColor,fontColor:d,hidden:!f.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(b.width+b.height)/4,strokeStyle:g.borderColor,pointStyle:i||g.pointStyle,rotation:g.rotation,textAlign:c||g.textAlign,borderRadius:u&&(h||g.borderRadius),datasetIndex:f.index}},this)}},title:{color:a=>a.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:a=>!a.startsWith("on"),labels:{_scriptable:a=>!["generateLabels","filter","sort"].includes(a)}}};const Zi={average(a){if(!a.length)return!1;let s,l,i=new Set,c=0,d=0;for(s=0,l=a.length;s<l;++s){const h=a[s].element;if(h&&h.hasValue()){const f=h.tooltipPosition();i.add(f.x),c+=f.y,++d}}return d===0||i.size===0?!1:{x:[...i].reduce((h,f)=>h+f)/i.size,y:c/d}},nearest(a,s){if(!a.length)return!1;let l=s.x,i=s.y,c=Number.POSITIVE_INFINITY,d,u,h;for(d=0,u=a.length;d<u;++d){const f=a[d].element;if(f&&f.hasValue()){const g=f.getCenterPoint(),b=Bw(s,g);b<c&&(c=b,h=f)}}if(h){const f=h.tooltipPosition();l=f.x,i=f.y}return{x:l,y:i}}};function ra(a,s){return s&&(Zt(s)?Array.prototype.push.apply(a,s):a.push(s)),a}function Ia(a){return(typeof a=="string"||a instanceof String)&&a.indexOf(`
`)>-1?a.split(`
`):a}function _A(a,s){const{element:l,datasetIndex:i,index:c}=s,d=a.getDatasetMeta(i).controller,{label:u,value:h}=d.getLabelAndValue(c);return{chart:a,label:u,parsed:d.getParsed(c),raw:a.data.datasets[i].data[c],formattedValue:h,dataset:d.getDataset(),dataIndex:c,datasetIndex:i,element:l}}function yb(a,s){const l=a.chart.ctx,{body:i,footer:c,title:d}=a,{boxWidth:u,boxHeight:h}=s,f=js(s.bodyFont),g=js(s.titleFont),b=js(s.footerFont),y=d.length,v=c.length,S=i.length,N=ea(s.padding);let E=N.height,A=0,T=i.reduce((I,G)=>I+G.before.length+G.lines.length+G.after.length,0);if(T+=a.beforeBody.length+a.afterBody.length,y&&(E+=y*g.lineHeight+(y-1)*s.titleSpacing+s.titleMarginBottom),T){const I=s.displayColors?Math.max(h,f.lineHeight):f.lineHeight;E+=S*I+(T-S)*f.lineHeight+(T-1)*s.bodySpacing}v&&(E+=s.footerMarginTop+v*b.lineHeight+(v-1)*s.footerSpacing);let $=0;const D=function(I){A=Math.max(A,l.measureText(I).width+$)};return l.save(),l.font=g.string,Nt(a.title,D),l.font=f.string,Nt(a.beforeBody.concat(a.afterBody),D),$=s.displayColors?u+2+s.boxPadding:0,Nt(i,I=>{Nt(I.before,D),Nt(I.lines,D),Nt(I.after,D)}),$=0,l.font=b.string,Nt(a.footer,D),l.restore(),A+=N.width,{width:A,height:E}}function kA(a,s){const{y:l,height:i}=s;return l<i/2?"top":l>a.height-i/2?"bottom":"center"}function DA(a,s,l,i){const{x:c,width:d}=i,u=l.caretSize+l.caretPadding;if(a==="left"&&c+d+u>s.width||a==="right"&&c-d-u<0)return!0}function MA(a,s,l,i){const{x:c,width:d}=l,{width:u,chartArea:{left:h,right:f}}=a;let g="center";return i==="center"?g=c<=(h+f)/2?"left":"right":c<=d/2?g="left":c>=u-d/2&&(g="right"),DA(g,a,s,l)&&(g="center"),g}function vb(a,s,l){const i=l.yAlign||s.yAlign||kA(a,l);return{xAlign:l.xAlign||s.xAlign||MA(a,s,l,i),yAlign:i}}function RA(a,s){let{x:l,width:i}=a;return s==="right"?l-=i:s==="center"&&(l-=i/2),l}function $A(a,s,l){let{y:i,height:c}=a;return s==="top"?i+=l:s==="bottom"?i-=c+l:i-=c/2,i}function jb(a,s,l,i){const{caretSize:c,caretPadding:d,cornerRadius:u}=a,{xAlign:h,yAlign:f}=l,g=c+d,{topLeft:b,topRight:y,bottomLeft:v,bottomRight:S}=Fl(u);let N=RA(s,h);const E=$A(s,f,g);return f==="center"?h==="left"?N+=g:h==="right"&&(N-=g):h==="left"?N-=Math.max(b,v)+c:h==="right"&&(N+=Math.max(y,S)+c),{x:vs(N,0,i.width-s.width),y:vs(E,0,i.height-s.height)}}function Pc(a,s,l){const i=ea(l.padding);return s==="center"?a.x+a.width/2:s==="right"?a.x+a.width-i.right:a.x+i.left}function Nb(a){return ra([],Ia(a))}function IA(a,s,l){return Xl(a,{tooltip:s,tooltipItems:l,type:"tooltip"})}function Sb(a,s){const l=s&&s.dataset&&s.dataset.tooltip&&s.dataset.tooltip.callbacks;return l?a.override(l):a}const tv={beforeTitle:Ra,title(a){if(a.length>0){const s=a[0],l=s.chart.data.labels,i=l?l.length:0;if(this&&this.options&&this.options.mode==="dataset")return s.dataset.label||"";if(s.label)return s.label;if(i>0&&s.dataIndex<i)return l[s.dataIndex]}return""},afterTitle:Ra,beforeBody:Ra,beforeLabel:Ra,label(a){if(this&&this.options&&this.options.mode==="dataset")return a.label+": "+a.formattedValue||a.formattedValue;let s=a.dataset.label||"";s&&(s+=": ");const l=a.formattedValue;return Et(l)||(s+=l),s},labelColor(a){const l=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{borderColor:l.borderColor,backgroundColor:l.backgroundColor,borderWidth:l.borderWidth,borderDash:l.borderDash,borderDashOffset:l.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(a){const l=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{pointStyle:l.pointStyle,rotation:l.rotation}},afterLabel:Ra,afterBody:Ra,beforeFooter:Ra,footer:Ra,afterFooter:Ra};function bs(a,s,l,i){const c=a[s].call(l,i);return typeof c>"u"?tv[s].call(l,i):c}class wb extends Wl{static positioners=Zi;constructor(s){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=s.chart,this.options=s.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(s){this.options=s,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const s=this._cachedAnimations;if(s)return s;const l=this.chart,i=this.options.setContext(this.getContext()),c=i.enabled&&l.options.animation&&i.animations,d=new By(this.chart,c);return c._cacheable&&(this._cachedAnimations=Object.freeze(d)),d}getContext(){return this.$context||(this.$context=IA(this.chart.getContext(),this,this._tooltipItems))}getTitle(s,l){const{callbacks:i}=l,c=bs(i,"beforeTitle",this,s),d=bs(i,"title",this,s),u=bs(i,"afterTitle",this,s);let h=[];return h=ra(h,Ia(c)),h=ra(h,Ia(d)),h=ra(h,Ia(u)),h}getBeforeBody(s,l){return Nb(bs(l.callbacks,"beforeBody",this,s))}getBody(s,l){const{callbacks:i}=l,c=[];return Nt(s,d=>{const u={before:[],lines:[],after:[]},h=Sb(i,d);ra(u.before,Ia(bs(h,"beforeLabel",this,d))),ra(u.lines,bs(h,"label",this,d)),ra(u.after,Ia(bs(h,"afterLabel",this,d))),c.push(u)}),c}getAfterBody(s,l){return Nb(bs(l.callbacks,"afterBody",this,s))}getFooter(s,l){const{callbacks:i}=l,c=bs(i,"beforeFooter",this,s),d=bs(i,"footer",this,s),u=bs(i,"afterFooter",this,s);let h=[];return h=ra(h,Ia(c)),h=ra(h,Ia(d)),h=ra(h,Ia(u)),h}_createItems(s){const l=this._active,i=this.chart.data,c=[],d=[],u=[];let h=[],f,g;for(f=0,g=l.length;f<g;++f)h.push(_A(this.chart,l[f]));return s.filter&&(h=h.filter((b,y,v)=>s.filter(b,y,v,i))),s.itemSort&&(h=h.sort((b,y)=>s.itemSort(b,y,i))),Nt(h,b=>{const y=Sb(s.callbacks,b);c.push(bs(y,"labelColor",this,b)),d.push(bs(y,"labelPointStyle",this,b)),u.push(bs(y,"labelTextColor",this,b))}),this.labelColors=c,this.labelPointStyles=d,this.labelTextColors=u,this.dataPoints=h,h}update(s,l){const i=this.options.setContext(this.getContext()),c=this._active;let d,u=[];if(!c.length)this.opacity!==0&&(d={opacity:0});else{const h=Zi[i.position].call(this,c,this._eventPosition);u=this._createItems(i),this.title=this.getTitle(u,i),this.beforeBody=this.getBeforeBody(u,i),this.body=this.getBody(u,i),this.afterBody=this.getAfterBody(u,i),this.footer=this.getFooter(u,i);const f=this._size=yb(this,i),g=Object.assign({},h,f),b=vb(this.chart,i,g),y=jb(i,g,b,this.chart);this.xAlign=b.xAlign,this.yAlign=b.yAlign,d={opacity:1,x:y.x,y:y.y,width:f.width,height:f.height,caretX:h.x,caretY:h.y}}this._tooltipItems=u,this.$context=void 0,d&&this._resolveAnimations().update(this,d),s&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:l})}drawCaret(s,l,i,c){const d=this.getCaretPosition(s,i,c);l.lineTo(d.x1,d.y1),l.lineTo(d.x2,d.y2),l.lineTo(d.x3,d.y3)}getCaretPosition(s,l,i){const{xAlign:c,yAlign:d}=this,{caretSize:u,cornerRadius:h}=i,{topLeft:f,topRight:g,bottomLeft:b,bottomRight:y}=Fl(h),{x:v,y:S}=s,{width:N,height:E}=l;let A,T,$,D,I,G;return d==="center"?(I=S+E/2,c==="left"?(A=v,T=A-u,D=I+u,G=I-u):(A=v+N,T=A+u,D=I-u,G=I+u),$=A):(c==="left"?T=v+Math.max(f,b)+u:c==="right"?T=v+N-Math.max(g,y)-u:T=this.caretX,d==="top"?(D=S,I=D-u,A=T-u,$=T+u):(D=S+E,I=D+u,A=T+u,$=T-u),G=D),{x1:A,x2:T,x3:$,y1:D,y2:I,y3:G}}drawTitle(s,l,i){const c=this.title,d=c.length;let u,h,f;if(d){const g=Hl(i.rtl,this.x,this.width);for(s.x=Pc(this,i.titleAlign,i),l.textAlign=g.textAlign(i.titleAlign),l.textBaseline="middle",u=js(i.titleFont),h=i.titleSpacing,l.fillStyle=i.titleColor,l.font=u.string,f=0;f<d;++f)l.fillText(c[f],g.x(s.x),s.y+u.lineHeight/2),s.y+=u.lineHeight+h,f+1===d&&(s.y+=i.titleMarginBottom-h)}}_drawColorBox(s,l,i,c,d){const u=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:f,boxWidth:g}=d,b=js(d.bodyFont),y=Pc(this,"left",d),v=c.x(y),S=f<b.lineHeight?(b.lineHeight-f)/2:0,N=l.y+S;if(d.usePointStyle){const E={radius:Math.min(g,f)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},A=c.leftForLtr(v,g)+g/2,T=N+f/2;s.strokeStyle=d.multiKeyBackground,s.fillStyle=d.multiKeyBackground,zx(s,E,A,T),s.strokeStyle=u.borderColor,s.fillStyle=u.backgroundColor,zx(s,E,A,T)}else{s.lineWidth=mt(u.borderWidth)?Math.max(...Object.values(u.borderWidth)):u.borderWidth||1,s.strokeStyle=u.borderColor,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset||0;const E=c.leftForLtr(v,g),A=c.leftForLtr(c.xPlus(v,1),g-2),T=Fl(u.borderRadius);Object.values(T).some($=>$!==0)?(s.beginPath(),s.fillStyle=d.multiKeyBackground,bo(s,{x:E,y:N,w:g,h:f,radius:T}),s.fill(),s.stroke(),s.fillStyle=u.backgroundColor,s.beginPath(),bo(s,{x:A,y:N+1,w:g-2,h:f-2,radius:T}),s.fill()):(s.fillStyle=d.multiKeyBackground,s.fillRect(E,N,g,f),s.strokeRect(E,N,g,f),s.fillStyle=u.backgroundColor,s.fillRect(A,N+1,g-2,f-2))}s.fillStyle=this.labelTextColors[i]}drawBody(s,l,i){const{body:c}=this,{bodySpacing:d,bodyAlign:u,displayColors:h,boxHeight:f,boxWidth:g,boxPadding:b}=i,y=js(i.bodyFont);let v=y.lineHeight,S=0;const N=Hl(i.rtl,this.x,this.width),E=function(O){l.fillText(O,N.x(s.x+S),s.y+v/2),s.y+=v+d},A=N.textAlign(u);let T,$,D,I,G,L,_;for(l.textAlign=u,l.textBaseline="middle",l.font=y.string,s.x=Pc(this,A,i),l.fillStyle=i.bodyColor,Nt(this.beforeBody,E),S=h&&A!=="right"?u==="center"?g/2+b:g+2+b:0,I=0,L=c.length;I<L;++I){for(T=c[I],$=this.labelTextColors[I],l.fillStyle=$,Nt(T.before,E),D=T.lines,h&&D.length&&(this._drawColorBox(l,s,I,N,i),v=Math.max(y.lineHeight,f)),G=0,_=D.length;G<_;++G)E(D[G]),v=y.lineHeight;Nt(T.after,E)}S=0,v=y.lineHeight,Nt(this.afterBody,E),s.y-=d}drawFooter(s,l,i){const c=this.footer,d=c.length;let u,h;if(d){const f=Hl(i.rtl,this.x,this.width);for(s.x=Pc(this,i.footerAlign,i),s.y+=i.footerMarginTop,l.textAlign=f.textAlign(i.footerAlign),l.textBaseline="middle",u=js(i.footerFont),l.fillStyle=i.footerColor,l.font=u.string,h=0;h<d;++h)l.fillText(c[h],f.x(s.x),s.y+u.lineHeight/2),s.y+=u.lineHeight+i.footerSpacing}}drawBackground(s,l,i,c){const{xAlign:d,yAlign:u}=this,{x:h,y:f}=s,{width:g,height:b}=i,{topLeft:y,topRight:v,bottomLeft:S,bottomRight:N}=Fl(c.cornerRadius);l.fillStyle=c.backgroundColor,l.strokeStyle=c.borderColor,l.lineWidth=c.borderWidth,l.beginPath(),l.moveTo(h+y,f),u==="top"&&this.drawCaret(s,l,i,c),l.lineTo(h+g-v,f),l.quadraticCurveTo(h+g,f,h+g,f+v),u==="center"&&d==="right"&&this.drawCaret(s,l,i,c),l.lineTo(h+g,f+b-N),l.quadraticCurveTo(h+g,f+b,h+g-N,f+b),u==="bottom"&&this.drawCaret(s,l,i,c),l.lineTo(h+S,f+b),l.quadraticCurveTo(h,f+b,h,f+b-S),u==="center"&&d==="left"&&this.drawCaret(s,l,i,c),l.lineTo(h,f+y),l.quadraticCurveTo(h,f,h+y,f),l.closePath(),l.fill(),c.borderWidth>0&&l.stroke()}_updateAnimationTarget(s){const l=this.chart,i=this.$animations,c=i&&i.x,d=i&&i.y;if(c||d){const u=Zi[s.position].call(this,this._active,this._eventPosition);if(!u)return;const h=this._size=yb(this,s),f=Object.assign({},u,this._size),g=vb(l,s,f),b=jb(s,f,g,l);(c._to!==b.x||d._to!==b.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=h.width,this.height=h.height,this.caretX=u.x,this.caretY=u.y,this._resolveAnimations().update(this,b))}}_willRender(){return!!this.opacity}draw(s){const l=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(l);const c={width:this.width,height:this.height},d={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const u=ea(l.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;l.enabled&&h&&(s.save(),s.globalAlpha=i,this.drawBackground(d,s,c,l),zy(s,l.textDirection),d.y+=u.top,this.drawTitle(d,s,l),this.drawBody(d,s,l),this.drawFooter(d,s,l),Uy(s,l.textDirection),s.restore())}getActiveElements(){return this._active||[]}setActiveElements(s,l){const i=this._active,c=s.map(({datasetIndex:h,index:f})=>{const g=this.chart.getDatasetMeta(h);if(!g)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:g.data[f],index:f}}),d=!ho(i,c),u=this._positionChanged(c,l);(d||u)&&(this._active=c,this._eventPosition=l,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(s,l,i=!0){if(l&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const c=this.options,d=this._active||[],u=this._getActiveElements(s,d,l,i),h=this._positionChanged(u,s),f=l||!ho(u,d)||h;return f&&(this._active=u,(c.enabled||c.external)&&(this._eventPosition={x:s.x,y:s.y},this.update(!0,l))),f}_getActiveElements(s,l,i,c){const d=this.options;if(s.type==="mouseout")return[];if(!c)return l.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const u=this.chart.getElementsAtEventForMode(s,d.mode,d,i);return d.reverse&&u.reverse(),u}_positionChanged(s,l){const{caretX:i,caretY:c,options:d}=this,u=Zi[d.position].call(this,s,l);return u!==!1&&(i!==u.x||c!==u.y)}}var Gh={id:"tooltip",_element:wb,positioners:Zi,afterInit(a,s,l){l&&(a.tooltip=new wb({chart:a,options:l}))},beforeUpdate(a,s,l){a.tooltip&&a.tooltip.initialize(l)},reset(a,s,l){a.tooltip&&a.tooltip.initialize(l)},afterDraw(a){const s=a.tooltip;if(s&&s._willRender()){const l={tooltip:s};if(a.notifyPlugins("beforeTooltipDraw",{...l,cancelable:!0})===!1)return;s.draw(a.ctx),a.notifyPlugins("afterTooltipDraw",l)}},afterEvent(a,s){if(a.tooltip){const l=s.replay;a.tooltip.handleEvent(s.event,l,s.inChartArea)&&(s.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(a,s)=>s.bodyFont.size,boxWidth:(a,s)=>s.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:tv},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:a=>a!=="filter"&&a!=="itemSort"&&a!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const OA=(a,s,l,i)=>(typeof s=="string"?(l=a.push(s)-1,i.unshift({index:l,label:s})):isNaN(s)&&(l=null),l);function LA(a,s,l,i){const c=a.indexOf(s);if(c===-1)return OA(a,s,l,i);const d=a.lastIndexOf(s);return c!==d?l:c}const zA=(a,s)=>a===null?null:vs(Math.round(a),0,s);function Cb(a){const s=this.getLabels();return a>=0&&a<s.length?s[a]:a}class Xh extends Kl{static id="category";static defaults={ticks:{callback:Cb}};constructor(s){super(s),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(s){const l=this._addedLabels;if(l.length){const i=this.getLabels();for(const{index:c,label:d}of l)i[c]===d&&i.splice(c,1);this._addedLabels=[]}super.init(s)}parse(s,l){if(Et(s))return null;const i=this.getLabels();return l=isFinite(l)&&i[l]===s?l:LA(i,s,ht(l,s),this._addedLabels),zA(l,i.length-1)}determineDataLimits(){const{minDefined:s,maxDefined:l}=this.getUserBounds();let{min:i,max:c}=this.getMinMax(!0);this.options.bounds==="ticks"&&(s||(i=0),l||(c=this.getLabels().length-1)),this.min=i,this.max=c}buildTicks(){const s=this.min,l=this.max,i=this.options.offset,c=[];let d=this.getLabels();d=s===0&&l===d.length-1?d:d.slice(s,l+1),this._valueRange=Math.max(d.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let u=s;u<=l;u++)c.push({value:u});return c}getLabelForValue(s){return Cb.call(this,s)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(s){return typeof s!="number"&&(s=this.parse(s)),s===null?NaN:this.getPixelForDecimal((s-this._startValue)/this._valueRange)}getPixelForTick(s){const l=this.ticks;return s<0||s>l.length-1?null:this.getPixelForValue(l[s].value)}getValueForPixel(s){return Math.round(this._startValue+this.getDecimalForPixel(s)*this._valueRange)}getBasePixel(){return this.bottom}}function UA(a,s){const l=[],{bounds:c,step:d,min:u,max:h,precision:f,count:g,maxTicks:b,maxDigits:y,includeBounds:v}=a,S=d||1,N=b-1,{min:E,max:A}=s,T=!Et(u),$=!Et(h),D=!Et(g),I=(A-E)/(y+1);let G=_x((A-E)/N/S)*S,L,_,O,H;if(G<1e-14&&!T&&!$)return[{value:E},{value:A}];H=Math.ceil(A/G)-Math.floor(E/G),H>N&&(G=_x(H*G/N/S)*S),Et(f)||(L=Math.pow(10,f),G=Math.ceil(G*L)/L),c==="ticks"?(_=Math.floor(E/G)*G,O=Math.ceil(A/G)*G):(_=E,O=A),T&&$&&d&&Lw((h-u)/d,G/1e3)?(H=Math.round(Math.min((h-u)/G,b)),G=(h-u)/H,_=u,O=h):D?(_=T?u:_,O=$?h:O,H=g-1,G=(O-_)/H):(H=(O-_)/G,ao(H,Math.round(H),G/1e3)?H=Math.round(H):H=Math.ceil(H));const C=Math.max(kx(G),kx(_));L=Math.pow(10,Et(f)?C:f),_=Math.round(_*L)/L,O=Math.round(O*L)/L;let P=0;for(T&&(v&&_!==u?(l.push({value:u}),_<u&&P++,ao(Math.round((_+P*G)*L)/L,u,Ab(u,I,a))&&P++):_<u&&P++);P<H;++P){const U=Math.round((_+P*G)*L)/L;if($&&U>h)break;l.push({value:U})}return $&&v&&O!==h?l.length&&ao(l[l.length-1].value,h,Ab(h,I,a))?l[l.length-1].value=h:l.push({value:h}):(!$||O===h)&&l.push({value:O}),l}function Ab(a,s,{horizontal:l,minRotation:i}){const c=Ua(i),d=(l?Math.sin(c):Math.cos(c))||.001,u=.75*s*(""+a).length;return Math.min(s/d,u)}class BA extends Kl{constructor(s){super(s),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(s,l){return Et(s)||(typeof s=="number"||s instanceof Number)&&!isFinite(+s)?null:+s}handleTickRangeOptions(){const{beginAtZero:s}=this.options,{minDefined:l,maxDefined:i}=this.getUserBounds();let{min:c,max:d}=this;const u=f=>c=l?c:f,h=f=>d=i?d:f;if(s){const f=jn(c),g=jn(d);f<0&&g<0?h(0):f>0&&g>0&&u(0)}if(c===d){let f=d===0?1:Math.abs(d*.05);h(d+f),s||u(c-f)}this.min=c,this.max=d}getTickLimit(){const s=this.options.ticks;let{maxTicksLimit:l,stepSize:i}=s,c;return i?(c=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,c>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${c} ticks. Limiting to 1000.`),c=1e3)):(c=this.computeTickLimit(),l=l||11),l&&(c=Math.min(l,c)),c}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const s=this.options,l=s.ticks;let i=this.getTickLimit();i=Math.max(2,i);const c={maxTicks:i,bounds:s.bounds,min:s.min,max:s.max,precision:l.precision,step:l.stepSize,count:l.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:l.minRotation||0,includeBounds:l.includeBounds!==!1},d=this._range||this,u=UA(c,d);return s.bounds==="ticks"&&zw(u,this,"value"),s.reverse?(u.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),u}configure(){const s=this.ticks;let l=this.min,i=this.max;if(super.configure(),this.options.offset&&s.length){const c=(i-l)/Math.max(s.length-1,1)/2;l-=c,i+=c}this._startValue=l,this._endValue=i,this._valueRange=i-l}getLabelForValue(s){return $h(s,this.chart.options.locale,this.options.ticks.format)}}class Wh extends BA{static id="linear";static defaults={ticks:{callback:ky.formatters.numeric}};determineDataLimits(){const{min:s,max:l}=this.getMinMax(!0);this.min=Gs(s)?s:0,this.max=Gs(l)?l:1,this.handleTickRangeOptions()}computeTickLimit(){const s=this.isHorizontal(),l=s?this.width:this.height,i=Ua(this.options.ticks.minRotation),c=(s?Math.sin(i):Math.cos(i))||.001,d=this._resolveTickFontOptions(0);return Math.ceil(l/Math.min(40,d.lineHeight/c))}getPixelForValue(s){return s===null?NaN:this.getPixelForDecimal((s-this._startValue)/this._valueRange)}getValueForPixel(s){return this._startValue+this.getDecimalForPixel(s)*this._valueRange}}const ko={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ys=Object.keys(ko);function Eb(a,s){return a-s}function Tb(a,s){if(Et(s))return null;const l=a._adapter,{parser:i,round:c,isoWeekday:d}=a._parseOpts;let u=s;return typeof i=="function"&&(u=i(u)),Gs(u)||(u=typeof i=="string"?l.parse(u,i):l.parse(u)),u===null?null:(c&&(u=c==="week"&&(po(d)||d===!0)?l.startOf(u,"isoWeek",d):l.startOf(u,c)),+u)}function _b(a,s,l,i){const c=ys.length;for(let d=ys.indexOf(a);d<c-1;++d){const u=ko[ys[d]],h=u.steps?u.steps:Number.MAX_SAFE_INTEGER;if(u.common&&Math.ceil((l-s)/(h*u.size))<=i)return ys[d]}return ys[c-1]}function FA(a,s,l,i,c){for(let d=ys.length-1;d>=ys.indexOf(l);d--){const u=ys[d];if(ko[u].common&&a._adapter.diff(c,i,u)>=s-1)return u}return ys[l?ys.indexOf(l):0]}function HA(a){for(let s=ys.indexOf(a)+1,l=ys.length;s<l;++s)if(ko[ys[s]].common)return ys[s]}function kb(a,s,l){if(!l)a[s]=!0;else if(l.length){const{lo:i,hi:c}=Rh(l,s),d=l[i]>=s?l[i]:l[c];a[d]=!0}}function YA(a,s,l,i){const c=a._adapter,d=+c.startOf(s[0].value,i),u=s[s.length-1].value;let h,f;for(h=d;h<=u;h=+c.add(h,1,i))f=l[h],f>=0&&(s[f].major=!0);return s}function Db(a,s,l){const i=[],c={},d=s.length;let u,h;for(u=0;u<d;++u)h=s[u],c[h]=u,i.push({value:h,major:!1});return d===0||!l?i:YA(a,i,c,l)}class Mb extends Kl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(s){super(s),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(s,l={}){const i=s.time||(s.time={}),c=this._adapter=new nC._date(s.adapters.date);c.init(l),er(i.displayFormats,c.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(s),this._normalized=l.normalized}parse(s,l){return s===void 0?null:Tb(this,s)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const s=this.options,l=this._adapter,i=s.time.unit||"day";let{min:c,max:d,minDefined:u,maxDefined:h}=this.getUserBounds();function f(g){!u&&!isNaN(g.min)&&(c=Math.min(c,g.min)),!h&&!isNaN(g.max)&&(d=Math.max(d,g.max))}(!u||!h)&&(f(this._getLabelBounds()),(s.bounds!=="ticks"||s.ticks.source!=="labels")&&f(this.getMinMax(!1))),c=Gs(c)&&!isNaN(c)?c:+l.startOf(Date.now(),i),d=Gs(d)&&!isNaN(d)?d:+l.endOf(Date.now(),i)+1,this.min=Math.min(c,d-1),this.max=Math.max(c+1,d)}_getLabelBounds(){const s=this.getLabelTimestamps();let l=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return s.length&&(l=s[0],i=s[s.length-1]),{min:l,max:i}}buildTicks(){const s=this.options,l=s.time,i=s.ticks,c=i.source==="labels"?this.getLabelTimestamps():this._generate();s.bounds==="ticks"&&c.length&&(this.min=this._userMin||c[0],this.max=this._userMax||c[c.length-1]);const d=this.min,u=this.max,h=Yw(c,d,u);return this._unit=l.unit||(i.autoSkip?_b(l.minUnit,this.min,this.max,this._getLabelCapacity(d)):FA(this,h.length,l.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:HA(this._unit),this.initOffsets(c),s.reverse&&h.reverse(),Db(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(s=>+s.value))}initOffsets(s=[]){let l=0,i=0,c,d;this.options.offset&&s.length&&(c=this.getDecimalForValue(s[0]),s.length===1?l=1-c:l=(this.getDecimalForValue(s[1])-c)/2,d=this.getDecimalForValue(s[s.length-1]),s.length===1?i=d:i=(d-this.getDecimalForValue(s[s.length-2]))/2);const u=s.length<3?.5:.25;l=vs(l,0,u),i=vs(i,0,u),this._offsets={start:l,end:i,factor:1/(l+1+i)}}_generate(){const s=this._adapter,l=this.min,i=this.max,c=this.options,d=c.time,u=d.unit||_b(d.minUnit,l,i,this._getLabelCapacity(l)),h=ht(c.ticks.stepSize,1),f=u==="week"?d.isoWeekday:!1,g=po(f)||f===!0,b={};let y=l,v,S;if(g&&(y=+s.startOf(y,"isoWeek",f)),y=+s.startOf(y,g?"day":u),s.diff(i,l,u)>1e5*h)throw new Error(l+" and "+i+" are too far apart with stepSize of "+h+" "+u);const N=c.ticks.source==="data"&&this.getDataTimestamps();for(v=y,S=0;v<i;v=+s.add(v,h,u),S++)kb(b,v,N);return(v===i||c.bounds==="ticks"||S===1)&&kb(b,v,N),Object.keys(b).sort(Eb).map(E=>+E)}getLabelForValue(s){const l=this._adapter,i=this.options.time;return i.tooltipFormat?l.format(s,i.tooltipFormat):l.format(s,i.displayFormats.datetime)}format(s,l){const c=this.options.time.displayFormats,d=this._unit,u=l||c[d];return this._adapter.format(s,u)}_tickFormatFunction(s,l,i,c){const d=this.options,u=d.ticks.callback;if(u)return Dt(u,[s,l,i],this);const h=d.time.displayFormats,f=this._unit,g=this._majorUnit,b=f&&h[f],y=g&&h[g],v=i[l],S=g&&y&&v&&v.major;return this._adapter.format(s,c||(S?y:b))}generateTickLabels(s){let l,i,c;for(l=0,i=s.length;l<i;++l)c=s[l],c.label=this._tickFormatFunction(c.value,l,s)}getDecimalForValue(s){return s===null?NaN:(s-this.min)/(this.max-this.min)}getPixelForValue(s){const l=this._offsets,i=this.getDecimalForValue(s);return this.getPixelForDecimal((l.start+i)*l.factor)}getValueForPixel(s){const l=this._offsets,i=this.getDecimalForPixel(s)/l.factor-l.end;return this.min+i*(this.max-this.min)}_getLabelSize(s){const l=this.options.ticks,i=this.ctx.measureText(s).width,c=Ua(this.isHorizontal()?l.maxRotation:l.minRotation),d=Math.cos(c),u=Math.sin(c),h=this._resolveTickFontOptions(0).size;return{w:i*d+h*u,h:i*u+h*d}}_getLabelCapacity(s){const l=this.options.time,i=l.displayFormats,c=i[l.unit]||i.millisecond,d=this._tickFormatFunction(s,0,Db(this,[s],this._majorUnit),c),u=this._getLabelSize(d),h=Math.floor(this.isHorizontal()?this.width/u.w:this.height/u.h)-1;return h>0?h:1}getDataTimestamps(){let s=this._cache.data||[],l,i;if(s.length)return s;const c=this.getMatchingVisibleMetas();if(this._normalized&&c.length)return this._cache.data=c[0].controller.getAllParsedValues(this);for(l=0,i=c.length;l<i;++l)s=s.concat(c[l].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){const s=this._cache.labels||[];let l,i;if(s.length)return s;const c=this.getLabels();for(l=0,i=c.length;l<i;++l)s.push(Tb(this,c[l]));return this._cache.labels=this._normalized?s:this.normalize(s)}normalize(s){return Cy(s.sort(Eb))}}function qc(a,s,l){let i=0,c=a.length-1,d,u,h,f;l?(s>=a[i].pos&&s<=a[c].pos&&({lo:i,hi:c}=vh(a,"pos",s)),{pos:d,time:h}=a[i],{pos:u,time:f}=a[c]):(s>=a[i].time&&s<=a[c].time&&({lo:i,hi:c}=vh(a,"time",s)),{time:d,pos:h}=a[i],{time:u,pos:f}=a[c]);const g=u-d;return g?h+(f-h)*(s-d)/g:h}class H2 extends Mb{static id="timeseries";static defaults=Mb.defaults;constructor(s){super(s),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const s=this._getTimestampsForTable(),l=this._table=this.buildLookupTable(s);this._minPos=qc(l,this.min),this._tableRange=qc(l,this.max)-this._minPos,super.initOffsets(s)}buildLookupTable(s){const{min:l,max:i}=this,c=[],d=[];let u,h,f,g,b;for(u=0,h=s.length;u<h;++u)g=s[u],g>=l&&g<=i&&c.push(g);if(c.length<2)return[{time:l,pos:0},{time:i,pos:1}];for(u=0,h=c.length;u<h;++u)b=c[u+1],f=c[u-1],g=c[u],Math.round((b+f)/2)!==g&&d.push({time:g,pos:u/(h-1)});return d}_generate(){const s=this.min,l=this.max;let i=super.getDataTimestamps();return(!i.includes(s)||!i.length)&&i.splice(0,0,s),(!i.includes(l)||i.length===1)&&i.push(l),i.sort((c,d)=>c-d)}_getTimestampsForTable(){let s=this._cache.all||[];if(s.length)return s;const l=this.getDataTimestamps(),i=this.getLabelTimestamps();return l.length&&i.length?s=this.normalize(l.concat(i)):s=l.length?l:i,s=this._cache.all=s,s}getDecimalForValue(s){return(qc(this._table,s)-this._minPos)/this._tableRange}getValueForPixel(s){const l=this._offsets,i=this.getDecimalForPixel(s)/l.factor-l.end;return qc(this._table,i*this._tableRange+this._minPos,!0)}}const sv="label";function Rb(a,s){typeof a=="function"?a(s):a&&(a.current=s)}function VA(a,s){const l=a.options;l&&s&&Object.assign(l,s)}function av(a,s){a.labels=s}function nv(a,s){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sv;const i=[];a.datasets=s.map(c=>{const d=a.datasets.find(u=>u[l]===c[l]);return!d||!c.data||i.includes(d)?{...c}:(i.push(d),Object.assign(d,c),d)})}function PA(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sv;const l={labels:[],datasets:[]};return av(l,a.labels),nv(l,a.datasets,s),l}function qA(a,s){const{height:l=150,width:i=300,redraw:c=!1,datasetIdKey:d,type:u,data:h,options:f,plugins:g=[],fallbackContent:b,updateMode:y,...v}=a,S=x.useRef(null),N=x.useRef(null),E=()=>{S.current&&(N.current=new Ql(S.current,{type:u,data:PA(h,d),options:f&&{...f},plugins:g}),Rb(s,N.current))},A=()=>{Rb(s,null),N.current&&(N.current.destroy(),N.current=null)};return x.useEffect(()=>{!c&&N.current&&f&&VA(N.current,f)},[c,f]),x.useEffect(()=>{!c&&N.current&&av(N.current.config.data,h.labels)},[c,h.labels]),x.useEffect(()=>{!c&&N.current&&h.datasets&&nv(N.current.config.data,h.datasets,d)},[c,h.datasets]),x.useEffect(()=>{N.current&&(c?(A(),setTimeout(E)):N.current.update(y))},[c,f,h.labels,h.datasets,y]),x.useEffect(()=>{N.current&&(A(),setTimeout(E))},[u]),x.useEffect(()=>(E(),()=>A()),[]),qs.createElement("canvas",{ref:S,role:"img",height:l,width:i,...v},b)}const GA=x.forwardRef(qA);function lv(a,s){return Ql.register(s),x.forwardRef((l,i)=>qs.createElement(GA,{...l,ref:i,type:a}))}const iv=lv("bar",tC),wh=lv("doughnut",aC);async function Kh(a){const s=`/classroom/api/v1/professor/${encodeURIComponent(a)}/students`,l=await fetch(s,{headers:{Accept:"application/json"},credentials:"include"});if(!l.ok)throw new Error(`(${l.status})    .`);const i=await l.json();if(!Array.isArray(i))throw new Error("    .");return i}Ql.register(Xh,Wh,Ph,Zy,Gh,qh);function XA(){const{lectureId:a}=dt(),[s,l]=x.useState([]),[i,c]=x.useState(null),[d,u]=x.useState(null),[h,f]=x.useState(!0),[g,b]=x.useState(null);x.useEffect(()=>{let D=!0;return(async()=>{try{f(!0),b(null);const I=`/classroom/api/v1/professor/${encodeURIComponent(a)}/statis`,[G,L,_]=await Promise.all([Kh(a),fetch(`${I}/attendance`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${I}/task`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!L.ok)throw new Error(`(${L.status})    .`);if(!_.ok)throw new Error(`(${_.status})    .`);const O=await L.json(),H=await _.json();if(!D)return;l(G),c(O),u(H)}catch(I){if(!D)return;b(I)}finally{D&&f(!1)}})(),()=>{D=!1}},[a]),x.useEffect(()=>{if(!h&&!g&&i&&s.length>0&&typeof window.bootstrap<"u"){const I=[...document.querySelectorAll('[data-bs-toggle="popover"]')].map(G=>new window.bootstrap.Popover(G));return()=>{I.forEach(G=>G.dispose())}}},[h,g,i,s]);const y=s.length>0?(()=>{const D=s.length,I=s.filter(C=>C.enrollStatusCd==="ENR_CANCEL"||C.enrollStatusCd==="ENR_WITHDRAW").length,G=s.filter(C=>C.enrollStatusCd==="ENR_ING"||C.enrollStatusCd==="ENR_DONE").length,L={};s.forEach(C=>{(C.enrollStatusCd==="ENR_ING"||C.enrollStatusCd==="ENR_DONE")&&(L[C.gradeCd]=(L[C.gradeCd]||0)+1)});const _=Object.entries(L).map(([C,P])=>({gradeCd:C,cnt:P})),O={};s.forEach(C=>{if(C.enrollStatusCd==="ENR_ING"||C.enrollStatusCd==="ENR_DONE"){const P=C.univDeptCd;O[P]||(O[P]={univDeptCd:C.univDeptCd,univDeptName:C.univDeptName,cnt:0}),O[P].cnt++}});const H=Object.values(O);return{stats:{totalCnt:D,activeCnt:G,dropoutCnt:I},byGrade:_,byDept:H}})():null,v=y?.byGrade?{labels:y.byGrade.map(D=>({"1ST":"1","2ND":"2","3RD":"3","4TH":"4"})[D.gradeCd]||D.gradeCd),datasets:[{data:y.byGrade.map(D=>D.cnt),backgroundColor:["rgba(54, 162, 235, 0.8)","rgba(255, 99, 132, 0.8)","rgba(255, 206, 86, 0.8)","rgba(75, 192, 192, 0.8)"]}]}:null,S=y?.byDept?{labels:y.byDept.map(D=>D.univDeptName||D.univDeptCd),datasets:[{data:y.byDept.map(D=>D.cnt),backgroundColor:["rgba(153, 102, 255, 0.8)","rgba(255, 159, 64, 0.8)","rgba(201, 203, 207, 0.8)","rgba(75, 192, 192, 0.8)"]}]}:null,N=i?.typeCount?(()=>{const{totalCnt:D,tbdCnt:I,okCnt:G,noCnt:L,earlyCnt:_,lateCnt:O,excpCnt:H}=i.typeCount,C=G+_+O+H,P=D>0?(C/D*100).toFixed(1):0,U=(i.attCountList||[]).map(w=>{const M=w.recordedCnt>0?w.nonAbsentCnt/w.recordedCnt*100:0,B=s.find(F=>F.enrollId===w.enrollId);return{...w,rate:M,name:B?`${B.lastName}${B.firstName}`:w.enrollId}}),Z=U.filter(w=>w.rate>=90),z=U.filter(w=>w.rate>=70&&w.rate<90),W=U.filter(w=>w.rate<70);return{avgRate:P,excellent:Z.length,good:z.length,warning:W.length,excellentList:Z,goodList:z,warningList:W,tbdCnt:I}})():null,E=d?(()=>{const{taskTypeCount:D,ongoingIndivtask:I,ongoingGrouptask:G,closedIndivtask:L,closedGrouptask:_,scoresByStudentAndTask:O}=d,H=D?.indivCnt||0,C=D?.groupCnt||0,P=(I?.ongoingTaskCnt||0)+(G?.ongoingTaskCnt||0),U=I?.submitRatePct||0,Z=(L?.closedTaskCnt||0)+(_?.closedTaskCnt||0),z=L?.submitRatePct||0,W={};O&&Array.isArray(O)&&O.forEach(k=>{k.score!==null&&k.score!==void 0&&(W[k.enrollId]||(W[k.enrollId]={scores:[],total:0,count:0}),W[k.enrollId].scores.push(k.score),W[k.enrollId].total+=k.score,W[k.enrollId].count++)});const w=Object.entries(W).map(([k,X])=>{const ae=s.find(Y=>Y.enrollId===k);return{enrollId:k,name:ae?`${ae.lastName}${ae.firstName}`:k,avgScore:X.count>0?(X.total/X.count).toFixed(1):0}}).filter(k=>k.avgScore>0),M=[...w].sort((k,X)=>X.avgScore-k.avgScore),B=M.slice(0,3),F=M.slice(-3).reverse(),q=Array(10).fill(0).map((k,X)=>({range:`${X*10}-${(X+1)*10}`,count:0}));return w.forEach(k=>{const X=parseFloat(k.avgScore),ae=Math.min(Math.floor(X/10),9);q[ae].count++}),{indivCnt:H,groupCnt:C,ongoingCount:P,ongoingSubmissionRate:U,closedCount:Z,closedSubmissionRate:z,scoreDistribution:q,topStudents:B,bottomStudents:F}})():null,A={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:11},padding:8,boxWidth:12}}}},T={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}},plugins:{legend:{display:!1}}},$=E?.scoreDistribution?{labels:E.scoreDistribution.map(D=>D.range),datasets:[{label:" ",data:E.scoreDistribution.map(D=>D.count),backgroundColor:"rgba(54, 162, 235, 0.7)"}]}:null;return e.jsxs("section",{id:"dashboard-root",className:"container py-0","data-lecture-id":a,children:[e.jsx("style",{children:`
        @keyframes blink-slow {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.3; }
        }
        .blink-slow {
          animation: blink-slow 2s ease-in-out infinite;
        }
      `}),h&&e.jsx("div",{className:"text-muted",children:" "}),g&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(g.message||g)}),!h&&!g&&e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:y&&e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-5",children:[e.jsx("div",{className:"text-center mb-2 small fw-semibold",children:" "}),v&&e.jsx("div",{style:{height:"140px",position:"relative"},children:e.jsx(wh,{data:v,options:A})})]}),e.jsxs("div",{className:"col-5",children:[e.jsx("div",{className:"text-center mb-2 small fw-semibold",children:" "}),S&&e.jsx("div",{style:{height:"140px",position:"relative"},children:e.jsx(wh,{data:S,options:A})})]}),e.jsxs("div",{className:"col-2 d-flex flex-column justify-content-center gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-muted small",children:""}),e.jsx("div",{className:"h5 mb-0 text-success",children:y.stats?.activeCnt||0})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-muted small",children:""}),e.jsx("div",{className:"h5 mb-0 text-danger",children:y.stats?.dropoutCnt||0})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-muted small",children:""}),e.jsx("div",{className:"h5 mb-0",children:y.stats?.totalCnt||0})]})]})]})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card shadow-sm h-100",children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h6 mb-0",children:" "}),N&&N.tbdCnt>0&&e.jsxs("div",{className:"text-danger small blink-slow",children:["  ",N.tbdCnt," "]})]}),e.jsx("div",{className:"card-body",children:N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("div",{className:"text-muted small",children:" "}),e.jsxs("div",{className:"display-6 fw-bold text-primary",children:[N.avgRate,"%"]})]}),e.jsxs("div",{className:"row g-2 text-center",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"p-2 bg-success bg-opacity-10 rounded",style:{cursor:N.excellentList.length>0?"pointer":"default"},"data-bs-toggle":N.excellentList.length>0?"popover":"","data-bs-trigger":"hover","data-bs-placement":"bottom","data-bs-html":"true","data-bs-content":N.excellentList.length>0?N.excellentList.map(D=>`${D.name} (${D.rate.toFixed(1)}%)`).join("<br>"):"",title:"90%   ",children:[e.jsx("div",{className:"small text-muted",children:"90% "}),e.jsxs("div",{className:"h5 mb-0 text-success",children:[N.excellent,""]})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"p-2 bg-warning bg-opacity-10 rounded",style:{cursor:N.goodList.length>0?"pointer":"default"},"data-bs-toggle":N.goodList.length>0?"popover":"","data-bs-trigger":"hover","data-bs-placement":"bottom","data-bs-html":"true","data-bs-content":N.goodList.length>0?N.goodList.map(D=>`${D.name} (${D.rate.toFixed(1)}%)`).join("<br>"):"",title:"70~90%  ",children:[e.jsx("div",{className:"small text-muted",children:"70~90%"}),e.jsxs("div",{className:"h5 mb-0 text-warning",children:[N.good,""]})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"p-2 bg-danger bg-opacity-10 rounded",style:{cursor:N.warningList.length>0?"pointer":"default"},"data-bs-toggle":N.warningList.length>0?"popover":"","data-bs-trigger":"hover","data-bs-placement":"bottom","data-bs-html":"true","data-bs-content":N.warningList.length>0?N.warningList.map(D=>`${D.name} (${D.rate.toFixed(1)}%)`).join("<br>"):"",title:"70%   ",children:[e.jsx("div",{className:"small text-muted",children:"70% "}),e.jsxs("div",{className:"h5 mb-0 text-danger",children:[N.warning,""]})]})})]})]}):e.jsx("div",{className:"text-muted",children:"  ."})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:E?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row g-2 mb-3 text-center",children:[e.jsx("div",{className:"col-3",children:e.jsxs("div",{className:"p-2 bg-primary bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsxs("div",{className:"h6 mb-0 text-primary",children:[E.indivCnt,""]}),e.jsx("div",{className:"small",style:{visibility:"hidden"},children:"-"})]})}),e.jsx("div",{className:"col-3",children:e.jsxs("div",{className:"p-2 bg-info bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsxs("div",{className:"h6 mb-0 text-info",children:[E.groupCnt,""]}),e.jsx("div",{className:"small",style:{visibility:"hidden"},children:"-"})]})}),e.jsx("div",{className:"col-3",children:e.jsxs("div",{className:"p-2 bg-warning bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsxs("div",{className:"h6 mb-0 text-warning",children:[E.ongoingCount,""]}),e.jsxs("div",{className:"small text-muted",children:[" ",E.ongoingSubmissionRate.toFixed(1),"%"]})]})}),e.jsx("div",{className:"col-3",children:e.jsxs("div",{className:"p-2 bg-success bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsxs("div",{className:"h6 mb-0 text-success",children:[E.closedCount,""]}),e.jsxs("div",{className:"small text-muted",children:[" ",E.closedSubmissionRate.toFixed(1),"%"]})]})})]}),$&&e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"small fw-semibold mb-2",children:"   "}),e.jsx("div",{style:{height:"120px",position:"relative"},children:e.jsx(iv,{data:$,options:T})})]}),E.topStudents.length>0&&e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"small fw-semibold mb-2",children:"Top 3"}),e.jsx("table",{className:"table table-sm table-borderless mb-0",children:e.jsx("tbody",{children:E.topStudents.map((D,I)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"text-muted",style:{width:"25px"},children:["#",I+1]}),e.jsx("td",{className:"small",children:D.name}),e.jsx("td",{className:"text-end fw-semibold small",children:D.avgScore})]},I))})})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"small fw-semibold mb-2",children:" 3"}),e.jsx("table",{className:"table table-sm table-borderless mb-0",children:e.jsx("tbody",{children:E.bottomStudents.map((D,I)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"text-muted",style:{width:"25px"},children:["#",I+1]}),e.jsx("td",{className:"small",children:D.name}),e.jsx("td",{className:"text-end fw-semibold small text-danger",children:D.avgScore})]},I))})})]})]})]}):e.jsx("div",{className:"text-muted",children:"  ."})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-muted text-center py-5",children:[e.jsx("i",{className:"bi bi-file-earmark-text display-4 d-block mb-3 opacity-25"}),e.jsx("div",{children:"  API    "})]})})]})})]})]})}Ql.register(Xh,Wh,Ph,Gh,qh);function WA(){const{lectureId:a}=dt(),[s,l]=x.useState(null),[i,c]=x.useState([]),[d,u]=x.useState([]),[h,f]=x.useState(null),[g,b]=x.useState([]),[y,v]=x.useState(!0),[S,N]=x.useState(null),{setLecture:E}=Jt(),A=x.useMemo(()=>({MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""}),[]),T=D=>{if(!D||String(D).length<4)return"--:--";const I=String(D);return`${I.slice(0,2)}:${I.slice(2,4)}`};x.useEffect(()=>{let D=!0;return(async()=>{try{v(!0),N(null);const I=`/classroom/api/v1/common/${encodeURIComponent(a)}`,[G,L,_,O]=await Promise.all([fetch(I,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${I}/schedule`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${I}/plan`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${I}/ratio`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!G.ok)throw new Error(`(${G.status})    .`);if(!L.ok)throw new Error(`(${L.status})    .`);if(!_.ok)throw new Error(`(${_.status})   .`);const H=await G.json(),C=await L.json(),P=await _.json(),U=O.ok?await O.json():[];if(!D)return;l(H),E(H),c(Array.isArray(C)?C:[]),b(Array.isArray(U)?U:[]);const Z=Array.isArray(P)?P:[];if(u(Z),Z.length){const z=Z.reduce((W,w)=>{const M=Number(w.lectureWeek);return Number.isFinite(M)?Math.min(W,M):W},Number(Z[0].lectureWeek)||1);f(z)}else f(null)}catch(I){if(!D)return;N(I)}finally{D&&v(!1)}})(),()=>{D=!1}},[a,E]),g.reduce((D,I)=>D+(I.ratio||0),0);const $=["rgba(54, 162, 235, 0.8)","rgba(255, 99, 132, 0.8)","rgba(255, 206, 86, 0.8)","rgba(75, 192, 192, 0.8)","rgba(153, 102, 255, 0.8)"];return g.map((D,I)=>({label:D.gradeCriteriaName||D.gradeCriteriaCd,data:[D.ratio||0],backgroundColor:$[I%$.length],borderWidth:0})),e.jsxs("section",{id:"lecture-root",className:"container py-0","data-lecture-id":a,children:[y&&e.jsx("div",{className:"text-muted",children:" "}),S&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(S.message||S)}),!y&&!S&&e.jsxs(e.Fragment,{children:[s&&e.jsxs("div",{className:"card shadow-sm mb-3",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("table",{className:"table table-sm table-borderless mb-0",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",style:{width:"100px"},children:""}),e.jsx("td",{className:"fw-semibold",children:s.subjectName||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:""}),e.jsx("td",{children:s.professorName||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:""}),e.jsx("td",{children:s.univDeptName||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:""}),e.jsx("td",{children:s.completionName||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:""}),e.jsx("td",{children:s.subjectTypeName||"-"})]})]})})}),e.jsx("div",{className:"col-md-4",children:e.jsx("table",{className:"table table-sm table-borderless mb-0",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",style:{width:"100px"},children:" / "}),e.jsxs("td",{children:[s.credit||"-"," / ",s.hour||"-",""]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:""}),e.jsxs("td",{children:[s.currentCap||0," / ",s.maxCap||0,""]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:""}),e.jsx("td",{children:s.ended?e.jsx("span",{className:"badge bg-secondary",children:""}):s.started?e.jsx("span",{className:"badge bg-success",children:""}):e.jsx("span",{className:"badge bg-info",children:""})})]}),g.length>0&&e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:" "}),e.jsx("td",{children:g.map((D,I)=>e.jsxs("span",{children:[D.gradeCriteriaName," ",D.ratio,"%",I<g.length-1&&" / "]},I))})]})]})})}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("div",{className:"text-muted small mb-2",children:" "}),i.length===0?e.jsx("div",{className:"text-muted small",children:"  "}):e.jsx("div",{className:"vstack gap-2",children:i.map((D,I)=>{const G=Array.isArray(D.slots)?D.slots:[];return e.jsxs("div",{className:"small",children:[e.jsxs("div",{className:"fw-semibold mb-1",children:[e.jsx("i",{className:"bi bi-geo-alt-fill text-primary me-1"}),D.placeName||D.placeCd||" "]}),e.jsx("div",{className:"ps-3",children:G.map((L,_)=>e.jsxs("div",{className:"text-muted",children:[A[L.day]??L.day??""," ",T(L.start)," ~ ",T(L.end)]},_))})]},I)})})]})]})})]}),e.jsxs("section",{id:"plan-section",className:"d-flex flex-column","aria-labelledby":"plan-h",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("h2",{id:"plan-h",className:"h5 mb-0",children:" "}),e.jsxs("div",{className:"ms-3",style:{minWidth:200},children:[e.jsx("label",{htmlFor:"plan-select",className:"form-label visually-hidden",children:" "}),e.jsxs("select",{id:"plan-select",className:"form-select form-select-sm",value:h??"",onChange:D=>f(Number(D.target.value)||null),disabled:!d.length,children:[d.length===0&&e.jsx("option",{value:"",children:"  "}),d.slice().sort((D,I)=>Number(D.lectureWeek||0)-Number(I.lectureWeek||0)).map(D=>e.jsxs("option",{value:D.lectureWeek,children:[D.lectureWeek,""]},D.lectureWeek))]})]})]}),e.jsx("div",{id:"plan-detail",className:"card flex-grow-1",children:e.jsx("div",{className:"card-body text-start",children:d.length===0||!h?e.jsx("div",{className:"text-body-secondary",children:"   ."}):(()=>{const D=d.find(I=>Number(I.lectureWeek)===Number(h));return D?e.jsxs("div",{className:"vstack gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"badge text-bg-secondary me-2",children:""}),e.jsxs("strong",{children:[D.lectureWeek,""]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{className:"fw-semibold",children:D.weekGoal||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{className:"text-break",children:D.weekDesc||"-"})]})]}):e.jsx("div",{className:"text-body-secondary",children:"   ."})})()})}),e.jsx("div",{id:"plan-empty",className:`text-body-secondary small mt-2 ${d.length?"d-none":""}`,children:"   ."})]})]})]})}function KA(){const{lectureId:a}=dt(),{lecture:s}=Jt(),l=`/classroom/professor/${encodeURIComponent(a||"")}`,i=!!s?.ended,c=!!s?.finalized,d="       .",u=(h,f,g={})=>{const{end:b=!1,disabled:y=!1,tooltip:v}=g;return y?e.jsx("li",{className:"nav-item",children:e.jsx("span",{className:"nav-link disabled text-muted",title:v,"aria-disabled":"true",style:{cursor:"not-allowed"},children:f})},h):e.jsx("li",{className:"nav-item",children:e.jsx(uy,{end:b,className:({isActive:S})=>`nav-link${S?" active":""}`,to:h,children:f})},h)};return e.jsxs("ul",{className:"nav nav-pills mb-3",children:[u(l,"",{end:!0}),u(`${l}/summary`," "),u(`${l}/board`,""),u(`${l}/attendance`,""),u(`${l}/task`,""),u(`${l}/exam`,""),u(`${l}/student`," "),u(`${l}/grades`,"/ ",{disabled:c,tooltip:c?d:void 0}),i?u(`${l}/finalize`,"  /",{disabled:c,tooltip:c?d:void 0}):null]})}function QA(){const{lectureId:a}=dt(),{setStudents:s,clearLectureScoped:l}=Jt();return x.useEffect(()=>{let i=!0;return(async()=>{try{if(!a)return;const c=await Kh(a);if(!i)return;s(c)}catch{if(!i)return;s([])}})(),()=>{l(),i=!1}},[a]),e.jsxs(Eo,{role:"professor",lectureId:a,children:[e.jsx(KA,{}),e.jsx(oy,{})]})}const oh=10;function ZA(a){if(a?.tempSaveYn==="Y")return"DRAFT";if(a?.revealAt){const s=Date.now(),l=new Date(a.revealAt).getTime();if(Number.isFinite(l)&&l>s)return"SCHEDULED"}return"PUBLISHED"}function JA(a){return a==="NOTICE"?e.jsx("span",{className:"badge bg-warning text-dark border border-warning-subtle",children:""}):a==="MATERIAL"?e.jsx("span",{className:"badge bg-info text-dark border border-info-subtle",children:""}):e.jsx("span",{className:"badge text-bg-secondary",children:""})}function e2(a){switch(a){case"DRAFT":return e.jsx("span",{className:"badge text-bg-secondary",children:""});case"SCHEDULED":return e.jsx("span",{className:"badge text-bg-primary",children:""});case"PUBLISHED":return e.jsx("span",{className:"badge text-bg-success",children:""});default:return null}}const $b=a=>{if(!a)return"";const s=new Date(a);if(Number.isNaN(s.getTime()))return String(a);const l=b=>String(b).padStart(2,"0"),i=new Date().getFullYear(),c=s.getFullYear(),d=l(s.getMonth()+1),u=l(s.getDate()),h=l(s.getHours()),f=l(s.getMinutes());return`${c===i?`${d}-${u}`:`${c}-${d}-${u}`} ${h}:${f}`};function t2(){const{lectureId:a}=dt(),[s,l]=x.useState([]),[i,c]=x.useState(!0),[d,u]=x.useState(null),[h,f]=x.useState("all"),[g,b]=x.useState(""),[y,v]=x.useState(""),[S,N]=x.useState(""),[E,A]=x.useState(1);x.useEffect(()=>{let C=!0;return(async()=>{try{c(!0),u(null);const P=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post`,U=await fetch(P,{headers:{Accept:"application/json"},credentials:"include"});if(!U.ok)throw new Error(`(${U.status})    .`);const Z=await U.json();if(!Array.isArray(Z))throw new Error("    .");if(!C)return;l(Z)}catch(P){if(!C)return;u(P)}finally{C&&c(!1)}})(),()=>{C=!1}},[a]);const T=x.useMemo(()=>s.map(C=>({...C,_status:ZA(C)})),[s]),$=C=>C.postType||C.classification||"",D=x.useMemo(()=>{let C=T.length,P=0,U=0;for(const Z of T){const z=$(Z);z==="NOTICE"?P++:z==="MATERIAL"&&U++}return{all:C,notice:P,material:U}},[T]);x.useEffect(()=>{h==="all"?b(""):h==="notice"?b("NOTICE"):h==="material"&&b("MATERIAL"),A(1)},[h]);const I=x.useMemo(()=>{let C=T;if(g&&(C=C.filter(P=>$(P)===g)),y&&(C=C.filter(P=>P._status===y)),S&&S.trim().length){const P=S.trim().toLowerCase();C=C.filter(U=>String(U.title||"").toLowerCase().includes(P)||String(U.content||"").toLowerCase().includes(P))}return C},[T,g,y,S]),G=Math.max(1,Math.ceil(I.length/oh)),L=x.useMemo(()=>I.slice((E-1)*oh,E*oh),[I,E]);x.useEffect(()=>{E>G&&A(1)},[G,E]);const _=(C,P)=>{const U=C._status,z=(C.lctPostId||C.postId||C.id)??C.id;if(z==null)return null;const W=$(C),w=$b(C.createAt||C.createdAt),M=U==="SCHEDULED"&&C.revealAt?$b(C.revealAt):null;let B="";for(const k of[C.summary,C.content]){if(!k)continue;const X=String(k).replace(/\s+/g," ").trim();if(X.length){B=X;break}}const F=C.title||"( )",q=`/classroom/professor/${encodeURIComponent(a)}/board/${encodeURIComponent(String(z))}`;return e.jsx(Pe,{to:q,className:"list-group-item list-group-item-action text-reset text-decoration-none py-2",children:e.jsxs("div",{className:"d-flex align-items-center gap-2 flex-nowrap",children:[e.jsxs("div",{className:"d-flex align-items-center gap-1 flex-shrink-0",children:[JA(W),e2(U)]}),e.jsxs("div",{className:"flex-grow-1 text-truncate",style:{minWidth:0},children:[e.jsx("span",{className:"fw-semibold",children:F}),B&&e.jsxs("span",{className:"text-muted",children:["  ",B]})]}),M&&e.jsxs("span",{className:"text-muted small text-nowrap flex-shrink-0",children:[": ",M]}),e.jsxs("span",{className:"text-muted small text-nowrap flex-shrink-0",children:[": ",w]})]})},String(z))},O=({id:C,label:P,active:U,onClick:Z,badge:z})=>e.jsxs("button",{className:`nav-link ${U?"active":""}`,id:`tab-${C}`,type:"button",onClick:Z,role:"tab",children:[P," ",z!=null&&e.jsx("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle ms-1",children:z})]}),H=()=>e.jsx("nav",{className:"mt-3","aria-label":"  ",children:e.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[e.jsx("li",{className:`page-item ${E<=1?"disabled":""}`,children:e.jsx("a",{className:"page-link",href:"#",onClick:C=>{C.preventDefault(),E>1&&A(E-1)},children:""})}),Array.from({length:G},(C,P)=>P+1).map(C=>e.jsx("li",{className:`page-item ${C===E?"active":""}`,children:e.jsx("a",{className:"page-link",href:"#",onClick:P=>{P.preventDefault(),A(C)},children:C})},C)),e.jsx("li",{className:`page-item ${E>=G?"disabled":""}`,children:e.jsx("a",{className:"page-link",href:"#",onClick:C=>{C.preventDefault(),E<G&&A(E+1)},children:""})})]})});return e.jsxs("section",{id:"board-root",className:"container py-0","data-lecture-id":a,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:""}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs("select",{id:"filter-type",className:"form-select form-select-sm",style:{minWidth:120},value:g,onChange:C=>b(C.target.value),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"NOTICE",children:""}),e.jsx("option",{value:"MATERIAL",children:""})]}),e.jsxs("select",{id:"filter-status",className:"form-select form-select-sm",style:{minWidth:120},value:y,onChange:C=>v(C.target.value),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"PUBLISHED",children:""}),e.jsx("option",{value:"DRAFT",children:""}),e.jsx("option",{value:"SCHEDULED",children:""})]}),e.jsxs("div",{className:"input-group input-group-sm",style:{minWidth:220},children:[e.jsx("input",{id:"search-q",type:"text",className:"form-control",placeholder:"/ ",value:S,onChange:C=>{N(C.target.value),A(1)}}),e.jsx("button",{id:"btn-search",className:"btn btn-outline-secondary",onClick:()=>A(1),children:""})]})]})]}),e.jsxs("section",{className:"mt-4","aria-labelledby":"tablist-h",children:[e.jsxs("ul",{className:"nav nav-tabs mt-2",id:"post-tabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx(O,{id:"all",label:"",active:h==="all",onClick:()=>f("all"),badge:D.all})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx(O,{id:"notice",label:"",active:h==="notice",onClick:()=>f("notice"),badge:D.notice})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx(O,{id:"material",label:"",active:h==="material",onClick:()=>f("material"),badge:D.material})})]}),e.jsxs("div",{className:"tab-content border border-top-0 rounded-bottom p-3",children:[(i||d)&&e.jsxs("div",{children:[i&&e.jsx("div",{className:"text-muted",children:" "}),d&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(d.message||d)})]}),!i&&!d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"pane-all",className:`tab-pane fade ${h==="all"?"show active":""} p-0`,role:"tabpanel","aria-labelledby":"tab-all",children:[e.jsx("div",{id:"list-all",children:g&&h==="all"?null:L.length===0?e.jsx("div",{className:"text-center text-muted py-4",children:"   ."}):e.jsx("div",{className:"list-group list-group-flush",children:L.map((C,P)=>_(C))})}),e.jsxs("div",{className:"mt-3 d-flex align-items-center justify-content-between",children:[e.jsx(H,{}),e.jsx(Pe,{id:"btn-create",className:"btn btn-sm btn-primary",to:`/classroom/professor/${encodeURIComponent(a)}/board/new`,children:" "})]})]}),e.jsx("div",{id:"pane-notice",className:`tab-pane fade ${h==="notice"?"show active":""} p-0`,role:"tabpanel","aria-labelledby":"tab-notice",children:e.jsx("div",{id:"list-notice",children:I.filter(C=>$(C)==="NOTICE").length===0?e.jsx("div",{className:"text-center text-muted py-4",children:"  ."}):e.jsx("div",{className:"list-group list-group-flush",children:I.filter(C=>$(C)==="NOTICE").map((C,P)=>_(C))})})}),e.jsx("div",{id:"pane-material",className:`tab-pane fade ${h==="material"?"show active":""} p-0`,role:"tabpanel","aria-labelledby":"tab-material",children:e.jsx("div",{id:"list-material",children:I.filter(C=>$(C)==="MATERIAL").length===0?e.jsx("div",{className:"text-center text-muted py-4",children:"  ."}):e.jsx("div",{className:"list-group list-group-flush",children:I.filter(C=>$(C)==="MATERIAL").map((C,P)=>_(C))})})})]})]}),e.jsx("div",{id:"notfound-box",className:"alert alert-danger mt-3 d-none",role:"alert"})]})]})}const dh=a=>{if(!a)return"";const s=new Date(a);if(Number.isNaN(s.getTime()))return String(a);const l=i=>String(i).padStart(2,"0");return`${s.getFullYear()}-${l(s.getMonth()+1)}-${l(s.getDate())} ${l(s.getHours())}:${l(s.getMinutes())}`},s2=({t:a})=>{const s=a||"";return s==="NOTICE"?e.jsx("span",{className:"badge badge-type bg-warning text-dark border border-warning-subtle",children:""}):s==="MATERIAL"?e.jsx("span",{className:"badge badge-type bg-info text-dark border border-info-subtle",children:""}):e.jsx("span",{className:"badge badge-type text-bg-secondary",children:""})};function a2(){const{lectureId:a,postId:s}=dt(),l=rs(),[i,c]=x.useState(null),[d,u]=x.useState(!0),[h,f]=x.useState(null),{user:g,getUserId:b}=my(),{students:y}=Jt(),[v,S]=x.useState([]),[N,E]=x.useState("desc"),[A,T]=x.useState(""),[$,D]=x.useState(""),[I,G]=x.useState({variant:"",message:""}),[L,_]=x.useState(!1),[O,H]=x.useState(!1);x.useEffect(()=>{let M=!0;return(async()=>{try{u(!0),f(null);const B=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}`,F=await fetch(B,{headers:{Accept:"application/json"},credentials:"include"});if(!F.ok)throw new Error(`(${F.status})   .`);const q=await F.json();if(!M)return;c(q)}catch(B){if(!M)return;f(B)}finally{M&&u(!1)}})(),()=>{M=!1}},[a,s]);async function C(){const M=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}/reply`,B=await fetch(M,{headers:{Accept:"application/json"},credentials:"include"});if(!B.ok)throw new Error(`(${B.status})   .`);const F=await B.json();return Array.isArray(F)?F:[]}x.useEffect(()=>{let M=!0;return(async()=>{try{const B=await C();if(!M)return;S(B)}catch{}})(),()=>{M=!1}},[a,s]);const P=x.useMemo(()=>{const M=new Map;for(const k of v){const X=k.parentReply||"";M.has(X)||M.set(X,[]),M.get(X).push(k)}const B=(k,X)=>{const ae=new Date(k.createAt||k.createdAt||0).getTime(),Y=new Date(X.createAt||X.createdAt||0).getTime();return N==="desc"?Y-ae:ae-Y},F=(M.get("")||M.get(null)||[]).slice().sort(B),q=new Map;for(const[k,X]of M.entries())k&&q.set(k,X.slice().sort(B));return{roots:F,childrenMap:q}},[v,N]),U=M=>{const B=String(M||"");if(!B)return"-";const F=Array.isArray(y)?y.find(k=>String(k.userId||"")===B):null;if(F){const k=F.lastName||"",X=F.firstName||"",ae=F.univDeptName||"",Y=`${k}${X}`.trim()||F.studentNo||B;return ae?`${Y}(${ae})`:Y}const q=b&&b();if(q&&String(q)===B){const k=g?.lastName||"",X=g?.firstName||"";return`${`${k}${X}`.trim()||""} `}return""},Z=async M=>{if(M.preventDefault(),!$.trim()){G({variant:"danger",message:" ."});return}try{_(!0),G({variant:"",message:""});const B=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}/reply`,F=await fetch(B,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({parentReplyId:A||null,replyContent:$})}),q=await F.text();let k=null;try{k=q?JSON.parse(q):null}catch{}if(!F.ok)throw new Error(`   (HTTP ${F.status})`);G({variant:"success",message:"."}),D(""),T("");const X=await C();S(X)}catch(B){G({variant:"danger",message:String(B.message||B)})}finally{_(!1)}},z=async M=>{const B=String(M||"");if(B&&window.confirm(`  ?
    .`))try{const F=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}/reply/${encodeURIComponent(B)}`,q=await fetch(F,{method:"DELETE",credentials:"include"});if(!q.ok)throw new Error(`   (HTTP ${q.status})`);const k=await C();S(k)}catch(F){G({variant:"danger",message:String(F.message||F)})}},W=async()=>{if(window.confirm(" ?"))try{H(!0);const M=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}`,B=await fetch(M,{method:"DELETE",headers:{Accept:"application/json"},credentials:"include"});if(B.status===204){l(`/classroom/professor/${encodeURIComponent(a)}/board`,{replace:!0});return}const F=await B.text().catch(()=>"");throw new Error(` . (HTTP ${B.status})`)}catch(M){console.error(M),f(M),H(!1)}},w=({r:M,depth:B=0})=>{const F=B>0,q=U(M.userId)||M.authorName||M.writerName||M.userName||"-",k=M.contentHtml,X=M.replyContent||M.content,ae=M.lctReplyId||M.replyId||M.id,Y=b&&b(),te=Y&&String(Y)===String(M.userId||"");return e.jsxs("div",{className:`border rounded p-2 reply-item ${F?"reply-child":""} ${te?"reply-professor":""}`,"data-reply-id":ae,style:te?{backgroundColor:"#f6f7f9"}:void 0,children:[e.jsxs("div",{className:"d-flex align-items-start justify-content-between mb-1",children:[e.jsxs("div",{className:"me-2",children:[e.jsx("strong",{className:"me-2",children:q}),e.jsx("span",{className:"small text-muted",children:dh(M.createAt||M.createdAt)})]}),e.jsxs("div",{className:"btn-group btn-group-sm",children:[!F&&e.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>T(String(ae||"")),children:""}),e.jsx("button",{className:"btn btn-outline-danger",onClick:()=>z(ae),children:""})]})]}),e.jsx("div",{className:"reply-body text-start",children:k?e.jsx("div",{dangerouslySetInnerHTML:{__html:k}}):e.jsx("div",{style:{whiteSpace:"pre-wrap"},children:X||""})})]})};return e.jsx("section",{id:"board-post-root",className:"container py-4","data-lecture-id":a,children:e.jsxs("div",{className:"board-layout mx-auto",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(Pe,{id:"bc-board",to:`/classroom/professor/${encodeURIComponent(a)}/board`,children:""})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:""})]})}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",id:"btn-list",to:`/classroom/professor/${encodeURIComponent(a)}/board`,children:""})})]}),e.jsx("div",{className:"card shadow-sm mb-4",children:e.jsxs("div",{className:"card-body",id:"post-body",children:[d&&e.jsx("div",{className:"skeleton",style:{height:"8rem"}}),h&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(h.message||h)}),!d&&!h&&i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex align-items-start justify-content-between gap-3 mb-3 flex-wrap",id:"post-header",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"d-flex align-items-center flex-wrap gap-2 mb-2",id:"post-badge-row",children:e.jsx(s2,{t:i.postType||i.classification})}),e.jsx("h1",{className:"h4 mb-2",id:"post-title",children:i.title||"( )"}),e.jsxs("div",{className:"d-flex flex-wrap meta-list mb-0",id:"post-meta-row",children:[e.jsxs("div",{className:"meta-item",children:[" ",dh(i.createAt||i.createdAt)]}),i.revealAt&&e.jsxs("div",{className:"meta-item",children:[" ",dh(i.revealAt)]}),i.authorName&&e.jsxs("div",{className:"meta-item",children:[" ",i.authorName]})]})]}),e.jsxs("div",{className:"d-flex align-items-start gap-2 post-header-actions",children:[e.jsx(Pe,{className:"btn btn-outline-secondary btn-sm",id:"btn-edit-bottom",to:`/classroom/professor/${encodeURIComponent(a)}/board/${encodeURIComponent(s)}/edit`,children:""}),e.jsx("button",{className:"btn btn-outline-danger btn-sm",id:"btn-delete-bottom",onClick:W,disabled:O,children:O?"...":""})]})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"post-content mb-4",id:"post-content",children:i.contentHtml?e.jsx("div",{dangerouslySetInnerHTML:{__html:i.contentHtml}}):e.jsx("div",{style:{whiteSpace:"pre-wrap"},children:i.content||""})}),Array.isArray(i.attachments)&&i.attachments.length>0&&e.jsxs("div",{id:"attach-area",className:"mt-4",children:[e.jsx("h2",{className:"h6 mb-2",children:""}),e.jsx("ul",{className:"list-group",id:"attach-list",children:i.attachments.map((M,B)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"text-truncate me-2",title:M.fileName||M.name,children:M.fileName||M.name}),M.url&&e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:M.url,children:""})]},B))})]})]})]})}),e.jsx("section",{className:"mt-5",id:"reply-section",children:e.jsxs("div",{className:"card shadow-sm",children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[e.jsx("h2",{className:"h5 mb-0",children:""}),e.jsxs("div",{className:"btn-group btn-group-sm",role:"group","aria-label":" ",children:[e.jsx("button",{type:"button",className:`btn ${N==="desc"?"btn-primary":"btn-outline-secondary"}`,id:"reply-sort-newest","aria-pressed":N==="desc",onClick:()=>E("desc"),children:""}),e.jsx("button",{type:"button",className:`btn ${N==="asc"?"btn-primary":"btn-outline-secondary"}`,id:"reply-sort-oldest","aria-pressed":N==="asc",onClick:()=>E("asc"),children:""})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{id:"reply-form",className:"vstack gap-3 mb-4",onSubmit:Z,children:[e.jsx("input",{type:"hidden",id:"reply-parent",name:"parentReplyId",value:A,readOnly:!0}),A&&e.jsx("div",{id:"reply-parent-indicator",className:"alert alert-secondary py-2 px-3",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2",children:[e.jsxs("span",{id:"reply-parent-label",className:"small",children:[" : #",A]}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",id:"reply-parent-clear",onClick:()=>T(""),children:" "})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reply-content",className:"form-label",children:" "}),e.jsx("textarea",{className:"form-control reply-textarea",id:"reply-content",rows:3,placeholder:" ",value:$,onChange:M=>D(M.target.value)})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",id:"reply-submit",disabled:L,children:L?"":""})})]}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"vstack gap-1",children:v.length===0?e.jsx("div",{id:"reply-empty",className:"text-muted small text-center py-4",children:"  .   ."}):e.jsx("div",{id:"reply-list",className:"vstack gap-2",children:P.roots.map(M=>e.jsxs("div",{className:"vstack gap-2",children:[e.jsx(w,{r:M,depth:0}),(P.childrenMap.get(M.lctReplyId||M.replyId||M.id)||[]).map(B=>e.jsx("div",{className:"ms-4",children:e.jsx(w,{r:B,depth:1})},B.lctReplyId||B.replyId||B.id))]},M.lctReplyId||M.replyId||M.id))})}),I.message&&e.jsx("div",{id:"reply-alert",className:`alert mt-4 alert-${I.variant||"secondary"}`,role:"alert",children:I.message})]})]})}),e.jsx("div",{id:"error-box",className:"alert alert-danger mt-3 d-none",role:"alert"})]})})}function n2(){const{lectureId:a}=dt(),s=rs(),l=x.useRef(null),i=x.useRef(null),[c,d]=x.useState("NOTICE"),[u,h]=x.useState(""),[f,g]=x.useState("PUBLISHED"),[b,y]=x.useState(""),[v,S]=x.useState(""),[N,E]=x.useState(""),[A,T]=x.useState([]),[$,D]=x.useState({show:!1,type:"danger",message:""}),[I,G]=x.useState({show:!1,message:""});x.useEffect(()=>{let C=!1;const P=async()=>{if(!i.current&&!(!l.current||!window.ClassicEditor))try{const U=await window.ClassicEditor.create(l.current);if(C){U.destroy().catch(console.error);return}i.current=U}catch(U){console.error("CKEditor initialization failed:",U)}};if(window.ClassicEditor)P();else{const U=document.querySelector('script[src*="ckeditor"]');if(U)U.addEventListener("load",()=>{C||P()});else{const Z=document.createElement("script");Z.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",Z.onload=()=>{C||P()},document.head.appendChild(Z)}}return()=>{C=!0;const U=i.current;U&&U.ui&&U.ui.view&&U.ui.view.element&&U.destroy().catch(Z=>{console.debug("Editor cleanup:",Z)}),i.current=null}},[]);const L=async C=>{const P=Array.from(C.target.files||[]);T(P),P.length>0&&console.log("Selected files:",P)},_=()=>{const C=i.current?i.current.getData():"";let P="N",U=null;if(f==="DRAFT")P="Y";else if(f==="SCHEDULED"&&b&&v){const[Z,z]=v.split(":");U=`${b}T${Z.padStart(2,"0")}:${z.padStart(2,"0")}:00`}return{title:u,content:C,fileId:N,postType:c,tempSaveYn:P,revealAt:U}},O=C=>C.title.trim()?C.content.replace(/<[^>]*>/g,"").trim()?f==="SCHEDULED"&&!C.revealAt?(D({show:!0,type:"danger",message:"  .    ."}),!1):!0:(D({show:!0,type:"danger",message:" ."}),!1):(D({show:!0,type:"danger",message:" ."}),!1),H=async C=>{C.preventDefault(),D({show:!1,type:"danger",message:""}),G({show:!1,message:""});const P=_();if(!O(P))return;const U=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post`;try{const Z=await fetch(U,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(P)});if(!Z.ok){const z=await Z.text().catch(()=>"");throw new Error(`HTTP ${Z.status} - ${z||" "}`)}G({show:!0,message:"."}),setTimeout(()=>{s(`/classroom/professor/${a}/board`)},1e3)}catch(Z){console.error(Z),D({show:!0,type:"danger",message:`   . ${Z.message}`})}};return e.jsxs("section",{id:"post-root",className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:" "}),e.jsx(Pe,{className:"btn btn-outline-secondary btn-sm",to:`/classroom/professor/${encodeURIComponent(a)}/board`,children:""})]}),e.jsxs("form",{id:"post-form",className:"vstack gap-3",onSubmit:H,children:[e.jsxs("div",{className:"row g-3 align-items-end",children:[e.jsxs("div",{className:"col-12 col-md-4 col-lg-1",children:[e.jsxs("label",{htmlFor:"postType",className:"form-label",children:["",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{id:"postType",name:"postType",className:"form-select",value:c,onChange:C=>d(C.target.value),children:[e.jsx("option",{value:"NOTICE",children:""}),e.jsx("option",{value:"MATERIAL",children:""})]})]}),e.jsxs("div",{className:"col-12 col-md-8 col-lg-6",children:[e.jsxs("label",{htmlFor:"title",className:"form-label",children:["",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",id:"title",name:"title",className:"form-control",maxLength:"200",placeholder:" ",value:u,onChange:C=>h(C.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"files",className:"form-label",children:""}),e.jsx("input",{type:"file",id:"files",name:"files",className:"form-control",multiple:!0,onChange:L}),e.jsx("div",{id:"file-list",className:"form-text",children:A.length>0?A.map((C,P)=>e.jsxs("div",{children:[" ",C.name," (",(C.size/1024).toFixed(1)," KB)"]},P)):"   ."})]}),$.show&&e.jsx("div",{id:"alert-box",className:`alert alert-${$.type}`,role:"alert",children:$.message}),I.show&&e.jsx("div",{id:"toast-box",className:"alert alert-success",role:"alert",children:I.message}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"content",className:"form-label",children:[" ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{ref:l,id:"ck-editor"})]}),e.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-end align-items-start align-items-md-center gap-3",children:[e.jsxs("fieldset",{className:"flex-grow-1",children:[e.jsxs("legend",{className:"col-form-label pt-0 mb-2",children:["  ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-3",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stPublished",value:"PUBLISHED",checked:f==="PUBLISHED",onChange:C=>g(C.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"stPublished",children:" "})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stDraft",value:"DRAFT",checked:f==="DRAFT",onChange:C=>g(C.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"stDraft",children:""})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stScheduled",value:"SCHEDULED",checked:f==="SCHEDULED",onChange:C=>g(C.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"stScheduled",children:""})]})]}),f==="SCHEDULED"&&e.jsxs("div",{id:"schedule-row",className:"row g-2 align-items-end mt-2",children:[e.jsxs("div",{className:"col-12 col-sm-6 col-md-4",children:[e.jsx("label",{htmlFor:"publishDate",className:"form-label",children:" "}),e.jsx("input",{type:"date",id:"publishDate",className:"form-control",value:b,onChange:C=>y(C.target.value)})]}),e.jsxs("div",{className:"col-12 col-sm-6 col-md-3",children:[e.jsx("label",{htmlFor:"publishTime",className:"form-label",children:" "}),e.jsx("input",{type:"time",id:"publishTime",className:"form-control",step:"60",value:v,onChange:C=>S(C.target.value)})]})]}),e.jsx("div",{className:"form-text",children:"        ."})]}),e.jsx("div",{className:"ms-md-auto",children:e.jsx("button",{type:"submit",className:"btn btn-primary",children:""})})]})]}),e.jsx("style",{jsx:!0,children:`
        .ck.ck-editor {
          max-width: 100%;
        }
        .ck-editor__editable {
          min-height: 400px;
        }
      `})]})}function l2(){const{lectureId:a,postId:s}=dt(),l=rs(),i=x.useRef(null),c=x.useRef(null),[d,u]=x.useState("NOTICE"),[h,f]=x.useState(""),[g,b]=x.useState("PUBLISHED"),[y,v]=x.useState(""),[S,N]=x.useState(""),[E,A]=x.useState(""),[T,$]=x.useState([]),[D,I]=x.useState([]),[G,L]=x.useState(!0),[_,O]=x.useState({show:!1,message:""}),[H,C]=x.useState({show:!1,message:""}),P=q=>String(q).padStart(2,"0"),U=q=>`${q.getFullYear()}-${P(q.getMonth()+1)}-${P(q.getDate())}`,Z=q=>`${P(q.getHours())}:${P(q.getMinutes())}`,z=q=>{if(q.tempSaveYn==="Y")return"DRAFT";if(q.revealAt){const k=new Date;if(new Date(q.revealAt).getTime()>k.getTime())return"SCHEDULED"}return"PUBLISHED"};x.useEffect(()=>{let q=!1;const k=async()=>{if(!c.current&&!(!i.current||!window.ClassicEditor))try{const X=await window.ClassicEditor.create(i.current);if(q){X.destroy().catch(console.error);return}c.current=X}catch(X){console.error("CKEditor initialization failed:",X)}};if(window.ClassicEditor)k();else{const X=document.querySelector('script[src*="ckeditor"]');if(X)X.addEventListener("load",()=>{q||k()});else{const ae=document.createElement("script");ae.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",ae.onload=()=>{q||k()},document.head.appendChild(ae)}}return()=>{q=!0;const X=c.current;X&&X.ui&&X.ui.view&&X.ui.view.element&&X.destroy().catch(ae=>{console.debug("Editor cleanup:",ae)}),c.current=null}},[]),x.useEffect(()=>{let q=!0;return(async()=>{try{L(!0);const X=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}`,ae=await fetch(X,{headers:{Accept:"application/json"},credentials:"include"});if(!ae.ok)throw new Error(`HTTP ${ae.status}`);const Y=await ae.json();if(!q)return;f(Y.title||""),u(Y.postType||"NOTICE"),A(Y.attachFileId||""),Array.isArray(Y.attachFileList)&&I(Y.attachFileList);const te=z(Y);if(b(te),te==="SCHEDULED"&&Y.revealAt){const le=new Date(Y.revealAt);Number.isNaN(le.getTime())||(v(U(le)),N(Z(le)))}L(!1);const K=setInterval(()=>{c.current&&(c.current.setData(Y.content||""),clearInterval(K))},100);setTimeout(()=>clearInterval(K),1e4)}catch(X){if(!q)return;console.error(X),O({show:!0,message:"    ."}),L(!1)}})(),()=>{q=!1}},[a,s]);const W=async q=>{const k=Array.from(q.target.files||[]);$(k),k.length>0&&console.log("Selected files:",k)},w=()=>{const q=c.current?c.current.getData():"";let k="N",X=null;if(g==="DRAFT")k="Y";else if(g==="SCHEDULED"&&y&&S){const[ae,Y]=S.split(":");X=`${y}T${ae.padStart(2,"0")}:${Y.padStart(2,"0")}:00`}return{title:h,content:q,fileId:E||null,postType:d,tempSaveYn:k,revealAt:X}},M=q=>q.title.trim()?q.title.trim().length>100?(O({show:!0,message:"  100."}),!1):!q.content||q.content.replace(/<[^>]*>/g,"").trim().length===0?(O({show:!0,message:" ."}),!1):q.content.length>1e3?(O({show:!0,message:"  1000."}),!1):g==="SCHEDULED"&&!q.revealAt?(O({show:!0,message:"   /  ."}),!1):!0:(O({show:!0,message:" ."}),!1),B=async q=>{q.preventDefault(),O({show:!1,message:""}),C({show:!1,message:""});const k=w();if(!M(k))return;const X=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}`;try{const ae=await fetch(X,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(k)});if(ae.status===204){C({show:!0,message:"."}),setTimeout(()=>{l(`/classroom/professor/${a}/board/${s}`)},300);return}const Y=await ae.text().catch(()=>"");throw new Error(`  (HTTP ${ae.status}) ${Y.slice(0,200)}`)}catch(ae){console.error(ae),O({show:!0,message:ae.message||"   ."})}},F=()=>{l(`/classroom/professor/${a}/board/${s}`)};return e.jsxs("section",{id:"post-edit-root",className:"container py-4",children:[G&&e.jsxs("div",{className:"alert alert-info",children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"  ..."]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:" "}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(Pe,{className:"btn btn-outline-secondary btn-sm",to:`/classroom/professor/${encodeURIComponent(a)}/board/${encodeURIComponent(s)}`,children:""}),e.jsx(Pe,{className:"btn btn-outline-secondary btn-sm",to:`/classroom/professor/${encodeURIComponent(a)}/board`,children:""})]})]}),_.show&&e.jsx("div",{id:"error-box",className:"alert alert-danger",role:"alert",children:_.message}),H.show&&e.jsx("div",{id:"toast-box",className:"alert alert-success",role:"alert",children:H.message}),e.jsxs("form",{id:"edit-form",className:"vstack gap-3",onSubmit:B,children:[e.jsxs("div",{className:"row g-3 align-items-end",children:[e.jsxs("div",{className:"col-12 col-md-4 col-lg-2",children:[e.jsxs("label",{htmlFor:"postType",className:"form-label",children:["",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{id:"postType",name:"postType",className:"form-select",value:d,onChange:q=>u(q.target.value),disabled:G,children:[e.jsx("option",{value:"NOTICE",children:""}),e.jsx("option",{value:"MATERIAL",children:""})]})]}),e.jsxs("div",{className:"col-12 col-md-8 col-lg-6",children:[e.jsxs("label",{htmlFor:"title",className:"form-label",children:["",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",id:"title",name:"title",className:"form-control",maxLength:"100",placeholder:" ",value:h,onChange:q=>f(q.target.value),disabled:G})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"files",className:"form-label",children:"(    )"}),e.jsx("input",{type:"file",id:"files",name:"files",className:"form-control",multiple:!0,onChange:W,disabled:G}),e.jsx("div",{id:"file-list",className:"form-text",children:D.length>0?e.jsxs(e.Fragment,{children:[" :"," ",D.map((q,k)=>{const X=q.originName||` ${q.fileOrder||k+1}`,ae=q.extension?`.${q.extension}`:"";return`${X}${ae}`}).join(", ")]}):"  "}),T.length>0&&e.jsxs("div",{className:"form-text",children:[" :"," ",T.map(q=>`${q.name} (${(q.size/1024).toFixed(1)} KB)`).join(", ")]}),e.jsx("div",{id:"file-hint",className:"form-text",children:" 5.     ."})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"content",className:"form-label",children:[" ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{ref:i,id:"ck-editor"}),e.jsx("div",{className:"form-text",children:" :  1000"})]}),e.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-end align-items-start align-items-md-center gap-3",children:[e.jsxs("fieldset",{className:"flex-grow-1",children:[e.jsxs("legend",{className:"col-form-label pt-0 mb-2",children:["  ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-3",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stPublished",value:"PUBLISHED",checked:g==="PUBLISHED",onChange:q=>b(q.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"stPublished",children:" "})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stDraft",value:"DRAFT",checked:g==="DRAFT",onChange:q=>b(q.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"stDraft",children:""})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stScheduled",value:"SCHEDULED",checked:g==="SCHEDULED",onChange:q=>b(q.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"stScheduled",children:""})]})]}),g==="SCHEDULED"&&e.jsxs("div",{id:"schedule-row",className:"row g-2 align-items-end mt-2",children:[e.jsxs("div",{className:"col-12 col-sm-6 col-md-4",children:[e.jsx("label",{htmlFor:"publishDate",className:"form-label",children:" "}),e.jsx("input",{type:"date",id:"publishDate",className:"form-control",value:y,onChange:q=>v(q.target.value)})]}),e.jsxs("div",{className:"col-12 col-sm-6 col-md-3",children:[e.jsx("label",{htmlFor:"publishTime",className:"form-label",children:" "}),e.jsx("input",{type:"time",id:"publishTime",className:"form-control",step:"60",value:S,onChange:q=>N(q.target.value)})]})]})]}),e.jsxs("div",{className:"ms-md-auto d-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:F,disabled:G,children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:G,children:""})]})]})]}),e.jsx("style",{jsx:!0,children:`
        .ck.ck-editor {
          max-width: 100%;
        }
        .ck-editor__editable {
          min-height: 400px;
        }
      `})]})}Ql.register(Zy,Xh,Wh,Ph,Gh,qh);const Ib=a=>String(a).padStart(2,"0"),i2=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${String(s.getFullYear()).slice(-2)} ${Ib(s.getMonth()+1)} ${Ib(s.getDate())}`};function r2(){const{lectureId:a}=dt(),s=rs(),{students:l}=Jt(),i="/classroom/api/v1/professor/attendance",[c,d]=x.useState([]),[u,h]=x.useState(!0),[f,g]=x.useState(null),[b,y]=x.useState(null),[v,S]=x.useState(0),[N,E]=x.useState(!1),[A,T]=x.useState(!1),[$,D]=x.useState(null),[I,G]=x.useState([]),[L,_]=x.useState(!1),[O,H]=x.useState(null),[C,P]=x.useState(0),[U,Z]=x.useState(new Map),[z,W]=x.useState({loading:!0,error:null,data:[]}),[w,M]=x.useState("no"),[B,F]=x.useState(2);x.useEffect(()=>{let J=!0;return(async()=>{try{h(!0),g(null);const ue=await fetch(`${i}/${encodeURIComponent(a)}/all`,{credentials:"include",headers:{Accept:"application/json"}});if(!ue.ok)throw new Error(`(${ue.status})     .`);const Se=await ue.json();if(!J)return;if(!Array.isArray(Se))throw new Error("    .");d(Se)}catch(ue){if(!J)return;g(ue)}finally{J&&h(!1)}})(),()=>{J=!1}},[a,v]),x.useEffect(()=>{let J=!0;return(async()=>{W({loading:!0,error:null,data:[]});const Se=`${i}/${encodeURIComponent(a)}/summary`;try{const Me=await fetch(Se,{credentials:"include",headers:{Accept:"application/json"}});if(!J)return;if(!Me.ok)throw new Error(`     (${Me.status})`);const re=await Me.json();J&&W({loading:!1,error:null,data:Array.isArray(re)?re:[]})}catch(Me){J&&W({loading:!1,error:Me,data:[]})}})(),()=>{J=!1}},[a,v]);const q=x.useMemo(()=>{const J={total:0,ok:0,no:0,early:0,late:0,excp:0};for(const ue of c)J.total+=ue.totalCnt??0,J.ok+=ue.okCnt??0,J.no+=ue.noCnt??0,J.early+=ue.earlyCnt??0,J.late+=ue.lateCnt??0,J.excp+=ue.excpCnt??0;return J},[c]),k=x.useMemo(()=>{if(!z.data.length||!Array.isArray(l))return[];const J=new Map(l.map(ue=>[ue.enrollId,ue]));return z.data.map(ue=>({...ue,student:J.get(ue.enrollId)})).filter(ue=>ue.student?w==="no"?ue.noCnt>=B:w==="late"?ue.lateCnt>=B:w==="early"?ue.earlyCnt>=B:!1:!1).sort((ue,Se)=>w==="no"?(Se.noCnt||0)-(ue.noCnt||0):w==="late"?(Se.lateCnt||0)-(ue.lateCnt||0):w==="early"?(Se.earlyCnt||0)-(ue.earlyCnt||0):0)},[z.data,l,w,B]),X=async J=>{if(Number.isFinite(J)&&window.confirm(`#${J}  ?
  .`))try{y(J);const ue=await fetch(`${i}/${encodeURIComponent(a)}/${encodeURIComponent(J)}`,{method:"DELETE",credentials:"include"});if(!ue.ok)throw new Error(`(${ue.status})  .`);const Me=await(await fetch(`${i}/${encodeURIComponent(a)}/all`,{credentials:"include",headers:{Accept:"application/json"}})).json().catch(()=>[]);d(Array.isArray(Me)?Me:[])}catch(ue){alert(ue.message||String(ue))}finally{y(null)}},ae=async J=>{try{const ue=await fetch(`${i}/${encodeURIComponent(a)}?default_status=${encodeURIComponent(J)}`,{method:"POST",credentials:"include"});if(!ue.ok)throw new Error(`(${ue.status})   `);const Se=await ue.json();if(typeof Se!="number")throw new Error("  : round  ");const re=await(await fetch(`${i}/${encodeURIComponent(a)}/all`,{credentials:"include",headers:{Accept:"application/json"}})).json().catch(()=>[]);d(Array.isArray(re)?re:[]),E(!1),window.confirm(" .  ?")&&await Y(Se)}catch(ue){alert(ue.message||String(ue))}},Y=async J=>{try{_(!0),H(null),T(!0),D(J),Z(new Map),P(0);const ue=await fetch(`${i}/${encodeURIComponent(a)}/${encodeURIComponent(J)}/manual`,{credentials:"include",headers:{Accept:"application/json"}});if(!ue.ok)throw new Error(`(${ue.status})    `);const Se=await ue.json();G(Array.isArray(Se)?Se:[])}catch(ue){H(ue)}finally{_(!1)}},te=()=>{T(!1),D(null),G([]),Z(new Map),P(0)},K=(J,ue)=>{Z(Se=>{const Me=new Map(Se);return Me.set(String(J),{attStatusCd:ue.attStatusCd,attComment:ue.attComment}),Me})},le=J=>{setTimeout(()=>{const ue=document.querySelector(`tr[data-enroll-id="${I[J]?.enrollId}"]`);ue&&ue.scrollIntoView({behavior:"smooth",block:"nearest"})},50)},ve=()=>{P(J=>{const ue=Math.min(I.length-1,J+1);return le(ue),ue})},ke=async()=>{try{if(!$){alert("  .");return}const J=Array.from(U,([Se,Me])=>({enrollId:Se,attStatusCd:Me.attStatusCd,attComment:Me.attComment??null})),ue=await fetch(`${i}/${encodeURIComponent(a)}/${encodeURIComponent($)}/manual`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(J)});if(!ue.ok)throw new Error(`(${ue.status})  `);alert("."),S(Se=>Se+1),te()}catch(J){alert(J.message||String(J))}};return e.jsxs("section",{id:"attendance-root",className:"container py-0","data-lecture-id":a,children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:" "}),e.jsx("div",{className:"d-flex flex-wrap gap-2 align-items-center",children:e.jsx("button",{id:"btn-open-create-modal",className:"btn btn-primary",onClick:()=>E(!0),children:" "})})]}),e.jsxs("div",{className:"row g-3 mb-2",id:"summary-cards",children:[e.jsx("div",{className:"col-12 col-lg-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"  "})}),e.jsx("div",{className:"card-body d-flex align-items-center justify-content-center",style:{height:"180px",overflow:"visible"},children:e.jsx("div",{style:{width:"100%",maxWidth:"350px",height:"150px"},children:e.jsx(wh,{data:{labels:["","","","",""],datasets:[{data:[q.ok,q.no,q.late,q.early,q.excp],backgroundColor:["#28a745","#dc3545","#ffc107","#fd7e14","#17a2b8"],borderWidth:2,borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,layout:{padding:{right:10}},plugins:{legend:{position:"right",labels:{padding:8,font:{size:11},boxWidth:12,generateLabels:J=>{const ue=J.data,Se=ue.datasets[0].data.reduce((Me,re)=>Me+re,0);return ue.labels.map((Me,re)=>{const he=ue.datasets[0].data[re],Re=Se>0?Math.round(he/Se*1e3)/10:0;return{text:`${Me} ${he} (${Re}%)`,fillStyle:ue.datasets[0].backgroundColor[re],hidden:!1,index:re}})}}},tooltip:{callbacks:{label:J=>{const ue=J.label||"",Se=J.parsed||0,Me=J.dataset.data.reduce((he,Re)=>he+Re,0),re=Me>0?Math.round(Se/Me*1e3)/10:0;return`${ue}: ${Se} (${re}%)`}}}}}})})})]})}),e.jsx("div",{className:"col-12 col-lg-8",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"    ( 4)"})}),e.jsx("div",{className:"card-body",style:{height:"180px",padding:"0.25rem"},children:(()=>{const J=c.slice().sort((Se,Me)=>(Me.lctRound||0)-(Se.lctRound||0)).slice(0,4).reverse(),ue=Math.max(...J.map(Se=>Se.totalCnt||0),1);return e.jsx(iv,{data:{labels:J.map(Se=>{const Me=Se.lctPrintRound??Se.lctRound??"-",re=Se.attDay||Se.startAt||Se.endAt;if(!re)return`#${Me}`;const he=new Date(re);if(Number.isNaN(he.getTime()))return`#${Me}`;const Re=String(he.getFullYear()).slice(-2),Be=String(he.getMonth()+1).padStart(2,"0"),fe=String(he.getDate()).padStart(2,"0");return`#${Me} (${Re}.${Be}.${fe})`}),datasets:[{label:"",data:J.map(Se=>Se.okCnt||0),backgroundColor:"#28a745",barPercentage:.4,categoryPercentage:.8},{label:"",data:J.map(Se=>Se.noCnt||0),backgroundColor:"#dc3545",barPercentage:.4,categoryPercentage:.8},{label:"",data:J.map(Se=>Se.lateCnt||0),backgroundColor:"#ffc107",barPercentage:.4,categoryPercentage:.8},{label:"",data:J.map(Se=>Se.earlyCnt||0),backgroundColor:"#fd7e14",barPercentage:.4,categoryPercentage:.8},{label:"",data:J.map(Se=>Se.excpCnt||0),backgroundColor:"#17a2b8",barPercentage:.4,categoryPercentage:.8}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!0,beginAtZero:!0,max:ue,ticks:{callback:function(Se){return Math.round(Se/ue*100)+"%"},stepSize:Math.ceil(ue/10),font:{size:10}}},y:{stacked:!0,ticks:{font:{size:10}}}},plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(Se){const Me=Se.dataset.label||"",re=Se.parsed.x||0,he=ue>0?Math.round(re/ue*100):0;return`${Me}: ${re} (${he}%)`}}}}}})})()})]})})]}),u&&e.jsx("div",{className:"text-muted",children:" "}),f&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(f.message||f)}),!u&&!f&&e.jsx("section",{"aria-label":" ",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-12 col-xl-8",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"  "})}),e.jsx("div",{className:"card-body",children:c.length===0?e.jsx("div",{className:"text-center text-muted py-4",children:"  ."}):e.jsx("div",{className:"attendance-table-container",style:{border:"none",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsx("div",{className:"attendance-table-scroll",children:e.jsxs("table",{className:"table table-sm align-middle mb-0",id:"round-table",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:80},className:"text-center",children:""}),e.jsx("th",{style:{width:120},className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{style:{width:80},className:"text-center",children:""})]})}),e.jsx("tbody",{id:"round-tbody",children:c.slice().sort((J,ue)=>(ue.lctRound||0)-(J.lctRound||0)).map(J=>{const ue=J.lctPrintRound??J.lctRound??"-",Se=i2(J.attDay||J.startAt||J.endAt);return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Me=>{Me.preventDefault(),Y(J.lctRound)},children:["#",ue]})}),e.jsx("td",{className:"small text-muted text-center",children:Se}),e.jsx("td",{className:"text-center",children:J.okCnt>0&&e.jsx("span",{className:"badge bg-success-subtle text-success border border-success-subtle",children:J.okCnt})}),e.jsx("td",{className:"text-center",children:J.noCnt>0&&e.jsx("span",{className:"badge bg-danger-subtle text-danger border border-danger-subtle",children:J.noCnt})}),e.jsx("td",{className:"text-center",children:J.earlyCnt>0&&e.jsx("span",{className:"badge bg-warning text-dark",children:J.earlyCnt})}),e.jsx("td",{className:"text-center",children:J.lateCnt>0&&e.jsx("span",{className:"badge bg-warning text-dark",children:J.lateCnt})}),e.jsx("td",{className:"text-center",children:J.excpCnt>0&&e.jsx("span",{className:"badge bg-info-subtle text-info border border-info-subtle",children:J.excpCnt})}),e.jsx("td",{className:"text-center",children:J.tbdCnt>0&&e.jsx("span",{className:`badge bg-secondary ${J.tbdCnt>0?"blink-tbd":""}`,children:J.tbdCnt})}),e.jsx("td",{className:"text-center",children:e.jsx("button",{className:"btn btn-sm border-0",disabled:b===J.lctRound,onClick:()=>X(J.lctRound),children:e.jsx("span",{style:{color:"red"},children:""})})})]},J.lctRound??ue)})})]})})})})]})}),e.jsx("div",{className:"col-12 col-xl-4",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"   "})}),e.jsxs("div",{className:"card-body d-flex flex-column",children:[e.jsx("div",{className:"mb-3 px-2 pt-2",children:e.jsxs("div",{className:"d-flex align-items-center gap-2 mb-2",children:[e.jsxs("div",{className:"btn-group flex-shrink-0",role:"group",children:[e.jsx("button",{type:"button",className:`btn btn-sm ${w==="no"?"btn-danger":"btn-outline-danger"}`,onClick:()=>M("no"),style:{minWidth:"50px"},children:""}),e.jsx("button",{type:"button",className:`btn btn-sm ${w==="late"?"btn-warning text-dark":"btn-outline-warning"}`,onClick:()=>M("late"),style:{minWidth:"50px"},children:""}),e.jsx("button",{type:"button",className:`btn btn-sm ${w==="early"?"btn-warning text-dark":"btn-outline-warning"}`,onClick:()=>M("early"),style:{minWidth:"50px"},children:""})]}),e.jsx("input",{type:"number",id:"filter-count",className:"form-control form-control-sm flex-shrink-0",style:{width:55},value:B,onChange:J=>F(Math.max(0,Number(J.target.value))),min:"0"}),e.jsx("span",{className:"small text-muted text-nowrap",children:" "})]})}),e.jsx("div",{className:"flex-grow-1",style:{minHeight:"200px"},children:e.jsx("div",{className:"attendance-table-container",style:{border:"none",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsx("div",{className:"attendance-table-scroll",style:{maxHeight:380},children:z.loading||l===null?e.jsx("div",{className:"text-center text-muted py-3",children:" "}):z.error?e.jsxs("div",{className:"alert alert-danger mb-0",children:[": ",String(z.error?.message||"   ")]}):e.jsxs("table",{className:"table table-sm table-hover mb-0",children:[e.jsx("thead",{className:"table-light",style:{position:"sticky",top:0},children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center small",children:""}),e.jsx("th",{className:"text-center small",children:""}),e.jsx("th",{className:"text-center small",children:""}),e.jsx("th",{className:"text-center small",children:""})]})}),e.jsx("tbody",{children:k.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center text-muted small py-3",children:"   ."})}):k.map(({enrollId:J,student:ue,noCnt:Se,lateCnt:Me,earlyCnt:re})=>e.jsxs("tr",{onClick:()=>s(`/classroom/professor/${a}/student/${ue.studentNo}`),style:{cursor:"pointer"},children:[e.jsxs("td",{className:"small text-center",children:[e.jsxs("span",{className:"fw-semibold",children:[ue.lastName,ue.firstName]}),e.jsxs("span",{className:"text-muted",style:{fontSize:"0.7rem"},children:["(",ue.studentNo,")"]})]}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:"badge bg-danger",children:Se||0})}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:"badge bg-warning text-dark",children:Me||0})}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:"badge bg-warning text-dark",children:re||0})})]},J))})]})})})}),e.jsxs("div",{className:"text-end small text-muted mt-2 pt-2 border-top",children:[" ",k.length," "]})]})]})})]})}),N&&io.createPortal(e.jsx("div",{className:"d-flex align-items-center justify-content-center",tabIndex:-1,role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,zIndex:2e3,backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>E(!1),children:e.jsx("div",{className:"modal-dialog modal-xl",style:{maxHeight:"90vh"},onClick:J=>J.stopPropagation(),children:e.jsxs("div",{className:"modal-content rounded-4 h-100 d-flex flex-column",style:{backgroundColor:"#fff"},children:[e.jsxs("div",{className:"modal-header border-bottom p-3",children:[e.jsx("h5",{className:"modal-title",children:" "}),e.jsx("button",{type:"button",className:"btn-close ms-auto","aria-label":"",onClick:()=>E(!1)})]}),e.jsx("div",{className:"modal-body p-4",children:e.jsxs("div",{className:"row g-4 justify-content-center",style:{maxWidth:"600px",margin:"0 auto"},children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{role:"button",className:"d-flex flex-column align-items-center justify-content-center border rounded-3 mode-card shadow-sm",style:{width:"100%",aspectRatio:"1/1",cursor:"pointer",transition:"all 0.2s",backgroundColor:"#f8f9fa"},onClick:()=>ae("OK"),onMouseEnter:J=>{J.currentTarget.style.transform="translateY(-4px)",J.currentTarget.style.boxShadow="0 0.5rem 1rem rgba(0,0,0,0.15)"},onMouseLeave:J=>{J.currentTarget.style.transform="translateY(0)",J.currentTarget.style.boxShadow=""},children:[e.jsx("div",{style:{fontSize:"4.5rem",marginBottom:"0.5rem",color:"#28a745",lineHeight:1},children:""}),e.jsx("div",{className:"h5 mb-1 fw-semibold",children:" "}),e.jsx("div",{className:"text-muted small",children:"   "})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{role:"button",className:"d-flex flex-column align-items-center justify-content-center border rounded-3 mode-card shadow-sm",style:{width:"100%",aspectRatio:"1/1",cursor:"pointer",transition:"all 0.2s",backgroundColor:"#f8f9fa"},onClick:()=>ae("TBD"),onMouseEnter:J=>{J.currentTarget.style.transform="translateY(-4px)",J.currentTarget.style.boxShadow="0 0.5rem 1rem rgba(0,0,0,0.15)"},onMouseLeave:J=>{J.currentTarget.style.transform="translateY(0)",J.currentTarget.style.boxShadow=""},children:[e.jsx("div",{style:{fontSize:"4.5rem",marginBottom:"0.5rem",color:"#007bff",lineHeight:1},children:""}),e.jsx("div",{className:"h5 mb-1 fw-semibold",children:" "}),e.jsx("div",{className:"text-muted small",children:"  "})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{role:"button",className:"d-flex flex-column align-items-center justify-content-center border rounded-3 mode-card shadow-sm",style:{width:"100%",aspectRatio:"1/1",cursor:"pointer",transition:"all 0.2s",backgroundColor:"#f8f9fa"},onClick:()=>ae("NO"),onMouseEnter:J=>{J.currentTarget.style.transform="translateY(-4px)",J.currentTarget.style.boxShadow="0 0.5rem 1rem rgba(0,0,0,0.15)"},onMouseLeave:J=>{J.currentTarget.style.transform="translateY(0)",J.currentTarget.style.boxShadow=""},children:[e.jsx("div",{style:{fontSize:"4.5rem",marginBottom:"0.5rem",color:"#dc3545",lineHeight:1},children:""}),e.jsx("div",{className:"h5 mb-1 fw-semibold",children:" "}),e.jsx("div",{className:"text-muted small",children:"   "})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{role:"button",className:"d-flex flex-column align-items-center justify-content-center border rounded-3 mode-card shadow-sm",style:{width:"100%",aspectRatio:"1/1",opacity:.5,cursor:"not-allowed",backgroundColor:"#f8f9fa"},title:"QR  .",children:[e.jsx("img",{src:"/images/QR_ICON.png",alt:"QR Code",style:{width:"80px",height:"80px",marginBottom:"0.5rem",objectFit:"contain"}}),e.jsx("div",{className:"h5 mb-1 fw-semibold",children:"QR "}),e.jsx("div",{className:"text-muted small",children:""})]})})]})}),e.jsx("div",{className:"modal-footer border-top p-3 d-flex justify-content-end gap-2",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>E(!1),children:""})})]})})}),document.body),A&&io.createPortal(e.jsx("div",{id:"studentsModal",className:"d-flex align-items-center justify-content-center",tabIndex:-1,role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,zIndex:2e3,backgroundColor:"rgba(0,0,0,0.5)"},onClick:te,children:e.jsx("div",{className:"modal-dialog modal-xl",style:{maxHeight:"90vh"},onClick:J=>J.stopPropagation(),children:e.jsxs("div",{className:"modal-content rounded-4 h-100 d-flex flex-column",style:{backgroundColor:"#fff"},children:[e.jsxs("div",{className:"modal-header border-bottom p-3",children:[e.jsxs("h5",{className:"modal-title",children:["  ",e.jsxs("small",{className:"text-muted",children:["#",$]})]}),e.jsx("button",{type:"button",className:"btn-close ms-auto","aria-label":"",onClick:te})]}),e.jsxs("div",{className:"modal-body d-flex flex-column flex-grow-1",style:{overflow:"hidden"},children:[e.jsxs("div",{id:"checker-panel",className:`card mb-0 ${I.length?"":"d-none"}`,children:[e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3 align-items-stretch",children:[e.jsx("div",{className:"col-12 col-md-3",children:e.jsx("div",{className:"d-flex h-100 align-items-center justify-content-center",children:e.jsx("img",{id:"chk-photo",alt:"",className:"d-block rounded-3",style:{width:135,height:135,objectFit:"cover",objectPosition:"top",border:"1px solid #dee2e6"},src:I[C]?.studentNo?`/classroom/api/v1/common/photo/student/${encodeURIComponent(a)}/${encodeURIComponent(I[C].studentNo)}`:void 0})})}),e.jsx("div",{className:"col-12 col-md-9",children:e.jsxs("div",{className:"row g-3 align-items-end",children:[e.jsx("div",{className:"col-12 col-lg-5",children:e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{id:"chk-studentNo",className:"fw-semibold",children:I[C]?.studentNo||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{id:"chk-name",className:"fw-semibold",children:`${I[C]?.lastName||""}${I[C]?.firstName||""}`})]})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-3 mt-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{id:"chk-dept",className:"fw-semibold",children:I[C]?.univDeptName||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{id:"chk-grade",className:"fw-semibold",children:I[C]?.gradeName||I[C]?.grade||"-"})]})]})]})}),e.jsx("div",{className:"col-12 col-lg-7",children:e.jsxs("div",{className:"row g-2",children:[e.jsxs("div",{className:"col-12",children:[e.jsx("label",{htmlFor:"chk-comment",className:"form-label small text-muted mb-1",children:""}),e.jsx("input",{id:"chk-comment",type:"text",className:"form-control form-control-sm",placeholder:"",value:U.get(String(I[C]?.enrollId))?.attComment||I[C]?.attComment||"",onChange:J=>{const ue=I[C];if(!ue)return;const Se=U.get(String(ue.enrollId))||{};K(ue.enrollId,{attStatusCd:Se.attStatusCd||ue.attStatusCd||"ATTD_TBD",attComment:J.target.value})}})]}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex flex-nowrap gap-1",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm text-nowrap",onClick:()=>{const J=I[C];if(!J)return;const ue=U.get(String(J.enrollId))?.attComment||J.attComment||"";K(J.enrollId,{attStatusCd:"ATTD_TBD",attComment:ue}),ve()},children:""}),e.jsx("button",{type:"button",className:"btn btn-success btn-sm text-nowrap",onClick:()=>{const J=I[C];if(!J)return;const ue=U.get(String(J.enrollId))?.attComment||J.attComment||"";K(J.enrollId,{attStatusCd:"ATTD_OK",attComment:ue}),ve()},children:""}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-nowrap",onClick:()=>{const J=I[C];if(!J)return;const ue=U.get(String(J.enrollId))?.attComment||J.attComment||"";K(J.enrollId,{attStatusCd:"ATTD_NO",attComment:ue}),ve()},children:""}),e.jsx("button",{type:"button",className:"btn btn-warning btn-sm text-dark text-nowrap",onClick:()=>{const J=I[C];if(!J)return;const ue=U.get(String(J.enrollId))?.attComment||J.attComment||"";K(J.enrollId,{attStatusCd:"ATTD_EARLY",attComment:ue}),ve()},children:""}),e.jsx("button",{type:"button",className:"btn btn-warning btn-sm text-dark text-nowrap",onClick:()=>{const J=I[C];if(!J)return;const ue=U.get(String(J.enrollId))?.attComment||J.attComment||"";K(J.enrollId,{attStatusCd:"ATTD_LATE",attComment:ue}),ve()},children:""}),e.jsx("button",{type:"button",className:"btn btn-info btn-sm text-nowrap",onClick:()=>{const J=I[C];if(!J)return;const ue=U.get(String(J.enrollId))?.attComment||J.attComment||"";K(J.enrollId,{attStatusCd:"ATTD_EXCP",attComment:ue}),ve()},children:""})]})})]})})]})})]})}),e.jsx("div",{className:"table-responsive flex-grow-1",style:{maxHeight:"45vh",overflow:"auto"},children:e.jsxs("table",{className:"table table-sm table-bordered text-center align-middle mb-0",children:[e.jsx("thead",{className:"table-light",style:{position:"sticky",top:"-1px",zIndex:10},children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"64px",paddingTop:"12px",paddingBottom:"12px"},children:"#"}),e.jsx("th",{style:{width:"120px",paddingTop:"12px",paddingBottom:"12px"},children:""}),e.jsx("th",{style:{width:"80px",paddingTop:"12px",paddingBottom:"12px"},children:""}),e.jsx("th",{style:{width:"60px",paddingTop:"12px",paddingBottom:"12px"},children:""}),e.jsx("th",{style:{minWidth:"120px",paddingTop:"12px",paddingBottom:"12px"},children:""}),e.jsx("th",{style:{width:"80px",paddingTop:"12px",paddingBottom:"12px"},children:""}),e.jsx("th",{style:{minWidth:"200px",paddingTop:"12px",paddingBottom:"12px"},children:""})]})}),e.jsx("tbody",{id:"students-tbody",children:L?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted",children:" "})}):O?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-danger",children:"   ."})}):I.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted",children:"   ."})}):I.map((J,ue)=>{const Se=U.get(String(J.enrollId))||{},Me=Se.attStatusCd||J.attStatusCd||"ATTD_TBD",re=Se.attComment||J.attComment||"";return e.jsxs("tr",{"data-enroll-id":J.enrollId,className:ue===C?"table-active":"",onClick:()=>P(ue),style:{cursor:"pointer"},children:[e.jsx("td",{children:e.jsxs("button",{className:"btn btn-sm btn-outline-secondary",onClick:he=>{he.preventDefault(),P(ue)},children:["#",ue+1]})}),e.jsx("td",{className:"text-center",children:J.studentNo}),e.jsx("td",{className:"text-center",children:`${J.lastName||""}${J.firstName||""}`}),e.jsx("td",{className:"text-center",children:J.gradeName||J.grade||"-"}),e.jsx("td",{className:"text-center",children:J.univDeptName||"-"}),e.jsx("td",{children:(()=>{const he={ATTD_TBD:{cls:"badge bg-secondary status-pill",label:""},ATTD_OK:{cls:"badge bg-success status-pill",label:""},ATTD_NO:{cls:"badge bg-danger status-pill",label:""},ATTD_EARLY:{cls:"badge bg-warning text-dark status-pill",label:""},ATTD_LATE:{cls:"badge bg-warning text-dark status-pill",label:""},ATTD_EXCP:{cls:"badge bg-info status-pill",label:""}},Re=he[Me]||he.ATTD_TBD;return e.jsx("span",{className:Re.cls,children:Re.label})})()}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:re,onChange:he=>K(J.enrollId,{attStatusCd:Me,attComment:he.target.value})})})]},J.enrollId)})})]})})]}),e.jsxs("div",{className:"modal-footer border-top p-3 d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:te,children:""}),e.jsx("button",{id:"btn-submit-changes",type:"button",className:"btn btn-primary",onClick:ke,children:""})]})]})]})})}),document.body)]})}const Gc=a=>String(a).padStart(2,"0"),ar=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${Gc(s.getMonth()+1)}-${Gc(s.getDate())} ${Gc(s.getHours())}:${Gc(s.getMinutes())}`},Ob=(a,s)=>{const l=Date.now(),i=a?new Date(a).getTime():void 0,c=s?new Date(s).getTime():void 0;if(typeof i=="number"&&i>l)return"upcoming";if(typeof i=="number"&&i<=l){if(typeof c!="number"||c>=l)return"ongoing";if(c<l)return"closed"}return typeof c=="number"&&c<l?"closed":"unknown"};function c2({open:a,entries:s,total:l,error:i,saving:c,onChange:d,onSubmit:u,onClose:h}){return x.useEffect(()=>{if(!a)return;const f=document.body.style.overflow,g=b=>{b.key==="Escape"&&h()};return document.body.style.overflow="hidden",document.addEventListener("keydown",g),()=>{document.body.style.overflow=f,document.removeEventListener("keydown",g)}},[a,h]),a?io.createPortal(e.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"exam-weight-modal-title",style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.45)",zIndex:1050,display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"},onClick:f=>{f.target===f.currentTarget&&h()},children:e.jsx("div",{className:"card shadow-lg",style:{width:"min(720px, 100%)",maxHeight:"90vh",overflow:"hidden"},onClick:f=>f.stopPropagation(),children:e.jsxs("form",{onSubmit:u,className:"d-flex flex-column",style:{height:"100%"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h5 mb-0",id:"exam-weight-modal-title",children:"   "}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"",onClick:h,disabled:c})]}),e.jsxs("div",{className:"card-body",style:{overflowY:"auto"},children:[i&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:i}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",style:{width:56},children:"#"}),e.jsx("th",{scope:"col",children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:200},children:" "}),e.jsx("th",{scope:"col",className:"text-end",style:{width:160},children:" "})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"  ."})}):s.map((f,g)=>{const b=f.startAt?ar(f.startAt):"-",y=f.endAt?ar(f.endAt):"-";return e.jsxs("tr",{children:[e.jsxs("td",{className:"text-muted",children:["#",g+1]}),e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold text-truncate",title:f.examName,children:f.examName}),e.jsx("div",{className:"text-muted small",children:f.examTypeLabel})]}),e.jsxs("td",{className:"text-center text-muted small",children:[b," ~ ",y]}),e.jsx("td",{className:"text-end",children:e.jsx("input",{type:"number",min:0,max:100,className:"form-control form-control-sm text-end",value:f.value,onChange:v=>d(f.id,v.target.value),disabled:c,required:!0})})]},f.id||g)})})]})})]}),e.jsxs("div",{className:"card-footer d-flex flex-column flex-sm-row align-items-sm-center justify-content-between gap-2",children:[e.jsxs("div",{className:"fw-semibold",children:["  :",e.jsx("span",{className:l===100?"text-success":"text-danger",children:l})]}),e.jsx("div",{className:"text-muted small flex-grow-1 text-sm-end",children:"   100  ."}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:h,disabled:c,children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c||s.length===0,children:c?" ...":""})]})]})]})})}),document.body):null}function o2(){const{lectureId:a}=dt(),[s,l]=x.useState([]),[i,c]=x.useState(!0),[d,u]=x.useState(null),[h,f]=x.useState(null),[g,b]=x.useState(!1),[y,v]=x.useState([]),[S,N]=x.useState(""),[E,A]=x.useState(!1),T=x.useCallback(async()=>{c(!0),u(null);try{const C=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}`,P=await fetch(C,{headers:{Accept:"application/json"},credentials:"include"});if(!P.ok)throw new Error(`(${P.status})    .`);const U=await P.json();if(!Array.isArray(U))throw new Error("    .");l(U)}catch(C){u(C)}finally{c(!1)}},[a]);x.useEffect(()=>{T()},[T]);const $=x.useMemo(()=>{const C=[],P=[],U=[],Z=[];return s.forEach(z=>{const W=Ob(z.startAt,z.endAt);W==="upcoming"?P.push(z):W==="ongoing"?U.push(z):W==="closed"&&Z.push(z),C.push(z)}),{all:C,upcoming:P,ongoing:U,closed:Z}},[s]),D=C=>{const P=C.lctExamId??C.id,U=C.examName||C.title||"( )",Z=a&&P?`/classroom/professor/${encodeURIComponent(a)}/exam/${encodeURIComponent(P)}`:null,z={upcoming:"",ongoing:"",closed:"",unknown:""}[Ob(C.startAt,C.endAt)]||"";return e.jsxs("tr",{children:[e.jsx("td",{children:Z?e.jsx(Pe,{to:Z,className:"text-decoration-none",children:U}):U}),e.jsx("td",{children:C.examTypeName||C.examType||"-"}),e.jsx("td",{children:z}),e.jsxs("td",{children:[ar(C.startAt)," ~ ",ar(C.endAt)]}),e.jsx("td",{children:C.notice||"-"}),e.jsx("td",{children:typeof C.weightValue<"u"?C.weightValue:"-"}),e.jsx("td",{children:ar(C.createAt||C.createdAt)})]})};x.useEffect(()=>{g||v(s.map(C=>({id:C.lctExamId??C.id,examName:C.examName||C.title||"( )",examTypeLabel:C.examTypeName||C.examType||" ",startAt:C.startAt,endAt:C.endAt,value:C.weightValue!=null?String(C.weightValue):""})).filter(C=>C.id!=null))},[s,g]);const I=x.useCallback(()=>{i||s.length===0||(N(""),v(s.map(C=>({id:C.lctExamId??C.id,examName:C.examName||C.title||"( )",examTypeLabel:C.examTypeName||C.examType||" ",startAt:C.startAt,endAt:C.endAt,value:C.weightValue!=null?String(C.weightValue):""})).filter(C=>C.id!=null)),b(!0))},[s,i]),G=x.useCallback(()=>{E||(b(!1),N(""))},[E]),L=x.useCallback((C,P)=>{v(U=>U.map(Z=>{if(Z.id!==C)return Z;const z=P.replace(/[^0-9]/g,"").slice(0,3);if(z==="")return{...Z,value:""};const W=Math.min(Number.parseInt(z,10)||0,100);return{...Z,value:String(W)}})),N("")},[]),_=x.useMemo(()=>y.reduce((C,P)=>C+(Number.parseInt(P.value,10)||0),0),[y]),O=x.useCallback(async C=>{if(C.preventDefault(),E)return;if(!y.length){N("   .");return}const P=[];let U=0;for(const Z of y){const z=Number.parseInt(Z.value,10);if(!Z.id){N(" ID .");return}if(!Number.isInteger(z)||z<0||z>100){N(`${Z.examName}   0  100  .`);return}U+=z,P.push({lctExamId:Z.id,weightValue:z})}if(U!==100){N(`   ${U}. 100  .`);return}try{A(!0),N("");const Z=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/weightValue`,z=await fetch(Z,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(P)});if(!z.ok)throw new Error(`(${z.status})    .`);f({type:"success",message:"  ."}),b(!1),await T()}catch(Z){console.error("[Exam] Failed to update weight values:",Z),N(Z instanceof Error?Z.message:"    .")}finally{A(!1)}},[y,E,a,T]);x.useEffect(()=>{if(!h)return;const C=window.setTimeout(()=>f(null),4e3);return()=>window.clearTimeout(C)},[h]);const H=i||s.length===0||E;return e.jsxs("section",{id:"exam-root",className:"container py-0","data-lecture-id":a,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:""}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-primary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:" "}),e.jsxs("ul",{className:"dropdown-menu",children:[e.jsx("li",{children:e.jsx(Pe,{className:"dropdown-item",to:`/classroom/professor/${encodeURIComponent(a)}/exam/offline/new`,children:"  "})}),e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",type:"button",disabled:!0,children:"   ( )"})})]})]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:I,disabled:H,children:" "})]})]}),i&&e.jsx("div",{className:"text-muted",children:" ..."}),d&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(d.message||d)}),h&&!d&&e.jsx("div",{className:`alert mt-3 ${h.type==="success"?"alert-success":"alert-danger"}`,role:"alert",children:h.message}),!i&&!d&&e.jsxs("div",{className:"card shadow-sm p-0",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h5 mb-0",children:" "})}),e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("ul",{className:"nav nav-pills mb-3",id:"exam-status-tabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"exam-tab-all-btn","data-bs-toggle":"tab","data-bs-target":"#exam-tab-all",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"exam-count-all",children:$.all.length})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"exam-tab-upcoming-btn","data-bs-toggle":"tab","data-bs-target":"#exam-tab-upcoming",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"exam-count-upcoming",children:$.upcoming.length})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"exam-tab-ongoing-btn","data-bs-toggle":"tab","data-bs-target":"#exam-tab-ongoing",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"exam-count-ongoing",children:$.ongoing.length})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"exam-tab-closed-btn","data-bs-toggle":"tab","data-bs-target":"#exam-tab-closed",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"exam-count-closed",children:$.closed.length})]})})]}),e.jsxs("div",{className:"tab-content border-top",id:"exam-status-content",children:[e.jsx("div",{className:"tab-pane fade show active",id:"exam-tab-all",role:"tabpanel","aria-labelledby":"exam-tab-all-btn",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:$.all.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"  ."})}):$.all.map(C=>e.jsx(D,{...C},C.lctExamId||C.id))})]})})}),e.jsx("div",{className:"tab-pane fade",id:"exam-tab-upcoming",role:"tabpanel","aria-labelledby":"exam-tab-upcoming-btn",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:$.upcoming.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"  ."})}):$.upcoming.map(C=>e.jsx(D,{...C},C.lctExamId||C.id))})]})})}),e.jsx("div",{className:"tab-pane fade",id:"exam-tab-ongoing",role:"tabpanel","aria-labelledby":"exam-tab-ongoing-btn",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:$.ongoing.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"  ."})}):$.ongoing.map(C=>e.jsx(D,{...C},C.lctExamId||C.id))})]})})}),e.jsx("div",{className:"tab-pane fade",id:"exam-tab-closed",role:"tabpanel","aria-labelledby":"exam-tab-closed-btn",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:$.closed.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"  ."})}):$.closed.map(C=>e.jsx(D,{...C},C.lctExamId||C.id))})]})})})]})]})]}),e.jsx(c2,{open:g,entries:y,total:_,error:S,saving:E,onChange:L,onSubmit:O,onClose:G})]})}const Xc=a=>String(a).padStart(2,"0"),No=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${Xc(s.getMonth()+1)}-${Xc(s.getDate())} ${Xc(s.getHours())}:${Xc(s.getMinutes())}`},d2=(a,s)=>{const l=No(a),i=No(s);return l==="-"&&i==="-"?"-":i==="-"?l:`${l} ~ ${i}`},u2=a=>a==="OFF"?"":a==="ON"?"":a||" ",h2=a=>{if(!a)return"( )";const s=a.lastName||"",l=a.firstName||"",i=`${s} ${l}`.trim();return i||a.name||a.userName||a.userId||"( )"};function m2(){const{lectureId:a,examId:s}=dt(),{students:l}=Jt(),i=rs(),[c,d]=x.useState(null),[u,h]=x.useState(!0),[f,g]=x.useState(null),[b,y]=x.useState(!1);x.useEffect(()=>{if(!a||!s){g(new Error(" ID   ID  .")),h(!1);return}let I=!0;return(async()=>{try{h(!0),g(null);const G=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/${encodeURIComponent(s)}`,L=await fetch(G,{headers:{Accept:"application/json"},credentials:"include"});if(!L.ok)throw new Error(`(${L.status})    .`);const _=await L.json();if(!I)return;d(_||null)}catch(G){if(!I)return;g(G)}finally{I&&h(!1)}})(),()=>{I=!1}},[a,s]);const v=x.useMemo(()=>{const I=new Map;if(Array.isArray(l))for(const G of l)G?.enrollId!==void 0&&G?.enrollId!==null&&I.set(String(G.enrollId),G);return I},[l]),S=x.useMemo(()=>Array.isArray(c?.submitList)?c.submitList:[],[c]),N=l===null,E=x.useMemo(()=>{let I=0;for(const G of S)G?.submit?.submitAt&&(I+=1);return{total:S.length||(Array.isArray(l)?l.length:0),submitted:I}},[S,l]),A=u||N,T=`/classroom/professor/${encodeURIComponent(a||"")}/exam`,$=async()=>{if(confirm("   ?"))try{y(!0);const I=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/${encodeURIComponent(s)}`,G=await fetch(I,{method:"DELETE",credentials:"include"});if(!G.ok){const L=await G.text().catch(()=>"");throw new Error(L||`(${G.status})   .`)}alert(" ."),i(T)}catch(I){alert(I instanceof Error?I.message:"    .")}finally{y(!1)}},D=()=>u?e.jsxs("div",{className:"text-center text-muted py-4",children:[e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):c?e.jsxs("dl",{className:"row mb-0",children:[e.jsx("dt",{className:"col-sm-3",children:""}),e.jsx("dd",{className:"col-sm-9",children:c.examName||"-"}),e.jsx("dt",{className:"col-sm-3",children:""}),e.jsx("dd",{className:"col-sm-9",children:u2(c.examType)}),e.jsx("dt",{className:"col-sm-3",children:" "}),e.jsx("dd",{className:"col-sm-9",children:c.examDesc||c.notice||"-"}),e.jsx("dt",{className:"col-sm-3",children:" "}),e.jsx("dd",{className:"col-sm-9",children:d2(c.startAt,c.endAt)}),e.jsx("dt",{className:"col-sm-3",children:" "}),e.jsx("dd",{className:"col-sm-9",children:typeof c.weightValue=="number"?c.weightValue:"-"}),e.jsx("dt",{className:"col-sm-3",children:""}),e.jsx("dd",{className:"col-sm-9",children:No(c.createAt||c.createdAt)})]}):e.jsx("div",{className:"text-center py-4",children:"   ."});return e.jsxs("section",{id:"exam-detail-root",className:"container py-0","data-lecture-id":a,"data-exam-id":s,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",id:"exam-detail-title",children:c?.examName||" "}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(Pe,{to:`/classroom/professor/${encodeURIComponent(a||"")}/exam/${encodeURIComponent(s||"")}/edit`,className:"btn btn-sm btn-outline-primary",children:""}),e.jsx("button",{onClick:$,disabled:b,className:"btn btn-sm btn-outline-danger",children:b?" ...":""}),e.jsx(Pe,{to:T,className:"btn btn-sm btn-outline-secondary",children:""})]})]}),f?e.jsx("div",{className:"alert alert-danger",role:"alert",children:f?.message||"     ."}):null,e.jsxs("div",{className:"card shadow-sm mb-4 p-0",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h5 mb-0",children:" "})}),e.jsx("div",{className:"card-body p-3",id:"exam-info-body",children:D()})]}),e.jsxs("div",{className:"card shadow-sm p-0",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"h5 mb-0",children:"  "}),e.jsxs("small",{className:"text-muted",children:[": ",E.submitted," / ",E.total]})]}),e.jsx("div",{className:"card-body p-0",children:A?e.jsxs("div",{className:"text-center text-muted py-4",children:[e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):S.length===0?e.jsx("div",{className:"text-center text-muted py-4",children:"   ."}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",style:{width:120},children:""}),e.jsx("th",{scope:"col",children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:80},children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:160},children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:120},children:" "})]})}),e.jsx("tbody",{id:"student-results-body",children:S.map((I,G)=>{const L=v.get(String(I?.enrollId)),_=I?.submit?.modifiedScore??I?.submit?.autoScore??I?.submit?.score,O=_==null||_===""?"-":_,H=I?.submit?.submitAt?No(I.submit.submitAt):"",C=I?.submit?.submitAt?" ":"";return e.jsxs("tr",{children:[e.jsx("td",{children:L?.studentNo||"-"}),e.jsx("td",{children:h2(L)}),e.jsx("td",{className:"text-center",children:O}),e.jsx("td",{className:"text-center",children:H}),e.jsx("td",{className:"text-center",children:C})]},I?.enrollId??I?.id??G)})})]})})})]})]})}const Wc=a=>String(a).padStart(2,"0"),Kc=a=>!(a instanceof Date)||Number.isNaN(a.getTime())?"":`${a.getFullYear()}-${Wc(a.getMonth()+1)}-${Wc(a.getDate())}T${Wc(a.getHours())}:${Wc(a.getMinutes())}`,Lb=a=>a?a.length===16?`${a}:00`:a:"",f2=a=>{const s=a?.lastName??"",l=a?.firstName??"";return`${s} ${l}`.trim()||a?.name||a?.userName||a?.userId||"(  )"},p2=a=>{const s=[];return a?.univDeptName&&s.push(a.univDeptName),a?.gradeName&&s.push(a.gradeName),s.join("  ")};function g2(){const{lectureId:a}=dt(),{students:s,setStudents:l}=Jt(),i=rs(),[c,d]=x.useState(""),[u,h]=x.useState(""),[f,g]=x.useState(""),[b,y]=x.useState(""),[v,S]=x.useState(""),[N,E]=x.useState({}),[A,T]=x.useState([]),[$,D]=x.useState(""),[I,G]=x.useState(""),[L,_]=x.useState(!1),[O,H]=x.useState(!0),[C,P]=x.useState(""),[U,Z]=x.useState([]);x.useEffect(()=>{const Y=new Date;Y.setSeconds(0,0),g(Kc(Y));const te=new Date(Y.getTime()+3600*1e3);y(Kc(te))},[]),x.useEffect(()=>{if(Array.isArray(s)){Z(s),H(!1),P("");return}if(s===null&&a){let Y=!0;return H(!0),P(""),(async()=>{try{const te=await Kh(a);if(!Y)return;Z(te),l(te),P("")}catch(te){if(!Y)return;Z([]),P(te instanceof Error?te.message:"   .")}finally{Y&&H(!1)}})(),()=>{Y=!1}}a||H(!1)},[a,s,l]),x.useEffect(()=>{E(Y=>{const te={};return U.forEach((K,le)=>{const ve=String(K?.enrollId??K?.enrollID??le);te[ve]=Object.prototype.hasOwnProperty.call(Y,ve)?Y[ve]:""}),te}),T([])},[U]);const z=x.useMemo(()=>U.length,[U]),W=L||O||z===0,w=(Y=!0)=>{d(""),h(""),S("");const te=new Date;te.setSeconds(0,0),g(Kc(te));const K=new Date(te.getTime()+3600*1e3);y(Kc(K)),E(()=>{const le={};return U.forEach((ve,ke)=>{const J=String(ve?.enrollId??ve?.enrollID??ke);le[J]=""}),le}),T([]),Y&&(G(""),D(""))},M=Y=>{Y?.preventDefault?.(),w(!0)},B=()=>{W||(E(Y=>{const te={...Y};return U.forEach((K,le)=>{const ve=String(K?.enrollId??K?.enrollID??le);te[ve]=String(Math.floor(Math.random()*101))}),te}),T([]),D("   ."),G(""))},F=(Y,te)=>{E(K=>({...K,[Y]:te})),T(K=>K.includes(Y)?K.filter(le=>le!==Y):K)},q=()=>{D(""),G("")},k=()=>{const Y=c.trim();if(!Y)throw new Error(" .");const te=u.trim();if(!te)throw new Error("   .");const K=Lb(f),le=Lb(b);if(!K)throw new Error("   .");if(!le)throw new Error("   .");const ve=new Date(K),ke=new Date(le);if(Number.isNaN(ve.getTime())||Number.isNaN(ke.getTime()))throw new Error("    .");if(ve>ke)throw new Error("      .");let J=null;if(v.trim().length>0){const re=Number.parseInt(v,10);if(!Number.isInteger(re)||re<0||re>100)throw new Error("  0  100   .");J=re}if(U.length===0)throw new Error("    .");const ue=[],Se=U.map((re,he)=>{const Re=re?.enrollId??re?.enrollID;if(Re==null)throw new Error(" (enrollId)     .");const Be=String(Re??he),fe=(N[Be]??"").trim();if(!fe)throw ue.push(Be),new Error("   .");const Le=Number.parseInt(fe,10);if(!Number.isInteger(Le)||Le<0||Le>100)throw ue.push(Be),new Error(" 0  100   .");return{enrollId:Re,score:Le}});T(ue);const Me={examName:Y,examDesc:te,startAt:K,endAt:le,eachResultList:Se};return J!==null&&(Me.weightValue=J),Me},X=async Y=>{if(Y.preventDefault(),q(),T([]),!a){G(" ID  .");return}let te;try{te=k()}catch(le){const ve=le instanceof Error?le.message:" .";G(ve);return}const K=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/offline`;try{_(!0);const le=await fetch(K,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(te)});if(!le.ok){const ke=await le.text().catch(()=>"");throw new Error(ke||`(${le.status})  .`)}const ve=le.headers.get("location");ve?i(ve):(D("  ."),w(!1))}catch(le){const ve=le instanceof Error?le.message:"    .";G(ve)}finally{_(!1)}},ae=x.useMemo(()=>O?e.jsxs("div",{className:"text-center text-muted py-4",children:[e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):C?e.jsx("div",{className:"alert alert-danger mb-0",role:"alert",children:C}):z===0?e.jsx("div",{className:"text-center text-muted py-4",children:"   ."}):null,[z,C,O]);return e.jsxs("section",{id:"exam-offline-root",className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(Pe,{to:`/classroom/professor/${encodeURIComponent(a||"")}/exam`,children:""})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"  "})]})}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(a||"")}/exam`,children:""})})]}),I&&e.jsx("div",{id:"alert-box",className:"alert alert-danger",role:"alert",children:I}),$&&e.jsx("div",{id:"toast-box",className:"alert alert-success",role:"alert",children:$}),e.jsxs("form",{id:"exam-offline-form",className:"vstack gap-4",onSubmit:X,onReset:M,children:[e.jsxs("div",{className:"card shadow-sm p-0",children:[e.jsx("div",{className:"card-header",children:e.jsx("strong",{children:" "})}),e.jsxs("div",{className:"card-body p-3 vstack gap-3",children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-lg-6",children:[e.jsxs("label",{htmlFor:"exam-name",className:"form-label d-block text-start",children:[" ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"exam-name",type:"text",className:"form-control",required:!0,maxLength:100,disabled:L,value:c,onChange:Y=>d(Y.target.value),placeholder:": 2 "})]}),e.jsxs("div",{className:"col-12 col-lg-6",children:[e.jsxs("label",{htmlFor:"exam-weight",className:"form-label d-block text-start",children:[" (%) ",e.jsx("span",{className:"text-muted",children:"()"})]}),e.jsx("input",{id:"exam-weight",type:"number",className:"form-control",min:0,max:100,step:1,disabled:L,value:v,onChange:Y=>S(Y.target.value),placeholder:"0~100  "}),e.jsx("div",{className:"form-text",children:" 100%   ."})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"exam-desc",className:"form-label d-block text-start",children:["  ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("textarea",{id:"exam-desc",className:"form-control",rows:3,required:!0,disabled:L,value:u,onChange:Y=>h(Y.target.value),placeholder:" , ,    ."})]}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsxs("label",{htmlFor:"exam-start",className:"form-label d-block text-start",children:["   ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"exam-start",type:"datetime-local",className:"form-control",required:!0,disabled:L,value:f,onChange:Y=>g(Y.target.value)})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsxs("label",{htmlFor:"exam-end",className:"form-label d-block text-start",children:["   ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"exam-end",type:"datetime-local",className:"form-control",required:!0,disabled:L,value:b,onChange:Y=>y(Y.target.value)}),e.jsx("div",{className:"form-text",children:"     ."})]})]})]})]}),e.jsxs("div",{className:"card shadow-sm p-0",children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"  "}),e.jsx("small",{className:"text-muted ms-2",children:"* 0~100  "})]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:B,disabled:W,children:"  "})]}),e.jsx("div",{className:"card-body p-3",children:ae||e.jsx("div",{className:"row row-cols-1 row-cols-md-3 row-cols-lg-5 g-3",children:U.map((Y,te)=>{const K=String(Y?.enrollId??Y?.enrollID??te),le=A.includes(K),ve=p2(Y);return e.jsx("div",{className:"col",children:e.jsx("div",{className:"card h-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsxs("div",{className:"fw-semibold",children:["#",te+1," ",f2(Y)]}),e.jsxs("div",{className:"text-muted small",children:["(",Y?.studentNo||" ",")"]}),ve&&e.jsx("div",{className:"text-muted small",children:ve}),e.jsxs("div",{className:"mt-2 d-flex align-items-center gap-2",children:[e.jsx("label",{htmlFor:`score-${K}`,className:"form-label mb-0 small fw-bold",children:":"}),e.jsx("input",{id:`score-${K}`,type:"number",min:0,max:100,className:`form-control form-control-sm${le?" is-invalid":""}`,style:{width:"80px"},disabled:L,value:N[K]??"",onChange:ke=>F(K,ke.target.value)})]}),le&&e.jsx("div",{className:"invalid-feedback d-block small mt-1",children:"0-100  "})]})})},K)})})})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"reset",className:"btn btn-outline-secondary",disabled:L,children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:L||z===0,children:L?" ...":"  "})]})]})]})}const Qc=a=>String(a).padStart(2,"0"),zb=a=>!(a instanceof Date)||Number.isNaN(a.getTime())?"":`${a.getFullYear()}-${Qc(a.getMonth()+1)}-${Qc(a.getDate())}T${Qc(a.getHours())}:${Qc(a.getMinutes())}`,Ub=a=>a?a.length===16?`${a}:00`:a:"";function x2(){const{lectureId:a,examId:s}=dt(),l=rs(),[i,c]=x.useState(""),[d,u]=x.useState(""),[h,f]=x.useState(""),[g,b]=x.useState(""),[y,v]=x.useState(""),[S,N]=x.useState(""),[E,A]=x.useState(""),[T,$]=x.useState(!1),[D,I]=x.useState(!0);x.useEffect(()=>{if(!a||!s){A(" ID   ID  ."),I(!1);return}let H=!0;return(async()=>{try{I(!0),A("");const C=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/${encodeURIComponent(s)}`,P=await fetch(C,{headers:{Accept:"application/json"},credentials:"include"});if(!P.ok)throw new Error(`(${P.status})    .`);const U=await P.json();if(!H)return;if(c(U.examName||""),u(U.examDesc||U.notice||""),v(typeof U.weightValue=="number"?String(U.weightValue):""),U.startAt){const Z=new Date(U.startAt);Number.isNaN(Z.getTime())||f(zb(Z))}if(U.endAt){const Z=new Date(U.endAt);Number.isNaN(Z.getTime())||b(zb(Z))}}catch(C){if(!H)return;A(C instanceof Error?C.message:"     .")}finally{H&&I(!1)}})(),()=>{H=!1}},[a,s]);const G=()=>{N(""),A("")},L=()=>{const H=i.trim();if(!H)throw new Error(" .");const C=d.trim();if(!C)throw new Error("  .");const P=Ub(h),U=Ub(g);if(!P)throw new Error("   .");if(!U)throw new Error("   .");const Z=new Date(P),z=new Date(U);if(Number.isNaN(Z.getTime())||Number.isNaN(z.getTime()))throw new Error("    .");if(Z>z)throw new Error("      .");let W=null;if(y.trim().length>0){const M=Number.parseInt(y,10);if(!Number.isInteger(M)||M<0||M>100)throw new Error("  0  100   .");W=M}const w={examName:H,examDesc:C,startAt:P,endAt:U};return W!==null&&(w.weightValue=W),w},_=async H=>{if(H.preventDefault(),G(),!a||!s){A(" ID   ID  .");return}let C;try{C=L()}catch(U){const Z=U instanceof Error?U.message:" .";A(Z);return}const P=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/${encodeURIComponent(s)}`;try{$(!0);const U=await fetch(P,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(C)});if(!U.ok){const Z=await U.text().catch(()=>"");throw new Error(Z||`(${U.status})  .`)}N(" ."),setTimeout(()=>{l(`/classroom/professor/${encodeURIComponent(a)}/exam/${encodeURIComponent(s)}`)},1e3)}catch(U){const Z=U instanceof Error?U.message:"    .";A(Z)}finally{$(!1)}},O=`/classroom/professor/${encodeURIComponent(a||"")}/exam/${encodeURIComponent(s||"")}`;return e.jsxs("section",{id:"exam-edit-root",className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(Pe,{to:`/classroom/professor/${encodeURIComponent(a||"")}/exam`,children:""})}),e.jsx("li",{className:"breadcrumb-item",children:e.jsx(Pe,{to:O,children:" "})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:""})]})}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",to:O,children:""})})]}),E&&e.jsx("div",{id:"alert-box",className:"alert alert-danger",role:"alert",children:E}),S&&e.jsx("div",{id:"toast-box",className:"alert alert-success",role:"alert",children:S}),D?e.jsxs("div",{className:"text-center text-muted py-4",children:[e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):e.jsxs("form",{id:"exam-edit-form",className:"vstack gap-4",onSubmit:_,children:[e.jsxs("div",{className:"card shadow-sm p-0",children:[e.jsx("div",{className:"card-header",children:e.jsx("strong",{children:" "})}),e.jsxs("div",{className:"card-body p-3 vstack gap-3",children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-lg-6",children:[e.jsxs("label",{htmlFor:"exam-name",className:"form-label d-block text-start",children:[" ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"exam-name",type:"text",className:"form-control",required:!0,maxLength:100,disabled:T,value:i,onChange:H=>c(H.target.value),placeholder:": 2 "})]}),e.jsxs("div",{className:"col-12 col-lg-6",children:[e.jsxs("label",{htmlFor:"exam-weight",className:"form-label d-block text-start",children:[" (%) ",e.jsx("span",{className:"text-muted",children:"()"})]}),e.jsx("input",{id:"exam-weight",type:"number",className:"form-control",min:0,max:100,step:1,disabled:T,value:y,onChange:H=>v(H.target.value),placeholder:"0~100  "}),e.jsx("div",{className:"form-text",children:" 100%   ."})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"exam-desc",className:"form-label d-block text-start",children:["  ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("textarea",{id:"exam-desc",className:"form-control",rows:3,required:!0,disabled:T,value:d,onChange:H=>u(H.target.value),placeholder:" , ,    ."})]}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsxs("label",{htmlFor:"exam-start",className:"form-label d-block text-start",children:["   ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"exam-start",type:"datetime-local",className:"form-control",required:!0,disabled:T,value:h,onChange:H=>f(H.target.value)})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsxs("label",{htmlFor:"exam-end",className:"form-label d-block text-start",children:["   ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"exam-end",type:"datetime-local",className:"form-control",required:!0,disabled:T,value:g,onChange:H=>b(H.target.value)}),e.jsx("div",{className:"form-text",children:"     ."})]})]})]})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx(Pe,{to:O,className:"btn btn-outline-secondary",disabled:T,children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:T,children:T?" ...":" "})]})]})]})}const Bb=a=>{if(!a)return"-";const s=new Date(a);if(Number.isNaN(s.getTime()))return"-";const l=i=>String(i).padStart(2,"0");return`${s.getFullYear()}-${l(s.getMonth()+1)}-${l(s.getDate())} ${l(s.getHours())}:${l(s.getMinutes())}`},Fb=a=>{if(!a)return"-";const s=new Date(a);if(Number.isNaN(s.getTime()))return"-";const l=i=>String(i).padStart(2,"0");return`${s.getFullYear()}-${l(s.getMonth()+1)}-${l(s.getDate())}`},Ps=(a,s)=>{const l=Date.now(),i=a?new Date(a).getTime():null,c=s?new Date(s).getTime():null;if(i&&i>l)return"upcoming";if(i&&i<=l){if(!c||c>=l)return"ongoing";if(c<l)return"closed"}return"ongoing"};function b2({open:a,entries:s,total:l,error:i,saving:c,onChange:d,onSubmit:u,onClose:h}){return x.useEffect(()=>{if(!a)return;const f=document.body.style.overflow,g=b=>{b.key==="Escape"&&h()};return document.body.style.overflow="hidden",document.addEventListener("keydown",g),()=>{document.body.style.overflow=f,document.removeEventListener("keydown",g)}},[a,h]),a?io.createPortal(e.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"task-weight-modal-title",style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.45)",zIndex:1050,display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"},onClick:f=>{f.target===f.currentTarget&&h()},children:e.jsx("div",{className:"card shadow-lg",style:{width:"min(800px, 100%)",maxHeight:"90vh"},onClick:f=>f.stopPropagation(),children:e.jsxs("form",{onSubmit:u,style:{display:"flex",flexDirection:"column",maxHeight:"90vh"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h5 mb-0",id:"task-weight-modal-title",children:"   "}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"",onClick:h,disabled:c})]}),i&&e.jsx("div",{className:"alert alert-danger m-3 mb-0",role:"alert",children:i}),e.jsx("div",{className:"card-body p-0",style:{overflowY:"auto",flex:"1 1 auto"},children:e.jsxs("table",{className:"table table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#f8f9fa"},children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",style:{width:56},children:"#"}),e.jsx("th",{scope:"col",children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:200},children:" "}),e.jsx("th",{scope:"col",className:"text-end",style:{width:160},children:" "})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"  ."})}):s.map((f,g)=>{const b=f.startAt?Bb(f.startAt):"-",y=f.endAt?Bb(f.endAt):"-";return e.jsxs("tr",{children:[e.jsxs("td",{className:"text-muted",children:["#",g+1]}),e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold text-truncate",title:f.taskName,children:f.taskName}),e.jsx("div",{className:"text-muted small",children:f.taskType==="INDIV"?"":""})]}),e.jsxs("td",{className:"text-center text-muted small",children:[b," ~ ",y]}),e.jsx("td",{className:"text-end",children:e.jsx("input",{type:"number",min:0,max:100,className:"form-control form-control-sm text-end",value:f.value??"",onChange:v=>d(f.taskId,v.target.value),disabled:c,placeholder:"0"})})]},f.taskId||g)})})]})}),e.jsxs("div",{className:"card-footer d-flex flex-column flex-sm-row align-items-sm-center justify-content-between gap-2",children:[e.jsxs("div",{className:"fw-semibold",children:["  :",e.jsx("span",{className:l===100?"text-success":"text-danger",children:l})]}),e.jsx("div",{className:"text-muted small flex-grow-1 text-sm-end",children:"   100  ."}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:h,disabled:c,children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c||s.length===0,children:c?" ...":""})]})]})]})})}),document.body):null}const hn=({t:a,lectureId:s,kind:l,weightValue:i})=>{const c=a.title||a.taskName||a.indivtaskName||a.grouptaskName||"( )",d=Fb(a.startAt),u=Fb(a.endAt),h=a.indivtaskId||a.id||a.taskId,f=a.grouptaskId||a.id||a.taskId,g=l==="indiv"?`/classroom/professor/${encodeURIComponent(s)}/task/indiv/${encodeURIComponent(h||"")}`:`/classroom/professor/${encodeURIComponent(s)}/task/group/${encodeURIComponent(f||"")}`,b=!!(a.attachFileId||a.fileId||Array.isArray(a.attachFileList)&&a.attachFileList.length>0),y=i!=null&&i!==0?e.jsx("span",{className:"badge bg-primary",children:i}):e.jsx("span",{className:"badge bg-secondary",children:"X"});return e.jsxs("tr",{children:[e.jsx("td",{style:{width:"250px",overflow:"hidden",textOverflow:"ellipsis"},children:e.jsx(Pe,{to:g,className:"text-reset text-decoration-none",children:e.jsxs("div",{className:"d-flex align-items-center gap-1",children:[b&&e.jsx("i",{className:"bx bx-paperclip text-muted"}),e.jsx("div",{className:"fw-semibold text-primary",title:c,children:c})]})})}),e.jsx("td",{className:"text-center",style:{width:"100px"},children:y}),e.jsxs("td",{className:"text-muted small text-center text-nowrap",style:{width:"120px"},children:[d," ~ ",u]})]})};function y2(){const{lectureId:a}=dt(),[s,l]=x.useState([]),[i,c]=x.useState([]),[d,u]=x.useState({}),[h,f]=x.useState(!0),[g,b]=x.useState(null),[y,v]=x.useState(!1),[S,N]=x.useState([]),[E,A]=x.useState(""),[T,$]=x.useState(!1);x.useEffect(()=>{let z=!0;return(async()=>{try{f(!0),b(null);const W=`/classroom/api/v1/professor/task/${encodeURIComponent(a)}`,[w,M,B]=await Promise.all([fetch(`${W}/indiv`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${W}/group`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${W}/weight`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!w.ok||!M.ok)throw new Error("   .");const[F,q,k]=await Promise.all([w.json(),M.json(),B.ok?B.json():[]]);if(!z)return;l(Array.isArray(F)?F:[]),c(Array.isArray(q)?q:[]);const X={};Array.isArray(k)&&k.forEach(ae=>{ae.taskId&&(X[ae.taskId]=ae.weightValue)}),u(X)}catch(W){if(!z)return;b(W)}finally{z&&f(!1)}})(),()=>{z=!1}},[a]);const D=x.useMemo(()=>s.filter(z=>Ps(z.startAt,z.endAt)==="upcoming").length,[s]),I=x.useMemo(()=>s.filter(z=>Ps(z.startAt,z.endAt)==="ongoing").length,[s]),G=x.useMemo(()=>s.filter(z=>Ps(z.startAt,z.endAt)==="closed").length,[s]),L=x.useMemo(()=>i.filter(z=>Ps(z.startAt,z.endAt)==="upcoming").length,[i]),_=x.useMemo(()=>i.filter(z=>Ps(z.startAt,z.endAt)==="ongoing").length,[i]),O=x.useMemo(()=>i.filter(z=>Ps(z.startAt,z.endAt)==="closed").length,[i]),H=x.useMemo(()=>S.reduce((z,W)=>z+(parseInt(W.value)||0),0),[S]),C=x.useCallback(()=>{A("");const z=[];s.forEach(W=>{const w=W.indivtaskId||W.id||W.taskId,M=W.indivtaskName||W.taskName||"( )";z.push({taskType:"INDIV",taskId:w,taskName:M,startAt:W.startAt,endAt:W.endAt,value:d[w]??null})}),i.forEach(W=>{const w=W.grouptaskId||W.id||W.taskId,M=W.grouptaskName||W.taskName||"( )";z.push({taskType:"GROUP",taskId:w,taskName:M,startAt:W.startAt,endAt:W.endAt,value:d[w]??null})}),N(z),v(!0)},[s,i,d]),P=x.useCallback(()=>{v(!1),A("")},[]),U=x.useCallback((z,W)=>{N(w=>w.map(M=>M.taskId===z?{...M,value:W===""?null:parseInt(W)||0}:M))},[]),Z=x.useCallback(async z=>{z.preventDefault(),A(""),$(!0);try{const W=S.map(q=>({taskType:q.taskType,taskId:q.taskId,weightValue:q.value}));console.log("Submitting task weights:",W);const w=await fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(a)}/weight`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(W)});if(!w.ok)throw new Error(`  (HTTP ${w.status})`);const M=await fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(a)}/weight`,{headers:{Accept:"application/json"},credentials:"include"}),B=M.ok?await M.json():[],F={};Array.isArray(B)&&B.forEach(q=>{q.taskId&&(F[q.taskId]=q.weightValue)}),u(F),v(!1)}catch(W){A(W.message||"   .")}finally{$(!1)}},[S,a]);return e.jsxs("section",{id:"task-root",className:"container py-0","data-lecture-id":a,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:""}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-primary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:" "}),e.jsxs("ul",{className:"dropdown-menu",children:[e.jsx("li",{children:e.jsx(Pe,{className:"dropdown-item",to:`/classroom/professor/${encodeURIComponent(a)}/task/indiv/new`,children:" "})}),e.jsx("li",{children:e.jsx(Pe,{className:"dropdown-item",to:`/classroom/professor/${encodeURIComponent(a)}/task/group/new`,children:" "})})]})]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:C,disabled:s.length===0&&i.length===0,children:" "})]})]}),h&&e.jsx("div",{className:"text-muted",children:" "}),g&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(g.message||g)}),!h&&!g&&e.jsxs("div",{className:"row g-4 align-items-start",children:[e.jsx("div",{className:"col-12 col-xl-6",children:e.jsxs("div",{className:"card shadow-sm",children:[e.jsx("div",{className:"card-header d-flex align-items-center justify-content-between",children:e.jsx("h2",{className:"h5 mb-0",children:" "})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("ul",{className:"nav nav-pills mb-3",id:"indiv-status-tabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"indiv-all-tab","data-bs-toggle":"tab","data-bs-target":"#indiv-all",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge rounded-pill bg-primary ms-1",id:"indiv-count-all",style:{minWidth:"30px"},children:s.length})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"indiv-upcoming-tab","data-bs-toggle":"tab","data-bs-target":"#indiv-upcoming",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge rounded-pill bg-info ms-1",id:"indiv-count-upcoming",style:{minWidth:"30px"},children:D})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"indiv-ongoing-tab","data-bs-toggle":"tab","data-bs-target":"#indiv-ongoing",type:"button",role:"tab","aria-selected":"true",children:[" ",e.jsx("span",{className:"badge rounded-pill bg-success text-white ms-1",id:"indiv-count-ongoing",style:{minWidth:"30px"},children:I})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"indiv-closed-tab","data-bs-toggle":"tab","data-bs-target":"#indiv-closed",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge rounded-pill bg-secondary ms-1",id:"indiv-count-closed",style:{minWidth:"30px"},children:G})]})})]}),e.jsxs("div",{className:"tab-content",id:"indiv-status-content",children:[e.jsxs("div",{id:"indiv-all",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"indiv-all-tab",children:[e.jsx("div",{id:"indiv-list-all",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center text-muted py-4",children:"  ."})}):s.map((z,W)=>{const w=z.indivtaskId||z.id||z.taskId;return e.jsx(hn,{t:z,lectureId:a,kind:"indiv",weightValue:d[w]},w||W)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"indiv-pagination-all",className:"pagination pagination-sm mb-0"})})]}),e.jsxs("div",{id:"indiv-upcoming",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"indiv-upcoming-tab",children:[e.jsx("div",{id:"indiv-list-upcoming",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),e.jsx("tbody",{children:s.filter(z=>Ps(z.startAt,z.endAt)==="upcoming").map((z,W)=>{const w=z.indivtaskId||z.id||z.taskId;return e.jsx(hn,{t:z,lectureId:a,kind:"indiv",weightValue:d[w]},w||W)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"indiv-pagination-upcoming",className:"pagination pagination-sm mb-0"})})]}),e.jsxs("div",{id:"indiv-ongoing",className:"tab-pane fade show active",role:"tabpanel","aria-labelledby":"indiv-ongoing-tab",children:[e.jsx("div",{id:"indiv-list-ongoing",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),e.jsx("tbody",{children:s.filter(z=>Ps(z.startAt,z.endAt)==="ongoing").map((z,W)=>{const w=z.indivtaskId||z.id||z.taskId;return e.jsx(hn,{t:z,lectureId:a,kind:"indiv",weightValue:d[w]},w||W)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"indiv-pagination-ongoing",className:"pagination pagination-sm mb-0"})})]}),e.jsxs("div",{id:"indiv-closed",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"indiv-closed-tab",children:[e.jsx("div",{id:"indiv-list-closed",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),e.jsx("tbody",{children:s.filter(z=>Ps(z.startAt,z.endAt)==="closed").map((z,W)=>{const w=z.indivtaskId||z.id||z.taskId;return e.jsx(hn,{t:z,lectureId:a,kind:"indiv",weightValue:d[w]},w||W)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"indiv-pagination-closed",className:"pagination pagination-sm mb-0"})})]})]})]})]})}),e.jsx("div",{className:"col-12 col-xl-6",children:e.jsxs("div",{className:"card shadow-sm",children:[e.jsx("div",{className:"card-header d-flex align-items-center justify-content-between",children:e.jsx("h2",{className:"h5 mb-0",children:" "})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("ul",{className:"nav nav-pills mb-3",id:"group-status-tabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"group-all-tab","data-bs-toggle":"tab","data-bs-target":"#group-all",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge rounded-pill bg-primary ms-1",id:"group-count-all",style:{minWidth:"30px"},children:i.length})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"group-upcoming-tab","data-bs-toggle":"tab","data-bs-target":"#group-upcoming",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge rounded-pill bg-info ms-1",id:"group-count-upcoming",style:{minWidth:"30px"},children:L})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"group-ongoing-tab","data-bs-toggle":"tab","data-bs-target":"#group-ongoing",type:"button",role:"tab","aria-selected":"true",children:[" ",e.jsx("span",{className:"badge rounded-pill bg-success text-white ms-1",id:"group-count-ongoing",style:{minWidth:"30px"},children:_})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"group-closed-tab","data-bs-toggle":"tab","data-bs-target":"#group-closed",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge rounded-pill bg-secondary ms-1",id:"group-count-closed",style:{minWidth:"30px"},children:O})]})})]}),e.jsxs("div",{className:"tab-content",id:"group-status-content",children:[e.jsxs("div",{id:"group-all",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"group-all-tab",children:[e.jsx("div",{id:"group-list-all",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),e.jsx("tbody",{children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center text-muted py-4",children:"  ."})}):i.map((z,W)=>{const w=z.grouptaskId||z.id||z.taskId;return e.jsx(hn,{t:z,lectureId:a,kind:"group",weightValue:d[w]},w||W)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"group-pagination-all",className:"pagination pagination-sm mb-0"})})]}),e.jsxs("div",{id:"group-upcoming",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"group-upcoming-tab",children:[e.jsx("div",{id:"group-list-upcoming",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),e.jsx("tbody",{children:i.filter(z=>Ps(z.startAt,z.endAt)==="upcoming").map((z,W)=>{const w=z.grouptaskId||z.id||z.taskId;return e.jsx(hn,{t:z,lectureId:a,kind:"group",weightValue:d[w]},w||W)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"group-pagination-upcoming",className:"pagination pagination-sm mb-0"})})]}),e.jsxs("div",{id:"group-ongoing",className:"tab-pane fade show active",role:"tabpanel","aria-labelledby":"group-ongoing-tab",children:[e.jsx("div",{id:"group-list-ongoing",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),e.jsx("tbody",{children:i.filter(z=>Ps(z.startAt,z.endAt)==="ongoing").map((z,W)=>{const w=z.grouptaskId||z.id||z.taskId;return e.jsx(hn,{t:z,lectureId:a,kind:"group",weightValue:d[w]},w||W)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"group-pagination-ongoing",className:"pagination pagination-sm mb-0"})})]}),e.jsxs("div",{id:"group-closed",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"group-closed-tab",children:[e.jsx("div",{id:"group-list-closed",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),e.jsx("tbody",{children:i.filter(z=>Ps(z.startAt,z.endAt)==="closed").map((z,W)=>{const w=z.grouptaskId||z.id||z.taskId;return e.jsx(hn,{t:z,lectureId:a,kind:"group",weightValue:d[w]},w||W)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"group-pagination-closed",className:"pagination pagination-sm mb-0"})})]})]})]})]})})]}),e.jsx("div",{id:"task-notice-box",className:"alert alert-danger mt-3 d-none",role:"alert"}),e.jsx(b2,{open:y,entries:S,total:H,error:E,saving:T,onChange:U,onSubmit:Z,onClose:P})]})}const uh=a=>String(a).padStart(2,"0"),Zc=a=>{if(!a)return"-";const s=new Date(a);if(Number.isNaN(s.getTime()))return a;let l=s.getHours();const i=l>=12?"PM":"AM";return l=l%12,l=l||12,`${s.getFullYear()}-${uh(s.getMonth()+1)}-${uh(s.getDate())} ${i} ${l}:${uh(s.getMinutes())}`};function v2(){const{lectureId:a,indivtaskId:s}=dt(),l=rs(),i="/classroom/api/v1/professor",c="/classroom/api/v1/professor/task",[d,u]=x.useState(null),[h,f]=x.useState([]),[g,b]=x.useState(!0),[y,v]=x.useState(null),[S,N]=x.useState(!1),[E,A]=x.useState(!1),[T,$]=x.useState(null),[D,I]=x.useState(null),G=x.useMemo(()=>`/classroom/professor/${encodeURIComponent(a||"")}/task`,[a]),L=x.useMemo(()=>`${G}/indiv/${encodeURIComponent(s||"")}/edit`,[G,s]);x.useEffect(()=>{let F=!0;return(async()=>{try{b(!0),v(null);const[q,k]=await Promise.all([fetch(`${i}/${encodeURIComponent(a)}/students`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${c}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!q.ok||!k.ok)throw new Error("    .");const[X,ae]=await Promise.all([q.json(),k.json()]);if(!F)return;f(Array.isArray(X)?X:[]),u(ae||null)}catch(q){if(!F)return;v(q)}finally{F&&b(!1)}})(),()=>{F=!1}},[a,s]);const _=x.useMemo(()=>new Map((d?.studentSubmitList||[]).map(F=>[F.enrollId,F])),[d]),O=x.useMemo(()=>{const F=[],q=new Set;for(const k of h){const X=_.get(k.enrollId);X?.submitAt&&F.push({student:k,submission:X}),q.add(k.enrollId)}for(const k of d?.studentSubmitList||[])!q.has(k.enrollId)&&k.submitAt&&F.push({student:null,submission:k});return F},[h,_,d]),H=x.useMemo(()=>{const F=[];for(const q of h){const k=_.get(q.enrollId);k?.submitAt||F.push({student:q,submission:k||null})}return F},[h,_]),C=h.length,P=O.length,U=F=>F?{name:`${F.lastName||""}${F.firstName||""}`||F.name||F.userId||"( )",number:F.studentNo||""}:{name:"( )",number:""},Z=x.useMemo(()=>{if(H.length===0)return null;const{name:F,number:q}=U(H[0].student);return{label:q?`${F} (${q})`:F,rest:H.length-1}},[H]),z=x.useMemo(()=>{if(!Z)return"";const F=Z.rest>0?`  ${Z.rest}`:"";return`${Z.label}${F}`},[Z]),W=async()=>{if(window.confirm("?"))try{N(!0);const F=await fetch(`${c}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}`,{method:"DELETE",credentials:"include"});if(!F.ok&&F.status!==204)throw new Error(`(${F.status})  `);alert("."),l(G)}catch(F){alert(F.message||String(F))}finally{N(!1)}},w=async(F,q,k,X)=>{try{X(!0);const ae={enrollId:F,evaluScore:Number(q),evaluDesc:k};if(!Number.isFinite(ae.evaluScore)||ae.evaluScore<0||ae.evaluScore>100){alert(" 0~100   .");return}const Y=`${c}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}/eval`,te=await fetch(Y,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ae)});if(!te.ok)throw new Error(`(${te.status})  `);alert(".");const K=await fetch(`${c}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}`,{headers:{Accept:"application/json"},credentials:"include"});if(K.ok){const le=await K.json();u(le||null)}}catch(ae){alert(ae.message||String(ae))}finally{X(!1)}},M=(F,q)=>{I(F),$(q)},B=()=>{I(null),$(null)};return e.jsxs("section",{id:"indivtask-post-root",className:"container-fluid",style:{display:"flex",flexDirection:"column",padding:"1rem",maxHeight:"100vh"},children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsxs("li",{children:[e.jsx(Pe,{id:"bc-task",className:"text-decoration-none",to:G,children:""}),e.jsx("span",{className:"mx-2",children:">"})]}),e.jsxs("li",{children:[e.jsx(Pe,{className:"text-decoration-none",to:G,children:" "}),e.jsx("span",{className:"mx-2",children:">"})]}),e.jsx("li",{className:"breadcrumb-item active fw-bold","aria-current":"page",children:" "})," "]})}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",id:"btn-list",to:G,children:""})})]}),e.jsx("div",{style:{display:"flex",flexDirection:"row",gap:"0.75rem",height:"70vh",minHeight:0},children:g?e.jsx("div",{className:"card shadow-sm",style:{flex:1},children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start flex-wrap mb-2",children:[e.jsx("span",{className:"badge skeleton",style:{width:64,height:22}}),e.jsx("span",{className:"badge skeleton ms-2",style:{width:56,height:22}})]}),e.jsx("h1",{className:"h4 mb-3 skeleton",style:{width:"60%",height:"1.5rem"}}),e.jsxs("div",{className:"d-flex flex-wrap meta-list mb-3",children:[e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"task-content mb-4",children:e.jsx("div",{className:"skeleton",style:{height:"8rem"}})})]})}):y?e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(y.message||y)}):d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card shadow-sm",style:{flex:"3",minHeight:0,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"badge text-bg-primary",children:""}),e.jsx("h1",{className:"h5 mb-0",children:d.indivtaskName||"( )"})]}),!g&&d&&e.jsxs("div",{className:"d-flex gap-3 small",children:[e.jsxs("div",{children:[": ",e.jsx("span",{className:"fw-bold text-primary",children:Zc(d.startAt)})]}),e.jsxs("div",{children:[": ",e.jsx("span",{className:"fw-bold text-danger",children:Zc(d.endAt)})]})]})]}),e.jsx("div",{className:"card-body",style:{overflow:"auto",flex:1,display:"flex",flexDirection:"column"},children:e.jsx("article",{className:"task-content mb-4",style:{flex:1},dangerouslySetInnerHTML:{__html:d.indivtaskDesc||""}})}),Array.isArray(d.attachFileList)&&d.attachFileList.length>0&&e.jsxs("div",{className:"card-footer",id:"attach-area",children:[e.jsx("h2",{className:"h6 mb-2",children:""}),e.jsx("ul",{className:"list-group list-group-flush",id:"attach-list",children:d.attachFileList.map((F,q)=>{const k=F.fileOrder??F.order,X=F.originalFileName||F.originName||` ${k??q}`,ae=typeof F.fileSize=="number"?`(${(F.fileSize/1024).toFixed(2)} KB)`:"",Y=k!=null?`/classroom/api/v1/common/task/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}/attach/${encodeURIComponent(k)}`:void 0;return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",children:[e.jsx("i",{className:"bi bi-paperclip"})," ",X," ",ae&&e.jsx("small",{className:"text-muted",children:ae})]}),Y?e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:Y,children:""}):e.jsx("span",{className:"text-muted small",children:" "})]},`${k??q}`)})})]}),e.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[e.jsx("a",{className:"btn btn-sm btn-primary",id:"btn-edit-task",href:L,role:"button",children:""}),e.jsx("button",{className:"btn btn-sm btn-danger",id:"btn-delete-task",type:"button",onClick:W,disabled:S,children:S?"":""})]})]}),e.jsxs("div",{className:"card shadow-sm",style:{flex:"2",minHeight:0,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h3",{className:"h5 mb-0",children:" "}),e.jsxs("span",{className:"text-muted",children:[P," / ",C]})]}),e.jsx("div",{className:"card-body",style:{overflow:"auto",padding:0},children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-hover align-middle mb-0",children:[e.jsx("thead",{className:"table-light",style:{position:"sticky",top:0,zIndex:1},children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"55%"},className:"text-center",children:""}),e.jsx("th",{style:{width:"30%"},className:"text-center",children:""}),e.jsx("th",{style:{width:"15%"},className:"text-center",children:""})]})}),e.jsx("tbody",{children:O.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center text-muted py-3",children:"  ."})}):O.map(({student:F,submission:q},k)=>{const X=`${F?.lastName||""}${F?.firstName||""}`||F?.name||F?.userId||"( )",ae=F?.univDeptName||"",Y=F?.gradeName||"",te=[ae,Y].filter(Boolean).join(", "),K=te?`${X} (${te})`:X,le=q?.submitAt?Zc(q.submitAt):"-";(q?.submitFiles||[]).some(J=>J&&(J.fileId||J.originName||J.originalFileName));const ke=q?.evaluScore!=null?q.evaluScore:"-";return e.jsxs("tr",{onClick:()=>M(F,q),style:{cursor:"pointer"},children:[e.jsx("td",{className:"text-center",children:K}),e.jsx("td",{className:"text-center",children:le}),e.jsx("td",{className:"text-center",children:ke})]},`${q?.enrollId||k}`)})})]})})}),e.jsx("div",{className:"card-footer",children:e.jsxs("div",{className:"text-muted small",children:["  : ",H.length===0?"":z]})})]})]}):null}),T&&e.jsx(j2,{student:D,submission:T,lectureId:a,indivtaskId:s,onClose:B,onEvalSubmit:w,toStudentLabel:U,fmtDateTime:Zc}),y&&e.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:y})]})}function j2({student:a,submission:s,lectureId:l,indivtaskId:i,onClose:c,onEvalSubmit:d,toStudentLabel:u,fmtDateTime:h}){const{name:f,number:g}=u(a),b=a?.studentNo||s?.studentNo||s?.enrollId||"",y=h(s?.submitAt),v=s?.submitFiles||[];return e.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",onClick:c,children:e.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",onClick:S=>S.stopPropagation(),children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("strong",{children:f}),g&&e.jsxs("span",{className:"text-muted small ms-2",children:["(",g,")"]})]}),e.jsx("button",{type:"button",className:"btn-close",onClick:c,"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-muted small mb-1",children:""}),e.jsx("div",{children:y})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-muted small mb-1",children:" "}),e.jsx("div",{className:"p-3 bg-light rounded",children:s?.submitDesc||"-"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-muted small mb-2",children:" "}),e.jsx("ul",{className:"list-group",children:v&&v.length>0&&v.some(S=>S?.fileId)?v.map((S,N)=>{const E=S.fileOrder??S.order,A=S.originalFileName||S.originName||` ${E??N}`,T=typeof S.fileSize=="number"?`(${(S.fileSize/1024).toFixed(2)} KB)`:"",$=E!=null&&b?`/classroom/api/v1/common/${encodeURIComponent(l)}/indivtask/${encodeURIComponent(i)}/submit/${encodeURIComponent(b)}/attach/${encodeURIComponent(E)}`:void 0;return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[e.jsx("i",{className:"bi bi-paperclip"})," ",A]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[T&&e.jsx("small",{className:"text-muted",children:T}),$&&e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:$,children:""})]})]},`${E??N}`)}):e.jsx("li",{className:"list-group-item text-muted small",children:" "})})]}),e.jsxs("div",{className:"border-top pt-3",children:[e.jsx("h6",{className:"mb-3",children:""}),e.jsx(N2,{enrollId:s?.enrollId,defaultScore:s?.evaluScore,defaultDesc:s?.evaluDesc,onSubmit:d})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:c,children:""})})]})})})}function N2({enrollId:a,defaultScore:s,defaultDesc:l,onSubmit:i}){const[c,d]=x.useState(s??""),[u,h]=x.useState(l??""),[f,g]=x.useState(!1);return e.jsxs("form",{className:"eval-form",onSubmit:b=>{b.preventDefault(),i(a,c,u,g)},children:[e.jsxs("div",{className:"row g-2 align-items-center",children:[e.jsxs("div",{className:"col-sm-3",children:[e.jsx("label",{className:"form-label",children:" (0-100)"}),e.jsx("input",{type:"number",className:"form-control form-control-sm eval-score",min:0,max:100,value:c,onChange:b=>d(b.target.value)})]}),e.jsxs("div",{className:"col-sm-9",children:[e.jsx("label",{className:"form-label",children:""}),e.jsx("textarea",{className:"form-control form-control-sm eval-desc",rows:2,value:u,onChange:b=>h(b.target.value)})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-2",children:e.jsx("button",{type:"submit",className:"btn btn-sm btn-primary btn-save-eval",disabled:f,children:f?"":""})})]})}const Jc=a=>String(a).padStart(2,"0"),Xi=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?a:`${s.getFullYear()}-${Jc(s.getMonth()+1)}-${Jc(s.getDate())} ${Jc(s.getHours())}:${Jc(s.getMinutes())}`},Hb=(a,s=50)=>typeof a!="string"?"":a.length<=s?a:`${a.substring(0,s)}...`,Yb=a=>{if(typeof a!="number"||a<0)return"";const s=1024*1024,l=1024;return a>=s?`(${(a/s).toFixed(2)} MB)`:a>=l?`(${(a/l).toFixed(2)} KB)`:`(${a} Bytes)`};function S2(){const{lectureId:a,grouptaskId:s}=dt(),l=rs(),i=`/classroom/professor/${encodeURIComponent(a||"")}/task`,c="/classroom/api/v1/professor",d="/classroom/api/v1/common/task",u="/classroom/api/v1/professor/task",h="/classroom/api/v1/common",[f,g]=x.useState(null),[b,y]=x.useState([]),[v,S]=x.useState(!0),[N,E]=x.useState(null),[A,T]=x.useState(!1),{getStudentPhotoUrl:$,getStudentPhotoBlobUrl:D,cacheStudentPhotoBlobUrl:I}=Jt(),[G,L]=x.useState({}),_=x.useRef(new Set);x.useEffect(()=>{let w=!0;return(async()=>{try{S(!0),E(null);const[M,B,F]=await Promise.all([fetch(`${u}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${u}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}/jo`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${c}/${encodeURIComponent(a)}/students`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!M.ok)throw new Error(`(${M.status})   `);if(!B.ok)throw new Error(`(${B.status})     `);const[q,k,X]=await Promise.all([M.json(),B.json(),F.ok?F.json():Promise.resolve([])]);if(!w)return;const ae={...q,groupList:k};g(ae),y(Array.isArray(X)?X:[])}catch(M){if(!w)return;E(M)}finally{w&&S(!1)}})(),()=>{w=!1}},[a,s,c,u]);const O=x.useMemo(()=>new Map(b.map(w=>[w.enrollId,w])),[b]),H=x.useMemo(()=>{const w=new Set;return Array.isArray(f?.groupList)&&f.groupList.forEach(M=>{(Array.isArray(M?.crewList)?M.crewList:[]).forEach(q=>{const k=O.get(q.enrollId);k?.studentNo&&w.add(k.studentNo)});const F=M?.leaderEnrollId;if(F){const q=O.get(F);q?.studentNo&&w.add(q.studentNo)}}),Array.from(w)},[f,O]);x.useEffect(()=>{H.forEach(w=>{if(!w||_.current.has(w))return;const M=D(w);if(M){L(F=>F[w]?F:{...F,[w]:M});return}const B=$(w,a);B&&(_.current.add(w),fetch(B,{credentials:"include"}).then(F=>F.ok?F.blob():null).then(F=>{if(!F)return;const q=URL.createObjectURL(F);I(w,q),L(k=>({...k,[w]:q}))}).catch(()=>{}).finally(()=>{_.current.delete(w)}))})},[H,a,D,$,I]);const C=async()=>{if(window.confirm("  ?"))try{T(!0);const w=await fetch(`${u}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}`,{method:"DELETE",credentials:"include",headers:{Accept:"application/json"}});if(!(w.status===204||w.ok))throw new Error(`(${w.status})  `);l(i)}catch(w){alert(w.message||String(w))}finally{T(!1)}},P=w=>w?.studentNo?G[w.studentNo]||D(w.studentNo)||$(w.studentNo,a)||`${h}/photo/student/${encodeURIComponent(a)}/${encodeURIComponent(w.studentNo)}`:null,U=w=>!Array.isArray(w)||w.length===0?e.jsx("p",{className:"text-muted mb-0",children:"  ."}):w.map((M,B)=>{const F=Array.isArray(M?.crewList)?M.crewList:[],q=M.leaderEnrollId,k=q&&O.get(q)||null,X=k&&(`${k.lastName||""}${k.firstName||""}`||k.name||k.userId)||"-",ae=(k?.lastName||k?.firstName||X).charAt(0),Y=P(k),te=F.length,K=M.submitAt?Xi(M.submitAt):"",le=M.submitAt?e.jsx("span",{className:"badge text-bg-success",children:" "}):e.jsx("span",{className:"badge text-bg-secondary",children:""}),ve=M.submitAt?` ${K}`:"",ke=M.groupName||`${B+1}`,J=k?.studentNo?` (${k.studentNo})`:"";M?.submitFileId&&M?.groupId&&`${u}${encodeURIComponent(a)}${encodeURIComponent(s)}${encodeURIComponent(M.groupId)}`;const ue=M.attachFileList,Se=e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"small text-muted",children:" "}),Array.isArray(ue)&&ue.length>0?e.jsx("ul",{className:"list-group list-group-flush mt-1",children:ue.map((Me,re)=>{const he=Me.fileOrder??re+1,Re=Me.originalFileName||Me.originName||` ${he}`,Be=Hb(Re,20),fe=Yb(Me.fileSize),Le=`${u}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}/submit/${encodeURIComponent(M.groupId)}/${encodeURIComponent(he)}`;return e.jsx("li",{className:"list-group-item ps-0",children:e.jsxs("a",{href:Le,className:"text-decoration-none text-body",title:Re,children:[e.jsx("i",{className:"bi bi-paperclip"})," ",Be," ",fe&&e.jsx("small",{className:"text-muted",children:fe})]})},he)})}):e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"text-muted",children:"  ."})})]});return e.jsxs("div",{className:"accordion-item",children:[e.jsx("h2",{className:"accordion-header",id:`group-acc-head-${B}`,children:e.jsx("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#group-acc-body-${B}`,children:e.jsxs("div",{className:"group-summary",children:[Y?e.jsx("img",{className:"avatar-56 me-2",alt:`${X} `,src:Y}):e.jsx("span",{className:"avatar-fallback-56 me-2",children:ae}),e.jsxs("div",{className:"group-summary-text",children:[e.jsxs("div",{className:"group-summary-title",children:[e.jsx("span",{className:"fw-semibold",children:ke}),le]}),e.jsxs("div",{className:"group-summary-meta",children:[e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-person-badge"}),"  ",X,J]}),e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-people"}),"  ",te,""]}),e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-clock-history"})," ",ve]})]})]})]})})}),e.jsx("div",{id:`group-acc-body-${B}`,className:"accordion-collapse collapse","data-bs-parent":"#group-accordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"h6 mb-3",children:" "}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{children:M.submitAt?K:e.jsx("span",{className:"text-muted",children:""})})]}),e.jsxs("div",{className:"col-12 col-md-8",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{className:"mt-1",dangerouslySetInnerHTML:{__html:M?.submitDesc||'<span class="text-muted">  .</span>'}})]})]}),Se]}),e.jsxs("div",{children:[e.jsx("h3",{className:"h6 mb-3",children:" "}),e.jsx("div",{className:"row g-3",children:F.length===0?e.jsx("p",{className:"text-muted mb-0",children:"  ."}):F.map((Me,re)=>{const he=Me?.enrollId&&O.get(Me.enrollId)||null,Re=he&&(`${he.lastName||""}${he.firstName||""}`||he.name||he.userId)||"-",Be=q&&Me?.enrollId===q,fe=he?.studentNo||"  ",oe=Me?.evaluScore!==""&&Me?.evaluScore!=null?`${Me.evaluScore} / 10`:"",Ne=Me?.evaluAt?Xi(Me.evaluAt):"",we=(he?.lastName||he?.firstName||Re).charAt(0),Ye=P(he);return e.jsx("div",{className:"col-12 col-md-6 col-lg-4",children:e.jsxs("div",{className:"member-card h-100",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[Ye?e.jsx("img",{className:"avatar-48",alt:`${Re} `,src:Ye}):e.jsx("span",{className:"avatar-fallback-48",children:we}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold",children:Re}),e.jsx("div",{className:"member-meta",children:fe}),Be&&e.jsx("span",{className:"badge text-bg-primary mt-2",children:""})]})]}),e.jsxs("div",{className:"evaluation-box mt-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"fw-semibold",children:"  :"})," ",oe]}),e.jsx("div",{className:"evaluation-note mt-2",children:Me?.evaluDesc||""}),e.jsxs("div",{className:"evaluation-note mt-2",children:[" : ",Ne]})]})]})},Me?.enrollId||re)})})]})]})})]},B)}),Z=(f?.groupList||[]).length;(f?.groupList||[]).reduce((w,M)=>w+(M?.crewList?.length||0),0);const z=(f?.groupList||[]).filter(w=>w?.submitAt).length,W=x.useMemo(()=>`${i}/group/${encodeURIComponent(s||"")}/edit`,[i,s]);return e.jsxs("section",{id:"grouptask-post-root",className:"container-fluid",style:{display:"flex",flexDirection:"column",padding:"1rem",maxHeight:"100vh"},children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(Pe,{id:"bc-task",to:i,children:""})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:""})]})}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",id:"btn-edit",to:`/classroom/professor/${encodeURIComponent(a)}/task/group/${encodeURIComponent(s)}/edit`,children:""}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",id:"btn-delete",onClick:C,disabled:A,children:A?"...":""}),e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",id:"btn-list",to:i,children:""})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"row",gap:"0.75rem",height:"70vh",minHeight:0},children:v?e.jsx("div",{className:"card shadow-sm",style:{flex:1},children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start flex-wrap mb-2",children:[e.jsx("span",{className:"badge skeleton",style:{width:64,height:22}}),e.jsx("span",{className:"badge skeleton ms-2",style:{width:56,height:22}})]}),e.jsx("h1",{className:"h4 mb-3 skeleton",style:{width:"60%",height:"1.5rem"}}),e.jsxs("div",{className:"d-flex flex-wrap meta-list mb-3",children:[e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"task-content mb-4",children:e.jsx("div",{className:"skeleton",style:{height:"8rem"}})})]})}):N?e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(N.message||N)}):f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card shadow-sm",style:{flex:"3",minHeight:0,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"badge text-bg-primary",children:""}),e.jsx("h1",{className:"h5 mb-0",children:f.grouptaskName||"( )"})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("a",{className:"btn btn-sm btn-primary",id:"btn-edit-task",href:W,role:"button",children:""}),e.jsx("button",{className:"btn btn-sm btn-danger",id:"btn-delete-task",type:"button",onClick:C,disabled:A,children:A?"":""})]})]}),e.jsxs("div",{className:"card-body",style:{overflow:"auto",flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"d-flex flex-wrap gap-3 text-muted small mb-3",children:[e.jsxs("div",{children:[": ",e.jsx("span",{className:"text-body-secondary",children:Xi(f.createAt)})]}),e.jsxs("div",{children:[": ",e.jsx("span",{className:"text-body-secondary",children:Xi(f.startAt)})]}),e.jsxs("div",{children:[": ",e.jsx("span",{className:"text-body-secondary",children:Xi(f.endAt)})]})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"task-content mb-4",style:{flex:1},dangerouslySetInnerHTML:{__html:f.grouptaskDesc||""}})]}),Array.isArray(f.attachFileList)&&f.attachFileList.length>0&&e.jsxs("div",{className:"card-footer",id:"attach-area",children:[e.jsx("h2",{className:"h6 mb-2",children:""}),e.jsx("ul",{className:"list-group list-group-flush",id:"attach-list",children:f.attachFileList.map((w,M)=>{const B=w.fileOrder??w.order??M,F=w.originalFileName||w.originName||` ${B??M}`,q=Hb(F),k=Yb(w.fileSize),X=`${d}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}/attach/${encodeURIComponent(B)}`;return e.jsx("li",{className:"list-group-item",children:e.jsxs("a",{href:X,className:"text-decoration-none text-body",title:F,children:[e.jsx("i",{className:"bi bi-paperclip"})," ",q," ",k&&e.jsx("small",{className:"text-muted",children:k})]})},`${B??M}`)})})]})]}),e.jsxs("div",{className:"card shadow-sm",style:{flex:"2",minHeight:0,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h3",{className:"h5 mb-0",children:"  "}),e.jsxs("span",{className:"text-muted",children:[z," / ",Z]})]}),e.jsx("div",{className:"card-body",style:{overflow:"auto",padding:0},children:e.jsx("div",{id:"group-accordion",className:"accordion accordion-flush",children:U(f?.groupList||[])})})]})]}):null}),N&&e.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:N})]})}const eo=a=>String(a).padStart(2,"0"),hh=a=>{if(!a)return"";const s=new Date(a);return Number.isNaN(s.getTime())?"":`${s.getFullYear()}-${eo(s.getMonth()+1)}-${eo(s.getDate())}T${eo(s.getHours())}:${eo(s.getMinutes())}`},w2=a=>Array.isArray(a)?a:a?.attachFileList&&Array.isArray(a.attachFileList)?a.attachFileList:[],C2=(a,s)=>{if(!Array.isArray(s))return"";for(const l of s){if(l?.bundleId)return l.bundleId;if(l?.fileId)return l.fileId}return""};function Vb(){const{lectureId:a,indivtaskId:s}=dt(),l=rs(),i="/classroom/api/v1/professor/task",c="/classroom/api/v1/common/task",d=!!s,[u,h]=x.useState(""),[f,g]=x.useState(""),[b,y]=x.useState(""),[v,S]=x.useState(""),[N,E]=x.useState(""),[A,T]=x.useState([]),[$,D]=x.useState(!1),[I,G]=x.useState(d),[L,_]=x.useState(""),[O,H]=x.useState(""),C=x.useRef(null),P=x.useRef(null);x.useEffect(()=>{let z=!1,W=null;const w=async()=>{if(!(z||P.current)&&C.current&&window.ClassicEditor)try{const F=C.current.ckeditorInstance;F&&await F.destroy();const q=await window.ClassicEditor.create(C.current);if(z){q.destroy().catch(console.error);return}W=q,P.current=q,C.current.ckeditorInstance=q}catch(F){console.error("CKEditor initialization failed:",F)}},B=setTimeout(()=>{if(window.ClassicEditor)w();else{const F=document.querySelector('script[src*="ckeditor"]');if(F){const q=()=>{z||w(),F.removeEventListener("load",q)};F.addEventListener("load",q)}else{const q=document.createElement("script");q.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",q.onload=()=>{z||w()},document.head.appendChild(q)}}},100);return()=>{z=!0,clearTimeout(B);const F=P.current||W;F&&F.ui&&F.ui.view&&F.ui.view.element&&F.destroy().catch(q=>{console.debug("Editor cleanup:",q)}),P.current=null,C.current&&(C.current.ckeditorInstance=null)}},[]),x.useEffect(()=>{(async()=>{if(d)try{G(!0),_("");const W=`${i}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}`,w=await fetch(W,{headers:{Accept:"application/json"},credentials:"include"});if(!w.ok)throw new Error(`  (HTTP ${w.status})`);const M=await w.json();h(M.indivtaskName||""),y(hh(M.startAt)),S(hh(M.endAt));const B=w2(M.attachFileList),F=M.fileId||M.attachFileId||C2("",B);E(F),T(B),G(!1);const q=setInterval(()=>{P.current&&(P.current.setData(M.indivtaskDesc||""),clearInterval(q))},100);setTimeout(()=>clearInterval(q),1e4)}catch(W){_(W.message||String(W)),G(!1)}else{const W=new Date;W.setSeconds(0,0),y(hh(W.toISOString()))}})()},[a,s,d,i]);const U=async z=>{const W=Array.from(z.target.files||[]);if(W.length!==0){if(W.length>5){_(" 5   .");return}try{D(!0),_(""),H("");const w=new FormData;for(const X of W)w.append("files",X);const M=`/classroom/api/v1/common/${encodeURIComponent(a)}/upload?type=task`,B=await fetch(M,{method:"POST",body:w,credentials:"include"});if(!B.ok)throw new Error(`(${B.status})  `);const F=await B.json(),q=F.bundleId||F.fileId||Array.isArray(F.fileIds)&&F.fileIds[0]||Array.isArray(F.files)&&F.files[0]?.fileId||Array.isArray(F.details)&&F.details[0]?.fileId||"",k=Array.isArray(F.files)&&F.files||Array.isArray(F.details)&&F.details||[];E(q),T(k),H("    .")}catch(w){_(w.message||String(w))}finally{D(!1)}}},Z=async z=>{z.preventDefault();try{if(D(!0),_(""),H(""),!u.trim())throw new Error(" .");const W=P.current?P.current.getData():f;if(!W.trim())throw new Error("  .");if(!b)throw new Error("  .");if(b&&v&&b>v)throw new Error("     .");const w={indivtaskName:u.trim(),indivtaskDesc:W.trim(),startAt:b,endAt:v||null,attachFileId:N||""};if(d){w.indivtaskId=s;const M=`${i}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}`,B=await fetch(M,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(w)});if(!B.ok){const F=await B.text().catch(()=>B.statusText);throw new Error(` (${B.status}): ${F}`)}H("."),l(`/classroom/professor/${encodeURIComponent(a)}/task/indiv/${encodeURIComponent(s)}`)}else{const M=`${i}/${encodeURIComponent(a)}/indiv`,B=await fetch(M,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(w)});if(!B.ok){const q=await B.text().catch(()=>B.statusText);throw new Error(` (${B.status}): ${q}`)}const F=B.headers.get("Location");H("."),l(F||`/classroom/professor/${encodeURIComponent(a)}/task`)}}catch(W){_(W.message||String(W))}finally{D(!1)}};return I?e.jsx("section",{id:"task-form-root",className:"container py-4",children:e.jsx("div",{className:"text-muted",children:" ..."})}):e.jsxs("section",{id:"task-form-root",className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsxs("li",{children:[e.jsx(Pe,{className:"text-decoration-none",to:`/classroom/professor/${encodeURIComponent(a)}/task`,children:""}),e.jsx("span",{className:"mx-2",children:">"})]}),d&&e.jsxs("li",{children:[e.jsx(Pe,{className:"text-decoration-none",to:`/classroom/professor/${encodeURIComponent(a)}/task`,children:" "}),e.jsx("span",{className:"mx-2",children:">"})]}),e.jsx("li",{className:"breadcrumb-item active fw-bold","aria-current":"page",children:d?" ":" "})]})}),e.jsxs("div",{className:"d-flex gap-2",children:[d&&e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(a)}/task/indiv/${encodeURIComponent(s)}`,children:""}),e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(a)}/task`,children:""})]})]}),e.jsxs("form",{id:"task-form",className:"card shadow-sm",onSubmit:Z,children:[e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-4",children:[e.jsxs("div",{className:"col-lg-6 d-flex",children:[" ",e.jsxs("div",{className:"card shadow-sm flex-grow-1",children:[" ",e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:"  "})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"task-name",className:"form-label",children:""}),e.jsx("input",{id:"task-name",type:"text",className:"form-control",maxLength:50,required:!0,disabled:$,value:u,onChange:z=>h(z.target.value),placeholder:" 5  "}),e.jsx("div",{className:"text-muted small",children:" 50"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"task-desc",className:"form-label",children:" "}),!I&&e.jsx("div",{ref:C,id:"task-desc"})," ",e.jsx("div",{className:"text-muted small",children:" 4000()"})]})]})]})]}),e.jsxs("div",{className:"col-lg-6 d-flex",children:[" ",e.jsxs("div",{className:"card shadow-sm flex-grow-1",children:[" ",e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"mb-0",children:"  "})}),e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row g-3 mb-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("label",{htmlFor:"start-at",className:"form-label",children:" "}),e.jsx("input",{id:"start-at",type:"datetime-local",className:"form-control",required:!0,disabled:$,value:b,onChange:z=>y(z.target.value)})]}),e.jsx("div",{className:"col-12 col-md-6",children:e.jsxs("div",{className:"mb-3",children:[" ",e.jsx("label",{htmlFor:"end-at",className:"form-label",children:" "}),e.jsx("input",{id:"end-at",type:"datetime-local",className:"form-control",disabled:$,value:v,onChange:z=>S(z.target.value)})]})})]}),e.jsxs("div",{className:"mt-4 p-3 border rounded",children:[e.jsx("h5",{className:"mb-3",children:""}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"file-input",className:"form-label",children:" "}),e.jsx("input",{id:"file-input",type:"file",className:"form-control",multiple:!0,disabled:$,onChange:U}),e.jsx("div",{className:"form-text",children:"      . ( 5)"})]}),N&&e.jsxs("div",{id:"current-attach-box",className:"mt-2",children:[e.jsx("h6",{className:"mb-2",children:"  "}),e.jsx("ul",{id:"current-file-list",className:"list-group small",children:A.map((z,W)=>{const w=z.originName??z.originalName??` ${z.fileOrder??z.order??W}`,M=z.extension?`.${z.extension}`:"",B=typeof z.fileSize=="number"?` (${z.fileSize.toLocaleString()}B)`:"",F=z.fileOrder??z.order,q=F==null||!d?"#":`${c}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}/attach/${encodeURIComponent(F)}`;return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[w,M,B]}),d&&F!=null&&e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:q,children:""})]},W)})})]})]})]})]})]})]})}),e.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[e.jsx(Pe,{to:d?`/classroom/professor/${encodeURIComponent(a)}/task/indiv/${encodeURIComponent(s)}`:`/classroom/professor/${encodeURIComponent(a)}/task`,className:"btn btn-light",children:""}),e.jsx("button",{id:"btn-submit",type:"submit",className:"btn btn-primary",disabled:$,children:$?d?"":"":d?"":""})]})]}),L&&e.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:L}),O&&e.jsx("div",{id:"info-box",className:"alert alert-success mt-3",role:"alert",children:O})]})}const to=a=>String(a).padStart(2,"0"),A2=a=>{if(!a)return"";const s=new Date(a);return Number.isNaN(s.getTime())?"":`${s.getFullYear()}-${to(s.getMonth()+1)}-${to(s.getDate())}T${to(s.getHours())}:${to(s.getMinutes())}`},Pb=a=>{if(!a)return null;const s=String(a).trim();return s?/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/.test(s)?`${s}:00`:s:null},qb=a=>({tempId:`GRP${Math.random().toString(36).slice(2,10)}`,groupName:` ${a+1}`,leaderEnrollId:null,members:[]});function E2(){const{lectureId:a}=dt(),s=rs(),l="/classroom/api/v1/professor",i="/classroom/api/v1/professor/task",[c,d]=x.useState(""),[u,h]=x.useState(""),[f,g]=x.useState(""),[b,y]=x.useState(""),[v,S]=x.useState(""),[N,E]=x.useState([]),[A,T]=x.useState(!1),[$,D]=x.useState(""),[I,G]=x.useState(""),[L,_]=x.useState([]),[O,H]=x.useState(!1),[C,P]=x.useState(""),[U,Z]=x.useState(""),[z,W]=x.useState(new Set),[w,M]=x.useState([]),B=x.useRef(null),F=x.useRef(null),q=x.useRef(null),k=oe=>{D(oe||" ."),G("")},X=oe=>{G(oe||"."),D("")},ae=()=>{D(""),G("")};x.useEffect(()=>{const oe=new Date;oe.setSeconds(0,0),g(A2(oe.toISOString()))},[]);const Y=async()=>{if(!a){k("  .");return}try{H(!0),P(""),ae();const oe=`${l}/${encodeURIComponent(a)}/students`,Ne=await fetch(oe,{headers:{Accept:"application/json"},credentials:"include"});if(!Ne.ok)throw new Error(`    (HTTP ${Ne.status})`);const we=await Ne.json(),Ye=new Set(["ENR_CANCEL","ENR_WITHDRAW"]),Xe=(Array.isArray(we)?we:[]).filter(Ke=>!Ye.has(Ke.enrollStatusCd)).map(Ke=>({enrollId:String(Ke.enrollId||""),studentNo:String(Ke.studentNo||""),studentName:`${Ke.lastName||""}${Ke.firstName||""}`.trim(),deptName:Ke.univDeptName||Ke.deptName||""})).filter(Ke=>Ke.enrollId);_(Xe),X(` ${Xe.length} .`)}catch(oe){const Ne=oe instanceof Error?oe.message:"     .";_([]),P(Ne),k(Ne)}finally{H(!1)}};x.useEffect(()=>{Y()},[a]),x.useEffect(()=>{W(oe=>{const Ne=new Set(L.map(Xe=>Xe.enrollId)),we=new Set(w.flatMap(Xe=>Xe.members)),Ye=new Set;return oe.forEach(Xe=>{Ne.has(Xe)&&!we.has(Xe)&&Ye.add(Xe)}),Ye})},[L,w]);const te=x.useMemo(()=>new Set(w.flatMap(oe=>oe.members)),[w]),K=x.useMemo(()=>{const oe=U.trim().toLowerCase();return L.filter(Ne=>te.has(Ne.enrollId)?!1:oe?Ne.studentNo.toLowerCase().includes(oe)||Ne.studentName.toLowerCase().includes(oe)||Ne.deptName.toLowerCase().includes(oe):!0)},[L,U,te]),le=oe=>{W(Ne=>{const we=new Set(Ne);return we.has(oe)?we.delete(oe):we.add(oe),we})},ve=()=>{if(z.size===0){k("  .");return}let oe=0,Ne="";if(M(we=>{const Ye=we.map(Ht=>({...Ht,members:[...Ht.members]}));Ye.length===0&&Ye.push(qb(0));const Xe=Ye.length-1,Ke=Ye[Xe],He=new Set(Ke.members);return z.forEach(Ht=>{He.has(Ht)||(He.add(Ht),oe+=1)}),Ke.groupName.trim()||(Ke.groupName=` ${Xe+1}`),Ke.members=Array.from(He),Ne=Ke.groupName,Ye}),oe===0){k("  .");return}W(new Set),X(`${Ne} ${oe} .`)},ke=()=>{const oe=w.reduce((Ne,we)=>Ne+we.members.length,0);if(oe===0){X("  .");return}M(Ne=>Ne.map(we=>({...we,members:[],leaderEnrollId:null}))),X(` . ( ${oe})`)},J=()=>{M(oe=>{const Ne=oe.map(we=>({...we,members:[...we.members]}));return Ne.push(qb(Ne.length)),Ne})},ue=()=>{const oe=w.length,Ne=w.filter(Ye=>Ye.members.length>0);M(Ne);const we=oe-Ne.length;we>0?X(`  ${we} .`):X("   .")},Se=(oe,Ne)=>{M(we=>we.map(Ye=>Ye.tempId===oe?{...Ye,groupName:Ne}:Ye))},Me=oe=>{M(Ne=>Ne.map(we=>we.tempId===oe?{...we,members:[],leaderEnrollId:null}:we)),X(" .")},re=oe=>{M(Ne=>Ne.filter(we=>we.tempId!==oe)),X(" .")},he=(oe,Ne)=>{M(we=>we.map(Ye=>Ye.tempId===oe?{...Ye,leaderEnrollId:Ne}:Ye))},Re=(oe,Ne)=>{M(we=>we.map(Ye=>{if(Ye.tempId!==oe)return Ye;const Xe=Ye.members.filter(Ke=>Ke!==Ne);return{...Ye,members:Xe,leaderEnrollId:Ye.leaderEnrollId===Ne?null:Ye.leaderEnrollId}}))},Be=async oe=>{const Ne=Array.from(oe.target.files||[]);if(Ne.length!==0){if(!a){k("  .");return}if(Ne.length>5){k(" 5   .");return}try{ae(),T(!0);const we=new FormData;Ne.forEach(ua=>we.append("files",ua));const Ye=new URLSearchParams({type:"task"}),Xe=`/classroom/api/v1/common/${encodeURIComponent(a)}/upload?${Ye}`,Ke=await fetch(Xe,{method:"POST",body:we,credentials:"include"});if(!Ke.ok)throw new Error(`   (${Ke.status})`);const He=await Ke.json(),Ht=He.bundleId||He.fileId||Array.isArray(He.fileIds)&&He.fileIds[0]||Array.isArray(He.files)&&He.files[0]?.fileId||Array.isArray(He.details)&&He.details[0]?.fileId||"",Ns=Array.isArray(He.files)&&He.files||Array.isArray(He.details)&&He.details||[];S(Ht),E(Ns),X(" .")}catch(we){k(we instanceof Error?we.message:"    .")}finally{T(!1),oe.target.value=""}}};x.useEffect(()=>{let oe=!0,Ne=null;const we=async()=>{if(!(!oe||F.current)&&!(!window.ClassicEditor||!B.current))try{const Ke=B.current.ckeditorInstance;Ke&&await Ke.destroy();const He=await window.ClassicEditor.create(B.current,{toolbar:["heading","|","bold","italic","link","bulletedList","numberedList","blockQuote","|","insertTable","undo","redo"],placeholder:" ,  ,   ."});if(!oe){He.destroy().catch(console.error);return}Ne=He,F.current=He,B.current.ckeditorInstance=He,He.model.document.on("change:data",()=>{h(He.getData())})}catch(Ke){console.error("CKEditor initialization failed:",Ke)}},Xe=setTimeout(()=>{if(window.ClassicEditor)we();else{const Ke=document.querySelector('script[src*="ckeditor"]');if(Ke){const He=()=>{oe&&we(),Ke.removeEventListener("load",He)};Ke.addEventListener("load",He)}else{const He=document.createElement("script");He.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",He.async=!0,He.onload=()=>{oe&&we()},document.head.appendChild(He),q.current=He}}},100);return()=>{oe=!1,clearTimeout(Xe);const Ke=F.current||Ne;Ke&&Ke.ui&&Ke.ui.view&&Ke.ui.view.element&&Ke.destroy().catch(He=>{console.debug("Editor cleanup:",He)}),F.current=null,B.current&&(B.current.ckeditorInstance=null),q.current=null}},[]);const fe=async oe=>{oe.preventDefault(),ae();try{if(!a)throw new Error("  .");const Ne=c.trim(),we=F.current?F.current.getData().trim():u.trim(),Ye=Pb(f),Xe=Pb(b);if(!Ne)throw new Error(" .");if(!we)throw new Error("  .");if(!Ye)throw new Error("  .");if(Ye&&Xe&&Ye>Xe)throw new Error("     .");const Ke={grouptaskName:Ne,grouptaskDesc:we,startAt:Ye,endAt:Xe,attachFileId:v||"",groups:w.map(xt=>({groupName:xt.groupName,leaderEnrollId:xt.leaderEnrollId,crews:xt.members}))};T(!0);const He=`${i}/${encodeURIComponent(a)}/group`,Ht=await fetch(He,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(Ke),credentials:"include"});if(!Ht.ok){let xt="";try{if((Ht.headers.get("Content-Type")||"").includes("application/json")){const Fa=await Ht.json();xt=Fa?.message||Fa?.error||JSON.stringify(Fa)}else xt=await Ht.text()}catch{xt=""}throw new Error(`    (HTTP ${Ht.status})${xt?` - ${xt}`:""}`)}const Ns=await Ht.json(),ua=Ns?.grouptaskId||Ns?.id||Ns?.data?.grouptaskId;alert("  ."),s(ua?`/classroom/professor/${encodeURIComponent(a)}/task/group/${encodeURIComponent(ua)}`:`/classroom/professor/${encodeURIComponent(a)}/task`)}catch(Ne){k(Ne instanceof Error?Ne.message:"    .")}finally{T(!1)}},Le=`mt-2${v||N.length?"":" d-none"}`;return e.jsxs("section",{id:"grouptask-form-root",className:"container py-4","data-lecture-id":a||"","data-prof-base":i,"data-common-base":"/classroom/api/v1/common",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(Pe,{to:`/classroom/professor/${encodeURIComponent(a||"")}/task/indiv`,children:""})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:" "})]})}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(a||"")}/task/group`,children:" "})})]}),e.jsxs("form",{id:"grouptask-form",className:"card shadow-sm",autoComplete:"off",onSubmit:fe,children:[e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row g-3 mb-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("label",{htmlFor:"grouptask-name",className:"form-label required",children:""}),e.jsx("input",{type:"text",id:"grouptask-name",className:"form-control",maxLength:50,required:!0,placeholder:")   1 ",value:c,onChange:oe=>d(oe.target.value)}),e.jsx("div",{className:"form-hint",children:" 50"})]}),e.jsxs("div",{className:"col-12 col-md-3",children:[e.jsx("label",{htmlFor:"start-at",className:"form-label required",children:" "}),e.jsx("input",{type:"datetime-local",id:"start-at",className:"form-control",required:!0,value:f,onChange:oe=>g(oe.target.value)})]}),e.jsxs("div",{className:"col-12 col-md-3",children:[e.jsx("label",{htmlFor:"end-at",className:"form-label",children:" "}),e.jsx("input",{type:"datetime-local",id:"end-at",className:"form-control",value:b,onChange:oe=>y(oe.target.value)})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"grouptask-desc",className:"form-label required",children:" "}),e.jsx("textarea",{id:"grouptask-desc",className:"form-control d-none",ref:B,defaultValue:u,placeholder:" ,  ,   ."}),e.jsx("div",{className:"form-hint",children:" 4000 ()"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"form-label",htmlFor:"file-input",children:""}),e.jsx("input",{type:"file",id:"file-input",className:"form-control",multiple:!0,onChange:Be,disabled:A}),e.jsx("div",{className:"form-hint",children:"      . ( 5)"}),e.jsx("input",{type:"hidden",id:"attach-file-id",value:v,readOnly:!0}),e.jsxs("div",{id:"current-attach-box",className:Le,children:[e.jsxs("div",{className:"alert alert-info py-2 mb-2",children:["   ID: ",e.jsx("span",{id:"current-file-id",children:v||"()"})]}),N.length>0&&e.jsx("ul",{id:"current-file-list",className:"list-group small",children:N.map((oe,Ne)=>{const we=oe.originName??oe.originalName??` ${oe.fileOrder??oe.order??Ne+1}`,Ye=oe.extension?`.${oe.extension}`:"",Xe=typeof oe.fileSize=="number"?` (${oe.fileSize.toLocaleString()}B)`:"";return e.jsxs("li",{className:"list-group-item",children:[we,Ye,Xe]},`${oe.fileId||we}-${Ne}`)})})]})]}),e.jsx("hr",{className:"my-4"}),e.jsx("h2",{className:"h6 mb-2",children:" "}),e.jsx("div",{className:"form-hint mb-2",children:"      / ."}),e.jsxs("div",{className:"group-builder",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("strong",{children:" "}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("input",{type:"text",id:"student-search",className:"form-control form-control-sm",placeholder:"/ ",style:{width:180},value:U,onChange:oe=>Z(oe.target.value)}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",type:"button",id:"btn-refresh-students",onClick:Y,children:""})]})]}),e.jsxs("div",{className:"student-list list-scroll",id:"student-list",children:[O&&e.jsx("div",{className:"p-2 text-muted small text-center",children:" ..."}),!O&&C&&e.jsx("div",{className:"p-2 text-danger small text-center",children:C}),!O&&!C&&K.length===0&&e.jsx("div",{className:"p-2 text-muted small text-center",children:"  ."}),!O&&!C&&K.map(oe=>e.jsx("label",{className:"d-flex align-items-center justify-content-between px-2 py-1 border-bottom",children:e.jsxs("span",{className:"small text-truncate",children:[e.jsx("input",{type:"checkbox",className:"form-check-input me-2","data-enroll":oe.enrollId,checked:z.has(oe.enrollId),onChange:()=>le(oe.enrollId)}),e.jsx("b",{children:oe.studentNo}),"  ",oe.studentName,oe.deptName?e.jsxs("small",{className:"text-muted",children:[" / ",oe.deptName]}):null]})},oe.enrollId))]}),e.jsx("div",{className:"form-hint mt-1",children:'   "  "    .'})]}),e.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center",children:[e.jsx("button",{className:"btn btn-sm btn-primary mb-2",type:"button",id:"btn-assign-selected",onClick:ve,children:"  "}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",type:"button",id:"btn-unassign-all",onClick:ke,children:"  "})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("strong",{children:""}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary",type:"button",id:"btn-add-group",onClick:J,children:" "}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",type:"button",id:"btn-remove-empty-groups",onClick:ue,children:"  "})]})]}),e.jsxs("div",{className:"group-list list-scroll p-2",id:"group-list",children:[w.length===0&&e.jsx("div",{className:"p-2 text-muted small text-center",children:" .    ."}),w.map(oe=>e.jsxs("div",{className:"group-card","data-gid":oe.tempId,children:[e.jsxs("div",{className:"group-header mb-2",children:[e.jsx("div",{className:"d-flex align-items-center gap-2",children:e.jsx("input",{className:"form-control form-control-sm group-name-input","data-gid":oe.tempId,style:{width:220},value:oe.groupName,onChange:Ne=>Se(oe.tempId,Ne.target.value),placeholder:" "})}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary btn-clear-members",onClick:()=>Me(oe.tempId),children:" "}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger btn-delete-group",onClick:()=>re(oe.tempId),children:" "})]})]}),e.jsxs("div",{className:"group-members",children:[oe.members.length===0&&e.jsx("div",{className:"text-muted small",children:"  ."}),oe.members.map(Ne=>{const we=L.find(Xe=>Xe.enrollId===Ne);if(!we)return null;const Ye=oe.leaderEnrollId===Ne;return e.jsxs("div",{className:`member-badge${Ye?" leader":""}`,"data-enroll":Ne,children:[e.jsxs("span",{children:[e.jsx("b",{children:we.studentNo}),"  ",we.studentName]}),Ye&&e.jsx("span",{className:"badge text-bg-primary",children:""}),e.jsxs("span",{className:"member-actions",children:[!Ye&&e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary btn-set-leader",onClick:()=>he(oe.tempId,Ne),children:" "}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger btn-remove-member",onClick:()=>Re(oe.tempId,Ne),children:""})]})]},Ne)})]})]},oe.tempId))]})]})]})]}),e.jsx("div",{className:"card-footer d-flex justify-content-end gap-2",children:e.jsx("button",{type:"submit",id:"btn-submit",className:"btn btn-primary",disabled:A,children:A?" ...":""})})]}),$&&e.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:$}),I&&e.jsx("div",{id:"info-box",className:"alert alert-success mt-3",role:"alert",children:I})]})}const so=a=>String(a).padStart(2,"0"),Gb=a=>{if(!a)return"";const s=new Date(a);return Number.isNaN(s.getTime())?"":`${s.getFullYear()}-${so(s.getMonth()+1)}-${so(s.getDate())}T${so(s.getHours())}:${so(s.getMinutes())}`},T2=a=>Array.isArray(a)?a:a?.attachFileList&&Array.isArray(a.attachFileList)?a.attachFileList:[],_2=(a,s)=>{if(!Array.isArray(s))return"";for(const l of s){if(l?.bundleId)return l.bundleId;if(l?.fileId)return l.fileId}return""};function k2(){const{lectureId:a,grouptaskId:s}=dt(),l=rs(),i="/classroom/api/v1/professor/task",c="/classroom/api/v1/common/task",[d,u]=x.useState(""),[h,f]=x.useState(""),[g,b]=x.useState(""),[y,v]=x.useState(""),[S,N]=x.useState(""),[E,A]=x.useState([]),[T,$]=x.useState(!1),[D,I]=x.useState(!0),[G,L]=x.useState(""),[_,O]=x.useState(""),H=x.useRef(null),C=x.useRef(null);x.useEffect(()=>{let Z=!1,z=null;const W=async()=>{if(!(Z||C.current)&&H.current&&window.ClassicEditor)try{const B=H.current.ckeditorInstance;B&&await B.destroy();const F=await window.ClassicEditor.create(H.current);if(Z){F.destroy().catch(console.error);return}z=F,C.current=F,H.current.ckeditorInstance=F}catch(B){console.error("CKEditor initialization failed:",B)}},M=setTimeout(()=>{if(window.ClassicEditor)W();else{const B=document.querySelector('script[src*="ckeditor"]');if(B){const F=()=>{Z||W(),B.removeEventListener("load",F)};B.addEventListener("load",F)}else{const F=document.createElement("script");F.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",F.onload=()=>{Z||W()},document.head.appendChild(F)}}},100);return()=>{Z=!0,clearTimeout(M);const B=C.current||z;B&&B.ui&&B.ui.view&&B.ui.view.element&&B.destroy().catch(F=>{console.debug("Editor cleanup:",F)}),C.current=null,H.current&&(H.current.ckeditorInstance=null)}},[]),x.useEffect(()=>{(async()=>{try{I(!0),L("");const z=`${i}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}`,W=await fetch(z,{headers:{Accept:"application/json"},credentials:"include"});if(!W.ok)throw new Error(`  (HTTP ${W.status})`);const w=await W.json();u(w.grouptaskName||""),b(Gb(w.startAt)),v(Gb(w.endAt));const M=T2(w.attachFileList),B=w.fileId||w.attachFileId||_2("",M);N(B),A(M),I(!1);const F=setInterval(()=>{C.current&&(C.current.setData(w.grouptaskDesc||""),clearInterval(F))},100);setTimeout(()=>clearInterval(F),1e4)}catch(z){L(z.message||String(z)),I(!1)}})()},[a,s,i]);const P=async Z=>{const z=Array.from(Z.target.files||[]);if(z.length!==0){if(z.length>5){L(" 5   .");return}try{$(!0),L(""),O("");const W=new FormData;for(const k of z)W.append("files",k);const w=`/classroom/api/v1/common/${encodeURIComponent(a)}/upload?type=task`,M=await fetch(w,{method:"POST",body:W,credentials:"include"});if(!M.ok)throw new Error(`(${M.status})  `);const B=await M.json(),F=B.bundleId||B.fileId||Array.isArray(B.fileIds)&&B.fileIds[0]||Array.isArray(B.files)&&B.files[0]?.fileId||Array.isArray(B.details)&&B.details[0]?.fileId||"",q=Array.isArray(B.files)&&B.files||Array.isArray(B.details)&&B.details||[];N(F),A(q),O("    .")}catch(W){L(W.message||String(W))}finally{$(!1)}}},U=async Z=>{Z.preventDefault();try{if($(!0),L(""),O(""),!d.trim())throw new Error(" .");const z=C.current?C.current.getData():h;if(!z.trim())throw new Error("  .");if(!g)throw new Error("  .");if(g&&y&&g>y)throw new Error("     .");const W={grouptaskId:s,grouptaskName:d.trim(),grouptaskDesc:z.trim(),startAt:g,endAt:y||null,attachFileId:S||""},w=`${i}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}`,M=await fetch(w,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(W)});if(!M.ok){const B=await M.text().catch(()=>M.statusText);throw new Error(` (${M.status}): ${B}`)}O("."),l(`/classroom/professor/${encodeURIComponent(a)}/task/group/${encodeURIComponent(s)}`)}catch(z){L(z.message||String(z))}finally{$(!1)}};return D?e.jsx("section",{id:"task-group-edit-root",className:"container py-4",children:e.jsx("div",{className:"text-muted",children:" ..."})}):e.jsxs("section",{id:"task-group-edit-root",className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsxs("li",{children:[e.jsx(Pe,{className:"text-decoration-none",to:`/classroom/professor/${encodeURIComponent(a)}/task`,children:""}),e.jsx("span",{className:"mx-2",children:">"})]}),e.jsxs("li",{children:[e.jsx(Pe,{className:"text-decoration-none",to:`/classroom/professor/${encodeURIComponent(a)}/task`,children:" "}),e.jsx("span",{className:"mx-2",children:">"})]}),e.jsx("li",{className:"breadcrumb-item active fw-bold","aria-current":"page",children:" "})]})}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(a)}/task/group/${encodeURIComponent(s)}`,children:""}),e.jsx(Pe,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(a)}/task`,children:""})]})]}),e.jsxs("form",{id:"task-group-form",className:"card shadow-sm",onSubmit:U,children:[e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"task-name",className:"form-label",children:""}),e.jsx("input",{id:"task-name",type:"text",className:"form-control",maxLength:50,required:!0,disabled:T,value:d,onChange:Z=>u(Z.target.value),placeholder:"   "}),e.jsx("div",{className:"text-muted small",children:" 50"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"task-desc",className:"form-label",children:" "}),e.jsx("div",{ref:H,id:"task-desc"}),e.jsx("div",{className:"text-muted small",children:" 4000()"})]}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("label",{htmlFor:"start-at",className:"form-label",children:" "}),e.jsx("input",{id:"start-at",type:"datetime-local",className:"form-control",required:!0,disabled:T,value:g,onChange:Z=>b(Z.target.value)})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("label",{htmlFor:"end-at",className:"form-label",children:" "}),e.jsx("input",{id:"end-at",type:"datetime-local",className:"form-control",disabled:T,value:y,onChange:Z=>v(Z.target.value)})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"form-label",children:""}),e.jsx("input",{id:"file-input",type:"file",className:"form-control",multiple:!0,disabled:T,onChange:P}),e.jsx("div",{className:"text-muted small",children:"      . ( 5)"}),S&&e.jsxs("div",{id:"current-attach-box",className:"mt-2",children:[e.jsxs("div",{className:"alert alert-info py-2 mb-2",children:["  ID: ",e.jsx("span",{id:"current-file-id",children:S||"()"})]}),e.jsx("ul",{id:"current-file-list",className:"list-group small",children:E.map((Z,z)=>{const W=Z.originName??Z.originalName??` ${Z.fileOrder??Z.order??z}`,w=Z.extension?`.${Z.extension}`:"",M=typeof Z.fileSize=="number"?` (${Z.fileSize.toLocaleString()}B)`:"",B=Z.fileOrder??Z.order,F=B==null?"#":`${c}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}/attach/${encodeURIComponent(B)}`;return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[W,w,M]}),B!=null&&e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:F,children:""})]},z)})})]})]})]}),e.jsxs("div",{className:"card-footer bg-white d-flex justify-content-between align-items-center flex-wrap gap-2",children:[e.jsxs("div",{children:[G&&e.jsx("div",{className:"alert alert-danger py-2 mb-0",children:G}),_&&e.jsx("div",{className:"alert alert-success py-2 mb-0",children:_})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",disabled:T,onClick:()=>l(`/classroom/professor/${encodeURIComponent(a)}/task/group/${encodeURIComponent(s)}`),children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:T,children:T?" ...":""})]})]})]}),e.jsxs("div",{className:"alert alert-info mt-3",children:[e.jsx("strong",{children:":"}),"     (, , , )   .        ."]})]})}function D2(){const{lectureId:a}=dt(),{students:s,setStudents:l,getStudentPhotoUrl:i,getStudentPhotoBlobUrl:c,cacheStudentPhotoBlobUrl:d}=Jt(),[u,h]=x.useState([]),[f,g]=x.useState(!0),[b,y]=x.useState(null),[v,S]=x.useState({department:"all",grade:"all",name:""}),[N,E]=x.useState({}),A=x.useRef(new Set);x.useEffect(()=>{let L=!0;return(async()=>{try{if(g(!0),y(null),Array.isArray(s)){h(s);return}const _=`/classroom/api/v1/professor/${encodeURIComponent(a)}/students`,O=await fetch(_,{headers:{Accept:"application/json"},credentials:"include"});if(!O.ok)throw new Error(`(${O.status})    .`);const H=await O.json();if(!L)return;const C=Array.isArray(H)?H:[];h(C),l(C)}catch(_){if(!L)return;y(_)}finally{L&&g(!1)}})(),()=>{L=!1}},[a,s,l]);const T=x.useMemo(()=>{if(!u)return[];const L=u.map(_=>_.univDeptName).filter(Boolean);return[...new Set(L)].sort()},[u]),$=x.useMemo(()=>{if(!u)return[];const L=u.map(_=>_.gradeName).filter(Boolean);return[...new Set(L)].sort()},[u]),D=x.useMemo(()=>u?u.filter(L=>{const _=[L.lastName,L.firstName].filter(Boolean).join(""),O=v.name?_.includes(v.name):!0,H=v.department==="all"?!0:L.univDeptName===v.department,C=v.grade==="all"?!0:L.gradeName===v.grade;return O&&H&&C}):[],[u,v]),I=x.useMemo(()=>D.map(L=>L.studentNo).filter(Boolean),[D]);x.useEffect(()=>{I.forEach(L=>{if(!L||A.current.has(L))return;const _=c(L);if(_){E(H=>H[L]?H:{...H,[L]:_});return}const O=i(L,a);O&&(A.current.add(L),fetch(O,{credentials:"include"}).then(H=>H.ok?H.blob():null).then(H=>{if(!H)return;const C=URL.createObjectURL(H);d(L,C),E(P=>({...P,[L]:C}))}).catch(()=>{}).finally(()=>{A.current.delete(L)}))})},[I,a,c,i,d]);const G=L=>{const{name:_,value:O}=L.target;S(H=>({...H,[_]:O}))};return e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h4 mb-0",children:""}),e.jsxs("div",{className:"text-muted small",children:[" ",D.length,""]})]}),e.jsx("div",{className:"card shadow-sm mb-4 p-0",children:e.jsx("div",{className:"card-body p-3",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-7",children:e.jsxs("div",{className:"row g-2 align-items-end",children:[e.jsxs("div",{className:"col-md",children:[e.jsx("label",{htmlFor:"filter-department",className:"form-label small",children:""}),e.jsxs("select",{id:"filter-department",name:"department",className:"form-select form-select-sm",value:v.department,onChange:G,children:[e.jsx("option",{value:"all",children:""}),T.map(L=>e.jsx("option",{value:L,children:L},L))]})]}),e.jsxs("div",{className:"col-md",children:[e.jsx("label",{htmlFor:"filter-grade",className:"form-label small",children:""}),e.jsxs("select",{id:"filter-grade",name:"grade",className:"form-select form-select-sm",value:v.grade,onChange:G,children:[e.jsx("option",{value:"all",children:""}),$.map(L=>e.jsx("option",{value:L,children:L},L))]})]}),e.jsxs("div",{className:"col-md",children:[e.jsx("label",{htmlFor:"filter-name",className:"form-label small",children:""}),e.jsx("input",{type:"text",id:"filter-name",name:"name",className:"form-control form-control-sm",value:v.name,onChange:G,placeholder:" ..."})]})]})})})})}),f&&e.jsx("div",{className:"text-muted",children:" "}),b&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(b.message||b)}),!f&&!b&&e.jsx("div",{className:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-3",children:D.length===0?e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-center text-muted py-5",children:"  ."})}):D.map((L,_)=>{const O=L.studentNo||L.userId||"",H=[L.lastName,L.firstName].filter(Boolean).join("")||O||"",C=L.univDeptName||"-",P=L.gradeName||"",U=L.email||"",Z=N[O]||c(O)||null;return e.jsx("div",{className:"col",children:e.jsxs(Pe,{to:`/classroom/professor/${encodeURIComponent(a)}/student/${encodeURIComponent(O)}`,className:"card h-100 text-decoration-none text-reset p-0",children:[Z&&e.jsx("div",{className:"bg-light rounded-top",style:{overflow:"hidden"},children:e.jsx("img",{src:Z,alt:`${H} `,className:"w-100",style:{display:"block",height:"auto",objectFit:"contain"}})}),e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 mb-1",children:[e.jsx("h3",{className:"h6 mb-0",children:H}),L.enrollStatusName&&e.jsx("span",{className:`badge ${L.enrollStatusCd==="ENR_ING"?"bg-primary":L.enrollStatusCd==="ENR_DONE"?"bg-success":L.enrollStatusCd==="ENR_CANCEL"?"bg-warning text-dark":L.enrollStatusCd==="ENR_WITHDRAW"?"bg-danger":"bg-secondary"}`,children:L.enrollStatusName})]}),e.jsxs("div",{className:"text-muted small mb-2",children:[" ",O||"-"]}),e.jsxs("dl",{className:"row small mb-0",children:[e.jsx("dt",{className:"col-4",children:""}),e.jsx("dd",{className:"col-8 text-end text-truncate",title:C,children:C}),P&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"col-4",children:""}),e.jsx("dd",{className:"col-8 text-end",children:P})]}),U&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"col-4",children:""}),e.jsx("dd",{className:"col-8 text-end text-truncate",title:U,children:U})]})]})]})]})},O||_)})})]})}const Pn=a=>String(a).padStart(2,"0"),ia=(a,s=!1)=>{if(!a)return"-";const l=new Date(a);if(Number.isNaN(l.getTime()))return"-";const i=`${l.getFullYear()}-${Pn(l.getMonth()+1)}-${Pn(l.getDate())}`,c=`${Pn(l.getHours())}:${Pn(l.getMinutes())}${s?`:${Pn(l.getSeconds())}`:""}`;return`${i} ${c}`},M2=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${Pn(s.getMonth()+1)}-${Pn(s.getDate())}`},R2=a=>{const s=(a||"").toUpperCase();return s==="OFF"?"":s==="ON"||s==="ONL"?"":""},So=a=>{if(a==null||a==="")return null;const s=Number(a);return Number.isFinite(s)?s:null},Xb=a=>{const s=So(a?.modifiedScore);if(s!=null)return{score:s,type:"modified"};const l=So(a?.autoScore);return l!=null?{score:l,type:"auto"}:{score:null,type:null}},$2=a=>{switch(a){case"ATTD_OK":return"badge bg-success-subtle text-success-emphasis";case"ATTD_LATE":return"badge bg-warning-subtle text-warning-emphasis";case"ATTD_ABSENT":return"badge bg-danger-subtle text-danger-emphasis";default:return"badge bg-secondary-subtle text-secondary-emphasis"}},mh=(a,s,l)=>e.jsx("span",{className:a?"badge bg-success-subtle text-success-emphasis":"badge bg-secondary-subtle text-secondary-emphasis",children:a?s:l});function I2(){const{lectureId:a,studentNo:s}=dt(),{students:l,setStudents:i,getStudentPhotoUrl:c}=Jt(),[d,u]=x.useState(null),[h,f]=x.useState(null),[g,b]=x.useState(!Array.isArray(l)),[y,v]=x.useState({loading:!0,records:[],error:null}),[S,N]=x.useState({loading:!0,records:[],error:null}),[E,A]=x.useState({loading:!0,records:[],error:null}),[T,$]=x.useState({loading:!0,records:[],error:null}),[D,I]=x.useState(null);x.useEffect(()=>{if(!a||!s)return;if(Array.isArray(l)){const M=l.find(B=>String(B.studentNo||B.userId||"")===String(s));u(M||null),b(!1),f(M?null:"    .");return}let w=!0;return b(!0),f(null),(async()=>{try{const M=`/classroom/api/v1/professor/${encodeURIComponent(a)}/students`,B=await fetch(M,{headers:{Accept:"application/json"},credentials:"include"});if(!B.ok)throw new Error(`(${B.status})     .`);const F=await B.json();if(!w)return;const q=Array.isArray(F)?F:[];i(q);const k=q.find(X=>String(X.studentNo||X.userId||"")===String(s));u(k||null),f(k?null:"    .")}catch(M){if(!w)return;u(null),f(M instanceof Error?M.message:"   .")}finally{w&&b(!1)}})(),()=>{w=!1}},[a,s,l,i]),x.useEffect(()=>{if(!a||!s)return;let w=!0;v(B=>({...B,loading:!0,error:null}));const M=`/classroom/api/v1/professor/${encodeURIComponent(a)}/${encodeURIComponent(s)}/exam`;return(async()=>{try{const B=await fetch(M,{headers:{Accept:"application/json"},credentials:"include"});if(!B.ok)throw new Error(`(${B.status})     .`);const F=await B.json();if(!w)return;const q=Array.isArray(F)?F:[];q.sort((k,X)=>{const ae=new Date(k?.startAt||0).getTime();return new Date(X?.startAt||0).getTime()-ae}),v({loading:!1,records:q,error:null})}catch(B){if(!w)return;v({loading:!1,records:[],error:B instanceof Error?B:new Error("     .")})}})(),()=>{w=!1}},[a,s]),x.useEffect(()=>{if(!a||!s)return;let w=!0;N(B=>({...B,loading:!0,error:null}));const M=`/classroom/api/v1/professor/${encodeURIComponent(a)}/${encodeURIComponent(s)}/attendance`;return(async()=>{try{const B=await fetch(M,{headers:{Accept:"application/json"},credentials:"include"});if(!B.ok)throw new Error(`(${B.status})     .`);const F=await B.json();if(!w)return;const q=Array.isArray(F)?F:[];q.sort((k,X)=>{const ae=k?.lctRound??k?.lctPrintRound??0,Y=X?.lctRound??X?.lctPrintRound??0;return ae-Y}),N({loading:!1,records:q,error:null})}catch(B){if(!w)return;N({loading:!1,records:[],error:B instanceof Error?B:new Error("     .")})}})(),()=>{w=!1}},[a,s]),x.useEffect(()=>{if(!a||!s)return;let w=!0;A(B=>({...B,loading:!0,error:null}));const M=`/classroom/api/v1/professor/${encodeURIComponent(a)}/${encodeURIComponent(s)}/indivtask`;return(async()=>{try{const B=await fetch(M,{headers:{Accept:"application/json"},credentials:"include"});if(!B.ok)throw new Error(`(${B.status})     .`);const F=await B.json();if(!w)return;const q=Array.isArray(F)?F:[];q.sort((k,X)=>{const ae=new Date(k?.startAt||0).getTime();return new Date(X?.startAt||0).getTime()-ae}),A({loading:!1,records:q,error:null})}catch(B){if(!w)return;A({loading:!1,records:[],error:B instanceof Error?B:new Error("     .")})}})(),()=>{w=!1}},[a,s]),x.useEffect(()=>{if(!a||!s)return;let w=!0;$(B=>({...B,loading:!0,error:null}));const M=`/classroom/api/v1/professor/${encodeURIComponent(a)}/${encodeURIComponent(s)}/grouptask`;return(async()=>{try{const B=await fetch(M,{headers:{Accept:"application/json"},credentials:"include"});if(!B.ok)throw new Error(`(${B.status})     .`);const F=await B.json();if(!w)return;const q=Array.isArray(F)?F:[];q.sort((k,X)=>{const ae=new Date(k?.startAt||0).getTime();return new Date(X?.startAt||0).getTime()-ae}),$({loading:!1,records:q,error:null})}catch(B){if(!w)return;$({loading:!1,records:[],error:B instanceof Error?B:new Error("     .")})}})(),()=>{w=!1}},[a,s]),x.useEffect(()=>{if(y.error){I({variant:"alert-danger",message:"     ."});return}if(S.error){I({variant:"alert-danger",message:"     ."});return}!y.loading&&!S.loading&&y.records.length===0&&S.records.length===0?I({variant:"alert-info",message:"      ."}):I(null)},[y.loading,y.error,y.records.length,S.loading,S.error,S.records.length]);const G=x.useMemo(()=>d?[d.lastName,d.firstName].filter(Boolean).join("")||d.userName||d.userId||s||"":s||"",[d,s]),L=x.useMemo(()=>{if(!d)return"";const w=d.univDeptName||"",M=d.gradeName||"";return[w,M].filter(Boolean).join("  ")},[d]),_=d?.email||"",O=d?.enrollStatusName||"",H=d?c(d.studentNo||d.userId||"",a):null,C=x.useMemo(()=>{const w=y.records.length,M=y.records.reduce((F,q)=>F+(So(q?.weightValue)??0),0);if(!w)return{count:w,weightSum:M,finalClass:"alert alert-warning",finalText:"        ."};let B=0;if(y.records.forEach(F=>{const q=So(F?.weightValue)??0,k=Xb(F),X=k.score!=null&&F?.record?k.score:0;B+=X*(q/100)}),Math.abs(M-100)<1e-6){const F=Number.isFinite(B)?B.toFixed(2):"0.00";return{count:w,weightSum:M,finalClass:"alert alert-primary",finalText:`   100%    ${F}.`}}return{count:w,weightSum:M,finalClass:"alert alert-warning",finalText:`     ${M}     .`}},[y.records]),P=x.useMemo(()=>S.records.map(w=>{const M=w?.lctPrintRound??w?.lctRound,B=M!=null?`${M}`:"-",F=w?.qrcodeFileId?"QR":"";return{roundLabel:B,methodLabel:F}}),[S.records]),U=x.useMemo(()=>S.records.length?[{label:"",cells:S.records.map((w,M)=>e.jsx("td",{className:"text-center",children:M2(w?.attDay)},`date-${M}`))},{label:"",cells:S.records.map((w,M)=>e.jsx("td",{className:"text-center",children:e.jsx("span",{className:$2(w?.attStatusCd),children:w?.attStatusName||""})},`status-${M}`))},{label:" ",cells:S.records.map((w,M)=>e.jsx("td",{className:"text-center",children:w?.attAt?ia(w.attAt,!0):"-"},`time-${M}`))},{label:"",cells:S.records.map((w,M)=>e.jsx("td",{className:"text-center text-muted small",children:w?.attComment||"-"},`note-${M}`))}]:[],[S.records]),Z=x.useMemo(()=>y.loading?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"   ..."})}):y.error?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-danger py-4",children:y.error.message||"   ."})}):y.records.length?y.records.map((w,M)=>{const B=w?.startAt?ia(w.startAt):"",F=w?.endAt?ia(w.endAt):"",q=[R2(w?.examType)],k=[B,F?`~ ${F}`:""].filter(Boolean).join(" ");k&&q.push(k);const X=Xb(w),ae=X.type==="modified"?" ()":"";return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold",children:w?.examName||"-"}),e.jsx("div",{className:"text-muted small",children:q.join("  ")})]}),e.jsx("td",{className:"text-center",children:w?.weightValue!=null?w.weightValue:"-"}),e.jsx("td",{className:"text-center",children:mh(w?.record,"","")}),e.jsx("td",{className:"text-center",children:w?.submitAt?ia(w.submitAt,!0):"-"}),e.jsx("td",{className:"text-center",children:X.score!=null?`${X.score}${ae}`:"-"}),e.jsx("td",{className:"text-muted small",children:w?.modifyReason||""})]},w?.examId||w?.lctExamId||M)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"  ."})}),[y.loading,y.error,y.records]),z=x.useMemo(()=>E.loading?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"   ..."})}):E.error?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-danger py-4",children:E.error.message||"   ."})}):E.records.length?E.records.map((w,M)=>{const B=w?.startAt?ia(w.startAt):"",F=w?.endAt?ia(w.endAt):"",q=[B,F?`~ ${F}`:""].filter(Boolean).join(" "),k=!!w?.submitAt,X=!!w?.evaluAt;return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold",children:w?.indivtaskName||"-"}),e.jsx("div",{className:"text-muted small",children:q})]}),e.jsx("td",{className:"text-center",children:mh(w?.submitTarget,"","")}),e.jsx("td",{className:"text-center",children:w?.submitTarget?k?e.jsx("span",{className:"badge bg-success-subtle text-success-emphasis",children:" "}):e.jsx("span",{className:"badge bg-warning-subtle text-warning-emphasis",children:""}):"-"}),e.jsx("td",{className:"text-center",children:k?ia(w.submitAt,!0):"-"}),e.jsx("td",{className:"text-center",children:X&&w?.evaluScore!=null?w.evaluScore:"-"}),e.jsx("td",{className:"text-muted small",children:w?.evaluDesc||""})]},w?.indivtaskId||M)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"  ."})}),[E.loading,E.error,E.records]),W=x.useMemo(()=>T.loading?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"   ..."})}):T.error?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-danger py-4",children:T.error.message||"   ."})}):T.records.length?T.records.map((w,M)=>{const B=w?.startAt?ia(w.startAt):"",F=w?.endAt?ia(w.endAt):"",q=[B,F?`~ ${F}`:""].filter(Boolean).join(" "),k=!!w?.submitAt,X=!!w?.evaluAt;return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold",children:w?.grouptaskName||"-"}),e.jsx("div",{className:"text-muted small",children:q})]}),e.jsx("td",{className:"text-center",children:w?.groupName||"-"}),e.jsx("td",{className:"text-center",children:mh(w?.submitTarget,"","")}),e.jsx("td",{className:"text-center",children:w?.submitTarget?k?e.jsx("span",{className:"badge bg-success-subtle text-success-emphasis",children:" "}):e.jsx("span",{className:"badge bg-warning-subtle text-warning-emphasis",children:""}):"-"}),e.jsx("td",{className:"text-center",children:k?ia(w.submitAt,!0):"-"}),e.jsx("td",{className:"text-center",children:X&&w?.evaluScore!=null?w.evaluScore:"-"}),e.jsx("td",{className:"text-muted small",children:w?.evaluDesc||""})]},w?.grouptaskId||M)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"  ."})}),[T.loading,T.error,T.records]);return e.jsxs("section",{id:"student-detail-root",className:"container py-4",children:[e.jsxs("div",{className:"d-flex flex-column flex-lg-row gap-3 align-items-lg-center justify-content-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"h3 mb-1",children:G}),e.jsxs("div",{className:"text-muted small",children:[" ",e.jsx("span",{id:"student-detail-number",children:s||"-"}),L&&e.jsx("span",{className:"ms-2",children:L})]}),_&&e.jsx("div",{className:"text-muted small",children:_}),O&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`badge ${d?.enrollStatusCd==="ENR_ING"?"bg-primary":d?.enrollStatusCd==="ENR_DONE"?"bg-success":d?.enrollStatusCd==="ENR_CANCEL"?"bg-warning text-dark":d?.enrollStatusCd==="ENR_WITHDRAW"?"bg-danger":"bg-secondary"}`,children:O})})]}),e.jsx("div",{className:"d-flex gap-2 ms-lg-auto",children:e.jsx(Pe,{className:"btn btn-outline-secondary btn-sm",to:`/classroom/professor/${encodeURIComponent(a||"")}/student`,children:""})})]}),H&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:H,alt:`${G} `,style:{maxWidth:"200px",borderRadius:"0.75rem"}})}),g&&e.jsx("div",{className:"text-muted mb-3",children:"   ..."}),h&&!g&&e.jsx("div",{className:"alert alert-warning mb-3",role:"alert",children:h}),D&&e.jsx("div",{id:"student-detail-notice",className:`alert ${D.variant}`,role:"alert",children:D.message}),e.jsxs("div",{className:"card shadow-sm",id:"student-attendance-card",children:[e.jsxs("div",{className:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2",children:[e.jsx("h2",{className:"h5 mb-0",children:" "}),e.jsxs("div",{className:"text-muted small",children:["  ",e.jsx("span",{id:"student-attendance-count",children:S.records.length}),""]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{id:"student-attendance-pivot",className:"table-responsive",children:S.loading?e.jsx("div",{className:"text-center text-muted py-5",children:"   ..."}):S.error?e.jsx("div",{className:"text-center text-danger py-5",children:S.error.message||"   ."}):S.records.length?e.jsxs("table",{className:"table table-sm table-bordered align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"bg-light text-center",children:""}),P.map(({roundLabel:w,methodLabel:M},B)=>e.jsxs("th",{scope:"col",className:"text-center",children:[e.jsx("div",{className:"fw-semibold",children:w}),e.jsx("div",{className:"text-muted small",children:M})]},`att-head-${B}`))]})}),e.jsx("tbody",{children:U.map((w,M)=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",className:"bg-light text-center",children:w.label}),w.cells]},`att-row-${M}`))})]}):e.jsx("div",{className:"text-center text-muted py-5",children:"   ."})}),e.jsx("div",{className:"text-muted small mt-2",children:"*     ."})]})]}),e.jsxs("div",{className:"card shadow-sm mt-4",id:"student-exam-card",children:[e.jsxs("div",{className:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2",children:[e.jsx("h2",{className:"h5 mb-0",children:"  "}),e.jsxs("div",{className:"text-muted small d-flex flex-column flex-sm-row align-items-sm-center gap-2",children:[e.jsxs("span",{children:["  ",e.jsx("span",{id:"student-exam-count",children:C.count}),""]}),e.jsxs("span",{id:"student-exam-weight-summary",children:["  : ",C.weightSum,""]})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:`${C.finalClass} d-flex align-items-center justify-content-between`,role:"status",id:"student-exam-final-score",children:e.jsx("span",{children:C.finalText})}),e.jsx("div",{className:"table-responsive mt-3",children:e.jsxs("table",{className:"table table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:80},children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:90},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:180},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:120},children:""}),e.jsx("th",{scope:"col",children:""})]})}),e.jsx("tbody",{id:"student-exam-tbody",children:Z})]})}),e.jsx("div",{className:"text-muted small mt-2",children:"*          ."})]})]}),e.jsxs("div",{className:"card shadow-sm mt-4",id:"student-indivtask-card",children:[e.jsxs("div",{className:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2",children:[e.jsx("h2",{className:"h5 mb-0",children:"  "}),e.jsxs("div",{className:"text-muted small",children:[" ",e.jsx("span",{id:"student-indivtask-count",children:E.records.length}),""]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:90},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:100},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:180},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:80},children:""}),e.jsx("th",{scope:"col",children:" "})]})}),e.jsx("tbody",{id:"student-indivtask-tbody",children:z})]})}),e.jsx("div",{className:"text-muted small mt-2",children:"*      ."})]})]}),e.jsxs("div",{className:"card shadow-sm mt-4",id:"student-grouptask-card",children:[e.jsxs("div",{className:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2",children:[e.jsx("h2",{className:"h5 mb-0",children:"  "}),e.jsxs("div",{className:"text-muted small",children:[" ",e.jsx("span",{id:"student-grouptask-count",children:T.records.length}),""]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:120},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:90},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:100},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:180},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:80},children:""}),e.jsx("th",{scope:"col",children:" "})]})}),e.jsx("tbody",{id:"student-grouptask-tbody",children:W})]})}),e.jsx("div",{className:"text-muted small mt-2",children:"*        ."})]})]})]})}function O2(){const{lectureId:a}=dt(),{students:s}=Jt(),[l,i]=x.useState(null),[c,d]=x.useState([]),[u,h]=x.useState([]),[f,g]=x.useState([]),[b,y]=x.useState([]),[v,S]=x.useState([]),[N,E]=x.useState(null),[A,T]=x.useState(null),[$,D]=x.useState(null),[I,G]=x.useState([]),[L,_]=x.useState(null),[O,H]=x.useState(null),[C,P]=x.useState([]),[U,Z]=x.useState(null),[z,W]=x.useState(null),[w,M]=x.useState([]),[B,F]=x.useState(null),[q,k]=x.useState(null),[X,ae]=x.useState([]),[Y,te]=x.useState(null),[K,le]=x.useState(null),[ve,ke]=x.useState({}),[J,ue]=x.useState(null),[Se,Me]=x.useState(null),[re,he]=x.useState({}),[Re,Be]=x.useState(!0),[fe,Le]=x.useState(null),[oe,Ne]=x.useState(!1),[we,Ye]=x.useState(1),[Xe,Ke]=x.useState(null),[He,Ht]=x.useState([]),[Ns,ua]=x.useState([]),[xt,Kn]=x.useState({A:null,B:null,CD:[]}),[Fa,ha]=x.useState(null),[es,Xs]=x.useState(!1),[ts,ur]=x.useState(null),hr=[{code:"ATTD",name:""},{code:"EXAM",name:""},{code:"TASK",name:""},{code:"PRAC",name:""},{code:"MISC",name:""},{code:"TOTAL",name:""}],mr=async()=>{if(!(!l||!v))try{let ge=$;if(!ge){const Ce=await fetch("/classroom/api/v1/common/lecture/evaluate/score-by-attendance-status",{headers:{Accept:"application/json"},credentials:"include"});if(!Ce.ok)throw new Error(`(${Ce.status})     .`);ge=await Ce.json(),D(ge)}const _e=v.map(Ce=>{const $e=(Ce.okCnt||0)+(Ce.noCnt||0)+(Ce.earlyCnt||0)+(Ce.lateCnt||0)+(Ce.excpCnt||0);if($e===0)return{enrollId:Ce.enrollId,score:0,isFailed:!1,details:{ok:0,excp:0,early:0,late:0,no:0,totalRounds:0}};const V=Math.ceil($e*.3),me=(Ce.noCnt||0)+(Ce.excpCnt||0);if(me>V)return{enrollId:Ce.enrollId,score:0,isFailed:!0,reason:`+(${me}) > (${V})`,details:{ok:Ce.okCnt||0,excp:Ce.excpCnt||0,early:Ce.earlyCnt||0,late:Ce.lateCnt||0,no:Ce.noCnt||0,totalRounds:$e}};const je=(Ce.okCnt||0)*(ge.ATTD_OK||100),be=(Ce.excpCnt||0)*(ge.ATTD_EXCP||80),Ie=(Ce.earlyCnt||0)*(ge.ATTD_EARLY||50),Ae=(Ce.lateCnt||0)*(ge.ATTD_LATE||50),Te=(Ce.noCnt||0)*(ge.ATTD_NO||0),Ee=(je+be+Ie+Ae+Te)/$e;return{enrollId:Ce.enrollId,score:Math.round(Ee*100)/100,isFailed:!1,details:{ok:Ce.okCnt||0,excp:Ce.excpCnt||0,early:Ce.earlyCnt||0,late:Ce.lateCnt||0,no:Ce.noCnt||0,totalRounds:$e}}});G(_e)}catch(ge){console.error("   :",ge),alert(ge.message||"     .")}},Sn=async()=>{if(!l||!C||C.length===0){alert("   .    .");return}try{const ge=await fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(a)}/weight`,{headers:{Accept:"application/json"},credentials:"include"});if(!ge.ok)throw new Error(`(${ge.status})     .`);const _e=await ge.json(),Ce=Array.isArray(_e)?_e.filter(Oe=>Oe.weightValue>0):[];if(console.log("  :",Ce),Ce.length===0){alert("   .");return}const $e=Ce.filter(Oe=>Oe.taskType==="INDIV"),V=Ce.filter(Oe=>Oe.taskType==="GROUP"),me=[];$e.length>0?me.push(fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(a)}/indiv/summary`,{headers:{Accept:"application/json"},credentials:"include"})):me.push(Promise.resolve(null)),V.length>0?me.push(fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(a)}/group/summary`,{headers:{Accept:"application/json"},credentials:"include"})):me.push(Promise.resolve(null));const[je,be]=await Promise.all(me),Ie=je&&je.ok?await je.json():[],Ae=be&&be.ok?await be.json():[];console.log(" :",Ie),console.log(" :",Ae);const Te=C.map(Oe=>{const Ee=Oe.enrollId;let Fe=0;return $e.forEach(De=>{const ze=De.taskId,et=De.weightValue,Qe=Array.isArray(Ie)?Ie.find(yt=>yt.enrollId===Ee&&yt.indivtaskId===ze):null,Rt=Qe?.isTarget==="Y",Yt=Qe?.submitAt!=null;let st=0;Rt&&Yt&&(st=Qe?.score||0),Fe+=st*et/100}),V.forEach(De=>{const ze=De.taskId,et=De.weightValue,Qe=Array.isArray(Ae)?Ae.find(yt=>yt.enrollId===Ee&&yt.grouptaskId===ze):null,Rt=Qe?.grouptaskId!=null,Yt=Qe?.submitAt!=null;let st=0;Rt&&Yt&&(st=Qe?.score||0),Fe+=st*et/100}),{enrollId:Ee,score:Math.round(Fe*100)/100,details:{indivTasks:$e.map(De=>{const ze=Array.isArray(Ie)?Ie.find(Rt=>Rt.enrollId===Ee&&Rt.indivtaskId===De.taskId):null,et=ze?.isTarget==="Y",Qe=ze?.submitAt!=null;return{taskId:De.taskId,taskName:De.taskName,weight:De.weightValue,score:et&&Qe&&ze?.score||0,isTarget:et,hasSubmission:Qe}}),groupTasks:V.map(De=>{const ze=Array.isArray(Ae)?Ae.find(Rt=>Rt.enrollId===Ee&&Rt.grouptaskId===De.taskId):null,et=ze?.grouptaskId!=null,Qe=ze?.submitAt!=null;return{taskId:De.taskId,taskName:De.taskName,weight:De.weightValue,score:et&&Qe&&ze?.score||0,isTarget:et,hasSubmission:Qe}})}}});console.log("  :",Te),M(Te)}catch(ge){console.error("   :",ge),alert(ge.message||"     .")}},wn=async()=>{if(!l||!C||C.length===0){alert("   .    .");return}try{const ge=Array.isArray(u)?u.filter(V=>V.weightValue>0):[];if(console.log("  :",ge),ge.length===0){alert("   .");return}const _e=await fetch(`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/summary`,{headers:{Accept:"application/json"},credentials:"include"});if(!_e.ok)throw new Error(`(${_e.status})      .`);const Ce=await _e.json();console.log("  :",Ce);const $e=C.map(V=>{const me=V.enrollId;let je=0;const be=Array.isArray(Ce)?Ce.find(Ae=>Ae.enrollId===me):null,Ie=ge.map(Ae=>{const Te=Ae.examId||Ae.lctExamId,Oe=Ae.weightValue,Ee=be?.scoreList?.find(et=>et.lctExamId===Te),Fe=Ee?.isTarget==="Y",De=Ee?.submitAt!=null;let ze=0;return Fe&&De&&(ze=Ee?.score||0),je+=ze*Oe/100,{examId:Te,examName:Ae.examName,weight:Oe,score:ze,isTarget:Fe,hasSubmission:De}});return{enrollId:me,score:Math.round(je*100)/100,details:Ie}});console.log("  :",$e),ae($e)}catch(ge){console.error("   :",ge),alert(ge.message||"     .")}},Qn=async()=>{if(!C||C.length===0){alert("    .    .");return}const ge=["ATTD","EXAM","TASK","PRAC","MISC"],_e={ATTD:"",EXAM:"",TASK:"",PRAC:"",MISC:""},Ce=new Map(b.map(V=>[V.gradeCriteriaCd,V])),$e=ge.map(V=>{const me=Ce.get(V);return me?{code:V,label:me.gradeCriteriaName||_e[V]||V,ratio:Number(me.ratio??0)}:null}).filter(Boolean);if($e.length===0){alert("    .    .");return}try{Xs(!0),ur(null),Ht([]),ua([]);const V=await Promise.all($e.map(async be=>{const Ie="/classroom/api/v1/professor/"+encodeURIComponent(a)+"/end/score?section="+encodeURIComponent(be.code),Ae=await fetch(Ie,{headers:{Accept:"application/json"},credentials:"include"});if(!Ae.ok)throw new Error("("+Ae.status+") "+be.label+"   .");const Te=await Ae.json(),Oe={};return Array.isArray(Te)&&Te.forEach(Ee=>{if(!Ee)return;const Fe=String(Ee.enrollId);if(!Fe)return;const De=Ee.rawScore??Ee.score;if(De==null)return;const ze=Number(De);Oe[Fe]=Number.isFinite(ze)?ze:0}),{...be,scores:Oe}})),je=C.map(be=>{const Ie=String(be.enrollId),Ae=V.map(Ee=>{const De=Object.prototype.hasOwnProperty.call(Ee.scores,Ie)?Ee.scores[Ie]:null,ze=De!==null?Math.round(De*Ee.ratio/100*100)/100:null;return{code:Ee.code,label:Ee.label,ratio:Ee.ratio,rawScore:De,weightedScore:ze}}),Te=Ae.some(Ee=>Ee.rawScore===null||Ee.rawScore===void 0),Oe=Ae.reduce((Ee,Fe)=>Fe.rawScore===null||Fe.rawScore===void 0?Ee:Ee+Fe.rawScore*Fe.ratio/100,0);return{enrollId:be.enrollId,totalScore:Math.round(Oe*100)/100,breakdown:Ae,hasMissing:Te}}).slice().sort((be,Ie)=>{if(be.hasMissing!==Ie.hasMissing)return be.hasMissing?1:-1;const Ae=Number.isFinite(be.totalScore)?be.totalScore:-1/0,Te=Number.isFinite(Ie.totalScore)?Ie.totalScore:-1/0;if(Ae!==Te)return Te-Ae;const Oe=Ms.get(be.enrollId),Ee=Ms.get(Ie.enrollId),Fe=(Oe?.studentNo||Oe?.userId||"").toString(),De=(Ee?.studentNo||Ee?.userId||"").toString();return Fe&&De&&Fe!==De?Fe.localeCompare(De):String(be.enrollId).localeCompare(String(Ie.enrollId))});ua(V.map(({scores:be,...Ie})=>Ie)),Ht(je)}catch(V){console.error("  :",V),ur(V),alert(V.message||"    .")}finally{Xs(!1)}},ma=async()=>{if(He.length===0){alert("  .   .");return}if(confirm(`   ?
    .`))try{const ge=He.map($e=>{const je=($e.breakdown.find(Ie=>Ie.code==="ATTD")?.rawScore||0)===0;let be="-";if(je)be="F";else if(N?.subjectTypeCd==="SUBJ_RELATIVE"){const Ie=He.map(Te=>{const Oe=Te.breakdown.find(Ee=>Ee.code==="ATTD");return{enrollId:Te.enrollId,totalScore:Te.totalScore,isFail:(Oe?.rawScore||0)===0}}).filter(Te=>!Te.isFail).sort((Te,Oe)=>Oe.totalScore-Te.totalScore),Ae=Ie.findIndex(Te=>Te.enrollId===$e.enrollId);if(Ae!==-1){const Te=Math.round(N.currentCap*(A?.A||0)/100),Oe=Math.round(N.currentCap*(A?.B||0)/100);let Ee="C~D";Ae<Te?Ee="A":Ae<Te+Oe&&(Ee="B");const Fe={A:xt.A!==null?xt.A:Math.floor(Te/2),B:xt.B!==null?xt.B:Math.floor(Oe/2),CD:xt.CD.length>0?xt.CD:[Math.floor((N.currentCap-Te-Oe)/4),Math.floor((N.currentCap-Te-Oe)/2),Math.floor((N.currentCap-Te-Oe)*3/4)]};if(Ee==="A")be=Ie.slice(0,Te).findIndex(et=>et.enrollId===$e.enrollId)<=Fe.A?"A+":"A0";else if(Ee==="B")be=Ie.slice(Te,Te+Oe).findIndex(et=>et.enrollId===$e.enrollId)<=Fe.B?"B+":"B0";else{const ze=Ie.slice(Te+Oe).findIndex(Qe=>Qe.enrollId===$e.enrollId),et=Fe.CD;ze<=(et[0]||0)?be="C+":ze<=(et[1]||0)?be="C0":ze<=(et[2]||0)?be="D+":be="D0"}}}else(N?.subjectTypeCd==="SUBJ_ABSOLUTE"||N?.subjectTypeCd==="SUBJ_PASSFAIL")&&(be="-");return{enrollId:String($e.enrollId),gpaCd:be}});if(ge.some($e=>$e.gpaCd==="-")){alert("    .   .");return}const Ce=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/record`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(ge)});if(!Ce.ok)throw new Error(`   (${Ce.status})`);alert("    ."),Ne(!1),Ye(1),Ke(null),window.location.reload()}catch(ge){console.error("  :",ge),alert(ge.message||"    .")}},Zn=async()=>{if(I.length===0){alert("   .");return}if(confirm("   ?"))try{const ge=I.map(Ce=>({enrollId:Ce.enrollId,gradeCriteriaCd:"ATTD",rawScore:Ce.score})),_e=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(ge)});if(!_e.ok)throw new Error(`(${_e.status})    .`);alert("   .")}catch(ge){console.error("   :",ge),alert(ge.message||"     .")}};x.useEffect(()=>{let ge=!0;return(async()=>{try{Be(!0),Le(null);const _e=`/classroom/api/v1/professor/${encodeURIComponent(a)}/end`,[Ce,$e,V,me,je,be,Ie,Ae]=await Promise.all([fetch(`${_e}/progress`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${_e}/task`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${_e}/exam`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${_e}/attendance`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/common/${encodeURIComponent(a)}/ratio`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/attendance/${encodeURIComponent(a)}/summary`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/common/${encodeURIComponent(a)}`,{headers:{Accept:"application/json"},credentials:"include"}),fetch("/classroom/api/v1/common/subject/evaluate/interval",{headers:{Accept:"application/json"},credentials:"include"})]);if(!Ce.ok)throw new Error(`(${Ce.status})    .`);if(!$e.ok)throw new Error(`(${$e.status})    .`);if(!V.ok)throw new Error(`(${V.status})    .`);if(!me.ok)throw new Error(`(${me.status})    .`);if(!je.ok)throw new Error(`(${je.status})    .`);if(!be.ok)throw new Error(`(${be.status})     .`);if(!Ie.ok)throw new Error(`(${Ie.status})    .`);if(!Ae.ok)throw new Error(`(${Ae.status})    .`);const Te=await Ce.json(),Oe=await $e.json(),Ee=await V.json(),Fe=await me.json(),De=await je.json(),ze=await be.json(),et=await Ie.json(),Qe=await Ae.json();if(!ge)return;i(Te),d(Array.isArray(Oe)?Oe:[]),h(Array.isArray(Ee)?Ee:[]),g(Array.isArray(Fe)?Fe:[]),y(Array.isArray(De)?De:[]),S(Array.isArray(ze)?ze:[]),E(et),T(Qe)}catch(_e){if(!ge)return;Le(_e)}finally{ge&&Be(!1)}})(),()=>{ge=!1}},[a]),x.useEffect(()=>{oe&&L===null&&U===null&&B===null&&Y===null&&J===null&&(async()=>{try{console.log("===      ==="),console.log("  :",s?.length),s&&s.length>0&&(console.log("    :",s[0]),console.log(" enrollStatusCd :",s.map(Ze=>Ze.enrollStatusCd)));const ge=Array.isArray(s)?s:[];console.log(" :",ge.length),P(ge);const _e=new Set(ge.map(Ze=>Ze.enrollId)),[Ce,$e,V,me,je]=await Promise.all([fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score?section=ATTD`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score?section=TASK`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score?section=EXAM`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score?section=PRAC`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score?section=MISC`,{headers:{Accept:"application/json"},credentials:"include"})]);console.log("===    ==="),Ce.ok||console.warn(`    (${Ce.status})`);const be=Ce.ok?await Ce.json():[];console.log("  :",be.length,"");const Ie=new Map(Array.isArray(be)?be.map(Ze=>[Ze.enrollId,Ze.rawScore]):[]);_(Ie);let Ae=0;_e.forEach(Ze=>{Ie.has(Ze)&&Ae++}),Ae===_e.size&&_e.size>0?(console.log(" : all"),H("all")):Ae>0?(console.log(" : partial"),H("partial")):(console.log(" : none"),H("none")),console.log("===    ==="),$e.ok||console.warn(`    (${$e.status})`);const Te=$e.ok?await $e.json():[];console.log("  :",Te.length,"");const Oe=new Map(Array.isArray(Te)?Te.map(Ze=>[Ze.enrollId,Ze.rawScore]):[]);Z(Oe);let Ee=0;_e.forEach(Ze=>{Oe.has(Ze)&&Ee++}),Ee===_e.size&&_e.size>0?(console.log(" : all"),W("all")):Ee>0?(console.log(" : partial"),W("partial")):(console.log(" : none"),W("none")),console.log("===    ==="),V.ok||console.warn(`    (${V.status})`);const Fe=V.ok?await V.json():[];console.log("  :",Fe.length,"");const De=new Map(Array.isArray(Fe)?Fe.map(Ze=>[Ze.enrollId,Ze.rawScore]):[]);F(De);let ze=0;_e.forEach(Ze=>{De.has(Ze)&&ze++}),ze===_e.size&&_e.size>0?(console.log(" : all"),k("all")):ze>0?(console.log(" : partial"),k("partial")):(console.log(" : none"),k("none")),console.log("===    ==="),me.ok||console.warn(`    (${me.status})`);const et=me.ok?await me.json():[];console.log("  :",et.length,"");const Qe=new Map(Array.isArray(et)?et.map(Ze=>[Ze.enrollId,Ze.rawScore]):[]);te(Qe);let Rt=0;if(_e.forEach(Ze=>{Qe.has(Ze)&&Rt++}),Rt===_e.size&&_e.size>0)console.log(" : all"),le("all");else if(Rt>0){console.log(" : partial"),le("partial");const Ze={};Qe.forEach((Ws,ss)=>{Ze[ss]=Ws}),ke(Ze)}else console.log(" : none"),le("none");console.log("===    ==="),je.ok||console.warn(`    (${je.status})`);const Yt=je.ok?await je.json():[];console.log("  :",Yt.length,"");const st=new Map(Array.isArray(Yt)?Yt.map(Ze=>[Ze.enrollId,Ze.rawScore]):[]);ue(st);let yt=0;if(_e.forEach(Ze=>{st.has(Ze)&&yt++}),yt===_e.size&&_e.size>0)console.log(" : all"),Me("all");else if(yt>0){console.log(" : partial"),Me("partial");const Ze={};st.forEach((Ws,ss)=>{Ze[ss]=Ws}),he(Ze)}else console.log(" : none"),Me("none");console.log("===      ===")}catch(ge){console.error("   :",ge),_(new Map),H("none"),Z(new Map),W("none"),F(new Map),k("none"),te(new Map),le("none"),ue(new Map),Me("none")}})()},[oe,a,s]),x.useEffect(()=>{if(Xe===0&&O!==null&&I.length===0)if(O==="none")mr();else{const ge=C.map(_e=>{const Ce=L.get(_e.enrollId);return{enrollId:_e.enrollId,score:Ce!==void 0?Ce:null,isFailed:Ce===0}});G(ge)}},[Xe,O,I.length]);const cs=l?(()=>{const ge=l.weekCnt*l.weeklyBlockCnt,_e=ge>0?(l.recordedRoundCnt/ge*100).toFixed(1):0;return{totalRounds:ge,progressRate:_e}})():null,Do=b.find(ge=>ge.gradeCriteriaCd==="TASK")?.ratio||0,fr=b.find(ge=>ge.gradeCriteriaCd==="EXAM")?.ratio||0,Ss=(()=>{if(Do===0)return{hasOngoingWeightedTasks:!1,ongoingTasks:[],taskWeightSum:0,isTaskWeightValid:!0,isTaskValid:!0,skipValidation:!0};const ge=c.filter(V=>V.closedYn==="N"&&V.weightValue>0),_e=ge.length>0,Ce=c.reduce((V,me)=>V+(me.weightValue||0),0),$e=Ce===100;return{hasOngoingWeightedTasks:_e,ongoingTasks:ge,taskWeightSum:Ce,isTaskWeightValid:$e,isTaskValid:!_e&&$e,skipValidation:!1}})(),ds=(()=>{if(fr===0)return{hasOngoingWeightedExams:!1,ongoingExams:[],examWeightSum:0,isExamWeightValid:!0,isExamValid:!0,skipValidation:!0};const ge=u.filter(V=>V.closedYn==="N"&&V.weightValue>0),_e=ge.length>0,Ce=u.reduce((V,me)=>V+(me.weightValue||0),0),$e=Ce===100;return{hasOngoingWeightedExams:_e,ongoingExams:ge,examWeightSum:Ce,isExamWeightValid:$e,isExamValid:!_e&&$e,skipValidation:!1}})(),fa=(()=>{const ge=f.length>0;return{hasIncompleteAttendance:ge,incompleteRounds:f,isAttendanceValid:!ge}})(),Ms=x.useMemo(()=>new Map((s||[]).map(ge=>[ge.enrollId,ge])),[s]),Jn=(()=>{if(!cs)return[];const ge=cs.totalRounds;return ge===0?[]:v.filter(_e=>((_e.noCnt||0)+(_e.excpCnt||0))/ge*100>=30)})(),el=cs?cs.progressRate>=100:!1,tl=el&&Ss.isTaskValid&&ds.isExamValid&&fa.isAttendanceValid;return e.jsxs("section",{className:"container py-3",children:[Re&&e.jsx("div",{className:"text-muted",children:" "}),fe&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(fe.message||fe)}),!Re&&!fe&&e.jsx("div",{className:"vstack gap-4",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h5 mb-0",children:" "})}),e.jsxs("div",{className:"card-body",children:[cs&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"fw-semibold mb-3",children:"  "}),e.jsxs("div",{className:"vstack gap-2",children:[e.jsxs("div",{children:[" ",cs.totalRounds,"  ",e.jsxs("strong",{className:"text-primary",children:[l.recordedRoundCnt," "]})]}),e.jsx("div",{className:"progress",style:{height:"30px"},children:e.jsxs("div",{className:`progress-bar ${el?"bg-success":"bg-warning"}`,role:"progressbar",style:{width:`${cs.progressRate}%`},"aria-valuenow":cs.progressRate,"aria-valuemin":"0","aria-valuemax":"100",children:[cs.progressRate,"%"]})}),!el&&e.jsx("div",{className:"alert alert-warning mb-0 small py-2",children:"      100% ."})]})]}),e.jsx("hr",{}),!Ss.skipValidation&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"fw-semibold mb-2",children:"  "}),e.jsxs("ul",{className:"list-group",children:[e.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${Ss.hasOngoingWeightedTasks?"list-group-item-danger":"list-group-item-success"}`,children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("strong",{children:Ss.hasOngoingWeightedTasks?"    ":"  ."}),Ss.hasOngoingWeightedTasks&&e.jsx("a",{href:`/classroom/professor/${a}/task`,className:"text-decoration-none small",children:"  "})]}),e.jsx("span",{style:{fontSize:"1.5rem"},children:Ss.hasOngoingWeightedTasks?"":""})]}),e.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${Ss.isTaskWeightValid?"list-group-item-success":"list-group-item-danger"}`,children:[e.jsx("div",{children:e.jsxs("strong",{children:["  ",Ss.taskWeightSum,"."]})}),e.jsx("span",{style:{fontSize:"1.5rem"},children:Ss.isTaskWeightValid?"":""})]})]})]}),!ds.skipValidation&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"fw-semibold mb-2",children:"  "}),e.jsxs("ul",{className:"list-group",children:[e.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${ds.hasOngoingWeightedExams?"list-group-item-danger":"list-group-item-success"}`,children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("strong",{children:ds.hasOngoingWeightedExams?"    ":"  ."}),ds.hasOngoingWeightedExams&&e.jsx("a",{href:`/classroom/professor/${a}/exam`,className:"text-decoration-none small",children:"  "})]}),e.jsx("span",{style:{fontSize:"1.5rem"},children:ds.hasOngoingWeightedExams?"":""})]}),e.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${ds.isExamWeightValid?"list-group-item-success":"list-group-item-danger"}`,children:[e.jsx("div",{children:e.jsxs("strong",{children:["  ",ds.examWeightSum,"."]})}),e.jsx("span",{style:{fontSize:"1.5rem"},children:ds.isExamWeightValid?"":""})]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"fw-semibold mb-2",children:"  "}),e.jsxs("ul",{className:"list-group",children:[e.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${fa.hasIncompleteAttendance?"list-group-item-danger":"list-group-item-success"}`,children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("strong",{children:fa.hasIncompleteAttendance?"   ":"  ."}),fa.hasIncompleteAttendance&&e.jsx("a",{href:`/classroom/professor/${a}/attendance`,className:"text-decoration-none small",children:"  "})]}),e.jsx("span",{style:{fontSize:"1.5rem"},children:fa.hasIncompleteAttendance?"":""})]}),fa.hasIncompleteAttendance&&e.jsx("li",{className:"list-group-item list-group-item-warning py-2",children:e.jsxs("div",{className:"small",children:[e.jsx("strong",{children:"  :"}),e.jsx("div",{className:"mt-1",children:fa.incompleteRounds.map((ge,_e)=>e.jsxs("span",{className:"badge bg-warning text-dark me-1",children:[ge.lctRound,""]},_e))})]})})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("div",{children:tl?e.jsx("span",{className:"text-success",children:"     ."}):e.jsx("span",{className:"text-danger",children:"    ."})}),e.jsx("button",{className:"btn btn-primary",disabled:!tl,onClick:()=>Ne(!0),children:"  "})]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h5 mb-0",children:""})}),e.jsx("div",{className:"card-body",children:b.length>0?e.jsxs("div",{className:"vstack gap-3",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"fw-semibold mb-2",children:" "}),e.jsx("div",{className:"progress",style:{height:"30px"},children:b.map((ge,_e)=>{const Ce=["#3498db","#e74c3c","#f39c12","#2ecc71","#9b59b6"],$e=Ce[_e%Ce.length];return e.jsxs("div",{className:"progress-bar d-flex align-items-center justify-content-center fw-semibold",role:"progressbar",style:{width:`${ge.ratio}%`,backgroundColor:$e,color:"#fff"},"aria-valuenow":ge.ratio,"aria-valuemin":"0","aria-valuemax":"100",children:[ge.gradeCriteriaName," ",ge.ratio,"%"]},_e)})}),e.jsx("div",{className:"mt-2 small text-muted",children:"  +   30%    F ."})]}),Jn.length>0&&e.jsx("div",{className:"alert alert-danger mb-0 py-2",children:e.jsxs("div",{className:"small",children:[e.jsxs("strong",{children:["  : ",Jn.length,""]}),e.jsx("div",{className:"mt-1",children:Jn.map((ge,_e)=>{const Ce=cs.totalRounds,$e=(ge.noCnt||0)+(ge.excpCnt||0),V=($e/Ce*100).toFixed(1),me=Ms.get(ge.enrollId),je=me&&(`${me.lastName||""}${me.firstName||""}`.trim()||me.studentName)||ge.enrollId;return e.jsxs("div",{className:"text-muted",children:[je,": ",$e,"  (",V,"%)"]},_e)})})]})}),N&&e.jsxs("div",{className:"border-top pt-3",children:[e.jsxs("h6",{className:"fw-semibold mb-2",children:[" : ",N.subjectTypeName||N.subjectTypeCd]}),N.subjectTypeCd==="SUBJ_RELATIVE"&&e.jsxs("div",{className:"small",children:[e.jsx("p",{className:"mb-2",children:"    A, B, C~D  ."}),A&&N.currentCap&&e.jsxs("div",{className:"bg-light p-2 rounded",children:[e.jsx("div",{className:"fw-semibold mb-1",children:"     :"}),(()=>{const ge=Math.round(N.currentCap*(A.A||0)/100),_e=Math.round(N.currentCap*(A.B||0)/100),Ce=N.currentCap-ge-_e;return e.jsxs("ul",{className:"mb-1 ps-3",children:[e.jsxs("li",{children:["A : ",ge," (",A.A||0,"%)"]}),e.jsxs("li",{children:["B : ",_e," (",A.B||0,"%)"]}),e.jsxs("li",{children:["C~D : ",Ce," (",100-(A.A||0)-(A.B||0),"%)"]})]})})(),e.jsx("div",{className:"text-muted",style:{fontSize:"0.85em"},children:"       ."})]})]}),N.subjectTypeCd==="SUBJ_ABSOLUTE"&&e.jsxs("div",{className:"small",children:[e.jsx("p",{className:"mb-2",children:"     ."}),e.jsxs("div",{className:"bg-light p-2 rounded",children:[e.jsx("div",{className:"fw-semibold mb-1",children:" :"}),e.jsxs("ul",{className:"mb-0 ps-3",children:[e.jsx("li",{children:"A+: 95 "}),e.jsx("li",{children:"A0: 90~94"}),e.jsx("li",{children:"B+: 85~89"}),e.jsx("li",{children:"B0: 80~84"}),e.jsx("li",{children:"C+: 75~79"}),e.jsx("li",{children:"C0: 70~74"}),e.jsx("li",{children:"D+: 65~69"}),e.jsx("li",{children:"D0: 60~64"}),e.jsx("li",{children:"F: 60 "})]})]})]}),N.subjectTypeCd==="SUBJ_PASSFAIL"&&e.jsxs("div",{className:"small",children:[e.jsx("p",{className:"mb-1",children:" PASS  FAIL ."}),e.jsx("div",{className:"text-muted",children:"      P(PASS)  F(FAIL) ."})]})]})]}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"bi bi-file-earmark-text display-4 d-block mb-3 opacity-25"}),e.jsx("p",{className:"text-muted mb-0",children:"  ."})]})})]})})]})}),oe&&e.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",style:{maxWidth:"1140px"},children:e.jsxs("div",{className:"modal-content",style:{height:"85vh",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header py-2",children:[e.jsx("h6",{className:"modal-title mb-0",children:" "}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{Ne(!1),Ye(1),Ke(null)},"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{className:`small ${we>=1?"fw-bold text-primary":"text-muted"}`,children:"1)  /"}),e.jsx("span",{className:`small ${we>=2?"fw-bold text-primary":"text-muted"}`,children:"2)  "}),e.jsx("span",{className:`small ${we>=3?"fw-bold text-primary":"text-muted"}`,children:"3)   "})]}),e.jsx("div",{className:"progress",style:{height:"8px"},children:e.jsx("div",{className:"progress-bar",style:{width:`${we/3*100}%`}})})]}),we===1?e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:[e.jsx("ul",{className:"nav nav-tabs mb-3",role:"tablist",style:{flexShrink:0},children:hr.map((ge,_e)=>{const Ce=b.find(me=>me.gradeCriteriaCd===ge.code),$e=ge.code==="TOTAL"||Ce&&Ce.ratio>0,V=Xe===_e;return e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:`nav-link ${V?"active":""} ${$e?"":"disabled"}`,type:"button",onClick:()=>$e&&Ke(_e),disabled:!$e,style:V?{backgroundColor:"#0d6efd",color:"#fff",borderColor:"#0d6efd",borderBottomLeftRadius:0,borderBottomRightRadius:0,borderBottom:"none"}:$e?{backgroundColor:"#e7f3ff",color:"#0d6efd",borderColor:"#b6d4fe"}:{color:"#6c757d",backgroundColor:"#e9ecef",cursor:"not-allowed"},children:[ge.name," ",Ce?`(${Ce.ratio}%)`:""]})},_e)})}),e.jsxs("div",{className:"tab-content",style:{flex:1,overflowY:"auto",minHeight:0},children:[Xe===null&&e.jsxs("div",{className:"alert alert-info text-center py-5",children:[e.jsx("h5",{className:"mb-3",children:"     "}),e.jsx("p",{className:"mb-0 text-muted",children:"        ."})]}),hr.map((ge,_e)=>{const Ce=b.find(V=>V.gradeCriteriaCd===ge.code),$e=Xe===_e;return e.jsx("div",{className:`tab-pane fade ${$e?"show active":""}`,children:$e&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"mb-0",children:[ge.name," ",Ce?`(${Ce.ratio}%)`:""]}),e.jsx("span",{className:"badge bg-primary",children:ge.code})]})}),e.jsxs("div",{className:"card-body p-3",children:[ge.code==="ATTD"&&e.jsx("div",{children:O===null?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:" ..."})}),e.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):O==="none"?e.jsx("div",{children:I.length===0?e.jsxs("div",{className:"alert alert-warning text-center py-5",children:[e.jsx("i",{className:"bi bi-exclamation-circle fs-1 mb-3 d-block"}),e.jsx("h5",{children:"   "}),e.jsx("p",{className:"mb-0",children:"    ."}),e.jsxs("button",{className:"btn btn-primary mt-3",onClick:mr,children:[e.jsx("i",{className:"bi bi-calculator me-2"})," "]})]}):e.jsxs("div",{children:[$&&e.jsx("div",{className:"bg-light p-3 rounded mb-3",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3 flex-wrap",children:[e.jsx("strong",{className:"me-2",children:"  :"}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"small",children:""}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:$.ATTD_OK||100,disabled:!0,style:{width:"60px",backgroundColor:"#e9ecef"}})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"small",children:""}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:$.ATTD_EXCP||80,onChange:V=>{const me=parseInt(V.target.value)||0;D({...$,ATTD_EXCP:me})},style:{width:"60px"}})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"small",children:""}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:$.ATTD_LATE||50,onChange:V=>{const me=parseInt(V.target.value)||0;D({...$,ATTD_LATE:me})},style:{width:"60px"}})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"small",children:""}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:$.ATTD_EARLY||50,onChange:V=>{const me=parseInt(V.target.value)||0;D({...$,ATTD_EARLY:me})},style:{width:"60px"}})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"small",children:""}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:$.ATTD_NO||0,disabled:!0,style:{width:"60px",backgroundColor:"#e9ecef"}})]})]}),e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{G([])},children:[e.jsx("i",{className:"bi bi-arrow-clockwise me-1"}),""]})]})}),e.jsxs("div",{className:"alert alert-warning py-2 mb-3",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"+     30%   F ."]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:" "}),e.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:I.map((V,me)=>{const je=Ms.get(V.enrollId),be=je?`${je.lastName||""}${je.firstName||""}`.trim()||je.studentName:"",Ie=je?.studentNo||je?.userId||"";return e.jsxs("tr",{className:V.isFailed?"table-danger":"",children:[e.jsx("td",{className:"text-center small",children:Ie}),e.jsx("td",{className:"text-center fw-semibold",children:be||V.enrollId}),e.jsx("td",{className:"text-center",children:V.details?.ok||0}),e.jsx("td",{className:"text-center",children:V.details?.excp||0}),e.jsx("td",{className:"text-center",children:V.details?.late||0}),e.jsx("td",{className:"text-center",children:V.details?.early||0}),e.jsx("td",{className:"text-center",children:V.details?.no||0}),e.jsx("td",{className:"text-center fw-bold",children:V.details?.totalRounds||0}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:`badge ${V.isFailed?"bg-danger":"bg-primary"} fs-6 px-3 py-2`,children:V.isFailed?"F":V.score.toFixed(2)})}),e.jsx("td",{className:"text-center",children:V.isFailed&&V.reason&&e.jsx("span",{className:"badge bg-danger small",children:V.reason})})]},me)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-success",onClick:Zn,children:[e.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}):e.jsxs("div",{children:[(O==="all"||O==="partial")&&e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),O==="partial"&&e.jsxs("div",{className:"alert alert-warning mb-3",children:[e.jsx("strong",{children:"  :"}),e.jsx("div",{className:"mt-2",children:C.filter(V=>!L.has(V.enrollId)).map((V,me)=>{const je=`${V.lastName||""}${V.firstName||""}`.trim()||V.studentName,be=V.studentNo||V.userId;return e.jsxs("span",{className:"badge bg-warning text-dark me-2",children:[be," ",je]},me)})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:C.map((V,me)=>{const je=L.get(V.enrollId),be=`${V.lastName||""}${V.firstName||""}`.trim()||V.studentName,Ie=V.studentNo||V.userId;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Ie}),e.jsx("td",{className:"text-center fw-semibold",children:be}),e.jsx("td",{className:"text-center",children:je!==void 0?e.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:je.toFixed(2)}):e.jsx("span",{className:"badge bg-secondary fs-6 px-3 py-2",children:"  "})})]},me)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-warning",onClick:()=>{H("none"),G([])},children:[e.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]})}),ge.code==="EXAM"&&e.jsx("div",{children:q===null?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:" ..."})}),e.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):q==="none"?e.jsx("div",{children:X.length===0?e.jsxs("div",{className:"alert alert-warning text-center py-5",children:[e.jsx("i",{className:"bi bi-exclamation-circle fs-1 mb-3 d-block"}),e.jsx("h5",{children:"   "}),e.jsx("p",{className:"mb-0",children:"    ."}),e.jsxs("button",{className:"btn btn-primary mt-3",onClick:wn,children:[e.jsx("i",{className:"bi bi-calculator me-2"})," "]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",style:{fontSize:"0.9rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",style:{minWidth:"80px"},children:""}),e.jsx("th",{className:"text-center",style:{minWidth:"80px"},children:""}),X[0]?.details?.map((V,me)=>e.jsxs("th",{className:"text-center",style:{minWidth:"100px"},children:[V.examName,e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["(",V.weight,"%)"]})]},me)),e.jsx("th",{className:"text-center bg-light",style:{minWidth:"100px"},children:e.jsx("strong",{children:""})})]})}),e.jsx("tbody",{children:X.map((V,me)=>{const je=C.find(Ae=>Ae.enrollId===V.enrollId),be=je?`${je.lastName||""}${je.firstName||""}`.trim()||je.studentName:"",Ie=je?je.studentNo||je.userId:"";return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Ie}),e.jsx("td",{className:"text-center fw-semibold",children:be}),V.details?.map((Ae,Te)=>e.jsx("td",{className:"text-center",children:Ae.isTarget?Ae.hasSubmission?e.jsx("span",{className:"badge bg-info text-white",children:Ae.score.toFixed(2)}):e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-secondary text-white",children:""})},Te)),e.jsx("td",{className:"text-center bg-light",children:e.jsx("strong",{className:"fs-6 text-primary",style:{cursor:"help"},title:(()=>{const Ae=[];return V.details?.forEach(Te=>{if(Te.isTarget&&Te.hasSubmission){const Oe=Te.score*Te.weight/100;Ae.push(`${Te.examName}: ${Te.score}  ${Te.weight}% = ${Oe.toFixed(2)}`)}}),Ae.length>0?Ae.join(`
`):" "})(),children:V.score.toFixed(2)})})]},me)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-success",onClick:async()=>{if(X.length===0){alert("   .");return}if(confirm("   ?"))try{const V=X.map(be=>({enrollId:be.enrollId,gradeCriteriaCd:"EXAM",rawScore:be.score})),me=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(V)});if(!me.ok)throw new Error(`(${me.status})    .`);alert("   .");const je=new Map;X.forEach(be=>{je.set(be.enrollId,be.score)}),F(je),k("all"),ae([])}catch(V){console.error("   :",V),alert(V.message||"     .")}},children:[e.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}):e.jsxs("div",{children:[(q==="all"||q==="partial")&&e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),q==="partial"&&e.jsxs("div",{className:"alert alert-warning mb-3",children:[e.jsx("strong",{children:"  :"}),e.jsx("div",{className:"mt-2",children:C.filter(V=>!B.has(V.enrollId)).map((V,me)=>{const je=`${V.lastName||""}${V.firstName||""}`.trim()||V.studentName,be=V.studentNo||V.userId;return e.jsxs("span",{className:"badge bg-warning text-dark me-2",children:[be," ",je]},me)})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:C.map((V,me)=>{const je=B.get(V.enrollId),be=`${V.lastName||""}${V.firstName||""}`.trim()||V.studentName,Ie=V.studentNo||V.userId;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Ie}),e.jsx("td",{className:"text-center fw-semibold",children:be}),e.jsx("td",{className:"text-center",children:je!==void 0?e.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:je.toFixed(2)}):e.jsx("span",{className:"badge bg-secondary fs-6 px-3 py-2",children:"  "})})]},me)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-warning",onClick:async()=>{k("none"),await wn()},children:[e.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]})}),ge.code==="TASK"&&e.jsx("div",{children:z===null?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:" ..."})}),e.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):z==="none"?e.jsx("div",{children:w.length===0?e.jsxs("div",{className:"alert alert-warning text-center py-5",children:[e.jsx("i",{className:"bi bi-exclamation-circle fs-1 mb-3 d-block"}),e.jsx("h5",{children:"   "}),e.jsx("p",{className:"mb-0",children:"    ."}),e.jsxs("button",{className:"btn btn-primary mt-3",onClick:Sn,children:[e.jsx("i",{className:"bi bi-calculator me-2"})," "]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",style:{fontSize:"0.9rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",style:{minWidth:"80px"},children:""}),e.jsx("th",{className:"text-center",style:{minWidth:"80px"},children:""}),w[0]?.details?.indivTasks?.map((V,me)=>e.jsxs("th",{className:"text-center",style:{minWidth:"100px"},children:[V.taskName,e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["(",V.weight,"%)"]})]},`indiv-${me}`)),w[0]?.details?.groupTasks?.map((V,me)=>e.jsxs("th",{className:"text-center",style:{minWidth:"100px"},children:[V.taskName,e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["(",V.weight,"%)"]})]},`group-${me}`)),e.jsx("th",{className:"text-center bg-light",style:{minWidth:"100px"},children:e.jsx("strong",{children:""})})]})}),e.jsx("tbody",{children:w.map((V,me)=>{const je=C.find(Ae=>Ae.enrollId===V.enrollId),be=je?`${je.lastName||""}${je.firstName||""}`.trim()||je.studentName:"",Ie=je?je.studentNo||je.userId:"";return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Ie}),e.jsx("td",{className:"text-center fw-semibold",children:be}),V.details?.indivTasks?.map((Ae,Te)=>e.jsx("td",{className:"text-center",children:Ae.isTarget?Ae.hasSubmission?e.jsx("span",{className:"badge bg-info text-white",children:Ae.score.toFixed(2)}):e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-secondary text-white",children:""})},`indiv-${Te}`)),V.details?.groupTasks?.map((Ae,Te)=>e.jsx("td",{className:"text-center",children:Ae.isTarget?Ae.hasSubmission?e.jsx("span",{className:"badge bg-info text-white",children:Ae.score.toFixed(2)}):e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-secondary text-white",children:""})},`group-${Te}`)),e.jsx("td",{className:"text-center bg-light",children:e.jsx("strong",{className:"fs-6 text-primary",style:{cursor:"help"},title:(()=>{const Ae=[];return V.details?.indivTasks?.forEach(Te=>{if(Te.isTarget&&Te.hasSubmission){const Oe=Te.score*Te.weight/100;Ae.push(`${Te.taskName}: ${Te.score}  ${Te.weight}% = ${Oe.toFixed(2)}`)}}),V.details?.groupTasks?.forEach(Te=>{if(Te.isTarget&&Te.hasSubmission){const Oe=Te.score*Te.weight/100;Ae.push(`${Te.taskName}: ${Te.score}  ${Te.weight}% = ${Oe.toFixed(2)}`)}}),Ae.length>0?Ae.join(`
`):" "})(),children:V.score.toFixed(2)})})]},me)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-success",onClick:async()=>{if(w.length===0){alert("   .");return}if(confirm("   ?"))try{const V=w.map(be=>({enrollId:be.enrollId,gradeCriteriaCd:"TASK",rawScore:be.score})),me=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(V)});if(!me.ok)throw new Error(`(${me.status})    .`);alert("   .");const je=new Map;w.forEach(be=>{je.set(be.enrollId,be.score)}),Z(je),W("all"),M([])}catch(V){console.error("   :",V),alert(V.message||"     .")}},children:[e.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}):e.jsxs("div",{children:[(z==="all"||z==="partial")&&e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),z==="partial"&&e.jsxs("div",{className:"alert alert-warning mb-3",children:[e.jsx("strong",{children:"  :"}),e.jsx("div",{className:"mt-2",children:C.filter(V=>!U.has(V.enrollId)).map((V,me)=>{const je=`${V.lastName||""}${V.firstName||""}`.trim()||V.studentName,be=V.studentNo||V.userId;return e.jsxs("span",{className:"badge bg-warning text-dark me-2",children:[be," ",je]},me)})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:C.map((V,me)=>{const je=U.get(V.enrollId),be=`${V.lastName||""}${V.firstName||""}`.trim()||V.studentName,Ie=V.studentNo||V.userId;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Ie}),e.jsx("td",{className:"text-center fw-semibold",children:be}),e.jsx("td",{className:"text-center",children:je!==void 0?e.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:je.toFixed(2)}):e.jsx("span",{className:"badge bg-secondary fs-6 px-3 py-2",children:"  "})})]},me)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-warning",onClick:async()=>{W("none"),await Sn()},children:[e.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]})}),ge.code==="PRAC"&&e.jsx("div",{children:K===null?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:" ..."})}),e.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):K==="all"?e.jsxs("div",{children:[e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:C.map((V,me)=>{const je=Y.get(V.enrollId),be=`${V.lastName||""}${V.firstName||""}`.trim()||V.studentName,Ie=V.studentNo||V.userId;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Ie}),e.jsx("td",{className:"text-center fw-semibold",children:be}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:je.toFixed(2)})})]},me)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-warning",onClick:()=>{const V={};Y.forEach((me,je)=>{V[je]=me}),ke(V),le("none")},children:[e.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]}):e.jsxs("div",{children:[K==="partial"&&e.jsxs("div",{className:"alert alert-warning mb-3",children:[e.jsx("strong",{children:"    ."}),"       ."]}),e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"      . (0-100)"]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",style:{width:"150px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"150px"},children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:C.map((V,me)=>{const je=`${V.lastName||""}${V.firstName||""}`.trim()||V.studentName,be=V.studentNo||V.userId,Ie=ve[V.enrollId]??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:be}),e.jsx("td",{className:"text-center fw-semibold",children:je}),e.jsx("td",{className:"text-center",children:e.jsx("input",{type:"number",className:"form-control text-center",placeholder:"0-100",min:"0",max:"100",step:"0.01",value:Ie,onChange:Ae=>{const Te=Ae.target.value;ke(Oe=>({...Oe,[V.enrollId]:Te}))},style:{maxWidth:"120px",margin:"0 auto"}})})]},me)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-success",onClick:async()=>{if(Object.keys(ve).length===0){alert("   .");return}if(confirm("   ?"))try{const V=C.map(be=>({enrollId:be.enrollId,gradeCriteriaCd:"PRAC",rawScore:parseFloat(ve[be.enrollId]||0)})),me=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(V)});if(!me.ok)throw new Error(`(${me.status})    .`);alert("   .");const je=new Map;V.forEach(be=>{je.set(be.enrollId,be.rawScore)}),te(je),le("all"),ke({})}catch(V){console.error("   :",V),alert(V.message||"     .")}},children:[e.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}),ge.code==="MISC"&&e.jsx("div",{children:Se===null?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:" ..."})}),e.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):Se==="all"?e.jsxs("div",{children:[e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:C.map((V,me)=>{const je=J.get(V.enrollId),be=`${V.lastName||""}${V.firstName||""}`.trim()||V.studentName,Ie=V.studentNo||V.userId;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Ie}),e.jsx("td",{className:"text-center fw-semibold",children:be}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:je.toFixed(2)})})]},me)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-warning",onClick:()=>{const V={};J.forEach((me,je)=>{V[je]=me}),he(V),Me("none")},children:[e.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]}):e.jsxs("div",{children:[Se==="partial"&&e.jsxs("div",{className:"alert alert-warning mb-3",children:[e.jsx("strong",{children:"    ."}),"       ."]}),e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"      . (0-100)"]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",style:{width:"150px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"150px"},children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:C.map((V,me)=>{const je=`${V.lastName||""}${V.firstName||""}`.trim()||V.studentName,be=V.studentNo||V.userId,Ie=re[V.enrollId]??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:be}),e.jsx("td",{className:"text-center fw-semibold",children:je}),e.jsx("td",{className:"text-center",children:e.jsx("input",{type:"number",className:"form-control text-center",placeholder:"0-100",min:"0",max:"100",step:"0.01",value:Ie,onChange:Ae=>{const Te=Ae.target.value;he(Oe=>({...Oe,[V.enrollId]:Te}))},style:{maxWidth:"120px",margin:"0 auto"}})})]},me)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-success",onClick:async()=>{if(Object.keys(re).length===0){alert("   .");return}if(confirm("   ?"))try{const V=C.map(be=>({enrollId:be.enrollId,gradeCriteriaCd:"MISC",rawScore:parseFloat(re[be.enrollId]||0)})),me=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(V)});if(!me.ok)throw new Error(`(${me.status})    .`);alert("   .");const je=new Map;V.forEach(be=>{je.set(be.enrollId,be.rawScore)}),ue(je),Me("all"),he({})}catch(V){console.error("   :",V),alert(V.message||"     .")}},children:[e.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}),ge.code==="TOTAL"&&e.jsxs("div",{children:[He.length===0&&e.jsx("div",{className:"table-responsive mb-4",children:e.jsxs("table",{className:"table table-bordered align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",style:{width:"150px"},children:" "}),e.jsx("th",{className:"text-center",style:{width:"100px"},children:" "}),e.jsx("th",{className:"text-center",style:{width:"120px"},children:"  "}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-center fw-semibold",children:""}),e.jsxs("td",{className:"text-center",children:[b.find(V=>V.gradeCriteriaCd==="ATTD")?.ratio||0,"%"]}),e.jsx("td",{className:"text-center",children:O===null?e.jsx("span",{className:"badge bg-secondary",children:"..."}):O==="all"?e.jsx("span",{className:"badge bg-success",children:""}):O==="partial"?e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-danger",children:" "})}),e.jsxs("td",{className:"small",children:[O==="all"&&"    .",O==="partial"&&"    .",O==="none"&&"   ."]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-center fw-semibold",children:""}),e.jsxs("td",{className:"text-center",children:[b.find(V=>V.gradeCriteriaCd==="TASK")?.ratio||0,"%"]}),e.jsx("td",{className:"text-center",children:z===null?e.jsx("span",{className:"badge bg-secondary",children:"..."}):z==="all"?e.jsx("span",{className:"badge bg-success",children:""}):z==="partial"?e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-danger",children:" "})}),e.jsxs("td",{className:"small",children:[z==="all"&&"    .",z==="partial"&&"    .",z==="none"&&"   ."]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-center fw-semibold",children:""}),e.jsxs("td",{className:"text-center",children:[b.find(V=>V.gradeCriteriaCd==="EXAM")?.ratio||0,"%"]}),e.jsx("td",{className:"text-center",children:q===null?e.jsx("span",{className:"badge bg-secondary",children:"..."}):q==="all"?e.jsx("span",{className:"badge bg-success",children:""}):q==="partial"?e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-danger",children:" "})}),e.jsxs("td",{className:"small",children:[q==="all"&&"    .",q==="partial"&&"    .",q==="none"&&"   ."]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-center fw-semibold",children:""}),e.jsxs("td",{className:"text-center",children:[b.find(V=>V.gradeCriteriaCd==="PRAC")?.ratio||0,"%"]}),e.jsx("td",{className:"text-center",children:K===null?e.jsx("span",{className:"badge bg-secondary",children:"..."}):K==="all"?e.jsx("span",{className:"badge bg-success",children:""}):K==="partial"?e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-danger",children:" "})}),e.jsxs("td",{className:"small",children:[K==="all"&&"    .",K==="partial"&&"    .",K==="none"&&"   ."]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-center fw-semibold",children:""}),e.jsxs("td",{className:"text-center",children:[b.find(V=>V.gradeCriteriaCd==="MISC")?.ratio||0,"%"]}),e.jsx("td",{className:"text-center",children:Se===null?e.jsx("span",{className:"badge bg-secondary",children:"..."}):Se==="all"?e.jsx("span",{className:"badge bg-success",children:""}):Se==="partial"?e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-danger",children:" "})}),e.jsxs("td",{className:"small",children:[Se==="all"&&"    .",Se==="partial"&&"    .",Se==="none"&&"   ."]})]})]})]})}),He.length===0&&(()=>{const V=b.filter(be=>be.ratio>0),me={ATTD:O,TASK:z,EXAM:q,PRAC:K,MISC:Se},je=V.every(be=>me[be.gradeCriteriaCd]==="all");return V.some(be=>me[be.gradeCriteriaCd]==="partial"),V.some(be=>me[be.gradeCriteriaCd]==="none"),e.jsx("div",{className:"mb-4",children:je?e.jsxs("div",{className:"alert alert-success",children:[e.jsx("i",{className:"bi bi-check-circle-fill me-2"}),e.jsx("strong",{children:"   !"}),"     ."]}):e.jsxs("div",{className:"alert alert-warning",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),e.jsx("strong",{children:"   ."}),"        ."]})})})(),He.length===0&&e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{className:"btn btn-success btn-lg",onClick:Qn,disabled:(()=>{const V=b.filter(be=>be.ratio>0),me={ATTD:O,TASK:z,EXAM:q,PRAC:K,MISC:Se};return!V.every(be=>me[be.gradeCriteriaCd]==="all")||es})(),children:es?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"})," ..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-calculator me-2"}),"   "]})})}),ts&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:ts.message||String(ts)}),He.length>0?e.jsxs("div",{className:"mt-4",children:[e.jsx("h6",{className:"fw-semibold mb-3",children:"  "}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",style:{fontSize:"0.9rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-success",children:[e.jsx("th",{className:"text-center",style:{minWidth:"90px"},children:""}),e.jsx("th",{className:"text-center",style:{minWidth:"90px"},children:""}),Ns.map(V=>e.jsxs("th",{className:"text-center",style:{minWidth:"120px"},children:[V.label,e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["(",V.ratio,"%)"]})]},V.code)),e.jsx("th",{className:"text-center bg-light",style:{minWidth:"120px"},children:e.jsx("strong",{children:""})})]})}),e.jsx("tbody",{children:He.map(V=>{const me=Ms.get(V.enrollId),je=me&&(`${me.lastName||""}${me.firstName||""}`.trim()||me.studentName)||"-",be=me&&(me.studentNo||me.userId)||"-",Ie=V.hasMissing??V.breakdown.some(Ae=>Ae.rawScore===null||Ae.rawScore===void 0);return e.jsxs("tr",{className:Ie?"table-warning":"",children:[e.jsx("td",{className:"text-center",children:be}),e.jsx("td",{className:"text-center fw-semibold",children:je}),V.breakdown.map(Ae=>{const Te=Ae.rawScore!==null&&Ae.rawScore!==void 0,Oe=typeof Ae.weightedScore=="number"?Ae.weightedScore:0;return e.jsx("td",{className:"text-center",children:Te?e.jsxs("div",{className:"d-flex flex-column align-items-center gap-1",children:[e.jsx("span",{className:"badge bg-primary-subtle text-primary border border-primary-subtle",children:Ae.rawScore.toFixed(2)}),e.jsxs("small",{className:"text-muted",children:[" ",Ae.ratio,"% = ",Oe.toFixed(2)]})]}):e.jsx("span",{className:"badge bg-warning text-dark",children:""})},Ae.code)}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:`badge ${Ie?"bg-warning text-dark":"bg-success text-white"} fs-6`,children:V.totalScore.toFixed(2)})})]},V.enrollId)})})]})})]}):!es&&e.jsx("div",{className:"text-muted mt-3",children:"     ."})]})]})]})},_e)})]})]})}):we===2?e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:[(console.log("=== modalStep 2   ==="),console.log("totalScorePreview:",He),console.log("totalScorePreview.length:",He.length),console.log("studentMap:",Ms),console.log("studentMap.size:",Ms?.size),console.log("lectureInfo:",N),console.log("evaluateInterval:",A),null),!N||N.subjectTypeCd!=="SUBJ_RELATIVE"?e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),e.jsx("strong",{children:" "}),e.jsxs("p",{className:"mb-0 mt-2",children:[N?.subjectTypeCd==="SUBJ_ABSOLUTE"&&"",N?.subjectTypeCd==="SUBJ_PASSFAIL"&&"PASS or FAIL",!N&&"  "]})]}):e.jsxs("div",{children:[e.jsx("h5",{className:"mb-4",children:"   ()"}),He.length===0?e.jsxs("div",{className:"alert alert-warning",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),e.jsx("strong",{children:"  "}),e.jsx("p",{className:"mb-0 mt-2",children:'   ""  "   "   .'})]}):(()=>{console.log("===     ==="),console.log("totalScorePreview :",He);const ge=He.map(Ee=>{const Fe=Ms.get(Ee.enrollId);console.log(`enrollId ${Ee.enrollId}:`,Fe);const De=Fe&&(`${Fe.lastName||""}${Fe.firstName||""}`.trim()||Fe.studentName)||"-",ze=Fe&&(Fe.studentNo||Fe.userId)||"-",Qe=Ee.breakdown.find(Yt=>Yt.code==="ATTD")?.rawScore||0,Rt={enrollId:Ee.enrollId,studentNo:ze,name:De,totalScore:Ee.totalScore,attendanceScore:Qe,isFail:Qe===0};return console.log("  :",Rt),Rt});console.log("studentsWithGrades:",ge);const _e=ge.filter(Ee=>Ee.isFail),Ce=ge.filter(Ee=>!Ee.isFail);console.log("failStudents:",_e),console.log("regularStudents:",Ce),Ce.sort((Ee,Fe)=>Fe.totalScore-Ee.totalScore),console.log("  regularStudents:",Ce);const $e=Math.round(N.currentCap*(A?.A||0)/100),V=Math.round(N.currentCap*(A?.B||0)/100);console.log("  :",{currentCap:N.currentCap,evaluateInterval:A,aCount:$e,bCount:V});const me=Ce.map((Ee,Fe)=>{let De="C~D";return Fe<$e?De="A":Fe<$e+V&&(De="B"),{...Ee,interval:De,rank:Fe+1}}),je=me.filter(Ee=>Ee.interval==="A"),be=me.filter(Ee=>Ee.interval==="B"),Ie=me.filter(Ee=>Ee.interval==="C~D");console.log("  :",{aStudents:je,bStudents:be,cdStudents:Ie});const Ae={A:xt.A!==null?xt.A:Math.floor(je.length/2),B:xt.B!==null?xt.B:Math.floor(be.length/2),CD:xt.CD.length>0?xt.CD:[Math.floor(Ie.length/4),Math.floor(Ie.length/2),Math.floor(Ie.length*3/4)]},Te=(Ee,Fe,De)=>{if(De==="A")return Fe<=(Ae.A||0)?"A+":"A0";if(De==="B")return Fe<=(Ae.B||0)?"B+":"B0";if(De==="C~D"){const ze=Ae.CD||[];return Fe<=(ze[0]||0)?"C+":Fe<=(ze[1]||0)?"C0":Fe<=(ze[2]||0)?"D+":"D0"}return De},Oe=(Ee,Fe,De,ze)=>{const et=(st,yt)=>Ze=>{Ze.dataTransfer.effectAllowed="move",ha({interval:yt,originalIdx:st})},Qe=st=>{st.preventDefault(),st.dataTransfer.dropEffect="move"},Rt=st=>yt=>{if(yt.preventDefault(),!Fa)return;const{interval:Ze,originalIdx:Ws}=Fa;if(ze==="A"&&Ze==="A")Kn(ss=>({...ss,A:st}));else if(ze==="B"&&Ze==="B")Kn(ss=>({...ss,B:st}));else if(ze==="C~D"&&Ze==="C~D"){const ss=Ae.CD.indexOf(Ws);if(ss!==-1){const pr=[...Ae.CD];pr[ss]=st,Kn(sl=>({...sl,CD:pr.sort((al,Ks)=>al-Ks)}))}}ha(null)},Yt=()=>{ha(null)};return e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"fw-semibold mb-2",children:[Fe," (",Ee.length,")"]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered table-hover mb-0",style:{fontSize:"0.85rem"},children:[e.jsx("thead",{className:De,children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",style:{width:"60px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""})]})}),e.jsx("tbody",{children:Ee.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center text-muted py-3",children:"   ."})}):e.jsx(e.Fragment,{children:Ee.map((st,yt)=>{const Ze=Te(st,yt,ze),Ws=ze==="A"&&yt===Ae.A||ze==="B"&&yt===Ae.B||ze==="C~D"&&Ae.CD.includes(yt);return e.jsx(qs.Fragment,{children:e.jsxs("tr",{style:{position:"relative",borderBottom:Ws?"3px solid #dc3545":void 0},onDragOver:Qe,onDrop:Rt(yt),children:[e.jsx("td",{className:"text-center",children:st.rank||"-"}),e.jsx("td",{className:"text-center",children:st.studentNo}),e.jsx("td",{className:"text-center",children:st.name}),e.jsxs("td",{className:"text-center",style:{position:"relative"},children:[st.totalScore.toFixed(2),Ws&&e.jsx("div",{draggable:!0,onDragStart:et(yt,ze),onDragEnd:Yt,style:{position:"absolute",right:"-12px",top:"50%",transform:"translateY(-50%)",width:"24px",height:"24px",borderRadius:"50%",padding:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",lineHeight:1,border:"2px solid white",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",backgroundColor:"#dc3545",color:"white",cursor:"grab",userSelect:"none",zIndex:100},onMouseDown:ss=>ss.currentTarget.style.cursor="grabbing",onMouseUp:ss=>ss.currentTarget.style.cursor="grab",children:""})]}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:`badge ${Ze.startsWith("A")?"bg-success":Ze.startsWith("B")?"bg-primary":Ze.startsWith("C")||Ze.startsWith("D")?"bg-info":"bg-danger"}`,children:Ze})})]})},st.enrollId)})})})]})})]})};return e.jsxs("div",{children:[_e.length>0&&e.jsxs("div",{className:"mb-4 p-3 bg-danger bg-opacity-10 border border-danger rounded",children:[e.jsxs("h6",{className:"fw-semibold mb-2 text-danger",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"F  ( 0) (",_e.length,")"]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered table-hover mb-0",style:{fontSize:"0.85rem"},children:[e.jsx("thead",{className:"table-danger",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""})]})}),e.jsx("tbody",{children:_e.map(Ee=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Ee.studentNo}),e.jsx("td",{className:"text-center",children:Ee.name}),e.jsx("td",{className:"text-center",children:Ee.totalScore.toFixed(2)}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:"badge bg-danger",children:"F"})})]},Ee.enrollId))})]})})]}),e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("div",{className:"fw-semibold mb-2",children:"   "}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("span",{children:["A: ",je.length,""]}),e.jsxs("span",{children:["B: ",be.length,""]}),e.jsxs("span",{children:["C~D: ",Ie.length,""]}),_e.length>0&&e.jsxs("span",{className:"text-danger",children:["F: ",_e.length,""]})]})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:Oe(je,"A ","table-success","A")}),e.jsx("div",{className:"col-md-4",children:Oe(be,"B ","table-primary","B")}),e.jsx("div",{className:"col-md-4",children:Oe(Ie,"C~D ","table-info","C~D")})]})]})})()]})]})}):e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:[e.jsx("h5",{className:"mb-4",children:"   "}),e.jsxs("div",{className:"card mb-3",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsx("h6",{className:"mb-0",children:"  "})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:" :"})," ",N?.subjectTypeName||"-"]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:" :"})," ",N?.currentCap||0,""]})]})})]}),e.jsxs("div",{className:"card mb-3",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsx("h6",{className:"mb-0",children:"  "})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"d-flex gap-3 flex-wrap",children:b.filter(ge=>ge.ratio>0).map(ge=>e.jsxs("div",{className:"badge bg-primary fs-6",children:[ge.gradeCriteriaName,": ",ge.ratio,"%"]},ge.gradeCriteriaCd))})})]}),N?.subjectTypeCd==="SUBJ_RELATIVE"&&A&&e.jsxs("div",{className:"card mb-3",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsx("h6",{className:"mb-0",children:"  "})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("span",{className:"badge bg-success fs-6",children:["A : ",A.A||0,"%"]}),e.jsxs("span",{className:"badge bg-primary fs-6",children:["B : ",A.B||0,"%"]}),e.jsxs("span",{className:"badge bg-info fs-6",children:["C~D : ",100-(A.A||0)-(A.B||0),"%"]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsx("h6",{className:"mb-0",children:"   ( )"})}),e.jsx("div",{className:"card-body",children:(()=>{if(He.length===0)return e.jsx("div",{className:"alert alert-warning",children:"  .     ."});const ge=He.map(V=>{const me=Ms.get(V.enrollId),je=me&&(`${me.lastName||""}${me.firstName||""}`.trim()||me.studentName)||"-",be=me&&(me.studentNo||me.userId)||"-",Te=(V.breakdown.find(Ee=>Ee.code==="ATTD")?.rawScore||0)===0;let Oe="-";if(Te)Oe="F";else if(N?.subjectTypeCd==="SUBJ_RELATIVE"){const Ee=He.map(De=>{const ze=De.breakdown.find(et=>et.code==="ATTD");return{enrollId:De.enrollId,totalScore:De.totalScore,isFail:(ze?.rawScore||0)===0}}).filter(De=>!De.isFail).sort((De,ze)=>ze.totalScore-De.totalScore),Fe=Ee.findIndex(De=>De.enrollId===V.enrollId);if(Fe!==-1){const De=Math.round(N.currentCap*(A?.A||0)/100),ze=Math.round(N.currentCap*(A?.B||0)/100);let et="C~D";Fe<De?et="A":Fe<De+ze&&(et="B");const Qe={A:xt.A!==null?xt.A:Math.floor(De/2),B:xt.B!==null?xt.B:Math.floor(ze/2),CD:xt.CD.length>0?xt.CD:[Math.floor((N.currentCap-De-ze)/4),Math.floor((N.currentCap-De-ze)/2),Math.floor((N.currentCap-De-ze)*3/4)]};if(et==="A")Oe=Ee.slice(0,De).findIndex(st=>st.enrollId===V.enrollId)<=Qe.A?"A+":"A0";else if(et==="B")Oe=Ee.slice(De,De+ze).findIndex(st=>st.enrollId===V.enrollId)<=Qe.B?"B+":"B0";else{const Yt=Ee.slice(De+ze).findIndex(yt=>yt.enrollId===V.enrollId),st=Qe.CD;Yt<=(st[0]||0)?Oe="C+":Yt<=(st[1]||0)?Oe="C0":Yt<=(st[2]||0)?Oe="D+":Oe="D0"}}}return{enrollId:V.enrollId,studentNo:be,name:je,totalScore:V.totalScore,finalGrade:Oe,isFail:Te,breakdown:V.breakdown}}),_e=ge.filter(V=>V.isFail),$e=[...ge.filter(V=>!V.isFail),..._e];return e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-hover align-middle mb-0",style:{fontSize:"0.9rem"},children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",style:{width:"60px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),Ns.map(V=>e.jsxs("th",{className:"text-center",style:{width:"80px"},children:[V.label,e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["(",V.ratio,"%)"]})]},V.code)),e.jsx("th",{className:"text-center bg-light",style:{width:"80px"},children:e.jsx("strong",{children:""})}),e.jsx("th",{className:"text-center bg-success bg-opacity-10",style:{width:"80px"},children:e.jsx("strong",{children:""})})]})}),e.jsx("tbody",{children:$e.map((V,me)=>e.jsxs("tr",{className:V.isFail?"table-danger":"",children:[e.jsx("td",{className:"text-center",children:me+1}),e.jsx("td",{className:"text-center",children:V.studentNo}),e.jsx("td",{className:"text-center",children:V.name}),V.breakdown.map(je=>e.jsx("td",{className:"text-center",children:je.rawScore!==null&&je.rawScore!==void 0?je.rawScore.toFixed(1):"-"},je.code)),e.jsx("td",{className:"text-center bg-light",children:e.jsx("strong",{children:V.totalScore.toFixed(2)})}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:`badge fs-6 ${V.finalGrade.startsWith("A")?"bg-success":V.finalGrade.startsWith("B")?"bg-primary":V.finalGrade.startsWith("C")||V.finalGrade.startsWith("D")?"bg-info":V.finalGrade==="F"?"bg-danger":"bg-secondary"}`,children:V.finalGrade})})]},V.enrollId))})]})})})()})]})]})})]}),e.jsxs("div",{className:"modal-footer py-2",children:[we>1&&e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>Ye(we-1),children:" "}),e.jsx("div",{className:"ms-auto",children:we<3?e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>Ye(we+1),disabled:we===1&&(()=>{const ge=b.filter($e=>$e.ratio>0),_e={ATTD:O,TASK:z,EXAM:q,PRAC:K,MISC:Se};return!ge.every($e=>_e[$e.gradeCriteriaCd]==="all")||He.length===0})(),children:" "}):e.jsx("button",{type:"button",className:"btn btn-success btn-sm",onClick:ma,children:""})})]})]})})})]})}const Wb=["ATTD","TASK","EXAM","PRAC","MISC"],Kb={ATTD:"",TASK:"",EXAM:"",PRAC:"",MISC:""},L2=new Intl.NumberFormat("ko-KR",{minimumFractionDigits:0,maximumFractionDigits:2});function fh(a){return typeof a!="number"||Number.isNaN(a)?"-":L2.format(a)}const z2=[{code:"P",label:"P"},{code:"NP",label:"NP"}],rv=[{code:"A+",label:"A+(4.5)",score:4.5},{code:"A0",label:"A0(4.0)",score:4},{code:"B+",label:"B+(3.5)",score:3.5},{code:"B0",label:"B0(3.0)",score:3},{code:"C+",label:"C+(2.5)",score:2.5},{code:"C0",label:"C0(2.0)",score:2},{code:"D+",label:"D+(1.5)",score:1.5},{code:"D0",label:"D0(1.0)",score:1},{code:"F",label:"F(0.0)",score:0}],Qb=rv.reduce((a,s)=>(a[s.code]=s.score,a),{});function U2(){const{lectureId:a}=dt(),{students:s,lecture:l}=Jt(),[i,c]=x.useState([]),[d,u]=x.useState([]),[h,f]=x.useState(!0),[g,b]=x.useState(null),[y,v]=x.useState(""),[S,N]=x.useState(0),[E,A]=x.useState(null),[T,$]=x.useState(!1),[D,I]=x.useState(null),[G,L]=x.useState(!1);x.useEffect(()=>{let Y=!0;return a?((async()=>{try{f(!0),b(null);const te=`/classroom/api/v1/professor/${encodeURIComponent(a)}`,[K,le]=await Promise.all([fetch(`${te}/finalize/score`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/common/${encodeURIComponent(a)}/ratio`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!K.ok)throw new Error(`(${K.status})     .`);if(!le.ok)throw new Error(`(${le.status})      .`);const[ve,ke]=await Promise.all([K.json(),le.json()]);if(!Y)return;const J=Array.isArray(ve)?ve.slice().sort((ue,Se)=>String(ue?.enrollId??"").localeCompare(String(Se?.enrollId??""))):[];c(J),u(Array.isArray(ke)?ke:[])}catch(te){if(!Y)return;b(te),c([]),u([])}finally{Y&&f(!1)}})(),()=>{Y=!1}):(c([]),u([]),f(!1),()=>{Y=!1})},[a,S]),x.useEffect(()=>{if(!E)return;const Y=te=>{te.key==="Escape"&&(te.preventDefault(),T||(A(null),I(null)))};return document.addEventListener("keydown",Y),()=>{document.removeEventListener("keydown",Y)}},[E,T]);const _=x.useMemo(()=>{const Y=new Map;return Array.isArray(s)&&s.forEach(te=>{if(!te)return;const K=te.enrollId!=null?String(te.enrollId):null;K&&Y.set(K,te)}),Y},[s]),O=x.useMemo(()=>{if(!Array.isArray(d))return[];const Y=new Map(Wb.map((te,K)=>[te,K]));return d.map(te=>{const K=te?.gradeCriteriaCd,le=Number(te?.ratio??0),ve=te?.gradeCriteriaName||Kb[K]||K||"",ke=Y.has(K)?Y.get(K):Wb.length;return{code:K,label:ve,ratio:le,weight:ke}}).filter(te=>te.code).sort((te,K)=>te.weight-K.weight||te.label.localeCompare(K.label))},[d]),H=x.useMemo(()=>{const Y=new Set(O.map(le=>le.code)),te=new Set;i.forEach(le=>{le?.sectionScores&&le.sectionScores.forEach(ve=>{if(!ve?.gradeCriteriaCd)return;const ke=ve.gradeCriteriaCd;Y.has(ke)||te.add(ke)})});const K=Array.from(te).sort((le,ve)=>le.localeCompare(ve)).map(le=>({code:le,label:Kb[le]||le,ratio:null}));return[...O,...K]},[O,i]),C=x.useMemo(()=>O.reduce((Y,te)=>Y+(Number.isFinite(te.ratio)?te.ratio:0),0),[O]),P=x.useMemo(()=>i.map(Y=>{const te=Y?.enrollId!=null?String(Y.enrollId):"",K=te?_.get(te):null,le=K?.studentNo||K?.userId||"-",ve=K?[K.lastName,K.firstName].filter(Boolean).join("")||K.studentName||K.userName||K.name||"":Y?.studentName||"",ke=ve?`${ve}(${le})`:le,J=K?.univDeptName||"",ue=K?.gradeName||"",Se={};Array.isArray(Y?.sectionScores)&&Y.sectionScores.forEach(fe=>{const Le=fe?.gradeCriteriaCd;Le&&(Se[Le]=typeof fe.rawScore=="number"?fe.rawScore:null)});const Me=typeof Y?.autoGrade=="number"?Y.autoGrade:null,re=typeof Y?.finalGrade=="number"?Y.finalGrade:null,Re=(Y?.changeReason||"").trim(),Be=Re.length>0||re!=null&&(Me==null||Math.abs(re-Me)>Number.EPSILON*10);return{enrollId:te,displayName:ke,studentNo:le,department:J,grade:ue,gpaCd:Y?.gpaCd||"",autoGrade:Me,finalGrade:re,changeReason:Re,sections:Se,changed:Be}}),[i,_]),U=x.useMemo(()=>{const Y=y.trim().toLowerCase();return Y?P.filter(te=>te.displayName.toLowerCase().includes(Y)||te.studentNo.toLowerCase().includes(Y)||te.enrollId.toLowerCase().includes(Y)):P},[P,y]),Z=Y=>{v(Y.target.value)},z=async()=>{if(!(!a||G||!window.confirm("  ?     .")))try{L(!0);const te=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/finalize`,{method:"PUT",credentials:"include"});if(te.status===204){const ke=`/classroom/professor/${encodeURIComponent(a)}`;window.location.assign(ke);return}const K=`(${te.status})    .`,le=await te.text().catch(()=>""),ve=le?.trim()?le.trim():K;window.alert(ve)}catch(te){const K=te?.message||"      .";window.alert(K)}finally{L(!1)}},W=C===100?"badge bg-success":"badge bg-warning text-dark",w=l?.subjectTypeCd==="SUBJ_PASSFAIL",M=Y=>{const te=l?.subjectTypeCd==="SUBJ_PASSFAIL";A({enrollId:Y.enrollId,name:Y.displayName,selected:Y.gpaCd||"",reason:Y.changeReason||"",passFail:te,autoGrade:Y.autoGrade}),I(null)},B=()=>{T||(A(null),I(null))},F=Y=>{A(te=>te&&{...te,selected:Y})},q=Y=>{const{value:te}=Y.target;A(K=>K&&{...K,reason:te})},k=async()=>{if(!E||!a)return;const Y=E.reason.trim();if(!E.selected){window.alert("   .");return}if(!Y){window.alert("    .");return}try{$(!0),I(null);const te=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/finalize/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({enrollId:E.enrollId,gpaCd:E.selected,changeReason:Y})});if(!te.ok){let K=`(${te.status})    .`;try{const le=await te.json();le&&typeof le.message=="string"&&le.message.trim().length>0&&(K=le.message)}catch{}throw new Error(K)}c(K=>K.map(le=>{if(String(le.enrollId)!==String(E.enrollId))return le;const ve={...le,gpaCd:E.selected,changeReason:Y};return!E.passFail&&Object.prototype.hasOwnProperty.call(Qb,E.selected)&&(ve.finalGrade=Qb[E.selected]),ve})),A(null),I(null),N(K=>K+1)}catch(te){I(te?.message||String(te));return}finally{$(!1)}},X=()=>{if(!E)return null;const Y=E.passFail?z2:rv,te=E.selected;return e.jsx("div",{role:"dialog","aria-modal":"true",className:"position-fixed top-0 start-0 end-0 bottom-0 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(0, 0, 0, 0.45)",zIndex:1050,padding:"1rem"},onClick:K=>{K.target===K.currentTarget&&B()},children:e.jsxs("div",{className:"card shadow-lg w-100",style:{maxWidth:480},onClick:K=>K.stopPropagation(),children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsxs("h2",{className:"h6 mb-0",children:[E.name,"  "]}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"",onClick:B,disabled:T})]}),e.jsxs("div",{className:"card-body d-flex flex-column gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted small mb-2",children:"  ."}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:Y.map(K=>e.jsx("button",{type:"button",className:`btn btn-sm ${te===K.code?"btn-primary":"btn-outline-primary"}`,onClick:()=>F(K.code),disabled:T,children:K.label},K.code))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"finalize-change-reason",className:"form-label small text-muted",children:" "}),e.jsx("textarea",{id:"finalize-change-reason",className:"form-control",rows:3,value:E.reason,onChange:q,placeholder:"  .",disabled:T})]}),D?e.jsx("div",{className:"alert alert-danger small mb-0",role:"alert",children:D}):null]}),e.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:B,disabled:T,children:""}),e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:k,disabled:T,children:T?" ...":" "})]})]})})},ae=()=>{if(h)return e.jsx("div",{className:"card shadow-sm",children:e.jsxs("div",{className:"card-body text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Loading..."}),e.jsx("div",{className:"text-muted small",children:"  ..."})]})});if(g){const Y=g?.message||String(g);return e.jsx("div",{className:"alert alert-danger",role:"alert",children:Y})}return e.jsx("div",{className:"card shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3 mb-3",children:[e.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[e.jsx("label",{htmlFor:"finalize-filter",className:"text-muted small mb-0",children:""}),e.jsx("input",{id:"finalize-filter",type:"search",value:y,onChange:Z,className:"form-control form-control-sm",placeholder:",    ...",style:{minWidth:"220px"}})]}),e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:z,disabled:G,children:G?"  ...":"  "})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",style:{width:60},children:"#"}),e.jsx("th",{scope:"col",style:{minWidth:140},children:""}),H.map(Y=>e.jsxs("th",{scope:"col",className:"text-center",style:{minWidth:70},children:[e.jsx("div",{className:"fw-semibold",children:Y.label}),Y.ratio!=null&&e.jsxs("div",{className:"text-muted small",children:[Y.ratio,"%"]})]},Y.code)),e.jsx("th",{scope:"col",className:"text-center",style:{minWidth:90},children:""}),e.jsx("th",{scope:"col",style:{minWidth:200},children:" "}),e.jsx("th",{scope:"col",style:{width:90}})]})}),e.jsx("tbody",{children:U.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:H.length+5,className:"text-center text-muted py-5",children:"   ."})}):U.map((Y,te)=>{const K=Y.changed;return e.jsxs("tr",{children:[e.jsxs("td",{className:"text-muted",children:["#",te+1]}),e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold",children:Y.displayName}),(Y.department||Y.grade)&&e.jsxs("div",{className:"text-muted small",children:[Y.department,Y.department&&Y.grade?"  ":"",Y.grade]})]}),H.map(le=>{const ve=Y.sections[le.code];return e.jsx("td",{className:"text-center",children:typeof ve=="number"?e.jsx("span",{className:"fw-semibold",children:fh(ve)}):e.jsx("span",{className:"text-muted",children:"-"})},le.code)}),e.jsx("td",{className:"text-center",children:(()=>{const le=Y.finalGrade!=null?Y.finalGrade:null,ve=Y.autoGrade!=null?Y.autoGrade:null,ke=le??ve,J=ke!=null?fh(ke):"-",ue=w?Y.gpaCd||"-":Y.gpaCd?`${Y.gpaCd} (${J})`:J!=="-"?J:"-",Se=K?`   ${ve!=null?fh(ve):"-"}`:" ";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fw-semibold mb-1${K?" text-danger":""}`,children:ue}),e.jsx("div",{className:"text-muted small",children:Se})]})})()}),e.jsx("td",{children:e.jsx("div",{className:"small text-break",children:K?Y.changeReason||" ":" "})}),e.jsx("td",{className:"text-end",children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>M(Y),children:""})})]},Y.enrollId||te)})})]})})]})})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex flex-column gap-4",children:[e.jsx("div",{className:"d-flex flex-column flex-sm-row align-items-sm-center justify-content-between gap-2",children:e.jsx("h1",{className:"h4 mb-0",children:"  /"})}),e.jsx("div",{className:"card shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"h6 mb-2",children:"   "}),e.jsx("p",{className:"mb-3 text-muted small",children:"      ,      .              ."}),e.jsx("p",{className:"mb-3 text-danger small",children:"          F   ."}),e.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[O.length===0?e.jsx("span",{className:"badge bg-light text-dark border",children:"   "}):O.map(Y=>e.jsxs("span",{className:"badge bg-light text-dark border",children:[Y.label," ",Number.isFinite(Y.ratio)?`${Y.ratio}%`:""]},Y.code)),O.length>0&&e.jsxs("span",{className:W,children:[" ",C,"%"]})]})]})}),ae()]}),X()]})}function B2(){return e.jsxs(xN,{children:[e.jsx(lt,{path:"/",element:e.jsx(Zg,{to:"/classroom/student",replace:!0})}),e.jsx(lt,{path:"/classroom/student",element:e.jsx(pS,{})}),e.jsxs(lt,{path:"/classroom/student/:lectureId",element:e.jsx(jS,{}),children:[e.jsx(lt,{index:!0,element:e.jsx(yS,{})}),e.jsx(lt,{path:"board",element:e.jsx(wS,{})}),e.jsx(lt,{path:"board/:postId",element:e.jsx(ew,{})}),e.jsx(lt,{path:"attendance",element:e.jsx(CS,{})}),e.jsx(lt,{path:"exam",element:e.jsx(DS,{})}),e.jsx(lt,{path:"exam/:examId",element:e.jsx(RS,{})}),e.jsx(lt,{path:"task",element:e.jsx(HS,{})}),e.jsx(lt,{path:"task/indiv/:indivtaskId",element:e.jsx(LS,{})}),e.jsx(lt,{path:"task/group/:grouptaskId",element:e.jsx(YS,{})}),e.jsx(lt,{path:"review",element:e.jsx(tw,{})}),e.jsx(lt,{path:"grade",element:e.jsx(aw,{})})]}),e.jsx(lt,{path:"/classroom/professor",element:e.jsx(nw,{})}),e.jsxs(lt,{path:"/classroom/professor/:lectureId",element:e.jsx(QA,{}),children:[e.jsx(lt,{index:!0,element:e.jsx(XA,{})}),e.jsx(lt,{path:"summary",element:e.jsx(WA,{})}),e.jsx(lt,{path:"board",element:e.jsx(t2,{})}),e.jsx(lt,{path:"board/new",element:e.jsx(n2,{})}),e.jsx(lt,{path:"board/:postId/edit",element:e.jsx(l2,{})}),e.jsx(lt,{path:"board/:postId",element:e.jsx(a2,{})}),e.jsx(lt,{path:"attendance",element:e.jsx(r2,{})}),e.jsx(lt,{path:"exam",element:e.jsx(o2,{})}),e.jsx(lt,{path:"exam/offline/new",element:e.jsx(g2,{})}),e.jsx(lt,{path:"exam/:examId",element:e.jsx(m2,{})}),e.jsx(lt,{path:"exam/:examId/edit",element:e.jsx(x2,{})}),e.jsx(lt,{path:"task",element:e.jsx(y2,{})}),e.jsx(lt,{path:"task/indiv/new",element:e.jsx(Vb,{})}),e.jsx(lt,{path:"task/indiv/:indivtaskId/edit",element:e.jsx(Vb,{})}),e.jsx(lt,{path:"task/indiv/:indivtaskId",element:e.jsx(v2,{})}),e.jsx(lt,{path:"task/group/new",element:e.jsx(E2,{})}),e.jsx(lt,{path:"task/group/:grouptaskId/edit",element:e.jsx(k2,{})}),e.jsx(lt,{path:"task/group/:grouptaskId",element:e.jsx(S2,{})}),e.jsx(lt,{path:"student",element:e.jsx(D2,{})}),e.jsx(lt,{path:"student/:studentNo",element:e.jsx(I2,{})}),e.jsx(lt,{path:"grades",element:e.jsx(O2,{})}),e.jsx(lt,{path:"finalize",element:e.jsx(U2,{})})]}),e.jsx(lt,{path:"*",element:e.jsx(Zg,{to:"/classroom/student",replace:!0})})]})}A0.createRoot(document.getElementById("root")).render(e.jsx(x.StrictMode,{children:e.jsx(CN,{children:e.jsx(DN,{children:e.jsx(IN,{children:e.jsx(B2,{})})})})}));
