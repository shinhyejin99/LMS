<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°•ì˜ì‹¤ ë°°ì • ëŒ€ì‹œë³´ë“œ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
        <style>
            :root {
                --theme-primary: #0d9488; /* Teal-700 */
                --theme-primary-light: #f0fdfa; /* Teal-50 */
                --theme-success: #16a34a; /* Green-600 */
                --theme-warning: #f59e0b; /* Amber-500 */
                --theme-danger: #dc2626; /* Red-600 */
                --theme-text-dark: #1f2937;
                --theme-text-light: #6b7280;
            }
    
            @keyframes fadeInUp {
                from { opacity: 0; transform: translateY(20px); }
                to { opacity: 1; transform: translateY(0); }
            }
    
            @keyframes progressAnimate {
                from { width: 0%; }
            }
    
            body { 
                background-color: #f0f2f5;
                font-family: 'Noto Sans KR', sans-serif;
                color: var(--theme-text-dark);
            }
    
            .card {
                animation: fadeInUp 0.5s ease-out forwards;
                opacity: 0;
                box-shadow: 0 4px 20px rgba(0,0,0,0.05) !important;
                border: none;
            }
    
            .kpi-card .card-body { display: flex; align-items: center; }
            .kpi-icon { font-size: 2rem; margin-right: 1rem; width: 50px; text-align: center; color: var(--theme-primary); }
            
            .timetable-wrapper { overflow-x: auto; }
            .timetable { table-layout: fixed; min-width: 1200px; border-collapse: separate; border-spacing: 0; }
            .timetable th, .timetable td { text-align: center; vertical-align: middle; padding: 0.5rem; font-size: 0.8rem; }
            .timetable th { background-color: #f8f9fa; }
            .timetable .time-col { width: 80px; font-weight: 500; }
            .timetable .room-header { cursor: pointer; transition: background-color 0.2s ease; }
            .timetable .room-header:hover { background-color: #e9ecef; }
            .timetable .fa-video.text-danger { color: var(--theme-danger) !important; }
            
            .slot { border: 1px solid #e9ecef; height: 60px; transition: all 0.2s ease; }
            .slot.booked { background-color: #f1f5f9; color: var(--theme-text-light); }
            .slot.requested-time { background-image: repeating-linear-gradient(-45deg, #ffffff, #ffffff 5px, var(--theme-primary-light) 5px, var(--theme-primary-light) 10px); }
            .slot.available:hover { background-color: #d1fae5; cursor: pointer; transform: scale(1.05); z-index: 10; }
            .slot.selected { 
                background-color: var(--theme-success);
                color: white; 
                transform: scale(1.05);
                box-shadow: 0 0 15px rgba(22, 163, 74, 0.5);
                z-index: 10;
            }
    
            .progress { height: 1.25rem; background-color: #e9ecef; }
            .progress-bar { animation: progressAnimate 1s ease-out forwards; background-color: var(--theme-primary); }
            .progress-bar.bg-danger { background-color: var(--theme-danger) !important; }
            .progress-bar.bg-success { background-color: var(--theme-success) !important; }
            .progress-bar-label { font-size: 0.8em; font-weight: 500; color: var(--theme-text-light); }
    
            .btn-primary { background-color: var(--theme-primary); border-color: var(--theme-primary); }
            .btn-primary:hover { background-color: var(--theme-primary-dark); border-color: var(--theme-primary-dark); }
            .btn-success { background-color: var(--theme-success); border-color: var(--theme-success); }
            .btn { transition: all 0.2s ease; }
            .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
    
            .nav-tabs .nav-link { transition: all 0.2s ease; color: var(--theme-text-light); }
            .nav-tabs .nav-link.active { font-weight: 700; color: var(--theme-primary); border-bottom-color: var(--theme-primary); }
    
            .badge.bg-warning { background-color: var(--theme-warning) !important; }
            .badge.bg-primary { background-color: var(--theme-primary) !important; }
            .badge.bg-success { background-color: var(--theme-success) !important; }
        </style></head>
<body>
    <div class="container-fluid p-3">
        <!-- 1. KPI ëŒ€ì‹œë³´ë“œ -->
        <div class="row mb-3">
            <div class="col-md-4">
                <div class="card kpi-card shadow-sm" style="animation-delay: 0.1s;">
                    <div class="card-body">
                        <div class="kpi-icon text-primary"><i class="fas fa-chalkboard-teacher"></i></div>
                        <div>
                            <div class="text-muted">ë°°ì • ëŒ€ê¸° ê°•ì˜</div>
                            <h4 class="mb-0">3 ê±´</h4>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card kpi-card shadow-sm" style="animation-delay: 0.2s;">
                    <div class="card-body">
                        <div class="kpi-icon text-success"><i class="fas fa-building-circle-check"></i></div>
                        <div>
                            <div class="text-muted">ì˜¤ëŠ˜ ê°•ì˜ì‹¤ ì‚¬ìš©ë¥ </div>
                            <h4 class="mb-0">72%</h4>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card kpi-card shadow-sm" style="animation-delay: 0.3s;">
                    <div class="card-body">
                        <div class="kpi-icon text-danger"><i class="fas fa-triangle-exclamation"></i></div>
                        <div>
                            <div class="text-muted">ì‹œì„¤ ì´ìŠˆ</div>
                            <h4 class="mb-0">1 ê±´ (ê³µí•™-305í˜¸ í”„ë¡œì í„°)</h4>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <!-- 2. ë©”ì¸ ì½˜í…ì¸  (íƒ€ì„í…Œì´ë¸”, ì‚¬ìš©ë¥ ) -->
            <div class="col-lg-9">
                <div class="card shadow-sm" style="animation-delay: 0.4s;">
                    <div class="card-header">
                        <ul class="nav nav-tabs card-header-tabs" id="day-tabs">
                            <li class="nav-item"><a class="nav-link" href="#" data-day="mon">ì›”</a></li>
                            <li class="nav-item"><a class="nav-link" href="#" data-day="tue">í™”</a></li>
                            <li class="nav-item"><a class="nav-link active" aria-current="true" href="#" data-day="wed">ìˆ˜</a></li>
                            <li class="nav-item"><a class="nav-link" href="#" data-day="thu">ëª©</a></li>
                            <li class="nav-item"><a class="nav-link" href="#" data-day="fri">ê¸ˆ</a></li>
                        </ul>
                    </div>
                    <div class="card-body p-0 timetable-wrapper">
                        <table class="table table-bordered timetable">
                            <thead>
                                <tr>
                                    <th class="time-col">ì‹œê°„</th>
                                    <th class="room-header" data-room-id="101">ê³µí•™-101<br><small>ğŸ‘¤70 <i class="fas fa-video"></i></small></th>
                                    <th class="room-header" data-room-id="102">ê³µí•™-102<br><small>ğŸ‘¤50 <i class="fas fa-video"></i></small></th>
                                    <th class="room-header" data-room-id="203">ê³µí•™-203<br><small>ğŸ‘¤50</small></th>
                                    <th class="room-header" data-room-id="305">ê³µí•™-305<br><small>ğŸ‘¤40 <i class="fas fa-video text-danger"></i></small></th>
                                    <th class="room-header" data-room-id="501">IT-501<br><small>ğŸ‘¤60 <i class="fas fa-video"></i></small></th>
                                    <th class="room-header" data-room-id="502">IT-502<br><small>ğŸ‘¤60 <i class="fas fa-video"></i></small></th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="time-col">09:00-10:30</td>
                                    <td class="slot booked">ë°ì´í„°ë² ì´ìŠ¤<br><small>ê¹€êµìˆ˜</small></td>
                                    <td class="slot available"></td>
                                    <td class="slot booked">ì•Œê³ ë¦¬ì¦˜<br><small>ìµœêµìˆ˜</small></td>
                                    <td class="slot available"></td>
                                    <td class="slot booked">ìë£Œêµ¬ì¡°<br><small>ë°•êµìˆ˜</small></td>
                                    <td class="slot available"></td>
                                </tr>
                                <tr class="requested-time-row">
                                    <td class="time-col">10:30-12:00</td>
                                    <td class="slot requested-time available"></td>
                                    <td class="slot requested-time booked">ìš´ì˜ì²´ì œ<br><small>ì´êµìˆ˜</small></td>
                                    <td class="slot requested-time available"></td>
                                    <td class="slot requested-time available"></td>
                                    <td class="slot requested-time booked">ì»´í“¨í„°êµ¬ì¡°<br><small>ì •êµìˆ˜</small></td>
                                    <td class="slot requested-time available"></td>
                                </tr>
                                <tr>
                                    <td class="time-col">13:00-14:30</td>
                                    <td class="slot available"></td>
                                    <td class="slot booked">Cí”„ë¡œê·¸ë˜ë°<br><small>í™êµìˆ˜</small></td>
                                    <td class="slot available"></td>
                                    <td class="slot booked">ì´ì‚°ìˆ˜í•™<br><small>ìœ¤êµìˆ˜</small></td>
                                    <td class="slot available"></td>
                                    <td class="slot booked">ê°ì²´ì§€í–¥<br><small>ì¥êµìˆ˜</small></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <!-- 4. ì‚¬ìš©ë¥  ì°¨íŠ¸ -->
                <div class="card shadow-sm mt-3" style="animation-delay: 0.5s;">
                    <div class="card-header"><h5 class="mb-0">ê°•ì˜ì‹¤ë³„ ì‚¬ìš©ë¥  (ìˆ˜ìš”ì¼)</h5></div>
                    <div class="card-body">
                        <div class="mb-2">
                            <div class="progress-bar-label d-flex justify-content-between"><span>ê³µí•™-101</span><span>50%</span></div>
                            <div class="progress"><div class="progress-bar" style="width: 50%;"></div></div>
                        </div>
                        <div class="mb-2">
                            <div class="progress-bar-label d-flex justify-content-between"><span>ê³µí•™-102</span><span>100%</span></div>
                            <div class="progress"><div class="progress-bar bg-danger" style="width: 100%;"></div></div>
                        </div>
                         <div class="mb-2">
                            <div class="progress-bar-label d-flex justify-content-between"><span>IT-501</span><span>25%</span></div>
                            <div class="progress"><div class="progress-bar bg-success" style="width: 25%;"></div></div>
                        </div>
                    </div>
                </div>

                <!-- 5. ìµœê·¼ í™œë™ ë¡œê·¸ -->
                <div class="card shadow-sm mt-3" style="animation-delay: 0.8s;">
                    <div class="card-header"><h5 class="mb-0">ìµœê·¼ í™œë™ ë¡œê·¸</h5></div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item d-flex align-items-center py-3">
                                <i class="fas fa-check-circle text-success me-3"></i>
                                <div>'AIê°œë¡ ' ê°•ì˜ê°€ <strong>ê³µí•™-101í˜¸</strong>ì— ë°°ì •ë˜ì—ˆìŠµë‹ˆë‹¤. <small class="text-muted">- by ê¹€êµì§ì›</small></div>
                                <small class="text-muted ms-auto">ë°©ê¸ˆ ì „</small>
                            </li>
                            <li class="list-group-item d-flex align-items-center py-3">
                                <i class="fas fa-plus-circle text-primary me-3"></i>
                                <div>'ì»´í“¨í„° ë¹„ì „' ê°•ì˜ ê°œì„¤ ì‹ ì²­ì´ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
                                <small class="text-muted ms-auto">15ë¶„ ì „</small>
                            </li>
                            <li class="list-group-item d-flex align-items-center py-3">
                                <i class="fas fa-check-circle text-success me-3"></i>
                                <div>'ëª¨ë°”ì¼ í”„ë¡œê·¸ë˜ë°' ê°•ì˜ê°€ <strong>IT-502í˜¸</strong>ì— ë°°ì •ë˜ì—ˆìŠµë‹ˆë‹¤. <small class="text-muted">- by ë°•êµì§ì›</small></div>
                                <small class="text-muted ms-auto">1ì‹œê°„ ì „</small>
                            </li>
                            <li class="list-group-item d-flex align-items-center py-3">
                                <i class="fas fa-exclamation-circle text-danger me-3"></i>
                                <div>'ê³µí•™-305í˜¸' í”„ë¡œì í„°ì— ì´ìŠˆê°€ ë³´ê³ ë˜ì—ˆìŠµë‹ˆë‹¤.</div>
                                <small class="text-muted ms-auto">3ì‹œê°„ ì „</small>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>

            <!-- 3. ìš°ì¸¡ ì •ë³´ íŒ¨ë„ -->
            <div class="col-lg-3">
                <div class="card shadow-sm mb-3" style="animation-delay: 0.6s;">
                    <div class="card-header"><h5 class="mb-0">ì‹ ì²­ ì •ë³´</h5></div>
                    <div class="card-body">
                        <p><strong>ê³¼ëª©:</strong> AIê°œë¡ </p>
                        <p><strong>êµìˆ˜:</strong> ì´êµìˆ˜</p>
                        <p><strong>í¬ë§ì‹œê°„:</strong> ì›”,ìˆ˜ 10:30-12:00</p>
                        <p><strong>ìƒíƒœ:</strong> <span class="badge bg-warning text-dark">ë°°ì • ëŒ€ê¸°</span></p>
                        <hr>
                        <p class="mb-1"><strong>ì„ íƒëœ ê°•ì˜ì‹¤:</strong> <span id="selected-room">-</span></p>
                        <p class="mb-1"><strong>ì„ íƒëœ ì‹œê°„:</strong> <span id="selected-time">-</span></p>
                        <div class="d-grid gap-2 mt-3">
                            <button class="btn btn-primary" id="assign-btn" disabled>ë°°ì •í•˜ê¸°</button>
                            <button class="btn btn-success" id="approve-btn" disabled>ìµœì¢… ìŠ¹ì¸</button>
                        </div>
                    </div>
                </div>
                <div class="card shadow-sm" style="animation-delay: 0.7s;">
                    <div class="card-header"><h5 class="mb-0">ê°•ì˜ì‹¤ ìƒì„¸ì •ë³´</h5></div>
                    <div id="room-details" class="card-body">
                        <p class="text-muted">íƒ€ì„í…Œì´ë¸” ìƒë‹¨ì˜ ê°•ì˜ì‹¤ ì´ë¦„ì„ í´ë¦­í•˜ì„¸ìš”.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ìµœì¢… ìŠ¹ì¸ ì„±ê³µ Modal -->
    <div class="modal fade" id="approvalSuccessModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header border-0">
                    <h5 class="modal-title">ìŠ¹ì¸ ì²˜ë¦¬ ì™„ë£Œ</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="text-center mb-3">
                        <i class="fas fa-check-circle text-success fa-4x"></i>
                    </div>
                    <p class="text-center fw-bold">'AIê°œë¡ ' ê°•ì˜ê°€ ìµœì¢… ìŠ¹ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
                    <ul class="list-group list-group-flush mt-3">
                        <li class="list-group-item d-flex justify-content-between align-items-center border-0 ps-0">
                            ê°•ì˜ ê°œì„¤ ìŠ¹ì¸
                            <span class="badge bg-success">ì™„ë£Œ</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center border-0 ps-0">
                            ë‹´ë‹¹ êµìˆ˜ì—ê²Œ ì•Œë¦¼ ë°œì†¡
                            <span class="badge bg-success">ì™„ë£Œ</span>
                        </li>
                        <li class="list-group-item d-flex justify-content-between align-items-center border-0 ps-0">
                            ë‹´ë‹¹ êµìˆ˜ ì‹œê°„í‘œì— ì—…ë°ì´íŠ¸
                            <span class="badge bg-success">ì™„ë£Œ</span>
                        </li>
                    </ul>
                </div>
                <div class="modal-footer border-0">
                    <button type="button" class="btn btn-primary w-100" id="returnToListBtn">ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
                </div>
            </div>
        </div>
    </div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
    const roomDetails = {
        '101': { name: 'ê³µí•™-101í˜¸', capacity: 70, equipment: ['í”„ë¡œì í„°', 'ëŒ€í˜• í™”ì´íŠ¸ë³´ë“œ', 'ìŒí–¥ ì‹œìŠ¤í…œ'], image: 'https://via.placeholder.com/400x250.png?text=Room+101' },
        '102': { name: 'ê³µí•™-102í˜¸', capacity: 50, equipment: ['í”„ë¡œì í„°', 'ì „ìêµíƒ'], image: 'https://via.placeholder.com/400x250.png?text=Room+102' },
        '203': { name: 'ê³µí•™-203í˜¸', capacity: 50, equipment: ['í™”ì´íŠ¸ë³´ë“œ'], image: 'https://via.placeholder.com/400x250.png?text=Room+203' },
        '305': { name: 'ê³µí•™-305í˜¸', capacity: 40, equipment: ['í”„ë¡œì í„° (ê³ ì¥)', 'í™”ì´íŠ¸ë³´ë“œ'], image: 'https://via.placeholder.com/400x250.png?text=Room+305' },
        '501': { name: 'IT-501í˜¸', capacity: 60, equipment: ['í”„ë¡œì í„°', 'ê°œì¸ë³„ ì½˜ì„¼íŠ¸'], image: 'https://via.placeholder.com/400x250.png?text=Room+501' },
        '502': { name: 'IT-502í˜¸', capacity: 60, equipment: ['í”„ë¡œì í„°', 'ì „ìêµíƒ', 'ê°œì¸ë³„ ì½˜ì„¼íŠ¸'], image: 'https://via.placeholder.com/400x250.png?text=Room+502' },
    };

    let selectedSlot = null;
    const approvalSuccessModal = new bootstrap.Modal(document.getElementById('approvalSuccessModal'));

    // ê°•ì˜ì‹¤ í—¤ë” í´ë¦­ -> ìƒì„¸ì •ë³´ í‘œì‹œ
    document.querySelectorAll('.room-header').forEach(header => {
        header.addEventListener('click', () => {
            const room = roomDetails[header.dataset.roomId];
            const detailsEl = document.getElementById('room-details');
            detailsEl.innerHTML = `
                <img src="${room.image}" class="img-fluid rounded mb-2">
                <h6>${room.name}</h6>
                <p><strong>ìˆ˜ìš©ì¸ì›:</strong> ${room.capacity}ëª…</p>
                <p><strong>ë³´ìœ ì¥ë¹„:</strong></p>
                <ul>${room.equipment.map(e => `<li>${e}</li>`).join('')}</ul>
            `;
        });
    });

    // ë¹ˆ ìŠ¬ë¡¯ í´ë¦­ -> ì„ íƒ
    document.querySelectorAll('.slot.available').forEach(slot => {
        slot.addEventListener('click', () => {
            if(selectedSlot) selectedSlot.classList.remove('selected');
            slot.classList.add('selected');
            selectedSlot = slot;

            const time = slot.parentElement.querySelector('.time-col').textContent;
            const roomIndex = slot.cellIndex - 1;
            const roomName = document.querySelector('.timetable thead th:nth-child(' + (roomIndex + 2) + ')').innerText.split('\n')[0];

            document.getElementById('selected-room').textContent = roomName;
            document.getElementById('selected-time').textContent = time;
            document.getElementById('assign-btn').disabled = false;
        });
    });

    // ë°°ì • ë²„íŠ¼
    document.getElementById('assign-btn').addEventListener('click', () => {
        if(!selectedSlot) return;
        selectedSlot.classList.remove('available', 'requested-time');
        selectedSlot.classList.add('booked');
        selectedSlot.innerHTML = "AIê°œë¡ <br><small>ì´êµìˆ˜(ë°°ì •)</small>";
        alert(document.getElementById('selected-room').textContent + 'ì— ë°°ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
        document.getElementById('assign-btn').disabled = true;
        document.getElementById('approve-btn').disabled = false;
        document.querySelector('.badge').className = 'badge bg-primary';
        document.querySelector('.badge').textContent = 'ë°°ì • ì™„ë£Œ';
    });

    // ìµœì¢… ìŠ¹ì¸ ë²„íŠ¼
    document.getElementById('approve-btn').addEventListener('click', () => {
        // ëª©ë¡ í˜ì´ì§€ì— ì „ë‹¬í•  ì •ë³´ ì €ì¥
        sessionStorage.setItem('lastApprovedTitle', 'AIê°œë¡  ì´êµìˆ˜');
        // ì„±ê³µ Modal í‘œì‹œ
        approvalSuccessModal.show();
    });

    // ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸° ë²„íŠ¼
    document.getElementById('returnToListBtn').addEventListener('click', () => {
        window.location.href = 'lecture_approval_list.html';
    });

</script>
</body>
</html>