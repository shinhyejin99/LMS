function uN(a,s){for(var l=0;l<s.length;l++){const i=s[l];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in a)){const d=Object.getOwnPropertyDescriptor(i,c);d&&Object.defineProperty(a,c,d.get?d:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const d of c)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function l(c){const d={};return c.integrity&&(d.integrity=c.integrity),c.referrerPolicy&&(d.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?d.credentials="include":c.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(c){if(c.ep)return;c.ep=!0;const d=l(c);fetch(c.href,d)}})();function hN(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Hu={exports:{}},Li={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $g;function mN(){if($g)return Li;$g=1;var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.fragment");function l(i,c,d){var u=null;if(d!==void 0&&(u=""+d),c.key!==void 0&&(u=""+c.key),"key"in c){d={};for(var h in c)h!=="key"&&(d[h]=c[h])}else d=c;return c=d.ref,{$$typeof:a,type:i,key:u,ref:c!==void 0?c:null,props:d}}return Li.Fragment=s,Li.jsx=l,Li.jsxs=l,Li}var Og;function fN(){return Og||(Og=1,Hu.exports=mN()),Hu.exports}var e=fN(),Vu={exports:{}},Je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig;function pN(){if(Ig)return Je;Ig=1;var a=Symbol.for("react.transitional.element"),s=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function C(k){return k===null||typeof k!="object"?null:(k=v&&k[v]||k["@@iterator"],typeof k=="function"?k:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,S={};function E(k,G,se){this.props=k,this.context=G,this.refs=S,this.updater=se||w}E.prototype.isReactComponent={},E.prototype.setState=function(k,G){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,G,"setState")},E.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function $(){}$.prototype=E.prototype;function D(k,G,se){this.props=k,this.context=G,this.refs=S,this.updater=se||w}var I=D.prototype=new $;I.constructor=D,A(I,E.prototype),I.isPureReactComponent=!0;var V=Array.isArray;function _(){}var B={H:null,A:null,T:null,S:null},z=Object.prototype.hasOwnProperty;function X(k,G,se){var q=se.ref;return{$$typeof:a,type:k,key:G,ref:q!==void 0?q:null,props:se}}function T(k,G){return X(k.type,G,k.props)}function W(k){return typeof k=="object"&&k!==null&&k.$$typeof===a}function F(k){var G={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(se){return G[se]})}var Q=/\/+/g;function O(k,G){return typeof k=="object"&&k!==null&&k.key!=null?F(""+k.key):G.toString(36)}function Y(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(_,_):(k.status="pending",k.then(function(G){k.status==="pending"&&(k.status="fulfilled",k.value=G)},function(G){k.status==="pending"&&(k.status="rejected",k.reason=G)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function N(k,G,se,q,ee){var te=typeof k;(te==="undefined"||te==="boolean")&&(k=null);var me=!1;if(k===null)me=!0;else switch(te){case"bigint":case"string":case"number":me=!0;break;case"object":switch(k.$$typeof){case a:case s:me=!0;break;case b:return me=k._init,N(me(k._payload),G,se,q,ee)}}if(me)return ee=ee(k),me=q===""?"."+O(k,0):q,V(ee)?(se="",me!=null&&(se=me.replace(Q,"$&/")+"/"),N(ee,G,se,"",function(J){return J})):ee!=null&&(W(ee)&&(ee=T(ee,se+(ee.key==null||k&&k.key===ee.key?"":(""+ee.key).replace(Q,"$&/")+"/")+me)),G.push(ee)),1;me=0;var oe=q===""?".":q+":";if(V(k))for(var be=0;be<k.length;be++)q=k[be],te=oe+O(q,be),me+=N(q,G,se,te,ee);else if(be=C(k),typeof be=="function")for(k=be.call(k),be=0;!(q=k.next()).done;)q=q.value,te=oe+O(q,be++),me+=N(q,G,se,te,ee);else if(te==="object"){if(typeof k.then=="function")return N(Y(k),G,se,q,ee);throw G=String(k),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return me}function M(k,G,se){if(k==null)return k;var q=[],ee=0;return N(k,q,"","",function(te){return G.call(se,te,ee++)}),q}function L(k){if(k._status===-1){var G=k._result;G=G(),G.then(function(se){(k._status===0||k._status===-1)&&(k._status=1,k._result=se)},function(se){(k._status===0||k._status===-1)&&(k._status=2,k._result=se)}),k._status===-1&&(k._status=0,k._result=G)}if(k._status===1)return k._result.default;throw k._result}var U=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},P={map:M,forEach:function(k,G,se){M(k,function(){G.apply(this,arguments)},se)},count:function(k){var G=0;return M(k,function(){G++}),G},toArray:function(k){return M(k,function(G){return G})||[]},only:function(k){if(!W(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return Je.Activity=y,Je.Children=P,Je.Component=E,Je.Fragment=l,Je.Profiler=c,Je.PureComponent=D,Je.StrictMode=i,Je.Suspense=f,Je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=B,Je.__COMPILER_RUNTIME={__proto__:null,c:function(k){return B.H.useMemoCache(k)}},Je.cache=function(k){return function(){return k.apply(null,arguments)}},Je.cacheSignal=function(){return null},Je.cloneElement=function(k,G,se){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var q=A({},k.props),ee=k.key;if(G!=null)for(te in G.key!==void 0&&(ee=""+G.key),G)!z.call(G,te)||te==="key"||te==="__self"||te==="__source"||te==="ref"&&G.ref===void 0||(q[te]=G[te]);var te=arguments.length-2;if(te===1)q.children=se;else if(1<te){for(var me=Array(te),oe=0;oe<te;oe++)me[oe]=arguments[oe+2];q.children=me}return X(k.type,ee,q)},Je.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:d,_context:k},k},Je.createElement=function(k,G,se){var q,ee={},te=null;if(G!=null)for(q in G.key!==void 0&&(te=""+G.key),G)z.call(G,q)&&q!=="key"&&q!=="__self"&&q!=="__source"&&(ee[q]=G[q]);var me=arguments.length-2;if(me===1)ee.children=se;else if(1<me){for(var oe=Array(me),be=0;be<me;be++)oe[be]=arguments[be+2];ee.children=oe}if(k&&k.defaultProps)for(q in me=k.defaultProps,me)ee[q]===void 0&&(ee[q]=me[q]);return X(k,te,ee)},Je.createRef=function(){return{current:null}},Je.forwardRef=function(k){return{$$typeof:h,render:k}},Je.isValidElement=W,Je.lazy=function(k){return{$$typeof:b,_payload:{_status:-1,_result:k},_init:L}},Je.memo=function(k,G){return{$$typeof:g,type:k,compare:G===void 0?null:G}},Je.startTransition=function(k){var G=B.T,se={};B.T=se;try{var q=k(),ee=B.S;ee!==null&&ee(se,q),typeof q=="object"&&q!==null&&typeof q.then=="function"&&q.then(_,U)}catch(te){U(te)}finally{G!==null&&se.types!==null&&(G.types=se.types),B.T=G}},Je.unstable_useCacheRefresh=function(){return B.H.useCacheRefresh()},Je.use=function(k){return B.H.use(k)},Je.useActionState=function(k,G,se){return B.H.useActionState(k,G,se)},Je.useCallback=function(k,G){return B.H.useCallback(k,G)},Je.useContext=function(k){return B.H.useContext(k)},Je.useDebugValue=function(){},Je.useDeferredValue=function(k,G){return B.H.useDeferredValue(k,G)},Je.useEffect=function(k,G){return B.H.useEffect(k,G)},Je.useEffectEvent=function(k){return B.H.useEffectEvent(k)},Je.useId=function(){return B.H.useId()},Je.useImperativeHandle=function(k,G,se){return B.H.useImperativeHandle(k,G,se)},Je.useInsertionEffect=function(k,G){return B.H.useInsertionEffect(k,G)},Je.useLayoutEffect=function(k,G){return B.H.useLayoutEffect(k,G)},Je.useMemo=function(k,G){return B.H.useMemo(k,G)},Je.useOptimistic=function(k,G){return B.H.useOptimistic(k,G)},Je.useReducer=function(k,G,se){return B.H.useReducer(k,G,se)},Je.useRef=function(k){return B.H.useRef(k)},Je.useState=function(k){return B.H.useState(k)},Je.useSyncExternalStore=function(k,G,se){return B.H.useSyncExternalStore(k,G,se)},Je.useTransition=function(){return B.H.useTransition()},Je.version="19.2.0",Je}var Lg;function Eh(){return Lg||(Lg=1,Vu.exports=pN()),Vu.exports}var x=Eh();const qs=hN(x),gN=uN({__proto__:null,default:qs},[x]);var Yu={exports:{}},zi={},Pu={exports:{}},qu={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zg;function xN(){return zg||(zg=1,(function(a){function s(N,M){var L=N.length;N.push(M);e:for(;0<L;){var U=L-1>>>1,P=N[U];if(0<c(P,M))N[U]=M,N[L]=P,L=U;else break e}}function l(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var M=N[0],L=N.pop();if(L!==M){N[0]=L;e:for(var U=0,P=N.length,k=P>>>1;U<k;){var G=2*(U+1)-1,se=N[G],q=G+1,ee=N[q];if(0>c(se,L))q<P&&0>c(ee,se)?(N[U]=ee,N[q]=L,U=q):(N[U]=se,N[G]=L,U=G);else if(q<P&&0>c(ee,L))N[U]=ee,N[q]=L,U=q;else break e}}return M}function c(N,M){var L=N.sortIndex-M.sortIndex;return L!==0?L:N.id-M.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;a.unstable_now=function(){return d.now()}}else{var u=Date,h=u.now();a.unstable_now=function(){return u.now()-h}}var f=[],g=[],b=1,y=null,v=3,C=!1,w=!1,A=!1,S=!1,E=typeof setTimeout=="function"?setTimeout:null,$=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;function I(N){for(var M=l(g);M!==null;){if(M.callback===null)i(g);else if(M.startTime<=N)i(g),M.sortIndex=M.expirationTime,s(f,M);else break;M=l(g)}}function V(N){if(A=!1,I(N),!w)if(l(f)!==null)w=!0,_||(_=!0,F());else{var M=l(g);M!==null&&Y(V,M.startTime-N)}}var _=!1,B=-1,z=5,X=-1;function T(){return S?!0:!(a.unstable_now()-X<z)}function W(){if(S=!1,_){var N=a.unstable_now();X=N;var M=!0;try{e:{w=!1,A&&(A=!1,$(B),B=-1),C=!0;var L=v;try{t:{for(I(N),y=l(f);y!==null&&!(y.expirationTime>N&&T());){var U=y.callback;if(typeof U=="function"){y.callback=null,v=y.priorityLevel;var P=U(y.expirationTime<=N);if(N=a.unstable_now(),typeof P=="function"){y.callback=P,I(N),M=!0;break t}y===l(f)&&i(f),I(N)}else i(f);y=l(f)}if(y!==null)M=!0;else{var k=l(g);k!==null&&Y(V,k.startTime-N),M=!1}}break e}finally{y=null,v=L,C=!1}M=void 0}}finally{M?F():_=!1}}}var F;if(typeof D=="function")F=function(){D(W)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,O=Q.port2;Q.port1.onmessage=W,F=function(){O.postMessage(null)}}else F=function(){E(W,0)};function Y(N,M){B=E(function(){N(a.unstable_now())},M)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(N){N.callback=null},a.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):z=0<N?Math.floor(1e3/N):5},a.unstable_getCurrentPriorityLevel=function(){return v},a.unstable_next=function(N){switch(v){case 1:case 2:case 3:var M=3;break;default:M=v}var L=v;v=M;try{return N()}finally{v=L}},a.unstable_requestPaint=function(){S=!0},a.unstable_runWithPriority=function(N,M){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var L=v;v=N;try{return M()}finally{v=L}},a.unstable_scheduleCallback=function(N,M,L){var U=a.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?U+L:U):L=U,N){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=L+P,N={id:b++,callback:M,priorityLevel:N,startTime:L,expirationTime:P,sortIndex:-1},L>U?(N.sortIndex=L,s(g,N),l(f)===null&&N===l(g)&&(A?($(B),B=-1):A=!0,Y(V,L-U))):(N.sortIndex=P,s(f,N),w||C||(w=!0,_||(_=!0,F()))),N},a.unstable_shouldYield=T,a.unstable_wrapCallback=function(N){var M=v;return function(){var L=v;v=M;try{return N.apply(this,arguments)}finally{v=L}}}})(qu)),qu}var Ug;function bN(){return Ug||(Ug=1,Pu.exports=xN()),Pu.exports}var Gu={exports:{}},ds={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bg;function yN(){if(Bg)return ds;Bg=1;var a=Eh();function s(f){var g="https://react.dev/errors/"+f;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)g+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+f+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var i={d:{f:l,r:function(){throw Error(s(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},c=Symbol.for("react.portal");function d(f,g,b){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:y==null?null:""+y,children:f,containerInfo:g,implementation:b}}var u=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(f,g){if(f==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return ds.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,ds.createPortal=function(f,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(s(299));return d(f,g,null,b)},ds.flushSync=function(f){var g=u.T,b=i.p;try{if(u.T=null,i.p=2,f)return f()}finally{u.T=g,i.p=b,i.d.f()}},ds.preconnect=function(f,g){typeof f=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(f,g))},ds.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},ds.preinit=function(f,g){if(typeof f=="string"&&g&&typeof g.as=="string"){var b=g.as,y=h(b,g.crossOrigin),v=typeof g.integrity=="string"?g.integrity:void 0,C=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;b==="style"?i.d.S(f,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:C}):b==="script"&&i.d.X(f,{crossOrigin:y,integrity:v,fetchPriority:C,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},ds.preinitModule=function(f,g){if(typeof f=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var b=h(g.as,g.crossOrigin);i.d.M(f,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(f)},ds.preload=function(f,g){if(typeof f=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var b=g.as,y=h(b,g.crossOrigin);i.d.L(f,b,{crossOrigin:y,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},ds.preloadModule=function(f,g){if(typeof f=="string")if(g){var b=h(g.as,g.crossOrigin);i.d.m(f,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(f)},ds.requestFormReset=function(f){i.d.r(f)},ds.unstable_batchedUpdates=function(f,g){return f(g)},ds.useFormState=function(f,g,b){return u.H.useFormState(f,g,b)},ds.useFormStatus=function(){return u.H.useHostTransitionStatus()},ds.version="19.2.0",ds}var Fg;function Pb(){if(Fg)return Gu.exports;Fg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(s){console.error(s)}}return a(),Gu.exports=yN(),Gu.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg;function vN(){if(Hg)return zi;Hg=1;var a=bN(),s=Eh(),l=Pb();function i(t){var n="https://react.dev/errors/"+t;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)n+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+t+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function c(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function d(t){var n=t,r=t;if(t.alternate)for(;n.return;)n=n.return;else{t=n;do n=t,(n.flags&4098)!==0&&(r=n.return),t=n.return;while(t)}return n.tag===3?r:null}function u(t){if(t.tag===13){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function h(t){if(t.tag===31){var n=t.memoizedState;if(n===null&&(t=t.alternate,t!==null&&(n=t.memoizedState)),n!==null)return n.dehydrated}return null}function f(t){if(d(t)!==t)throw Error(i(188))}function g(t){var n=t.alternate;if(!n){if(n=d(t),n===null)throw Error(i(188));return n!==t?null:t}for(var r=t,o=n;;){var m=r.return;if(m===null)break;var p=m.alternate;if(p===null){if(o=m.return,o!==null){r=o;continue}break}if(m.child===p.child){for(p=m.child;p;){if(p===r)return f(m),t;if(p===o)return f(m),n;p=p.sibling}throw Error(i(188))}if(r.return!==o.return)r=m,o=p;else{for(var j=!1,R=m.child;R;){if(R===r){j=!0,r=m,o=p;break}if(R===o){j=!0,o=m,r=p;break}R=R.sibling}if(!j){for(R=p.child;R;){if(R===r){j=!0,r=p,o=m;break}if(R===o){j=!0,o=p,r=m;break}R=R.sibling}if(!j)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?t:n}function b(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t;for(t=t.child;t!==null;){if(n=b(t),n!==null)return n;t=t.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),C=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),$=Symbol.for("react.consumer"),D=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),V=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),z=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),T=Symbol.for("react.memo_cache_sentinel"),W=Symbol.iterator;function F(t){return t===null||typeof t!="object"?null:(t=W&&t[W]||t["@@iterator"],typeof t=="function"?t:null)}var Q=Symbol.for("react.client.reference");function O(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===Q?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case A:return"Fragment";case E:return"Profiler";case S:return"StrictMode";case V:return"Suspense";case _:return"SuspenseList";case X:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case w:return"Portal";case D:return t.displayName||"Context";case $:return(t._context.displayName||"Context")+".Consumer";case I:var n=t.render;return t=t.displayName,t||(t=n.displayName||n.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case B:return n=t.displayName||null,n!==null?n:O(t.type)||"Memo";case z:n=t._payload,t=t._init;try{return O(t(n))}catch{}}return null}var Y=Array.isArray,N=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,M=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},U=[],P=-1;function k(t){return{current:t}}function G(t){0>P||(t.current=U[P],U[P]=null,P--)}function se(t,n){P++,U[P]=t.current,t.current=n}var q=k(null),ee=k(null),te=k(null),me=k(null);function oe(t,n){switch(se(te,n),se(ee,t),se(q,null),n.nodeType){case 9:case 11:t=(t=n.documentElement)&&(t=t.namespaceURI)?ag(t):0;break;default:if(t=n.tagName,n=n.namespaceURI)n=ag(n),t=ng(n,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(q),se(q,t)}function be(){G(q),G(ee),G(te)}function J(t){t.memoizedState!==null&&se(me,t);var n=q.current,r=ng(n,t.type);n!==r&&(se(ee,t),se(q,r))}function re(t){ee.current===t&&(G(q),G(ee)),me.current===t&&(G(me),Ri._currentValue=L)}var Ee,$e;function ue(t){if(Ee===void 0)try{throw Error()}catch(r){var n=r.stack.trim().match(/\n( *(at )?)/);Ee=n&&n[1]||"",$e=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ee+t+$e}var fe=!1;function Me(t,n){if(!t||fe)return"";fe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(n){var je=function(){throw Error()};if(Object.defineProperty(je.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(je,[])}catch(de){var ie=de}Reflect.construct(t,[],je)}else{try{je.call()}catch(de){ie=de}t.call(je.prototype)}}else{try{throw Error()}catch(de){ie=de}(je=t())&&typeof je.catch=="function"&&je.catch(function(){})}}catch(de){if(de&&ie&&typeof de.stack=="string")return[de.stack,ie.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var m=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");m&&m.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var p=o.DetermineComponentFrameRoot(),j=p[0],R=p[1];if(j&&R){var K=j.split(`
`),le=R.split(`
`);for(m=o=0;o<K.length&&!K[o].includes("DetermineComponentFrameRoot");)o++;for(;m<le.length&&!le[m].includes("DetermineComponentFrameRoot");)m++;if(o===K.length||m===le.length)for(o=K.length-1,m=le.length-1;1<=o&&0<=m&&K[o]!==le[m];)m--;for(;1<=o&&0<=m;o--,m--)if(K[o]!==le[m]){if(o!==1||m!==1)do if(o--,m--,0>m||K[o]!==le[m]){var pe=`
`+K[o].replace(" at new "," at ");return t.displayName&&pe.includes("<anonymous>")&&(pe=pe.replace("<anonymous>",t.displayName)),pe}while(1<=o&&0<=m);break}}}finally{fe=!1,Error.prepareStackTrace=r}return(r=t?t.displayName||t.name:"")?ue(r):""}function He(t,n){switch(t.tag){case 26:case 27:case 5:return ue(t.type);case 16:return ue("Lazy");case 13:return t.child!==n&&n!==null?ue("Suspense Fallback"):ue("Suspense");case 19:return ue("SuspenseList");case 0:case 15:return Me(t.type,!1);case 11:return Me(t.type.render,!1);case 1:return Me(t.type,!0);case 31:return ue("Activity");default:return""}}function ge(t){try{var n="",r=null;do n+=He(t,r),r=t,t=t.return;while(t);return n}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var Le=Object.prototype.hasOwnProperty,ce=a.unstable_scheduleCallback,Se=a.unstable_cancelCallback,we=a.unstable_shouldYield,Ve=a.unstable_requestPaint,Xe=a.unstable_now,Ke=a.unstable_getCurrentPriorityLevel,Fe=a.unstable_ImmediatePriority,Ht=a.unstable_UserBlockingPriority,Ss=a.unstable_NormalPriority,ua=a.unstable_LowPriority,xt=a.unstable_IdlePriority,Kn=a.log,Ua=a.unstable_setDisableYieldValue,ha=null,es=null;function Xs(t){if(typeof Kn=="function"&&Ua(t),es&&typeof es.setStrictMode=="function")try{es.setStrictMode(ha,t)}catch{}}var ts=Math.clz32?Math.clz32:pr,mr=Math.log,fr=Math.LN2;function pr(t){return t>>>=0,t===0?32:31-(mr(t)/fr|0)|0}var Sn=256,wn=262144,Qn=4194304;function ma(t){var n=t&42;if(n!==0)return n;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function Zn(t,n,r){var o=t.pendingLanes;if(o===0)return 0;var m=0,p=t.suspendedLanes,j=t.pingedLanes;t=t.warmLanes;var R=o&134217727;return R!==0?(o=R&~p,o!==0?m=ma(o):(j&=R,j!==0?m=ma(j):r||(r=R&~t,r!==0&&(m=ma(r))))):(R=o&~p,R!==0?m=ma(R):j!==0?m=ma(j):r||(r=o&~t,r!==0&&(m=ma(r)))),m===0?0:n!==0&&n!==m&&(n&p)===0&&(p=m&-m,r=n&-n,p>=r||p===32&&(r&4194048)!==0)?n:m}function os(t,n){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&n)===0}function $o(t,n){switch(t){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gr(){var t=Qn;return Qn<<=1,(Qn&62914560)===0&&(Qn=4194304),t}function ws(t){for(var n=[],r=0;31>r;r++)n.push(t);return n}function us(t,n){t.pendingLanes|=n,n!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function fa(t,n,r,o,m,p){var j=t.pendingLanes;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=r,t.entangledLanes&=r,t.errorRecoveryDisabledLanes&=r,t.shellSuspendCounter=0;var R=t.entanglements,K=t.expirationTimes,le=t.hiddenUpdates;for(r=j&~r;0<r;){var pe=31-ts(r),je=1<<pe;R[pe]=0,K[pe]=-1;var ie=le[pe];if(ie!==null)for(le[pe]=null,pe=0;pe<ie.length;pe++){var de=ie[pe];de!==null&&(de.lane&=-536870913)}r&=~je}o!==0&&Rs(t,o,0),p!==0&&m===0&&t.tag!==0&&(t.suspendedLanes|=p&~(j&~n))}function Rs(t,n,r){t.pendingLanes|=n,t.suspendedLanes&=~n;var o=31-ts(n);t.entangledLanes|=n,t.entanglements[o]=t.entanglements[o]|1073741824|r&261930}function Jn(t,n){var r=t.entangledLanes|=n;for(t=t.entanglements;r;){var o=31-ts(r),m=1<<o;m&n|t[o]&n&&(t[o]|=n),r&=~m}}function el(t,n){var r=n&-n;return r=(r&42)!==0?1:tl(r),(r&(t.suspendedLanes|n))!==0?0:r}function tl(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function xe(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function ke(){var t=M.p;return t!==0?t:(t=window.event,t===void 0?32:Eg(t.type))}function Ce(t,n){var r=M.p;try{return M.p=t,n()}finally{M.p=r}}var Re=Math.random().toString(36).slice(2),H="__reactFiber$"+Re,he="__reactProps$"+Re,Ne="__reactContainer$"+Re,ve="__reactEvents$"+Re,Oe="__reactListeners$"+Re,Ae="__reactHandles$"+Re,_e="__reactResources$"+Re,Ie="__reactMarker$"+Re;function Te(t){delete t[H],delete t[he],delete t[ve],delete t[Oe],delete t[Ae]}function Be(t){var n=t[H];if(n)return n;for(var r=t.parentNode;r;){if(n=r[Ne]||r[H]){if(r=n.alternate,n.child!==null||r!==null&&r.child!==null)for(t=ug(t);t!==null;){if(r=t[H])return r;t=ug(t)}return n}t=r,r=t.parentNode}return null}function De(t){if(t=t[H]||t[Ne]){var n=t.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return t}return null}function ze(t){var n=t.tag;if(n===5||n===26||n===27||n===6)return t.stateNode;throw Error(i(33))}function tt(t){var n=t[_e];return n||(n=t[_e]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Qe(t){t[Ie]=!0}var Rt=new Set,Vt={};function at(t,n){yt(t,n),yt(t+"Capture",n)}function yt(t,n){for(Vt[t]=n,t=0;t<n.length;t++)Rt.add(n[t])}var Ze=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ws={},ss={};function xr(t){return Le.call(ss,t)?!0:Le.call(Ws,t)?!1:Ze.test(t)?ss[t]=!0:(Ws[t]=!0,!1)}function sl(t,n,r){if(xr(n))if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":t.removeAttribute(n);return;case"boolean":var o=n.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){t.removeAttribute(n);return}}t.setAttribute(n,""+r)}}function al(t,n,r){if(r===null)t.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(n);return}t.setAttribute(n,""+r)}}function Ks(t,n,r,o){if(o===null)t.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttributeNS(n,r,""+o)}}function $s(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Xh(t){var n=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function nv(t,n,r){var o=Object.getOwnPropertyDescriptor(t.constructor.prototype,n);if(!t.hasOwnProperty(n)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var m=o.get,p=o.set;return Object.defineProperty(t,n,{configurable:!0,get:function(){return m.call(this)},set:function(j){r=""+j,p.call(this,j)}}),Object.defineProperty(t,n,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(j){r=""+j},stopTracking:function(){t._valueTracker=null,delete t[n]}}}}function Oo(t){if(!t._valueTracker){var n=Xh(t)?"checked":"value";t._valueTracker=nv(t,n,""+t[n])}}function Wh(t){if(!t)return!1;var n=t._valueTracker;if(!n)return!0;var r=n.getValue(),o="";return t&&(o=Xh(t)?t.checked?"true":"false":t.value),t=o,t!==r?(n.setValue(t),!0):!1}function br(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var lv=/[\n"\\]/g;function Os(t){return t.replace(lv,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function Io(t,n,r,o,m,p,j,R){t.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?t.type=j:t.removeAttribute("type"),n!=null?j==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+$s(n)):t.value!==""+$s(n)&&(t.value=""+$s(n)):j!=="submit"&&j!=="reset"||t.removeAttribute("value"),n!=null?Lo(t,j,$s(n)):r!=null?Lo(t,j,$s(r)):o!=null&&t.removeAttribute("value"),m==null&&p!=null&&(t.defaultChecked=!!p),m!=null&&(t.checked=m&&typeof m!="function"&&typeof m!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?t.name=""+$s(R):t.removeAttribute("name")}function Kh(t,n,r,o,m,p,j,R){if(p!=null&&typeof p!="function"&&typeof p!="symbol"&&typeof p!="boolean"&&(t.type=p),n!=null||r!=null){if(!(p!=="submit"&&p!=="reset"||n!=null)){Oo(t);return}r=r!=null?""+$s(r):"",n=n!=null?""+$s(n):r,R||n===t.value||(t.value=n),t.defaultValue=n}o=o??m,o=typeof o!="function"&&typeof o!="symbol"&&!!o,t.checked=R?t.checked:!!o,t.defaultChecked=!!o,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(t.name=j),Oo(t)}function Lo(t,n,r){n==="number"&&br(t.ownerDocument)===t||t.defaultValue===""+r||(t.defaultValue=""+r)}function nl(t,n,r,o){if(t=t.options,n){n={};for(var m=0;m<r.length;m++)n["$"+r[m]]=!0;for(r=0;r<t.length;r++)m=n.hasOwnProperty("$"+t[r].value),t[r].selected!==m&&(t[r].selected=m),m&&o&&(t[r].defaultSelected=!0)}else{for(r=""+$s(r),n=null,m=0;m<t.length;m++){if(t[m].value===r){t[m].selected=!0,o&&(t[m].defaultSelected=!0);return}n!==null||t[m].disabled||(n=t[m])}n!==null&&(n.selected=!0)}}function Qh(t,n,r){if(n!=null&&(n=""+$s(n),n!==t.value&&(t.value=n),r==null)){t.defaultValue!==n&&(t.defaultValue=n);return}t.defaultValue=r!=null?""+$s(r):""}function Zh(t,n,r,o){if(n==null){if(o!=null){if(r!=null)throw Error(i(92));if(Y(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),n=r}r=$s(n),t.defaultValue=r,o=t.textContent,o===r&&o!==""&&o!==null&&(t.value=o),Oo(t)}function ll(t,n){if(n){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=n;return}}t.textContent=n}var iv=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Jh(t,n,r){var o=n.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?t.setProperty(n,""):n==="float"?t.cssFloat="":t[n]="":o?t.setProperty(n,r):typeof r!="number"||r===0||iv.has(n)?n==="float"?t.cssFloat=r:t[n]=(""+r).trim():t[n]=r+"px"}function em(t,n,r){if(n!=null&&typeof n!="object")throw Error(i(62));if(t=t.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||n!=null&&n.hasOwnProperty(o)||(o.indexOf("--")===0?t.setProperty(o,""):o==="float"?t.cssFloat="":t[o]="");for(var m in n)o=n[m],n.hasOwnProperty(m)&&r[m]!==o&&Jh(t,m,o)}else for(var p in n)n.hasOwnProperty(p)&&Jh(t,p,n[p])}function zo(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rv=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),cv=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function yr(t){return cv.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function pa(){}var Uo=null;function Bo(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var il=null,rl=null;function tm(t){var n=De(t);if(n&&(t=n.stateNode)){var r=t[he]||null;e:switch(t=n.stateNode,n.type){case"input":if(Io(t,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),n=r.name,r.type==="radio"&&n!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Os(""+n)+'"][type="radio"]'),n=0;n<r.length;n++){var o=r[n];if(o!==t&&o.form===t.form){var m=o[he]||null;if(!m)throw Error(i(90));Io(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name)}}for(n=0;n<r.length;n++)o=r[n],o.form===t.form&&Wh(o)}break e;case"textarea":Qh(t,r.value,r.defaultValue);break e;case"select":n=r.value,n!=null&&nl(t,!!r.multiple,n,!1)}}}var Fo=!1;function sm(t,n,r){if(Fo)return t(n,r);Fo=!0;try{var o=t(n);return o}finally{if(Fo=!1,(il!==null||rl!==null)&&(ic(),il&&(n=il,t=rl,rl=il=null,tm(n),t)))for(n=0;n<t.length;n++)tm(t[n])}}function Kl(t,n){var r=t.stateNode;if(r===null)return null;var o=r[he]||null;if(o===null)return null;r=o[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(i(231,n,typeof r));return r}var ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ho=!1;if(ga)try{var Ql={};Object.defineProperty(Ql,"passive",{get:function(){Ho=!0}}),window.addEventListener("test",Ql,Ql),window.removeEventListener("test",Ql,Ql)}catch{Ho=!1}var Ba=null,Vo=null,vr=null;function am(){if(vr)return vr;var t,n=Vo,r=n.length,o,m="value"in Ba?Ba.value:Ba.textContent,p=m.length;for(t=0;t<r&&n[t]===m[t];t++);var j=r-t;for(o=1;o<=j&&n[r-o]===m[p-o];o++);return vr=m.slice(t,1<o?1-o:void 0)}function jr(t){var n=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&n===13&&(t=13)):t=n,t===10&&(t=13),32<=t||t===13?t:0}function Nr(){return!0}function nm(){return!1}function ms(t){function n(r,o,m,p,j){this._reactName=r,this._targetInst=m,this.type=o,this.nativeEvent=p,this.target=j,this.currentTarget=null;for(var R in t)t.hasOwnProperty(R)&&(r=t[R],this[R]=r?r(p):p[R]);return this.isDefaultPrevented=(p.defaultPrevented!=null?p.defaultPrevented:p.returnValue===!1)?Nr:nm,this.isPropagationStopped=nm,this}return y(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Nr)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Nr)},persist:function(){},isPersistent:Nr}),n}var Cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Sr=ms(Cn),Zl=y({},Cn,{view:0,detail:0}),ov=ms(Zl),Yo,Po,Jl,wr=y({},Zl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Go,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jl&&(Jl&&t.type==="mousemove"?(Yo=t.screenX-Jl.screenX,Po=t.screenY-Jl.screenY):Po=Yo=0,Jl=t),Yo)},movementY:function(t){return"movementY"in t?t.movementY:Po}}),lm=ms(wr),dv=y({},wr,{dataTransfer:0}),uv=ms(dv),hv=y({},Zl,{relatedTarget:0}),qo=ms(hv),mv=y({},Cn,{animationName:0,elapsedTime:0,pseudoElement:0}),fv=ms(mv),pv=y({},Cn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),gv=ms(pv),xv=y({},Cn,{data:0}),im=ms(xv),bv={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yv={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vv={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jv(t){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(t):(t=vv[t])?!!n[t]:!1}function Go(){return jv}var Nv=y({},Zl,{key:function(t){if(t.key){var n=bv[t.key]||t.key;if(n!=="Unidentified")return n}return t.type==="keypress"?(t=jr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?yv[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Go,charCode:function(t){return t.type==="keypress"?jr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?jr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Sv=ms(Nv),wv=y({},wr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rm=ms(wv),Cv=y({},Zl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Go}),Av=ms(Cv),Ev=y({},Cn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Tv=ms(Ev),_v=y({},wr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kv=ms(_v),Dv=y({},Cn,{newState:0,oldState:0}),Mv=ms(Dv),Rv=[9,13,27,32],Xo=ga&&"CompositionEvent"in window,ei=null;ga&&"documentMode"in document&&(ei=document.documentMode);var $v=ga&&"TextEvent"in window&&!ei,cm=ga&&(!Xo||ei&&8<ei&&11>=ei),om=" ",dm=!1;function um(t,n){switch(t){case"keyup":return Rv.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var cl=!1;function Ov(t,n){switch(t){case"compositionend":return hm(n);case"keypress":return n.which!==32?null:(dm=!0,om);case"textInput":return t=n.data,t===om&&dm?null:t;default:return null}}function Iv(t,n){if(cl)return t==="compositionend"||!Xo&&um(t,n)?(t=am(),vr=Vo=Ba=null,cl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return cm&&n.locale!=="ko"?null:n.data;default:return null}}var Lv={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mm(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n==="input"?!!Lv[t.type]:n==="textarea"}function fm(t,n,r,o){il?rl?rl.push(o):rl=[o]:il=o,n=mc(n,"onChange"),0<n.length&&(r=new Sr("onChange","change",null,r,o),t.push({event:r,listeners:n}))}var ti=null,si=null;function zv(t){Qp(t,0)}function Cr(t){var n=ze(t);if(Wh(n))return t}function pm(t,n){if(t==="change")return n}var gm=!1;if(ga){var Wo;if(ga){var Ko="oninput"in document;if(!Ko){var xm=document.createElement("div");xm.setAttribute("oninput","return;"),Ko=typeof xm.oninput=="function"}Wo=Ko}else Wo=!1;gm=Wo&&(!document.documentMode||9<document.documentMode)}function bm(){ti&&(ti.detachEvent("onpropertychange",ym),si=ti=null)}function ym(t){if(t.propertyName==="value"&&Cr(si)){var n=[];fm(n,si,t,Bo(t)),sm(zv,n)}}function Uv(t,n,r){t==="focusin"?(bm(),ti=n,si=r,ti.attachEvent("onpropertychange",ym)):t==="focusout"&&bm()}function Bv(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cr(si)}function Fv(t,n){if(t==="click")return Cr(n)}function Hv(t,n){if(t==="input"||t==="change")return Cr(n)}function Vv(t,n){return t===n&&(t!==0||1/t===1/n)||t!==t&&n!==n}var Cs=typeof Object.is=="function"?Object.is:Vv;function ai(t,n){if(Cs(t,n))return!0;if(typeof t!="object"||t===null||typeof n!="object"||n===null)return!1;var r=Object.keys(t),o=Object.keys(n);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var m=r[o];if(!Le.call(n,m)||!Cs(t[m],n[m]))return!1}return!0}function vm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jm(t,n){var r=vm(t);t=0;for(var o;r;){if(r.nodeType===3){if(o=t+r.textContent.length,t<=n&&o>=n)return{node:r,offset:n-t};t=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=vm(r)}}function Nm(t,n){return t&&n?t===n?!0:t&&t.nodeType===3?!1:n&&n.nodeType===3?Nm(t,n.parentNode):"contains"in t?t.contains(n):t.compareDocumentPosition?!!(t.compareDocumentPosition(n)&16):!1:!1}function Sm(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var n=br(t.document);n instanceof t.HTMLIFrameElement;){try{var r=typeof n.contentWindow.location.href=="string"}catch{r=!1}if(r)t=n.contentWindow;else break;n=br(t.document)}return n}function Qo(t){var n=t&&t.nodeName&&t.nodeName.toLowerCase();return n&&(n==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||n==="textarea"||t.contentEditable==="true")}var Yv=ga&&"documentMode"in document&&11>=document.documentMode,ol=null,Zo=null,ni=null,Jo=!1;function wm(t,n,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Jo||ol==null||ol!==br(o)||(o=ol,"selectionStart"in o&&Qo(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),ni&&ai(ni,o)||(ni=o,o=mc(Zo,"onSelect"),0<o.length&&(n=new Sr("onSelect","select",null,n,r),t.push({event:n,listeners:o}),n.target=ol)))}function An(t,n){var r={};return r[t.toLowerCase()]=n.toLowerCase(),r["Webkit"+t]="webkit"+n,r["Moz"+t]="moz"+n,r}var dl={animationend:An("Animation","AnimationEnd"),animationiteration:An("Animation","AnimationIteration"),animationstart:An("Animation","AnimationStart"),transitionrun:An("Transition","TransitionRun"),transitionstart:An("Transition","TransitionStart"),transitioncancel:An("Transition","TransitionCancel"),transitionend:An("Transition","TransitionEnd")},ed={},Cm={};ga&&(Cm=document.createElement("div").style,"AnimationEvent"in window||(delete dl.animationend.animation,delete dl.animationiteration.animation,delete dl.animationstart.animation),"TransitionEvent"in window||delete dl.transitionend.transition);function En(t){if(ed[t])return ed[t];if(!dl[t])return t;var n=dl[t],r;for(r in n)if(n.hasOwnProperty(r)&&r in Cm)return ed[t]=n[r];return t}var Am=En("animationend"),Em=En("animationiteration"),Tm=En("animationstart"),Pv=En("transitionrun"),qv=En("transitionstart"),Gv=En("transitioncancel"),_m=En("transitionend"),km=new Map,td="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");td.push("scrollEnd");function Qs(t,n){km.set(t,n),at(n,[t])}var Ar=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Is=[],ul=0,sd=0;function Er(){for(var t=ul,n=sd=ul=0;n<t;){var r=Is[n];Is[n++]=null;var o=Is[n];Is[n++]=null;var m=Is[n];Is[n++]=null;var p=Is[n];if(Is[n++]=null,o!==null&&m!==null){var j=o.pending;j===null?m.next=m:(m.next=j.next,j.next=m),o.pending=m}p!==0&&Dm(r,m,p)}}function Tr(t,n,r,o){Is[ul++]=t,Is[ul++]=n,Is[ul++]=r,Is[ul++]=o,sd|=o,t.lanes|=o,t=t.alternate,t!==null&&(t.lanes|=o)}function ad(t,n,r,o){return Tr(t,n,r,o),_r(t)}function Tn(t,n){return Tr(t,null,null,n),_r(t)}function Dm(t,n,r){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r);for(var m=!1,p=t.return;p!==null;)p.childLanes|=r,o=p.alternate,o!==null&&(o.childLanes|=r),p.tag===22&&(t=p.stateNode,t===null||t._visibility&1||(m=!0)),t=p,p=p.return;return t.tag===3?(p=t.stateNode,m&&n!==null&&(m=31-ts(r),t=p.hiddenUpdates,o=t[m],o===null?t[m]=[n]:o.push(n),n.lane=r|536870912),p):null}function _r(t){if(50<Ai)throw Ai=0,hu=null,Error(i(185));for(var n=t.return;n!==null;)t=n,n=t.return;return t.tag===3?t.stateNode:null}var hl={};function Xv(t,n,r,o){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(t,n,r,o){return new Xv(t,n,r,o)}function nd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function xa(t,n){var r=t.alternate;return r===null?(r=As(t.tag,n,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=n,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&65011712,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,n=t.dependencies,r.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r.refCleanup=t.refCleanup,r}function Mm(t,n){t.flags&=65011714;var r=t.alternate;return r===null?(t.childLanes=0,t.lanes=n,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=r.childLanes,t.lanes=r.lanes,t.child=r.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=r.memoizedProps,t.memoizedState=r.memoizedState,t.updateQueue=r.updateQueue,t.type=r.type,n=r.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t}function kr(t,n,r,o,m,p){var j=0;if(o=t,typeof t=="function")nd(t)&&(j=1);else if(typeof t=="string")j=Jj(t,r,q.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case X:return t=As(31,r,n,m),t.elementType=X,t.lanes=p,t;case A:return _n(r.children,m,p,n);case S:j=8,m|=24;break;case E:return t=As(12,r,n,m|2),t.elementType=E,t.lanes=p,t;case V:return t=As(13,r,n,m),t.elementType=V,t.lanes=p,t;case _:return t=As(19,r,n,m),t.elementType=_,t.lanes=p,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case D:j=10;break e;case $:j=9;break e;case I:j=11;break e;case B:j=14;break e;case z:j=16,o=null;break e}j=29,r=Error(i(130,t===null?"null":typeof t,"")),o=null}return n=As(j,r,n,m),n.elementType=t,n.type=o,n.lanes=p,n}function _n(t,n,r,o){return t=As(7,t,o,n),t.lanes=r,t}function ld(t,n,r){return t=As(6,t,null,n),t.lanes=r,t}function Rm(t){var n=As(18,null,null,0);return n.stateNode=t,n}function id(t,n,r){return n=As(4,t.children!==null?t.children:[],t.key,n),n.lanes=r,n.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},n}var $m=new WeakMap;function Ls(t,n){if(typeof t=="object"&&t!==null){var r=$m.get(t);return r!==void 0?r:(n={value:t,source:n,stack:ge(n)},$m.set(t,n),n)}return{value:t,source:n,stack:ge(n)}}var ml=[],fl=0,Dr=null,li=0,zs=[],Us=0,Fa=null,ta=1,sa="";function ba(t,n){ml[fl++]=li,ml[fl++]=Dr,Dr=t,li=n}function Om(t,n,r){zs[Us++]=ta,zs[Us++]=sa,zs[Us++]=Fa,Fa=t;var o=ta;t=sa;var m=32-ts(o)-1;o&=~(1<<m),r+=1;var p=32-ts(n)+m;if(30<p){var j=m-m%5;p=(o&(1<<j)-1).toString(32),o>>=j,m-=j,ta=1<<32-ts(n)+m|r<<m|o,sa=p+t}else ta=1<<p|r<<m|o,sa=t}function rd(t){t.return!==null&&(ba(t,1),Om(t,1,0))}function cd(t){for(;t===Dr;)Dr=ml[--fl],ml[fl]=null,li=ml[--fl],ml[fl]=null;for(;t===Fa;)Fa=zs[--Us],zs[Us]=null,sa=zs[--Us],zs[Us]=null,ta=zs[--Us],zs[Us]=null}function Im(t,n){zs[Us++]=ta,zs[Us++]=sa,zs[Us++]=Fa,ta=n.id,sa=n.overflow,Fa=t}var as=null,_t=null,ut=!1,Ha=null,Bs=!1,od=Error(i(519));function Va(t){var n=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ii(Ls(n,t)),od}function Lm(t){var n=t.stateNode,r=t.type,o=t.memoizedProps;switch(n[H]=t,n[he]=o,r){case"dialog":rt("cancel",n),rt("close",n);break;case"iframe":case"object":case"embed":rt("load",n);break;case"video":case"audio":for(r=0;r<Ti.length;r++)rt(Ti[r],n);break;case"source":rt("error",n);break;case"img":case"image":case"link":rt("error",n),rt("load",n);break;case"details":rt("toggle",n);break;case"input":rt("invalid",n),Kh(n,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":rt("invalid",n);break;case"textarea":rt("invalid",n),Zh(n,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||n.textContent===""+r||o.suppressHydrationWarning===!0||tg(n.textContent,r)?(o.popover!=null&&(rt("beforetoggle",n),rt("toggle",n)),o.onScroll!=null&&rt("scroll",n),o.onScrollEnd!=null&&rt("scrollend",n),o.onClick!=null&&(n.onclick=pa),n=!0):n=!1,n||Va(t,!0)}function zm(t){for(as=t.return;as;)switch(as.tag){case 5:case 31:case 13:Bs=!1;return;case 27:case 3:Bs=!0;return;default:as=as.return}}function pl(t){if(t!==as)return!1;if(!ut)return zm(t),ut=!0,!1;var n=t.tag,r;if((r=n!==3&&n!==27)&&((r=n===5)&&(r=t.type,r=!(r!=="form"&&r!=="button")||Eu(t.type,t.memoizedProps)),r=!r),r&&_t&&Va(t),zm(t),n===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));_t=dg(t)}else if(n===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(317));_t=dg(t)}else n===27?(n=_t,an(t.type)?(t=Mu,Mu=null,_t=t):_t=n):_t=as?Hs(t.stateNode.nextSibling):null;return!0}function kn(){_t=as=null,ut=!1}function dd(){var t=Ha;return t!==null&&(xs===null?xs=t:xs.push.apply(xs,t),Ha=null),t}function ii(t){Ha===null?Ha=[t]:Ha.push(t)}var ud=k(null),Dn=null,ya=null;function Ya(t,n,r){se(ud,n._currentValue),n._currentValue=r}function va(t){t._currentValue=ud.current,G(ud)}function hd(t,n,r){for(;t!==null;){var o=t.alternate;if((t.childLanes&n)!==n?(t.childLanes|=n,o!==null&&(o.childLanes|=n)):o!==null&&(o.childLanes&n)!==n&&(o.childLanes|=n),t===r)break;t=t.return}}function md(t,n,r,o){var m=t.child;for(m!==null&&(m.return=t);m!==null;){var p=m.dependencies;if(p!==null){var j=m.child;p=p.firstContext;e:for(;p!==null;){var R=p;p=m;for(var K=0;K<n.length;K++)if(R.context===n[K]){p.lanes|=r,R=p.alternate,R!==null&&(R.lanes|=r),hd(p.return,r,t),o||(j=null);break e}p=R.next}}else if(m.tag===18){if(j=m.return,j===null)throw Error(i(341));j.lanes|=r,p=j.alternate,p!==null&&(p.lanes|=r),hd(j,r,t),j=null}else j=m.child;if(j!==null)j.return=m;else for(j=m;j!==null;){if(j===t){j=null;break}if(m=j.sibling,m!==null){m.return=j.return,j=m;break}j=j.return}m=j}}function gl(t,n,r,o){t=null;for(var m=n,p=!1;m!==null;){if(!p){if((m.flags&524288)!==0)p=!0;else if((m.flags&262144)!==0)break}if(m.tag===10){var j=m.alternate;if(j===null)throw Error(i(387));if(j=j.memoizedProps,j!==null){var R=m.type;Cs(m.pendingProps.value,j.value)||(t!==null?t.push(R):t=[R])}}else if(m===me.current){if(j=m.alternate,j===null)throw Error(i(387));j.memoizedState.memoizedState!==m.memoizedState.memoizedState&&(t!==null?t.push(Ri):t=[Ri])}m=m.return}t!==null&&md(n,t,r,o),n.flags|=262144}function Mr(t){for(t=t.firstContext;t!==null;){if(!Cs(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function Mn(t){Dn=t,ya=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function ns(t){return Um(Dn,t)}function Rr(t,n){return Dn===null&&Mn(t),Um(t,n)}function Um(t,n){var r=n._currentValue;if(n={context:n,memoizedValue:r,next:null},ya===null){if(t===null)throw Error(i(308));ya=n,t.dependencies={lanes:0,firstContext:n},t.flags|=524288}else ya=ya.next=n;return r}var Wv=typeof AbortController<"u"?AbortController:function(){var t=[],n=this.signal={aborted:!1,addEventListener:function(r,o){t.push(o)}};this.abort=function(){n.aborted=!0,t.forEach(function(r){return r()})}},Kv=a.unstable_scheduleCallback,Qv=a.unstable_NormalPriority,Yt={$$typeof:D,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fd(){return{controller:new Wv,data:new Map,refCount:0}}function ri(t){t.refCount--,t.refCount===0&&Kv(Qv,function(){t.controller.abort()})}var ci=null,pd=0,xl=0,bl=null;function Zv(t,n){if(ci===null){var r=ci=[];pd=0,xl=bu(),bl={status:"pending",value:void 0,then:function(o){r.push(o)}}}return pd++,n.then(Bm,Bm),n}function Bm(){if(--pd===0&&ci!==null){bl!==null&&(bl.status="fulfilled");var t=ci;ci=null,xl=0,bl=null;for(var n=0;n<t.length;n++)(0,t[n])()}}function Jv(t,n){var r=[],o={status:"pending",value:null,reason:null,then:function(m){r.push(m)}};return t.then(function(){o.status="fulfilled",o.value=n;for(var m=0;m<r.length;m++)(0,r[m])(n)},function(m){for(o.status="rejected",o.reason=m,m=0;m<r.length;m++)(0,r[m])(void 0)}),o}var Fm=N.S;N.S=function(t,n){Cp=Xe(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Zv(t,n),Fm!==null&&Fm(t,n)};var Rn=k(null);function gd(){var t=Rn.current;return t!==null?t:At.pooledCache}function $r(t,n){n===null?se(Rn,Rn.current):se(Rn,n.pool)}function Hm(){var t=gd();return t===null?null:{parent:Yt._currentValue,pool:t}}var yl=Error(i(460)),xd=Error(i(474)),Or=Error(i(542)),Ir={then:function(){}};function Vm(t){return t=t.status,t==="fulfilled"||t==="rejected"}function Ym(t,n,r){switch(r=t[r],r===void 0?t.push(n):r!==n&&(n.then(pa,pa),n=r),n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,qm(t),t;default:if(typeof n.status=="string")n.then(pa,pa);else{if(t=At,t!==null&&100<t.shellSuspendCounter)throw Error(i(482));t=n,t.status="pending",t.then(function(o){if(n.status==="pending"){var m=n;m.status="fulfilled",m.value=o}},function(o){if(n.status==="pending"){var m=n;m.status="rejected",m.reason=o}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw t=n.reason,qm(t),t}throw On=n,yl}}function $n(t){try{var n=t._init;return n(t._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(On=r,yl):r}}var On=null;function Pm(){if(On===null)throw Error(i(459));var t=On;return On=null,t}function qm(t){if(t===yl||t===Or)throw Error(i(483))}var vl=null,oi=0;function Lr(t){var n=oi;return oi+=1,vl===null&&(vl=[]),Ym(vl,t,n)}function di(t,n){n=n.props.ref,t.ref=n!==void 0?n:null}function zr(t,n){throw n.$$typeof===v?Error(i(525)):(t=Object.prototype.toString.call(n),Error(i(31,t==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":t)))}function Gm(t){function n(ae,Z){if(t){var ne=ae.deletions;ne===null?(ae.deletions=[Z],ae.flags|=16):ne.push(Z)}}function r(ae,Z){if(!t)return null;for(;Z!==null;)n(ae,Z),Z=Z.sibling;return null}function o(ae){for(var Z=new Map;ae!==null;)ae.key!==null?Z.set(ae.key,ae):Z.set(ae.index,ae),ae=ae.sibling;return Z}function m(ae,Z){return ae=xa(ae,Z),ae.index=0,ae.sibling=null,ae}function p(ae,Z,ne){return ae.index=ne,t?(ne=ae.alternate,ne!==null?(ne=ne.index,ne<Z?(ae.flags|=67108866,Z):ne):(ae.flags|=67108866,Z)):(ae.flags|=1048576,Z)}function j(ae){return t&&ae.alternate===null&&(ae.flags|=67108866),ae}function R(ae,Z,ne,ye){return Z===null||Z.tag!==6?(Z=ld(ne,ae.mode,ye),Z.return=ae,Z):(Z=m(Z,ne),Z.return=ae,Z)}function K(ae,Z,ne,ye){var Ge=ne.type;return Ge===A?pe(ae,Z,ne.props.children,ye,ne.key):Z!==null&&(Z.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===z&&$n(Ge)===Z.type)?(Z=m(Z,ne.props),di(Z,ne),Z.return=ae,Z):(Z=kr(ne.type,ne.key,ne.props,null,ae.mode,ye),di(Z,ne),Z.return=ae,Z)}function le(ae,Z,ne,ye){return Z===null||Z.tag!==4||Z.stateNode.containerInfo!==ne.containerInfo||Z.stateNode.implementation!==ne.implementation?(Z=id(ne,ae.mode,ye),Z.return=ae,Z):(Z=m(Z,ne.children||[]),Z.return=ae,Z)}function pe(ae,Z,ne,ye,Ge){return Z===null||Z.tag!==7?(Z=_n(ne,ae.mode,ye,Ge),Z.return=ae,Z):(Z=m(Z,ne),Z.return=ae,Z)}function je(ae,Z,ne){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Z=ld(""+Z,ae.mode,ne),Z.return=ae,Z;if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case C:return ne=kr(Z.type,Z.key,Z.props,null,ae.mode,ne),di(ne,Z),ne.return=ae,ne;case w:return Z=id(Z,ae.mode,ne),Z.return=ae,Z;case z:return Z=$n(Z),je(ae,Z,ne)}if(Y(Z)||F(Z))return Z=_n(Z,ae.mode,ne,null),Z.return=ae,Z;if(typeof Z.then=="function")return je(ae,Lr(Z),ne);if(Z.$$typeof===D)return je(ae,Rr(ae,Z),ne);zr(ae,Z)}return null}function ie(ae,Z,ne,ye){var Ge=Z!==null?Z.key:null;if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return Ge!==null?null:R(ae,Z,""+ne,ye);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case C:return ne.key===Ge?K(ae,Z,ne,ye):null;case w:return ne.key===Ge?le(ae,Z,ne,ye):null;case z:return ne=$n(ne),ie(ae,Z,ne,ye)}if(Y(ne)||F(ne))return Ge!==null?null:pe(ae,Z,ne,ye,null);if(typeof ne.then=="function")return ie(ae,Z,Lr(ne),ye);if(ne.$$typeof===D)return ie(ae,Z,Rr(ae,ne),ye);zr(ae,ne)}return null}function de(ae,Z,ne,ye,Ge){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return ae=ae.get(ne)||null,R(Z,ae,""+ye,Ge);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case C:return ae=ae.get(ye.key===null?ne:ye.key)||null,K(Z,ae,ye,Ge);case w:return ae=ae.get(ye.key===null?ne:ye.key)||null,le(Z,ae,ye,Ge);case z:return ye=$n(ye),de(ae,Z,ne,ye,Ge)}if(Y(ye)||F(ye))return ae=ae.get(ne)||null,pe(Z,ae,ye,Ge,null);if(typeof ye.then=="function")return de(ae,Z,ne,Lr(ye),Ge);if(ye.$$typeof===D)return de(ae,Z,ne,Rr(Z,ye),Ge);zr(Z,ye)}return null}function Ue(ae,Z,ne,ye){for(var Ge=null,ft=null,Pe=Z,nt=Z=0,ot=null;Pe!==null&&nt<ne.length;nt++){Pe.index>nt?(ot=Pe,Pe=null):ot=Pe.sibling;var pt=ie(ae,Pe,ne[nt],ye);if(pt===null){Pe===null&&(Pe=ot);break}t&&Pe&&pt.alternate===null&&n(ae,Pe),Z=p(pt,Z,nt),ft===null?Ge=pt:ft.sibling=pt,ft=pt,Pe=ot}if(nt===ne.length)return r(ae,Pe),ut&&ba(ae,nt),Ge;if(Pe===null){for(;nt<ne.length;nt++)Pe=je(ae,ne[nt],ye),Pe!==null&&(Z=p(Pe,Z,nt),ft===null?Ge=Pe:ft.sibling=Pe,ft=Pe);return ut&&ba(ae,nt),Ge}for(Pe=o(Pe);nt<ne.length;nt++)ot=de(Pe,ae,nt,ne[nt],ye),ot!==null&&(t&&ot.alternate!==null&&Pe.delete(ot.key===null?nt:ot.key),Z=p(ot,Z,nt),ft===null?Ge=ot:ft.sibling=ot,ft=ot);return t&&Pe.forEach(function(on){return n(ae,on)}),ut&&ba(ae,nt),Ge}function We(ae,Z,ne,ye){if(ne==null)throw Error(i(151));for(var Ge=null,ft=null,Pe=Z,nt=Z=0,ot=null,pt=ne.next();Pe!==null&&!pt.done;nt++,pt=ne.next()){Pe.index>nt?(ot=Pe,Pe=null):ot=Pe.sibling;var on=ie(ae,Pe,pt.value,ye);if(on===null){Pe===null&&(Pe=ot);break}t&&Pe&&on.alternate===null&&n(ae,Pe),Z=p(on,Z,nt),ft===null?Ge=on:ft.sibling=on,ft=on,Pe=ot}if(pt.done)return r(ae,Pe),ut&&ba(ae,nt),Ge;if(Pe===null){for(;!pt.done;nt++,pt=ne.next())pt=je(ae,pt.value,ye),pt!==null&&(Z=p(pt,Z,nt),ft===null?Ge=pt:ft.sibling=pt,ft=pt);return ut&&ba(ae,nt),Ge}for(Pe=o(Pe);!pt.done;nt++,pt=ne.next())pt=de(Pe,ae,nt,pt.value,ye),pt!==null&&(t&&pt.alternate!==null&&Pe.delete(pt.key===null?nt:pt.key),Z=p(pt,Z,nt),ft===null?Ge=pt:ft.sibling=pt,ft=pt);return t&&Pe.forEach(function(dN){return n(ae,dN)}),ut&&ba(ae,nt),Ge}function Ct(ae,Z,ne,ye){if(typeof ne=="object"&&ne!==null&&ne.type===A&&ne.key===null&&(ne=ne.props.children),typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case C:e:{for(var Ge=ne.key;Z!==null;){if(Z.key===Ge){if(Ge=ne.type,Ge===A){if(Z.tag===7){r(ae,Z.sibling),ye=m(Z,ne.props.children),ye.return=ae,ae=ye;break e}}else if(Z.elementType===Ge||typeof Ge=="object"&&Ge!==null&&Ge.$$typeof===z&&$n(Ge)===Z.type){r(ae,Z.sibling),ye=m(Z,ne.props),di(ye,ne),ye.return=ae,ae=ye;break e}r(ae,Z);break}else n(ae,Z);Z=Z.sibling}ne.type===A?(ye=_n(ne.props.children,ae.mode,ye,ne.key),ye.return=ae,ae=ye):(ye=kr(ne.type,ne.key,ne.props,null,ae.mode,ye),di(ye,ne),ye.return=ae,ae=ye)}return j(ae);case w:e:{for(Ge=ne.key;Z!==null;){if(Z.key===Ge)if(Z.tag===4&&Z.stateNode.containerInfo===ne.containerInfo&&Z.stateNode.implementation===ne.implementation){r(ae,Z.sibling),ye=m(Z,ne.children||[]),ye.return=ae,ae=ye;break e}else{r(ae,Z);break}else n(ae,Z);Z=Z.sibling}ye=id(ne,ae.mode,ye),ye.return=ae,ae=ye}return j(ae);case z:return ne=$n(ne),Ct(ae,Z,ne,ye)}if(Y(ne))return Ue(ae,Z,ne,ye);if(F(ne)){if(Ge=F(ne),typeof Ge!="function")throw Error(i(150));return ne=Ge.call(ne),We(ae,Z,ne,ye)}if(typeof ne.then=="function")return Ct(ae,Z,Lr(ne),ye);if(ne.$$typeof===D)return Ct(ae,Z,Rr(ae,ne),ye);zr(ae,ne)}return typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint"?(ne=""+ne,Z!==null&&Z.tag===6?(r(ae,Z.sibling),ye=m(Z,ne),ye.return=ae,ae=ye):(r(ae,Z),ye=ld(ne,ae.mode,ye),ye.return=ae,ae=ye),j(ae)):r(ae,Z)}return function(ae,Z,ne,ye){try{oi=0;var Ge=Ct(ae,Z,ne,ye);return vl=null,Ge}catch(Pe){if(Pe===yl||Pe===Or)throw Pe;var ft=As(29,Pe,null,ae.mode);return ft.lanes=ye,ft.return=ae,ft}finally{}}}var In=Gm(!0),Xm=Gm(!1),Pa=!1;function bd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function yd(t,n){t=t.updateQueue,n.updateQueue===t&&(n.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function qa(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ga(t,n,r){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,(bt&2)!==0){var m=o.pending;return m===null?n.next=n:(n.next=m.next,m.next=n),o.pending=n,n=_r(t),Dm(t,null,r),n}return Tr(t,o,n,r),_r(t)}function ui(t,n,r){if(n=n.updateQueue,n!==null&&(n=n.shared,(r&4194048)!==0)){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,Jn(t,r)}}function vd(t,n){var r=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var m=null,p=null;if(r=r.firstBaseUpdate,r!==null){do{var j={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};p===null?m=p=j:p=p.next=j,r=r.next}while(r!==null);p===null?m=p=n:p=p.next=n}else m=p=n;r={baseState:o.baseState,firstBaseUpdate:m,lastBaseUpdate:p,shared:o.shared,callbacks:o.callbacks},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=n:t.next=n,r.lastBaseUpdate=n}var jd=!1;function hi(){if(jd){var t=bl;if(t!==null)throw t}}function mi(t,n,r,o){jd=!1;var m=t.updateQueue;Pa=!1;var p=m.firstBaseUpdate,j=m.lastBaseUpdate,R=m.shared.pending;if(R!==null){m.shared.pending=null;var K=R,le=K.next;K.next=null,j===null?p=le:j.next=le,j=K;var pe=t.alternate;pe!==null&&(pe=pe.updateQueue,R=pe.lastBaseUpdate,R!==j&&(R===null?pe.firstBaseUpdate=le:R.next=le,pe.lastBaseUpdate=K))}if(p!==null){var je=m.baseState;j=0,pe=le=K=null,R=p;do{var ie=R.lane&-536870913,de=ie!==R.lane;if(de?(ct&ie)===ie:(o&ie)===ie){ie!==0&&ie===xl&&(jd=!0),pe!==null&&(pe=pe.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Ue=t,We=R;ie=n;var Ct=r;switch(We.tag){case 1:if(Ue=We.payload,typeof Ue=="function"){je=Ue.call(Ct,je,ie);break e}je=Ue;break e;case 3:Ue.flags=Ue.flags&-65537|128;case 0:if(Ue=We.payload,ie=typeof Ue=="function"?Ue.call(Ct,je,ie):Ue,ie==null)break e;je=y({},je,ie);break e;case 2:Pa=!0}}ie=R.callback,ie!==null&&(t.flags|=64,de&&(t.flags|=8192),de=m.callbacks,de===null?m.callbacks=[ie]:de.push(ie))}else de={lane:ie,tag:R.tag,payload:R.payload,callback:R.callback,next:null},pe===null?(le=pe=de,K=je):pe=pe.next=de,j|=ie;if(R=R.next,R===null){if(R=m.shared.pending,R===null)break;de=R,R=de.next,de.next=null,m.lastBaseUpdate=de,m.shared.pending=null}}while(!0);pe===null&&(K=je),m.baseState=K,m.firstBaseUpdate=le,m.lastBaseUpdate=pe,p===null&&(m.shared.lanes=0),Za|=j,t.lanes=j,t.memoizedState=je}}function Wm(t,n){if(typeof t!="function")throw Error(i(191,t));t.call(n)}function Km(t,n){var r=t.callbacks;if(r!==null)for(t.callbacks=null,t=0;t<r.length;t++)Wm(r[t],n)}var jl=k(null),Ur=k(0);function Qm(t,n){t=_a,se(Ur,t),se(jl,n),_a=t|n.baseLanes}function Nd(){se(Ur,_a),se(jl,jl.current)}function Sd(){_a=Ur.current,G(jl),G(Ur)}var Es=k(null),Fs=null;function Xa(t){var n=t.alternate;se(Ut,Ut.current&1),se(Es,t),Fs===null&&(n===null||jl.current!==null||n.memoizedState!==null)&&(Fs=t)}function wd(t){se(Ut,Ut.current),se(Es,t),Fs===null&&(Fs=t)}function Zm(t){t.tag===22?(se(Ut,Ut.current),se(Es,t),Fs===null&&(Fs=t)):Wa()}function Wa(){se(Ut,Ut.current),se(Es,Es.current)}function Ts(t){G(Es),Fs===t&&(Fs=null),G(Ut)}var Ut=k(0);function Br(t){for(var n=t;n!==null;){if(n.tag===13){var r=n.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||ku(r)||Du(r)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ja=0,st=null,St=null,Pt=null,Fr=!1,Nl=!1,Ln=!1,Hr=0,fi=0,Sl=null,ej=0;function Lt(){throw Error(i(321))}function Cd(t,n){if(n===null)return!1;for(var r=0;r<n.length&&r<t.length;r++)if(!Cs(t[r],n[r]))return!1;return!0}function Ad(t,n,r,o,m,p){return ja=p,st=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,N.H=t===null||t.memoizedState===null?If:Fd,Ln=!1,p=r(o,m),Ln=!1,Nl&&(p=ef(n,r,o,m)),Jm(t),p}function Jm(t){N.H=xi;var n=St!==null&&St.next!==null;if(ja=0,Pt=St=st=null,Fr=!1,fi=0,Sl=null,n)throw Error(i(300));t===null||qt||(t=t.dependencies,t!==null&&Mr(t)&&(qt=!0))}function ef(t,n,r,o){st=t;var m=0;do{if(Nl&&(Sl=null),fi=0,Nl=!1,25<=m)throw Error(i(301));if(m+=1,Pt=St=null,t.updateQueue!=null){var p=t.updateQueue;p.lastEffect=null,p.events=null,p.stores=null,p.memoCache!=null&&(p.memoCache.index=0)}N.H=Lf,p=n(r,o)}while(Nl);return p}function tj(){var t=N.H,n=t.useState()[0];return n=typeof n.then=="function"?pi(n):n,t=t.useState()[0],(St!==null?St.memoizedState:null)!==t&&(st.flags|=1024),n}function Ed(){var t=Hr!==0;return Hr=0,t}function Td(t,n,r){n.updateQueue=t.updateQueue,n.flags&=-2053,t.lanes&=~r}function _d(t){if(Fr){for(t=t.memoizedState;t!==null;){var n=t.queue;n!==null&&(n.pending=null),t=t.next}Fr=!1}ja=0,Pt=St=st=null,Nl=!1,fi=Hr=0,Sl=null}function hs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pt===null?st.memoizedState=Pt=t:Pt=Pt.next=t,Pt}function Bt(){if(St===null){var t=st.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var n=Pt===null?st.memoizedState:Pt.next;if(n!==null)Pt=n,St=t;else{if(t===null)throw st.alternate===null?Error(i(467)):Error(i(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Pt===null?st.memoizedState=Pt=t:Pt=Pt.next=t}return Pt}function Vr(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function pi(t){var n=fi;return fi+=1,Sl===null&&(Sl=[]),t=Ym(Sl,t,n),n=st,(Pt===null?n.memoizedState:Pt.next)===null&&(n=n.alternate,N.H=n===null||n.memoizedState===null?If:Fd),t}function Yr(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return pi(t);if(t.$$typeof===D)return ns(t)}throw Error(i(438,String(t)))}function kd(t){var n=null,r=st.updateQueue;if(r!==null&&(n=r.memoCache),n==null){var o=st.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(n={data:o.data.map(function(m){return m.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),r===null&&(r=Vr(),st.updateQueue=r),r.memoCache=n,r=n.data[n.index],r===void 0)for(r=n.data[n.index]=Array(t),o=0;o<t;o++)r[o]=T;return n.index++,r}function Na(t,n){return typeof n=="function"?n(t):n}function Pr(t){var n=Bt();return Dd(n,St,t)}function Dd(t,n,r){var o=t.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var m=t.baseQueue,p=o.pending;if(p!==null){if(m!==null){var j=m.next;m.next=p.next,p.next=j}n.baseQueue=m=p,o.pending=null}if(p=t.baseState,m===null)t.memoizedState=p;else{n=m.next;var R=j=null,K=null,le=n,pe=!1;do{var je=le.lane&-536870913;if(je!==le.lane?(ct&je)===je:(ja&je)===je){var ie=le.revertLane;if(ie===0)K!==null&&(K=K.next={lane:0,revertLane:0,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null}),je===xl&&(pe=!0);else if((ja&ie)===ie){le=le.next,ie===xl&&(pe=!0);continue}else je={lane:0,revertLane:le.revertLane,gesture:null,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(R=K=je,j=p):K=K.next=je,st.lanes|=ie,Za|=ie;je=le.action,Ln&&r(p,je),p=le.hasEagerState?le.eagerState:r(p,je)}else ie={lane:je,revertLane:le.revertLane,gesture:le.gesture,action:le.action,hasEagerState:le.hasEagerState,eagerState:le.eagerState,next:null},K===null?(R=K=ie,j=p):K=K.next=ie,st.lanes|=je,Za|=je;le=le.next}while(le!==null&&le!==n);if(K===null?j=p:K.next=R,!Cs(p,t.memoizedState)&&(qt=!0,pe&&(r=bl,r!==null)))throw r;t.memoizedState=p,t.baseState=j,t.baseQueue=K,o.lastRenderedState=p}return m===null&&(o.lanes=0),[t.memoizedState,o.dispatch]}function Md(t){var n=Bt(),r=n.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=t;var o=r.dispatch,m=r.pending,p=n.memoizedState;if(m!==null){r.pending=null;var j=m=m.next;do p=t(p,j.action),j=j.next;while(j!==m);Cs(p,n.memoizedState)||(qt=!0),n.memoizedState=p,n.baseQueue===null&&(n.baseState=p),r.lastRenderedState=p}return[p,o]}function tf(t,n,r){var o=st,m=Bt(),p=ut;if(p){if(r===void 0)throw Error(i(407));r=r()}else r=n();var j=!Cs((St||m).memoizedState,r);if(j&&(m.memoizedState=r,qt=!0),m=m.queue,Od(nf.bind(null,o,m,t),[t]),m.getSnapshot!==n||j||Pt!==null&&Pt.memoizedState.tag&1){if(o.flags|=2048,wl(9,{destroy:void 0},af.bind(null,o,m,r,n),null),At===null)throw Error(i(349));p||(ja&127)!==0||sf(o,n,r)}return r}function sf(t,n,r){t.flags|=16384,t={getSnapshot:n,value:r},n=st.updateQueue,n===null?(n=Vr(),st.updateQueue=n,n.stores=[t]):(r=n.stores,r===null?n.stores=[t]:r.push(t))}function af(t,n,r,o){n.value=r,n.getSnapshot=o,lf(n)&&rf(t)}function nf(t,n,r){return r(function(){lf(n)&&rf(t)})}function lf(t){var n=t.getSnapshot;t=t.value;try{var r=n();return!Cs(t,r)}catch{return!0}}function rf(t){var n=Tn(t,2);n!==null&&bs(n,t,2)}function Rd(t){var n=hs();if(typeof t=="function"){var r=t;if(t=r(),Ln){Xs(!0);try{r()}finally{Xs(!1)}}}return n.memoizedState=n.baseState=t,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:t},n}function cf(t,n,r,o){return t.baseState=r,Dd(t,St,typeof o=="function"?o:Na)}function sj(t,n,r,o,m){if(Xr(t))throw Error(i(485));if(t=n.action,t!==null){var p={payload:m,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){p.listeners.push(j)}};N.T!==null?r(!0):p.isTransition=!1,o(p),r=n.pending,r===null?(p.next=n.pending=p,of(n,p)):(p.next=r.next,n.pending=r.next=p)}}function of(t,n){var r=n.action,o=n.payload,m=t.state;if(n.isTransition){var p=N.T,j={};N.T=j;try{var R=r(m,o),K=N.S;K!==null&&K(j,R),df(t,n,R)}catch(le){$d(t,n,le)}finally{p!==null&&j.types!==null&&(p.types=j.types),N.T=p}}else try{p=r(m,o),df(t,n,p)}catch(le){$d(t,n,le)}}function df(t,n,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){uf(t,n,o)},function(o){return $d(t,n,o)}):uf(t,n,r)}function uf(t,n,r){n.status="fulfilled",n.value=r,hf(n),t.state=r,n=t.pending,n!==null&&(r=n.next,r===n?t.pending=null:(r=r.next,n.next=r,of(t,r)))}function $d(t,n,r){var o=t.pending;if(t.pending=null,o!==null){o=o.next;do n.status="rejected",n.reason=r,hf(n),n=n.next;while(n!==o)}t.action=null}function hf(t){t=t.listeners;for(var n=0;n<t.length;n++)(0,t[n])()}function mf(t,n){return n}function ff(t,n){if(ut){var r=At.formState;if(r!==null){e:{var o=st;if(ut){if(_t){t:{for(var m=_t,p=Bs;m.nodeType!==8;){if(!p){m=null;break t}if(m=Hs(m.nextSibling),m===null){m=null;break t}}p=m.data,m=p==="F!"||p==="F"?m:null}if(m){_t=Hs(m.nextSibling),o=m.data==="F!";break e}}Va(o)}o=!1}o&&(n=r[0])}}return r=hs(),r.memoizedState=r.baseState=n,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:mf,lastRenderedState:n},r.queue=o,r=Rf.bind(null,st,o),o.dispatch=r,o=Rd(!1),p=Bd.bind(null,st,!1,o.queue),o=hs(),m={state:n,dispatch:null,action:t,pending:null},o.queue=m,r=sj.bind(null,st,m,p,r),m.dispatch=r,o.memoizedState=t,[n,r,!1]}function pf(t){var n=Bt();return gf(n,St,t)}function gf(t,n,r){if(n=Dd(t,n,mf)[0],t=Pr(Na)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var o=pi(n)}catch(j){throw j===yl?Or:j}else o=n;n=Bt();var m=n.queue,p=m.dispatch;return r!==n.memoizedState&&(st.flags|=2048,wl(9,{destroy:void 0},aj.bind(null,m,r),null)),[o,p,t]}function aj(t,n){t.action=n}function xf(t){var n=Bt(),r=St;if(r!==null)return gf(n,r,t);Bt(),n=n.memoizedState,r=Bt();var o=r.queue.dispatch;return r.memoizedState=t,[n,o,!1]}function wl(t,n,r,o){return t={tag:t,create:r,deps:o,inst:n,next:null},n=st.updateQueue,n===null&&(n=Vr(),st.updateQueue=n),r=n.lastEffect,r===null?n.lastEffect=t.next=t:(o=r.next,r.next=t,t.next=o,n.lastEffect=t),t}function bf(){return Bt().memoizedState}function qr(t,n,r,o){var m=hs();st.flags|=t,m.memoizedState=wl(1|n,{destroy:void 0},r,o===void 0?null:o)}function Gr(t,n,r,o){var m=Bt();o=o===void 0?null:o;var p=m.memoizedState.inst;St!==null&&o!==null&&Cd(o,St.memoizedState.deps)?m.memoizedState=wl(n,p,r,o):(st.flags|=t,m.memoizedState=wl(1|n,p,r,o))}function yf(t,n){qr(8390656,8,t,n)}function Od(t,n){Gr(2048,8,t,n)}function nj(t){st.flags|=4;var n=st.updateQueue;if(n===null)n=Vr(),st.updateQueue=n,n.events=[t];else{var r=n.events;r===null?n.events=[t]:r.push(t)}}function vf(t){var n=Bt().memoizedState;return nj({ref:n,nextImpl:t}),function(){if((bt&2)!==0)throw Error(i(440));return n.impl.apply(void 0,arguments)}}function jf(t,n){return Gr(4,2,t,n)}function Nf(t,n){return Gr(4,4,t,n)}function Sf(t,n){if(typeof n=="function"){t=t();var r=n(t);return function(){typeof r=="function"?r():n(null)}}if(n!=null)return t=t(),n.current=t,function(){n.current=null}}function wf(t,n,r){r=r!=null?r.concat([t]):null,Gr(4,4,Sf.bind(null,n,t),r)}function Id(){}function Cf(t,n){var r=Bt();n=n===void 0?null:n;var o=r.memoizedState;return n!==null&&Cd(n,o[1])?o[0]:(r.memoizedState=[t,n],t)}function Af(t,n){var r=Bt();n=n===void 0?null:n;var o=r.memoizedState;if(n!==null&&Cd(n,o[1]))return o[0];if(o=t(),Ln){Xs(!0);try{t()}finally{Xs(!1)}}return r.memoizedState=[o,n],o}function Ld(t,n,r){return r===void 0||(ja&1073741824)!==0&&(ct&261930)===0?t.memoizedState=n:(t.memoizedState=r,t=Ep(),st.lanes|=t,Za|=t,r)}function Ef(t,n,r,o){return Cs(r,n)?r:jl.current!==null?(t=Ld(t,r,o),Cs(t,n)||(qt=!0),t):(ja&42)===0||(ja&1073741824)!==0&&(ct&261930)===0?(qt=!0,t.memoizedState=r):(t=Ep(),st.lanes|=t,Za|=t,n)}function Tf(t,n,r,o,m){var p=M.p;M.p=p!==0&&8>p?p:8;var j=N.T,R={};N.T=R,Bd(t,!1,n,r);try{var K=m(),le=N.S;if(le!==null&&le(R,K),K!==null&&typeof K=="object"&&typeof K.then=="function"){var pe=Jv(K,o);gi(t,n,pe,Ds(t))}else gi(t,n,o,Ds(t))}catch(je){gi(t,n,{then:function(){},status:"rejected",reason:je},Ds())}finally{M.p=p,j!==null&&R.types!==null&&(j.types=R.types),N.T=j}}function lj(){}function zd(t,n,r,o){if(t.tag!==5)throw Error(i(476));var m=_f(t).queue;Tf(t,m,n,L,r===null?lj:function(){return kf(t),r(o)})}function _f(t){var n=t.memoizedState;if(n!==null)return n;n={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:L},next:null};var r={};return n.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Na,lastRenderedState:r},next:null},t.memoizedState=n,t=t.alternate,t!==null&&(t.memoizedState=n),n}function kf(t){var n=_f(t);n.next===null&&(n=t.alternate.memoizedState),gi(t,n.next.queue,{},Ds())}function Ud(){return ns(Ri)}function Df(){return Bt().memoizedState}function Mf(){return Bt().memoizedState}function ij(t){for(var n=t.return;n!==null;){switch(n.tag){case 24:case 3:var r=Ds();t=qa(r);var o=Ga(n,t,r);o!==null&&(bs(o,n,r),ui(o,n,r)),n={cache:fd()},t.payload=n;return}n=n.return}}function rj(t,n,r){var o=Ds();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Xr(t)?$f(n,r):(r=ad(t,n,r,o),r!==null&&(bs(r,t,o),Of(r,n,o)))}function Rf(t,n,r){var o=Ds();gi(t,n,r,o)}function gi(t,n,r,o){var m={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Xr(t))$f(n,m);else{var p=t.alternate;if(t.lanes===0&&(p===null||p.lanes===0)&&(p=n.lastRenderedReducer,p!==null))try{var j=n.lastRenderedState,R=p(j,r);if(m.hasEagerState=!0,m.eagerState=R,Cs(R,j))return Tr(t,n,m,0),At===null&&Er(),!1}catch{}finally{}if(r=ad(t,n,m,o),r!==null)return bs(r,t,o),Of(r,n,o),!0}return!1}function Bd(t,n,r,o){if(o={lane:2,revertLane:bu(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},Xr(t)){if(n)throw Error(i(479))}else n=ad(t,r,o,2),n!==null&&bs(n,t,2)}function Xr(t){var n=t.alternate;return t===st||n!==null&&n===st}function $f(t,n){Nl=Fr=!0;var r=t.pending;r===null?n.next=n:(n.next=r.next,r.next=n),t.pending=n}function Of(t,n,r){if((r&4194048)!==0){var o=n.lanes;o&=t.pendingLanes,r|=o,n.lanes=r,Jn(t,r)}}var xi={readContext:ns,use:Yr,useCallback:Lt,useContext:Lt,useEffect:Lt,useImperativeHandle:Lt,useLayoutEffect:Lt,useInsertionEffect:Lt,useMemo:Lt,useReducer:Lt,useRef:Lt,useState:Lt,useDebugValue:Lt,useDeferredValue:Lt,useTransition:Lt,useSyncExternalStore:Lt,useId:Lt,useHostTransitionStatus:Lt,useFormState:Lt,useActionState:Lt,useOptimistic:Lt,useMemoCache:Lt,useCacheRefresh:Lt};xi.useEffectEvent=Lt;var If={readContext:ns,use:Yr,useCallback:function(t,n){return hs().memoizedState=[t,n===void 0?null:n],t},useContext:ns,useEffect:yf,useImperativeHandle:function(t,n,r){r=r!=null?r.concat([t]):null,qr(4194308,4,Sf.bind(null,n,t),r)},useLayoutEffect:function(t,n){return qr(4194308,4,t,n)},useInsertionEffect:function(t,n){qr(4,2,t,n)},useMemo:function(t,n){var r=hs();n=n===void 0?null:n;var o=t();if(Ln){Xs(!0);try{t()}finally{Xs(!1)}}return r.memoizedState=[o,n],o},useReducer:function(t,n,r){var o=hs();if(r!==void 0){var m=r(n);if(Ln){Xs(!0);try{r(n)}finally{Xs(!1)}}}else m=n;return o.memoizedState=o.baseState=m,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:m},o.queue=t,t=t.dispatch=rj.bind(null,st,t),[o.memoizedState,t]},useRef:function(t){var n=hs();return t={current:t},n.memoizedState=t},useState:function(t){t=Rd(t);var n=t.queue,r=Rf.bind(null,st,n);return n.dispatch=r,[t.memoizedState,r]},useDebugValue:Id,useDeferredValue:function(t,n){var r=hs();return Ld(r,t,n)},useTransition:function(){var t=Rd(!1);return t=Tf.bind(null,st,t.queue,!0,!1),hs().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,n,r){var o=st,m=hs();if(ut){if(r===void 0)throw Error(i(407));r=r()}else{if(r=n(),At===null)throw Error(i(349));(ct&127)!==0||sf(o,n,r)}m.memoizedState=r;var p={value:r,getSnapshot:n};return m.queue=p,yf(nf.bind(null,o,p,t),[t]),o.flags|=2048,wl(9,{destroy:void 0},af.bind(null,o,p,r,n),null),r},useId:function(){var t=hs(),n=At.identifierPrefix;if(ut){var r=sa,o=ta;r=(o&~(1<<32-ts(o)-1)).toString(32)+r,n="_"+n+"R_"+r,r=Hr++,0<r&&(n+="H"+r.toString(32)),n+="_"}else r=ej++,n="_"+n+"r_"+r.toString(32)+"_";return t.memoizedState=n},useHostTransitionStatus:Ud,useFormState:ff,useActionState:ff,useOptimistic:function(t){var n=hs();n.memoizedState=n.baseState=t;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=r,n=Bd.bind(null,st,!0,r),r.dispatch=n,[t,n]},useMemoCache:kd,useCacheRefresh:function(){return hs().memoizedState=ij.bind(null,st)},useEffectEvent:function(t){var n=hs(),r={impl:t};return n.memoizedState=r,function(){if((bt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},Fd={readContext:ns,use:Yr,useCallback:Cf,useContext:ns,useEffect:Od,useImperativeHandle:wf,useInsertionEffect:jf,useLayoutEffect:Nf,useMemo:Af,useReducer:Pr,useRef:bf,useState:function(){return Pr(Na)},useDebugValue:Id,useDeferredValue:function(t,n){var r=Bt();return Ef(r,St.memoizedState,t,n)},useTransition:function(){var t=Pr(Na)[0],n=Bt().memoizedState;return[typeof t=="boolean"?t:pi(t),n]},useSyncExternalStore:tf,useId:Df,useHostTransitionStatus:Ud,useFormState:pf,useActionState:pf,useOptimistic:function(t,n){var r=Bt();return cf(r,St,t,n)},useMemoCache:kd,useCacheRefresh:Mf};Fd.useEffectEvent=vf;var Lf={readContext:ns,use:Yr,useCallback:Cf,useContext:ns,useEffect:Od,useImperativeHandle:wf,useInsertionEffect:jf,useLayoutEffect:Nf,useMemo:Af,useReducer:Md,useRef:bf,useState:function(){return Md(Na)},useDebugValue:Id,useDeferredValue:function(t,n){var r=Bt();return St===null?Ld(r,t,n):Ef(r,St.memoizedState,t,n)},useTransition:function(){var t=Md(Na)[0],n=Bt().memoizedState;return[typeof t=="boolean"?t:pi(t),n]},useSyncExternalStore:tf,useId:Df,useHostTransitionStatus:Ud,useFormState:xf,useActionState:xf,useOptimistic:function(t,n){var r=Bt();return St!==null?cf(r,St,t,n):(r.baseState=t,[t,r.queue.dispatch])},useMemoCache:kd,useCacheRefresh:Mf};Lf.useEffectEvent=vf;function Hd(t,n,r,o){n=t.memoizedState,r=r(o,n),r=r==null?n:y({},n,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Vd={enqueueSetState:function(t,n,r){t=t._reactInternals;var o=Ds(),m=qa(o);m.payload=n,r!=null&&(m.callback=r),n=Ga(t,m,o),n!==null&&(bs(n,t,o),ui(n,t,o))},enqueueReplaceState:function(t,n,r){t=t._reactInternals;var o=Ds(),m=qa(o);m.tag=1,m.payload=n,r!=null&&(m.callback=r),n=Ga(t,m,o),n!==null&&(bs(n,t,o),ui(n,t,o))},enqueueForceUpdate:function(t,n){t=t._reactInternals;var r=Ds(),o=qa(r);o.tag=2,n!=null&&(o.callback=n),n=Ga(t,o,r),n!==null&&(bs(n,t,r),ui(n,t,r))}};function zf(t,n,r,o,m,p,j){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,p,j):n.prototype&&n.prototype.isPureReactComponent?!ai(r,o)||!ai(m,p):!0}function Uf(t,n,r,o){t=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(r,o),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(r,o),n.state!==t&&Vd.enqueueReplaceState(n,n.state,null)}function zn(t,n){var r=n;if("ref"in n){r={};for(var o in n)o!=="ref"&&(r[o]=n[o])}if(t=t.defaultProps){r===n&&(r=y({},r));for(var m in t)r[m]===void 0&&(r[m]=t[m])}return r}function Bf(t){Ar(t)}function Ff(t){console.error(t)}function Hf(t){Ar(t)}function Wr(t,n){try{var r=t.onUncaughtError;r(n.value,{componentStack:n.stack})}catch(o){setTimeout(function(){throw o})}}function Vf(t,n,r){try{var o=t.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(m){setTimeout(function(){throw m})}}function Yd(t,n,r){return r=qa(r),r.tag=3,r.payload={element:null},r.callback=function(){Wr(t,n)},r}function Yf(t){return t=qa(t),t.tag=3,t}function Pf(t,n,r,o){var m=r.type.getDerivedStateFromError;if(typeof m=="function"){var p=o.value;t.payload=function(){return m(p)},t.callback=function(){Vf(n,r,o)}}var j=r.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(t.callback=function(){Vf(n,r,o),typeof m!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var R=o.stack;this.componentDidCatch(o.value,{componentStack:R!==null?R:""})})}function cj(t,n,r,o,m){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(n=r.alternate,n!==null&&gl(n,r,m,!0),r=Es.current,r!==null){switch(r.tag){case 31:case 13:return Fs===null?rc():r.alternate===null&&zt===0&&(zt=3),r.flags&=-257,r.flags|=65536,r.lanes=m,o===Ir?r.flags|=16384:(n=r.updateQueue,n===null?r.updateQueue=new Set([o]):n.add(o),pu(t,o,m)),!1;case 22:return r.flags|=65536,o===Ir?r.flags|=16384:(n=r.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=n):(r=n.retryQueue,r===null?n.retryQueue=new Set([o]):r.add(o)),pu(t,o,m)),!1}throw Error(i(435,r.tag))}return pu(t,o,m),rc(),!1}if(ut)return n=Es.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=m,o!==od&&(t=Error(i(422),{cause:o}),ii(Ls(t,r)))):(o!==od&&(n=Error(i(423),{cause:o}),ii(Ls(n,r))),t=t.current.alternate,t.flags|=65536,m&=-m,t.lanes|=m,o=Ls(o,r),m=Yd(t.stateNode,o,m),vd(t,m),zt!==4&&(zt=2)),!1;var p=Error(i(520),{cause:o});if(p=Ls(p,r),Ci===null?Ci=[p]:Ci.push(p),zt!==4&&(zt=2),n===null)return!0;o=Ls(o,r),r=n;do{switch(r.tag){case 3:return r.flags|=65536,t=m&-m,r.lanes|=t,t=Yd(r.stateNode,o,t),vd(r,t),!1;case 1:if(n=r.type,p=r.stateNode,(r.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||p!==null&&typeof p.componentDidCatch=="function"&&(Ja===null||!Ja.has(p))))return r.flags|=65536,m&=-m,r.lanes|=m,m=Yf(m),Pf(m,t,r,o),vd(r,m),!1}r=r.return}while(r!==null);return!1}var Pd=Error(i(461)),qt=!1;function ls(t,n,r,o){n.child=t===null?Xm(n,null,r,o):In(n,t.child,r,o)}function qf(t,n,r,o,m){r=r.render;var p=n.ref;if("ref"in o){var j={};for(var R in o)R!=="ref"&&(j[R]=o[R])}else j=o;return Mn(n),o=Ad(t,n,r,j,p,m),R=Ed(),t!==null&&!qt?(Td(t,n,m),Sa(t,n,m)):(ut&&R&&rd(n),n.flags|=1,ls(t,n,o,m),n.child)}function Gf(t,n,r,o,m){if(t===null){var p=r.type;return typeof p=="function"&&!nd(p)&&p.defaultProps===void 0&&r.compare===null?(n.tag=15,n.type=p,Xf(t,n,p,o,m)):(t=kr(r.type,null,o,n,n.mode,m),t.ref=n.ref,t.return=n,n.child=t)}if(p=t.child,!Jd(t,m)){var j=p.memoizedProps;if(r=r.compare,r=r!==null?r:ai,r(j,o)&&t.ref===n.ref)return Sa(t,n,m)}return n.flags|=1,t=xa(p,o),t.ref=n.ref,t.return=n,n.child=t}function Xf(t,n,r,o,m){if(t!==null){var p=t.memoizedProps;if(ai(p,o)&&t.ref===n.ref)if(qt=!1,n.pendingProps=o=p,Jd(t,m))(t.flags&131072)!==0&&(qt=!0);else return n.lanes=t.lanes,Sa(t,n,m)}return qd(t,n,r,o,m)}function Wf(t,n,r,o){var m=o.children,p=t!==null?t.memoizedState:null;if(t===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((n.flags&128)!==0){if(p=p!==null?p.baseLanes|r:r,t!==null){for(o=n.child=t.child,m=0;o!==null;)m=m|o.lanes|o.childLanes,o=o.sibling;o=m&~p}else o=0,n.child=null;return Kf(t,n,p,r,o)}if((r&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},t!==null&&$r(n,p!==null?p.cachePool:null),p!==null?Qm(n,p):Nd(),Zm(n);else return o=n.lanes=536870912,Kf(t,n,p!==null?p.baseLanes|r:r,r,o)}else p!==null?($r(n,p.cachePool),Qm(n,p),Wa(),n.memoizedState=null):(t!==null&&$r(n,null),Nd(),Wa());return ls(t,n,m,r),n.child}function bi(t,n){return t!==null&&t.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function Kf(t,n,r,o,m){var p=gd();return p=p===null?null:{parent:Yt._currentValue,pool:p},n.memoizedState={baseLanes:r,cachePool:p},t!==null&&$r(n,null),Nd(),Zm(n),t!==null&&gl(t,n,o,!0),n.childLanes=m,null}function Kr(t,n){return n=Zr({mode:n.mode,children:n.children},t.mode),n.ref=t.ref,t.child=n,n.return=t,n}function Qf(t,n,r){return In(n,t.child,null,r),t=Kr(n,n.pendingProps),t.flags|=2,Ts(n),n.memoizedState=null,t}function oj(t,n,r){var o=n.pendingProps,m=(n.flags&128)!==0;if(n.flags&=-129,t===null){if(ut){if(o.mode==="hidden")return t=Kr(n,o),n.lanes=536870912,bi(null,t);if(wd(n),(t=_t)?(t=og(t,Bs),t=t!==null&&t.data==="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Fa!==null?{id:ta,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},r=Rm(t),r.return=n,n.child=r,as=n,_t=null)):t=null,t===null)throw Va(n);return n.lanes=536870912,null}return Kr(n,o)}var p=t.memoizedState;if(p!==null){var j=p.dehydrated;if(wd(n),m)if(n.flags&256)n.flags&=-257,n=Qf(t,n,r);else if(n.memoizedState!==null)n.child=t.child,n.flags|=128,n=null;else throw Error(i(558));else if(qt||gl(t,n,r,!1),m=(r&t.childLanes)!==0,qt||m){if(o=At,o!==null&&(j=el(o,r),j!==0&&j!==p.retryLane))throw p.retryLane=j,Tn(t,j),bs(o,t,j),Pd;rc(),n=Qf(t,n,r)}else t=p.treeContext,_t=Hs(j.nextSibling),as=n,ut=!0,Ha=null,Bs=!1,t!==null&&Im(n,t),n=Kr(n,o),n.flags|=4096;return n}return t=xa(t.child,{mode:o.mode,children:o.children}),t.ref=n.ref,n.child=t,t.return=n,t}function Qr(t,n){var r=n.ref;if(r===null)t!==null&&t.ref!==null&&(n.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(t===null||t.ref!==r)&&(n.flags|=4194816)}}function qd(t,n,r,o,m){return Mn(n),r=Ad(t,n,r,o,void 0,m),o=Ed(),t!==null&&!qt?(Td(t,n,m),Sa(t,n,m)):(ut&&o&&rd(n),n.flags|=1,ls(t,n,r,m),n.child)}function Zf(t,n,r,o,m,p){return Mn(n),n.updateQueue=null,r=ef(n,o,r,m),Jm(t),o=Ed(),t!==null&&!qt?(Td(t,n,p),Sa(t,n,p)):(ut&&o&&rd(n),n.flags|=1,ls(t,n,r,p),n.child)}function Jf(t,n,r,o,m){if(Mn(n),n.stateNode===null){var p=hl,j=r.contextType;typeof j=="object"&&j!==null&&(p=ns(j)),p=new r(o,p),n.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Vd,n.stateNode=p,p._reactInternals=n,p=n.stateNode,p.props=o,p.state=n.memoizedState,p.refs={},bd(n),j=r.contextType,p.context=typeof j=="object"&&j!==null?ns(j):hl,p.state=n.memoizedState,j=r.getDerivedStateFromProps,typeof j=="function"&&(Hd(n,r,j,o),p.state=n.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof p.getSnapshotBeforeUpdate=="function"||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(j=p.state,typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount(),j!==p.state&&Vd.enqueueReplaceState(p,p.state,null),mi(n,o,p,m),hi(),p.state=n.memoizedState),typeof p.componentDidMount=="function"&&(n.flags|=4194308),o=!0}else if(t===null){p=n.stateNode;var R=n.memoizedProps,K=zn(r,R);p.props=K;var le=p.context,pe=r.contextType;j=hl,typeof pe=="object"&&pe!==null&&(j=ns(pe));var je=r.getDerivedStateFromProps;pe=typeof je=="function"||typeof p.getSnapshotBeforeUpdate=="function",R=n.pendingProps!==R,pe||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(R||le!==j)&&Uf(n,p,o,j),Pa=!1;var ie=n.memoizedState;p.state=ie,mi(n,o,p,m),hi(),le=n.memoizedState,R||ie!==le||Pa?(typeof je=="function"&&(Hd(n,r,je,o),le=n.memoizedState),(K=Pa||zf(n,r,K,o,ie,le,j))?(pe||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(n.flags|=4194308)):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=o,n.memoizedState=le),p.props=o,p.state=le,p.context=j,o=K):(typeof p.componentDidMount=="function"&&(n.flags|=4194308),o=!1)}else{p=n.stateNode,yd(t,n),j=n.memoizedProps,pe=zn(r,j),p.props=pe,je=n.pendingProps,ie=p.context,le=r.contextType,K=hl,typeof le=="object"&&le!==null&&(K=ns(le)),R=r.getDerivedStateFromProps,(le=typeof R=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(j!==je||ie!==K)&&Uf(n,p,o,K),Pa=!1,ie=n.memoizedState,p.state=ie,mi(n,o,p,m),hi();var de=n.memoizedState;j!==je||ie!==de||Pa||t!==null&&t.dependencies!==null&&Mr(t.dependencies)?(typeof R=="function"&&(Hd(n,r,R,o),de=n.memoizedState),(pe=Pa||zf(n,r,pe,o,ie,de,K)||t!==null&&t.dependencies!==null&&Mr(t.dependencies))?(le||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(o,de,K),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(o,de,K)),typeof p.componentDidUpdate=="function"&&(n.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof p.componentDidUpdate!="function"||j===t.memoizedProps&&ie===t.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ie===t.memoizedState||(n.flags|=1024),n.memoizedProps=o,n.memoizedState=de),p.props=o,p.state=de,p.context=K,o=pe):(typeof p.componentDidUpdate!="function"||j===t.memoizedProps&&ie===t.memoizedState||(n.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||j===t.memoizedProps&&ie===t.memoizedState||(n.flags|=1024),o=!1)}return p=o,Qr(t,n),o=(n.flags&128)!==0,p||o?(p=n.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:p.render(),n.flags|=1,t!==null&&o?(n.child=In(n,t.child,null,m),n.child=In(n,null,r,m)):ls(t,n,r,m),n.memoizedState=p.state,t=n.child):t=Sa(t,n,m),t}function ep(t,n,r,o){return kn(),n.flags|=256,ls(t,n,r,o),n.child}var Gd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xd(t){return{baseLanes:t,cachePool:Hm()}}function Wd(t,n,r){return t=t!==null?t.childLanes&~r:0,n&&(t|=ks),t}function tp(t,n,r){var o=n.pendingProps,m=!1,p=(n.flags&128)!==0,j;if((j=p)||(j=t!==null&&t.memoizedState===null?!1:(Ut.current&2)!==0),j&&(m=!0,n.flags&=-129),j=(n.flags&32)!==0,n.flags&=-33,t===null){if(ut){if(m?Xa(n):Wa(),(t=_t)?(t=og(t,Bs),t=t!==null&&t.data!=="&"?t:null,t!==null&&(n.memoizedState={dehydrated:t,treeContext:Fa!==null?{id:ta,overflow:sa}:null,retryLane:536870912,hydrationErrors:null},r=Rm(t),r.return=n,n.child=r,as=n,_t=null)):t=null,t===null)throw Va(n);return Du(t)?n.lanes=32:n.lanes=536870912,null}var R=o.children;return o=o.fallback,m?(Wa(),m=n.mode,R=Zr({mode:"hidden",children:R},m),o=_n(o,m,r,null),R.return=n,o.return=n,R.sibling=o,n.child=R,o=n.child,o.memoizedState=Xd(r),o.childLanes=Wd(t,j,r),n.memoizedState=Gd,bi(null,o)):(Xa(n),Kd(n,R))}var K=t.memoizedState;if(K!==null&&(R=K.dehydrated,R!==null)){if(p)n.flags&256?(Xa(n),n.flags&=-257,n=Qd(t,n,r)):n.memoizedState!==null?(Wa(),n.child=t.child,n.flags|=128,n=null):(Wa(),R=o.fallback,m=n.mode,o=Zr({mode:"visible",children:o.children},m),R=_n(R,m,r,null),R.flags|=2,o.return=n,R.return=n,o.sibling=R,n.child=o,In(n,t.child,null,r),o=n.child,o.memoizedState=Xd(r),o.childLanes=Wd(t,j,r),n.memoizedState=Gd,n=bi(null,o));else if(Xa(n),Du(R)){if(j=R.nextSibling&&R.nextSibling.dataset,j)var le=j.dgst;j=le,o=Error(i(419)),o.stack="",o.digest=j,ii({value:o,source:null,stack:null}),n=Qd(t,n,r)}else if(qt||gl(t,n,r,!1),j=(r&t.childLanes)!==0,qt||j){if(j=At,j!==null&&(o=el(j,r),o!==0&&o!==K.retryLane))throw K.retryLane=o,Tn(t,o),bs(j,t,o),Pd;ku(R)||rc(),n=Qd(t,n,r)}else ku(R)?(n.flags|=192,n.child=t.child,n=null):(t=K.treeContext,_t=Hs(R.nextSibling),as=n,ut=!0,Ha=null,Bs=!1,t!==null&&Im(n,t),n=Kd(n,o.children),n.flags|=4096);return n}return m?(Wa(),R=o.fallback,m=n.mode,K=t.child,le=K.sibling,o=xa(K,{mode:"hidden",children:o.children}),o.subtreeFlags=K.subtreeFlags&65011712,le!==null?R=xa(le,R):(R=_n(R,m,r,null),R.flags|=2),R.return=n,o.return=n,o.sibling=R,n.child=o,bi(null,o),o=n.child,R=t.child.memoizedState,R===null?R=Xd(r):(m=R.cachePool,m!==null?(K=Yt._currentValue,m=m.parent!==K?{parent:K,pool:K}:m):m=Hm(),R={baseLanes:R.baseLanes|r,cachePool:m}),o.memoizedState=R,o.childLanes=Wd(t,j,r),n.memoizedState=Gd,bi(t.child,o)):(Xa(n),r=t.child,t=r.sibling,r=xa(r,{mode:"visible",children:o.children}),r.return=n,r.sibling=null,t!==null&&(j=n.deletions,j===null?(n.deletions=[t],n.flags|=16):j.push(t)),n.child=r,n.memoizedState=null,r)}function Kd(t,n){return n=Zr({mode:"visible",children:n},t.mode),n.return=t,t.child=n}function Zr(t,n){return t=As(22,t,null,n),t.lanes=0,t}function Qd(t,n,r){return In(n,t.child,null,r),t=Kd(n,n.pendingProps.children),t.flags|=2,n.memoizedState=null,t}function sp(t,n,r){t.lanes|=n;var o=t.alternate;o!==null&&(o.lanes|=n),hd(t.return,n,r)}function Zd(t,n,r,o,m,p){var j=t.memoizedState;j===null?t.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:m,treeForkCount:p}:(j.isBackwards=n,j.rendering=null,j.renderingStartTime=0,j.last=o,j.tail=r,j.tailMode=m,j.treeForkCount=p)}function ap(t,n,r){var o=n.pendingProps,m=o.revealOrder,p=o.tail;o=o.children;var j=Ut.current,R=(j&2)!==0;if(R?(j=j&1|2,n.flags|=128):j&=1,se(Ut,j),ls(t,n,o,r),o=ut?li:0,!R&&t!==null&&(t.flags&128)!==0)e:for(t=n.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sp(t,r,n);else if(t.tag===19)sp(t,r,n);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break e;for(;t.sibling===null;){if(t.return===null||t.return===n)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(m){case"forwards":for(r=n.child,m=null;r!==null;)t=r.alternate,t!==null&&Br(t)===null&&(m=r),r=r.sibling;r=m,r===null?(m=n.child,n.child=null):(m=r.sibling,r.sibling=null),Zd(n,!1,m,r,p,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,m=n.child,n.child=null;m!==null;){if(t=m.alternate,t!==null&&Br(t)===null){n.child=m;break}t=m.sibling,m.sibling=r,r=m,m=t}Zd(n,!0,r,null,p,o);break;case"together":Zd(n,!1,null,null,void 0,o);break;default:n.memoizedState=null}return n.child}function Sa(t,n,r){if(t!==null&&(n.dependencies=t.dependencies),Za|=n.lanes,(r&n.childLanes)===0)if(t!==null){if(gl(t,n,r,!1),(r&n.childLanes)===0)return null}else return null;if(t!==null&&n.child!==t.child)throw Error(i(153));if(n.child!==null){for(t=n.child,r=xa(t,t.pendingProps),n.child=r,r.return=n;t.sibling!==null;)t=t.sibling,r=r.sibling=xa(t,t.pendingProps),r.return=n;r.sibling=null}return n.child}function Jd(t,n){return(t.lanes&n)!==0?!0:(t=t.dependencies,!!(t!==null&&Mr(t)))}function dj(t,n,r){switch(n.tag){case 3:oe(n,n.stateNode.containerInfo),Ya(n,Yt,t.memoizedState.cache),kn();break;case 27:case 5:J(n);break;case 4:oe(n,n.stateNode.containerInfo);break;case 10:Ya(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,wd(n),null;break;case 13:var o=n.memoizedState;if(o!==null)return o.dehydrated!==null?(Xa(n),n.flags|=128,null):(r&n.child.childLanes)!==0?tp(t,n,r):(Xa(n),t=Sa(t,n,r),t!==null?t.sibling:null);Xa(n);break;case 19:var m=(t.flags&128)!==0;if(o=(r&n.childLanes)!==0,o||(gl(t,n,r,!1),o=(r&n.childLanes)!==0),m){if(o)return ap(t,n,r);n.flags|=128}if(m=n.memoizedState,m!==null&&(m.rendering=null,m.tail=null,m.lastEffect=null),se(Ut,Ut.current),o)break;return null;case 22:return n.lanes=0,Wf(t,n,r,n.pendingProps);case 24:Ya(n,Yt,t.memoizedState.cache)}return Sa(t,n,r)}function np(t,n,r){if(t!==null)if(t.memoizedProps!==n.pendingProps)qt=!0;else{if(!Jd(t,r)&&(n.flags&128)===0)return qt=!1,dj(t,n,r);qt=(t.flags&131072)!==0}else qt=!1,ut&&(n.flags&1048576)!==0&&Om(n,li,n.index);switch(n.lanes=0,n.tag){case 16:e:{var o=n.pendingProps;if(t=$n(n.elementType),n.type=t,typeof t=="function")nd(t)?(o=zn(t,o),n.tag=1,n=Jf(null,n,t,o,r)):(n.tag=0,n=qd(null,n,t,o,r));else{if(t!=null){var m=t.$$typeof;if(m===I){n.tag=11,n=qf(null,n,t,o,r);break e}else if(m===B){n.tag=14,n=Gf(null,n,t,o,r);break e}}throw n=O(t)||t,Error(i(306,n,""))}}return n;case 0:return qd(t,n,n.type,n.pendingProps,r);case 1:return o=n.type,m=zn(o,n.pendingProps),Jf(t,n,o,m,r);case 3:e:{if(oe(n,n.stateNode.containerInfo),t===null)throw Error(i(387));o=n.pendingProps;var p=n.memoizedState;m=p.element,yd(t,n),mi(n,o,null,r);var j=n.memoizedState;if(o=j.cache,Ya(n,Yt,o),o!==p.cache&&md(n,[Yt],r,!0),hi(),o=j.element,p.isDehydrated)if(p={element:o,isDehydrated:!1,cache:j.cache},n.updateQueue.baseState=p,n.memoizedState=p,n.flags&256){n=ep(t,n,o,r);break e}else if(o!==m){m=Ls(Error(i(424)),n),ii(m),n=ep(t,n,o,r);break e}else{switch(t=n.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(_t=Hs(t.firstChild),as=n,ut=!0,Ha=null,Bs=!0,r=Xm(n,null,o,r),n.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(kn(),o===m){n=Sa(t,n,r);break e}ls(t,n,o,r)}n=n.child}return n;case 26:return Qr(t,n),t===null?(r=pg(n.type,null,n.pendingProps,null))?n.memoizedState=r:ut||(r=n.type,t=n.pendingProps,o=fc(te.current).createElement(r),o[H]=n,o[he]=t,is(o,r,t),Qe(o),n.stateNode=o):n.memoizedState=pg(n.type,t.memoizedProps,n.pendingProps,t.memoizedState),null;case 27:return J(n),t===null&&ut&&(o=n.stateNode=hg(n.type,n.pendingProps,te.current),as=n,Bs=!0,m=_t,an(n.type)?(Mu=m,_t=Hs(o.firstChild)):_t=m),ls(t,n,n.pendingProps.children,r),Qr(t,n),t===null&&(n.flags|=4194304),n.child;case 5:return t===null&&ut&&((m=o=_t)&&(o=Bj(o,n.type,n.pendingProps,Bs),o!==null?(n.stateNode=o,as=n,_t=Hs(o.firstChild),Bs=!1,m=!0):m=!1),m||Va(n)),J(n),m=n.type,p=n.pendingProps,j=t!==null?t.memoizedProps:null,o=p.children,Eu(m,p)?o=null:j!==null&&Eu(m,j)&&(n.flags|=32),n.memoizedState!==null&&(m=Ad(t,n,tj,null,null,r),Ri._currentValue=m),Qr(t,n),ls(t,n,o,r),n.child;case 6:return t===null&&ut&&((t=r=_t)&&(r=Fj(r,n.pendingProps,Bs),r!==null?(n.stateNode=r,as=n,_t=null,t=!0):t=!1),t||Va(n)),null;case 13:return tp(t,n,r);case 4:return oe(n,n.stateNode.containerInfo),o=n.pendingProps,t===null?n.child=In(n,null,o,r):ls(t,n,o,r),n.child;case 11:return qf(t,n,n.type,n.pendingProps,r);case 7:return ls(t,n,n.pendingProps,r),n.child;case 8:return ls(t,n,n.pendingProps.children,r),n.child;case 12:return ls(t,n,n.pendingProps.children,r),n.child;case 10:return o=n.pendingProps,Ya(n,n.type,o.value),ls(t,n,o.children,r),n.child;case 9:return m=n.type._context,o=n.pendingProps.children,Mn(n),m=ns(m),o=o(m),n.flags|=1,ls(t,n,o,r),n.child;case 14:return Gf(t,n,n.type,n.pendingProps,r);case 15:return Xf(t,n,n.type,n.pendingProps,r);case 19:return ap(t,n,r);case 31:return oj(t,n,r);case 22:return Wf(t,n,r,n.pendingProps);case 24:return Mn(n),o=ns(Yt),t===null?(m=gd(),m===null&&(m=At,p=fd(),m.pooledCache=p,p.refCount++,p!==null&&(m.pooledCacheLanes|=r),m=p),n.memoizedState={parent:o,cache:m},bd(n),Ya(n,Yt,m)):((t.lanes&r)!==0&&(yd(t,n),mi(n,null,null,r),hi()),m=t.memoizedState,p=n.memoizedState,m.parent!==o?(m={parent:o,cache:o},n.memoizedState=m,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=m),Ya(n,Yt,o)):(o=p.cache,Ya(n,Yt,o),o!==m.cache&&md(n,[Yt],r,!0))),ls(t,n,n.pendingProps.children,r),n.child;case 29:throw n.pendingProps}throw Error(i(156,n.tag))}function wa(t){t.flags|=4}function eu(t,n,r,o,m){if((n=(t.mode&32)!==0)&&(n=!1),n){if(t.flags|=16777216,(m&335544128)===m)if(t.stateNode.complete)t.flags|=8192;else if(Dp())t.flags|=8192;else throw On=Ir,xd}else t.flags&=-16777217}function lp(t,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!vg(n))if(Dp())t.flags|=8192;else throw On=Ir,xd}function Jr(t,n){n!==null&&(t.flags|=4),t.flags&16384&&(n=t.tag!==22?gr():536870912,t.lanes|=n,Tl|=n)}function yi(t,n){if(!ut)switch(t.tailMode){case"hidden":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?n||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function kt(t){var n=t.alternate!==null&&t.alternate.child===t.child,r=0,o=0;if(n)for(var m=t.child;m!==null;)r|=m.lanes|m.childLanes,o|=m.subtreeFlags&65011712,o|=m.flags&65011712,m.return=t,m=m.sibling;else for(m=t.child;m!==null;)r|=m.lanes|m.childLanes,o|=m.subtreeFlags,o|=m.flags,m.return=t,m=m.sibling;return t.subtreeFlags|=o,t.childLanes=r,n}function uj(t,n,r){var o=n.pendingProps;switch(cd(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(n),null;case 1:return kt(n),null;case 3:return r=n.stateNode,o=null,t!==null&&(o=t.memoizedState.cache),n.memoizedState.cache!==o&&(n.flags|=2048),va(Yt),be(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(pl(n)?wa(n):t===null||t.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,dd())),kt(n),null;case 26:var m=n.type,p=n.memoizedState;return t===null?(wa(n),p!==null?(kt(n),lp(n,p)):(kt(n),eu(n,m,null,o,r))):p?p!==t.memoizedState?(wa(n),kt(n),lp(n,p)):(kt(n),n.flags&=-16777217):(t=t.memoizedProps,t!==o&&wa(n),kt(n),eu(n,m,t,o,r)),null;case 27:if(re(n),r=te.current,m=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&wa(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return kt(n),null}t=q.current,pl(n)?Lm(n):(t=hg(m,o,r),n.stateNode=t,wa(n))}return kt(n),null;case 5:if(re(n),m=n.type,t!==null&&n.stateNode!=null)t.memoizedProps!==o&&wa(n);else{if(!o){if(n.stateNode===null)throw Error(i(166));return kt(n),null}if(p=q.current,pl(n))Lm(n);else{var j=fc(te.current);switch(p){case 1:p=j.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:p=j.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":p=j.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":p=j.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":p=j.createElement("div"),p.innerHTML="<script><\/script>",p=p.removeChild(p.firstChild);break;case"select":p=typeof o.is=="string"?j.createElement("select",{is:o.is}):j.createElement("select"),o.multiple?p.multiple=!0:o.size&&(p.size=o.size);break;default:p=typeof o.is=="string"?j.createElement(m,{is:o.is}):j.createElement(m)}}p[H]=n,p[he]=o;e:for(j=n.child;j!==null;){if(j.tag===5||j.tag===6)p.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===n)break e;for(;j.sibling===null;){if(j.return===null||j.return===n)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}n.stateNode=p;e:switch(is(p,m,o),m){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&wa(n)}}return kt(n),eu(n,n.type,t===null?null:t.memoizedProps,n.pendingProps,r),null;case 6:if(t&&n.stateNode!=null)t.memoizedProps!==o&&wa(n);else{if(typeof o!="string"&&n.stateNode===null)throw Error(i(166));if(t=te.current,pl(n)){if(t=n.stateNode,r=n.memoizedProps,o=null,m=as,m!==null)switch(m.tag){case 27:case 5:o=m.memoizedProps}t[H]=n,t=!!(t.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||tg(t.nodeValue,r)),t||Va(n,!0)}else t=fc(t).createTextNode(o),t[H]=n,n.stateNode=t}return kt(n),null;case 31:if(r=n.memoizedState,t===null||t.memoizedState!==null){if(o=pl(n),r!==null){if(t===null){if(!o)throw Error(i(318));if(t=n.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(i(557));t[H]=n}else kn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;kt(n),t=!1}else r=dd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=r),t=!0;if(!t)return n.flags&256?(Ts(n),n):(Ts(n),null);if((n.flags&128)!==0)throw Error(i(558))}return kt(n),null;case 13:if(o=n.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(m=pl(n),o!==null&&o.dehydrated!==null){if(t===null){if(!m)throw Error(i(318));if(m=n.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(i(317));m[H]=n}else kn(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;kt(n),m=!1}else m=dd(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=m),m=!0;if(!m)return n.flags&256?(Ts(n),n):(Ts(n),null)}return Ts(n),(n.flags&128)!==0?(n.lanes=r,n):(r=o!==null,t=t!==null&&t.memoizedState!==null,r&&(o=n.child,m=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(m=o.alternate.memoizedState.cachePool.pool),p=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(p=o.memoizedState.cachePool.pool),p!==m&&(o.flags|=2048)),r!==t&&r&&(n.child.flags|=8192),Jr(n,n.updateQueue),kt(n),null);case 4:return be(),t===null&&Nu(n.stateNode.containerInfo),kt(n),null;case 10:return va(n.type),kt(n),null;case 19:if(G(Ut),o=n.memoizedState,o===null)return kt(n),null;if(m=(n.flags&128)!==0,p=o.rendering,p===null)if(m)yi(o,!1);else{if(zt!==0||t!==null&&(t.flags&128)!==0)for(t=n.child;t!==null;){if(p=Br(t),p!==null){for(n.flags|=128,yi(o,!1),t=p.updateQueue,n.updateQueue=t,Jr(n,t),n.subtreeFlags=0,t=r,r=n.child;r!==null;)Mm(r,t),r=r.sibling;return se(Ut,Ut.current&1|2),ut&&ba(n,o.treeForkCount),n.child}t=t.sibling}o.tail!==null&&Xe()>nc&&(n.flags|=128,m=!0,yi(o,!1),n.lanes=4194304)}else{if(!m)if(t=Br(p),t!==null){if(n.flags|=128,m=!0,t=t.updateQueue,n.updateQueue=t,Jr(n,t),yi(o,!0),o.tail===null&&o.tailMode==="hidden"&&!p.alternate&&!ut)return kt(n),null}else 2*Xe()-o.renderingStartTime>nc&&r!==536870912&&(n.flags|=128,m=!0,yi(o,!1),n.lanes=4194304);o.isBackwards?(p.sibling=n.child,n.child=p):(t=o.last,t!==null?t.sibling=p:n.child=p,o.last=p)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,r=Ut.current,se(Ut,m?r&1|2:r&1),ut&&ba(n,o.treeForkCount),t):(kt(n),null);case 22:case 23:return Ts(n),Sd(),o=n.memoizedState!==null,t!==null?t.memoizedState!==null!==o&&(n.flags|=8192):o&&(n.flags|=8192),o?(r&536870912)!==0&&(n.flags&128)===0&&(kt(n),n.subtreeFlags&6&&(n.flags|=8192)):kt(n),r=n.updateQueue,r!==null&&Jr(n,r.retryQueue),r=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),o=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(o=n.memoizedState.cachePool.pool),o!==r&&(n.flags|=2048),t!==null&&G(Rn),null;case 24:return r=null,t!==null&&(r=t.memoizedState.cache),n.memoizedState.cache!==r&&(n.flags|=2048),va(Yt),kt(n),null;case 25:return null;case 30:return null}throw Error(i(156,n.tag))}function hj(t,n){switch(cd(n),n.tag){case 1:return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 3:return va(Yt),be(),t=n.flags,(t&65536)!==0&&(t&128)===0?(n.flags=t&-65537|128,n):null;case 26:case 27:case 5:return re(n),null;case 31:if(n.memoizedState!==null){if(Ts(n),n.alternate===null)throw Error(i(340));kn()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 13:if(Ts(n),t=n.memoizedState,t!==null&&t.dehydrated!==null){if(n.alternate===null)throw Error(i(340));kn()}return t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 19:return G(Ut),null;case 4:return be(),null;case 10:return va(n.type),null;case 22:case 23:return Ts(n),Sd(),t!==null&&G(Rn),t=n.flags,t&65536?(n.flags=t&-65537|128,n):null;case 24:return va(Yt),null;case 25:return null;default:return null}}function ip(t,n){switch(cd(n),n.tag){case 3:va(Yt),be();break;case 26:case 27:case 5:re(n);break;case 4:be();break;case 31:n.memoizedState!==null&&Ts(n);break;case 13:Ts(n);break;case 19:G(Ut);break;case 10:va(n.type);break;case 22:case 23:Ts(n),Sd(),t!==null&&G(Rn);break;case 24:va(Yt)}}function vi(t,n){try{var r=n.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var m=o.next;r=m;do{if((r.tag&t)===t){o=void 0;var p=r.create,j=r.inst;o=p(),j.destroy=o}r=r.next}while(r!==m)}}catch(R){jt(n,n.return,R)}}function Ka(t,n,r){try{var o=n.updateQueue,m=o!==null?o.lastEffect:null;if(m!==null){var p=m.next;o=p;do{if((o.tag&t)===t){var j=o.inst,R=j.destroy;if(R!==void 0){j.destroy=void 0,m=n;var K=r,le=R;try{le()}catch(pe){jt(m,K,pe)}}}o=o.next}while(o!==p)}}catch(pe){jt(n,n.return,pe)}}function rp(t){var n=t.updateQueue;if(n!==null){var r=t.stateNode;try{Km(n,r)}catch(o){jt(t,t.return,o)}}}function cp(t,n,r){r.props=zn(t.type,t.memoizedProps),r.state=t.memoizedState;try{r.componentWillUnmount()}catch(o){jt(t,n,o)}}function ji(t,n){try{var r=t.ref;if(r!==null){switch(t.tag){case 26:case 27:case 5:var o=t.stateNode;break;case 30:o=t.stateNode;break;default:o=t.stateNode}typeof r=="function"?t.refCleanup=r(o):r.current=o}}catch(m){jt(t,n,m)}}function aa(t,n){var r=t.ref,o=t.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(m){jt(t,n,m)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(m){jt(t,n,m)}else r.current=null}function op(t){var n=t.type,r=t.memoizedProps,o=t.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(m){jt(t,t.return,m)}}function tu(t,n,r){try{var o=t.stateNode;$j(o,t.type,r,n),o[he]=n}catch(m){jt(t,t.return,m)}}function dp(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&an(t.type)||t.tag===4}function su(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dp(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&an(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function au(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(t,n):(n=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,n.appendChild(t),r=r._reactRootContainer,r!=null||n.onclick!==null||(n.onclick=pa));else if(o!==4&&(o===27&&an(t.type)&&(r=t.stateNode,n=null),t=t.child,t!==null))for(au(t,n,r),t=t.sibling;t!==null;)au(t,n,r),t=t.sibling}function ec(t,n,r){var o=t.tag;if(o===5||o===6)t=t.stateNode,n?r.insertBefore(t,n):r.appendChild(t);else if(o!==4&&(o===27&&an(t.type)&&(r=t.stateNode),t=t.child,t!==null))for(ec(t,n,r),t=t.sibling;t!==null;)ec(t,n,r),t=t.sibling}function up(t){var n=t.stateNode,r=t.memoizedProps;try{for(var o=t.type,m=n.attributes;m.length;)n.removeAttributeNode(m[0]);is(n,o,r),n[H]=t,n[he]=r}catch(p){jt(t,t.return,p)}}var Ca=!1,Gt=!1,nu=!1,hp=typeof WeakSet=="function"?WeakSet:Set,Qt=null;function mj(t,n){if(t=t.containerInfo,Cu=jc,t=Sm(t),Qo(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var m=o.anchorOffset,p=o.focusNode;o=o.focusOffset;try{r.nodeType,p.nodeType}catch{r=null;break e}var j=0,R=-1,K=-1,le=0,pe=0,je=t,ie=null;t:for(;;){for(var de;je!==r||m!==0&&je.nodeType!==3||(R=j+m),je!==p||o!==0&&je.nodeType!==3||(K=j+o),je.nodeType===3&&(j+=je.nodeValue.length),(de=je.firstChild)!==null;)ie=je,je=de;for(;;){if(je===t)break t;if(ie===r&&++le===m&&(R=j),ie===p&&++pe===o&&(K=j),(de=je.nextSibling)!==null)break;je=ie,ie=je.parentNode}je=de}r=R===-1||K===-1?null:{start:R,end:K}}else r=null}r=r||{start:0,end:0}}else r=null;for(Au={focusedElem:t,selectionRange:r},jc=!1,Qt=n;Qt!==null;)if(n=Qt,t=n.child,(n.subtreeFlags&1028)!==0&&t!==null)t.return=n,Qt=t;else for(;Qt!==null;){switch(n=Qt,p=n.alternate,t=n.flags,n.tag){case 0:if((t&4)!==0&&(t=n.updateQueue,t=t!==null?t.events:null,t!==null))for(r=0;r<t.length;r++)m=t[r],m.ref.impl=m.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&p!==null){t=void 0,r=n,m=p.memoizedProps,p=p.memoizedState,o=r.stateNode;try{var Ue=zn(r.type,m);t=o.getSnapshotBeforeUpdate(Ue,p),o.__reactInternalSnapshotBeforeUpdate=t}catch(We){jt(r,r.return,We)}}break;case 3:if((t&1024)!==0){if(t=n.stateNode.containerInfo,r=t.nodeType,r===9)_u(t);else if(r===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":_u(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(i(163))}if(t=n.sibling,t!==null){t.return=n.return,Qt=t;break}Qt=n.return}}function mp(t,n,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Ea(t,r),o&4&&vi(5,r);break;case 1:if(Ea(t,r),o&4)if(t=r.stateNode,n===null)try{t.componentDidMount()}catch(j){jt(r,r.return,j)}else{var m=zn(r.type,n.memoizedProps);n=n.memoizedState;try{t.componentDidUpdate(m,n,t.__reactInternalSnapshotBeforeUpdate)}catch(j){jt(r,r.return,j)}}o&64&&rp(r),o&512&&ji(r,r.return);break;case 3:if(Ea(t,r),o&64&&(t=r.updateQueue,t!==null)){if(n=null,r.child!==null)switch(r.child.tag){case 27:case 5:n=r.child.stateNode;break;case 1:n=r.child.stateNode}try{Km(t,n)}catch(j){jt(r,r.return,j)}}break;case 27:n===null&&o&4&&up(r);case 26:case 5:Ea(t,r),n===null&&o&4&&op(r),o&512&&ji(r,r.return);break;case 12:Ea(t,r);break;case 31:Ea(t,r),o&4&&gp(t,r);break;case 13:Ea(t,r),o&4&&xp(t,r),o&64&&(t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(r=Nj.bind(null,r),Hj(t,r))));break;case 22:if(o=r.memoizedState!==null||Ca,!o){n=n!==null&&n.memoizedState!==null||Gt,m=Ca;var p=Gt;Ca=o,(Gt=n)&&!p?Ta(t,r,(r.subtreeFlags&8772)!==0):Ea(t,r),Ca=m,Gt=p}break;case 30:break;default:Ea(t,r)}}function fp(t){var n=t.alternate;n!==null&&(t.alternate=null,fp(n)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(n=t.stateNode,n!==null&&Te(n)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var $t=null,fs=!1;function Aa(t,n,r){for(r=r.child;r!==null;)pp(t,n,r),r=r.sibling}function pp(t,n,r){if(es&&typeof es.onCommitFiberUnmount=="function")try{es.onCommitFiberUnmount(ha,r)}catch{}switch(r.tag){case 26:Gt||aa(r,n),Aa(t,n,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Gt||aa(r,n);var o=$t,m=fs;an(r.type)&&($t=r.stateNode,fs=!1),Aa(t,n,r),ki(r.stateNode),$t=o,fs=m;break;case 5:Gt||aa(r,n);case 6:if(o=$t,m=fs,$t=null,Aa(t,n,r),$t=o,fs=m,$t!==null)if(fs)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(r.stateNode)}catch(p){jt(r,n,p)}else try{$t.removeChild(r.stateNode)}catch(p){jt(r,n,p)}break;case 18:$t!==null&&(fs?(t=$t,rg(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,r.stateNode),Il(t)):rg($t,r.stateNode));break;case 4:o=$t,m=fs,$t=r.stateNode.containerInfo,fs=!0,Aa(t,n,r),$t=o,fs=m;break;case 0:case 11:case 14:case 15:Ka(2,r,n),Gt||Ka(4,r,n),Aa(t,n,r);break;case 1:Gt||(aa(r,n),o=r.stateNode,typeof o.componentWillUnmount=="function"&&cp(r,n,o)),Aa(t,n,r);break;case 21:Aa(t,n,r);break;case 22:Gt=(o=Gt)||r.memoizedState!==null,Aa(t,n,r),Gt=o;break;default:Aa(t,n,r)}}function gp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{Il(t)}catch(r){jt(n,n.return,r)}}}function xp(t,n){if(n.memoizedState===null&&(t=n.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Il(t)}catch(r){jt(n,n.return,r)}}function fj(t){switch(t.tag){case 31:case 13:case 19:var n=t.stateNode;return n===null&&(n=t.stateNode=new hp),n;case 22:return t=t.stateNode,n=t._retryCache,n===null&&(n=t._retryCache=new hp),n;default:throw Error(i(435,t.tag))}}function tc(t,n){var r=fj(t);n.forEach(function(o){if(!r.has(o)){r.add(o);var m=Sj.bind(null,t,o);o.then(m,m)}})}function ps(t,n){var r=n.deletions;if(r!==null)for(var o=0;o<r.length;o++){var m=r[o],p=t,j=n,R=j;e:for(;R!==null;){switch(R.tag){case 27:if(an(R.type)){$t=R.stateNode,fs=!1;break e}break;case 5:$t=R.stateNode,fs=!1;break e;case 3:case 4:$t=R.stateNode.containerInfo,fs=!0;break e}R=R.return}if($t===null)throw Error(i(160));pp(p,j,m),$t=null,fs=!1,p=m.alternate,p!==null&&(p.return=null),m.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)bp(n,t),n=n.sibling}var Zs=null;function bp(t,n){var r=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:ps(n,t),gs(t),o&4&&(Ka(3,t,t.return),vi(3,t),Ka(5,t,t.return));break;case 1:ps(n,t),gs(t),o&512&&(Gt||r===null||aa(r,r.return)),o&64&&Ca&&(t=t.updateQueue,t!==null&&(o=t.callbacks,o!==null&&(r=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var m=Zs;if(ps(n,t),gs(t),o&512&&(Gt||r===null||aa(r,r.return)),o&4){var p=r!==null?r.memoizedState:null;if(o=t.memoizedState,r===null)if(o===null)if(t.stateNode===null){e:{o=t.type,r=t.memoizedProps,m=m.ownerDocument||m;t:switch(o){case"title":p=m.getElementsByTagName("title")[0],(!p||p[Ie]||p[H]||p.namespaceURI==="http://www.w3.org/2000/svg"||p.hasAttribute("itemprop"))&&(p=m.createElement(o),m.head.insertBefore(p,m.querySelector("head > title"))),is(p,o,r),p[H]=t,Qe(p),o=p;break e;case"link":var j=bg("link","href",m).get(o+(r.href||""));if(j){for(var R=0;R<j.length;R++)if(p=j[R],p.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&p.getAttribute("rel")===(r.rel==null?null:r.rel)&&p.getAttribute("title")===(r.title==null?null:r.title)&&p.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){j.splice(R,1);break t}}p=m.createElement(o),is(p,o,r),m.head.appendChild(p);break;case"meta":if(j=bg("meta","content",m).get(o+(r.content||""))){for(R=0;R<j.length;R++)if(p=j[R],p.getAttribute("content")===(r.content==null?null:""+r.content)&&p.getAttribute("name")===(r.name==null?null:r.name)&&p.getAttribute("property")===(r.property==null?null:r.property)&&p.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&p.getAttribute("charset")===(r.charSet==null?null:r.charSet)){j.splice(R,1);break t}}p=m.createElement(o),is(p,o,r),m.head.appendChild(p);break;default:throw Error(i(468,o))}p[H]=t,Qe(p),o=p}t.stateNode=o}else yg(m,t.type,t.stateNode);else t.stateNode=xg(m,o,t.memoizedProps);else p!==o?(p===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):p.count--,o===null?yg(m,t.type,t.stateNode):xg(m,o,t.memoizedProps)):o===null&&t.stateNode!==null&&tu(t,t.memoizedProps,r.memoizedProps)}break;case 27:ps(n,t),gs(t),o&512&&(Gt||r===null||aa(r,r.return)),r!==null&&o&4&&tu(t,t.memoizedProps,r.memoizedProps);break;case 5:if(ps(n,t),gs(t),o&512&&(Gt||r===null||aa(r,r.return)),t.flags&32){m=t.stateNode;try{ll(m,"")}catch(Ue){jt(t,t.return,Ue)}}o&4&&t.stateNode!=null&&(m=t.memoizedProps,tu(t,m,r!==null?r.memoizedProps:m)),o&1024&&(nu=!0);break;case 6:if(ps(n,t),gs(t),o&4){if(t.stateNode===null)throw Error(i(162));o=t.memoizedProps,r=t.stateNode;try{r.nodeValue=o}catch(Ue){jt(t,t.return,Ue)}}break;case 3:if(xc=null,m=Zs,Zs=pc(n.containerInfo),ps(n,t),Zs=m,gs(t),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Il(n.containerInfo)}catch(Ue){jt(t,t.return,Ue)}nu&&(nu=!1,yp(t));break;case 4:o=Zs,Zs=pc(t.stateNode.containerInfo),ps(n,t),gs(t),Zs=o;break;case 12:ps(n,t),gs(t);break;case 31:ps(n,t),gs(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,tc(t,o)));break;case 13:ps(n,t),gs(t),t.child.flags&8192&&t.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(ac=Xe()),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,tc(t,o)));break;case 22:m=t.memoizedState!==null;var K=r!==null&&r.memoizedState!==null,le=Ca,pe=Gt;if(Ca=le||m,Gt=pe||K,ps(n,t),Gt=pe,Ca=le,gs(t),o&8192)e:for(n=t.stateNode,n._visibility=m?n._visibility&-2:n._visibility|1,m&&(r===null||K||Ca||Gt||Un(t)),r=null,n=t;;){if(n.tag===5||n.tag===26){if(r===null){K=r=n;try{if(p=K.stateNode,m)j=p.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{R=K.stateNode;var je=K.memoizedProps.style,ie=je!=null&&je.hasOwnProperty("display")?je.display:null;R.style.display=ie==null||typeof ie=="boolean"?"":(""+ie).trim()}}catch(Ue){jt(K,K.return,Ue)}}}else if(n.tag===6){if(r===null){K=n;try{K.stateNode.nodeValue=m?"":K.memoizedProps}catch(Ue){jt(K,K.return,Ue)}}}else if(n.tag===18){if(r===null){K=n;try{var de=K.stateNode;m?cg(de,!0):cg(K.stateNode,!1)}catch(Ue){jt(K,K.return,Ue)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===t)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break e;for(;n.sibling===null;){if(n.return===null||n.return===t)break e;r===n&&(r=null),n=n.return}r===n&&(r=null),n.sibling.return=n.return,n=n.sibling}o&4&&(o=t.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,tc(t,r))));break;case 19:ps(n,t),gs(t),o&4&&(o=t.updateQueue,o!==null&&(t.updateQueue=null,tc(t,o)));break;case 30:break;case 21:break;default:ps(n,t),gs(t)}}function gs(t){var n=t.flags;if(n&2){try{for(var r,o=t.return;o!==null;){if(dp(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var m=r.stateNode,p=su(t);ec(t,p,m);break;case 5:var j=r.stateNode;r.flags&32&&(ll(j,""),r.flags&=-33);var R=su(t);ec(t,R,j);break;case 3:case 4:var K=r.stateNode.containerInfo,le=su(t);au(t,le,K);break;default:throw Error(i(161))}}catch(pe){jt(t,t.return,pe)}t.flags&=-3}n&4096&&(t.flags&=-4097)}function yp(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var n=t;yp(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),t=t.sibling}}function Ea(t,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)mp(t,n.alternate,n),n=n.sibling}function Un(t){for(t=t.child;t!==null;){var n=t;switch(n.tag){case 0:case 11:case 14:case 15:Ka(4,n,n.return),Un(n);break;case 1:aa(n,n.return);var r=n.stateNode;typeof r.componentWillUnmount=="function"&&cp(n,n.return,r),Un(n);break;case 27:ki(n.stateNode);case 26:case 5:aa(n,n.return),Un(n);break;case 22:n.memoizedState===null&&Un(n);break;case 30:Un(n);break;default:Un(n)}t=t.sibling}}function Ta(t,n,r){for(r=r&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var o=n.alternate,m=t,p=n,j=p.flags;switch(p.tag){case 0:case 11:case 15:Ta(m,p,r),vi(4,p);break;case 1:if(Ta(m,p,r),o=p,m=o.stateNode,typeof m.componentDidMount=="function")try{m.componentDidMount()}catch(le){jt(o,o.return,le)}if(o=p,m=o.updateQueue,m!==null){var R=o.stateNode;try{var K=m.shared.hiddenCallbacks;if(K!==null)for(m.shared.hiddenCallbacks=null,m=0;m<K.length;m++)Wm(K[m],R)}catch(le){jt(o,o.return,le)}}r&&j&64&&rp(p),ji(p,p.return);break;case 27:up(p);case 26:case 5:Ta(m,p,r),r&&o===null&&j&4&&op(p),ji(p,p.return);break;case 12:Ta(m,p,r);break;case 31:Ta(m,p,r),r&&j&4&&gp(m,p);break;case 13:Ta(m,p,r),r&&j&4&&xp(m,p);break;case 22:p.memoizedState===null&&Ta(m,p,r),ji(p,p.return);break;case 30:break;default:Ta(m,p,r)}n=n.sibling}}function lu(t,n){var r=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(r=t.memoizedState.cachePool.pool),t=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(t=n.memoizedState.cachePool.pool),t!==r&&(t!=null&&t.refCount++,r!=null&&ri(r))}function iu(t,n){t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&ri(t))}function Js(t,n,r,o){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)vp(t,n,r,o),n=n.sibling}function vp(t,n,r,o){var m=n.flags;switch(n.tag){case 0:case 11:case 15:Js(t,n,r,o),m&2048&&vi(9,n);break;case 1:Js(t,n,r,o);break;case 3:Js(t,n,r,o),m&2048&&(t=null,n.alternate!==null&&(t=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==t&&(n.refCount++,t!=null&&ri(t)));break;case 12:if(m&2048){Js(t,n,r,o),t=n.stateNode;try{var p=n.memoizedProps,j=p.id,R=p.onPostCommit;typeof R=="function"&&R(j,n.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(K){jt(n,n.return,K)}}else Js(t,n,r,o);break;case 31:Js(t,n,r,o);break;case 13:Js(t,n,r,o);break;case 23:break;case 22:p=n.stateNode,j=n.alternate,n.memoizedState!==null?p._visibility&2?Js(t,n,r,o):Ni(t,n):p._visibility&2?Js(t,n,r,o):(p._visibility|=2,Cl(t,n,r,o,(n.subtreeFlags&10256)!==0||!1)),m&2048&&lu(j,n);break;case 24:Js(t,n,r,o),m&2048&&iu(n.alternate,n);break;default:Js(t,n,r,o)}}function Cl(t,n,r,o,m){for(m=m&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var p=t,j=n,R=r,K=o,le=j.flags;switch(j.tag){case 0:case 11:case 15:Cl(p,j,R,K,m),vi(8,j);break;case 23:break;case 22:var pe=j.stateNode;j.memoizedState!==null?pe._visibility&2?Cl(p,j,R,K,m):Ni(p,j):(pe._visibility|=2,Cl(p,j,R,K,m)),m&&le&2048&&lu(j.alternate,j);break;case 24:Cl(p,j,R,K,m),m&&le&2048&&iu(j.alternate,j);break;default:Cl(p,j,R,K,m)}n=n.sibling}}function Ni(t,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var r=t,o=n,m=o.flags;switch(o.tag){case 22:Ni(r,o),m&2048&&lu(o.alternate,o);break;case 24:Ni(r,o),m&2048&&iu(o.alternate,o);break;default:Ni(r,o)}n=n.sibling}}var Si=8192;function Al(t,n,r){if(t.subtreeFlags&Si)for(t=t.child;t!==null;)jp(t,n,r),t=t.sibling}function jp(t,n,r){switch(t.tag){case 26:Al(t,n,r),t.flags&Si&&t.memoizedState!==null&&eN(r,Zs,t.memoizedState,t.memoizedProps);break;case 5:Al(t,n,r);break;case 3:case 4:var o=Zs;Zs=pc(t.stateNode.containerInfo),Al(t,n,r),Zs=o;break;case 22:t.memoizedState===null&&(o=t.alternate,o!==null&&o.memoizedState!==null?(o=Si,Si=16777216,Al(t,n,r),Si=o):Al(t,n,r));break;default:Al(t,n,r)}}function Np(t){var n=t.alternate;if(n!==null&&(t=n.child,t!==null)){n.child=null;do n=t.sibling,t.sibling=null,t=n;while(t!==null)}}function wi(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Qt=o,wp(o,t)}Np(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Sp(t),t=t.sibling}function Sp(t){switch(t.tag){case 0:case 11:case 15:wi(t),t.flags&2048&&Ka(9,t,t.return);break;case 3:wi(t);break;case 12:wi(t);break;case 22:var n=t.stateNode;t.memoizedState!==null&&n._visibility&2&&(t.return===null||t.return.tag!==13)?(n._visibility&=-3,sc(t)):wi(t);break;default:wi(t)}}function sc(t){var n=t.deletions;if((t.flags&16)!==0){if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];Qt=o,wp(o,t)}Np(t)}for(t=t.child;t!==null;){switch(n=t,n.tag){case 0:case 11:case 15:Ka(8,n,n.return),sc(n);break;case 22:r=n.stateNode,r._visibility&2&&(r._visibility&=-3,sc(n));break;default:sc(n)}t=t.sibling}}function wp(t,n){for(;Qt!==null;){var r=Qt;switch(r.tag){case 0:case 11:case 15:Ka(8,r,n);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:ri(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,Qt=o;else e:for(r=t;Qt!==null;){o=Qt;var m=o.sibling,p=o.return;if(fp(o),o===r){Qt=null;break e}if(m!==null){m.return=p,Qt=m;break e}Qt=p}}}var pj={getCacheForType:function(t){var n=ns(Yt),r=n.data.get(t);return r===void 0&&(r=t(),n.data.set(t,r)),r},cacheSignal:function(){return ns(Yt).controller.signal}},gj=typeof WeakMap=="function"?WeakMap:Map,bt=0,At=null,it=null,ct=0,vt=0,_s=null,Qa=!1,El=!1,ru=!1,_a=0,zt=0,Za=0,Bn=0,cu=0,ks=0,Tl=0,Ci=null,xs=null,ou=!1,ac=0,Cp=0,nc=1/0,lc=null,Ja=null,Wt=0,en=null,_l=null,ka=0,du=0,uu=null,Ap=null,Ai=0,hu=null;function Ds(){return(bt&2)!==0&&ct!==0?ct&-ct:N.T!==null?bu():ke()}function Ep(){if(ks===0)if((ct&536870912)===0||ut){var t=wn;wn<<=1,(wn&3932160)===0&&(wn=262144),ks=t}else ks=536870912;return t=Es.current,t!==null&&(t.flags|=32),ks}function bs(t,n,r){(t===At&&(vt===2||vt===9)||t.cancelPendingCommit!==null)&&(kl(t,0),tn(t,ct,ks,!1)),us(t,r),((bt&2)===0||t!==At)&&(t===At&&((bt&2)===0&&(Bn|=r),zt===4&&tn(t,ct,ks,!1)),na(t))}function Tp(t,n,r){if((bt&6)!==0)throw Error(i(327));var o=!r&&(n&127)===0&&(n&t.expiredLanes)===0||os(t,n),m=o?yj(t,n):fu(t,n,!0),p=o;do{if(m===0){El&&!o&&tn(t,n,0,!1);break}else{if(r=t.current.alternate,p&&!xj(r)){m=fu(t,n,!1),p=!1;continue}if(m===2){if(p=n,t.errorRecoveryDisabledLanes&p)var j=0;else j=t.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){n=j;e:{var R=t;m=Ci;var K=R.current.memoizedState.isDehydrated;if(K&&(kl(R,j).flags|=256),j=fu(R,j,!1),j!==2){if(ru&&!K){R.errorRecoveryDisabledLanes|=p,Bn|=p,m=4;break e}p=xs,xs=m,p!==null&&(xs===null?xs=p:xs.push.apply(xs,p))}m=j}if(p=!1,m!==2)continue}}if(m===1){kl(t,0),tn(t,n,0,!0);break}e:{switch(o=t,p=m,p){case 0:case 1:throw Error(i(345));case 4:if((n&4194048)!==n)break;case 6:tn(o,n,ks,!Qa);break e;case 2:xs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((n&62914560)===n&&(m=ac+300-Xe(),10<m)){if(tn(o,n,ks,!Qa),Zn(o,0,!0)!==0)break e;ka=n,o.timeoutHandle=lg(_p.bind(null,o,r,xs,lc,ou,n,ks,Bn,Tl,Qa,p,"Throttled",-0,0),m);break e}_p(o,r,xs,lc,ou,n,ks,Bn,Tl,Qa,p,null,-0,0)}}break}while(!0);na(t)}function _p(t,n,r,o,m,p,j,R,K,le,pe,je,ie,de){if(t.timeoutHandle=-1,je=n.subtreeFlags,je&8192||(je&16785408)===16785408){je={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:pa},jp(n,p,je);var Ue=(p&62914560)===p?ac-Xe():(p&4194048)===p?Cp-Xe():0;if(Ue=tN(je,Ue),Ue!==null){ka=p,t.cancelPendingCommit=Ue(Lp.bind(null,t,n,p,r,o,m,j,R,K,pe,je,null,ie,de)),tn(t,p,j,!le);return}}Lp(t,n,p,r,o,m,j,R,K)}function xj(t){for(var n=t;;){var r=n.tag;if((r===0||r===11||r===15)&&n.flags&16384&&(r=n.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var m=r[o],p=m.getSnapshot;m=m.value;try{if(!Cs(p(),m))return!1}catch{return!1}}if(r=n.child,n.subtreeFlags&16384&&r!==null)r.return=n,n=r;else{if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function tn(t,n,r,o){n&=~cu,n&=~Bn,t.suspendedLanes|=n,t.pingedLanes&=~n,o&&(t.warmLanes|=n),o=t.expirationTimes;for(var m=n;0<m;){var p=31-ts(m),j=1<<p;o[p]=-1,m&=~j}r!==0&&Rs(t,r,n)}function ic(){return(bt&6)===0?(Ei(0),!1):!0}function mu(){if(it!==null){if(vt===0)var t=it.return;else t=it,ya=Dn=null,_d(t),vl=null,oi=0,t=it;for(;t!==null;)ip(t.alternate,t),t=t.return;it=null}}function kl(t,n){var r=t.timeoutHandle;r!==-1&&(t.timeoutHandle=-1,Lj(r)),r=t.cancelPendingCommit,r!==null&&(t.cancelPendingCommit=null,r()),ka=0,mu(),At=t,it=r=xa(t.current,null),ct=n,vt=0,_s=null,Qa=!1,El=os(t,n),ru=!1,Tl=ks=cu=Bn=Za=zt=0,xs=Ci=null,ou=!1,(n&8)!==0&&(n|=n&32);var o=t.entangledLanes;if(o!==0)for(t=t.entanglements,o&=n;0<o;){var m=31-ts(o),p=1<<m;n|=t[m],o&=~p}return _a=n,Er(),r}function kp(t,n){st=null,N.H=xi,n===yl||n===Or?(n=Pm(),vt=3):n===xd?(n=Pm(),vt=4):vt=n===Pd?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,_s=n,it===null&&(zt=1,Wr(t,Ls(n,t.current)))}function Dp(){var t=Es.current;return t===null?!0:(ct&4194048)===ct?Fs===null:(ct&62914560)===ct||(ct&536870912)!==0?t===Fs:!1}function Mp(){var t=N.H;return N.H=xi,t===null?xi:t}function Rp(){var t=N.A;return N.A=pj,t}function rc(){zt=4,Qa||(ct&4194048)!==ct&&Es.current!==null||(El=!0),(Za&134217727)===0&&(Bn&134217727)===0||At===null||tn(At,ct,ks,!1)}function fu(t,n,r){var o=bt;bt|=2;var m=Mp(),p=Rp();(At!==t||ct!==n)&&(lc=null,kl(t,n)),n=!1;var j=zt;e:do try{if(vt!==0&&it!==null){var R=it,K=_s;switch(vt){case 8:mu(),j=6;break e;case 3:case 2:case 9:case 6:Es.current===null&&(n=!0);var le=vt;if(vt=0,_s=null,Dl(t,R,K,le),r&&El){j=0;break e}break;default:le=vt,vt=0,_s=null,Dl(t,R,K,le)}}bj(),j=zt;break}catch(pe){kp(t,pe)}while(!0);return n&&t.shellSuspendCounter++,ya=Dn=null,bt=o,N.H=m,N.A=p,it===null&&(At=null,ct=0,Er()),j}function bj(){for(;it!==null;)$p(it)}function yj(t,n){var r=bt;bt|=2;var o=Mp(),m=Rp();At!==t||ct!==n?(lc=null,nc=Xe()+500,kl(t,n)):El=os(t,n);e:do try{if(vt!==0&&it!==null){n=it;var p=_s;t:switch(vt){case 1:vt=0,_s=null,Dl(t,n,p,1);break;case 2:case 9:if(Vm(p)){vt=0,_s=null,Op(n);break}n=function(){vt!==2&&vt!==9||At!==t||(vt=7),na(t)},p.then(n,n);break e;case 3:vt=7;break e;case 4:vt=5;break e;case 7:Vm(p)?(vt=0,_s=null,Op(n)):(vt=0,_s=null,Dl(t,n,p,7));break;case 5:var j=null;switch(it.tag){case 26:j=it.memoizedState;case 5:case 27:var R=it;if(j?vg(j):R.stateNode.complete){vt=0,_s=null;var K=R.sibling;if(K!==null)it=K;else{var le=R.return;le!==null?(it=le,cc(le)):it=null}break t}}vt=0,_s=null,Dl(t,n,p,5);break;case 6:vt=0,_s=null,Dl(t,n,p,6);break;case 8:mu(),zt=6;break e;default:throw Error(i(462))}}vj();break}catch(pe){kp(t,pe)}while(!0);return ya=Dn=null,N.H=o,N.A=m,bt=r,it!==null?0:(At=null,ct=0,Er(),zt)}function vj(){for(;it!==null&&!we();)$p(it)}function $p(t){var n=np(t.alternate,t,_a);t.memoizedProps=t.pendingProps,n===null?cc(t):it=n}function Op(t){var n=t,r=n.alternate;switch(n.tag){case 15:case 0:n=Zf(r,n,n.pendingProps,n.type,void 0,ct);break;case 11:n=Zf(r,n,n.pendingProps,n.type.render,n.ref,ct);break;case 5:_d(n);default:ip(r,n),n=it=Mm(n,_a),n=np(r,n,_a)}t.memoizedProps=t.pendingProps,n===null?cc(t):it=n}function Dl(t,n,r,o){ya=Dn=null,_d(n),vl=null,oi=0;var m=n.return;try{if(cj(t,m,n,r,ct)){zt=1,Wr(t,Ls(r,t.current)),it=null;return}}catch(p){if(m!==null)throw it=m,p;zt=1,Wr(t,Ls(r,t.current)),it=null;return}n.flags&32768?(ut||o===1?t=!0:El||(ct&536870912)!==0?t=!1:(Qa=t=!0,(o===2||o===9||o===3||o===6)&&(o=Es.current,o!==null&&o.tag===13&&(o.flags|=16384))),Ip(n,t)):cc(n)}function cc(t){var n=t;do{if((n.flags&32768)!==0){Ip(n,Qa);return}t=n.return;var r=uj(n.alternate,n,_a);if(r!==null){it=r;return}if(n=n.sibling,n!==null){it=n;return}it=n=t}while(n!==null);zt===0&&(zt=5)}function Ip(t,n){do{var r=hj(t.alternate,t);if(r!==null){r.flags&=32767,it=r;return}if(r=t.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!n&&(t=t.sibling,t!==null)){it=t;return}it=t=r}while(t!==null);zt=6,it=null}function Lp(t,n,r,o,m,p,j,R,K){t.cancelPendingCommit=null;do oc();while(Wt!==0);if((bt&6)!==0)throw Error(i(327));if(n!==null){if(n===t.current)throw Error(i(177));if(p=n.lanes|n.childLanes,p|=sd,fa(t,r,p,j,R,K),t===At&&(it=At=null,ct=0),_l=n,en=t,ka=r,du=p,uu=m,Ap=o,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,wj(Ss,function(){return Hp(),null})):(t.callbackNode=null,t.callbackPriority=0),o=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||o){o=N.T,N.T=null,m=M.p,M.p=2,j=bt,bt|=4;try{mj(t,n,r)}finally{bt=j,M.p=m,N.T=o}}Wt=1,zp(),Up(),Bp()}}function zp(){if(Wt===1){Wt=0;var t=en,n=_l,r=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||r){r=N.T,N.T=null;var o=M.p;M.p=2;var m=bt;bt|=4;try{bp(n,t);var p=Au,j=Sm(t.containerInfo),R=p.focusedElem,K=p.selectionRange;if(j!==R&&R&&R.ownerDocument&&Nm(R.ownerDocument.documentElement,R)){if(K!==null&&Qo(R)){var le=K.start,pe=K.end;if(pe===void 0&&(pe=le),"selectionStart"in R)R.selectionStart=le,R.selectionEnd=Math.min(pe,R.value.length);else{var je=R.ownerDocument||document,ie=je&&je.defaultView||window;if(ie.getSelection){var de=ie.getSelection(),Ue=R.textContent.length,We=Math.min(K.start,Ue),Ct=K.end===void 0?We:Math.min(K.end,Ue);!de.extend&&We>Ct&&(j=Ct,Ct=We,We=j);var ae=jm(R,We),Z=jm(R,Ct);if(ae&&Z&&(de.rangeCount!==1||de.anchorNode!==ae.node||de.anchorOffset!==ae.offset||de.focusNode!==Z.node||de.focusOffset!==Z.offset)){var ne=je.createRange();ne.setStart(ae.node,ae.offset),de.removeAllRanges(),We>Ct?(de.addRange(ne),de.extend(Z.node,Z.offset)):(ne.setEnd(Z.node,Z.offset),de.addRange(ne))}}}}for(je=[],de=R;de=de.parentNode;)de.nodeType===1&&je.push({element:de,left:de.scrollLeft,top:de.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<je.length;R++){var ye=je[R];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}jc=!!Cu,Au=Cu=null}finally{bt=m,M.p=o,N.T=r}}t.current=n,Wt=2}}function Up(){if(Wt===2){Wt=0;var t=en,n=_l,r=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||r){r=N.T,N.T=null;var o=M.p;M.p=2;var m=bt;bt|=4;try{mp(t,n.alternate,n)}finally{bt=m,M.p=o,N.T=r}}Wt=3}}function Bp(){if(Wt===4||Wt===3){Wt=0,Ve();var t=en,n=_l,r=ka,o=Ap;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?Wt=5:(Wt=0,_l=en=null,Fp(t,t.pendingLanes));var m=t.pendingLanes;if(m===0&&(Ja=null),xe(r),n=n.stateNode,es&&typeof es.onCommitFiberRoot=="function")try{es.onCommitFiberRoot(ha,n,void 0,(n.current.flags&128)===128)}catch{}if(o!==null){n=N.T,m=M.p,M.p=2,N.T=null;try{for(var p=t.onRecoverableError,j=0;j<o.length;j++){var R=o[j];p(R.value,{componentStack:R.stack})}}finally{N.T=n,M.p=m}}(ka&3)!==0&&oc(),na(t),m=t.pendingLanes,(r&261930)!==0&&(m&42)!==0?t===hu?Ai++:(Ai=0,hu=t):Ai=0,Ei(0)}}function Fp(t,n){(t.pooledCacheLanes&=n)===0&&(n=t.pooledCache,n!=null&&(t.pooledCache=null,ri(n)))}function oc(){return zp(),Up(),Bp(),Hp()}function Hp(){if(Wt!==5)return!1;var t=en,n=du;du=0;var r=xe(ka),o=N.T,m=M.p;try{M.p=32>r?32:r,N.T=null,r=uu,uu=null;var p=en,j=ka;if(Wt=0,_l=en=null,ka=0,(bt&6)!==0)throw Error(i(331));var R=bt;if(bt|=4,Sp(p.current),vp(p,p.current,j,r),bt=R,Ei(0,!1),es&&typeof es.onPostCommitFiberRoot=="function")try{es.onPostCommitFiberRoot(ha,p)}catch{}return!0}finally{M.p=m,N.T=o,Fp(t,n)}}function Vp(t,n,r){n=Ls(r,n),n=Yd(t.stateNode,n,2),t=Ga(t,n,2),t!==null&&(us(t,2),na(t))}function jt(t,n,r){if(t.tag===3)Vp(t,t,r);else for(;n!==null;){if(n.tag===3){Vp(n,t,r);break}else if(n.tag===1){var o=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Ja===null||!Ja.has(o))){t=Ls(r,t),r=Yf(2),o=Ga(n,r,2),o!==null&&(Pf(r,o,n,t),us(o,2),na(o));break}}n=n.return}}function pu(t,n,r){var o=t.pingCache;if(o===null){o=t.pingCache=new gj;var m=new Set;o.set(n,m)}else m=o.get(n),m===void 0&&(m=new Set,o.set(n,m));m.has(r)||(ru=!0,m.add(r),t=jj.bind(null,t,n,r),n.then(t,t))}function jj(t,n,r){var o=t.pingCache;o!==null&&o.delete(n),t.pingedLanes|=t.suspendedLanes&r,t.warmLanes&=~r,At===t&&(ct&r)===r&&(zt===4||zt===3&&(ct&62914560)===ct&&300>Xe()-ac?(bt&2)===0&&kl(t,0):cu|=r,Tl===ct&&(Tl=0)),na(t)}function Yp(t,n){n===0&&(n=gr()),t=Tn(t,n),t!==null&&(us(t,n),na(t))}function Nj(t){var n=t.memoizedState,r=0;n!==null&&(r=n.retryLane),Yp(t,r)}function Sj(t,n){var r=0;switch(t.tag){case 31:case 13:var o=t.stateNode,m=t.memoizedState;m!==null&&(r=m.retryLane);break;case 19:o=t.stateNode;break;case 22:o=t.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(n),Yp(t,r)}function wj(t,n){return ce(t,n)}var dc=null,Ml=null,gu=!1,uc=!1,xu=!1,sn=0;function na(t){t!==Ml&&t.next===null&&(Ml===null?dc=Ml=t:Ml=Ml.next=t),uc=!0,gu||(gu=!0,Aj())}function Ei(t,n){if(!xu&&uc){xu=!0;do for(var r=!1,o=dc;o!==null;){if(t!==0){var m=o.pendingLanes;if(m===0)var p=0;else{var j=o.suspendedLanes,R=o.pingedLanes;p=(1<<31-ts(42|t)+1)-1,p&=m&~(j&~R),p=p&201326741?p&201326741|1:p?p|2:0}p!==0&&(r=!0,Xp(o,p))}else p=ct,p=Zn(o,o===At?p:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(p&3)===0||os(o,p)||(r=!0,Xp(o,p));o=o.next}while(r);xu=!1}}function Cj(){Pp()}function Pp(){uc=gu=!1;var t=0;sn!==0&&Ij()&&(t=sn);for(var n=Xe(),r=null,o=dc;o!==null;){var m=o.next,p=qp(o,n);p===0?(o.next=null,r===null?dc=m:r.next=m,m===null&&(Ml=r)):(r=o,(t!==0||(p&3)!==0)&&(uc=!0)),o=m}Wt!==0&&Wt!==5||Ei(t),sn!==0&&(sn=0)}function qp(t,n){for(var r=t.suspendedLanes,o=t.pingedLanes,m=t.expirationTimes,p=t.pendingLanes&-62914561;0<p;){var j=31-ts(p),R=1<<j,K=m[j];K===-1?((R&r)===0||(R&o)!==0)&&(m[j]=$o(R,n)):K<=n&&(t.expiredLanes|=R),p&=~R}if(n=At,r=ct,r=Zn(t,t===n?r:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o=t.callbackNode,r===0||t===n&&(vt===2||vt===9)||t.cancelPendingCommit!==null)return o!==null&&o!==null&&Se(o),t.callbackNode=null,t.callbackPriority=0;if((r&3)===0||os(t,r)){if(n=r&-r,n===t.callbackPriority)return n;switch(o!==null&&Se(o),xe(r)){case 2:case 8:r=Ht;break;case 32:r=Ss;break;case 268435456:r=xt;break;default:r=Ss}return o=Gp.bind(null,t),r=ce(r,o),t.callbackPriority=n,t.callbackNode=r,n}return o!==null&&o!==null&&Se(o),t.callbackPriority=2,t.callbackNode=null,2}function Gp(t,n){if(Wt!==0&&Wt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var r=t.callbackNode;if(oc()&&t.callbackNode!==r)return null;var o=ct;return o=Zn(t,t===At?o:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),o===0?null:(Tp(t,o,n),qp(t,Xe()),t.callbackNode!=null&&t.callbackNode===r?Gp.bind(null,t):null)}function Xp(t,n){if(oc())return null;Tp(t,n,!0)}function Aj(){zj(function(){(bt&6)!==0?ce(Fe,Cj):Pp()})}function bu(){if(sn===0){var t=xl;t===0&&(t=Sn,Sn<<=1,(Sn&261888)===0&&(Sn=256)),sn=t}return sn}function Wp(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:yr(""+t)}function Kp(t,n){var r=n.ownerDocument.createElement("input");return r.name=n.name,r.value=n.value,t.id&&r.setAttribute("form",t.id),n.parentNode.insertBefore(r,n),t=new FormData(t),r.parentNode.removeChild(r),t}function Ej(t,n,r,o,m){if(n==="submit"&&r&&r.stateNode===m){var p=Wp((m[he]||null).action),j=o.submitter;j&&(n=(n=j[he]||null)?Wp(n.formAction):j.getAttribute("formAction"),n!==null&&(p=n,j=null));var R=new Sr("action","action",null,o,m);t.push({event:R,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(sn!==0){var K=j?Kp(m,j):new FormData(m);zd(r,{pending:!0,data:K,method:m.method,action:p},null,K)}}else typeof p=="function"&&(R.preventDefault(),K=j?Kp(m,j):new FormData(m),zd(r,{pending:!0,data:K,method:m.method,action:p},p,K))},currentTarget:m}]})}}for(var yu=0;yu<td.length;yu++){var vu=td[yu],Tj=vu.toLowerCase(),_j=vu[0].toUpperCase()+vu.slice(1);Qs(Tj,"on"+_j)}Qs(Am,"onAnimationEnd"),Qs(Em,"onAnimationIteration"),Qs(Tm,"onAnimationStart"),Qs("dblclick","onDoubleClick"),Qs("focusin","onFocus"),Qs("focusout","onBlur"),Qs(Pv,"onTransitionRun"),Qs(qv,"onTransitionStart"),Qs(Gv,"onTransitionCancel"),Qs(_m,"onTransitionEnd"),yt("onMouseEnter",["mouseout","mouseover"]),yt("onMouseLeave",["mouseout","mouseover"]),yt("onPointerEnter",["pointerout","pointerover"]),yt("onPointerLeave",["pointerout","pointerover"]),at("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),at("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),at("onBeforeInput",["compositionend","keypress","textInput","paste"]),at("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kj=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ti));function Qp(t,n){n=(n&4)!==0;for(var r=0;r<t.length;r++){var o=t[r],m=o.event;o=o.listeners;e:{var p=void 0;if(n)for(var j=o.length-1;0<=j;j--){var R=o[j],K=R.instance,le=R.currentTarget;if(R=R.listener,K!==p&&m.isPropagationStopped())break e;p=R,m.currentTarget=le;try{p(m)}catch(pe){Ar(pe)}m.currentTarget=null,p=K}else for(j=0;j<o.length;j++){if(R=o[j],K=R.instance,le=R.currentTarget,R=R.listener,K!==p&&m.isPropagationStopped())break e;p=R,m.currentTarget=le;try{p(m)}catch(pe){Ar(pe)}m.currentTarget=null,p=K}}}}function rt(t,n){var r=n[ve];r===void 0&&(r=n[ve]=new Set);var o=t+"__bubble";r.has(o)||(Zp(n,t,2,!1),r.add(o))}function ju(t,n,r){var o=0;n&&(o|=4),Zp(r,t,o,n)}var hc="_reactListening"+Math.random().toString(36).slice(2);function Nu(t){if(!t[hc]){t[hc]=!0,Rt.forEach(function(r){r!=="selectionchange"&&(kj.has(r)||ju(r,!1,t),ju(r,!0,t))});var n=t.nodeType===9?t:t.ownerDocument;n===null||n[hc]||(n[hc]=!0,ju("selectionchange",!1,n))}}function Zp(t,n,r,o){switch(Eg(n)){case 2:var m=nN;break;case 8:m=lN;break;default:m=Lu}r=m.bind(null,n,r,t),m=void 0,!Ho||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(m=!0),o?m!==void 0?t.addEventListener(n,r,{capture:!0,passive:m}):t.addEventListener(n,r,!0):m!==void 0?t.addEventListener(n,r,{passive:m}):t.addEventListener(n,r,!1)}function Su(t,n,r,o,m){var p=o;if((n&1)===0&&(n&2)===0&&o!==null)e:for(;;){if(o===null)return;var j=o.tag;if(j===3||j===4){var R=o.stateNode.containerInfo;if(R===m)break;if(j===4)for(j=o.return;j!==null;){var K=j.tag;if((K===3||K===4)&&j.stateNode.containerInfo===m)return;j=j.return}for(;R!==null;){if(j=Be(R),j===null)return;if(K=j.tag,K===5||K===6||K===26||K===27){o=p=j;continue e}R=R.parentNode}}o=o.return}sm(function(){var le=p,pe=Bo(r),je=[];e:{var ie=km.get(t);if(ie!==void 0){var de=Sr,Ue=t;switch(t){case"keypress":if(jr(r)===0)break e;case"keydown":case"keyup":de=Sv;break;case"focusin":Ue="focus",de=qo;break;case"focusout":Ue="blur",de=qo;break;case"beforeblur":case"afterblur":de=qo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=lm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=uv;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Av;break;case Am:case Em:case Tm:de=fv;break;case _m:de=Tv;break;case"scroll":case"scrollend":de=ov;break;case"wheel":de=kv;break;case"copy":case"cut":case"paste":de=gv;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=rm;break;case"toggle":case"beforetoggle":de=Mv}var We=(n&4)!==0,Ct=!We&&(t==="scroll"||t==="scrollend"),ae=We?ie!==null?ie+"Capture":null:ie;We=[];for(var Z=le,ne;Z!==null;){var ye=Z;if(ne=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||ne===null||ae===null||(ye=Kl(Z,ae),ye!=null&&We.push(_i(Z,ye,ne))),Ct)break;Z=Z.return}0<We.length&&(ie=new de(ie,Ue,null,r,pe),je.push({event:ie,listeners:We}))}}if((n&7)===0){e:{if(ie=t==="mouseover"||t==="pointerover",de=t==="mouseout"||t==="pointerout",ie&&r!==Uo&&(Ue=r.relatedTarget||r.fromElement)&&(Be(Ue)||Ue[Ne]))break e;if((de||ie)&&(ie=pe.window===pe?pe:(ie=pe.ownerDocument)?ie.defaultView||ie.parentWindow:window,de?(Ue=r.relatedTarget||r.toElement,de=le,Ue=Ue?Be(Ue):null,Ue!==null&&(Ct=d(Ue),We=Ue.tag,Ue!==Ct||We!==5&&We!==27&&We!==6)&&(Ue=null)):(de=null,Ue=le),de!==Ue)){if(We=lm,ye="onMouseLeave",ae="onMouseEnter",Z="mouse",(t==="pointerout"||t==="pointerover")&&(We=rm,ye="onPointerLeave",ae="onPointerEnter",Z="pointer"),Ct=de==null?ie:ze(de),ne=Ue==null?ie:ze(Ue),ie=new We(ye,Z+"leave",de,r,pe),ie.target=Ct,ie.relatedTarget=ne,ye=null,Be(pe)===le&&(We=new We(ae,Z+"enter",Ue,r,pe),We.target=ne,We.relatedTarget=Ct,ye=We),Ct=ye,de&&Ue)t:{for(We=Dj,ae=de,Z=Ue,ne=0,ye=ae;ye;ye=We(ye))ne++;ye=0;for(var Ge=Z;Ge;Ge=We(Ge))ye++;for(;0<ne-ye;)ae=We(ae),ne--;for(;0<ye-ne;)Z=We(Z),ye--;for(;ne--;){if(ae===Z||Z!==null&&ae===Z.alternate){We=ae;break t}ae=We(ae),Z=We(Z)}We=null}else We=null;de!==null&&Jp(je,ie,de,We,!1),Ue!==null&&Ct!==null&&Jp(je,Ct,Ue,We,!0)}}e:{if(ie=le?ze(le):window,de=ie.nodeName&&ie.nodeName.toLowerCase(),de==="select"||de==="input"&&ie.type==="file")var ft=pm;else if(mm(ie))if(gm)ft=Hv;else{ft=Bv;var Pe=Uv}else de=ie.nodeName,!de||de.toLowerCase()!=="input"||ie.type!=="checkbox"&&ie.type!=="radio"?le&&zo(le.elementType)&&(ft=pm):ft=Fv;if(ft&&(ft=ft(t,le))){fm(je,ft,r,pe);break e}Pe&&Pe(t,ie,le),t==="focusout"&&le&&ie.type==="number"&&le.memoizedProps.value!=null&&Lo(ie,"number",ie.value)}switch(Pe=le?ze(le):window,t){case"focusin":(mm(Pe)||Pe.contentEditable==="true")&&(ol=Pe,Zo=le,ni=null);break;case"focusout":ni=Zo=ol=null;break;case"mousedown":Jo=!0;break;case"contextmenu":case"mouseup":case"dragend":Jo=!1,wm(je,r,pe);break;case"selectionchange":if(Yv)break;case"keydown":case"keyup":wm(je,r,pe)}var nt;if(Xo)e:{switch(t){case"compositionstart":var ot="onCompositionStart";break e;case"compositionend":ot="onCompositionEnd";break e;case"compositionupdate":ot="onCompositionUpdate";break e}ot=void 0}else cl?um(t,r)&&(ot="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(ot="onCompositionStart");ot&&(cm&&r.locale!=="ko"&&(cl||ot!=="onCompositionStart"?ot==="onCompositionEnd"&&cl&&(nt=am()):(Ba=pe,Vo="value"in Ba?Ba.value:Ba.textContent,cl=!0)),Pe=mc(le,ot),0<Pe.length&&(ot=new im(ot,t,null,r,pe),je.push({event:ot,listeners:Pe}),nt?ot.data=nt:(nt=hm(r),nt!==null&&(ot.data=nt)))),(nt=$v?Ov(t,r):Iv(t,r))&&(ot=mc(le,"onBeforeInput"),0<ot.length&&(Pe=new im("onBeforeInput","beforeinput",null,r,pe),je.push({event:Pe,listeners:ot}),Pe.data=nt)),Ej(je,t,le,r,pe)}Qp(je,n)})}function _i(t,n,r){return{instance:t,listener:n,currentTarget:r}}function mc(t,n){for(var r=n+"Capture",o=[];t!==null;){var m=t,p=m.stateNode;if(m=m.tag,m!==5&&m!==26&&m!==27||p===null||(m=Kl(t,r),m!=null&&o.unshift(_i(t,m,p)),m=Kl(t,n),m!=null&&o.push(_i(t,m,p))),t.tag===3)return o;t=t.return}return[]}function Dj(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function Jp(t,n,r,o,m){for(var p=n._reactName,j=[];r!==null&&r!==o;){var R=r,K=R.alternate,le=R.stateNode;if(R=R.tag,K!==null&&K===o)break;R!==5&&R!==26&&R!==27||le===null||(K=le,m?(le=Kl(r,p),le!=null&&j.unshift(_i(r,le,K))):m||(le=Kl(r,p),le!=null&&j.push(_i(r,le,K)))),r=r.return}j.length!==0&&t.push({event:n,listeners:j})}var Mj=/\r\n?/g,Rj=/\u0000|\uFFFD/g;function eg(t){return(typeof t=="string"?t:""+t).replace(Mj,`
`).replace(Rj,"")}function tg(t,n){return n=eg(n),eg(t)===n}function wt(t,n,r,o,m,p){switch(r){case"children":typeof o=="string"?n==="body"||n==="textarea"&&o===""||ll(t,o):(typeof o=="number"||typeof o=="bigint")&&n!=="body"&&ll(t,""+o);break;case"className":al(t,"class",o);break;case"tabIndex":al(t,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":al(t,r,o);break;case"style":em(t,o,p);break;case"data":if(n!=="object"){al(t,"data",o);break}case"src":case"href":if(o===""&&(n!=="a"||r!=="href")){t.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=yr(""+o),t.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){t.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof p=="function"&&(r==="formAction"?(n!=="input"&&wt(t,n,"name",m.name,m,null),wt(t,n,"formEncType",m.formEncType,m,null),wt(t,n,"formMethod",m.formMethod,m,null),wt(t,n,"formTarget",m.formTarget,m,null)):(wt(t,n,"encType",m.encType,m,null),wt(t,n,"method",m.method,m,null),wt(t,n,"target",m.target,m,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){t.removeAttribute(r);break}o=yr(""+o),t.setAttribute(r,o);break;case"onClick":o!=null&&(t.onclick=pa);break;case"onScroll":o!=null&&rt("scroll",t);break;case"onScrollEnd":o!=null&&rt("scrollend",t);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(m.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"multiple":t.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":t.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){t.removeAttribute("xlink:href");break}r=yr(""+o),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""+o):t.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,""):t.removeAttribute(r);break;case"capture":case"download":o===!0?t.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?t.setAttribute(r,o):t.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?t.setAttribute(r,o):t.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?t.removeAttribute(r):t.setAttribute(r,o);break;case"popover":rt("beforetoggle",t),rt("toggle",t),sl(t,"popover",o);break;case"xlinkActuate":Ks(t,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Ks(t,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Ks(t,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Ks(t,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Ks(t,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Ks(t,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Ks(t,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Ks(t,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Ks(t,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":sl(t,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=rv.get(r)||r,sl(t,r,o))}}function wu(t,n,r,o,m,p){switch(r){case"style":em(t,o,p);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(m.children!=null)throw Error(i(60));t.innerHTML=r}}break;case"children":typeof o=="string"?ll(t,o):(typeof o=="number"||typeof o=="bigint")&&ll(t,""+o);break;case"onScroll":o!=null&&rt("scroll",t);break;case"onScrollEnd":o!=null&&rt("scrollend",t);break;case"onClick":o!=null&&(t.onclick=pa);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Vt.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(m=r.endsWith("Capture"),n=r.slice(2,m?r.length-7:void 0),p=t[he]||null,p=p!=null?p[r]:null,typeof p=="function"&&t.removeEventListener(n,p,m),typeof o=="function")){typeof p!="function"&&p!==null&&(r in t?t[r]=null:t.hasAttribute(r)&&t.removeAttribute(r)),t.addEventListener(n,o,m);break e}r in t?t[r]=o:o===!0?t.setAttribute(r,""):sl(t,r,o)}}}function is(t,n,r){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",t),rt("load",t);var o=!1,m=!1,p;for(p in r)if(r.hasOwnProperty(p)){var j=r[p];if(j!=null)switch(p){case"src":o=!0;break;case"srcSet":m=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:wt(t,n,p,j,r,null)}}m&&wt(t,n,"srcSet",r.srcSet,r,null),o&&wt(t,n,"src",r.src,r,null);return;case"input":rt("invalid",t);var R=p=j=m=null,K=null,le=null;for(o in r)if(r.hasOwnProperty(o)){var pe=r[o];if(pe!=null)switch(o){case"name":m=pe;break;case"type":j=pe;break;case"checked":K=pe;break;case"defaultChecked":le=pe;break;case"value":p=pe;break;case"defaultValue":R=pe;break;case"children":case"dangerouslySetInnerHTML":if(pe!=null)throw Error(i(137,n));break;default:wt(t,n,o,pe,r,null)}}Kh(t,p,R,K,le,j,m,!1);return;case"select":rt("invalid",t),o=j=p=null;for(m in r)if(r.hasOwnProperty(m)&&(R=r[m],R!=null))switch(m){case"value":p=R;break;case"defaultValue":j=R;break;case"multiple":o=R;default:wt(t,n,m,R,r,null)}n=p,r=j,t.multiple=!!o,n!=null?nl(t,!!o,n,!1):r!=null&&nl(t,!!o,r,!0);return;case"textarea":rt("invalid",t),p=m=o=null;for(j in r)if(r.hasOwnProperty(j)&&(R=r[j],R!=null))switch(j){case"value":o=R;break;case"defaultValue":m=R;break;case"children":p=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(i(91));break;default:wt(t,n,j,R,r,null)}Zh(t,o,m,p);return;case"option":for(K in r)if(r.hasOwnProperty(K)&&(o=r[K],o!=null))switch(K){case"selected":t.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:wt(t,n,K,o,r,null)}return;case"dialog":rt("beforetoggle",t),rt("toggle",t),rt("cancel",t),rt("close",t);break;case"iframe":case"object":rt("load",t);break;case"video":case"audio":for(o=0;o<Ti.length;o++)rt(Ti[o],t);break;case"image":rt("error",t),rt("load",t);break;case"details":rt("toggle",t);break;case"embed":case"source":case"link":rt("error",t),rt("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(le in r)if(r.hasOwnProperty(le)&&(o=r[le],o!=null))switch(le){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,n));default:wt(t,n,le,o,r,null)}return;default:if(zo(n)){for(pe in r)r.hasOwnProperty(pe)&&(o=r[pe],o!==void 0&&wu(t,n,pe,o,r,void 0));return}}for(R in r)r.hasOwnProperty(R)&&(o=r[R],o!=null&&wt(t,n,R,o,r,null))}function $j(t,n,r,o){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var m=null,p=null,j=null,R=null,K=null,le=null,pe=null;for(de in r){var je=r[de];if(r.hasOwnProperty(de)&&je!=null)switch(de){case"checked":break;case"value":break;case"defaultValue":K=je;default:o.hasOwnProperty(de)||wt(t,n,de,null,o,je)}}for(var ie in o){var de=o[ie];if(je=r[ie],o.hasOwnProperty(ie)&&(de!=null||je!=null))switch(ie){case"type":p=de;break;case"name":m=de;break;case"checked":le=de;break;case"defaultChecked":pe=de;break;case"value":j=de;break;case"defaultValue":R=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(i(137,n));break;default:de!==je&&wt(t,n,ie,de,o,je)}}Io(t,j,R,K,le,pe,p,m);return;case"select":de=j=R=ie=null;for(p in r)if(K=r[p],r.hasOwnProperty(p)&&K!=null)switch(p){case"value":break;case"multiple":de=K;default:o.hasOwnProperty(p)||wt(t,n,p,null,o,K)}for(m in o)if(p=o[m],K=r[m],o.hasOwnProperty(m)&&(p!=null||K!=null))switch(m){case"value":ie=p;break;case"defaultValue":R=p;break;case"multiple":j=p;default:p!==K&&wt(t,n,m,p,o,K)}n=R,r=j,o=de,ie!=null?nl(t,!!r,ie,!1):!!o!=!!r&&(n!=null?nl(t,!!r,n,!0):nl(t,!!r,r?[]:"",!1));return;case"textarea":de=ie=null;for(R in r)if(m=r[R],r.hasOwnProperty(R)&&m!=null&&!o.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:wt(t,n,R,null,o,m)}for(j in o)if(m=o[j],p=r[j],o.hasOwnProperty(j)&&(m!=null||p!=null))switch(j){case"value":ie=m;break;case"defaultValue":de=m;break;case"children":break;case"dangerouslySetInnerHTML":if(m!=null)throw Error(i(91));break;default:m!==p&&wt(t,n,j,m,o,p)}Qh(t,ie,de);return;case"option":for(var Ue in r)if(ie=r[Ue],r.hasOwnProperty(Ue)&&ie!=null&&!o.hasOwnProperty(Ue))switch(Ue){case"selected":t.selected=!1;break;default:wt(t,n,Ue,null,o,ie)}for(K in o)if(ie=o[K],de=r[K],o.hasOwnProperty(K)&&ie!==de&&(ie!=null||de!=null))switch(K){case"selected":t.selected=ie&&typeof ie!="function"&&typeof ie!="symbol";break;default:wt(t,n,K,ie,o,de)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var We in r)ie=r[We],r.hasOwnProperty(We)&&ie!=null&&!o.hasOwnProperty(We)&&wt(t,n,We,null,o,ie);for(le in o)if(ie=o[le],de=r[le],o.hasOwnProperty(le)&&ie!==de&&(ie!=null||de!=null))switch(le){case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(i(137,n));break;default:wt(t,n,le,ie,o,de)}return;default:if(zo(n)){for(var Ct in r)ie=r[Ct],r.hasOwnProperty(Ct)&&ie!==void 0&&!o.hasOwnProperty(Ct)&&wu(t,n,Ct,void 0,o,ie);for(pe in o)ie=o[pe],de=r[pe],!o.hasOwnProperty(pe)||ie===de||ie===void 0&&de===void 0||wu(t,n,pe,ie,o,de);return}}for(var ae in r)ie=r[ae],r.hasOwnProperty(ae)&&ie!=null&&!o.hasOwnProperty(ae)&&wt(t,n,ae,null,o,ie);for(je in o)ie=o[je],de=r[je],!o.hasOwnProperty(je)||ie===de||ie==null&&de==null||wt(t,n,je,ie,o,de)}function sg(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Oj(){if(typeof performance.getEntriesByType=="function"){for(var t=0,n=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var m=r[o],p=m.transferSize,j=m.initiatorType,R=m.duration;if(p&&R&&sg(j)){for(j=0,R=m.responseEnd,o+=1;o<r.length;o++){var K=r[o],le=K.startTime;if(le>R)break;var pe=K.transferSize,je=K.initiatorType;pe&&sg(je)&&(K=K.responseEnd,j+=pe*(K<R?1:(R-le)/(K-le)))}if(--o,n+=8*(p+j)/(m.duration/1e3),t++,10<t)break}}if(0<t)return n/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var Cu=null,Au=null;function fc(t){return t.nodeType===9?t:t.ownerDocument}function ag(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ng(t,n){if(t===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&n==="foreignObject"?0:t}function Eu(t,n){return t==="textarea"||t==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Tu=null;function Ij(){var t=window.event;return t&&t.type==="popstate"?t===Tu?!1:(Tu=t,!0):(Tu=null,!1)}var lg=typeof setTimeout=="function"?setTimeout:void 0,Lj=typeof clearTimeout=="function"?clearTimeout:void 0,ig=typeof Promise=="function"?Promise:void 0,zj=typeof queueMicrotask=="function"?queueMicrotask:typeof ig<"u"?function(t){return ig.resolve(null).then(t).catch(Uj)}:lg;function Uj(t){setTimeout(function(){throw t})}function an(t){return t==="head"}function rg(t,n){var r=n,o=0;do{var m=r.nextSibling;if(t.removeChild(r),m&&m.nodeType===8)if(r=m.data,r==="/$"||r==="/&"){if(o===0){t.removeChild(m),Il(n);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")ki(t.ownerDocument.documentElement);else if(r==="head"){r=t.ownerDocument.head,ki(r);for(var p=r.firstChild;p;){var j=p.nextSibling,R=p.nodeName;p[Ie]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&p.rel.toLowerCase()==="stylesheet"||r.removeChild(p),p=j}}else r==="body"&&ki(t.ownerDocument.body);r=m}while(r);Il(n)}function cg(t,n){var r=t;t=0;do{var o=r.nextSibling;if(r.nodeType===1?n?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(n?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(t===0)break;t--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||t++;r=o}while(r)}function _u(t){var n=t.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var r=n;switch(n=n.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":_u(r),Te(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}t.removeChild(r)}}function Bj(t,n,r,o){for(;t.nodeType===1;){var m=r;if(t.nodeName.toLowerCase()!==n.toLowerCase()){if(!o&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(o){if(!t[Ie])switch(n){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(p=t.getAttribute("rel"),p==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(p!==m.rel||t.getAttribute("href")!==(m.href==null||m.href===""?null:m.href)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin)||t.getAttribute("title")!==(m.title==null?null:m.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(p=t.getAttribute("src"),(p!==(m.src==null?null:m.src)||t.getAttribute("type")!==(m.type==null?null:m.type)||t.getAttribute("crossorigin")!==(m.crossOrigin==null?null:m.crossOrigin))&&p&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(n==="input"&&t.type==="hidden"){var p=m.name==null?null:""+m.name;if(m.type==="hidden"&&t.getAttribute("name")===p)return t}else return t;if(t=Hs(t.nextSibling),t===null)break}return null}function Fj(t,n,r){if(n==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!r||(t=Hs(t.nextSibling),t===null))return null;return t}function og(t,n){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!n||(t=Hs(t.nextSibling),t===null))return null;return t}function ku(t){return t.data==="$?"||t.data==="$~"}function Du(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function Hj(t,n){var r=t.ownerDocument;if(t.data==="$~")t._reactRetry=n;else if(t.data!=="$?"||r.readyState!=="loading")n();else{var o=function(){n(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),t._reactRetry=o}}function Hs(t){for(;t!=null;t=t.nextSibling){var n=t.nodeType;if(n===1||n===3)break;if(n===8){if(n=t.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return t}var Mu=null;function dg(t){t=t.nextSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"||r==="/&"){if(n===0)return Hs(t.nextSibling);n--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||n++}t=t.nextSibling}return null}function ug(t){t=t.previousSibling;for(var n=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(n===0)return t;n--}else r!=="/$"&&r!=="/&"||n++}t=t.previousSibling}return null}function hg(t,n,r){switch(n=fc(r),t){case"html":if(t=n.documentElement,!t)throw Error(i(452));return t;case"head":if(t=n.head,!t)throw Error(i(453));return t;case"body":if(t=n.body,!t)throw Error(i(454));return t;default:throw Error(i(451))}}function ki(t){for(var n=t.attributes;n.length;)t.removeAttributeNode(n[0]);Te(t)}var Vs=new Map,mg=new Set;function pc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var Da=M.d;M.d={f:Vj,r:Yj,D:Pj,C:qj,L:Gj,m:Xj,X:Kj,S:Wj,M:Qj};function Vj(){var t=Da.f(),n=ic();return t||n}function Yj(t){var n=De(t);n!==null&&n.tag===5&&n.type==="form"?kf(n):Da.r(t)}var Rl=typeof document>"u"?null:document;function fg(t,n,r){var o=Rl;if(o&&typeof n=="string"&&n){var m=Os(n);m='link[rel="'+t+'"][href="'+m+'"]',typeof r=="string"&&(m+='[crossorigin="'+r+'"]'),mg.has(m)||(mg.add(m),t={rel:t,crossOrigin:r,href:n},o.querySelector(m)===null&&(n=o.createElement("link"),is(n,"link",t),Qe(n),o.head.appendChild(n)))}}function Pj(t){Da.D(t),fg("dns-prefetch",t,null)}function qj(t,n){Da.C(t,n),fg("preconnect",t,n)}function Gj(t,n,r){Da.L(t,n,r);var o=Rl;if(o&&t&&n){var m='link[rel="preload"][as="'+Os(n)+'"]';n==="image"&&r&&r.imageSrcSet?(m+='[imagesrcset="'+Os(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(m+='[imagesizes="'+Os(r.imageSizes)+'"]')):m+='[href="'+Os(t)+'"]';var p=m;switch(n){case"style":p=$l(t);break;case"script":p=Ol(t)}Vs.has(p)||(t=y({rel:"preload",href:n==="image"&&r&&r.imageSrcSet?void 0:t,as:n},r),Vs.set(p,t),o.querySelector(m)!==null||n==="style"&&o.querySelector(Di(p))||n==="script"&&o.querySelector(Mi(p))||(n=o.createElement("link"),is(n,"link",t),Qe(n),o.head.appendChild(n)))}}function Xj(t,n){Da.m(t,n);var r=Rl;if(r&&t){var o=n&&typeof n.as=="string"?n.as:"script",m='link[rel="modulepreload"][as="'+Os(o)+'"][href="'+Os(t)+'"]',p=m;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":p=Ol(t)}if(!Vs.has(p)&&(t=y({rel:"modulepreload",href:t},n),Vs.set(p,t),r.querySelector(m)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Mi(p)))return}o=r.createElement("link"),is(o,"link",t),Qe(o),r.head.appendChild(o)}}}function Wj(t,n,r){Da.S(t,n,r);var o=Rl;if(o&&t){var m=tt(o).hoistableStyles,p=$l(t);n=n||"default";var j=m.get(p);if(!j){var R={loading:0,preload:null};if(j=o.querySelector(Di(p)))R.loading=5;else{t=y({rel:"stylesheet",href:t,"data-precedence":n},r),(r=Vs.get(p))&&Ru(t,r);var K=j=o.createElement("link");Qe(K),is(K,"link",t),K._p=new Promise(function(le,pe){K.onload=le,K.onerror=pe}),K.addEventListener("load",function(){R.loading|=1}),K.addEventListener("error",function(){R.loading|=2}),R.loading|=4,gc(j,n,o)}j={type:"stylesheet",instance:j,count:1,state:R},m.set(p,j)}}}function Kj(t,n){Da.X(t,n);var r=Rl;if(r&&t){var o=tt(r).hoistableScripts,m=Ol(t),p=o.get(m);p||(p=r.querySelector(Mi(m)),p||(t=y({src:t,async:!0},n),(n=Vs.get(m))&&$u(t,n),p=r.createElement("script"),Qe(p),is(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(m,p))}}function Qj(t,n){Da.M(t,n);var r=Rl;if(r&&t){var o=tt(r).hoistableScripts,m=Ol(t),p=o.get(m);p||(p=r.querySelector(Mi(m)),p||(t=y({src:t,async:!0,type:"module"},n),(n=Vs.get(m))&&$u(t,n),p=r.createElement("script"),Qe(p),is(p,"link",t),r.head.appendChild(p)),p={type:"script",instance:p,count:1,state:null},o.set(m,p))}}function pg(t,n,r,o){var m=(m=te.current)?pc(m):null;if(!m)throw Error(i(446));switch(t){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(n=$l(r.href),r=tt(m).hoistableStyles,o=r.get(n),o||(o={type:"style",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){t=$l(r.href);var p=tt(m).hoistableStyles,j=p.get(t);if(j||(m=m.ownerDocument||m,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},p.set(t,j),(p=m.querySelector(Di(t)))&&!p._p&&(j.instance=p,j.state.loading=5),Vs.has(t)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Vs.set(t,r),p||Zj(m,t,r,j.state))),n&&o===null)throw Error(i(528,""));return j}if(n&&o!==null)throw Error(i(529,""));return null;case"script":return n=r.async,r=r.src,typeof r=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ol(r),r=tt(m).hoistableScripts,o=r.get(n),o||(o={type:"script",instance:null,count:0,state:null},r.set(n,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,t))}}function $l(t){return'href="'+Os(t)+'"'}function Di(t){return'link[rel="stylesheet"]['+t+"]"}function gg(t){return y({},t,{"data-precedence":t.precedence,precedence:null})}function Zj(t,n,r,o){t.querySelector('link[rel="preload"][as="style"]['+n+"]")?o.loading=1:(n=t.createElement("link"),o.preload=n,n.addEventListener("load",function(){return o.loading|=1}),n.addEventListener("error",function(){return o.loading|=2}),is(n,"link",r),Qe(n),t.head.appendChild(n))}function Ol(t){return'[src="'+Os(t)+'"]'}function Mi(t){return"script[async]"+t}function xg(t,n,r){if(n.count++,n.instance===null)switch(n.type){case"style":var o=t.querySelector('style[data-href~="'+Os(r.href)+'"]');if(o)return n.instance=o,Qe(o),o;var m=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(t.ownerDocument||t).createElement("style"),Qe(o),is(o,"style",m),gc(o,r.precedence,t),n.instance=o;case"stylesheet":m=$l(r.href);var p=t.querySelector(Di(m));if(p)return n.state.loading|=4,n.instance=p,Qe(p),p;o=gg(r),(m=Vs.get(m))&&Ru(o,m),p=(t.ownerDocument||t).createElement("link"),Qe(p);var j=p;return j._p=new Promise(function(R,K){j.onload=R,j.onerror=K}),is(p,"link",o),n.state.loading|=4,gc(p,r.precedence,t),n.instance=p;case"script":return p=Ol(r.src),(m=t.querySelector(Mi(p)))?(n.instance=m,Qe(m),m):(o=r,(m=Vs.get(p))&&(o=y({},r),$u(o,m)),t=t.ownerDocument||t,m=t.createElement("script"),Qe(m),is(m,"link",o),t.head.appendChild(m),n.instance=m);case"void":return null;default:throw Error(i(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(o=n.instance,n.state.loading|=4,gc(o,r.precedence,t));return n.instance}function gc(t,n,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),m=o.length?o[o.length-1]:null,p=m,j=0;j<o.length;j++){var R=o[j];if(R.dataset.precedence===n)p=R;else if(p!==m)break}p?p.parentNode.insertBefore(t,p.nextSibling):(n=r.nodeType===9?r.head:r,n.insertBefore(t,n.firstChild))}function Ru(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.title==null&&(t.title=n.title)}function $u(t,n){t.crossOrigin==null&&(t.crossOrigin=n.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=n.referrerPolicy),t.integrity==null&&(t.integrity=n.integrity)}var xc=null;function bg(t,n,r){if(xc===null){var o=new Map,m=xc=new Map;m.set(r,o)}else m=xc,o=m.get(r),o||(o=new Map,m.set(r,o));if(o.has(t))return o;for(o.set(t,null),r=r.getElementsByTagName(t),m=0;m<r.length;m++){var p=r[m];if(!(p[Ie]||p[H]||t==="link"&&p.getAttribute("rel")==="stylesheet")&&p.namespaceURI!=="http://www.w3.org/2000/svg"){var j=p.getAttribute(n)||"";j=t+j;var R=o.get(j);R?R.push(p):o.set(j,[p])}}return o}function yg(t,n,r){t=t.ownerDocument||t,t.head.insertBefore(r,n==="title"?t.querySelector("head > title"):null)}function Jj(t,n,r){if(r===1||n.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;switch(n.rel){case"stylesheet":return t=n.disabled,typeof n.precedence=="string"&&t==null;default:return!0}case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function vg(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function eN(t,n,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var m=$l(o.href),p=n.querySelector(Di(m));if(p){n=p._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(t.count++,t=bc.bind(t),n.then(t,t)),r.state.loading|=4,r.instance=p,Qe(p);return}p=n.ownerDocument||n,o=gg(o),(m=Vs.get(m))&&Ru(o,m),p=p.createElement("link"),Qe(p);var j=p;j._p=new Promise(function(R,K){j.onload=R,j.onerror=K}),is(p,"link",o),r.instance=p}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(r,n),(n=r.state.preload)&&(r.state.loading&3)===0&&(t.count++,r=bc.bind(t),n.addEventListener("load",r),n.addEventListener("error",r))}}var Ou=0;function tN(t,n){return t.stylesheets&&t.count===0&&vc(t,t.stylesheets),0<t.count||0<t.imgCount?function(r){var o=setTimeout(function(){if(t.stylesheets&&vc(t,t.stylesheets),t.unsuspend){var p=t.unsuspend;t.unsuspend=null,p()}},6e4+n);0<t.imgBytes&&Ou===0&&(Ou=62500*Oj());var m=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&vc(t,t.stylesheets),t.unsuspend)){var p=t.unsuspend;t.unsuspend=null,p()}},(t.imgBytes>Ou?50:800)+n);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(o),clearTimeout(m)}}:null}function bc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)vc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var yc=null;function vc(t,n){t.stylesheets=null,t.unsuspend!==null&&(t.count++,yc=new Map,n.forEach(sN,t),yc=null,bc.call(t))}function sN(t,n){if(!(n.state.loading&4)){var r=yc.get(t);if(r)var o=r.get(null);else{r=new Map,yc.set(t,r);for(var m=t.querySelectorAll("link[data-precedence],style[data-precedence]"),p=0;p<m.length;p++){var j=m[p];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(r.set(j.dataset.precedence,j),o=j)}o&&r.set(null,o)}m=n.instance,j=m.getAttribute("data-precedence"),p=r.get(j)||o,p===o&&r.set(null,m),r.set(j,m),this.count++,o=bc.bind(this),m.addEventListener("load",o),m.addEventListener("error",o),p?p.parentNode.insertBefore(m,p.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(m,t.firstChild)),n.state.loading|=4}}var Ri={$$typeof:D,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function aN(t,n,r,o,m,p,j,R,K){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ws(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ws(0),this.hiddenUpdates=ws(null),this.identifierPrefix=o,this.onUncaughtError=m,this.onCaughtError=p,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=K,this.incompleteTransitions=new Map}function jg(t,n,r,o,m,p,j,R,K,le,pe,je){return t=new aN(t,n,r,j,K,le,pe,je,R),n=1,p===!0&&(n|=24),p=As(3,null,null,n),t.current=p,p.stateNode=t,n=fd(),n.refCount++,t.pooledCache=n,n.refCount++,p.memoizedState={element:o,isDehydrated:r,cache:n},bd(p),t}function Ng(t){return t?(t=hl,t):hl}function Sg(t,n,r,o,m,p){m=Ng(m),o.context===null?o.context=m:o.pendingContext=m,o=qa(n),o.payload={element:r},p=p===void 0?null:p,p!==null&&(o.callback=p),r=Ga(t,o,n),r!==null&&(bs(r,t,n),ui(r,t,n))}function wg(t,n){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<n?r:n}}function Iu(t,n){wg(t,n),(t=t.alternate)&&wg(t,n)}function Cg(t){if(t.tag===13||t.tag===31){var n=Tn(t,67108864);n!==null&&bs(n,t,67108864),Iu(t,67108864)}}function Ag(t){if(t.tag===13||t.tag===31){var n=Ds();n=tl(n);var r=Tn(t,n);r!==null&&bs(r,t,n),Iu(t,n)}}var jc=!0;function nN(t,n,r,o){var m=N.T;N.T=null;var p=M.p;try{M.p=2,Lu(t,n,r,o)}finally{M.p=p,N.T=m}}function lN(t,n,r,o){var m=N.T;N.T=null;var p=M.p;try{M.p=8,Lu(t,n,r,o)}finally{M.p=p,N.T=m}}function Lu(t,n,r,o){if(jc){var m=zu(o);if(m===null)Su(t,n,o,Nc,r),Tg(t,o);else if(rN(m,t,n,r,o))o.stopPropagation();else if(Tg(t,o),n&4&&-1<iN.indexOf(t)){for(;m!==null;){var p=De(m);if(p!==null)switch(p.tag){case 3:if(p=p.stateNode,p.current.memoizedState.isDehydrated){var j=ma(p.pendingLanes);if(j!==0){var R=p;for(R.pendingLanes|=2,R.entangledLanes|=2;j;){var K=1<<31-ts(j);R.entanglements[1]|=K,j&=~K}na(p),(bt&6)===0&&(nc=Xe()+500,Ei(0))}}break;case 31:case 13:R=Tn(p,2),R!==null&&bs(R,p,2),ic(),Iu(p,2)}if(p=zu(o),p===null&&Su(t,n,o,Nc,r),p===m)break;m=p}m!==null&&o.stopPropagation()}else Su(t,n,o,null,r)}}function zu(t){return t=Bo(t),Uu(t)}var Nc=null;function Uu(t){if(Nc=null,t=Be(t),t!==null){var n=d(t);if(n===null)t=null;else{var r=n.tag;if(r===13){if(t=u(n),t!==null)return t;t=null}else if(r===31){if(t=h(n),t!==null)return t;t=null}else if(r===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;t=null}else n!==t&&(t=null)}}return Nc=t,null}function Eg(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case Fe:return 2;case Ht:return 8;case Ss:case ua:return 32;case xt:return 268435456;default:return 32}default:return 32}}var Bu=!1,nn=null,ln=null,rn=null,$i=new Map,Oi=new Map,cn=[],iN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Tg(t,n){switch(t){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":ln=null;break;case"mouseover":case"mouseout":rn=null;break;case"pointerover":case"pointerout":$i.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Oi.delete(n.pointerId)}}function Ii(t,n,r,o,m,p){return t===null||t.nativeEvent!==p?(t={blockedOn:n,domEventName:r,eventSystemFlags:o,nativeEvent:p,targetContainers:[m]},n!==null&&(n=De(n),n!==null&&Cg(n)),t):(t.eventSystemFlags|=o,n=t.targetContainers,m!==null&&n.indexOf(m)===-1&&n.push(m),t)}function rN(t,n,r,o,m){switch(n){case"focusin":return nn=Ii(nn,t,n,r,o,m),!0;case"dragenter":return ln=Ii(ln,t,n,r,o,m),!0;case"mouseover":return rn=Ii(rn,t,n,r,o,m),!0;case"pointerover":var p=m.pointerId;return $i.set(p,Ii($i.get(p)||null,t,n,r,o,m)),!0;case"gotpointercapture":return p=m.pointerId,Oi.set(p,Ii(Oi.get(p)||null,t,n,r,o,m)),!0}return!1}function _g(t){var n=Be(t.target);if(n!==null){var r=d(n);if(r!==null){if(n=r.tag,n===13){if(n=u(r),n!==null){t.blockedOn=n,Ce(t.priority,function(){Ag(r)});return}}else if(n===31){if(n=h(r),n!==null){t.blockedOn=n,Ce(t.priority,function(){Ag(r)});return}}else if(n===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Sc(t){if(t.blockedOn!==null)return!1;for(var n=t.targetContainers;0<n.length;){var r=zu(t.nativeEvent);if(r===null){r=t.nativeEvent;var o=new r.constructor(r.type,r);Uo=o,r.target.dispatchEvent(o),Uo=null}else return n=De(r),n!==null&&Cg(n),t.blockedOn=r,!1;n.shift()}return!0}function kg(t,n,r){Sc(t)&&r.delete(n)}function cN(){Bu=!1,nn!==null&&Sc(nn)&&(nn=null),ln!==null&&Sc(ln)&&(ln=null),rn!==null&&Sc(rn)&&(rn=null),$i.forEach(kg),Oi.forEach(kg)}function wc(t,n){t.blockedOn===n&&(t.blockedOn=null,Bu||(Bu=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,cN)))}var Cc=null;function Dg(t){Cc!==t&&(Cc=t,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){Cc===t&&(Cc=null);for(var n=0;n<t.length;n+=3){var r=t[n],o=t[n+1],m=t[n+2];if(typeof o!="function"){if(Uu(o||r)===null)continue;break}var p=De(r);p!==null&&(t.splice(n,3),n-=3,zd(p,{pending:!0,data:m,method:r.method,action:o},o,m))}}))}function Il(t){function n(K){return wc(K,t)}nn!==null&&wc(nn,t),ln!==null&&wc(ln,t),rn!==null&&wc(rn,t),$i.forEach(n),Oi.forEach(n);for(var r=0;r<cn.length;r++){var o=cn[r];o.blockedOn===t&&(o.blockedOn=null)}for(;0<cn.length&&(r=cn[0],r.blockedOn===null);)_g(r),r.blockedOn===null&&cn.shift();if(r=(t.ownerDocument||t).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var m=r[o],p=r[o+1],j=m[he]||null;if(typeof p=="function")j||Dg(r);else if(j){var R=null;if(p&&p.hasAttribute("formAction")){if(m=p,j=p[he]||null)R=j.formAction;else if(Uu(m)!==null)continue}else R=j.action;typeof R=="function"?r[o+1]=R:(r.splice(o,3),o-=3),Dg(r)}}}function Mg(){function t(p){p.canIntercept&&p.info==="react-transition"&&p.intercept({handler:function(){return new Promise(function(j){return m=j})},focusReset:"manual",scroll:"manual"})}function n(){m!==null&&(m(),m=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var p=navigation.currentEntry;p&&p.url!=null&&navigation.navigate(p.url,{state:p.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,m=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),m!==null&&(m(),m=null)}}}function Fu(t){this._internalRoot=t}Ac.prototype.render=Fu.prototype.render=function(t){var n=this._internalRoot;if(n===null)throw Error(i(409));var r=n.current,o=Ds();Sg(r,o,t,n,null,null)},Ac.prototype.unmount=Fu.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var n=t.containerInfo;Sg(t.current,2,null,t,null,null),ic(),n[Ne]=null}};function Ac(t){this._internalRoot=t}Ac.prototype.unstable_scheduleHydration=function(t){if(t){var n=ke();t={blockedOn:null,target:t,priority:n};for(var r=0;r<cn.length&&n!==0&&n<cn[r].priority;r++);cn.splice(r,0,t),r===0&&_g(t)}};var Rg=s.version;if(Rg!=="19.2.0")throw Error(i(527,Rg,"19.2.0"));M.findDOMNode=function(t){var n=t._reactInternals;if(n===void 0)throw typeof t.render=="function"?Error(i(188)):(t=Object.keys(t).join(","),Error(i(268,t)));return t=g(n),t=t!==null?b(t):null,t=t===null?null:t.stateNode,t};var oN={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:N,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ec=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ec.isDisabled&&Ec.supportsFiber)try{ha=Ec.inject(oN),es=Ec}catch{}}return zi.createRoot=function(t,n){if(!c(t))throw Error(i(299));var r=!1,o="",m=Bf,p=Ff,j=Hf;return n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(m=n.onUncaughtError),n.onCaughtError!==void 0&&(p=n.onCaughtError),n.onRecoverableError!==void 0&&(j=n.onRecoverableError)),n=jg(t,1,!1,null,null,r,o,null,m,p,j,Mg),t[Ne]=n.current,Nu(t),new Fu(n)},zi.hydrateRoot=function(t,n,r){if(!c(t))throw Error(i(299));var o=!1,m="",p=Bf,j=Ff,R=Hf,K=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onUncaughtError!==void 0&&(p=r.onUncaughtError),r.onCaughtError!==void 0&&(j=r.onCaughtError),r.onRecoverableError!==void 0&&(R=r.onRecoverableError),r.formState!==void 0&&(K=r.formState)),n=jg(t,1,!0,n,r??null,o,m,K,p,j,R,Mg),n.context=Ng(null),r=n.current,o=Ds(),o=tl(o),m=qa(o),m.callback=null,Ga(r,m,o),r=o,n.current.lanes=r,us(n,r),na(n),t[Ne]=n.current,Nu(t),new Ac(n)},zi.version="19.2.0",zi}var Vg;function jN(){if(Vg)return Yu.exports;Vg=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(s){console.error(s)}}return a(),Yu.exports=vN(),Yu.exports}var NN=jN(),nr=Pb();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function lr(){return lr=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a[i]=l[i])}return a},lr.apply(this,arguments)}var fn;(function(a){a.Pop="POP",a.Push="PUSH",a.Replace="REPLACE"})(fn||(fn={}));const Yg="popstate";function SN(a){a===void 0&&(a={});function s(i,c){let{pathname:d,search:u,hash:h}=i.location;return bh("",{pathname:d,search:u,hash:h},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function l(i,c){return typeof c=="string"?c:oo(c)}return CN(s,l,null,a)}function It(a,s){if(a===!1||a===null||typeof a>"u")throw new Error(s)}function qb(a,s){if(!a){typeof console<"u"&&console.warn(s);try{throw new Error(s)}catch{}}}function wN(){return Math.random().toString(36).substr(2,8)}function Pg(a,s){return{usr:a.state,key:a.key,idx:s}}function bh(a,s,l,i){return l===void 0&&(l=null),lr({pathname:typeof a=="string"?a:a.pathname,search:"",hash:""},typeof s=="string"?Yl(s):s,{state:l,key:s&&s.key||i||wN()})}function oo(a){let{pathname:s="/",search:l="",hash:i=""}=a;return l&&l!=="?"&&(s+=l.charAt(0)==="?"?l:"?"+l),i&&i!=="#"&&(s+=i.charAt(0)==="#"?i:"#"+i),s}function Yl(a){let s={};if(a){let l=a.indexOf("#");l>=0&&(s.hash=a.substr(l),a=a.substr(0,l));let i=a.indexOf("?");i>=0&&(s.search=a.substr(i),a=a.substr(0,i)),a&&(s.pathname=a)}return s}function CN(a,s,l,i){i===void 0&&(i={});let{window:c=document.defaultView,v5Compat:d=!1}=i,u=c.history,h=fn.Pop,f=null,g=b();g==null&&(g=0,u.replaceState(lr({},u.state,{idx:g}),""));function b(){return(u.state||{idx:null}).idx}function y(){h=fn.Pop;let S=b(),E=S==null?null:S-g;g=S,f&&f({action:h,location:A.location,delta:E})}function v(S,E){h=fn.Push;let $=bh(A.location,S,E);g=b()+1;let D=Pg($,g),I=A.createHref($);try{u.pushState(D,"",I)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;c.location.assign(I)}d&&f&&f({action:h,location:A.location,delta:1})}function C(S,E){h=fn.Replace;let $=bh(A.location,S,E);g=b();let D=Pg($,g),I=A.createHref($);u.replaceState(D,"",I),d&&f&&f({action:h,location:A.location,delta:0})}function w(S){let E=c.location.origin!=="null"?c.location.origin:c.location.href,$=typeof S=="string"?S:oo(S);return $=$.replace(/ $/,"%20"),It(E,"No window.location.(origin|href) available to create URL for href: "+$),new URL($,E)}let A={get action(){return h},get location(){return a(c,u)},listen(S){if(f)throw new Error("A history only accepts one active listener");return c.addEventListener(Yg,y),f=S,()=>{c.removeEventListener(Yg,y),f=null}},createHref(S){return s(c,S)},createURL:w,encodeLocation(S){let E=w(S);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:v,replace:C,go(S){return u.go(S)}};return A}var qg;(function(a){a.data="data",a.deferred="deferred",a.redirect="redirect",a.error="error"})(qg||(qg={}));function AN(a,s,l){return l===void 0&&(l="/"),EN(a,s,l)}function EN(a,s,l,i){let c=typeof s=="string"?Yl(s):s,d=Hl(c.pathname||"/",l);if(d==null)return null;let u=Gb(a);TN(u);let h=null;for(let f=0;h==null&&f<u.length;++f){let g=UN(d);h=LN(u[f],g)}return h}function Gb(a,s,l,i){s===void 0&&(s=[]),l===void 0&&(l=[]),i===void 0&&(i="");let c=(d,u,h)=>{let f={relativePath:h===void 0?d.path||"":h,caseSensitive:d.caseSensitive===!0,childrenIndex:u,route:d};f.relativePath.startsWith("/")&&(It(f.relativePath.startsWith(i),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(i.length));let g=yn([i,f.relativePath]),b=l.concat(f);d.children&&d.children.length>0&&(It(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),Gb(d.children,s,b,g)),!(d.path==null&&!d.index)&&s.push({path:g,score:ON(g,d.index),routesMeta:b})};return a.forEach((d,u)=>{var h;if(d.path===""||!((h=d.path)!=null&&h.includes("?")))c(d,u);else for(let f of Xb(d.path))c(d,u,f)}),s}function Xb(a){let s=a.split("/");if(s.length===0)return[];let[l,...i]=s,c=l.endsWith("?"),d=l.replace(/\?$/,"");if(i.length===0)return c?[d,""]:[d];let u=Xb(i.join("/")),h=[];return h.push(...u.map(f=>f===""?d:[d,f].join("/"))),c&&h.push(...u),h.map(f=>a.startsWith("/")&&f===""?"/":f)}function TN(a){a.sort((s,l)=>s.score!==l.score?l.score-s.score:IN(s.routesMeta.map(i=>i.childrenIndex),l.routesMeta.map(i=>i.childrenIndex)))}const _N=/^:[\w-]+$/,kN=3,DN=2,MN=1,RN=10,$N=-2,Gg=a=>a==="*";function ON(a,s){let l=a.split("/"),i=l.length;return l.some(Gg)&&(i+=$N),s&&(i+=DN),l.filter(c=>!Gg(c)).reduce((c,d)=>c+(_N.test(d)?kN:d===""?MN:RN),i)}function IN(a,s){return a.length===s.length&&a.slice(0,-1).every((i,c)=>i===s[c])?a[a.length-1]-s[s.length-1]:0}function LN(a,s,l){let{routesMeta:i}=a,c={},d="/",u=[];for(let h=0;h<i.length;++h){let f=i[h],g=h===i.length-1,b=d==="/"?s:s.slice(d.length)||"/",y=yh({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},b),v=f.route;if(!y)return null;Object.assign(c,y.params),u.push({params:c,pathname:yn([d,y.pathname]),pathnameBase:VN(yn([d,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(d=yn([d,y.pathnameBase]))}return u}function yh(a,s){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[l,i]=zN(a.path,a.caseSensitive,a.end),c=s.match(l);if(!c)return null;let d=c[0],u=d.replace(/(.)\/+$/,"$1"),h=c.slice(1);return{params:i.reduce((g,b,y)=>{let{paramName:v,isOptional:C}=b;if(v==="*"){let A=h[y]||"";u=d.slice(0,d.length-A.length).replace(/(.)\/+$/,"$1")}const w=h[y];return C&&!w?g[v]=void 0:g[v]=(w||"").replace(/%2F/g,"/"),g},{}),pathname:d,pathnameBase:u,pattern:a}}function zN(a,s,l){s===void 0&&(s=!1),l===void 0&&(l=!0),qb(a==="*"||!a.endsWith("*")||a.endsWith("/*"),'Route path "'+a+'" will be treated as if it were '+('"'+a.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+a.replace(/\*$/,"/*")+'".'));let i=[],c="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,f)=>(i.push({paramName:h,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return a.endsWith("*")?(i.push({paramName:"*"}),c+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):l?c+="\\/*$":a!==""&&a!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,s?void 0:"i"),i]}function UN(a){try{return a.split("/").map(s=>decodeURIComponent(s).replace(/\//g,"%2F")).join("/")}catch(s){return qb(!1,'The URL path "'+a+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+s+").")),a}}function Hl(a,s){if(s==="/")return a;if(!a.toLowerCase().startsWith(s.toLowerCase()))return null;let l=s.endsWith("/")?s.length-1:s.length,i=a.charAt(l);return i&&i!=="/"?null:a.slice(l)||"/"}function BN(a,s){s===void 0&&(s="/");let{pathname:l,search:i="",hash:c=""}=typeof a=="string"?Yl(a):a;return{pathname:l?l.startsWith("/")?l:FN(l,s):s,search:YN(i),hash:PN(c)}}function FN(a,s){let l=s.replace(/\/+$/,"").split("/");return a.split("/").forEach(c=>{c===".."?l.length>1&&l.pop():c!=="."&&l.push(c)}),l.length>1?l.join("/"):"/"}function Xu(a,s,l,i){return"Cannot include a '"+a+"' character in a manually specified "+("`to."+s+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+l+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function HN(a){return a.filter((s,l)=>l===0||s.route.path&&s.route.path.length>0)}function Th(a,s){let l=HN(a);return s?l.map((i,c)=>c===l.length-1?i.pathname:i.pathnameBase):l.map(i=>i.pathnameBase)}function _h(a,s,l,i){i===void 0&&(i=!1);let c;typeof a=="string"?c=Yl(a):(c=lr({},a),It(!c.pathname||!c.pathname.includes("?"),Xu("?","pathname","search",c)),It(!c.pathname||!c.pathname.includes("#"),Xu("#","pathname","hash",c)),It(!c.search||!c.search.includes("#"),Xu("#","search","hash",c)));let d=a===""||c.pathname==="",u=d?"/":c.pathname,h;if(u==null)h=l;else{let y=s.length-1;if(!i&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),y-=1;c.pathname=v.join("/")}h=y>=0?s[y]:"/"}let f=BN(c,h),g=u&&u!=="/"&&u.endsWith("/"),b=(d||u===".")&&l.endsWith("/");return!f.pathname.endsWith("/")&&(g||b)&&(f.pathname+="/"),f}const yn=a=>a.join("/").replace(/\/\/+/g,"/"),VN=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),YN=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,PN=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function qN(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}const Wb=["post","put","patch","delete"];new Set(Wb);const GN=["get",...Wb];new Set(GN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ir(){return ir=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a[i]=l[i])}return a},ir.apply(this,arguments)}const Eo=x.createContext(null),Kb=x.createContext(null),za=x.createContext(null),To=x.createContext(null),da=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Qb=x.createContext(null);function XN(a,s){let{relative:l}=s===void 0?{}:s;Pl()||It(!1);let{basename:i,navigator:c}=x.useContext(za),{hash:d,pathname:u,search:h}=_o(a,{relative:l}),f=u;return i!=="/"&&(f=u==="/"?i:yn([i,u])),c.createHref({pathname:f,search:h,hash:d})}function Pl(){return x.useContext(To)!=null}function ql(){return Pl()||It(!1),x.useContext(To).location}function Zb(a){x.useContext(za).static||x.useLayoutEffect(a)}function rs(){let{isDataRoute:a}=x.useContext(da);return a?o0():WN()}function WN(){Pl()||It(!1);let a=x.useContext(Eo),{basename:s,future:l,navigator:i}=x.useContext(za),{matches:c}=x.useContext(da),{pathname:d}=ql(),u=JSON.stringify(Th(c,l.v7_relativeSplatPath)),h=x.useRef(!1);return Zb(()=>{h.current=!0}),x.useCallback(function(g,b){if(b===void 0&&(b={}),!h.current)return;if(typeof g=="number"){i.go(g);return}let y=_h(g,JSON.parse(u),d,b.relative==="path");a==null&&s!=="/"&&(y.pathname=y.pathname==="/"?s:yn([s,y.pathname])),(b.replace?i.replace:i.push)(y,b.state,b)},[s,i,u,d,a])}const KN=x.createContext(null);function QN(a){let s=x.useContext(da).outlet;return s&&x.createElement(KN.Provider,{value:a},s)}function dt(){let{matches:a}=x.useContext(da),s=a[a.length-1];return s?s.params:{}}function _o(a,s){let{relative:l}=s===void 0?{}:s,{future:i}=x.useContext(za),{matches:c}=x.useContext(da),{pathname:d}=ql(),u=JSON.stringify(Th(c,i.v7_relativeSplatPath));return x.useMemo(()=>_h(a,JSON.parse(u),d,l==="path"),[a,u,d,l])}function ZN(a,s){return JN(a,s)}function JN(a,s,l,i){Pl()||It(!1);let{navigator:c}=x.useContext(za),{matches:d}=x.useContext(da),u=d[d.length-1],h=u?u.params:{};u&&u.pathname;let f=u?u.pathnameBase:"/";u&&u.route;let g=ql(),b;if(s){var y;let S=typeof s=="string"?Yl(s):s;f==="/"||(y=S.pathname)!=null&&y.startsWith(f)||It(!1),b=S}else b=g;let v=b.pathname||"/",C=v;if(f!=="/"){let S=f.replace(/^\//,"").split("/");C="/"+v.replace(/^\//,"").split("/").slice(S.length).join("/")}let w=AN(a,{pathname:C}),A=n0(w&&w.map(S=>Object.assign({},S,{params:Object.assign({},h,S.params),pathname:yn([f,c.encodeLocation?c.encodeLocation(S.pathname).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?f:yn([f,c.encodeLocation?c.encodeLocation(S.pathnameBase).pathname:S.pathnameBase])})),d,l,i);return s&&A?x.createElement(To.Provider,{value:{location:ir({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:fn.Pop}},A):A}function e0(){let a=c0(),s=qN(a)?a.status+" "+a.statusText:a instanceof Error?a.message:JSON.stringify(a),l=a instanceof Error?a.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},s),l?x.createElement("pre",{style:c},l):null,null)}const t0=x.createElement(e0,null);class s0 extends x.Component{constructor(s){super(s),this.state={location:s.location,revalidation:s.revalidation,error:s.error}}static getDerivedStateFromError(s){return{error:s}}static getDerivedStateFromProps(s,l){return l.location!==s.location||l.revalidation!=="idle"&&s.revalidation==="idle"?{error:s.error,location:s.location,revalidation:s.revalidation}:{error:s.error!==void 0?s.error:l.error,location:l.location,revalidation:s.revalidation||l.revalidation}}componentDidCatch(s,l){console.error("React Router caught the following error during render",s,l)}render(){return this.state.error!==void 0?x.createElement(da.Provider,{value:this.props.routeContext},x.createElement(Qb.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function a0(a){let{routeContext:s,match:l,children:i}=a,c=x.useContext(Eo);return c&&c.static&&c.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=l.route.id),x.createElement(da.Provider,{value:s},i)}function n0(a,s,l,i){var c;if(s===void 0&&(s=[]),l===void 0&&(l=null),i===void 0&&(i=null),a==null){var d;if(!l)return null;if(l.errors)a=l.matches;else if((d=i)!=null&&d.v7_partialHydration&&s.length===0&&!l.initialized&&l.matches.length>0)a=l.matches;else return null}let u=a,h=(c=l)==null?void 0:c.errors;if(h!=null){let b=u.findIndex(y=>y.route.id&&h?.[y.route.id]!==void 0);b>=0||It(!1),u=u.slice(0,Math.min(u.length,b+1))}let f=!1,g=-1;if(l&&i&&i.v7_partialHydration)for(let b=0;b<u.length;b++){let y=u[b];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(g=b),y.route.id){let{loaderData:v,errors:C}=l,w=y.route.loader&&v[y.route.id]===void 0&&(!C||C[y.route.id]===void 0);if(y.route.lazy||w){f=!0,g>=0?u=u.slice(0,g+1):u=[u[0]];break}}}return u.reduceRight((b,y,v)=>{let C,w=!1,A=null,S=null;l&&(C=h&&y.route.id?h[y.route.id]:void 0,A=y.route.errorElement||t0,f&&(g<0&&v===0?(d0("route-fallback"),w=!0,S=null):g===v&&(w=!0,S=y.route.hydrateFallbackElement||null)));let E=s.concat(u.slice(0,v+1)),$=()=>{let D;return C?D=A:w?D=S:y.route.Component?D=x.createElement(y.route.Component,null):y.route.element?D=y.route.element:D=b,x.createElement(a0,{match:y,routeContext:{outlet:b,matches:E,isDataRoute:l!=null},children:D})};return l&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?x.createElement(s0,{location:l.location,revalidation:l.revalidation,component:A,error:C,children:$(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):$()},null)}var Jb=(function(a){return a.UseBlocker="useBlocker",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a})(Jb||{}),ey=(function(a){return a.UseBlocker="useBlocker",a.UseLoaderData="useLoaderData",a.UseActionData="useActionData",a.UseRouteError="useRouteError",a.UseNavigation="useNavigation",a.UseRouteLoaderData="useRouteLoaderData",a.UseMatches="useMatches",a.UseRevalidator="useRevalidator",a.UseNavigateStable="useNavigate",a.UseRouteId="useRouteId",a})(ey||{});function l0(a){let s=x.useContext(Eo);return s||It(!1),s}function i0(a){let s=x.useContext(Kb);return s||It(!1),s}function r0(a){let s=x.useContext(da);return s||It(!1),s}function ty(a){let s=r0(),l=s.matches[s.matches.length-1];return l.route.id||It(!1),l.route.id}function c0(){var a;let s=x.useContext(Qb),l=i0(),i=ty();return s!==void 0?s:(a=l.errors)==null?void 0:a[i]}function o0(){let{router:a}=l0(Jb.UseNavigateStable),s=ty(ey.UseNavigateStable),l=x.useRef(!1);return Zb(()=>{l.current=!0}),x.useCallback(function(c,d){d===void 0&&(d={}),l.current&&(typeof c=="number"?a.navigate(c):a.navigate(c,ir({fromRouteId:s},d)))},[a,s])}const Xg={};function d0(a,s,l){Xg[a]||(Xg[a]=!0)}function u0(a,s){a?.v7_startTransition,a?.v7_relativeSplatPath}function Wg(a){let{to:s,replace:l,state:i,relative:c}=a;Pl()||It(!1);let{future:d,static:u}=x.useContext(za),{matches:h}=x.useContext(da),{pathname:f}=ql(),g=rs(),b=_h(s,Th(h,d.v7_relativeSplatPath),f,c==="path"),y=JSON.stringify(b);return x.useEffect(()=>g(JSON.parse(y),{replace:l,state:i,relative:c}),[g,y,c,l,i]),null}function sy(a){return QN(a.context)}function lt(a){It(!1)}function h0(a){let{basename:s="/",children:l=null,location:i,navigationType:c=fn.Pop,navigator:d,static:u=!1,future:h}=a;Pl()&&It(!1);let f=s.replace(/^\/*/,"/"),g=x.useMemo(()=>({basename:f,navigator:d,static:u,future:ir({v7_relativeSplatPath:!1},h)}),[f,h,d,u]);typeof i=="string"&&(i=Yl(i));let{pathname:b="/",search:y="",hash:v="",state:C=null,key:w="default"}=i,A=x.useMemo(()=>{let S=Hl(b,f);return S==null?null:{location:{pathname:S,search:y,hash:v,state:C,key:w},navigationType:c}},[f,b,y,v,C,w,c]);return A==null?null:x.createElement(za.Provider,{value:g},x.createElement(To.Provider,{children:l,value:A}))}function m0(a){let{children:s,location:l}=a;return ZN(vh(s),l)}new Promise(()=>{});function vh(a,s){s===void 0&&(s=[]);let l=[];return x.Children.forEach(a,(i,c)=>{if(!x.isValidElement(i))return;let d=[...s,c];if(i.type===x.Fragment){l.push.apply(l,vh(i.props.children,d));return}i.type!==lt&&It(!1),!i.props.index||!i.props.children||It(!1);let u={id:i.props.id||d.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=vh(i.props.children,d)),l.push(u)}),l}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uo(){return uo=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a[i]=l[i])}return a},uo.apply(this,arguments)}function ay(a,s){if(a==null)return{};var l={},i=Object.keys(a),c,d;for(d=0;d<i.length;d++)c=i[d],!(s.indexOf(c)>=0)&&(l[c]=a[c]);return l}function f0(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function p0(a,s){return a.button===0&&(!s||s==="_self")&&!f0(a)}const g0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],x0=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],b0="6";try{window.__reactRouterVersion=b0}catch{}const y0=x.createContext({isTransitioning:!1}),v0="startTransition",Kg=gN[v0];function j0(a){let{basename:s,children:l,future:i,window:c}=a,d=x.useRef();d.current==null&&(d.current=SN({window:c,v5Compat:!0}));let u=d.current,[h,f]=x.useState({action:u.action,location:u.location}),{v7_startTransition:g}=i||{},b=x.useCallback(y=>{g&&Kg?Kg(()=>f(y)):f(y)},[f,g]);return x.useLayoutEffect(()=>u.listen(b),[u,b]),x.useEffect(()=>u0(i),[i]),x.createElement(h0,{basename:s,children:l,location:h.location,navigationType:h.action,navigator:u,future:i})}const N0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",S0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qe=x.forwardRef(function(s,l){let{onClick:i,relative:c,reloadDocument:d,replace:u,state:h,target:f,to:g,preventScrollReset:b,viewTransition:y}=s,v=ay(s,g0),{basename:C}=x.useContext(za),w,A=!1;if(typeof g=="string"&&S0.test(g)&&(w=g,N0))try{let D=new URL(window.location.href),I=g.startsWith("//")?new URL(D.protocol+g):new URL(g),V=Hl(I.pathname,C);I.origin===D.origin&&V!=null?g=V+I.search+I.hash:A=!0}catch{}let S=XN(g,{relative:c}),E=C0(g,{replace:u,state:h,target:f,preventScrollReset:b,relative:c,viewTransition:y});function $(D){i&&i(D),D.defaultPrevented||E(D)}return x.createElement("a",uo({},v,{href:w||S,onClick:A||d?i:$,ref:l,target:f}))}),ny=x.forwardRef(function(s,l){let{"aria-current":i="page",caseSensitive:c=!1,className:d="",end:u=!1,style:h,to:f,viewTransition:g,children:b}=s,y=ay(s,x0),v=_o(f,{relative:y.relative}),C=ql(),w=x.useContext(Kb),{navigator:A,basename:S}=x.useContext(za),E=w!=null&&A0(v)&&g===!0,$=A.encodeLocation?A.encodeLocation(v).pathname:v.pathname,D=C.pathname,I=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;c||(D=D.toLowerCase(),I=I?I.toLowerCase():null,$=$.toLowerCase()),I&&S&&(I=Hl(I,S)||I);const V=$!=="/"&&$.endsWith("/")?$.length-1:$.length;let _=D===$||!u&&D.startsWith($)&&D.charAt(V)==="/",B=I!=null&&(I===$||!u&&I.startsWith($)&&I.charAt($.length)==="/"),z={isActive:_,isPending:B,isTransitioning:E},X=_?i:void 0,T;typeof d=="function"?T=d(z):T=[d,_?"active":null,B?"pending":null,E?"transitioning":null].filter(Boolean).join(" ");let W=typeof h=="function"?h(z):h;return x.createElement(qe,uo({},y,{"aria-current":X,className:T,ref:l,style:W,to:f,viewTransition:g}),typeof b=="function"?b(z):b)});var jh;(function(a){a.UseScrollRestoration="useScrollRestoration",a.UseSubmit="useSubmit",a.UseSubmitFetcher="useSubmitFetcher",a.UseFetcher="useFetcher",a.useViewTransitionState="useViewTransitionState"})(jh||(jh={}));var Qg;(function(a){a.UseFetcher="useFetcher",a.UseFetchers="useFetchers",a.UseScrollRestoration="useScrollRestoration"})(Qg||(Qg={}));function w0(a){let s=x.useContext(Eo);return s||It(!1),s}function C0(a,s){let{target:l,replace:i,state:c,preventScrollReset:d,relative:u,viewTransition:h}=s===void 0?{}:s,f=rs(),g=ql(),b=_o(a,{relative:u});return x.useCallback(y=>{if(p0(y,l)){y.preventDefault();let v=i!==void 0?i:oo(g)===oo(b);f(a,{replace:v,state:c,preventScrollReset:d,relative:u,viewTransition:h})}},[g,f,b,i,c,l,a,d,u,h])}function A0(a,s){s===void 0&&(s={});let l=x.useContext(y0);l==null&&It(!1);let{basename:i}=w0(jh.useViewTransitionState),c=_o(a,{relative:s.relative});if(!l.isTransitioning)return!1;let d=Hl(l.currentLocation.pathname,i)||l.currentLocation.pathname,u=Hl(l.nextLocation.pathname,i)||l.nextLocation.pathname;return yh(c.pathname,u)!=null||yh(c.pathname,d)!=null}const ly=x.createContext(null);function E0({children:a}){const[s,l]=x.useState(null),[i,c]=x.useState(null),d=x.useMemo(()=>{const u=()=>s&&(s.userId||s.id||s.username||s.userName)||null;return{user:s,role:i,setUser:l,setRole:c,getUserId:u,isCurrentUser:f=>{if(!f)return!1;const g=u();return g!=null&&String(g)===String(f)}}},[s,i]);return e.jsx(ly.Provider,{value:d,children:a})}function iy(){const a=x.useContext(ly);if(!a)throw new Error("useUser must be used within <UserProvider>");return a}function T0({role:a="student"}){const s=x.useRef(null),l=x.useRef(null),i=x.useRef(null),c=x.useRef(null),[d,u]=x.useState(null),[h,f]=x.useState(null),g=iy(),b=a==="professor"?"/classroom/api/v1/professor/me":"/classroom/api/v1/student/me",y=x.useMemo(()=>({lastName:"",firstName:"",engLname:" ",engFname:" ",mobileNo:"",email:"",professorNo:"",studentNo:"",univDeptName:"",gradeName:"",stuStatusName:"",prfStatusName:"",prfAppntName:"",prfPositName:""}),[]),v=w=>{if(!w)return'<div class="text-muted"> </div>';const A=`${w.lastName||""} ${w.firstName||""}`.trim();let S='<dl class="mb-0">';S+=`<dt></dt><dd>${C(A||"-")}</dd>`;for(const[E,$]of Object.entries(w)){if(!$||E==="userId"||E.endsWith("Cd")||E==="lastName"||E==="firstName")continue;const D=y[E]||E;S+=`<dt>${C(D)}</dt><dd>${C(String($))}</dd>`}return S+="</dl>",S};function C(w){return String(w).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}return x.useEffect(()=>{let w=!0;return(async()=>{try{const A=await fetch(b,{headers:{Accept:"application/json"},credentials:"include"});if(!A.ok)throw new Error(`HTTP ${A.status}`);const S=await A.json();if(!w)return;u(S),c.current=S;try{g.setUser(S),g.setRole(a)}catch{}}catch(A){if(!w)return;f(A)}})(),()=>{w=!1}},[b,a,g]),x.useEffect(()=>{if(l.current)if(h)l.current.textContent="  ";else if(d){const w=d.lastName||"",A=d.firstName||"",S=`${w} ${A}`.trim(),E=d.univDeptName||"";if(a==="professor")l.current.innerHTML=`<i class="bi bi-person-circle me-1"></i> ${C(`${E} ${S}`.trim())} `;else{const $=d.gradeName||"";l.current.innerHTML=`<i class="bi bi-person-circle me-1"></i> ${C(`${E} ${$} ${S}`.trim())}`}}else l.current.textContent=" "},[d,h,a]),x.useEffect(()=>{const w=s.current;if(!w||!window.bootstrap)return;i.current&&i.current.dispose&&(i.current.dispose(),i.current=null);const A=new window.bootstrap.Popover(w,{trigger:"hover",placement:"bottom",html:!0,title:" ",content:()=>v(c.current)});return i.current=A,()=>{i.current&&i.current.dispose&&(i.current.dispose(),i.current=null)}},[]),e.jsx("li",{ref:s,className:"nav-item",id:"user-info-container",style:{cursor:"pointer"},"data-user-role":a,children:e.jsxs("span",{className:"navbar-text",id:"user-info-text",ref:l,children:[e.jsx("i",{className:"bi bi-person-circle me-1"}),"  "]})})}async function _0(a){const l=`/classroom/api/v1/common/${encodeURIComponent(a)}`,i=await fetch(l,{headers:{Accept:"application/json"},credentials:"include"});if(!i.ok)throw new Error(`(${i.status})    .`);return i.json()}function k0(a){if(!a)return[];try{if(Array.isArray(a))return a;if(typeof a=="string")return JSON.parse(a)}catch{}return[]}const ry=x.createContext(null);function D0({children:a}){const[s,l]=x.useState(null),[i,c]=x.useState(null),d=x.useRef(new Map),u=x.useCallback(()=>s?.lectureId||s?.id||s?.lectureNo||null,[s]),h=x.useCallback(C=>{if(!C)return null;const[w,A]=String(C).split("_");return`${w} ${{REG1:"1",REG2:"2",SUB1:"",SUB2:""}[A]||A||""}`.trim()},[]),f=x.useCallback((C,w)=>{const A=w||u();return!A||!C?null:`/classroom/api/v1/common/photo/student/${encodeURIComponent(A)}/${encodeURIComponent(C)}`},[u]),g=x.useCallback(C=>d.current.get(String(C))||null,[]),b=x.useCallback((C,w)=>{!C||!w||d.current.set(String(C),String(w))},[]),y=x.useCallback(()=>{c(null);for(const C of d.current.values())try{URL.revokeObjectURL(C)}catch{}d.current.clear()},[]),v=x.useMemo(()=>({lecture:s,setLecture:l,getLectureId:u,formatYearTerm:h,students:i,setStudents:c,getStudentPhotoUrl:f,getStudentPhotoBlobUrl:g,cacheStudentPhotoBlobUrl:b,clearLectureScoped:y}),[s,i,u,h,f,g,b,y]);return e.jsx(ry.Provider,{value:v,children:a})}function cs(){const a=x.useContext(ry);if(!a)throw new Error("useLecture must be used within <LectureProvider>");return a}function M0({lectureId:a}){const s=x.useRef(null),l=x.useRef(null),[i,c]=x.useState(null),[d,u]=x.useState(null),[h,f]=x.useState(!1),{lecture:g,setLecture:b,formatYearTerm:y}=cs(),v=x.useMemo(()=>({MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""}),[]),C=E=>{if(!E||String(E).length<4)return"--:--";const $=String(E);return`${$.slice(0,2)}:${$.slice(2,4)}`},w=E=>String(E??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),A=E=>{if(!E)return null;const $=y(E.yeartermCd),D=k0(E.scheduleJson),I=E.currentCap!=null||E.maxCap!=null?`${E.currentCap??"-"} / ${E.maxCap??"-"}`:null;return{subjectName:E.subjectName,professorName:E.professorName,univDeptName:E.univDeptName,completionName:E.completionName,subjectTypeName:E.subjectTypeName,yearTerm:$,credit:E.credit,hour:E.hour,capacity:I,ended:!!E.ended,endAt:E.endAt,schedules:D}},S=E=>{if(h)return'<div class="d-flex align-items-center"><div class="spinner-border spinner-border-sm me-2" role="status"></div> </div>';if(d)return`<div class="text-danger small">${w(String(d.message||d))}</div>`;if(!E)return'<div class="text-muted small"> </div>';const $=[["",E.subjectName],[" ",E.professorName],["",E.univDeptName],["",E.completionName],["",E.subjectTypeName],["",E.yearTerm],["/",E.credit!=null||E.hour!=null?`${E.credit??"-"}  ${E.hour??"-"}`:null],["",E.capacity],["",E.endAt?new Date(E.endAt).toLocaleDateString("ko-KR"):E.ended?"":null]].filter(([,V])=>V!=null&&String(V).trim().length>0),D=E.schedules&&E.schedules.length?E.schedules.map((V,_)=>{const B=(Array.isArray(V.slots)?V.slots:[]).map(X=>`${w(v[X.day]??X.day??"")} ${C(X.start)} ~ ${C(X.end)}`).join(", "),z=V.placeName||V.placeCd||" ";return`<div class="mb-1"><span class="badge bg-light text-dark border me-2">${w(z)}</span><span>${w(B)}</span></div>`}).join(""):'<div class="text-muted">  </div>';return`
      <div class="small">
        <dl class="mb-2">${$.map(([V,_])=>`<dt>${w(V)}</dt><dd>${w(String(_))}</dd>`).join("")}</dl>
        <div>
          <div class="fw-semibold mb-1"></div>
          ${D}
        </div>
      </div>
    `};return x.useEffect(()=>{let E=!0;if(a)return(async()=>{try{f(!0),u(null);const $=await _0(a);if(!E)return;c($),b($)}catch($){if(!E)return;u($)}finally{E&&f(!1)}})(),()=>{E=!1}},[a,b]),x.useEffect(()=>{const E=s.current;if(!E||!window.bootstrap)return;l.current?.dispose&&(l.current.dispose(),l.current=null);const $=new window.bootstrap.Popover(E,{trigger:"hover",placement:"bottom",html:!0,title:" ",content:()=>S(A(i))});return l.current=$,()=>{l.current?.dispose&&(l.current.dispose(),l.current=null)}},[i,h,d]),e.jsxs("button",{ref:s,type:"button",className:"btn btn-link nav-link text-white-50 p-0 ms-1","aria-label":"  ",children:[e.jsx("i",{className:"bi bi-info-circle","aria-hidden":"true"}),"  "]})}const Wu=["","","","","",""],Zg={:"MO",:"TU",:"WE",:"TH",:"FR",:"SA"},hn=[];for(let a=9;a<19;a++)hn.push(`${String(a).padStart(2,"0")}00`),hn.push(`${String(a).padStart(2,"0")}30`);hn.push("1900");const R0=[{value:"REG1",label:"1"},{value:"REG2",label:"2"},{value:"SUB1",label:""},{value:"SUB2",label:""}],Jg=["#FFB3BA","#FFDFBA","#FFFFBA","#BAFFC9","#BAE1FF","#D4BAFF","#FFB3E6","#FFC9BA","#BAF0FF","#E6BAFF","#FFBABA","#FFE5BA","#F0FFBA","#BAFFDB","#BADEFF"];function $0(){const a=rs(),[s,l]=x.useState(""),[i,c]=x.useState(""),[d,u]=x.useState([]),[h,f]=x.useState(!1),[g,b]=x.useState(!1),[y,v]=x.useState(!1),C=new Date().getFullYear(),w=[];for(let _=C-3;_<=C+1;_++)w.push(_);x.useEffect(()=>{g&&!y&&(A(),v(!0))},[g]),x.useEffect(()=>{s&&i&&A()},[s,i]);const A=async()=>{f(!0);try{let _="/classroom/api/v1/professor/schedule";s&&i&&(_+=`?yeartermCd=${s}_${i}`);const B=await fetch(_);if(!B.ok)throw new Error("Failed to fetch schedule");const z=await B.json();u(z||[])}catch(_){console.error("Failed to fetch schedule:",_),u([])}finally{f(!1)}},S=_=>{const z=!_.currentTarget.closest(".dropdown").classList.contains("show");b(z)},E=_=>{const B=_.substring(0,2),z=_.substring(2);return{dayCode:B,time:z}},$=_=>{const B={};return _.forEach(z=>{B[z.lectureId]||(B[z.lectureId]=[]),B[z.lectureId].push(z)}),Object.keys(B).forEach(z=>{B[z].sort((X,T)=>{const W=E(X.timeblockCd),F=E(T.timeblockCd);return W.dayCode!==F.dayCode?W.dayCode.localeCompare(F.dayCode):W.time.localeCompare(F.time)})}),B},D=_=>{const B=[];let z=null;return _.forEach(X=>{const{dayCode:T,time:W}=E(X.timeblockCd);if(!z||z.dayCode!==T)z&&B.push(z),z={lectureId:X.lectureId,subjectName:X.subjectName,placeName:X.placeName,dayCode:T,startTime:W,endTime:W,items:[X]};else{const F=z.endTime,Q=I(F);W===Q?(z.endTime=W,z.items.push(X)):(B.push(z),z={lectureId:X.lectureId,subjectName:X.subjectName,placeName:X.placeName,dayCode:T,startTime:W,endTime:W,items:[X]})}}),z&&B.push(z),B},I=_=>{const B=parseInt(_.substring(0,2));return parseInt(_.substring(2))===30?`${String(B+1).padStart(2,"0")}00`:`${String(B).padStart(2,"0")}30`},V=()=>{const _=$(d),B=[],z={};let X=0;Object.keys(_).sort((F,Q)=>{const O=E(_[F][0].timeblockCd),Y=E(_[Q][0].timeblockCd);return O.dayCode!==Y.dayCode?O.dayCode.localeCompare(Y.dayCode):O.time.localeCompare(Y.time)}).forEach(F=>{z[F]=Jg[X%Jg.length],X++;const Q=D(_[F]);B.push(...Q)});const W={};return Wu.forEach(F=>{W[F]={},hn.forEach(Q=>{W[F][Q]=null})}),B.forEach(F=>{const Q=Object.keys(Zg).find(M=>Zg[M]===F.dayCode);if(!Q)return;const O=hn.indexOf(F.startTime),Y=I(F.endTime),N=hn.indexOf(Y);if(O!==-1&&N!==-1){const M=N-O;W[Q][F.startTime]={...F,rowSpan:M,color:z[F.lectureId]};for(let L=O+1;L<N;L++)W[Q][hn[L]]="occupied"}}),e.jsxs("table",{className:"table table-bordered table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"80px",minWidth:"80px"},children:""}),Wu.map(F=>e.jsx("th",{style:{width:"15%"},children:F},F))]})}),e.jsx("tbody",{children:hn.slice(0,-1).map((F,Q)=>e.jsxs("tr",{style:{height:"40px"},children:[e.jsxs("td",{className:"text-center align-middle",style:{fontSize:"0.85rem"},children:[F.substring(0,2),":",F.substring(2)]}),Wu.map(O=>{const Y=W[O][F];return Y==="occupied"?null:Y&&Y.rowSpan?e.jsxs("td",{rowSpan:Y.rowSpan,className:"p-2 text-center align-middle position-relative",style:{backgroundColor:Y.color,cursor:"pointer",verticalAlign:"middle"},onClick:()=>a(`/classroom/professor/lecture/${Y.lectureId}`),children:[e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600"},children:Y.subjectName}),e.jsx("div",{style:{fontSize:"0.75rem",marginTop:"4px"},children:Y.placeName})]},O):e.jsx("td",{},O)})]},F))})]})};return e.jsxs("div",{className:"dropdown",children:[e.jsx("a",{className:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:S,children:""}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-dark dropdown-menu-end p-3",style:{minWidth:"800px",maxWidth:"900px"},children:[e.jsxs("div",{className:"mb-3 d-flex gap-2",children:[e.jsxs("select",{className:"form-select form-select-sm",value:s,onChange:_=>l(_.target.value),style:{width:"auto"},children:[e.jsx("option",{value:"",children:""}),w.map(_=>e.jsxs("option",{value:_,children:[_,""]},_))]}),e.jsxs("select",{className:"form-select form-select-sm",value:i,onChange:_=>c(_.target.value),style:{width:"auto"},children:[e.jsx("option",{value:"",children:""}),R0.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))]})]}),h&&e.jsx("div",{className:"text-center py-3",children:e.jsx("div",{className:"spinner-border spinner-border-sm text-light",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),!h&&y&&e.jsx("div",{style:{maxHeight:"600px",overflowY:"auto",backgroundColor:"white",borderRadius:"4px",padding:"8px"},children:d.length>0?V():e.jsx("div",{className:"text-center py-3 text-muted",children:"   ."})})]})]})}const Ku=["","","","","",""],ex={:"MO",:"TU",:"WE",:"TH",:"FR",:"SA"},mn=[];for(let a=9;a<19;a++)mn.push(`${String(a).padStart(2,"0")}00`),mn.push(`${String(a).padStart(2,"0")}30`);mn.push("1900");const O0=[{value:"REG1",label:"1"},{value:"REG2",label:"2"},{value:"SUB1",label:""},{value:"SUB2",label:""}],tx=["#FFB3BA","#FFDFBA","#FFFFBA","#BAFFC9","#BAE1FF","#D4BAFF","#FFB3E6","#FFC9BA","#BAF0FF","#E6BAFF","#FFBABA","#FFE5BA","#F0FFBA","#BAFFDB","#BADEFF"];function I0(){const a=rs(),[s,l]=x.useState(""),[i,c]=x.useState(""),[d,u]=x.useState([]),[h,f]=x.useState(!1),[g,b]=x.useState(!1),[y,v]=x.useState(!1),C=new Date().getFullYear(),w=[];for(let _=C-3;_<=C+1;_++)w.push(_);x.useEffect(()=>{g&&!y&&(A(),v(!0))},[g]),x.useEffect(()=>{s&&i&&A()},[s,i]);const A=async()=>{f(!0);try{let _="/classroom/api/v1/student/schedule";s&&i&&(_+=`?yeartermCd=${s}_${i}`);const B=await fetch(_);if(!B.ok)throw new Error("Failed to fetch schedule");const z=await B.json();u(z||[])}catch(_){console.error("Failed to fetch schedule:",_),u([])}finally{f(!1)}},S=_=>{const z=!_.currentTarget.closest(".dropdown").classList.contains("show");b(z)},E=_=>{const B=_.substring(0,2),z=_.substring(2);return{dayCode:B,time:z}},$=_=>{const B={};return _.forEach(z=>{B[z.lectureId]||(B[z.lectureId]=[]),B[z.lectureId].push(z)}),Object.keys(B).forEach(z=>{B[z].sort((X,T)=>{const W=E(X.timeblockCd),F=E(T.timeblockCd);return W.dayCode!==F.dayCode?W.dayCode.localeCompare(F.dayCode):W.time.localeCompare(F.time)})}),B},D=_=>{const B=[];let z=null;return _.forEach(X=>{const{dayCode:T,time:W}=E(X.timeblockCd);if(!z||z.dayCode!==T)z&&B.push(z),z={lectureId:X.lectureId,subjectName:X.subjectName,placeName:X.placeName,dayCode:T,startTime:W,endTime:W,items:[X]};else{const F=z.endTime,Q=I(F);W===Q?(z.endTime=W,z.items.push(X)):(B.push(z),z={lectureId:X.lectureId,subjectName:X.subjectName,placeName:X.placeName,dayCode:T,startTime:W,endTime:W,items:[X]})}}),z&&B.push(z),B},I=_=>{const B=parseInt(_.substring(0,2));return parseInt(_.substring(2))===30?`${String(B+1).padStart(2,"0")}00`:`${String(B).padStart(2,"0")}30`},V=()=>{const _=$(d),B=[],z={};let X=0;Object.keys(_).sort((F,Q)=>{const O=E(_[F][0].timeblockCd),Y=E(_[Q][0].timeblockCd);return O.dayCode!==Y.dayCode?O.dayCode.localeCompare(Y.dayCode):O.time.localeCompare(Y.time)}).forEach(F=>{z[F]=tx[X%tx.length],X++;const Q=D(_[F]);B.push(...Q)});const W={};return Ku.forEach(F=>{W[F]={},mn.forEach(Q=>{W[F][Q]=null})}),B.forEach(F=>{const Q=Object.keys(ex).find(M=>ex[M]===F.dayCode);if(!Q)return;const O=mn.indexOf(F.startTime),Y=I(F.endTime),N=mn.indexOf(Y);if(O!==-1&&N!==-1){const M=N-O;W[Q][F.startTime]={...F,rowSpan:M,color:z[F.lectureId]};for(let L=O+1;L<N;L++)W[Q][mn[L]]="occupied"}}),e.jsxs("table",{className:"table table-bordered table-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"80px",minWidth:"80px"},children:""}),Ku.map(F=>e.jsx("th",{style:{width:"15%"},children:F},F))]})}),e.jsx("tbody",{children:mn.slice(0,-1).map((F,Q)=>e.jsxs("tr",{style:{height:"40px"},children:[e.jsxs("td",{className:"text-center align-middle",style:{fontSize:"0.85rem"},children:[F.substring(0,2),":",F.substring(2)]}),Ku.map(O=>{const Y=W[O][F];return Y==="occupied"?null:Y&&Y.rowSpan?e.jsxs("td",{rowSpan:Y.rowSpan,className:"p-2 text-center align-middle position-relative",style:{backgroundColor:Y.color,cursor:"pointer",verticalAlign:"middle"},onClick:()=>a(`/classroom/student/lecture/${Y.lectureId}`),children:[e.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600"},children:Y.subjectName}),e.jsx("div",{style:{fontSize:"0.75rem",marginTop:"4px"},children:Y.placeName})]},O):e.jsx("td",{},O)})]},F))})]})};return e.jsxs("div",{className:"dropdown",children:[e.jsx("a",{className:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:S,children:""}),e.jsxs("div",{className:"dropdown-menu dropdown-menu-dark dropdown-menu-end p-3",style:{minWidth:"800px",maxWidth:"900px"},children:[e.jsxs("div",{className:"mb-3 d-flex gap-2",children:[e.jsxs("select",{className:"form-select form-select-sm",value:s,onChange:_=>l(_.target.value),style:{width:"auto"},children:[e.jsx("option",{value:"",children:""}),w.map(_=>e.jsxs("option",{value:_,children:[_,""]},_))]}),e.jsxs("select",{className:"form-select form-select-sm",value:i,onChange:_=>c(_.target.value),style:{width:"auto"},children:[e.jsx("option",{value:"",children:""}),O0.map(_=>e.jsx("option",{value:_.value,children:_.label},_.value))]})]}),h&&e.jsx("div",{className:"text-center py-3",children:e.jsx("div",{className:"spinner-border spinner-border-sm text-light",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),!h&&y&&e.jsx("div",{style:{maxHeight:"600px",overflowY:"auto",backgroundColor:"white",borderRadius:"4px",padding:"8px"},children:d.length>0?V():e.jsx("div",{className:"text-center py-3 text-muted",children:"   ."})})]})]})}function L0({role:a="student",lectureId:s}){const{lecture:l}=cs();return e.jsx("nav",{className:"navbar navbar-dark app-header",children:e.jsxs("div",{className:"container-fluid d-flex align-items-center",children:[e.jsxs("div",{className:"d-flex align-items-center me-auto gap-2",children:[e.jsx(qe,{className:"navbar-brand fw-bold m-0",to:`/classroom/${a}`,children:"Classroom"}),s?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"navbar-text text-white fw-semibold ms-2","data-lecture-subject-label":"true",children:l?.subjectName||" "}),e.jsx(M0,{lectureId:s})]}):null]}),e.jsxs("ul",{className:"navbar-nav flex-row ms-auto align-items-center gap-3",children:[e.jsx(T0,{role:a}),e.jsx("li",{className:"nav-item",children:a==="professor"?e.jsx($0,{}):e.jsx(I0,{})}),e.jsxs("li",{className:"nav-item dropdown",children:[e.jsx("a",{className:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:""}),e.jsxs("ul",{className:"dropdown-menu dropdown-menu-dark dropdown-menu-end",children:[e.jsx("li",{children:e.jsx("a",{className:"dropdown-item",href:"http://localhost/portal",target:"_blank",rel:"noopener noreferrer",children:" "})}),e.jsx("li",{children:e.jsx("hr",{className:"dropdown-divider"})}),a==="professor"?e.jsx("li",{children:e.jsx("a",{className:"dropdown-item",href:"http://localhost/professor",target:"_blank",rel:"noopener noreferrer",children:""})}):e.jsx("li",{children:e.jsx("a",{className:"dropdown-item",href:"http://localhost/student",target:"_blank",rel:"noopener noreferrer",children:""})})]})]}),e.jsx("li",{className:"nav-item",children:e.jsx("a",{className:"nav-link p-0 text-danger",href:"/logout",children:""})})]})]})})}var cy={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},sx=qs.createContext&&qs.createContext(cy),z0=["attr","size","title"];function U0(a,s){if(a==null)return{};var l=B0(a,s),i,c;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);for(c=0;c<d.length;c++)i=d[c],!(s.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(a,i)&&(l[i]=a[i])}return l}function B0(a,s){if(a==null)return{};var l={};for(var i in a)if(Object.prototype.hasOwnProperty.call(a,i)){if(s.indexOf(i)>=0)continue;l[i]=a[i]}return l}function ho(){return ho=Object.assign?Object.assign.bind():function(a){for(var s=1;s<arguments.length;s++){var l=arguments[s];for(var i in l)Object.prototype.hasOwnProperty.call(l,i)&&(a[i]=l[i])}return a},ho.apply(this,arguments)}function ax(a,s){var l=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);s&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(a,c).enumerable})),l.push.apply(l,i)}return l}function mo(a){for(var s=1;s<arguments.length;s++){var l=arguments[s]!=null?arguments[s]:{};s%2?ax(Object(l),!0).forEach(function(i){F0(a,i,l[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(l)):ax(Object(l)).forEach(function(i){Object.defineProperty(a,i,Object.getOwnPropertyDescriptor(l,i))})}return a}function F0(a,s,l){return s=H0(s),s in a?Object.defineProperty(a,s,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[s]=l,a}function H0(a){var s=V0(a,"string");return typeof s=="symbol"?s:s+""}function V0(a,s){if(typeof a!="object"||!a)return a;var l=a[Symbol.toPrimitive];if(l!==void 0){var i=l.call(a,s);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(a)}function oy(a){return a&&a.map((s,l)=>qs.createElement(s.tag,mo({key:l},s.attr),oy(s.child)))}function kh(a){return s=>qs.createElement(Y0,ho({attr:mo({},a.attr)},s),oy(a.child))}function Y0(a){var s=l=>{var{attr:i,size:c,title:d}=a,u=U0(a,z0),h=c||l.size||"1em",f;return l.className&&(f=l.className),a.className&&(f=(f?f+" ":"")+a.className),qs.createElement("svg",ho({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},l.attr,i,u,{className:f,style:mo(mo({color:a.color||l.color},l.style),a.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),d&&qs.createElement("title",null,d),a.children)};return sx!==void 0?qs.createElement(sx.Consumer,null,l=>s(l)):s(cy)}function P0(a){return kh({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2m.995-14.901a1 1 0 1 0-1.99 0A5 5 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901"},child:[]}]})(a)}function q0(a){return kh({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"},child:[]}]})(a)}function G0(a){return kh({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5z"},child:[]},{tag:"path",attr:{d:"M3 2.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 0 0-1h-.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1H12a.5.5 0 0 0 0 1h.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5z"},child:[]},{tag:"path",attr:{d:"M10.854 7.854a.5.5 0 0 0-.708-.708L7.5 9.793 6.354 8.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0z"},child:[]}]})(a)}const Zt={toggleOpen:"",toggleClose:"",loading:" ...",loadError:"    .",ongoingLectures:" ",ongoingEmpty:"   .",tasks:" ",tasksEmpty:"  .",reviews:" ",reviewsEmpty:"   ."},X0="/classroom/api/v1/student/mylist",W0="/classroom/api/v1/student/me/indivtask",K0="/classroom/api/v1/student/review",Tc=a=>String(a).padStart(2,"0"),Q0=a=>{if(!a)return"";const s=new Date(a);return Number.isNaN(s.getTime())?"":`${s.getFullYear()}-${Tc(s.getMonth()+1)}-${Tc(s.getDate())} ${Tc(s.getHours())}:${Tc(s.getMinutes())}`};function Z0(){const[a,s]=x.useState(!1),[l,i]=x.useState([]),[c,d]=x.useState(!1),[u,h]=x.useState(""),[f,g]=x.useState(!1),[b,y]=x.useState([]),[v,C]=x.useState(!1),[w,A]=x.useState(""),[S,E]=x.useState(!1),[$,D]=x.useState([]),[I,V]=x.useState(!1),[_,B]=x.useState("");x.useEffect(()=>{let F=!1;async function Q(){try{d(!0),h("");const O=await fetch(X0,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!O.ok)throw new Error(`HTTP ${O.status}`);const Y=await O.json();F||i(Array.isArray(Y)?Y:[])}catch(O){console.error("[SidebarStudent] failed to load lectures",O),F||(i([]),h(Zt.loadError))}finally{F||d(!1)}}return Q(),()=>{F=!0}},[]),x.useEffect(()=>{let F=!1;async function Q(){try{C(!0),A("");const O=await fetch(W0,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!O.ok)throw new Error(`HTTP ${O.status}`);const Y=await O.json();F||y(Array.isArray(Y)?Y:[])}catch(O){console.error("[SidebarStudent] failed to load tasks",O),F||(y([]),A(Zt.loadError))}finally{F||C(!1)}}return Q(),()=>{F=!0}},[]),x.useEffect(()=>{let F=!1;async function Q(){try{V(!0),B("");const O=await fetch(K0,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!O.ok)throw new Error(`HTTP ${O.status}`);const Y=await O.json();F||D(Array.isArray(Y)?Y:[])}catch(O){console.error("[SidebarStudent] failed to load reviews",O),F||(D([]),B(Zt.loadError))}finally{F||V(!1)}}return Q(),()=>{F=!0}},[]);const z=x.useMemo(()=>l.filter(F=>F&&F.ended===!1),[l]),X=x.useMemo(()=>$.length===0?[]:$.map(F=>l.find(Q=>Q.lectureId===F)).filter(Boolean),[$,l]),T=v?"...":b.length,W=I?"...":$.length;return e.jsxs("nav",{className:"list-group list-group-flush rounded-0",children:[e.jsxs("button",{type:"button",className:`list-group-item list-group-item-action d-flex justify-content-between align-items-center fw-semibold ${a?"bg-primary-subtle text-primary-emphasis":"bg-body-tertiary"}`,onClick:()=>s(F=>!F),children:[e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(q0,{className:"me-2 fs-5"})," ",Zt.ongoingLectures]}),e.jsx("span",{className:"small text-muted",children:a?Zt.toggleClose:Zt.toggleOpen})]}),a&&e.jsxs("div",{className:"list-group list-group-flush bg-primary-subtle border-top border-primary-subtle",children:[c&&e.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:Zt.loading}),!c&&u&&e.jsx("div",{className:"list-group-item small text-danger bg-transparent border-0",children:u}),!c&&!u&&z.length===0&&e.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:Zt.ongoingEmpty}),!c&&!u&&z.map(F=>e.jsxs(qe,{to:`/classroom/student/${encodeURIComponent(F.lectureId||"")}`,className:"list-group-item list-group-item-action ps-4 bg-transparent border-0",children:[e.jsx("div",{className:"fw-semibold text-truncate text-primary-emphasis",children:F.subjectName||"-"}),e.jsx("div",{className:"text-muted small text-truncate",children:F.completionName||""})]},F.lectureId))]}),e.jsxs("button",{type:"button",className:`list-group-item list-group-item-action d-flex justify-content-between align-items-center fw-semibold ${f?"bg-primary-subtle text-primary-emphasis":"bg-body-tertiary"}`,onClick:()=>g(F=>!F),children:[e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(G0,{className:"me-2 fs-5"})," ",Zt.tasks,e.jsx("span",{className:"ms-2 badge text-bg-secondary",children:T})]}),e.jsx("span",{className:"small text-muted",children:f?Zt.toggleClose:Zt.toggleOpen})]}),f&&e.jsxs("div",{className:"list-group list-group-flush bg-primary-subtle border-top border-primary-subtle",children:[v&&e.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:Zt.loading}),!v&&w&&e.jsx("div",{className:"list-group-item small text-danger bg-transparent border-0",children:w}),!v&&!w&&b.length===0&&e.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:Zt.tasksEmpty}),!v&&!w&&b.map(F=>e.jsxs(qe,{to:`/classroom/student/${encodeURIComponent(F.lectureId||"")}/task/indiv/${encodeURIComponent(F.indivtaskId||"")}`,className:"list-group-item list-group-item-action ps-4 bg-transparent border-0",children:[e.jsx("div",{className:"fw-semibold text-truncate text-primary-emphasis",children:F.indivtaskName||"-"}),e.jsx("div",{className:"text-muted small text-truncate",children:(F.subjectName||"")+(F.subjectName&&F.endAt?"  ":"")+(Q0(F.endAt)||"")})]},F.indivtaskId))]}),$.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{type:"button",className:`list-group-item list-group-item-action d-flex justify-content-between align-items-center fw-semibold ${S?"bg-primary-subtle text-primary-emphasis":"bg-body-tertiary"}`,onClick:()=>E(F=>!F),children:[e.jsxs("span",{className:"d-flex align-items-center",children:[e.jsx(P0,{className:"me-2 fs-5"})," ",Zt.reviews,e.jsx("span",{className:"ms-2 badge text-bg-secondary",children:W})]}),e.jsx("span",{className:"small text-muted",children:S?Zt.toggleClose:Zt.toggleOpen})]}),S&&e.jsxs("div",{className:"list-group list-group-flush bg-primary-subtle border-top border-primary-subtle",children:[I&&e.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:Zt.loading}),!I&&_&&e.jsx("div",{className:"list-group-item small text-danger bg-transparent border-0",children:_}),!I&&!_&&X.length===0&&e.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:Zt.reviewsEmpty}),!I&&!_&&X.map(F=>e.jsxs(qe,{to:`/classroom/student/${encodeURIComponent(F.lectureId||"")}`,className:"list-group-item list-group-item-action ps-4 bg-transparent border-0",children:[e.jsx("div",{className:"fw-semibold text-truncate text-primary-emphasis",children:F.subjectName||"-"}),e.jsx("div",{className:"text-muted small text-truncate",children:F.completionName||""})]},F.lectureId))]})]})]})}function J0(){const[a,s]=x.useState(!1),[l,i]=x.useState(!1),[c,d]=x.useState(null),[u,h]=x.useState([]);x.useEffect(()=>{let y=!0;return(async()=>{try{i(!0),d(null);const v=await fetch("/classroom/api/v1/professor/me/indivtask",{headers:{Accept:"application/json"},credentials:"include"});if(!v.ok)throw new Error(`(${v.status})    .`);const C=await v.json();if(!y)return;h(Array.isArray(C)?C:[])}catch(v){if(!y)return;d(v)}finally{y&&i(!1)}})(),()=>{y=!1}},[]);const f=x.useMemo(()=>u.map(y=>{const v=y?.lecture||{},C=y?.indivtask||{},w=v.lectureId||"",A=v.subjectName||w||" ",S=C.indivtaskId||"",E=C.indivtaskName||" ",$=Number(y?.submitCount??0);return{lectureId:w,lectureLabel:A,taskId:S,taskLabel:E,submitCount:Number.isFinite($)?$:0}}),[u]),g=f.length,b=()=>s(y=>!y);return e.jsxs("nav",{className:"list-group list-group-flush rounded-0",children:[e.jsx(qe,{to:"/classroom/professor",className:"list-group-item list-group-item-action",children:" "}),e.jsxs("button",{type:"button",className:"list-group-item list-group-item-action d-flex align-items-center justify-content-between",onClick:b,"aria-expanded":a,"aria-controls":"sidebar-review-task-panel",children:[e.jsx("span",{children:"  "}),e.jsxs("span",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"badge text-bg-secondary",children:g}),e.jsx("span",{"aria-hidden":"true",children:a?"^":"v"})]})]}),a&&e.jsxs("div",{id:"sidebar-review-task-panel",className:"list-group list-group-flush border-bottom rounded-0",children:[l&&e.jsx("div",{className:"list-group-item small text-muted",children:" ..."}),c&&!l&&e.jsx("div",{className:"list-group-item small text-danger",children:String(c.message||c)}),!l&&!c&&f.length===0&&e.jsx("div",{className:"list-group-item small text-muted",children:"  ."}),!l&&!c&&f.map(y=>{const{lectureId:v,lectureLabel:C,taskId:w,taskLabel:A,submitCount:S}=y;if(!v||!w)return null;const E=`/classroom/professor/${encodeURIComponent(v)}/task/indiv/${encodeURIComponent(w)}`;return e.jsxs(qe,{to:E,className:"list-group-item list-group-item-action small",children:[e.jsxs("div",{className:"fw-semibold text-truncate",children:["[",C,"] ",A]}),e.jsxs("div",{className:"text-muted",children:["  : ",S,""]})]},`${v}-${w}`)})]})]})}function eS(){const a=new Date().getFullYear();return e.jsx("footer",{className:"app-footer",children:e.jsxs("div",{className:"container py-3 text-muted small d-flex justify-content-between",children:[e.jsxs("span",{children:[" ",e.jsx("span",{children:a})," JSU Classroom"]}),e.jsx("span",{children:"v0.1 Prototype"})]})})}function ko({role:a="student",children:s,lectureId:l,onLectureInfo:i}){return e.jsxs("div",{className:"app",children:[e.jsx(L0,{role:a,lectureId:l,onLectureInfo:i}),e.jsxs("main",{className:"app-main",children:[e.jsx("aside",{className:"app-sidebar",children:a==="professor"?e.jsx(J0,{}):e.jsx(Z0,{})}),e.jsx("section",{className:"app-content",children:e.jsx("div",{className:"container p-3",children:s})})]}),e.jsx(eS,{})]})}const tS={MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""},sS={REG1:"1",REG2:"2",SUB1:"",SUB2:""},aS={REG1:1,REG2:2,SUB1:3,SUB2:4},Ot={pageTitle:"  ",summary:(a,s)=>` ${a}   ${s}`,ongoingTitle:" ",endedTitle:" ",loading:"   ...",empty:"  .",error:"     .",cannotDisplay:"    .",professorFallback:"  ",deptFallback:"-",completionFallback:"-",creditUnknown:"  ",hourUnknown:"  ",capacityLabel:(a,s)=>s>0?`${a} / ${s}`:`${a}`,scheduleHeading:"",scheduleEmpty:"  .",endInfo:a=>`: ${a}`,statusEnded:"",statusOngoing:""},nx=a=>{if(!a||String(a).length<4)return"--:--";const s=String(a);return`${s.slice(0,2)}:${s.slice(2,4)}`},nS=a=>{if(!a)return[];if(Array.isArray(a))return a;if(typeof a=="string")try{const s=JSON.parse(a);return Array.isArray(s)?s:[]}catch{return[]}return[]},lx=a=>{if(!a)return{year:0,order:99};const[s="0",l=""]=String(a).split("_");return{year:Number(s)||0,order:aS[l]??99}},lS=a=>{if(!a)return"  ";const[s,l]=String(a).split("_"),i=sS[l]||l||"";return i?`${s} ${i}`:`${s}`},iS=a=>{if(!a)return"  ";const s=new Date(a);if(Number.isNaN(s.getTime()))return"  ";const l=s.getFullYear(),i=String(s.getMonth()+1).padStart(2,"0"),c=String(s.getDate()).padStart(2,"0");return`${l}-${i}-${c}`},ix=a=>a.slice().sort((s,l)=>{const i=lx(s.yeartermCd),c=lx(l.yeartermCd);return i.year!==c.year?c.year-i.year:i.order!==c.order?i.order-c.order:String(s.subjectName||"").localeCompare(String(l.subjectName||""),"ko")}),rS=a=>a?`/classroom/student/${encodeURIComponent(a)}`:"#",cS=a=>{if(!a&&a!==0)return null;const s=String(a).trim();return s?`/classroom/api/v1/common/photo/professor/${encodeURIComponent(s)}`:null},oS=a=>a.length?a.map((s,l)=>{const i=s?.placeName||s?.placeCd||"  ",c=Array.isArray(s?.slots)?s.slots:[];return e.jsxs("div",{className:"mb-2",children:[e.jsx("div",{className:"badge bg-light text-dark border me-2",children:i}),e.jsx("ul",{className:"mb-0 ps-3",children:c.length===0?e.jsx("li",{className:"text-muted",children:Ot.scheduleEmpty}):c.map((d,u)=>{const h=tS[d?.day]??d?.day??"";return e.jsxs("li",{children:[h," ",nx(d?.start)," ~ ",nx(d?.end)]},`${i}-${l}-${u}`)})})]},`${i}-${l}`)}):e.jsx("p",{className:"text-muted mb-0",children:Ot.scheduleEmpty}),dS=({lecture:a})=>{const s=nS(a?.scheduleJson),l=rS(a?.lectureId),i=!!a?.ended,c=cS(a?.professorNo),d=a?.professorName||Ot.professorFallback,u=a?.univDeptName||Ot.deptFallback,h=a?.completionName||Ot.completionFallback,f=a?.subjectTypeName||"-",g=Number.isFinite(Number(a?.credit))?`${a.credit}`:Ot.creditUnknown,b=Number.isFinite(Number(a?.hour))?`${a.hour}`:Ot.hourUnknown,y=Number.isFinite(Number(a?.currentCap))?Number(a.currentCap):0,v=Number.isFinite(Number(a?.maxCap))?Number(a.maxCap):0,C=Ot.capacityLabel(y,v),w=i?Ot.endInfo(iS(a?.endAt)):null;return e.jsx("div",{className:"col-12 col-lg-6 col-xl-4",children:e.jsx("article",{className:"card shadow-sm h-100",children:e.jsxs("div",{className:"card-body d-flex flex-column",children:[e.jsxs("div",{className:"d-flex align-items-start justify-content-between mb-2",children:[e.jsx("h2",{className:"h5 lh-base mb-0",children:e.jsx(qe,{className:"stretched-link text-decoration-none",to:l,children:a?.subjectName||" "})}),e.jsx("span",{className:`badge ${i?"bg-secondary-subtle text-secondary border border-secondary-subtle":"bg-success-subtle text-success border border-success-subtle"}`,children:i?Ot.statusEnded:Ot.statusOngoing})]}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsxs("div",{className:"clearfix",children:[c?e.jsx("img",{src:c,alt:`${d}  `,className:"stu-card-professor float-end ms-3 mb-2"}):null,e.jsx("div",{className:"text-muted small mb-1",children:lS(a?.yeartermCd)}),e.jsx("div",{className:"mb-2 small text-body-secondary",children:u}),e.jsxs("ul",{className:"list-unstyled small mb-0",children:[e.jsxs("li",{children:[" : ",d]}),e.jsxs("li",{children:[" : ",h]}),e.jsxs("li",{children:[" : ",f]}),e.jsxs("li",{children:[" / : ",g,"  ",b]}),e.jsxs("li",{children:[" : ",C]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("strong",{className:"d-block mb-1",children:Ot.scheduleHeading}),oS(s)]})]}),w?e.jsx("div",{className:"text-muted small mt-auto pt-3 border-top",children:w}):null]})})})},rx=({idPrefix:a,title:s,count:l,open:i,onToggle:c,children:d})=>e.jsx("div",{className:"accordion mt-2",id:`${a}-accordion`,children:e.jsxs("div",{className:"accordion-item",children:[e.jsx("h2",{className:"accordion-header",id:`${a}-heading`,children:e.jsxs("button",{className:`accordion-button${i?"":" collapsed"}`,type:"button","aria-expanded":i,"aria-controls":`${a}-collapse`,onClick:c,children:[s,e.jsxs("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle ms-2",children:[l,""]})]})}),e.jsx("div",{id:`${a}-collapse`,className:`accordion-collapse collapse${i?" show":""}`,"aria-labelledby":`${a}-heading`,children:e.jsx("div",{className:"accordion-body",children:d})})]})});function uS(){const[a,s]=x.useState([]),[l,i]=x.useState(!0),[c,d]=x.useState(""),[u,h]=x.useState(!0),[f,g]=x.useState(!1);x.useEffect(()=>{let w=!0;return(async()=>{try{i(!0),d("");const A=await fetch("/classroom/api/v1/student/mylist",{headers:{Accept:"application/json"},credentials:"include"});if(!A.ok)throw new Error(`(${A.status}) ${Ot.error}`);const S=await A.json();if(!w)return;if(!Array.isArray(S))throw new Error(Ot.error);s(Array.isArray(S)?S:[])}catch(A){if(!w)return;d(A instanceof Error?A.message:Ot.error),s([])}finally{w&&i(!1)}})(),()=>{w=!1}},[]);const b=x.useMemo(()=>ix(a.filter(w=>!w?.ended)),[a]),y=x.useMemo(()=>ix(a.filter(w=>!!w?.ended)),[a]),v=Ot.summary(b.length,y.length),C=w=>l?e.jsx("div",{className:"text-center text-muted py-4",children:Ot.loading}):c?e.jsx("div",{className:"text-center text-muted py-4",children:Ot.cannotDisplay}):w.length?e.jsx("div",{className:"row g-3",children:w.map(A=>e.jsx(dS,{lecture:A},A?.lectureId||A?.subjectName))}):e.jsx("div",{className:"text-muted text-center py-4",children:Ot.empty});return e.jsx(ko,{role:"student",children:e.jsxs("div",{id:"stu-main-root",className:"container my-4","data-api":"/classroom/api/v1/student/mylist",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:Ot.pageTitle}),e.jsx("div",{className:"text-muted small",id:"stu-lecture-summary","aria-live":"polite",children:c?"":v})]}),c&&e.jsx("div",{id:"stu-error-box",className:"alert alert-danger",role:"alert",children:c}),e.jsxs("section",{className:"accordion-section mb-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h5 mb-0",children:Ot.ongoingTitle}),e.jsxs("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle",id:"stu-ongoing-count",children:[b.length,""]})]}),e.jsx(rx,{idPrefix:"stu-ongoing",title:Ot.ongoingTitle,count:b.length,open:u,onToggle:()=>h(w=>!w),children:C(b)})]}),e.jsxs("section",{className:"accordion-section",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h5 mb-0",children:Ot.endedTitle}),e.jsxs("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle",id:"stu-ended-count",children:[y.length,""]})]}),e.jsx(rx,{idPrefix:"stu-ended",title:Ot.endedTitle,count:y.length,open:f,onToggle:()=>g(w=>!w),children:C(y)})]})]})})}const Ye={defaultTitle:" ",subtitleLoading:"   ...",planHeading:"  ",planLoadingTitle:"   ...",planLoadingBody:" .",planEmpty:"   .",planGoalLabel:" ",planDescLabel:" ",overviewHeading:" ",overviewLoading:"   ...",overviewProfessorLabel:" ",overviewIndexLabel:"",overviewGoalLabel:" ",overviewPrereqLabel:" ",overviewCapacityLabel:"",overviewEndLabel:"",overviewGoalFallback:"  .",overviewPrereqFallback:"  .",overviewCapacityFallback:"  .",overviewProfessorFallback:"  ",overviewIndexFallback:" ",overviewEndFallback:" ",scheduleHeading:" /",scheduleLoading:"   ...",scheduleEmpty:"  .",scheduleDay:"",scheduleTime:"",schedulePlace:"",classmateHeading:"  ",classmateButton:"  ",classmateLoading:"   ...",classmateEmpty:"    .",classmateFallback:"    .",classmateModalTitle:"  ",modalClose:"",tableStudentNo:"",tableName:"",tableDept:"",tableStatus:"",summaryExtraPrefix:" ",summaryExtraSuffix:"",unknownTerm:"  ",unknownProfessor:"",unknownStudentName:" ",countSuffix:"",genericError:"    .",missingLecture:"  ."},hS={MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""},Ui="/classroom/api/v1/common",cx="/classroom/api/v1/student",ox=a=>{if(!a||String(a).length<4)return"--:--";const s=String(a);return`${s.slice(0,2)}:${s.slice(2,4)}`},mS=a=>{if(!a)return"-";if(typeof a=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(a))return a;const s=new Date(a);if(Number.isNaN(s.getTime()))return"-";const l=s.getFullYear(),i=String(s.getMonth()+1).padStart(2,"0"),c=String(s.getDate()).padStart(2,"0");return`${l}-${i}-${c}`},fS=a=>{if(!a)return[];if(Array.isArray(a))return a;if(typeof a=="string")try{const s=JSON.parse(a);return Array.isArray(s)?s:[]}catch{return[]}return[]},Qu=(a,s)=>{const l=typeof a=="string"?a.trim():"";if(!l)return e.jsx("span",{className:"text-body-secondary",children:s});const i=l.split(/\r?\n/);return i.map((c,d)=>e.jsxs(x.Fragment,{children:[c||"",d<i.length-1?e.jsx("br",{}):null]},`${d}-${c}`))};function pS(){const{lectureId:a}=dt(),{setLecture:s,setStudents:l,formatYearTerm:i}=cs(),[c,d]=x.useState(Ye.defaultTitle),[u,h]=x.useState(Ye.subtitleLoading),[f,g]=x.useState(!0),[b,y]=x.useState(null),[v,C]=x.useState(null),[w,A]=x.useState([]),[S,E]=x.useState(null),[$,D]=x.useState([]),[I,V]=x.useState([]),[_,B]=x.useState(!1);x.useEffect(()=>{let O=!0;return(async()=>{try{if(!a)throw new Error(Ye.missingLecture);g(!0),y(null);const Y=encodeURIComponent(a),N={headers:{Accept:"application/json"},credentials:"include"},M=[fetch(`${Ui}/${Y}`,N),fetch(`${Ui}/${Y}/plan`,N),fetch(`${Ui}/${Y}/schedule`,N),fetch(`${cx}/${Y}/students`,N)],L=async be=>{if(be.status===404)return{data:null,notFound:!0};if(be.status===204)return{data:[]};if(!be.ok){const Ee=await be.text().catch(()=>""),$e=Ee?` - ${Ee}`:"";throw new Error(`HTTP ${be.status} ${be.statusText}${$e}`)}if((be.headers.get("content-type")||"").includes("application/json"))return{data:await be.json()};const re=await be.text();try{return{data:JSON.parse(re)}}catch{return{data:re}}},[U,P,k,G]=await Promise.all(M.map(be=>be.then(L)));if(!O)return;const se=U.notFound?null:U.data;if(C(se||null),s(se||null),se){d(se.subjectName||Ye.defaultTitle);const be=se.professorName||Ye.overviewProfessorFallback,J=i(se.yeartermCd)||Ye.unknownTerm;h(`${be}  ${J}`)}else d(Ye.defaultTitle),h(Ye.subtitleLoading);const q=P.notFound?[]:P.data,ee=Array.isArray(q)?q.filter(be=>be&&be.lectureWeek!==void 0):[];ee.sort((be,J)=>(Number(be.lectureWeek)||0)-(Number(J.lectureWeek)||0)),A(ee),E(be=>be!==null&&ee.some(J=>Number(J.lectureWeek)===Number(be))?be:ee.length?Number(ee[0].lectureWeek):null);const te=k.notFound?[]:k.data;D(fS(te));const me=G.notFound?[]:G.data,oe=Array.isArray(me)?me.slice():[];oe.sort((be,J)=>{const re=String(be?.gradeCd||"").localeCompare(String(J?.gradeCd||""));if(re!==0)return re;const Ee=`${be?.lastName||""}${be?.firstName||""}`,$e=`${J?.lastName||""}${J?.firstName||""}`;return Ee.localeCompare($e,"ko")}),V(oe),l(oe)}catch(Y){if(!O)return;y(Y instanceof Error?Y.message:Ye.genericError)}finally{O&&g(!1)}})(),()=>{O=!1}},[a,s,l,i]),x.useEffect(()=>{if(!_)return;const O=document.body.style.overflow;return document.body.classList.add("modal-open"),document.body.style.overflow="hidden",()=>{document.body.classList.remove("modal-open"),document.body.style.overflow=O}},[_]);const z=x.useMemo(()=>{if(!I.length)return Ye.classmateFallback;const O=I.slice(0,3).map(N=>`${N?.lastName||""}${N?.firstName||""}`.trim()||N?.studentName||Ye.unknownStudentName).filter(Boolean),Y=I.length>3?` ${Ye.summaryExtraPrefix}${I.length-3}${Ye.summaryExtraSuffix}`:"";return O.length?`${O.join(", ")}${Y}`:Ye.classmateFallback},[I]),X=`${I.length}${Ye.countSuffix}`,T=x.useMemo(()=>v?.professorNo?`${Ui}/photo/professor/${encodeURIComponent(String(v.professorNo).trim())}`:null,[v?.professorNo]),W=x.useMemo(()=>f?e.jsx("div",{className:"accordion",id:"plan-accordion",children:e.jsxs("div",{className:"accordion-item",children:[e.jsx("h2",{className:"accordion-header",id:"plan-loading-heading",children:e.jsx("button",{className:"accordion-button",type:"button",children:Ye.planLoadingTitle})}),e.jsx("div",{className:"accordion-collapse collapse show","aria-labelledby":"plan-loading-heading",children:e.jsx("div",{className:"accordion-body",children:Ye.planLoadingBody})})]})}):w.length?e.jsx("div",{className:"accordion",id:"plan-accordion",children:w.map(O=>{const Y=Number(O.lectureWeek),N=S===Y,M=`plan-week-${Y}-heading`,L=`plan-week-${Y}-body`;return e.jsxs("div",{className:"accordion-item",children:[e.jsx("h2",{className:"accordion-header",id:M,children:e.jsx("button",{className:`accordion-button${N?"":" collapsed"}`,type:"button","aria-expanded":N,"aria-controls":L,onClick:()=>E(N?null:Y),children:`${Y}`})}),e.jsx("div",{id:L,className:`accordion-collapse collapse${N?" show":""}`,"aria-labelledby":M,children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"fw-semibold mb-1",children:Ye.planGoalLabel}),e.jsx("p",{className:"mb-0",children:Qu(O.weekGoal,Ye.overviewGoalFallback)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold mb-1",children:Ye.planDescLabel}),e.jsx("p",{className:"mb-0",children:Qu(O.weekDesc,Ye.overviewGoalFallback)})]})]})})]},Y)})}):e.jsx("div",{className:"accordion",id:"plan-accordion"}),[w,S,f]),F=x.useMemo(()=>{if(f)return e.jsx("div",{className:"text-body-secondary",children:Ye.scheduleLoading});if(!$.length)return e.jsx("div",{className:"text-body-secondary",children:Ye.scheduleEmpty});const O=[];return $.forEach((Y,N)=>{const M=Y&&(Y.placeName||Y.placeCd||"-");(Array.isArray(Y?.slots)&&Y.slots.length?Y.slots:[{}]).forEach((U,P)=>{O.push(e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:hS[U.day]||U.day||"-"}),e.jsx("td",{className:"text-center",children:U.start?`${ox(U.start)} ~ ${ox(U.end)}`:"-"}),e.jsx("td",{children:M||"-"})]},`${N}-${P}`))})}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-striped align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",style:{width:"5.5rem"},children:Ye.scheduleDay}),e.jsx("th",{className:"text-center",style:{width:"9rem"},children:Ye.scheduleTime}),e.jsx("th",{children:Ye.schedulePlace})]})}),e.jsx("tbody",{children:O})]})})},[$,f]),Q=_?nr.createPortal(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"modal fade show d-block",role:"dialog","aria-modal":"true",children:e.jsx("div",{className:"modal-dialog modal-lg modal-dialog-scrollable",children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title h5 mb-0",children:Ye.classmateModalTitle}),e.jsx("button",{type:"button",className:"btn-close","aria-label":Ye.modalClose,onClick:()=>B(!1)})]}),e.jsx("div",{className:"modal-body",children:I.length===0?e.jsx("div",{className:"text-body-secondary",children:Ye.classmateEmpty}):e.jsx("div",{className:"table-responsive classmate-summary-table",children:e.jsxs("table",{className:"table table-sm table-hover align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",style:{width:"7rem"},children:Ye.tableStudentNo}),e.jsx("th",{style:{width:"10rem"},children:Ye.tableName}),e.jsx("th",{children:Ye.tableDept}),e.jsx("th",{className:"text-center",style:{width:"6rem"},children:Ye.tableStatus})]})}),e.jsx("tbody",{children:I.map((O,Y)=>{const N=`${O?.lastName||""}${O?.firstName||""}`.trim()||O?.studentName||Ye.unknownStudentName,M=O?.gradeName||O?.grade||"";return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:O?.studentNo||"-"}),e.jsxs("td",{children:[N,M?e.jsx("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle ms-2",children:M}):null]}),e.jsx("td",{children:O?.univDeptName||O?.deptName||"-"}),e.jsx("td",{className:"text-center",children:O?.enrollStatusCd||"-"})]},`${O?.enrollId||O?.studentNo||Y}`)})})]})})}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>B(!1),children:Ye.modalClose})})]})})}),e.jsx("div",{className:"modal-backdrop fade show custom"})]}),document.body):null;return e.jsxs("section",{id:"stu-lecture-root",className:"container py-4","data-lecture-id":a||"","data-common-api":Ui,"data-student-api":cx,children:[e.jsxs("header",{className:"mb-4",children:[e.jsx("h1",{className:"h3 mb-1",id:"stu-lecture-title",children:c}),e.jsx("p",{className:"text-muted mb-0",id:"stu-lecture-subtitle",children:u})]}),b&&e.jsx("div",{id:"stu-lecture-alert",className:"alert alert-danger",role:"alert",children:b||Ye.genericError}),e.jsxs("div",{className:"row g-4 align-items-stretch mb-4",children:[e.jsx("section",{id:"plan-section",className:"col-12 col-xl-8","aria-labelledby":"plan-heading",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header d-flex align-items-center justify-content-between",children:e.jsx("h2",{className:"h5 mb-0",id:"plan-heading",children:Ye.planHeading})}),e.jsxs("div",{className:"card-body",children:[W,e.jsx("div",{id:"plan-empty",className:`text-body-secondary small mt-3${w.length||f?" d-none":""}`,children:Ye.planEmpty})]})]})}),e.jsxs("div",{className:"col-12 col-xl-4 d-flex flex-column gap-4",children:[e.jsxs("section",{id:"overview-section",className:"card h-100","aria-labelledby":"overview-heading",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",id:"overview-heading",children:Ye.overviewHeading})}),e.jsxs("div",{className:"card-body",id:"overview-body",children:[f&&e.jsx("div",{className:"text-body-secondary",children:Ye.overviewLoading}),!f&&!v&&e.jsx("div",{className:"text-body-secondary",children:Ye.classmateFallback}),!f&&v&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex gap-3",children:[T?e.jsx("img",{src:T,alt:`${v.professorName||Ye.overviewProfessorFallback}`,className:"overview-photo flex-shrink-0"}):e.jsx("div",{className:"overview-photo-placeholder flex-shrink-0",children:Ye.overviewProfessorFallback}),e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"text-muted small mb-1",children:i(v.yeartermCd)||Ye.unknownTerm}),e.jsx("div",{className:"fw-semibold",children:v.subjectName||Ye.defaultTitle}),e.jsx("div",{className:"small text-body-secondary",children:`${Ye.overviewProfessorLabel}: ${v.professorName||Ye.overviewProfessorFallback}`}),e.jsx("div",{className:"small text-body-secondary",children:`${Ye.overviewIndexLabel}: ${v.lectureIndex||Ye.overviewIndexFallback}`})]})]}),e.jsxs("dl",{className:"row row-cols-1 g-3 small mt-3 mb-0",children:[e.jsxs("div",{className:"col",children:[e.jsx("dt",{className:"text-muted",children:Ye.overviewGoalLabel}),e.jsx("dd",{className:"mb-0",children:Qu(v.lectureGoal,Ye.overviewGoalFallback)})]}),e.jsxs("div",{className:"col",children:[e.jsx("dt",{className:"text-muted",children:Ye.overviewPrereqLabel}),e.jsx("dd",{className:"mb-0",children:v.prereqSubject||Ye.overviewPrereqFallback})]}),e.jsxs("div",{className:"col",children:[e.jsx("dt",{className:"text-muted",children:Ye.overviewCapacityLabel}),e.jsx("dd",{className:"mb-0",children:Number.isFinite(Number(v.maxCap))?`${v.maxCap}${Ye.countSuffix}`:Ye.overviewCapacityFallback})]}),e.jsxs("div",{className:"col",children:[e.jsx("dt",{className:"text-muted",children:Ye.overviewEndLabel}),e.jsx("dd",{className:"mb-0",children:v.endAt?mS(v.endAt):Ye.overviewEndFallback})]})]})]})]})]}),e.jsxs("section",{id:"schedule-section",className:"card h-100","aria-labelledby":"schedule-heading",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",id:"schedule-heading",children:Ye.scheduleHeading})}),e.jsx("div",{className:"card-body",id:"schedule-body",children:F})]})]})]}),e.jsx("div",{className:"row g-4 align-items-stretch",children:e.jsx("section",{id:"classmate-section",className:"col-12","aria-labelledby":"classmate-heading",children:e.jsxs("div",{className:"card h-100",children:[e.jsxs("div",{className:"card-header d-flex flex-wrap align-items-center justify-content-between gap-2",children:[e.jsx("h2",{className:"h6 mb-0",id:"classmate-heading",children:Ye.classmateHeading}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle",id:"classmate-total-badge",children:X}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",id:"open-classmate-modal-btn",onClick:()=>B(!0),disabled:!I.length,children:Ye.classmateButton})]})]}),e.jsx("div",{className:"card-body",children:e.jsx("div",{id:"classmate-summary",className:"text-muted small classmate-summary-list",children:f?Ye.classmateLoading:z})})]})})}),Q]})}const Ma={dashboard:"",board:"",attendance:"",exam:"",task:"",review:"",grade:"/"};function gS(){const{lectureId:a}=dt(),{lecture:s}=cs(),[l,i]=x.useState({show:!1,enabled:!1}),[c,d]=x.useState(null);x.useEffect(()=>{let g=!0;return(async()=>{if(!s||!s.ended){i({show:!1,enabled:!1});return}i({show:!0,enabled:!1});try{const y=await fetch("/classroom/api/v1/student/review",{headers:{Accept:"application/json"},credentials:"include"});if(!y.ok)return;const v=await y.json();if(!g)return;const w=(Array.isArray(v)?v:[]).includes(a);i({show:!0,enabled:w})}catch{}})(),()=>{g=!1}},[s,a]);const u=`/classroom/student/${encodeURIComponent(a||"")}`,h=(g,b,y={})=>e.jsx("li",{className:"nav-item",children:e.jsx(ny,{end:y.end,className:({isActive:v})=>`nav-link${v?" active":""}`,to:g,children:b})},g),f=(g,b,y)=>{const v=y&&c===b,C=()=>d(b),w=()=>d(A=>A===b?null:A);return e.jsxs("li",{className:"nav-item position-relative",onMouseEnter:C,onMouseLeave:w,onFocus:C,onBlur:w,children:[e.jsx("span",{className:"nav-link disabled text-muted",style:{cursor:"not-allowed",pointerEvents:"auto"},role:"button","aria-disabled":"true",tabIndex:0,children:g}),v&&e.jsxs("div",{className:"position-absolute text-nowrap",style:{top:"100%",left:"50%",transform:"translate(-50%, 0.5rem)",backgroundColor:"#212529",color:"#fff",padding:"0.35rem 0.6rem",borderRadius:"0.375rem",fontSize:"0.8rem",boxShadow:"0 0.5rem 1rem rgba(0, 0, 0, 0.18)",whiteSpace:"nowrap",zIndex:1050,pointerEvents:"none"},role:"tooltip",children:[y,e.jsx("div",{style:{position:"absolute",top:"-0.4rem",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"0.4rem solid transparent",borderRight:"0.4rem solid transparent",borderBottom:"0.4rem solid #212529"}})]})]},b)};return e.jsxs("ul",{className:"nav nav-pills mb-4",children:[h(u,Ma.dashboard,{end:!0}),h(`${u}/board`,Ma.board),h(`${u}/attendance`,Ma.attendance),h(`${u}/exam`,Ma.exam),h(`${u}/task`,Ma.task),l.show&&e.jsxs(e.Fragment,{children:[l.enabled?h(`${u}/review`,Ma.review):f(Ma.review,"review","  "),l.enabled?f(Ma.grade,"grade","     "):h(`${u}/grade`,Ma.grade)]})]})}function xS(){const{lectureId:a}=dt();return e.jsxs(ko,{role:"student",lectureId:a,children:[e.jsx(gS,{}),e.jsx(sy,{})]})}const dx=a=>{if(!a)return"";const s=new Date(a);if(Number.isNaN(s.getTime()))return"";const l=i=>String(i).padStart(2,"0");return`${String(s.getFullYear()).slice(-2)}${l(s.getMonth()+1)}${l(s.getDate())} ${l(s.getHours())}:${l(s.getMinutes())}`},bS=({type:a})=>a==="NOTICE"?e.jsx("span",{className:"badge bg-warning text-dark border border-warning-subtle",children:""}):a==="MATERIAL"?e.jsx("span",{className:"badge bg-info text-dark border border-info-subtle",children:""}):e.jsx("span",{className:"badge text-bg-secondary",children:""}),yS=({post:a,lectureId:s,contextPath:l})=>{const i=`${l}/classroom/student/${s}/board/${a.lctPostId}`;return e.jsx("li",{className:"list-group-item py-2",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center gap-2",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[e.jsx(bS,{type:a.postType}),e.jsx(qe,{to:i,className:"fw-semibold text-decoration-none link-primary text-truncate",style:{maxWidth:"48ch"},children:a.title||"( )"})]}),e.jsxs("div",{className:"text-muted small d-flex align-items-center gap-2 text-nowrap",children:[a.revealAt&&e.jsxs("span",{children:[" : ",dx(a.revealAt)]}),e.jsx("span",{children:dx(a.createAt)})]})]})})},vS=({currentPage:a,totalPages:s,onPageChange:l})=>{if(s<=1)return null;const i=[];for(let c=1;c<=s;c++)i.push(c);return e.jsx("nav",{"aria-label":"Page navigation",children:e.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[e.jsx("li",{className:`page-item ${a===1?"disabled":""}`,children:e.jsx("a",{className:"page-link",href:"#",onClick:c=>{c.preventDefault(),l(a-1)},children:""})}),i.map(c=>e.jsx("li",{className:`page-item ${a===c?"active":""}`,children:e.jsx("a",{className:"page-link",href:"#",onClick:d=>{d.preventDefault(),l(c)},children:c})},c)),e.jsx("li",{className:`page-item ${a===s?"disabled":""}`,children:e.jsx("a",{className:"page-link",href:"#",onClick:c=>{c.preventDefault(),l(a+1)},children:""})})]})})};function jS(){const{lectureId:a}=dt(),[s,l]=x.useState([]),[i,c]=x.useState(!0),[d,u]=x.useState(null),[h,f]=x.useState(""),[g,b]=x.useState(""),[y,v]=x.useState("all"),[C,w]=x.useState(1),A=10,S="",E=`${S}/classroom/api/v1/student/board`;x.useEffect(()=>{(async()=>{c(!0);try{const X=await fetch(`${E}/${a}/post`);if(!X.ok)throw new Error("Network response was not ok");const T=await X.json();l(T)}catch(X){u(X)}finally{c(!1)}})()},[a,E]);const $=x.useMemo(()=>s.filter(z=>!(h&&z.postType!==h||g&&!z.title.toLowerCase().includes(g.toLowerCase()))).sort((z,X)=>new Date(X.createAt)-new Date(z.createAt)),[s,h,g]),D=(z,X)=>{v(z),f(X),w(1)},I=C*A,V=I-A,_=$.slice(V,I),B=Math.ceil($.length/A);return e.jsxs("section",{className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:""}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs("select",{className:"form-select form-select-sm",style:{minWidth:"120px"},value:h,onChange:z=>f(z.target.value),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"NOTICE",children:""}),e.jsx("option",{value:"MATERIAL",children:""})]}),e.jsxs("div",{className:"input-group input-group-sm",style:{minWidth:"220px"},children:[e.jsx("input",{type:"text",className:"form-control",placeholder:"/ ",value:g,onChange:z=>b(z.target.value)}),e.jsx("button",{className:"btn btn-outline-secondary",type:"button",children:""})]})]})]}),e.jsxs("section",{className:"mt-4",children:[e.jsxs("ul",{className:"nav nav-tabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx("button",{className:`nav-link ${y==="all"?"active":""}`,onClick:()=>D("all",""),type:"button",role:"tab",children:""})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx("button",{className:`nav-link ${y==="notice"?"active":""}`,onClick:()=>D("notice","NOTICE"),type:"button",role:"tab",children:""})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx("button",{className:`nav-link ${y==="material"?"active":""}`,onClick:()=>D("material","MATERIAL"),type:"button",role:"tab",children:""})})]}),e.jsx("div",{className:"tab-content border border-top-0 rounded-bottom",children:e.jsxs("div",{className:"tab-pane fade show active p-3",role:"tabpanel",children:[i&&e.jsx("p",{children:" ..."}),d&&e.jsx("p",{children:"  ."}),!i&&!d&&e.jsx("ul",{className:"list-group list-group-flush",children:_.map(z=>e.jsx(yS,{post:z,lectureId:a,contextPath:S},z.lctPostId))}),$.length===0&&!i&&e.jsx("p",{children:"  ."})]})})]}),e.jsx("nav",{className:"mt-3","aria-label":"  ",children:e.jsx(vS,{currentPage:C,totalPages:B,onPageChange:w})})]})}const NS=()=>{const{lectureId:a}=dt(),[s,l]=x.useState(null),[i,c]=x.useState(!0),[d,u]=x.useState(null),f="/classroom/api/v1/student";x.useEffect(()=>{(async()=>{c(!0);try{const v=await fetch(`${f}/${a}/attendance`);if(!v.ok)throw new Error("Failed to fetch attendance data");const C=await v.json(),w=C.length;let A=0,S=0,E=0;C.forEach($=>{$.attStatusCd==="ATTD_OK"?A++:$.attStatusCd==="ATTD_LATE"?S++:$.attStatusCd==="ATTD_NO"&&E++}),l({summary:{totalLectures:w,attended:A,tardy:S,absent:E},details:C})}catch(v){u(v.message)}finally{c(!1)}})()},[a,f]);const g=()=>{if(!s||!s.summary)return null;const{totalLectures:y,attended:v,tardy:C,absent:w}=s.summary,A=y>0?(v/y*100).toFixed(1):0;return e.jsxs("div",{className:"mb-4",children:[e.jsxs("p",{className:"text-muted mb-0",children:[" : ",y,""]}),e.jsxs("p",{className:"text-muted mb-0",children:[": ",v,""]}),e.jsxs("p",{className:"text-muted mb-0",children:[": ",C,""]}),e.jsxs("p",{className:"text-muted mb-0",children:[": ",w,""]}),e.jsxs("p",{className:"fw-bold",children:[": ",A,"%"]})]})},b=()=>!s||!s.details||s.details.length===0?e.jsx("p",{children:"   ."}):e.jsx("ul",{className:"list-group",children:s.details.map((y,v)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("span",{children:[y.lctPrintRound," - ",y.attDay]}),e.jsx("span",{className:`badge ${y.attStatusName===""?"bg-success":y.attStatusName===""?"bg-warning text-dark":"bg-danger"}`,children:y.attStatusName})]},v))});return e.jsx("section",{className:"container py-4",children:e.jsx("div",{className:"row justify-content-center",children:e.jsxs("div",{className:"col-lg-10 col-xl-8",children:[e.jsxs("header",{className:"d-flex flex-wrap align-items-center justify-content-between gap-2 mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"h3 mb-1",children:" "}),e.jsx("p",{className:"text-muted mb-0",children:"    ."})]}),e.jsx("div",{id:"attendance-total-badge",className:"badge bg-primary-subtle text-primary-emphasis fs-6 rounded-pill",children:i?" ...":d?"":s?.summary?`: ${(s.summary.attended/s.summary.totalLectures*100).toFixed(1)}%`:""})]}),i&&e.jsx("div",{className:"card shadow-sm",children:e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-center text-muted py-5",children:[e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]})})}),e.jsx("div",{id:"attendance-alert",className:`alert alert-danger ${d?"":"d-none"}`,role:"alert",children:d}),!i&&!d&&s&&e.jsx("div",{className:"card shadow-sm",children:e.jsxs("div",{className:"card-body",children:[g(),e.jsx("hr",{}),b()]})})]})})})},_c=a=>String(a).padStart(2,"0"),Zu=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${_c(s.getMonth()+1)}-${_c(s.getDate())} ${_c(s.getHours())}:${_c(s.getMinutes())}`},SS=(a,s)=>{const l=Date.now(),i=a?new Date(a).getTime():null,c=s?new Date(s).getTime():null;return i&&l<i?"upcoming":i&&(!c||l<=c)?"ongoing":c&&l>c?"closed":"unknown"},wS=a=>{switch(a){case"ongoing":return e.jsx("span",{className:"badge text-bg-success",children:" "});case"upcoming":return e.jsx("span",{className:"badge text-bg-secondary",children:""});case"closed":return e.jsx("span",{className:"badge text-bg-dark",children:""});default:return e.jsx("span",{className:"badge text-bg-light text-muted",children:"-"})}},CS={OFF:"",ON:""},ux=["ongoing","upcoming","closed","all"],AS={ongoing:" ",upcoming:"",closed:"",all:""},ES={ongoing:"   .",upcoming:"  .",closed:"  .",all:"  ."};function TS(){const{lectureId:a}=dt(),[s,l]=x.useState([]),[i,c]=x.useState(!0),[d,u]=x.useState(""),[h,f]=x.useState("ongoing");x.useEffect(()=>{let S=!0;return(async()=>{if(!a){u("    ."),c(!1);return}try{c(!0),u("");const $=await fetch(`/classroom/api/v1/student/${encodeURIComponent(a)}/exam`,{headers:{Accept:"application/json"},credentials:"include"});if(!$.ok){const I=await $.text().catch(()=>"");throw new Error(I||`(${$.status})    .`)}const D=await $.json();if(!S)return;l(Array.isArray(D)?D:[])}catch($){if(!S)return;u($ instanceof Error?$.message:"     ."),l([])}finally{S&&c(!1)}})(),()=>{S=!1}},[a]);const g=x.useMemo(()=>s.map(S=>({...S,status:SS(S.startAt,S.endAt)})),[s]),b=x.useMemo(()=>{const S={ongoing:[],upcoming:[],closed:[],all:[]};return g.forEach(E=>{S.all.push(E),S[E.status]&&S[E.status].push(E)}),S},[g]),y=x.useMemo(()=>Object.fromEntries(ux.map(S=>[S,b[S]?.length||0])),[b]),v=S=>{f(S)},C=b[h]||[],w=ES[h]||"  .",A=`/classroom/student/${encodeURIComponent(a||"")}`;return e.jsxs("section",{className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:""}),e.jsx("p",{className:"text-muted small mb-0",children:"       ."})]}),d&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:d}),e.jsx("div",{className:"card shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"d-flex flex-wrap gap-2 mb-3",children:ux.map(S=>e.jsxs("button",{type:"button",className:`btn btn-sm ${h===S?"btn-primary":"btn-outline-secondary"}`,onClick:()=>v(S),children:[AS[S]," ",e.jsx("span",{className:"badge bg-light text-dark ms-1",children:y[S]??0})]},S))}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"30%"},children:""}),e.jsx("th",{style:{width:"10%"},children:""}),e.jsx("th",{style:{width:"20%"},children:" "}),e.jsx("th",{style:{width:"10%"},children:""}),e.jsx("th",{style:{width:"10%"},children:" "}),e.jsx("th",{style:{width:"10%"},children:" "}),e.jsx("th",{style:{width:"10%"},className:"text-center",children:""})]})}),e.jsx("tbody",{children:i?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:" ..."})}):C.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:w})}):C.sort((S,E)=>{const $=S.startAt?new Date(S.startAt).getTime():0;return(E.startAt?new Date(E.startAt).getTime():0)-$}).map(S=>{const E=`${Zu(S.startAt)} ~ ${Zu(S.endAt)}`;return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold",children:S.examName}),e.jsxs("div",{className:"text-muted small",children:[" ",Zu(S.createAt)]})]}),e.jsx("td",{children:CS[S.examType]||""}),e.jsx("td",{className:"text-muted small",children:E}),e.jsx("td",{children:Number.isFinite(Number(S.weightValue))?`${S.weightValue}%`:"-"}),e.jsx("td",{children:wS(S.status)}),e.jsx("td",{children:S.submitted?e.jsx("span",{className:"badge text-bg-success",children:" "}):e.jsx("span",{className:"badge text-bg-secondary",children:""})}),e.jsx("td",{className:"text-center",children:e.jsx(qe,{className:"btn btn-sm btn-outline-primary",to:`${A}/exam/${encodeURIComponent(S.lctExamId)}`,children:""})})]},S.lctExamId)})})]})})]})})]})}const kc=a=>String(a).padStart(2,"0"),Dc=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${kc(s.getMonth()+1)}-${kc(s.getDate())} ${kc(s.getHours())}:${kc(s.getMinutes())}`},_S={OFF:"",ON:""};function kS(){const{lectureId:a,examId:s}=dt(),[l,i]=x.useState(null),[c,d]=x.useState(!0),[u,h]=x.useState("");x.useEffect(()=>{let A=!0;return(async()=>{if(!a||!s){h("    ."),d(!1);return}try{d(!0),h("");const E=await fetch(`/classroom/api/v1/student/${encodeURIComponent(a)}/exam/${encodeURIComponent(s)}`,{headers:{Accept:"application/json"},credentials:"include"});if(!E.ok){const D=await E.text().catch(()=>"");throw new Error(D||`(${E.status})    .`)}const $=await E.json();if(!A)return;i($||null)}catch(E){if(!A)return;h(E instanceof Error?E.message:"     ."),i(null)}finally{A&&d(!1)}})(),()=>{A=!1}},[a,s]);const f=x.useMemo(()=>!l?.submitList||!Array.isArray(l.submitList)?null:(l.submitList.find(S=>S?.submit)||l.submitList[0])?.submit||null,[l]),g=f?.submitAt?Dc(f.submitAt):null,b=f?.autoScore,y=f?.modifiedScore,v=y??b,C=typeof y=="number"&&!Number.isNaN(y),w=`/classroom/student/${encodeURIComponent(a||"")}/exam`;return e.jsxs("section",{className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{to:w,children:""})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:" "})]})}),e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",to:w,children:""})]}),u&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:u}),e.jsx("div",{className:"card shadow-sm mb-4",children:e.jsx("div",{className:"card-body",children:c?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h4 placeholder-glow",children:e.jsx("span",{className:"placeholder col-6"})}),e.jsxs("div",{className:"placeholder-glow",children:[e.jsx("span",{className:"placeholder col-3 me-2"}),e.jsx("span",{className:"placeholder col-3 me-2"}),e.jsx("span",{className:"placeholder col-3"})]})]}):l?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h4 mb-3",children:l.examName||"  "}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{children:_S[l.examType]||""})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{children:Number.isFinite(Number(l.weightValue))?`${l.weightValue}%`:"-"})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsxs("div",{children:[Dc(l.startAt)," ~ ",Dc(l.endAt)]})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{children:Dc(l.createAt)})]})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"text-break",dangerouslySetInnerHTML:{__html:l.examDesc||'<p class="text-muted mb-0">  .</p>'}})]}):e.jsx("p",{className:"text-muted mb-0",children:"    ."})})}),e.jsxs("div",{className:"card shadow-sm",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:"  "})}),e.jsx("div",{className:"card-body",children:c?e.jsx("p",{className:"text-muted placeholder-glow",children:e.jsx("span",{className:"placeholder col-3"})}):f?e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{children:g||"  "})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsxs("div",{children:[typeof v=="number"?`${v}`:"  ",C&&typeof b=="number"&&e.jsxs("span",{className:"text-muted small ms-2",children:["( ",b,")"]})]})]}),typeof b=="number"&&!C&&e.jsxs("div",{className:"col-12",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{children:l.examType==="ON"?"   .":"  ."})]}),C&&e.jsxs("div",{className:"col-12",children:[e.jsx("div",{className:"small text-muted",children:"  "}),e.jsx("div",{children:f.modifyReason||"  ."})]})]}):e.jsx("p",{className:"text-muted mb-0",children:"  ."})})]})]})}const et={breadcrumbLabel:"",detailLabel:" ",back:"",taskLoading:" ...",taskLoadFailed:"   .",attachments:"",submitStatus:" ",submitHistoryLoading:"   ...",submitNotFound:"  .",submitButtonNew:"",submitButtonEdit:" ",formTitleNew:" ",formTitleEdit:" ",formDescription:"",formFiles:" ",existingFiles:"  ",newFiles:"  ",fileGuide:"      .",submit:"",cancel:"",scoreLabel:"",feedbackLabel:" ",evaluatedAtLabel:"",submittedAtLabel:"",descriptionLabel:" ",noFiles:"  .",download:"",uploadSuccess:" .",uploadError:"  .",submitSuccess:" .",submitError:"    .",invalidLecture:"      .",fileLimit:" 5   ."},Mc=a=>String(a).padStart(2,"0"),Bi=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${Mc(s.getMonth()+1)}-${Mc(s.getDate())} ${Mc(s.getHours())}:${Mc(s.getMinutes())}`},DS=a=>{const s=a.bundleId||a.fileId||Array.isArray(a.fileIds)&&a.fileIds[0]||Array.isArray(a.files)&&a.files[0]?.fileId||Array.isArray(a.details)&&a.details[0]?.fileId||"",l=Array.isArray(a.files)&&a.files||Array.isArray(a.details)&&a.details||[];return{fileId:s||"",details:l}},MS=(a,s,l)=>`/classroom/api/v1/common/task/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}/attach/${encodeURIComponent(String(l))}`,RS=(a,s,l,i)=>l?`/classroom/api/v1/common/${encodeURIComponent(a)}/indivtask/${encodeURIComponent(s)}/submit/${encodeURIComponent(l)}/attach/${encodeURIComponent(String(i))}`:"#";function $S(){const{lectureId:a,indivtaskId:s}=dt(),l=a||"",i=s||"",[c,d]=x.useState(null),[u,h]=x.useState(null),[f,g]=x.useState(!0),[b,y]=x.useState(""),[v,C]=x.useState(!1),[w,A]=x.useState(""),[S,E]=x.useState(""),[$,D]=x.useState([]),[I,V]=x.useState([]),[_,B]=x.useState(!1),[z,X]=x.useState(""),[T,W]=x.useState(""),[F,Q]=x.useState(""),O=x.useRef(null),Y=encodeURIComponent(l),N=encodeURIComponent(i),M=x.useMemo(()=>!l||!i?null:`/classroom/api/v1/student/${Y}/task/indiv/${N}`,[l,i,Y,N]),L=x.useMemo(()=>{if(!c?.studentSubmitList||c.studentSubmitList.length===0)return null;const oe=[...c.studentSubmitList].sort((be,J)=>{const re=be.submitAt?new Date(be.submitAt).getTime():0,Ee=J.submitAt?new Date(J.submitAt).getTime():0;return re-Ee});return oe[oe.length-1]},[c]),U=x.useCallback(async()=>{if(!M){y(et.invalidLecture),g(!1);return}try{g(!0),y("");const[oe,be]=await Promise.all([fetch(M,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/student/${Y}/me`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!oe.ok){const Ee=await oe.text().catch(()=>"");throw new Error(`(${oe.status}) ${Ee||et.taskLoadFailed}`)}if(!be.ok){const Ee=await be.text().catch(()=>"");throw new Error(`(${be.status}) ${Ee||et.taskLoadFailed}`)}const J=await oe.json(),re=await be.json();d(J),h(re)}catch(oe){y(oe instanceof Error?oe.message:et.taskLoadFailed),d(null)}finally{g(!1)}},[M,Y]);x.useEffect(()=>{U()},[U]);const P=()=>{if(X(""),W(""),Q(""),L){A(L.submitDesc||"");const oe=Array.isArray(L.submitFiles)&&L.submitFiles[0]?.fileId||"";E(oe),D(Array.isArray(L.submitFiles)?L.submitFiles:[])}else A(""),E(""),D([]);V([]),O.current&&(O.current.value=""),C(!0)},k=()=>{C(!1),W(""),X(""),Q(""),V([]),O.current&&(O.current.value="")},G=async oe=>{const be=Array.from(oe.target.files||[]);if(W(""),X(""),be.length!==0){if(!l){W(et.invalidLecture);return}if(be.length>5){W(et.fileLimit),oe.target.value="";return}try{B(!0);const J=new FormData;be.forEach(Me=>J.append("files",Me));const re=`/classroom/api/v1/common/${Y}/upload?type=task`,Ee=await fetch(re,{method:"POST",body:J,credentials:"include"});if(!Ee.ok){const Me=await Ee.text().catch(()=>"");throw new Error(Me||et.uploadError)}const $e=await Ee.json(),{fileId:ue,details:fe}=DS($e);E(ue),V(fe),X(et.uploadSuccess),D([])}catch(J){W(J instanceof Error?J.message:et.uploadError)}finally{B(!1),oe.target&&(oe.target.value="")}}},se=async oe=>{if(oe.preventDefault(),!M){W(et.invalidLecture);return}try{B(!0),W(""),X("");const J=await fetch(M,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({submitDesc:w,submitFileId:S||null})});if(J.status!==204){const re=await J.text().catch(()=>"");throw new Error(re||et.submitError)}X(et.submitSuccess),Q(et.submitSuccess),C(!1),V([]),O.current&&(O.current.value=""),await U()}catch(be){W(be instanceof Error?be.message:et.submitError)}finally{B(!1)}},q=()=>e.jsxs("div",{className:"placeholder-glow",children:[e.jsx("h1",{className:"h4 mb-3 placeholder col-8"}),e.jsxs("div",{className:"d-flex flex-wrap gap-3 text-muted small mb-3",children:[e.jsx("span",{className:"placeholder col-3"}),e.jsx("span",{className:"placeholder col-4"}),e.jsx("span",{className:"placeholder col-4"})]}),e.jsx("hr",{}),e.jsx("div",{className:"placeholder col-12",style:{height:120}})]}),ee=!!(c?.attachFileList&&c.attachFileList.length>0),te=L?et.submitButtonEdit:et.submitButtonNew,me=L?et.formTitleEdit:et.formTitleNew;return e.jsxs("section",{id:"post-root",className:"container py-4","data-lecture-id":l,"data-task-id":i,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{to:`/classroom/student/${encodeURIComponent(l)}/task`,children:et.breadcrumbLabel})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:et.detailLabel})]})}),e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/student/${encodeURIComponent(l)}/task`,children:et.back})]}),b&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:b}),e.jsxs("div",{className:"card shadow-sm mb-4",children:[e.jsxs("div",{className:"card-body",id:"task-body",children:[f&&q(),!f&&c&&e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h4 mb-3",children:c.indivtaskName}),e.jsxs("div",{className:"d-flex flex-wrap gap-3 text-muted small mb-3",children:[e.jsxs("span",{children:[e.jsx("strong",{children:""}),": ",Bi(c.createAt)]}),e.jsxs("span",{children:[e.jsx("strong",{children:""}),": ",Bi(c.startAt)]}),e.jsxs("span",{children:[e.jsx("strong",{children:""}),": ",Bi(c.endAt)]})]}),e.jsx("hr",{}),e.jsx("article",{className:"task-content mb-4",dangerouslySetInnerHTML:{__html:c.indivtaskDesc||"( )"}})]}),!f&&!c&&e.jsx("div",{className:"text-muted",children:et.taskLoadFailed})]}),!f&&ee&&e.jsxs("div",{className:"card-footer border-top",id:"attach-area",children:[e.jsx("h2",{className:"h6 mb-2",children:et.attachments}),e.jsx("ul",{className:"list-group list-group-flush",id:"attach-list",children:c.attachFileList.map((oe,be)=>{const J=oe.originalFileName||oe.originName||` ${oe.fileOrder??be+1}`,re=typeof oe.fileSize=="number"?` (${(oe.fileSize/1024).toFixed(2)} KB)`:"",Ee=MS(l,i,oe.fileOrder??be+1);return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[e.jsx("i",{className:"bi bi-paperclip me-1"}),J,e.jsx("small",{className:"text-muted",children:re})]}),e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:Ee,children:et.download})]},`task-attach-${oe.fileOrder??be}`)})})]})]}),!v&&e.jsxs("div",{className:"card shadow-sm mb-4",id:"submission-status-card",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"h5 mb-0",children:et.submitStatus}),e.jsx("button",{type:"button",id:"show-submit-form-btn",className:"btn btn-primary btn-sm",onClick:P,disabled:f||_,children:te})]}),e.jsxs("div",{className:"card-body",id:"submission-history-body",children:[F&&e.jsx("div",{className:"alert alert-success",role:"alert",children:F}),f&&e.jsx("p",{className:"text-muted",children:et.submitHistoryLoading}),!f&&!L&&e.jsx("p",{className:"text-muted",children:et.submitNotFound}),!f&&L&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{children:[e.jsxs("strong",{children:[et.submittedAtLabel,":"]})," ",Bi(L.submitAt)]}),e.jsx("p",{className:"mb-1",children:e.jsxs("strong",{children:[et.descriptionLabel,":"]})}),e.jsx("div",{className:"p-2 bg-body-secondary rounded",children:L.submitDesc||"-"}),e.jsx("h6",{className:"mt-3 mb-2",children:et.attachments}),e.jsx("ul",{className:"list-group mb-3",children:Array.isArray(L.submitFiles)&&L.submitFiles.length>0?L.submitFiles.map((oe,be)=>{const J=oe.originalFileName||oe.originName||` ${oe.fileOrder??be+1}`,re=typeof oe.fileSize=="number"?` (${(oe.fileSize/1024).toFixed(2)} KB)`:"",Ee=RS(l,i,u?.studentNo,oe.fileOrder??be+1);return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[e.jsx("i",{className:"bi bi-paperclip me-1"}),J,e.jsx("small",{className:"text-muted",children:re})]}),e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:Ee,children:et.download})]},`submit-file-${oe.fileOrder??be}`)}):e.jsx("li",{className:"list-group-item text-muted",children:et.noFiles})}),L.evaluAt&&e.jsxs("div",{className:"mt-3 p-3 bg-light rounded",children:[e.jsx("h6",{className:"mb-2",children:et.feedbackLabel}),e.jsxs("p",{className:"mb-1",children:[e.jsxs("strong",{children:[et.scoreLabel,":"]})," ",L.evaluScore??"-"]}),e.jsxs("p",{className:"mb-1",children:[e.jsxs("strong",{children:[et.feedbackLabel,":"]})," ",L.evaluDesc||"-"]}),e.jsxs("p",{className:"small text-muted mb-0",children:[et.evaluatedAtLabel,": ",Bi(L.evaluAt)]})]})]})]})]}),v&&e.jsxs("div",{className:"card shadow-sm mb-4",id:"submission-form-card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h5 mb-0",id:"submit-form-title",children:me})}),e.jsxs("div",{className:"card-body",children:[T&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:T}),z&&e.jsx("div",{className:"alert alert-success",role:"alert",children:z}),e.jsxs("form",{id:"submit-form",onSubmit:se,children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"submit-desc",className:"form-label",children:et.formDescription}),e.jsx("textarea",{className:"form-control",id:"submit-desc",rows:4,placeholder:"   .",value:w,onChange:oe=>A(oe.target.value)})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"submit-file-input",className:"form-label",children:et.formFiles}),$.length>0&&I.length===0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label text-muted small",children:et.existingFiles}),e.jsx("ul",{className:"list-group",children:$.map((oe,be)=>{const J=oe.originalFileName||oe.originName||` ${oe.fileOrder??be+1}`,re=typeof oe.fileSize=="number"?` (${(oe.fileSize/1024).toFixed(2)} KB)`:"";return e.jsxs("li",{className:"list-group-item list-group-item-light d-flex justify-content-between align-items-center",children:[e.jsx("span",{children:J}),e.jsx("small",{className:"text-muted",children:re})]},`existing-${oe.fileOrder??be}`)})})]}),I.length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"form-label text-muted small",children:et.newFiles}),e.jsx("ul",{className:"list-group",children:I.map((oe,be)=>{const J=oe.originalName||oe.originName||oe.originalFileName||` ${oe.fileOrder??be+1}`,re=typeof oe.fileSize=="number"?` (${(oe.fileSize/1024).toFixed(2)} KB)`:"";return e.jsxs("li",{className:"list-group-item list-group-item-light d-flex justify-content-between align-items-center",children:[e.jsx("span",{children:J}),e.jsx("small",{className:"text-muted",children:re})]},`uploaded-${oe.fileId??be}`)})})]}),e.jsx("input",{className:"form-control",type:"file",id:"submit-file-input",ref:O,multiple:!0,onChange:G,disabled:_}),e.jsx("div",{className:"form-text",children:et.fileGuide})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",id:"cancel-submit-btn",className:"btn btn-secondary",onClick:k,disabled:_,children:et.cancel}),e.jsx("button",{type:"submit",className:"btn btn-primary",id:"submit-button",disabled:_,children:_?et.taskLoading:et.submit})]})]})]})]})]})}const Ki=[{key:"all",label:""},{key:"upcoming",label:""},{key:"ongoing",label:""},{key:"closed",label:""}],Ll=10,Fi=()=>({all:[],upcoming:[],ongoing:[],closed:[]}),Rc=()=>({all:1,upcoming:1,ongoing:1,closed:1}),$c=a=>String(a).padStart(2,"0"),Ju=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${$c(s.getMonth()+1)}-${$c(s.getDate())} ${$c(s.getHours())}:${$c(s.getMinutes())}`},OS=a=>{const s=Date.now(),l=a.startAt?new Date(a.startAt).getTime():null,i=a.endAt?new Date(a.endAt).getTime():null;return l&&l>s?"upcoming":i&&i<s?"closed":"ongoing"},IS=a=>({type:"indiv",id:a.indivtaskId,name:a.indivtaskName,createAt:a.createAt,startAt:a.startAt,endAt:a.endAt,hasAttachFile:!!a.hasAttachFile,submitted:!!a.submitted}),LS=a=>({type:"group",id:a.grouptaskId,name:a.grouptaskName,createAt:a.createAt,startAt:a.startAt,endAt:a.endAt,hasAttachFile:!!a.hasAttachFile,submitted:!!a.submitted,target:!!a.target}),zS=a=>{const[s,l]=x.useState(!0),[i,c]=x.useState(""),[d,u]=x.useState(Fi),[h,f]=x.useState(Fi);return x.useEffect(()=>{let g=!0;return(async()=>{if(!a){c("    ."),l(!1);return}try{l(!0),c("");const y={headers:{Accept:"application/json"},credentials:"include"},v=`/classroom/api/v1/student/${encodeURIComponent(a)}/task`,[C,w]=await Promise.all([fetch(`${v}/indiv`,y),fetch(`${v}/group`,y)]);if(!g)return;if(!C.ok)throw new Error(`(${C.status})    .`);if(!w.ok)throw new Error(`(${w.status})    .`);const A=await C.json().catch(()=>[]),S=await w.json().catch(()=>[]);if(!g)return;const E=($,D)=>{const I=(Array.isArray($)?$:[]).map(D);I.sort((_,B)=>{const z=_.createAt?new Date(_.createAt).getTime():0;return(B.createAt?new Date(B.createAt).getTime():0)-z});const V=Fi();for(const _ of I){const B=OS(_);V.all.push(_),V[B]&&V[B].push(_)}return V};u(()=>E(A,IS)),f(()=>E(S,LS))}catch(y){if(!g)return;c(y instanceof Error?y.message:"    ."),u(Fi),f(Fi)}finally{g&&l(!1)}})(),()=>{g=!1}},[a]),{loading:s,error:i,indivBuckets:d,groupBuckets:h}},hx=({totalCount:a,pageSize:s,currentPage:l,onChange:i,label:c})=>{const d=Math.max(1,Math.ceil(a/s));if(d<=1)return null;const u=[],h=(f,g,b=!1,y=!1,v)=>{u.push(e.jsx("li",{className:`page-item${b?" disabled":""}${y?" active":""}`,children:e.jsx("button",{type:"button",className:"page-link",onClick:()=>{b||i(f)},children:g})},v??g))};h(Math.max(1,l-1),"",l===1,!1,"prev");for(let f=1;f<=d;f+=1)h(f,String(f),!1,f===l);return h(Math.min(d,l+1),"",l===d,!1,"next"),e.jsx("nav",{className:"mt-3","aria-label":c,children:e.jsx("ul",{className:"pagination pagination-sm mb-0",children:u})})},mx=({lectureId:a,tasks:s,loading:l})=>l?e.jsx("div",{className:"text-muted p-3 text-center",children:" ..."}):!s||s.length===0?e.jsx("div",{className:"text-muted p-3 text-center",children:"  ."}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-light",children:[e.jsx("th",{style:{width:"60%"},children:""}),e.jsx("th",{className:"text-center",style:{width:"20%"},children:" "}),e.jsx("th",{className:"text-center d-none d-md-table-cell",style:{width:"20%"},children:""})]})}),e.jsx("tbody",{children:s.map(i=>{const c=`/classroom/student/${encodeURIComponent(a||"")}/task/${i.type}/${encodeURIComponent(i.id)}`;return e.jsxs("tr",{children:[e.jsx("td",{className:"align-middle",children:e.jsxs(qe,{to:c,className:"text-decoration-none d-block",children:[e.jsx("div",{className:"fw-bold",children:i.name||"-"}),e.jsx("div",{className:"small text-muted",children:`${Ju(i.startAt)} ~ ${Ju(i.endAt)}`})]})}),e.jsx("td",{className:"align-middle text-center",children:i.type==="group"&&i.target===!1?e.jsx("span",{className:"badge bg-secondary",children:""}):e.jsx("span",{className:`badge ${i.submitted?"bg-primary":"bg-secondary"}`,children:i.submitted?" ":""})}),e.jsx("td",{className:"align-middle text-center d-none d-md-table-cell",children:Ju(i.createAt)})]},`${i.type}-${i.id}`)})})]})}),fx=({scope:a,activeKey:s,onChange:l,counts:i})=>e.jsx("ul",{className:"nav nav-pills mb-3",id:`${a}-status-tabs`,role:"tablist",children:Ki.map(c=>e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:`nav-link${s===c.key?" active":""}`,id:`${a}-${c.key}-tab`,type:"button",role:"tab","aria-selected":s===c.key,onClick:()=>l(c.key),children:[c.label,e.jsx("span",{className:"badge bg-secondary ms-1",id:`${a}-count-${c.key}`,children:i[c.key]??0})]})},c.key))});function US(){const{lectureId:a}=dt(),{loading:s,error:l,indivBuckets:i,groupBuckets:c}=zS(a),[d,u]=x.useState("all"),[h,f]=x.useState("all"),[g,b]=x.useState(Rc),[y,v]=x.useState(Rc);x.useEffect(()=>{b(Rc()),v(Rc()),u("all"),f("all")},[a,i.all.length,c.all.length]);const C=x.useMemo(()=>Ki.reduce((D,I)=>(D[I.key]=i[I.key]?.length??0,D),{}),[i]),w=x.useMemo(()=>Ki.reduce((D,I)=>(D[I.key]=c[I.key]?.length??0,D),{}),[c]),A=x.useMemo(()=>{const D=i[d]??[],V=((g[d]??1)-1)*Ll;return D.slice(V,V+Ll)},[i,d,g]),S=x.useMemo(()=>{const D=c[h]??[],V=((y[h]??1)-1)*Ll;return D.slice(V,V+Ll)},[c,h,y]),E=D=>{u(D),b(I=>({...I,[D]:1}))},$=D=>{f(D),v(I=>({...I,[D]:1}))};return e.jsxs("section",{id:"task-root",className:"container py-4","data-lecture-id":a||"","data-api":`/classroom/api/v1/student/${encodeURIComponent(a||"")}/task`,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:""}),e.jsx("p",{className:"text-muted small mb-0",children:"       ."})]}),e.jsxs("div",{className:"row g-4 align-items-start",children:[e.jsx("div",{className:"col-12 col-xl-6",children:e.jsxs("div",{className:"card shadow-sm",children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h5 mb-0",children:" "}),e.jsx("div",{className:"small text-muted",children:":  /  / "})]}),e.jsxs("div",{className:"card-body",children:[e.jsx(fx,{scope:"indiv",activeKey:d,onChange:E,counts:C}),e.jsx("div",{className:"tab-content",id:"indiv-status-content",children:Ki.map(D=>{const I=d===D.key,V=`indiv-${D.key}`,_=g[D.key]??1;return e.jsx("div",{id:V,role:"tabpanel","aria-labelledby":`${V}-tab`,className:`tab-pane fade${I?" show active":""}`,children:I?e.jsxs(e.Fragment,{children:[e.jsx(mx,{lectureId:a,tasks:A,loading:s}),e.jsx(hx,{totalCount:C[D.key]||0,pageSize:Ll,currentPage:_,onChange:B=>b(z=>({...z,[D.key]:B})),label:"    "})]}):null},D.key)})})]})]})}),e.jsx("div",{className:"col-12 col-xl-6",children:e.jsxs("div",{className:"card shadow-sm",children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h5 mb-0",children:" "}),e.jsx("div",{className:"small text-muted",children:":  /  / "})]}),e.jsxs("div",{className:"card-body",children:[e.jsx(fx,{scope:"group",activeKey:h,onChange:$,counts:w}),e.jsx("div",{className:"tab-content",id:"group-status-content",children:Ki.map(D=>{const I=h===D.key,V=`group-${D.key}`,_=y[D.key]??1;return e.jsx("div",{id:V,role:"tabpanel","aria-labelledby":`${V}-tab`,className:`tab-pane fade${I?" show active":""}`,children:I?e.jsxs(e.Fragment,{children:[e.jsx(mx,{lectureId:a,tasks:S,loading:s}),e.jsx(hx,{totalCount:w[D.key]||0,pageSize:Ll,currentPage:_,onChange:B=>v(z=>({...z,[D.key]:B})),label:"    "})]}):null},D.key)})})]})]})})]}),l&&e.jsx("div",{id:"task-notice-box",className:"alert alert-danger mt-3",role:"alert",children:l})]})}const Oc=a=>String(a).padStart(2,"0"),Hi=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${Oc(s.getMonth()+1)}-${Oc(s.getDate())} ${Oc(s.getHours())}:${Oc(s.getMinutes())}`};function BS(){const{lectureId:a,grouptaskId:s}=dt(),{students:l,setStudents:i}=cs(),[c,d]=x.useState(null),[u,h]=x.useState(null),[f,g]=x.useState(null),[b,y]=x.useState(Array.isArray(l)?l:[]),[v,C]=x.useState(!0),[w,A]=x.useState(!0),[S,E]=x.useState(""),[$,D]=x.useState(!1),[I,V]=x.useState(0),[_,B]=x.useState(!1),[z,X]=x.useState(""),[T,W]=x.useState(""),[F,Q]=x.useState([]),[O,Y]=x.useState(!1),[N,M]=x.useState(""),[L,U]=x.useState(""),P=x.useRef(null),k=a?encodeURIComponent(a):"",G=s?encodeURIComponent(s):"",se=ge=>{const Le=ge.bundleId||ge.fileId||Array.isArray(ge.fileIds)&&ge.fileIds[0]||Array.isArray(ge.files)&&ge.files[0]?.fileId||Array.isArray(ge.details)&&ge.details[0]?.fileId||"",ce=Array.isArray(ge.files)&&ge.files||Array.isArray(ge.details)&&ge.details||[];return{fileId:Le,details:ce}};x.useEffect(()=>{let ge=!0;return(async()=>{if(!a||!s){E("    ."),C(!1);return}try{C(!0),E("");const ce=encodeURIComponent(a),Se=encodeURIComponent(s),[we,Ve]=await Promise.all([fetch(`/classroom/api/v1/student/${ce}/task/group/${Se}`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/student/${ce}/me`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!we.ok){const Fe=await we.text().catch(()=>"");throw new Error(Fe||`(${we.status})    .`)}const Xe=await we.json(),Ke=Ve.ok?await Ve.json():null;if(!ge)return;d(Xe||null),h(Ke||null)}catch(ce){if(!ge)return;E(ce instanceof Error?ce.message:"     ."),d(null)}finally{ge&&C(!1)}})(),()=>{ge=!1}},[a,s,I]),x.useEffect(()=>{let ge=!0;return(async()=>{if(!a||!s){A(!1);return}try{A(!0);const ce=encodeURIComponent(a),Se=encodeURIComponent(s),we=await fetch(`/classroom/api/v1/student/${ce}/task/group/${Se}/jo`,{headers:{Accept:"application/json"},credentials:"include"});if(!we.ok){if(we.status===404){if(!ge)return;g(null);return}const Xe=await we.text().catch(()=>"");throw new Error(Xe||`(${we.status})    .`)}const Ve=await we.json();if(!ge)return;g(Ve||null)}catch(ce){if(!ge)return;console.error(ce),g(null)}finally{ge&&A(!1)}})(),()=>{ge=!1}},[a,s,I]),x.useEffect(()=>{if(Array.isArray(b)&&b.length>0)return;let ge=!0;return(async()=>{if(a)try{D(!0);const ce=await fetch(`/classroom/api/v1/student/${encodeURIComponent(a)}/students`,{headers:{Accept:"application/json"},credentials:"include"});if(!ce.ok)return;const Se=await ce.json();if(!ge)return;const we=Array.isArray(Se)?Se:[];y(we),i&&i(we)}finally{ge&&D(!1)}})(),()=>{ge=!1}},[a,b,i]);const q=x.useMemo(()=>new Map((b||[]).map(ge=>[ge.enrollId,ge])),[b]),ee=u?.enrollId,te=f?.leaderEnrollId,me=x.useMemo(()=>f?.crewList?f.crewList.map(ge=>{const Le=q.get(ge.enrollId)||{},ce=`${Le.lastName||""}${Le.firstName||""}`.trim()||Le.studentName||"-",Se=Le.studentNo||"-";return{enrollId:ge.enrollId,name:ce,studentNo:Se,isLeader:ge.enrollId===te,isSelf:ge.enrollId===ee,evaluScore:ge.evaluScore,evaluDesc:ge.evaluDesc,evaluAt:ge.evaluAt,initial:(ce||"?").charAt(0)}}):[],[f,q,te,ee]),oe={submitDesc:f?.submitDesc,submitFileId:f?.submitFileId,submitAt:f?.submitAt},be=Array.isArray(c?.attachFileList)?c.attachFileList:[],J=oe?.submitDesc,re=oe?.submitAt?Hi(oe.submitAt):null,Ee=!!(ee&&te&&ee===te),$e="/classroom/api/v1/common/task",ue="/classroom/api/v1/student",fe=(ge,Le)=>{const ce=ge.fileOrder??Le;return`${$e}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}/attach/${encodeURIComponent(ce)}`},Me=oe?.submitFileId&&f?.groupId?`${ue}/${k}/task/group/${G}/submit/${encodeURIComponent(f.groupId)}`:null,He=`/classroom/student/${encodeURIComponent(a||"")}/task`;return e.jsxs("section",{className:"container py-4",id:"student-group-task-detail",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{to:He,children:""})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:" "})]})}),e.jsx(qe,{to:He,className:"btn btn-sm btn-outline-secondary",children:""})]}),S&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:S}),e.jsx("div",{className:"card shadow-sm mb-4",children:e.jsx("div",{className:"card-body",children:v?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h4 placeholder-glow",children:e.jsx("span",{className:"placeholder col-6"})}),e.jsxs("div",{className:"placeholder-glow d-flex gap-2 flex-wrap text-muted small mb-3",children:[e.jsx("span",{className:"placeholder col-3"}),e.jsx("span",{className:"placeholder col-3"}),e.jsx("span",{className:"placeholder col-3"})]})]}):c?e.jsxs(e.Fragment,{children:[e.jsx("h1",{className:"h4 mb-3",children:c.grouptaskName||"  "}),e.jsxs("div",{className:"d-flex flex-wrap gap-3 text-muted small mb-3",children:[e.jsxs("span",{children:[" ",Hi(c.createAt)]}),e.jsxs("span",{children:["  ",Hi(c.startAt)," ~ ",Hi(c.endAt)]})]}),e.jsx("article",{className:"task-content mb-3",dangerouslySetInnerHTML:{__html:c.grouptaskDesc||'<p class="text-muted mb-0"> .</p>'}}),be.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h2",{className:"h6 mb-2",children:" "}),e.jsx("ul",{className:"list-group",children:be.map((ge,Le)=>{const ce=ge.originalFileName||ge.originName||` ${ge.fileOrder??Le+1}`,Se=typeof ge.fileSize=="number"?`(${ge.fileSize.toLocaleString()} Byte)`:"";return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[e.jsx("i",{className:"bi bi-paperclip me-2"}),ce," ",e.jsx("small",{className:"text-muted",children:Se})]}),e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:fe(ge,Le),children:""})]},ge.fileId||Le)})})]})]}):e.jsx("p",{className:"text-muted mb-0",children:"    ."})})}),e.jsxs("div",{className:"card shadow-sm mb-4",children:[e.jsx("div",{className:"card-header d-flex justify-content-between align-items-center",children:e.jsx("h2",{className:"h6 mb-0",children:"   "})}),e.jsx("div",{className:"card-body",children:w?e.jsx("p",{className:"text-muted placeholder-glow",children:e.jsx("span",{className:"placeholder col-3"})}):f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{children:f.groupName||"  "})]}),e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{children:me.find(ge=>ge.isLeader)?.name||"-"})]}),e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{children:oe?.submitAt?`  (${re})`:""})]})]}),e.jsx("hr",{className:"my-3"}),e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted mb-1",children:" "}),e.jsx("div",{className:"p-2 bg-body-secondary rounded",children:J||e.jsx("span",{className:"text-muted",children:"  ."})})]}),Me&&e.jsx("div",{className:"mt-3",children:e.jsx("a",{className:"btn btn-sm btn-outline-primary",href:Me,children:"   "})})]}):e.jsx("p",{className:"text-muted mb-0",children:"     ."})})]}),Ee&&f&&e.jsx("div",{className:"mb-4",children:e.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>{U(""),M(""),X(J||""),W(oe?.submitFileId||""),Q([]),P.current&&(P.current.value=""),B(!0)},disabled:O,children:"/"})}),Ee&&_&&e.jsxs("div",{className:"card shadow-sm mb-4",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:" "})}),e.jsxs("div",{className:"card-body",children:[L&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:L}),N&&e.jsx("div",{className:"alert alert-success",role:"alert",children:N}),e.jsxs("form",{onSubmit:async ge=>{if(ge.preventDefault(),!a||!s||!f?.groupId){U("    .");return}try{Y(!0),U(""),M("");const Le={submitDesc:z||"",submitFileId:T||null},ce=await fetch(`/classroom/api/v1/student/${k}/task/group/${G}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Le)});if(!ce.ok){const Se=await ce.text().catch(()=>"");throw new Error(Se||`(${ce.status})   .`)}M(" ."),B(!1),V(Se=>Se+1)}catch(Le){U(Le instanceof Error?Le.message:"    .")}finally{Y(!1),Q([]),P.current&&(P.current.value="")}},children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"group-submit-desc",className:"form-label",children:" "}),e.jsx("textarea",{id:"group-submit-desc",className:"form-control",rows:4,placeholder:"   .",value:z,onChange:ge=>X(ge.target.value),disabled:O})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"group-submit-file",className:"form-label",children:" "}),T&&F.length===0&&e.jsxs("div",{className:"alert alert-info small py-2",children:["   ID: ",T,e.jsx("br",{}),"      ."]}),F.length>0&&e.jsx("ul",{className:"list-group mb-2",children:F.map((ge,Le)=>{const ce=ge.originalName||ge.originName||ge.originalFileName||` ${ge.fileOrder??Le+1}`,Se=typeof ge.fileSize=="number"?` (${(ge.fileSize/1024).toFixed(2)} KB)`:"";return e.jsxs("li",{className:"list-group-item",children:[ce,e.jsx("small",{className:"text-muted",children:Se})]},`${ge.fileId||Le}`)})}),e.jsx("input",{id:"group-submit-file",className:"form-control",type:"file",multiple:!0,ref:P,onChange:async ge=>{const Le=Array.from(ge.target.files||[]);if(Le.length){if(!a){U("    .");return}if(Le.length>5){U("  5   ."),ge.target.value="";return}try{Y(!0),U(""),M("");const ce=new FormData;Le.forEach(Fe=>ce.append("files",Fe));const Se=`/classroom/api/v1/common/${k}/upload?type=task`,we=await fetch(Se,{method:"POST",body:ce,credentials:"include"});if(!we.ok){const Fe=await we.text().catch(()=>"");throw new Error(Fe||`(${we.status})   .`)}const Ve=await we.json(),{fileId:Xe,details:Ke}=se(Ve);W(Xe||""),Q(Ke),M(" .")}catch(ce){U(ce instanceof Error?ce.message:"    .")}finally{Y(!1),ge.target&&(ge.target.value="")}}},disabled:O}),e.jsx("div",{className:"form-text",children:"      ."})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{B(!1),U(""),M(""),Q([]),P.current&&(P.current.value="")},disabled:O,children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:O,children:O?" ...":""})]})]})]})]}),e.jsxs("div",{className:"card shadow-sm",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:w||$?e.jsx("p",{className:"text-muted placeholder-glow",children:e.jsx("span",{className:"placeholder col-4"})}):me.length===0?e.jsx("p",{className:"text-muted mb-0",children:"    ."}):e.jsx("div",{className:"row g-3",children:me.map(ge=>e.jsx("div",{className:"col-12 col-md-6 col-lg-4",children:e.jsxs("div",{className:`member-card h-100 ${ge.isSelf?"border-primary":""}`,children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[e.jsx("div",{className:"avatar-48 bg-light border d-flex align-items-center justify-content-center",children:ge.initial}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold",children:ge.name}),e.jsx("div",{className:"member-meta",children:ge.studentNo}),ge.isLeader&&e.jsx("span",{className:"badge text-bg-primary mt-2",children:""})]})]}),ge.isSelf&&e.jsxs("div",{className:"evaluation-box mt-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"fw-semibold",children:"  :"})," ",typeof ge.evaluScore=="number"?`${ge.evaluScore}`:""]}),e.jsx("div",{className:"evaluation-note mt-2",children:ge.evaluDesc||" ."}),e.jsxs("div",{className:"evaluation-note mt-2",children:[" : ",ge.evaluAt?Hi(ge.evaluAt):""]})]})]})},ge.enrollId))})})]})]})}const gt={breadcrumbBoard:"",breadcrumbCurrent:"",listButton:"",attachments:"",noContent:" .",replySectionTitle:"",replySortNewest:"",replySortOldest:"",replyPlaceholder:" .",replySubmit:"",replySubmitLoading:" ...",replyEmpty:"  .   .",replyLoading:"  ...",replyAlertEmpty:"  .",replyAlertInvalid:"   .",replySubmitSuccess:" .",replySubmitFail:"  .",replyDelete:"",replyDeleteConfirm:" ?",replyDeleteSuccess:" .",replyDeleteFail:"  .",replyNoContent:" ",invalidParams:" . (lectureId/postId)",postLoadError:"    .",replyLoadError:"    ."},Ic={author:"",createdAt:"",revealAt:" ",viewCount:""},Lc=a=>String(a).padStart(2,"0"),eh=a=>{if(!a)return"";const s=new Date(a);return Number.isNaN(s.getTime())?String(a):`${s.getFullYear()}-${Lc(s.getMonth()+1)}-${Lc(s.getDate())} ${Lc(s.getHours())}:${Lc(s.getMinutes())}`},FS=a=>{if(!a)return"";if(!/[&<>"']/.test(a)||/<[^>]+>/.test(a))return a;const s=document.createElement("textarea");return s.innerHTML=a,s.value},HS=a=>{if(!a)return"";try{const l=new DOMParser().parseFromString(a,"text/html");return l.querySelectorAll("script, style, iframe, object, embed, link[rel='import']").forEach(i=>i.remove()),l.querySelectorAll("*").forEach(i=>{Array.from(i.attributes).forEach(c=>{/^on/i.test(c.name)&&i.removeAttribute(c.name)})}),l.body.innerHTML}catch(s){return console.warn("[StudentBoardPost] sanitize failed",s),a}},VS=a=>String(a??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;"),YS=a=>{const s=VS(a||"");return s?s.replace(/\r?\n/g,"<br />"):""},PS=a=>{if(!Number.isFinite(a)||a<=0)return"";const s=1024,l=s*1024;if(a>=l){const c=a/l;return`${c>=10?Math.round(c):Math.round(c*10)/10} mb`}const i=a/s;return`${i>=10?Math.round(i):Math.round(i*10)/10} kb`},qS=a=>{if(!a)return"PUBLISHED";if(a.tempSaveYn==="Y")return"DRAFT";if(a.revealAt){const s=new Date(a.revealAt);if(!Number.isNaN(s.getTime())&&s.getTime()>Date.now())return"SCHEDULED"}return"PUBLISHED"},GS=({type:a})=>a==="NOTICE"?e.jsx("span",{className:"badge badge-type bg-warning text-dark border border-warning-subtle",children:""}):a==="MATERIAL"?e.jsx("span",{className:"badge badge-type bg-info text-dark border border-info-subtle",children:""}):e.jsx("span",{className:"badge badge-type text-bg-secondary",children:""}),XS=({status:a})=>{switch(a){case"DRAFT":return e.jsx("span",{className:"badge text-bg-secondary",children:""});case"SCHEDULED":return e.jsx("span",{className:"badge text-bg-primary",children:""});default:return e.jsx("span",{className:"badge text-bg-success",children:""})}},un=a=>String(a?.lctReplyId||a?.replyId||a?.id||""),WS=a=>{if(!a)return"";if(a.parentReplyId)return a.parentReplyId;const s=a.parentReply||a.parent;return s?typeof s=="string"?s:typeof s=="object"&&(s.lctReplyId||s.replyId||s.id||s.parentReplyId)||"":""},px=a=>{if(a?.createAt||a?.createdAt){const l=Date.parse(a.createAt||a.createdAt);if(!Number.isNaN(l))return l}const s=Number(String(a?.lctReplyId||a?.replyId||a?.id||"").replace(/\D/g,""));return Number.isNaN(s)?0:s},KS=(a,s)=>{const l=px(a)-px(s);return l!==0?l:un(a).localeCompare(un(s))};function QS(){const{lectureId:a,postId:s}=dt(),l=a||"",i=s||"",c=encodeURIComponent(l),d=encodeURIComponent(i),[u,h]=x.useState(null),[f,g]=x.useState(!0),[b,y]=x.useState(""),[v,C]=x.useState(null),[w,A]=x.useState(()=>new Map),[S,E]=x.useState([]),[$,D]=x.useState("desc"),[I,V]=x.useState(!1),[_,B]=x.useState(""),[z,X]=x.useState(""),[T,W]=x.useState({variant:"",message:""}),[F,Q]=x.useState(!1),[O,Y]=x.useState(""),N=`/classroom/student/${encodeURIComponent(l||"")}/board`,M=x.useCallback(()=>{W({variant:"",message:""})},[]),L=x.useCallback(async()=>{if(!l||!i)throw new Error(gt.invalidParams);const ue=`/classroom/api/v1/student/board/${c}/post/${d}`,fe=await fetch(ue,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!fe.ok)throw new Error(`${gt.postLoadError} (HTTP ${fe.status})`);return fe.json()},[l,i,c,d]),U=x.useCallback(async()=>{if(!l)return null;const ue=`/classroom/api/v1/common/${c}/professor`;try{const fe=await fetch(ue,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!fe.ok)throw new Error(`HTTP ${fe.status}`);return fe.json()}catch(fe){return console.warn("[StudentBoardPost] professor info load failed",fe),null}},[l,c]),P=x.useCallback(async()=>{const ue=new Map;if(!l)return ue;const fe=`/classroom/api/v1/student/${c}/students`;try{const Me=await fetch(fe,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!Me.ok)throw new Error(`HTTP ${Me.status}`);const He=await Me.json();Array.isArray(He)&&He.forEach(ge=>{if(!ge)return;const Le=String(ge.userId||"").trim();Le&&ue.set(Le,ge)})}catch(Me){console.warn("[StudentBoardPost] student roster load failed",Me)}return ue},[l,c]),k=x.useCallback(async()=>{if(!l||!i)return E([]),B(gt.replyLoadError),[];const ue=`/classroom/api/v1/student/board/${c}/post/${d}/reply`;try{V(!0),B("");const fe=await fetch(ue,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!fe.ok)throw new Error(`HTTP ${fe.status}`);const Me=await fe.json(),He=Array.isArray(Me)?Me:[];return E(He),He}catch(fe){return console.error("[StudentBoardPost] reply load error",fe),E([]),B(gt.replyLoadError),[]}finally{V(!1)}},[l,i,c,d]);x.useEffect(()=>{if(!l||!i){h(null),y(gt.invalidParams),g(!1);return}let ue=!1;return(async()=>{try{g(!0),y("");const fe=await L();ue||h(fe)}catch(fe){ue||(h(null),y(fe.message||gt.postLoadError))}finally{ue||g(!1)}})(),()=>{ue=!0}},[l,i,L]),x.useEffect(()=>{let ue=!1;return(async()=>{const[fe,Me]=await Promise.all([U(),P()]);ue||(C(fe),A(new Map(Me)))})(),()=>{ue=!0}},[U,P]),x.useEffect(()=>{let ue=!1;return(async()=>await k())(),()=>{ue=!0}},[k]);const G=x.useMemo(()=>{if(!u)return[];const ue=u.attachFileList||u.attachFiles||u.attachments||u.files||[];return Array.isArray(ue)?ue.map((fe,Me)=>{const He=` ${fe?.fileOrder||Me+1}`,ge=fe?.originName||fe?.originalFilename||fe?.originalFileName||fe?.fileName||fe?.fileNm||He,Le=String(fe?.extension||fe?.fileExtension||"").replace(/^\./,"");let ce=typeof ge=="string"?ge:String(ge??He);Le&&typeof ce=="string"&&!ce.toLowerCase().endsWith(`.${Le.toLowerCase()}`)&&(ce=`${ce}.${Le}`);const Se=fe?.fileOrder??fe?.atchFileSn??fe?.fileSn??fe?.attachFileOrder??fe?.fileId??fe?.id??Me,we=typeof fe?.downloadUrl=="string"&&fe.downloadUrl||typeof fe?.url=="string"&&fe.url||typeof fe?.fileUrl=="string"&&fe.fileUrl||`/classroom/api/v1/common/board/${c}/post/${d}/attach/${encodeURIComponent(String(Se))}`,Ve=PS(Number(fe?.fileSize??fe?.size??fe?.fileLength??0));return{key:`${Se}-${Me}`,name:ce,href:we,sizeLabel:Ve}}):[]},[u,c,d]),se=x.useMemo(()=>{if(!u)return"";const ue=u.content||u.postContent||u.contentHtml||"",fe=FS(ue);return HS(fe)},[u]),q=x.useMemo(()=>{const ue=new Map;return S.forEach(fe=>{const Me=un(fe);Me&&ue.set(Me,fe)}),ue},[S]),ee=x.useMemo(()=>{if(!S.length)return{top:[],children:new Map};const ue=new Map,fe=[];S.forEach(He=>{const ge=un(He),Le=WS(He);Le&&Le!==ge&&q.has(Le)?(ue.has(Le)||ue.set(Le,[]),ue.get(Le).push(He)):fe.push(He)});const Me=(He,ge)=>KS(He,ge);return fe.sort(Me),ue.forEach((He,ge)=>{const Le=He.slice().sort(Me);ue.set(ge,Le)}),$==="desc"&&fe.reverse(),{top:fe,children:ue}},[S,q,$]),te=x.useCallback(ue=>{if(!ue)return"";const fe=ue.lastName||"",Me=ue.firstName||"",He=`${fe}${Me}`.trim();return He||ue.userName||ue.userId||""},[]),me=x.useCallback(ue=>{if(!ue)return"";const fe=ue.lastName||"",Me=ue.firstName||"",He=`${fe}${Me}`.trim();return He||ue.userName||ue.professorName||ue.userId||""},[]),oe=x.useCallback(ue=>{if(!ue)return"";const fe=String(ue.userId||"").trim();if(fe&&v?.userId&&v.userId===fe){const Me=me(v);return Me?`${Me} `:" "}if(fe&&w instanceof Map&&w.has(fe)){const Me=w.get(fe),He=te(Me)||fe,ge=Me?.univDeptName||"";return ge?`${He}(${ge})`:He}return ue.writerName||ue.authorName||ue.studentName||fe||""},[v,w,me,te]),be=x.useCallback(ue=>{const fe=String(ue?.userId||"").trim();return!!(fe&&v?.userId&&v.userId===fe)},[v]),J=x.useCallback(async ue=>{ue.preventDefault(),M();const fe=z.trim();if(!fe){W({variant:"warning",message:gt.replyAlertEmpty});return}if(!l||!i){W({variant:"danger",message:gt.replyAlertInvalid});return}const Me=`/classroom/api/v1/student/board/${c}/post/${d}/reply`;try{Q(!0);const He=await fetch(Me,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin",body:JSON.stringify({replyContent:fe})});if(!He.ok)throw new Error(`HTTP ${He.status}`);X(""),W({variant:"success",message:gt.replySubmitSuccess}),await k()}catch(He){console.error("[StudentBoardPost] reply submit error",He),W({variant:"danger",message:gt.replySubmitFail})}finally{Q(!1)}},[M,l,i,c,d,z,k]),re=x.useCallback(async ue=>{if(!ue)return;if(!l||!i){W({variant:"danger",message:gt.replyAlertInvalid});return}if(!window.confirm(gt.replyDeleteConfirm))return;const Me=`/classroom/api/v1/student/board/${c}/post/${d}/reply/${encodeURIComponent(ue)}`;try{Y(ue);const He=await fetch(Me,{method:"DELETE",headers:{Accept:"application/json"},credentials:"same-origin"});if(!He.ok)throw new Error(`HTTP ${He.status}`);W({variant:"info",message:gt.replyDeleteSuccess}),await k()}catch(He){console.error("[StudentBoardPost] reply delete error",He),W({variant:"danger",message:gt.replyDeleteFail})}finally{Y("")}},[l,i,c,d,k]),Ee=x.useCallback((ue,fe=0,Me="root")=>{const He=un(ue)||`${Me}-${fe}`,ge=["reply-item","border","rounded","px-3","py-2"],Le=be(ue);Le&&ge.push("reply-professor"),fe>0&&(ge.push("reply-child","ms-4"),Le||ge.push("bg-light"));const ce=ee.children.get(un(ue))||[],Se=YS(ue?.replyContent||ue?.content||"");return e.jsxs("div",{className:ge.join(" "),children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"fw-semibold text-body",children:oe(ue)}),e.jsx("span",{className:"text-muted small",children:eh(ue?.createAt||ue?.createdAt)})]}),e.jsx("div",{className:"d-flex align-items-center gap-2 flex-shrink-0",children:e.jsx("button",{type:"button",className:"btn btn-link btn-sm text-danger text-decoration-none px-0",onClick:()=>re(un(ue)),disabled:!!O&&O===un(ue),children:gt.replyDelete})})]}),e.jsx("div",{className:"reply-body text-break small mt-1",children:Se?e.jsx("span",{dangerouslySetInnerHTML:{__html:Se}}):e.jsx("span",{className:"text-muted fst-italic small",children:gt.replyNoContent})}),ce.length>0&&e.jsx("div",{className:"mt-2 vstack gap-1",children:ce.map((we,Ve)=>Ee(we,fe+1,`${He}-${Ve}`))})]},He)},[ee.children,oe,re,O,be]),$e=x.useMemo(()=>{if(!u)return[];const ue=[],fe=u.writerName||u.professorName||u.authorName;fe&&ue.push(`${Ic.author}: ${fe}`);const Me=eh(u.createAt||u.createdAt);Me&&ue.push(`${Ic.createdAt}: ${Me}`);const He=eh(u.revealAt);return He&&ue.push(`${Ic.revealAt}: ${He}`),u.viewCount!=null&&ue.push(`${Ic.viewCount}: ${u.viewCount}`),ue},[u]);return e.jsx("section",{className:"container py-4",children:e.jsxs("div",{className:"board-layout mx-auto",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{to:N,children:gt.breadcrumbBoard})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:gt.breadcrumbCurrent})]})}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",to:N,children:gt.listButton})})]}),e.jsx("div",{className:"card shadow-sm mb-4",children:e.jsx("div",{className:"card-body",id:"post-body",children:b?e.jsx("div",{className:"alert alert-danger mb-0",role:"alert",children:b}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex align-items-start justify-content-between gap-3 mb-3 flex-wrap",id:"post-header",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"d-flex align-items-center flex-wrap gap-2 mb-2",id:"post-badge-row",children:f?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"badge skeleton",style:{width:"72px",height:"24px"}}),e.jsx("span",{className:"badge skeleton",style:{width:"56px",height:"24px"}})]}):e.jsxs(e.Fragment,{children:[e.jsx(GS,{type:u?.postType}),e.jsx(XS,{status:qS(u)})]})}),e.jsx("h1",{className:`h4 mb-2 ${f?"skeleton":""}`,id:"post-title",style:f?{width:"70%",height:"1.75rem"}:void 0,children:f?null:(u?.title||u?.postTitle||"").trim()||gt.noContent}),e.jsx("div",{className:"d-flex flex-wrap meta-list mb-0",id:"post-meta-row",children:f?[1,2,3].map(ue=>e.jsx("div",{className:"meta-item skeleton",style:{width:"220px",height:"1rem"}},ue)):$e.map((ue,fe)=>e.jsx("div",{className:"meta-item",children:ue},fe))})]}),e.jsx("div",{className:"d-flex align-items-start gap-2 post-header-actions"})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"post-content mb-4",id:"post-content",children:f?e.jsx("div",{className:"skeleton",style:{height:"8rem"}}):se?e.jsx("div",{dangerouslySetInnerHTML:{__html:se}}):e.jsx("p",{className:"text-muted mb-0",children:gt.noContent})}),!f&&G.length>0&&e.jsxs("div",{id:"attach-area",className:"mt-4",children:[e.jsx("h2",{className:"h6 mb-2",children:gt.attachments}),e.jsx("ul",{className:"list-group",id:"attach-list",children:G.map(ue=>e.jsxs("li",{className:"list-group-item d-flex align-items-center gap-3",children:[e.jsxs("a",{className:"d-flex align-items-center gap-2 text-decoration-none flex-grow-1",href:ue.href,download:!0,children:[e.jsx("i",{className:"bi bi-paperclip text-secondary","aria-hidden":"true"}),e.jsx("span",{className:"text-truncate",children:ue.name})]}),ue.sizeLabel&&e.jsx("small",{className:"text-muted text-nowrap",children:ue.sizeLabel})]},ue.key))})]})]})})}),!b&&e.jsx("section",{className:"mt-5",id:"reply-section",children:e.jsxs("div",{className:"card shadow-sm",children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[e.jsx("h2",{className:"h5 mb-0",children:gt.replySectionTitle}),e.jsxs("div",{className:"btn-group btn-group-sm",role:"group","aria-label":gt.replySectionTitle,children:[e.jsx("button",{type:"button",className:`btn ${$==="desc"?"btn-primary active":"btn-outline-secondary"}`,id:"reply-sort-newest","aria-pressed":$==="desc",onClick:()=>D("desc"),children:gt.replySortNewest}),e.jsx("button",{type:"button",className:`btn ${$==="asc"?"btn-primary active":"btn-outline-secondary"}`,id:"reply-sort-oldest","aria-pressed":$==="asc",onClick:()=>D("asc"),children:gt.replySortOldest})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{id:"reply-form",className:"vstack gap-3 mb-4",onSubmit:J,children:[e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"reply-content",className:"form-label",children:[gt.replySectionTitle," ",""]}),e.jsx("textarea",{className:"form-control reply-textarea",id:"reply-content",rows:3,placeholder:gt.replyPlaceholder,value:z,onChange:ue=>{X(ue.target.value),T.variant&&M()},disabled:F})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",id:"reply-submit",disabled:F,children:F?gt.replySubmitLoading:gt.replySubmit})})]}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"vstack gap-1",children:I?e.jsx("div",{className:"text-muted small text-center py-4",children:gt.replyLoading}):ee.top.length===0?e.jsx("div",{id:"reply-empty",className:`small text-center py-4 ${_?"text-danger":"text-muted"}`,children:_||gt.replyEmpty}):e.jsx("div",{id:"reply-list",className:"vstack gap-1",children:ee.top.map((ue,fe)=>Ee(ue,0,`root-${fe}`))})}),T.message&&e.jsx("div",{id:"reply-alert",className:`alert mt-4 alert-${T.variant}`,role:"alert",children:T.message})]})]})}),b&&e.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:b})]})})}function ZS(){const{lectureId:a}=dt(),s=rs(),[l,i]=x.useState([]),[c,d]=x.useState({}),[u,h]=x.useState(!0),[f,g]=x.useState(""),[b,y]=x.useState(!1);x.useEffect(()=>{let S=!0;return(async()=>{if(!a){g("    ."),h(!1);return}try{h(!0),g("");const $=await fetch("/classroom/api/v1/student/review",{headers:{Accept:"application/json"},credentials:"include"});if($.ok){const V=await $.json();if(!S)return;if(Array.isArray(V)&&!V.includes(a)){alert("  ."),s(-1);return}}const D=await fetch(`/classroom/api/v1/student/${encodeURIComponent(a)}/review/question`,{headers:{Accept:"application/json"},credentials:"include"});if(!D.ok){const V=await D.text().catch(()=>"");throw new Error(V||`(${D.status})    .`)}const I=await D.json();if(!S)return;i(Array.isArray(I)?I:[])}catch($){if(!S)return;g($ instanceof Error?$.message:"     ."),i([])}finally{S&&h(!1)}})(),()=>{S=!1}},[a,s]);const v=x.useMemo(()=>{const S=l.filter(D=>D.answerTypeCd==="OBJ_SINGLE"),E=l.filter(D=>D.answerTypeCd==="SUBJ_SRT"),$=l.filter(D=>D.answerTypeCd==="SUBJ_LONG");return{objective:S,shortAnswer:E,longAnswer:$}},[l]),C=(S,E)=>{d($=>({...$,[S]:E}))},w=S=>{S.target.style.height="auto",S.target.style.height=S.target.scrollHeight+"px"},A=async S=>{S.preventDefault();const E=[];if(v.objective.forEach(($,D)=>{(!c[$.questionNo]||c[$.questionNo].toString().trim()==="")&&E.push({section:" ",number:D+1})}),v.shortAnswer.forEach(($,D)=>{(!c[$.questionNo]||c[$.questionNo].toString().trim()==="")&&E.push({section:" ",number:D+1})}),v.longAnswer.forEach(($,D)=>{(!c[$.questionNo]||c[$.questionNo].toString().trim()==="")&&E.push({section:" ",number:D+1})}),E.length>0){const $=E.map(D=>`${D.section} ${D.number}`);alert(`  :
${$.join(", ")}`);return}if(window.confirm(" ?     ."))try{y(!0),g("");const $=Object.entries(c).map(([I,V])=>({questionNo:Number(I),answer:V.toString()}));console.log("  :"),console.log(JSON.stringify($,null,2));const D=await fetch(`/classroom/api/v1/student/${encodeURIComponent(a)}/review`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify($)});if(!D.ok){const I=await D.text().catch(()=>"");throw new Error(I||`(${D.status})   .`)}alert(" ."),s(`/classroom/student/${a}`)}catch($){g($ instanceof Error?$.message:"    .")}finally{y(!1)}};return e.jsxs("section",{className:"container py-4",children:[f&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:f}),e.jsxs("div",{className:"card shadow-sm",children:[e.jsx("div",{className:"card-header bg-primary text-white",children:e.jsx("h1",{className:"h5 mb-0",children:""})}),e.jsx("div",{className:"card-body",children:u?e.jsx("div",{className:"text-center py-5",children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"visually-hidden",children:" ..."})})}):l.length===0?e.jsx("p",{className:"text-muted mb-0",children:"    ."}):e.jsxs("form",{onSubmit:A,children:[e.jsxs("div",{className:"alert alert-info mb-4",children:[e.jsx("strong",{children:":"}),"     .     ."]}),v.objective.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"h6 mb-3",children:" "}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-bordered",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"5%"},children:""}),e.jsx("th",{style:{width:"45%"},children:""}),e.jsxs("th",{className:"text-center",style:{width:"10%"},children:["",e.jsx("br",{}),""]}),e.jsx("th",{className:"text-center",style:{width:"10%"},children:""}),e.jsx("th",{className:"text-center",style:{width:"10%"},children:""}),e.jsx("th",{className:"text-center",style:{width:"10%"},children:""}),e.jsx("th",{className:"text-center",style:{width:"10%"},children:""})]})}),e.jsx("tbody",{children:v.objective.map((S,E)=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:E+1}),e.jsx("td",{children:S.question}),["1","2","3","4","5"].map($=>e.jsx("td",{className:"text-center",children:e.jsx("input",{type:"radio",name:`question-${S.questionNo}`,value:$,checked:c[S.questionNo]===$,onChange:D=>C(S.questionNo,D.target.value),disabled:b,className:"form-check-input"})},$))]},S.questionNo))})]})})]}),v.shortAnswer.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"h6 mb-3",children:" "}),v.shortAnswer.map((S,E)=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"form-label fw-bold",children:[E+1,". ",S.question]}),e.jsx("input",{type:"text",className:"form-control",value:c[S.questionNo]||"",onChange:$=>C(S.questionNo,$.target.value),placeholder:" ",disabled:b,maxLength:200})]},S.questionNo))]}),v.longAnswer.length>0&&e.jsxs("div",{className:"mb-5",children:[e.jsx("h2",{className:"h6 mb-3",children:" "}),v.longAnswer.map((S,E)=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("label",{className:"form-label fw-bold",children:[E+1,". ",S.question]}),e.jsx("textarea",{className:"form-control",value:c[S.questionNo]||"",onChange:$=>C(S.questionNo,$.target.value),onInput:w,placeholder:" ",rows:3,disabled:b,maxLength:1e3,style:{resize:"none",overflow:"hidden"}})]},S.questionNo))]}),e.jsx("div",{className:"d-flex gap-2 justify-content-end mt-4",children:e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"})," ..."]}):""})})]})})]})]})}const Tt={heading:"/",intro:"1   .     .",cta:" ",loading:"  ...",error:"    .    .",missingLecture:"    .",gradeLabel:"",gradeFallback:"-",professorTitle:"  ",nameLabel:"",deptLabel:"",emailLabel:"",phoneLabel:"()",officeLabel:"",emptyData:"   ."},JS=a=>{if(a==null)return"";const s=Number(a);return Number.isFinite(s)?s.toFixed(2).replace(/\.?0+$/,""):""};function ew(){const{lectureId:a}=dt(),[s,l]=x.useState("idle"),[i,c]=x.useState(""),[d,u]=x.useState(null),[h,f]=x.useState(null),[g,b]=x.useState(!1),y=x.useMemo(()=>{if(!d)return null;const S=d.gpaCd||Tt.gradeFallback,E=d.autoGrade,$=JS(E);return $?`${S}(${$})`:S},[d]),v=x.useMemo(()=>{if(!h)return"";const S=h.lastName||"",E=h.firstName||"";return`${S}${E}`.trim()},[h]),C=x.useMemo(()=>!h?.professorNo||g?null:`/classroom/api/v1/common/photo/professor/${encodeURIComponent(h.professorNo)}`,[g,h]),w=x.useCallback(async()=>{if(!a){c(Tt.missingLecture),l("error");return}l("loading"),c(""),u(null),f(null),b(!1);try{const S=encodeURIComponent(a),[E,$]=await Promise.all([fetch(`/classroom/api/v1/student/${S}/score`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/common/${S}/professor`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!E.ok)throw new Error(`${E.status} ${E.statusText}`);if(!$.ok)throw new Error(`${$.status} ${$.statusText}`);const D=await E.json(),I=await $.json(),V=Array.isArray(D)?D[0]||null:D||null;if(!V)throw new Error(Tt.emptyData);u(V),f(I&&typeof I=="object"?I:null),l("done")}catch(S){l("error"),c(S?.message||Tt.error)}},[a]),A=x.useMemo(()=>h?[{label:Tt.nameLabel,value:v||Tt.gradeFallback},{label:Tt.deptLabel,value:h.univDeptName||Tt.gradeFallback},{label:Tt.emailLabel,value:h.email||Tt.gradeFallback},{label:Tt.phoneLabel,value:h.mobileNo||Tt.gradeFallback},{label:Tt.officeLabel,value:h.officeNo||Tt.gradeFallback}]:[],[h,v]);return e.jsx("div",{className:"card border-0 shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"h5 mb-3",children:Tt.heading}),e.jsx("p",{className:"text-muted mb-4",children:Tt.intro}),s==="error"&&e.jsx("div",{className:"alert alert-danger rounded-4",role:"alert",children:i||Tt.error}),s==="done"&&e.jsx("div",{className:"text-center mb-4",children:e.jsx("div",{className:"h4 mb-2 fw-bold text-primary",children:`${Tt.gradeLabel} : ${y||Tt.gradeFallback}`})}),s==="loading"&&e.jsx("div",{className:"text-center text-muted mb-4",children:Tt.loading}),e.jsx("div",{className:"d-flex justify-content-center mb-4",children:e.jsx("button",{type:"button",className:"btn btn-primary btn-lg px-4 shadow-sm",onClick:w,disabled:s==="loading",children:s==="loading"?Tt.loading:Tt.cta})}),s==="done"&&h&&e.jsx("div",{className:"border rounded-4 p-4 bg-light",children:e.jsxs("div",{className:"d-flex flex-column flex-md-row align-items-start justify-content-between gap-4",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("h3",{className:"h6 mb-3 text-secondary fw-semibold",children:Tt.professorTitle}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"fw-semibold fs-5",children:v||Tt.gradeFallback}),e.jsx("div",{className:"text-muted small",children:h.univDeptName||Tt.gradeFallback})]}),e.jsx("dl",{className:"row mb-0",children:A.map(({label:S,value:E})=>e.jsxs(qs.Fragment,{children:[e.jsx("dt",{className:"col-sm-4 text-muted",children:S}),e.jsx("dd",{className:"col-sm-8",children:E||Tt.gradeFallback})]},S))})]}),e.jsx("div",{className:"flex-shrink-0 d-flex justify-content-end",children:C?e.jsx("img",{src:C,alt:v?`${v} Professor photo`:"Professor photo",className:"shadow-sm",style:{maxHeight:"240px",width:"auto",borderRadius:"1rem",objectFit:"contain"},onError:()=>b(!0)}):e.jsx("div",{className:"bg-secondary-subtle border d-flex align-items-center justify-content-center text-muted fw-semibold shadow-sm",style:{width:"180px",height:"220px",borderRadius:"1rem"},children:v?v[0]:"P"})})]})})]})})}function tw(){const[a,s]=x.useState([]),[l,i]=x.useState(!0),[c,d]=x.useState(null),u=x.useMemo(()=>({MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""}),[]),h=x.useMemo(()=>({REG1:"1",REG2:"2",SUB1:"",SUB2:""}),[]),f=x.useMemo(()=>({REG1:1,REG2:2,SUB1:3,SUB2:4}),[]),g=_=>{if(!_||String(_).length<4)return"--:--";const B=String(_);return`${B.slice(0,2)}:${B.slice(2,4)}`},b=_=>String(_??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),y=_=>{if(!_)return[];try{if(Array.isArray(_))return _;if(typeof _=="string")return JSON.parse(_)}catch{}return[]},v=_=>{if(!_)return{year:0,order:99,termCd:""};const[B="0",z=""]=String(_).split("_");return{year:Number(B)||0,order:f[z]??99,termCd:z}},C=_=>_.slice().sort((B,z)=>{const X=v(B.yeartermCd),T=v(z.yeartermCd);return X.year!==T.year?T.year-X.year:X.order!==T.order?X.order-T.order:(B.subjectName||"").localeCompare(z.subjectName||"","ko")}),w=_=>{if(!_)return"  ";const[B,z]=String(_).split("_"),X=h[z]??z??"";return X?`${B} ${X}`:`${B}`},A=_=>{if(!_)return"";const B=new Date(_);if(Number.isNaN(B.getTime()))return"";const z=String(B.getMonth()+1).padStart(2,"0"),X=String(B.getDate()).padStart(2,"0");return`${B.getFullYear()}-${z}-${X}`},S=_=>!Array.isArray(_)||_.length===0?e.jsx("p",{className:"text-muted mb-0",children:"  "}):e.jsx(e.Fragment,{children:_.map((B,z)=>e.jsxs("div",{className:"mb-2",children:[e.jsx("span",{className:"badge bg-light text-dark border me-2",children:b(B.placeName||B.placeCd||" ")}),e.jsx("ul",{className:"mb-0 ps-3",children:(Array.isArray(B.slots)?B.slots:[]).map((X,T)=>e.jsxs("li",{children:[b(u[X.day]??X.day??"")," ",g(X.start)," ~ ",g(X.end)]},T))})]},z))});x.useEffect(()=>{let _=!0;return(async()=>{try{i(!0),d(null);const B=await fetch("/classroom/api/v1/professor/mylist",{headers:{Accept:"application/json"},credentials:"include"});if(!B.ok)throw new Error(`(${B.status})    .`);const z=await B.json();if(!Array.isArray(z))throw new Error("    .");if(!_)return;s(z)}catch(B){if(!_)return;d(B)}finally{_&&i(!1)}})(),()=>{_=!1}},[]);const E=x.useMemo(()=>{const _=a.filter(B=>!B.started&&!B.ended);return C(_)},[a]),$=x.useMemo(()=>{const _=a.filter(B=>B.started&&!B.ended);return C(_)},[a]),D=x.useMemo(()=>C(a.filter(_=>!!_.ended)),[a]),I=({lecture:_})=>{const B=y(_.scheduleJson);let z;_.ended?z=e.jsx("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle",children:""}):_.started?z=e.jsx("span",{className:"badge bg-success-subtle text-success border border-success-subtle",children:""}):z=e.jsx("span",{className:"badge bg-info-subtle text-info border border-info-subtle",children:""});const X=w(_.yeartermCd),T=_.deptName||"-",W=_.subjectName||"-",F=_.professorName||"-",Q=_.completion||_.completionName||"-",O=_.subjectTypeName||"-",Y=_.credit??_.creditPoint??"-",N=_.hour??_.classHour??"-",M=_.capacityText||_.capacity||"",L=_.ended?_.endDate?`: ${A(_.endDate)}`:"":"",U=_.lectureId||_.id||_.lectureNo;return e.jsx("div",{className:"col-12 col-md-6 col-lg-4",children:e.jsx("article",{className:"card h-100 position-relative",children:e.jsxs("div",{className:"card-body d-flex flex-column",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("h3",{className:"h6 mb-0 text-truncate",title:W,children:W}),z]}),e.jsx("div",{className:"text-muted small mb-2",children:X}),e.jsx("div",{className:"mb-2 small text-body-secondary",children:T}),e.jsxs("ul",{className:"list-unstyled small mb-3",children:[e.jsxs("li",{children:[": ",b(F)]}),e.jsxs("li",{children:[": ",b(Q)]}),e.jsxs("li",{children:[": ",b(O)]}),e.jsxs("li",{children:[" / : ",b(String(Y)),"  ",b(String(N))]}),M?e.jsxs("li",{children:[": ",b(String(M))]}):null]}),e.jsxs("div",{className:"mb-2",children:[e.jsx("strong",{className:"d-block mb-1",children:""}),S(B)]}),L&&e.jsx("div",{className:"mt-auto text-muted small",children:L}),U&&e.jsx(qe,{to:`/classroom/professor/${encodeURIComponent(U)}`,className:"stretched-link","aria-label":`${W}  `})]})})})},V=({id:_,title:B,items:z,defaultOpen:X})=>e.jsxs("div",{className:"accordion-item",children:[e.jsx("h2",{className:"accordion-header",id:`${_}-heading`,children:e.jsxs("button",{className:`accordion-button ${X?"":"collapsed"}`,type:"button","data-bs-toggle":"collapse","data-bs-target":`#${_}-collapse`,"aria-expanded":X?"true":"false","aria-controls":`${_}-collapse`,"data-bs-parent":"#lectures-accordion",children:[B,e.jsxs("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle ms-2",children:[z.length,""]})]})}),e.jsx("div",{id:`${_}-collapse`,className:`accordion-collapse collapse ${X?"show":""}`,"aria-labelledby":`${_}-heading`,"data-bs-parent":"#lectures-accordion",children:e.jsx("div",{className:"accordion-body",children:z.length?e.jsx("div",{className:"row g-3",children:z.map(T=>e.jsx(I,{lecture:T},T.lectureId||`${T.subjectName}-${T.yeartermCd}`))}):e.jsx("div",{className:"text-muted text-center py-4",children:"  ."})})})]});return e.jsxs(ko,{role:"professor",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h4 mb-0",children:" "}),e.jsx("div",{className:"text-muted small","aria-live":"polite",children:l?" ":` ${E.length}   ${$.length}   ${D.length}`})]}),c&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(c.message||c)}),!c&&e.jsxs("div",{className:"accordion",id:"lectures-accordion",children:[e.jsx(V,{id:"prof-ongoing",title:" ",items:$,defaultOpen:!0}),e.jsx(V,{id:"prof-upcoming",title:" ",items:E,defaultOpen:!1}),e.jsx(V,{id:"prof-ended",title:" ",items:D,defaultOpen:!1})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ur(a){return a+.5|0}const pn=(a,s,l)=>Math.max(Math.min(a,l),s);function Qi(a){return pn(ur(a*2.55),0,255)}function vn(a){return pn(ur(a*255),0,255)}function Ia(a){return pn(ur(a/2.55)/100,0,1)}function gx(a){return pn(ur(a*100),0,100)}const Ys={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Nh=[..."0123456789ABCDEF"],sw=a=>Nh[a&15],aw=a=>Nh[(a&240)>>4]+Nh[a&15],zc=a=>(a&240)>>4===(a&15),nw=a=>zc(a.r)&&zc(a.g)&&zc(a.b)&&zc(a.a);function lw(a){var s=a.length,l;return a[0]==="#"&&(s===4||s===5?l={r:255&Ys[a[1]]*17,g:255&Ys[a[2]]*17,b:255&Ys[a[3]]*17,a:s===5?Ys[a[4]]*17:255}:(s===7||s===9)&&(l={r:Ys[a[1]]<<4|Ys[a[2]],g:Ys[a[3]]<<4|Ys[a[4]],b:Ys[a[5]]<<4|Ys[a[6]],a:s===9?Ys[a[7]]<<4|Ys[a[8]]:255})),l}const iw=(a,s)=>a<255?s(a):"";function rw(a){var s=nw(a)?sw:aw;return a?"#"+s(a.r)+s(a.g)+s(a.b)+iw(a.a,s):void 0}const cw=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dy(a,s,l){const i=s*Math.min(l,1-l),c=(d,u=(d+a/30)%12)=>l-i*Math.max(Math.min(u-3,9-u,1),-1);return[c(0),c(8),c(4)]}function ow(a,s,l){const i=(c,d=(c+a/60)%6)=>l-l*s*Math.max(Math.min(d,4-d,1),0);return[i(5),i(3),i(1)]}function dw(a,s,l){const i=dy(a,1,.5);let c;for(s+l>1&&(c=1/(s+l),s*=c,l*=c),c=0;c<3;c++)i[c]*=1-s-l,i[c]+=s;return i}function uw(a,s,l,i,c){return a===c?(s-l)/i+(s<l?6:0):s===c?(l-a)/i+2:(a-s)/i+4}function Dh(a){const l=a.r/255,i=a.g/255,c=a.b/255,d=Math.max(l,i,c),u=Math.min(l,i,c),h=(d+u)/2;let f,g,b;return d!==u&&(b=d-u,g=h>.5?b/(2-d-u):b/(d+u),f=uw(l,i,c,b,d),f=f*60+.5),[f|0,g||0,h]}function Mh(a,s,l,i){return(Array.isArray(s)?a(s[0],s[1],s[2]):a(s,l,i)).map(vn)}function Rh(a,s,l){return Mh(dy,a,s,l)}function hw(a,s,l){return Mh(dw,a,s,l)}function mw(a,s,l){return Mh(ow,a,s,l)}function uy(a){return(a%360+360)%360}function fw(a){const s=cw.exec(a);let l=255,i;if(!s)return;s[5]!==i&&(l=s[6]?Qi(+s[5]):vn(+s[5]));const c=uy(+s[2]),d=+s[3]/100,u=+s[4]/100;return s[1]==="hwb"?i=hw(c,d,u):s[1]==="hsv"?i=mw(c,d,u):i=Rh(c,d,u),{r:i[0],g:i[1],b:i[2],a:l}}function pw(a,s){var l=Dh(a);l[0]=uy(l[0]+s),l=Rh(l),a.r=l[0],a.g=l[1],a.b=l[2]}function gw(a){if(!a)return;const s=Dh(a),l=s[0],i=gx(s[1]),c=gx(s[2]);return a.a<255?`hsla(${l}, ${i}%, ${c}%, ${Ia(a.a)})`:`hsl(${l}, ${i}%, ${c}%)`}const xx={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},bx={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function xw(){const a={},s=Object.keys(bx),l=Object.keys(xx);let i,c,d,u,h;for(i=0;i<s.length;i++){for(u=h=s[i],c=0;c<l.length;c++)d=l[c],h=h.replace(d,xx[d]);d=parseInt(bx[u],16),a[h]=[d>>16&255,d>>8&255,d&255]}return a}let Uc;function bw(a){Uc||(Uc=xw(),Uc.transparent=[0,0,0,0]);const s=Uc[a.toLowerCase()];return s&&{r:s[0],g:s[1],b:s[2],a:s.length===4?s[3]:255}}const yw=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function vw(a){const s=yw.exec(a);let l=255,i,c,d;if(s){if(s[7]!==i){const u=+s[7];l=s[8]?Qi(u):pn(u*255,0,255)}return i=+s[1],c=+s[3],d=+s[5],i=255&(s[2]?Qi(i):pn(i,0,255)),c=255&(s[4]?Qi(c):pn(c,0,255)),d=255&(s[6]?Qi(d):pn(d,0,255)),{r:i,g:c,b:d,a:l}}}function jw(a){return a&&(a.a<255?`rgba(${a.r}, ${a.g}, ${a.b}, ${Ia(a.a)})`:`rgb(${a.r}, ${a.g}, ${a.b})`)}const th=a=>a<=.0031308?a*12.92:Math.pow(a,1/2.4)*1.055-.055,zl=a=>a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4);function Nw(a,s,l){const i=zl(Ia(a.r)),c=zl(Ia(a.g)),d=zl(Ia(a.b));return{r:vn(th(i+l*(zl(Ia(s.r))-i))),g:vn(th(c+l*(zl(Ia(s.g))-c))),b:vn(th(d+l*(zl(Ia(s.b))-d))),a:a.a+l*(s.a-a.a)}}function Bc(a,s,l){if(a){let i=Dh(a);i[s]=Math.max(0,Math.min(i[s]+i[s]*l,s===0?360:1)),i=Rh(i),a.r=i[0],a.g=i[1],a.b=i[2]}}function hy(a,s){return a&&Object.assign(s||{},a)}function yx(a){var s={r:0,g:0,b:0,a:255};return Array.isArray(a)?a.length>=3&&(s={r:a[0],g:a[1],b:a[2],a:255},a.length>3&&(s.a=vn(a[3]))):(s=hy(a,{r:0,g:0,b:0,a:1}),s.a=vn(s.a)),s}function Sw(a){return a.charAt(0)==="r"?vw(a):fw(a)}class rr{constructor(s){if(s instanceof rr)return s;const l=typeof s;let i;l==="object"?i=yx(s):l==="string"&&(i=lw(s)||bw(s)||Sw(s)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var s=hy(this._rgb);return s&&(s.a=Ia(s.a)),s}set rgb(s){this._rgb=yx(s)}rgbString(){return this._valid?jw(this._rgb):void 0}hexString(){return this._valid?rw(this._rgb):void 0}hslString(){return this._valid?gw(this._rgb):void 0}mix(s,l){if(s){const i=this.rgb,c=s.rgb;let d;const u=l===d?.5:l,h=2*u-1,f=i.a-c.a,g=((h*f===-1?h:(h+f)/(1+h*f))+1)/2;d=1-g,i.r=255&g*i.r+d*c.r+.5,i.g=255&g*i.g+d*c.g+.5,i.b=255&g*i.b+d*c.b+.5,i.a=u*i.a+(1-u)*c.a,this.rgb=i}return this}interpolate(s,l){return s&&(this._rgb=Nw(this._rgb,s._rgb,l)),this}clone(){return new rr(this.rgb)}alpha(s){return this._rgb.a=vn(s),this}clearer(s){const l=this._rgb;return l.a*=1-s,this}greyscale(){const s=this._rgb,l=ur(s.r*.3+s.g*.59+s.b*.11);return s.r=s.g=s.b=l,this}opaquer(s){const l=this._rgb;return l.a*=1+s,this}negate(){const s=this._rgb;return s.r=255-s.r,s.g=255-s.g,s.b=255-s.b,this}lighten(s){return Bc(this._rgb,2,s),this}darken(s){return Bc(this._rgb,2,-s),this}saturate(s){return Bc(this._rgb,1,s),this}desaturate(s){return Bc(this._rgb,1,-s),this}rotate(s){return pw(this._rgb,s),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ra(){}const ww=(()=>{let a=0;return()=>a++})();function Et(a){return a==null}function Jt(a){if(Array.isArray&&Array.isArray(a))return!0;const s=Object.prototype.toString.call(a);return s.slice(0,7)==="[object"&&s.slice(-6)==="Array]"}function mt(a){return a!==null&&Object.prototype.toString.call(a)==="[object Object]"}function Gs(a){return(typeof a=="number"||a instanceof Number)&&isFinite(+a)}function la(a,s){return Gs(a)?a:s}function ht(a,s){return typeof a>"u"?s:a}const Cw=(a,s)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100:+a/s,my=(a,s)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100*s:+a;function Dt(a,s,l){if(a&&typeof a.call=="function")return a.apply(l,s)}function Nt(a,s,l,i){let c,d,u;if(Jt(a))for(d=a.length,c=0;c<d;c++)s.call(l,a[c],c);else if(mt(a))for(u=Object.keys(a),d=u.length,c=0;c<d;c++)s.call(l,a[u[c]],u[c])}function fo(a,s){let l,i,c,d;if(!a||!s||a.length!==s.length)return!1;for(l=0,i=a.length;l<i;++l)if(c=a[l],d=s[l],c.datasetIndex!==d.datasetIndex||c.index!==d.index)return!1;return!0}function po(a){if(Jt(a))return a.map(po);if(mt(a)){const s=Object.create(null),l=Object.keys(a),i=l.length;let c=0;for(;c<i;++c)s[l[c]]=po(a[l[c]]);return s}return a}function fy(a){return["__proto__","prototype","constructor"].indexOf(a)===-1}function Aw(a,s,l,i){if(!fy(a))return;const c=s[a],d=l[a];mt(c)&&mt(d)?cr(c,d,i):s[a]=po(d)}function cr(a,s,l){const i=Jt(s)?s:[s],c=i.length;if(!mt(a))return a;l=l||{};const d=l.merger||Aw;let u;for(let h=0;h<c;++h){if(u=i[h],!mt(u))continue;const f=Object.keys(u);for(let g=0,b=f.length;g<b;++g)d(f[g],a,u,l)}return a}function er(a,s){return cr(a,s,{merger:Ew})}function Ew(a,s,l){if(!fy(a))return;const i=s[a],c=l[a];mt(i)&&mt(c)?er(i,c):Object.prototype.hasOwnProperty.call(s,a)||(s[a]=po(c))}const vx={"":a=>a,x:a=>a.x,y:a=>a.y};function Tw(a){const s=a.split("."),l=[];let i="";for(const c of s)i+=c,i.endsWith("\\")?i=i.slice(0,-1)+".":(l.push(i),i="");return l}function _w(a){const s=Tw(a);return l=>{for(const i of s){if(i==="")break;l=l&&l[i]}return l}}function Xn(a,s){return(vx[s]||(vx[s]=_w(s)))(a)}function $h(a){return a.charAt(0).toUpperCase()+a.slice(1)}const or=a=>typeof a<"u",Nn=a=>typeof a=="function",jx=(a,s)=>{if(a.size!==s.size)return!1;for(const l of a)if(!s.has(l))return!1;return!0};function kw(a){return a.type==="mouseup"||a.type==="click"||a.type==="contextmenu"}const Mt=Math.PI,Xt=2*Mt,go=Number.POSITIVE_INFINITY,Dw=Mt/180,Kt=Mt/2,Fn=Mt/4,Nx=Mt*2/3,py=Math.log10,jn=Math.sign;function io(a,s,l){return Math.abs(a-s)<l}function Sx(a){const s=Math.round(a);a=io(a,s,a/1e3)?s:a;const l=Math.pow(10,Math.floor(py(a))),i=a/l;return(i<=1?1:i<=2?2:i<=5?5:10)*l}function Mw(a){const s=[],l=Math.sqrt(a);let i;for(i=1;i<l;i++)a%i===0&&(s.push(i),s.push(a/i));return l===(l|0)&&s.push(l),s.sort((c,d)=>c-d).pop(),s}function Rw(a){return typeof a=="symbol"||typeof a=="object"&&a!==null&&!(Symbol.toPrimitive in a||"toString"in a||"valueOf"in a)}function xo(a){return!Rw(a)&&!isNaN(parseFloat(a))&&isFinite(a)}function $w(a,s){const l=Math.round(a);return l-s<=a&&l+s>=a}function Ow(a,s,l){let i,c,d;for(i=0,c=a.length;i<c;i++)d=a[i][l],isNaN(d)||(s.min=Math.min(s.min,d),s.max=Math.max(s.max,d))}function La(a){return a*(Mt/180)}function Iw(a){return a*(180/Mt)}function wx(a){if(!Gs(a))return;let s=1,l=0;for(;Math.round(a*s)/s!==a;)s*=10,l++;return l}function gy(a,s){const l=s.x-a.x,i=s.y-a.y,c=Math.sqrt(l*l+i*i);let d=Math.atan2(i,l);return d<-.5*Mt&&(d+=Xt),{angle:d,distance:c}}function Lw(a,s){return Math.sqrt(Math.pow(s.x-a.x,2)+Math.pow(s.y-a.y,2))}function oa(a){return(a%Xt+Xt)%Xt}function bo(a,s,l,i){const c=oa(a),d=oa(s),u=oa(l),h=oa(d-c),f=oa(u-c),g=oa(c-d),b=oa(c-u);return c===d||c===u||i&&d===u||h>f&&g<b}function js(a,s,l){return Math.max(s,Math.min(l,a))}function zw(a){return js(a,-32768,32767)}function qn(a,s,l,i=1e-6){return a>=Math.min(s,l)-i&&a<=Math.max(s,l)+i}function Oh(a,s,l){l=l||(u=>a[u]<s);let i=a.length-1,c=0,d;for(;i-c>1;)d=c+i>>1,l(d)?c=d:i=d;return{lo:c,hi:i}}const Sh=(a,s,l,i)=>Oh(a,l,i?c=>{const d=a[c][s];return d<l||d===l&&a[c+1][s]===l}:c=>a[c][s]<l),Uw=(a,s,l)=>Oh(a,l,i=>a[i][s]>=l);function Bw(a,s,l){let i=0,c=a.length;for(;i<c&&a[i]<s;)i++;for(;c>i&&a[c-1]>l;)c--;return i>0||c<a.length?a.slice(i,c):a}const xy=["push","pop","shift","splice","unshift"];function Fw(a,s){if(a._chartjs){a._chartjs.listeners.push(s);return}Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[s]}}),xy.forEach(l=>{const i="_onData"+$h(l),c=a[l];Object.defineProperty(a,l,{configurable:!0,enumerable:!1,value(...d){const u=c.apply(this,d);return a._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...d)}),u}})})}function Cx(a,s){const l=a._chartjs;if(!l)return;const i=l.listeners,c=i.indexOf(s);c!==-1&&i.splice(c,1),!(i.length>0)&&(xy.forEach(d=>{delete a[d]}),delete a._chartjs)}function by(a){const s=new Set(a);return s.size===a.length?a:Array.from(s)}const yy=(function(){return typeof window>"u"?function(a){return a()}:window.requestAnimationFrame})();function vy(a,s){let l=[],i=!1;return function(...c){l=c,i||(i=!0,yy.call(window,()=>{i=!1,a.apply(s,l)}))}}function Hw(a,s){let l;return function(...i){return s?(clearTimeout(l),l=setTimeout(a,s,i)):a.apply(this,i),s}}const jy=a=>a==="start"?"left":a==="end"?"right":"center",Ms=(a,s,l)=>a==="start"?s:a==="end"?l:(s+l)/2,Vw=(a,s,l,i)=>a===(i?"left":"right")?l:a==="center"?(s+l)/2:s,Fc=a=>a===0||a===1,Ax=(a,s,l)=>-(Math.pow(2,10*(a-=1))*Math.sin((a-s)*Xt/l)),Ex=(a,s,l)=>Math.pow(2,-10*a)*Math.sin((a-s)*Xt/l)+1,tr={linear:a=>a,easeInQuad:a=>a*a,easeOutQuad:a=>-a*(a-2),easeInOutQuad:a=>(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1),easeInCubic:a=>a*a*a,easeOutCubic:a=>(a-=1)*a*a+1,easeInOutCubic:a=>(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2),easeInQuart:a=>a*a*a*a,easeOutQuart:a=>-((a-=1)*a*a*a-1),easeInOutQuart:a=>(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2),easeInQuint:a=>a*a*a*a*a,easeOutQuint:a=>(a-=1)*a*a*a*a+1,easeInOutQuint:a=>(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2),easeInSine:a=>-Math.cos(a*Kt)+1,easeOutSine:a=>Math.sin(a*Kt),easeInOutSine:a=>-.5*(Math.cos(Mt*a)-1),easeInExpo:a=>a===0?0:Math.pow(2,10*(a-1)),easeOutExpo:a=>a===1?1:-Math.pow(2,-10*a)+1,easeInOutExpo:a=>Fc(a)?a:a<.5?.5*Math.pow(2,10*(a*2-1)):.5*(-Math.pow(2,-10*(a*2-1))+2),easeInCirc:a=>a>=1?a:-(Math.sqrt(1-a*a)-1),easeOutCirc:a=>Math.sqrt(1-(a-=1)*a),easeInOutCirc:a=>(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1),easeInElastic:a=>Fc(a)?a:Ax(a,.075,.3),easeOutElastic:a=>Fc(a)?a:Ex(a,.075,.3),easeInOutElastic(a){return Fc(a)?a:a<.5?.5*Ax(a*2,.1125,.45):.5+.5*Ex(a*2-1,.1125,.45)},easeInBack(a){return a*a*((1.70158+1)*a-1.70158)},easeOutBack(a){return(a-=1)*a*((1.70158+1)*a+1.70158)+1},easeInOutBack(a){let s=1.70158;return(a/=.5)<1?.5*(a*a*(((s*=1.525)+1)*a-s)):.5*((a-=2)*a*(((s*=1.525)+1)*a+s)+2)},easeInBounce:a=>1-tr.easeOutBounce(1-a),easeOutBounce(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInOutBounce:a=>a<.5?tr.easeInBounce(a*2)*.5:tr.easeOutBounce(a*2-1)*.5+.5};function Ny(a){if(a&&typeof a=="object"){const s=a.toString();return s==="[object CanvasPattern]"||s==="[object CanvasGradient]"}return!1}function Tx(a){return Ny(a)?a:new rr(a)}function sh(a){return Ny(a)?a:new rr(a).saturate(.5).darken(.1).hexString()}const Yw=["x","y","borderWidth","radius","tension"],Pw=["color","borderColor","backgroundColor"];function qw(a){a.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),a.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:s=>s!=="onProgress"&&s!=="onComplete"&&s!=="fn"}),a.set("animations",{colors:{type:"color",properties:Pw},numbers:{type:"number",properties:Yw}}),a.describe("animations",{_fallback:"animation"}),a.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:s=>s|0}}}})}function Gw(a){a.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const _x=new Map;function Xw(a,s){s=s||{};const l=a+JSON.stringify(s);let i=_x.get(l);return i||(i=new Intl.NumberFormat(a,s),_x.set(l,i)),i}function Ih(a,s,l){return Xw(s,l).format(a)}const Ww={values(a){return Jt(a)?a:""+a},numeric(a,s,l){if(a===0)return"0";const i=this.chart.options.locale;let c,d=a;if(l.length>1){const g=Math.max(Math.abs(l[0].value),Math.abs(l[l.length-1].value));(g<1e-4||g>1e15)&&(c="scientific"),d=Kw(a,l)}const u=py(Math.abs(d)),h=isNaN(u)?1:Math.max(Math.min(-1*Math.floor(u),20),0),f={notation:c,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(f,this.options.ticks.format),Ih(a,i,f)}};function Kw(a,s){let l=s.length>3?s[2].value-s[1].value:s[1].value-s[0].value;return Math.abs(l)>=1&&a!==Math.floor(a)&&(l=a-Math.floor(a)),l}var Sy={formatters:Ww};function Qw(a){a.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(s,l)=>l.lineWidth,tickColor:(s,l)=>l.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Sy.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),a.route("scale.ticks","color","","color"),a.route("scale.grid","color","","borderColor"),a.route("scale.border","color","","borderColor"),a.route("scale.title","color","","color"),a.describe("scale",{_fallback:!1,_scriptable:s=>!s.startsWith("before")&&!s.startsWith("after")&&s!=="callback"&&s!=="parser",_indexable:s=>s!=="borderDash"&&s!=="tickBorderDash"&&s!=="dash"}),a.describe("scales",{_fallback:"scale"}),a.describe("scale.ticks",{_scriptable:s=>s!=="backdropPadding"&&s!=="callback",_indexable:s=>s!=="backdropPadding"})}const Wn=Object.create(null),wh=Object.create(null);function sr(a,s){if(!s)return a;const l=s.split(".");for(let i=0,c=l.length;i<c;++i){const d=l[i];a=a[d]||(a[d]=Object.create(null))}return a}function ah(a,s,l){return typeof s=="string"?cr(sr(a,s),l):cr(sr(a,""),s)}class Zw{constructor(s,l){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,c)=>sh(c.backgroundColor),this.hoverBorderColor=(i,c)=>sh(c.borderColor),this.hoverColor=(i,c)=>sh(c.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(s),this.apply(l)}set(s,l){return ah(this,s,l)}get(s){return sr(this,s)}describe(s,l){return ah(wh,s,l)}override(s,l){return ah(Wn,s,l)}route(s,l,i,c){const d=sr(this,s),u=sr(this,i),h="_"+l;Object.defineProperties(d,{[h]:{value:d[l],writable:!0},[l]:{enumerable:!0,get(){const f=this[h],g=u[c];return mt(f)?Object.assign({},g,f):ht(f,g)},set(f){this[h]=f}}})}apply(s){s.forEach(l=>l(this))}}var Ft=new Zw({_scriptable:a=>!a.startsWith("on"),_indexable:a=>a!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[qw,Gw,Qw]);function Jw(a){return!a||Et(a.size)||Et(a.family)?null:(a.style?a.style+" ":"")+(a.weight?a.weight+" ":"")+a.size+"px "+a.family}function kx(a,s,l,i,c){let d=s[c];return d||(d=s[c]=a.measureText(c).width,l.push(c)),d>i&&(i=d),i}function Hn(a,s,l){const i=a.currentDevicePixelRatio,c=l!==0?Math.max(l/2,.5):0;return Math.round((s-c)*i)/i+c}function Dx(a,s){!s&&!a||(s=s||a.getContext("2d"),s.save(),s.resetTransform(),s.clearRect(0,0,a.width,a.height),s.restore())}function Mx(a,s,l,i){wy(a,s,l,i,null)}function wy(a,s,l,i,c){let d,u,h,f,g,b,y,v;const C=s.pointStyle,w=s.rotation,A=s.radius;let S=(w||0)*Dw;if(C&&typeof C=="object"&&(d=C.toString(),d==="[object HTMLImageElement]"||d==="[object HTMLCanvasElement]")){a.save(),a.translate(l,i),a.rotate(S),a.drawImage(C,-C.width/2,-C.height/2,C.width,C.height),a.restore();return}if(!(isNaN(A)||A<=0)){switch(a.beginPath(),C){default:c?a.ellipse(l,i,c/2,A,0,0,Xt):a.arc(l,i,A,0,Xt),a.closePath();break;case"triangle":b=c?c/2:A,a.moveTo(l+Math.sin(S)*b,i-Math.cos(S)*A),S+=Nx,a.lineTo(l+Math.sin(S)*b,i-Math.cos(S)*A),S+=Nx,a.lineTo(l+Math.sin(S)*b,i-Math.cos(S)*A),a.closePath();break;case"rectRounded":g=A*.516,f=A-g,u=Math.cos(S+Fn)*f,y=Math.cos(S+Fn)*(c?c/2-g:f),h=Math.sin(S+Fn)*f,v=Math.sin(S+Fn)*(c?c/2-g:f),a.arc(l-y,i-h,g,S-Mt,S-Kt),a.arc(l+v,i-u,g,S-Kt,S),a.arc(l+y,i+h,g,S,S+Kt),a.arc(l-v,i+u,g,S+Kt,S+Mt),a.closePath();break;case"rect":if(!w){f=Math.SQRT1_2*A,b=c?c/2:f,a.rect(l-b,i-f,2*b,2*f);break}S+=Fn;case"rectRot":y=Math.cos(S)*(c?c/2:A),u=Math.cos(S)*A,h=Math.sin(S)*A,v=Math.sin(S)*(c?c/2:A),a.moveTo(l-y,i-h),a.lineTo(l+v,i-u),a.lineTo(l+y,i+h),a.lineTo(l-v,i+u),a.closePath();break;case"crossRot":S+=Fn;case"cross":y=Math.cos(S)*(c?c/2:A),u=Math.cos(S)*A,h=Math.sin(S)*A,v=Math.sin(S)*(c?c/2:A),a.moveTo(l-y,i-h),a.lineTo(l+y,i+h),a.moveTo(l+v,i-u),a.lineTo(l-v,i+u);break;case"star":y=Math.cos(S)*(c?c/2:A),u=Math.cos(S)*A,h=Math.sin(S)*A,v=Math.sin(S)*(c?c/2:A),a.moveTo(l-y,i-h),a.lineTo(l+y,i+h),a.moveTo(l+v,i-u),a.lineTo(l-v,i+u),S+=Fn,y=Math.cos(S)*(c?c/2:A),u=Math.cos(S)*A,h=Math.sin(S)*A,v=Math.sin(S)*(c?c/2:A),a.moveTo(l-y,i-h),a.lineTo(l+y,i+h),a.moveTo(l+v,i-u),a.lineTo(l-v,i+u);break;case"line":u=c?c/2:Math.cos(S)*A,h=Math.sin(S)*A,a.moveTo(l-u,i-h),a.lineTo(l+u,i+h);break;case"dash":a.moveTo(l,i),a.lineTo(l+Math.cos(S)*(c?c/2:A),i+Math.sin(S)*A);break;case!1:a.closePath();break}a.fill(),s.borderWidth>0&&a.stroke()}}function Cy(a,s,l){return l=l||.5,!s||a&&a.x>s.left-l&&a.x<s.right+l&&a.y>s.top-l&&a.y<s.bottom+l}function Lh(a,s){a.save(),a.beginPath(),a.rect(s.left,s.top,s.right-s.left,s.bottom-s.top),a.clip()}function zh(a){a.restore()}function e1(a,s){s.translation&&a.translate(s.translation[0],s.translation[1]),Et(s.rotation)||a.rotate(s.rotation),s.color&&(a.fillStyle=s.color),s.textAlign&&(a.textAlign=s.textAlign),s.textBaseline&&(a.textBaseline=s.textBaseline)}function t1(a,s,l,i,c){if(c.strikethrough||c.underline){const d=a.measureText(i),u=s-d.actualBoundingBoxLeft,h=s+d.actualBoundingBoxRight,f=l-d.actualBoundingBoxAscent,g=l+d.actualBoundingBoxDescent,b=c.strikethrough?(f+g)/2:g;a.strokeStyle=a.fillStyle,a.beginPath(),a.lineWidth=c.decorationWidth||2,a.moveTo(u,b),a.lineTo(h,b),a.stroke()}}function s1(a,s){const l=a.fillStyle;a.fillStyle=s.color,a.fillRect(s.left,s.top,s.width,s.height),a.fillStyle=l}function yo(a,s,l,i,c,d={}){const u=Jt(s)?s:[s],h=d.strokeWidth>0&&d.strokeColor!=="";let f,g;for(a.save(),a.font=c.string,e1(a,d),f=0;f<u.length;++f)g=u[f],d.backdrop&&s1(a,d.backdrop),h&&(d.strokeColor&&(a.strokeStyle=d.strokeColor),Et(d.strokeWidth)||(a.lineWidth=d.strokeWidth),a.strokeText(g,l,i,d.maxWidth)),a.fillText(g,l,i,d.maxWidth),t1(a,l,i,g,d),i+=Number(c.lineHeight);a.restore()}function vo(a,s){const{x:l,y:i,w:c,h:d,radius:u}=s;a.arc(l+u.topLeft,i+u.topLeft,u.topLeft,1.5*Mt,Mt,!0),a.lineTo(l,i+d-u.bottomLeft),a.arc(l+u.bottomLeft,i+d-u.bottomLeft,u.bottomLeft,Mt,Kt,!0),a.lineTo(l+c-u.bottomRight,i+d),a.arc(l+c-u.bottomRight,i+d-u.bottomRight,u.bottomRight,Kt,0,!0),a.lineTo(l+c,i+u.topRight),a.arc(l+c-u.topRight,i+u.topRight,u.topRight,0,-Kt,!0),a.lineTo(l+u.topLeft,i)}const a1=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,n1=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function l1(a,s){const l=(""+a).match(a1);if(!l||l[1]==="normal")return s*1.2;switch(a=+l[2],l[3]){case"px":return a;case"%":a/=100;break}return s*a}const i1=a=>+a||0;function Uh(a,s){const l={},i=mt(s),c=i?Object.keys(s):s,d=mt(a)?i?u=>ht(a[u],a[s[u]]):u=>a[u]:()=>a;for(const u of c)l[u]=i1(d(u));return l}function Ay(a){return Uh(a,{top:"y",right:"x",bottom:"y",left:"x"})}function Bl(a){return Uh(a,["topLeft","topRight","bottomLeft","bottomRight"])}function ea(a){const s=Ay(a);return s.width=s.left+s.right,s.height=s.top+s.bottom,s}function Ns(a,s){a=a||{},s=s||Ft.font;let l=ht(a.size,s.size);typeof l=="string"&&(l=parseInt(l,10));let i=ht(a.style,s.style);i&&!(""+i).match(n1)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const c={family:ht(a.family,s.family),lineHeight:l1(ht(a.lineHeight,s.lineHeight),l),size:l,style:i,weight:ht(a.weight,s.weight),string:""};return c.string=Jw(c),c}function Hc(a,s,l,i){let c,d,u;for(c=0,d=a.length;c<d;++c)if(u=a[c],u!==void 0&&u!==void 0)return u}function r1(a,s,l){const{min:i,max:c}=a,d=my(s,(c-i)/2),u=(h,f)=>l&&h===0?0:h+f;return{min:u(i,-Math.abs(d)),max:u(c,d)}}function Gl(a,s){return Object.assign(Object.create(a),s)}function Bh(a,s=[""],l,i,c=()=>a[0]){const d=l||a;typeof i>"u"&&(i=ky("_fallback",a));const u={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:a,_rootScopes:d,_fallback:i,_getTarget:c,override:h=>Bh([h,...a],s,d,i)};return new Proxy(u,{deleteProperty(h,f){return delete h[f],delete h._keys,delete a[0][f],!0},get(h,f){return Ty(h,f,()=>p1(f,s,a,h))},getOwnPropertyDescriptor(h,f){return Reflect.getOwnPropertyDescriptor(h._scopes[0],f)},getPrototypeOf(){return Reflect.getPrototypeOf(a[0])},has(h,f){return $x(h).includes(f)},ownKeys(h){return $x(h)},set(h,f,g){const b=h._storage||(h._storage=c());return h[f]=b[f]=g,delete h._keys,!0}})}function Vl(a,s,l,i){const c={_cacheable:!1,_proxy:a,_context:s,_subProxy:l,_stack:new Set,_descriptors:Ey(a,i),setContext:d=>Vl(a,d,l,i),override:d=>Vl(a.override(d),s,l,i)};return new Proxy(c,{deleteProperty(d,u){return delete d[u],delete a[u],!0},get(d,u,h){return Ty(d,u,()=>o1(d,u,h))},getOwnPropertyDescriptor(d,u){return d._descriptors.allKeys?Reflect.has(a,u)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(a,u)},getPrototypeOf(){return Reflect.getPrototypeOf(a)},has(d,u){return Reflect.has(a,u)},ownKeys(){return Reflect.ownKeys(a)},set(d,u,h){return a[u]=h,delete d[u],!0}})}function Ey(a,s={scriptable:!0,indexable:!0}){const{_scriptable:l=s.scriptable,_indexable:i=s.indexable,_allKeys:c=s.allKeys}=a;return{allKeys:c,scriptable:l,indexable:i,isScriptable:Nn(l)?l:()=>l,isIndexable:Nn(i)?i:()=>i}}const c1=(a,s)=>a?a+$h(s):s,Fh=(a,s)=>mt(s)&&a!=="adapters"&&(Object.getPrototypeOf(s)===null||s.constructor===Object);function Ty(a,s,l){if(Object.prototype.hasOwnProperty.call(a,s)||s==="constructor")return a[s];const i=l();return a[s]=i,i}function o1(a,s,l){const{_proxy:i,_context:c,_subProxy:d,_descriptors:u}=a;let h=i[s];return Nn(h)&&u.isScriptable(s)&&(h=d1(s,h,a,l)),Jt(h)&&h.length&&(h=u1(s,h,a,u.isIndexable)),Fh(s,h)&&(h=Vl(h,c,d&&d[s],u)),h}function d1(a,s,l,i){const{_proxy:c,_context:d,_subProxy:u,_stack:h}=l;if(h.has(a))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+a);h.add(a);let f=s(d,u||i);return h.delete(a),Fh(a,f)&&(f=Hh(c._scopes,c,a,f)),f}function u1(a,s,l,i){const{_proxy:c,_context:d,_subProxy:u,_descriptors:h}=l;if(typeof d.index<"u"&&i(a))return s[d.index%s.length];if(mt(s[0])){const f=s,g=c._scopes.filter(b=>b!==f);s=[];for(const b of f){const y=Hh(g,c,a,b);s.push(Vl(y,d,u&&u[a],h))}}return s}function _y(a,s,l){return Nn(a)?a(s,l):a}const h1=(a,s)=>a===!0?s:typeof a=="string"?Xn(s,a):void 0;function m1(a,s,l,i,c){for(const d of s){const u=h1(l,d);if(u){a.add(u);const h=_y(u._fallback,l,c);if(typeof h<"u"&&h!==l&&h!==i)return h}else if(u===!1&&typeof i<"u"&&l!==i)return null}return!1}function Hh(a,s,l,i){const c=s._rootScopes,d=_y(s._fallback,l,i),u=[...a,...c],h=new Set;h.add(i);let f=Rx(h,u,l,d||l,i);return f===null||typeof d<"u"&&d!==l&&(f=Rx(h,u,d,f,i),f===null)?!1:Bh(Array.from(h),[""],c,d,()=>f1(s,l,i))}function Rx(a,s,l,i,c){for(;l;)l=m1(a,s,l,i,c);return l}function f1(a,s,l){const i=a._getTarget();s in i||(i[s]={});const c=i[s];return Jt(c)&&mt(l)?l:c||{}}function p1(a,s,l,i){let c;for(const d of s)if(c=ky(c1(d,a),l),typeof c<"u")return Fh(a,c)?Hh(l,i,a,c):c}function ky(a,s){for(const l of s){if(!l)continue;const i=l[a];if(typeof i<"u")return i}}function $x(a){let s=a._keys;return s||(s=a._keys=g1(a._scopes)),s}function g1(a){const s=new Set;for(const l of a)for(const i of Object.keys(l).filter(c=>!c.startsWith("_")))s.add(i);return Array.from(s)}function Vh(){return typeof window<"u"&&typeof document<"u"}function Yh(a){let s=a.parentNode;return s&&s.toString()==="[object ShadowRoot]"&&(s=s.host),s}function jo(a,s,l){let i;return typeof a=="string"?(i=parseInt(a,10),a.indexOf("%")!==-1&&(i=i/100*s.parentNode[l])):i=a,i}const Do=a=>a.ownerDocument.defaultView.getComputedStyle(a,null);function x1(a,s){return Do(a).getPropertyValue(s)}const b1=["top","right","bottom","left"];function Gn(a,s,l){const i={};l=l?"-"+l:"";for(let c=0;c<4;c++){const d=b1[c];i[d]=parseFloat(a[s+"-"+d+l])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const y1=(a,s,l)=>(a>0||s>0)&&(!l||!l.shadowRoot);function v1(a,s){const l=a.touches,i=l&&l.length?l[0]:a,{offsetX:c,offsetY:d}=i;let u=!1,h,f;if(y1(c,d,a.target))h=c,f=d;else{const g=s.getBoundingClientRect();h=i.clientX-g.left,f=i.clientY-g.top,u=!0}return{x:h,y:f,box:u}}function Yn(a,s){if("native"in a)return a;const{canvas:l,currentDevicePixelRatio:i}=s,c=Do(l),d=c.boxSizing==="border-box",u=Gn(c,"padding"),h=Gn(c,"border","width"),{x:f,y:g,box:b}=v1(a,l),y=u.left+(b&&h.left),v=u.top+(b&&h.top);let{width:C,height:w}=s;return d&&(C-=u.width+h.width,w-=u.height+h.height),{x:Math.round((f-y)/C*l.width/i),y:Math.round((g-v)/w*l.height/i)}}function j1(a,s,l){let i,c;if(s===void 0||l===void 0){const d=a&&Yh(a);if(!d)s=a.clientWidth,l=a.clientHeight;else{const u=d.getBoundingClientRect(),h=Do(d),f=Gn(h,"border","width"),g=Gn(h,"padding");s=u.width-g.width-f.width,l=u.height-g.height-f.height,i=jo(h.maxWidth,d,"clientWidth"),c=jo(h.maxHeight,d,"clientHeight")}}return{width:s,height:l,maxWidth:i||go,maxHeight:c||go}}const gn=a=>Math.round(a*10)/10;function N1(a,s,l,i){const c=Do(a),d=Gn(c,"margin"),u=jo(c.maxWidth,a,"clientWidth")||go,h=jo(c.maxHeight,a,"clientHeight")||go,f=j1(a,s,l);let{width:g,height:b}=f;if(c.boxSizing==="content-box"){const v=Gn(c,"border","width"),C=Gn(c,"padding");g-=C.width+v.width,b-=C.height+v.height}return g=Math.max(0,g-d.width),b=Math.max(0,i?g/i:b-d.height),g=gn(Math.min(g,u,f.maxWidth)),b=gn(Math.min(b,h,f.maxHeight)),g&&!b&&(b=gn(g/2)),(s!==void 0||l!==void 0)&&i&&f.height&&b>f.height&&(b=f.height,g=gn(Math.floor(b*i))),{width:g,height:b}}function Ox(a,s,l){const i=s||1,c=gn(a.height*i),d=gn(a.width*i);a.height=gn(a.height),a.width=gn(a.width);const u=a.canvas;return u.style&&(l||!u.style.height&&!u.style.width)&&(u.style.height=`${a.height}px`,u.style.width=`${a.width}px`),a.currentDevicePixelRatio!==i||u.height!==c||u.width!==d?(a.currentDevicePixelRatio=i,u.height=c,u.width=d,a.ctx.setTransform(i,0,0,i,0,0),!0):!1}const S1=(function(){let a=!1;try{const s={get passive(){return a=!0,!1}};Vh()&&(window.addEventListener("test",null,s),window.removeEventListener("test",null,s))}catch{}return a})();function Ix(a,s){const l=x1(a,s),i=l&&l.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const w1=function(a,s){return{x(l){return a+a+s-l},setWidth(l){s=l},textAlign(l){return l==="center"?l:l==="right"?"left":"right"},xPlus(l,i){return l-i},leftForLtr(l,i){return l-i}}},C1=function(){return{x(a){return a},setWidth(a){},textAlign(a){return a},xPlus(a,s){return a+s},leftForLtr(a,s){return a}}};function Fl(a,s,l){return a?w1(s,l):C1()}function Dy(a,s){let l,i;(s==="ltr"||s==="rtl")&&(l=a.canvas.style,i=[l.getPropertyValue("direction"),l.getPropertyPriority("direction")],l.setProperty("direction",s,"important"),a.prevTextDirection=i)}function My(a,s){s!==void 0&&(delete a.prevTextDirection,a.canvas.style.setProperty("direction",s[0],s[1]))}function Vc(a,s,l){return a.options.clip?a[l]:s[l]}function A1(a,s){const{xScale:l,yScale:i}=a;return l&&i?{left:Vc(l,s,"left"),right:Vc(l,s,"right"),top:Vc(i,s,"top"),bottom:Vc(i,s,"bottom")}:s}function E1(a,s){const l=s._clip;if(l.disabled)return!1;const i=A1(s,a.chartArea);return{left:l.left===!1?0:i.left-(l.left===!0?0:l.left),right:l.right===!1?a.width:i.right+(l.right===!0?0:l.right),top:l.top===!1?0:i.top-(l.top===!0?0:l.top),bottom:l.bottom===!1?a.height:i.bottom+(l.bottom===!0?0:l.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class T1{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(s,l,i,c){const d=l.listeners[c],u=l.duration;d.forEach(h=>h({chart:s,initial:l.initial,numSteps:u,currentStep:Math.min(i-l.start,u)}))}_refresh(){this._request||(this._running=!0,this._request=yy.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(s=Date.now()){let l=0;this._charts.forEach((i,c)=>{if(!i.running||!i.items.length)return;const d=i.items;let u=d.length-1,h=!1,f;for(;u>=0;--u)f=d[u],f._active?(f._total>i.duration&&(i.duration=f._total),f.tick(s),h=!0):(d[u]=d[d.length-1],d.pop());h&&(c.draw(),this._notify(c,i,s,"progress")),d.length||(i.running=!1,this._notify(c,i,s,"complete"),i.initial=!1),l+=d.length}),this._lastDate=s,l===0&&(this._running=!1)}_getAnims(s){const l=this._charts;let i=l.get(s);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},l.set(s,i)),i}listen(s,l,i){this._getAnims(s).listeners[l].push(i)}add(s,l){!l||!l.length||this._getAnims(s).items.push(...l)}has(s){return this._getAnims(s).items.length>0}start(s){const l=this._charts.get(s);l&&(l.running=!0,l.start=Date.now(),l.duration=l.items.reduce((i,c)=>Math.max(i,c._duration),0),this._refresh())}running(s){if(!this._running)return!1;const l=this._charts.get(s);return!(!l||!l.running||!l.items.length)}stop(s){const l=this._charts.get(s);if(!l||!l.items.length)return;const i=l.items;let c=i.length-1;for(;c>=0;--c)i[c].cancel();l.items=[],this._notify(s,l,Date.now(),"complete")}remove(s){return this._charts.delete(s)}}var $a=new T1;const Lx="transparent",_1={boolean(a,s,l){return l>.5?s:a},color(a,s,l){const i=Tx(a||Lx),c=i.valid&&Tx(s||Lx);return c&&c.valid?c.mix(i,l).hexString():s},number(a,s,l){return a+(s-a)*l}};class k1{constructor(s,l,i,c){const d=l[i];c=Hc([s.to,c,d,s.from]);const u=Hc([s.from,d,c]);this._active=!0,this._fn=s.fn||_1[s.type||typeof u],this._easing=tr[s.easing]||tr.linear,this._start=Math.floor(Date.now()+(s.delay||0)),this._duration=this._total=Math.floor(s.duration),this._loop=!!s.loop,this._target=l,this._prop=i,this._from=u,this._to=c,this._promises=void 0}active(){return this._active}update(s,l,i){if(this._active){this._notify(!1);const c=this._target[this._prop],d=i-this._start,u=this._duration-d;this._start=i,this._duration=Math.floor(Math.max(u,s.duration)),this._total+=d,this._loop=!!s.loop,this._to=Hc([s.to,l,c,s.from]),this._from=Hc([s.from,c,l])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(s){const l=s-this._start,i=this._duration,c=this._prop,d=this._from,u=this._loop,h=this._to;let f;if(this._active=d!==h&&(u||l<i),!this._active){this._target[c]=h,this._notify(!0);return}if(l<0){this._target[c]=d;return}f=l/i%2,f=u&&f>1?2-f:f,f=this._easing(Math.min(1,Math.max(0,f))),this._target[c]=this._fn(d,h,f)}wait(){const s=this._promises||(this._promises=[]);return new Promise((l,i)=>{s.push({res:l,rej:i})})}_notify(s){const l=s?"res":"rej",i=this._promises||[];for(let c=0;c<i.length;c++)i[c][l]()}}class Ry{constructor(s,l){this._chart=s,this._properties=new Map,this.configure(l)}configure(s){if(!mt(s))return;const l=Object.keys(Ft.animation),i=this._properties;Object.getOwnPropertyNames(s).forEach(c=>{const d=s[c];if(!mt(d))return;const u={};for(const h of l)u[h]=d[h];(Jt(d.properties)&&d.properties||[c]).forEach(h=>{(h===c||!i.has(h))&&i.set(h,u)})})}_animateOptions(s,l){const i=l.options,c=M1(s,i);if(!c)return[];const d=this._createAnimations(c,i);return i.$shared&&D1(s.options.$animations,i).then(()=>{s.options=i},()=>{}),d}_createAnimations(s,l){const i=this._properties,c=[],d=s.$animations||(s.$animations={}),u=Object.keys(l),h=Date.now();let f;for(f=u.length-1;f>=0;--f){const g=u[f];if(g.charAt(0)==="$")continue;if(g==="options"){c.push(...this._animateOptions(s,l));continue}const b=l[g];let y=d[g];const v=i.get(g);if(y)if(v&&y.active()){y.update(v,b,h);continue}else y.cancel();if(!v||!v.duration){s[g]=b;continue}d[g]=y=new k1(v,s,g,b),c.push(y)}return c}update(s,l){if(this._properties.size===0){Object.assign(s,l);return}const i=this._createAnimations(s,l);if(i.length)return $a.add(this._chart,i),!0}}function D1(a,s){const l=[],i=Object.keys(s);for(let c=0;c<i.length;c++){const d=a[i[c]];d&&d.active()&&l.push(d.wait())}return Promise.all(l)}function M1(a,s){if(!s)return;let l=a.options;if(!l){a.options=s;return}return l.$shared&&(a.options=l=Object.assign({},l,{$shared:!1,$animations:{}})),l}function zx(a,s){const l=a&&a.options||{},i=l.reverse,c=l.min===void 0?s:0,d=l.max===void 0?s:0;return{start:i?d:c,end:i?c:d}}function R1(a,s,l){if(l===!1)return!1;const i=zx(a,l),c=zx(s,l);return{top:c.end,right:i.end,bottom:c.start,left:i.start}}function $1(a){let s,l,i,c;return mt(a)?(s=a.top,l=a.right,i=a.bottom,c=a.left):s=l=i=c=a,{top:s,right:l,bottom:i,left:c,disabled:a===!1}}function $y(a,s){const l=[],i=a._getSortedDatasetMetas(s);let c,d;for(c=0,d=i.length;c<d;++c)l.push(i[c].index);return l}function Ux(a,s,l,i={}){const c=a.keys,d=i.mode==="single";let u,h,f,g;if(s===null)return;let b=!1;for(u=0,h=c.length;u<h;++u){if(f=+c[u],f===l){if(b=!0,i.all)continue;break}g=a.values[f],Gs(g)&&(d||s===0||jn(s)===jn(g))&&(s+=g)}return!b&&!i.all?0:s}function O1(a,s){const{iScale:l,vScale:i}=s,c=l.axis==="x"?"x":"y",d=i.axis==="x"?"x":"y",u=Object.keys(a),h=new Array(u.length);let f,g,b;for(f=0,g=u.length;f<g;++f)b=u[f],h[f]={[c]:b,[d]:a[b]};return h}function nh(a,s){const l=a&&a.options.stacked;return l||l===void 0&&s.stack!==void 0}function I1(a,s,l){return`${a.id}.${s.id}.${l.stack||l.type}`}function L1(a){const{min:s,max:l,minDefined:i,maxDefined:c}=a.getUserBounds();return{min:i?s:Number.NEGATIVE_INFINITY,max:c?l:Number.POSITIVE_INFINITY}}function z1(a,s,l){const i=a[s]||(a[s]={});return i[l]||(i[l]={})}function Bx(a,s,l,i){for(const c of s.getMatchingVisibleMetas(i).reverse()){const d=a[c.index];if(l&&d>0||!l&&d<0)return c.index}return null}function Fx(a,s){const{chart:l,_cachedMeta:i}=a,c=l._stacks||(l._stacks={}),{iScale:d,vScale:u,index:h}=i,f=d.axis,g=u.axis,b=I1(d,u,i),y=s.length;let v;for(let C=0;C<y;++C){const w=s[C],{[f]:A,[g]:S}=w,E=w._stacks||(w._stacks={});v=E[g]=z1(c,b,A),v[h]=S,v._top=Bx(v,u,!0,i.type),v._bottom=Bx(v,u,!1,i.type);const $=v._visualValues||(v._visualValues={});$[h]=S}}function lh(a,s){const l=a.scales;return Object.keys(l).filter(i=>l[i].axis===s).shift()}function U1(a,s){return Gl(a,{active:!1,dataset:void 0,datasetIndex:s,index:s,mode:"default",type:"dataset"})}function B1(a,s,l){return Gl(a,{active:!1,dataIndex:s,parsed:void 0,raw:void 0,element:l,index:s,mode:"default",type:"data"})}function Vi(a,s){const l=a.controller.index,i=a.vScale&&a.vScale.axis;if(i){s=s||a._parsed;for(const c of s){const d=c._stacks;if(!d||d[i]===void 0||d[i][l]===void 0)return;delete d[i][l],d[i]._visualValues!==void 0&&d[i]._visualValues[l]!==void 0&&delete d[i]._visualValues[l]}}}const ih=a=>a==="reset"||a==="none",Hx=(a,s)=>s?a:Object.assign({},a),F1=(a,s,l)=>a&&!s.hidden&&s._stacked&&{keys:$y(l,!0),values:null};class Ph{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(s,l){this.chart=s,this._ctx=s.ctx,this.index=l,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const s=this._cachedMeta;this.configure(),this.linkScales(),s._stacked=nh(s.vScale,s),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(s){this.index!==s&&Vi(this._cachedMeta),this.index=s}linkScales(){const s=this.chart,l=this._cachedMeta,i=this.getDataset(),c=(y,v,C,w)=>y==="x"?v:y==="r"?w:C,d=l.xAxisID=ht(i.xAxisID,lh(s,"x")),u=l.yAxisID=ht(i.yAxisID,lh(s,"y")),h=l.rAxisID=ht(i.rAxisID,lh(s,"r")),f=l.indexAxis,g=l.iAxisID=c(f,d,u,h),b=l.vAxisID=c(f,u,d,h);l.xScale=this.getScaleForId(d),l.yScale=this.getScaleForId(u),l.rScale=this.getScaleForId(h),l.iScale=this.getScaleForId(g),l.vScale=this.getScaleForId(b)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(s){return this.chart.scales[s]}_getOtherScale(s){const l=this._cachedMeta;return s===l.iScale?l.vScale:l.iScale}reset(){this._update("reset")}_destroy(){const s=this._cachedMeta;this._data&&Cx(this._data,this),s._stacked&&Vi(s)}_dataCheck(){const s=this.getDataset(),l=s.data||(s.data=[]),i=this._data;if(mt(l)){const c=this._cachedMeta;this._data=O1(l,c)}else if(i!==l){if(i){Cx(i,this);const c=this._cachedMeta;Vi(c),c._parsed=[]}l&&Object.isExtensible(l)&&Fw(l,this),this._syncList=[],this._data=l}}addElements(){const s=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(s.dataset=new this.datasetElementType)}buildOrUpdateElements(s){const l=this._cachedMeta,i=this.getDataset();let c=!1;this._dataCheck();const d=l._stacked;l._stacked=nh(l.vScale,l),l.stack!==i.stack&&(c=!0,Vi(l),l.stack=i.stack),this._resyncElements(s),(c||d!==l._stacked)&&(Fx(this,l._parsed),l._stacked=nh(l.vScale,l))}configure(){const s=this.chart.config,l=s.datasetScopeKeys(this._type),i=s.getOptionScopes(this.getDataset(),l,!0);this.options=s.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(s,l){const{_cachedMeta:i,_data:c}=this,{iScale:d,_stacked:u}=i,h=d.axis;let f=s===0&&l===c.length?!0:i._sorted,g=s>0&&i._parsed[s-1],b,y,v;if(this._parsing===!1)i._parsed=c,i._sorted=!0,v=c;else{Jt(c[s])?v=this.parseArrayData(i,c,s,l):mt(c[s])?v=this.parseObjectData(i,c,s,l):v=this.parsePrimitiveData(i,c,s,l);const C=()=>y[h]===null||g&&y[h]<g[h];for(b=0;b<l;++b)i._parsed[b+s]=y=v[b],f&&(C()&&(f=!1),g=y);i._sorted=f}u&&Fx(this,v)}parsePrimitiveData(s,l,i,c){const{iScale:d,vScale:u}=s,h=d.axis,f=u.axis,g=d.getLabels(),b=d===u,y=new Array(c);let v,C,w;for(v=0,C=c;v<C;++v)w=v+i,y[v]={[h]:b||d.parse(g[w],w),[f]:u.parse(l[w],w)};return y}parseArrayData(s,l,i,c){const{xScale:d,yScale:u}=s,h=new Array(c);let f,g,b,y;for(f=0,g=c;f<g;++f)b=f+i,y=l[b],h[f]={x:d.parse(y[0],b),y:u.parse(y[1],b)};return h}parseObjectData(s,l,i,c){const{xScale:d,yScale:u}=s,{xAxisKey:h="x",yAxisKey:f="y"}=this._parsing,g=new Array(c);let b,y,v,C;for(b=0,y=c;b<y;++b)v=b+i,C=l[v],g[b]={x:d.parse(Xn(C,h),v),y:u.parse(Xn(C,f),v)};return g}getParsed(s){return this._cachedMeta._parsed[s]}getDataElement(s){return this._cachedMeta.data[s]}applyStack(s,l,i){const c=this.chart,d=this._cachedMeta,u=l[s.axis],h={keys:$y(c,!0),values:l._stacks[s.axis]._visualValues};return Ux(h,u,d.index,{mode:i})}updateRangeFromParsed(s,l,i,c){const d=i[l.axis];let u=d===null?NaN:d;const h=c&&i._stacks[l.axis];c&&h&&(c.values=h,u=Ux(c,d,this._cachedMeta.index)),s.min=Math.min(s.min,u),s.max=Math.max(s.max,u)}getMinMax(s,l){const i=this._cachedMeta,c=i._parsed,d=i._sorted&&s===i.iScale,u=c.length,h=this._getOtherScale(s),f=F1(l,i,this.chart),g={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:b,max:y}=L1(h);let v,C;function w(){C=c[v];const A=C[h.axis];return!Gs(C[s.axis])||b>A||y<A}for(v=0;v<u&&!(!w()&&(this.updateRangeFromParsed(g,s,C,f),d));++v);if(d){for(v=u-1;v>=0;--v)if(!w()){this.updateRangeFromParsed(g,s,C,f);break}}return g}getAllParsedValues(s){const l=this._cachedMeta._parsed,i=[];let c,d,u;for(c=0,d=l.length;c<d;++c)u=l[c][s.axis],Gs(u)&&i.push(u);return i}getMaxOverflow(){return!1}getLabelAndValue(s){const l=this._cachedMeta,i=l.iScale,c=l.vScale,d=this.getParsed(s);return{label:i?""+i.getLabelForValue(d[i.axis]):"",value:c?""+c.getLabelForValue(d[c.axis]):""}}_update(s){const l=this._cachedMeta;this.update(s||"default"),l._clip=$1(ht(this.options.clip,R1(l.xScale,l.yScale,this.getMaxOverflow())))}update(s){}draw(){const s=this._ctx,l=this.chart,i=this._cachedMeta,c=i.data||[],d=l.chartArea,u=[],h=this._drawStart||0,f=this._drawCount||c.length-h,g=this.options.drawActiveElementsOnTop;let b;for(i.dataset&&i.dataset.draw(s,d,h,f),b=h;b<h+f;++b){const y=c[b];y.hidden||(y.active&&g?u.push(y):y.draw(s,d))}for(b=0;b<u.length;++b)u[b].draw(s,d)}getStyle(s,l){const i=l?"active":"default";return s===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(s||0,i)}getContext(s,l,i){const c=this.getDataset();let d;if(s>=0&&s<this._cachedMeta.data.length){const u=this._cachedMeta.data[s];d=u.$context||(u.$context=B1(this.getContext(),s,u)),d.parsed=this.getParsed(s),d.raw=c.data[s],d.index=d.dataIndex=s}else d=this.$context||(this.$context=U1(this.chart.getContext(),this.index)),d.dataset=c,d.index=d.datasetIndex=this.index;return d.active=!!l,d.mode=i,d}resolveDatasetElementOptions(s){return this._resolveElementOptions(this.datasetElementType.id,s)}resolveDataElementOptions(s,l){return this._resolveElementOptions(this.dataElementType.id,l,s)}_resolveElementOptions(s,l="default",i){const c=l==="active",d=this._cachedDataOpts,u=s+"-"+l,h=d[u],f=this.enableOptionSharing&&or(i);if(h)return Hx(h,f);const g=this.chart.config,b=g.datasetElementScopeKeys(this._type,s),y=c?[`${s}Hover`,"hover",s,""]:[s,""],v=g.getOptionScopes(this.getDataset(),b),C=Object.keys(Ft.elements[s]),w=()=>this.getContext(i,c,l),A=g.resolveNamedOptions(v,C,w,y);return A.$shared&&(A.$shared=f,d[u]=Object.freeze(Hx(A,f))),A}_resolveAnimations(s,l,i){const c=this.chart,d=this._cachedDataOpts,u=`animation-${l}`,h=d[u];if(h)return h;let f;if(c.options.animation!==!1){const b=this.chart.config,y=b.datasetAnimationScopeKeys(this._type,l),v=b.getOptionScopes(this.getDataset(),y);f=b.createResolver(v,this.getContext(s,i,l))}const g=new Ry(c,f&&f.animations);return f&&f._cacheable&&(d[u]=Object.freeze(g)),g}getSharedOptions(s){if(s.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},s))}includeOptions(s,l){return!l||ih(s)||this.chart._animationsDisabled}_getSharedOptions(s,l){const i=this.resolveDataElementOptions(s,l),c=this._sharedOptions,d=this.getSharedOptions(i),u=this.includeOptions(l,d)||d!==c;return this.updateSharedOptions(d,l,i),{sharedOptions:d,includeOptions:u}}updateElement(s,l,i,c){ih(c)?Object.assign(s,i):this._resolveAnimations(l,c).update(s,i)}updateSharedOptions(s,l,i){s&&!ih(l)&&this._resolveAnimations(void 0,l).update(s,i)}_setStyle(s,l,i,c){s.active=c;const d=this.getStyle(l,c);this._resolveAnimations(l,i,c).update(s,{options:!c&&this.getSharedOptions(d)||d})}removeHoverStyle(s,l,i){this._setStyle(s,i,"active",!1)}setHoverStyle(s,l,i){this._setStyle(s,i,"active",!0)}_removeDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!1)}_setDatasetHoverStyle(){const s=this._cachedMeta.dataset;s&&this._setStyle(s,void 0,"active",!0)}_resyncElements(s){const l=this._data,i=this._cachedMeta.data;for(const[h,f,g]of this._syncList)this[h](f,g);this._syncList=[];const c=i.length,d=l.length,u=Math.min(d,c);u&&this.parse(0,u),d>c?this._insertElements(c,d-c,s):d<c&&this._removeElements(d,c-d)}_insertElements(s,l,i=!0){const c=this._cachedMeta,d=c.data,u=s+l;let h;const f=g=>{for(g.length+=l,h=g.length-1;h>=u;h--)g[h]=g[h-l]};for(f(d),h=s;h<u;++h)d[h]=new this.dataElementType;this._parsing&&f(c._parsed),this.parse(s,l),i&&this.updateElements(d,s,l,"reset")}updateElements(s,l,i,c){}_removeElements(s,l){const i=this._cachedMeta;if(this._parsing){const c=i._parsed.splice(s,l);i._stacked&&Vi(i,c)}i.data.splice(s,l)}_sync(s){if(this._parsing)this._syncList.push(s);else{const[l,i,c]=s;this[l](i,c)}this.chart._dataChanges.push([this.index,...s])}_onDataPush(){const s=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-s,s])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(s,l){l&&this._sync(["_removeElements",s,l]);const i=arguments.length-2;i&&this._sync(["_insertElements",s,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function H1(a,s){if(!a._cache.$bar){const l=a.getMatchingVisibleMetas(s);let i=[];for(let c=0,d=l.length;c<d;c++)i=i.concat(l[c].controller.getAllParsedValues(a));a._cache.$bar=by(i.sort((c,d)=>c-d))}return a._cache.$bar}function V1(a){const s=a.iScale,l=H1(s,a.type);let i=s._length,c,d,u,h;const f=()=>{u===32767||u===-32768||(or(h)&&(i=Math.min(i,Math.abs(u-h)||i)),h=u)};for(c=0,d=l.length;c<d;++c)u=s.getPixelForValue(l[c]),f();for(h=void 0,c=0,d=s.ticks.length;c<d;++c)u=s.getPixelForTick(c),f();return i}function Y1(a,s,l,i){const c=l.barThickness;let d,u;return Et(c)?(d=s.min*l.categoryPercentage,u=l.barPercentage):(d=c*i,u=1),{chunk:d/i,ratio:u,start:s.pixels[a]-d/2}}function P1(a,s,l,i){const c=s.pixels,d=c[a];let u=a>0?c[a-1]:null,h=a<c.length-1?c[a+1]:null;const f=l.categoryPercentage;u===null&&(u=d-(h===null?s.end-s.start:h-d)),h===null&&(h=d+d-u);const g=d-(d-Math.min(u,h))/2*f;return{chunk:Math.abs(h-u)/2*f/i,ratio:l.barPercentage,start:g}}function q1(a,s,l,i){const c=l.parse(a[0],i),d=l.parse(a[1],i),u=Math.min(c,d),h=Math.max(c,d);let f=u,g=h;Math.abs(u)>Math.abs(h)&&(f=h,g=u),s[l.axis]=g,s._custom={barStart:f,barEnd:g,start:c,end:d,min:u,max:h}}function Oy(a,s,l,i){return Jt(a)?q1(a,s,l,i):s[l.axis]=l.parse(a,i),s}function Vx(a,s,l,i){const c=a.iScale,d=a.vScale,u=c.getLabels(),h=c===d,f=[];let g,b,y,v;for(g=l,b=l+i;g<b;++g)v=s[g],y={},y[c.axis]=h||c.parse(u[g],g),f.push(Oy(v,y,d,g));return f}function rh(a){return a&&a.barStart!==void 0&&a.barEnd!==void 0}function G1(a,s,l){return a!==0?jn(a):(s.isHorizontal()?1:-1)*(s.min>=l?1:-1)}function X1(a){let s,l,i,c,d;return a.horizontal?(s=a.base>a.x,l="left",i="right"):(s=a.base<a.y,l="bottom",i="top"),s?(c="end",d="start"):(c="start",d="end"),{start:l,end:i,reverse:s,top:c,bottom:d}}function W1(a,s,l,i){let c=s.borderSkipped;const d={};if(!c){a.borderSkipped=d;return}if(c===!0){a.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:u,end:h,reverse:f,top:g,bottom:b}=X1(a);c==="middle"&&l&&(a.enableBorderRadius=!0,(l._top||0)===i?c=g:(l._bottom||0)===i?c=b:(d[Yx(b,u,h,f)]=!0,c=g)),d[Yx(c,u,h,f)]=!0,a.borderSkipped=d}function Yx(a,s,l,i){return i?(a=K1(a,s,l),a=Px(a,l,s)):a=Px(a,s,l),a}function K1(a,s,l){return a===s?l:a===l?s:a}function Px(a,s,l){return a==="start"?s:a==="end"?l:a}function Q1(a,{inflateAmount:s},l){a.inflateAmount=s==="auto"?l===1?.33:0:s}class Z1 extends Ph{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(s,l,i,c){return Vx(s,l,i,c)}parseArrayData(s,l,i,c){return Vx(s,l,i,c)}parseObjectData(s,l,i,c){const{iScale:d,vScale:u}=s,{xAxisKey:h="x",yAxisKey:f="y"}=this._parsing,g=d.axis==="x"?h:f,b=u.axis==="x"?h:f,y=[];let v,C,w,A;for(v=i,C=i+c;v<C;++v)A=l[v],w={},w[d.axis]=d.parse(Xn(A,g),v),y.push(Oy(Xn(A,b),w,u,v));return y}updateRangeFromParsed(s,l,i,c){super.updateRangeFromParsed(s,l,i,c);const d=i._custom;d&&l===this._cachedMeta.vScale&&(s.min=Math.min(s.min,d.min),s.max=Math.max(s.max,d.max))}getMaxOverflow(){return 0}getLabelAndValue(s){const l=this._cachedMeta,{iScale:i,vScale:c}=l,d=this.getParsed(s),u=d._custom,h=rh(u)?"["+u.start+", "+u.end+"]":""+c.getLabelForValue(d[c.axis]);return{label:""+i.getLabelForValue(d[i.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const s=this._cachedMeta;s.stack=this.getDataset().stack}update(s){const l=this._cachedMeta;this.updateElements(l.data,0,l.data.length,s)}updateElements(s,l,i,c){const d=c==="reset",{index:u,_cachedMeta:{vScale:h}}=this,f=h.getBasePixel(),g=h.isHorizontal(),b=this._getRuler(),{sharedOptions:y,includeOptions:v}=this._getSharedOptions(l,c);for(let C=l;C<l+i;C++){const w=this.getParsed(C),A=d||Et(w[h.axis])?{base:f,head:f}:this._calculateBarValuePixels(C),S=this._calculateBarIndexPixels(C,b),E=(w._stacks||{})[h.axis],$={horizontal:g,base:A.base,enableBorderRadius:!E||rh(w._custom)||u===E._top||u===E._bottom,x:g?A.head:S.center,y:g?S.center:A.head,height:g?S.size:Math.abs(A.size),width:g?Math.abs(A.size):S.size};v&&($.options=y||this.resolveDataElementOptions(C,s[C].active?"active":c));const D=$.options||s[C].options;W1($,D,E,u),Q1($,D,b.ratio),this.updateElement(s[C],C,$,c)}}_getStacks(s,l){const{iScale:i}=this._cachedMeta,c=i.getMatchingVisibleMetas(this._type).filter(b=>b.controller.options.grouped),d=i.options.stacked,u=[],h=this._cachedMeta.controller.getParsed(l),f=h&&h[i.axis],g=b=>{const y=b._parsed.find(C=>C[i.axis]===f),v=y&&y[b.vScale.axis];if(Et(v)||isNaN(v))return!0};for(const b of c)if(!(l!==void 0&&g(b))&&((d===!1||u.indexOf(b.stack)===-1||d===void 0&&b.stack===void 0)&&u.push(b.stack),b.index===s))break;return u.length||u.push(void 0),u}_getStackCount(s){return this._getStacks(void 0,s).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const s=this.chart.scales,l=this.chart.options.indexAxis;return Object.keys(s).filter(i=>s[i].axis===l).shift()}_getAxis(){const s={},l=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)s[ht(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,l)]=!0;return Object.keys(s)}_getStackIndex(s,l,i){const c=this._getStacks(s,i),d=l!==void 0?c.indexOf(l):-1;return d===-1?c.length-1:d}_getRuler(){const s=this.options,l=this._cachedMeta,i=l.iScale,c=[];let d,u;for(d=0,u=l.data.length;d<u;++d)c.push(i.getPixelForValue(this.getParsed(d)[i.axis],d));const h=s.barThickness;return{min:h||V1(l),pixels:c,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:s.grouped,ratio:h?1:s.categoryPercentage*s.barPercentage}}_calculateBarValuePixels(s){const{_cachedMeta:{vScale:l,_stacked:i,index:c},options:{base:d,minBarLength:u}}=this,h=d||0,f=this.getParsed(s),g=f._custom,b=rh(g);let y=f[l.axis],v=0,C=i?this.applyStack(l,f,i):y,w,A;C!==y&&(v=C-y,C=y),b&&(y=g.barStart,C=g.barEnd-g.barStart,y!==0&&jn(y)!==jn(g.barEnd)&&(v=0),v+=y);const S=!Et(d)&&!b?d:v;let E=l.getPixelForValue(S);if(this.chart.getDataVisibility(s)?w=l.getPixelForValue(v+C):w=E,A=w-E,Math.abs(A)<u){A=G1(A,l,h)*u,y===h&&(E-=A/2);const $=l.getPixelForDecimal(0),D=l.getPixelForDecimal(1),I=Math.min($,D),V=Math.max($,D);E=Math.max(Math.min(E,V),I),w=E+A,i&&!b&&(f._stacks[l.axis]._visualValues[c]=l.getValueForPixel(w)-l.getValueForPixel(E))}if(E===l.getPixelForValue(h)){const $=jn(A)*l.getLineWidthForValue(h)/2;E+=$,A-=$}return{size:A,base:E,head:w,center:w+A/2}}_calculateBarIndexPixels(s,l){const i=l.scale,c=this.options,d=c.skipNull,u=ht(c.maxBarThickness,1/0);let h,f;const g=this._getAxisCount();if(l.grouped){const b=d?this._getStackCount(s):l.stackCount,y=c.barThickness==="flex"?P1(s,l,c,b*g):Y1(s,l,c,b*g),v=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,C=this._getAxis().indexOf(ht(v,this.getFirstScaleIdForIndexAxis())),w=this._getStackIndex(this.index,this._cachedMeta.stack,d?s:void 0)+C;h=y.start+y.chunk*w+y.chunk/2,f=Math.min(u,y.chunk*y.ratio)}else h=i.getPixelForValue(this.getParsed(s)[i.axis],s),f=Math.min(u,l.min*l.ratio);return{base:h-f/2,head:h+f/2,center:h,size:f}}draw(){const s=this._cachedMeta,l=s.vScale,i=s.data,c=i.length;let d=0;for(;d<c;++d)this.getParsed(d)[l.axis]!==null&&!i[d].hidden&&i[d].draw(this._ctx)}}function J1(a,s,l){let i=1,c=1,d=0,u=0;if(s<Xt){const h=a,f=h+s,g=Math.cos(h),b=Math.sin(h),y=Math.cos(f),v=Math.sin(f),C=(D,I,V)=>bo(D,h,f,!0)?1:Math.max(I,I*l,V,V*l),w=(D,I,V)=>bo(D,h,f,!0)?-1:Math.min(I,I*l,V,V*l),A=C(0,g,y),S=C(Kt,b,v),E=w(Mt,g,y),$=w(Mt+Kt,b,v);i=(A-E)/2,c=(S-$)/2,d=-(A+E)/2,u=-(S+$)/2}return{ratioX:i,ratioY:c,offsetX:d,offsetY:u}}class eC extends Ph{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:s=>s!=="spacing",_indexable:s=>s!=="spacing"&&!s.startsWith("borderDash")&&!s.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(s){const l=s.data,{labels:{pointStyle:i,textAlign:c,color:d,useBorderRadius:u,borderRadius:h}}=s.legend.options;return l.labels.length&&l.datasets.length?l.labels.map((f,g)=>{const y=s.getDatasetMeta(0).controller.getStyle(g);return{text:f,fillStyle:y.backgroundColor,fontColor:d,hidden:!s.getDataVisibility(g),lineDash:y.borderDash,lineDashOffset:y.borderDashOffset,lineJoin:y.borderJoinStyle,lineWidth:y.borderWidth,strokeStyle:y.borderColor,textAlign:c,pointStyle:i,borderRadius:u&&(h||y.borderRadius),index:g}}):[]}},onClick(s,l,i){i.chart.toggleDataVisibility(l.index),i.chart.update()}}}};constructor(s,l){super(s,l),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(s,l){const i=this.getDataset().data,c=this._cachedMeta;if(this._parsing===!1)c._parsed=i;else{let d=f=>+i[f];if(mt(i[s])){const{key:f="value"}=this._parsing;d=g=>+Xn(i[g],f)}let u,h;for(u=s,h=s+l;u<h;++u)c._parsed[u]=d(u)}}_getRotation(){return La(this.options.rotation-90)}_getCircumference(){return La(this.options.circumference)}_getRotationExtents(){let s=Xt,l=-Xt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const c=this.chart.getDatasetMeta(i).controller,d=c._getRotation(),u=c._getCircumference();s=Math.min(s,d),l=Math.max(l,d+u)}return{rotation:s,circumference:l-s}}update(s){const l=this.chart,{chartArea:i}=l,c=this._cachedMeta,d=c.data,u=this.getMaxBorderWidth()+this.getMaxOffset(d)+this.options.spacing,h=Math.max((Math.min(i.width,i.height)-u)/2,0),f=Math.min(Cw(this.options.cutout,h),1),g=this._getRingWeight(this.index),{circumference:b,rotation:y}=this._getRotationExtents(),{ratioX:v,ratioY:C,offsetX:w,offsetY:A}=J1(y,b,f),S=(i.width-u)/v,E=(i.height-u)/C,$=Math.max(Math.min(S,E)/2,0),D=my(this.options.radius,$),I=Math.max(D*f,0),V=(D-I)/this._getVisibleDatasetWeightTotal();this.offsetX=w*D,this.offsetY=A*D,c.total=this.calculateTotal(),this.outerRadius=D-V*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-V*g,0),this.updateElements(d,0,d.length,s)}_circumference(s,l){const i=this.options,c=this._cachedMeta,d=this._getCircumference();return l&&i.animation.animateRotate||!this.chart.getDataVisibility(s)||c._parsed[s]===null||c.data[s].hidden?0:this.calculateCircumference(c._parsed[s]*d/Xt)}updateElements(s,l,i,c){const d=c==="reset",u=this.chart,h=u.chartArea,g=u.options.animation,b=(h.left+h.right)/2,y=(h.top+h.bottom)/2,v=d&&g.animateScale,C=v?0:this.innerRadius,w=v?0:this.outerRadius,{sharedOptions:A,includeOptions:S}=this._getSharedOptions(l,c);let E=this._getRotation(),$;for($=0;$<l;++$)E+=this._circumference($,d);for($=l;$<l+i;++$){const D=this._circumference($,d),I=s[$],V={x:b+this.offsetX,y:y+this.offsetY,startAngle:E,endAngle:E+D,circumference:D,outerRadius:w,innerRadius:C};S&&(V.options=A||this.resolveDataElementOptions($,I.active?"active":c)),E+=D,this.updateElement(I,$,V,c)}}calculateTotal(){const s=this._cachedMeta,l=s.data;let i=0,c;for(c=0;c<l.length;c++){const d=s._parsed[c];d!==null&&!isNaN(d)&&this.chart.getDataVisibility(c)&&!l[c].hidden&&(i+=Math.abs(d))}return i}calculateCircumference(s){const l=this._cachedMeta.total;return l>0&&!isNaN(s)?Xt*(Math.abs(s)/l):0}getLabelAndValue(s){const l=this._cachedMeta,i=this.chart,c=i.data.labels||[],d=Ih(l._parsed[s],i.options.locale);return{label:c[s]||"",value:d}}getMaxBorderWidth(s){let l=0;const i=this.chart;let c,d,u,h,f;if(!s){for(c=0,d=i.data.datasets.length;c<d;++c)if(i.isDatasetVisible(c)){u=i.getDatasetMeta(c),s=u.data,h=u.controller;break}}if(!s)return 0;for(c=0,d=s.length;c<d;++c)f=h.resolveDataElementOptions(c),f.borderAlign!=="inner"&&(l=Math.max(l,f.borderWidth||0,f.hoverBorderWidth||0));return l}getMaxOffset(s){let l=0;for(let i=0,c=s.length;i<c;++i){const d=this.resolveDataElementOptions(i);l=Math.max(l,d.offset||0,d.hoverOffset||0)}return l}_getRingWeightOffset(s){let l=0;for(let i=0;i<s;++i)this.chart.isDatasetVisible(i)&&(l+=this._getRingWeight(i));return l}_getRingWeight(s){return Math.max(ht(this.chart.data.datasets[s].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function Vn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class qh{static override(s){Object.assign(qh.prototype,s)}options;constructor(s){this.options=s||{}}init(){}formats(){return Vn()}parse(){return Vn()}format(){return Vn()}add(){return Vn()}diff(){return Vn()}startOf(){return Vn()}endOf(){return Vn()}}var tC={_date:qh};function sC(a,s,l,i){const{controller:c,data:d,_sorted:u}=a,h=c._cachedMeta.iScale,f=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null;if(h&&s===h.axis&&s!=="r"&&u&&d.length){const g=h._reversePixels?Uw:Sh;if(i){if(c._sharedOptions){const b=d[0],y=typeof b.getRange=="function"&&b.getRange(s);if(y){const v=g(d,s,l-y),C=g(d,s,l+y);return{lo:v.lo,hi:C.hi}}}}else{const b=g(d,s,l);if(f){const{vScale:y}=c._cachedMeta,{_parsed:v}=a,C=v.slice(0,b.lo+1).reverse().findIndex(A=>!Et(A[y.axis]));b.lo-=Math.max(0,C);const w=v.slice(b.hi).findIndex(A=>!Et(A[y.axis]));b.hi+=Math.max(0,w)}return b}}return{lo:0,hi:d.length-1}}function Mo(a,s,l,i,c){const d=a.getSortedVisibleDatasetMetas(),u=l[s];for(let h=0,f=d.length;h<f;++h){const{index:g,data:b}=d[h],{lo:y,hi:v}=sC(d[h],s,u,c);for(let C=y;C<=v;++C){const w=b[C];w.skip||i(w,g,C)}}}function aC(a){const s=a.indexOf("x")!==-1,l=a.indexOf("y")!==-1;return function(i,c){const d=s?Math.abs(i.x-c.x):0,u=l?Math.abs(i.y-c.y):0;return Math.sqrt(Math.pow(d,2)+Math.pow(u,2))}}function ch(a,s,l,i,c){const d=[];return!c&&!a.isPointInArea(s)||Mo(a,l,s,function(h,f,g){!c&&!Cy(h,a.chartArea,0)||h.inRange(s.x,s.y,i)&&d.push({element:h,datasetIndex:f,index:g})},!0),d}function nC(a,s,l,i){let c=[];function d(u,h,f){const{startAngle:g,endAngle:b}=u.getProps(["startAngle","endAngle"],i),{angle:y}=gy(u,{x:s.x,y:s.y});bo(y,g,b)&&c.push({element:u,datasetIndex:h,index:f})}return Mo(a,l,s,d),c}function lC(a,s,l,i,c,d){let u=[];const h=aC(l);let f=Number.POSITIVE_INFINITY;function g(b,y,v){const C=b.inRange(s.x,s.y,c);if(i&&!C)return;const w=b.getCenterPoint(c);if(!(!!d||a.isPointInArea(w))&&!C)return;const S=h(s,w);S<f?(u=[{element:b,datasetIndex:y,index:v}],f=S):S===f&&u.push({element:b,datasetIndex:y,index:v})}return Mo(a,l,s,g),u}function oh(a,s,l,i,c,d){return!d&&!a.isPointInArea(s)?[]:l==="r"&&!i?nC(a,s,l,c):lC(a,s,l,i,c,d)}function qx(a,s,l,i,c){const d=[],u=l==="x"?"inXRange":"inYRange";let h=!1;return Mo(a,l,s,(f,g,b)=>{f[u]&&f[u](s[l],c)&&(d.push({element:f,datasetIndex:g,index:b}),h=h||f.inRange(s.x,s.y,c))}),i&&!h?[]:d}var iC={modes:{index(a,s,l,i){const c=Yn(s,a),d=l.axis||"x",u=l.includeInvisible||!1,h=l.intersect?ch(a,c,d,i,u):oh(a,c,d,!1,i,u),f=[];return h.length?(a.getSortedVisibleDatasetMetas().forEach(g=>{const b=h[0].index,y=g.data[b];y&&!y.skip&&f.push({element:y,datasetIndex:g.index,index:b})}),f):[]},dataset(a,s,l,i){const c=Yn(s,a),d=l.axis||"xy",u=l.includeInvisible||!1;let h=l.intersect?ch(a,c,d,i,u):oh(a,c,d,!1,i,u);if(h.length>0){const f=h[0].datasetIndex,g=a.getDatasetMeta(f).data;h=[];for(let b=0;b<g.length;++b)h.push({element:g[b],datasetIndex:f,index:b})}return h},point(a,s,l,i){const c=Yn(s,a),d=l.axis||"xy",u=l.includeInvisible||!1;return ch(a,c,d,i,u)},nearest(a,s,l,i){const c=Yn(s,a),d=l.axis||"xy",u=l.includeInvisible||!1;return oh(a,c,d,l.intersect,i,u)},x(a,s,l,i){const c=Yn(s,a);return qx(a,c,"x",l.intersect,i)},y(a,s,l,i){const c=Yn(s,a);return qx(a,c,"y",l.intersect,i)}}};const Iy=["left","top","right","bottom"];function Yi(a,s){return a.filter(l=>l.pos===s)}function Gx(a,s){return a.filter(l=>Iy.indexOf(l.pos)===-1&&l.box.axis===s)}function Pi(a,s){return a.sort((l,i)=>{const c=s?i:l,d=s?l:i;return c.weight===d.weight?c.index-d.index:c.weight-d.weight})}function rC(a){const s=[];let l,i,c,d,u,h;for(l=0,i=(a||[]).length;l<i;++l)c=a[l],{position:d,options:{stack:u,stackWeight:h=1}}=c,s.push({index:l,box:c,pos:d,horizontal:c.isHorizontal(),weight:c.weight,stack:u&&d+u,stackWeight:h});return s}function cC(a){const s={};for(const l of a){const{stack:i,pos:c,stackWeight:d}=l;if(!i||!Iy.includes(c))continue;const u=s[i]||(s[i]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=d}return s}function oC(a,s){const l=cC(a),{vBoxMaxWidth:i,hBoxMaxHeight:c}=s;let d,u,h;for(d=0,u=a.length;d<u;++d){h=a[d];const{fullSize:f}=h.box,g=l[h.stack],b=g&&h.stackWeight/g.weight;h.horizontal?(h.width=b?b*i:f&&s.availableWidth,h.height=c):(h.width=i,h.height=b?b*c:f&&s.availableHeight)}return l}function dC(a){const s=rC(a),l=Pi(s.filter(g=>g.box.fullSize),!0),i=Pi(Yi(s,"left"),!0),c=Pi(Yi(s,"right")),d=Pi(Yi(s,"top"),!0),u=Pi(Yi(s,"bottom")),h=Gx(s,"x"),f=Gx(s,"y");return{fullSize:l,leftAndTop:i.concat(d),rightAndBottom:c.concat(f).concat(u).concat(h),chartArea:Yi(s,"chartArea"),vertical:i.concat(c).concat(f),horizontal:d.concat(u).concat(h)}}function Xx(a,s,l,i){return Math.max(a[l],s[l])+Math.max(a[i],s[i])}function Ly(a,s){a.top=Math.max(a.top,s.top),a.left=Math.max(a.left,s.left),a.bottom=Math.max(a.bottom,s.bottom),a.right=Math.max(a.right,s.right)}function uC(a,s,l,i){const{pos:c,box:d}=l,u=a.maxPadding;if(!mt(c)){l.size&&(a[c]-=l.size);const y=i[l.stack]||{size:0,count:1};y.size=Math.max(y.size,l.horizontal?d.height:d.width),l.size=y.size/y.count,a[c]+=l.size}d.getPadding&&Ly(u,d.getPadding());const h=Math.max(0,s.outerWidth-Xx(u,a,"left","right")),f=Math.max(0,s.outerHeight-Xx(u,a,"top","bottom")),g=h!==a.w,b=f!==a.h;return a.w=h,a.h=f,l.horizontal?{same:g,other:b}:{same:b,other:g}}function hC(a){const s=a.maxPadding;function l(i){const c=Math.max(s[i]-a[i],0);return a[i]+=c,c}a.y+=l("top"),a.x+=l("left"),l("right"),l("bottom")}function mC(a,s){const l=s.maxPadding;function i(c){const d={left:0,top:0,right:0,bottom:0};return c.forEach(u=>{d[u]=Math.max(s[u],l[u])}),d}return i(a?["left","right"]:["top","bottom"])}function Zi(a,s,l,i){const c=[];let d,u,h,f,g,b;for(d=0,u=a.length,g=0;d<u;++d){h=a[d],f=h.box,f.update(h.width||s.w,h.height||s.h,mC(h.horizontal,s));const{same:y,other:v}=uC(s,l,h,i);g|=y&&c.length,b=b||v,f.fullSize||c.push(h)}return g&&Zi(c,s,l,i)||b}function Yc(a,s,l,i,c){a.top=l,a.left=s,a.right=s+i,a.bottom=l+c,a.width=i,a.height=c}function Wx(a,s,l,i){const c=l.padding;let{x:d,y:u}=s;for(const h of a){const f=h.box,g=i[h.stack]||{placed:0,weight:1},b=h.stackWeight/g.weight||1;if(h.horizontal){const y=s.w*b,v=g.size||f.height;or(g.start)&&(u=g.start),f.fullSize?Yc(f,c.left,u,l.outerWidth-c.right-c.left,v):Yc(f,s.left+g.placed,u,y,v),g.start=u,g.placed+=y,u=f.bottom}else{const y=s.h*b,v=g.size||f.width;or(g.start)&&(d=g.start),f.fullSize?Yc(f,d,c.top,v,l.outerHeight-c.bottom-c.top):Yc(f,d,s.top+g.placed,v,y),g.start=d,g.placed+=y,d=f.right}}s.x=d,s.y=u}var xn={addBox(a,s){a.boxes||(a.boxes=[]),s.fullSize=s.fullSize||!1,s.position=s.position||"top",s.weight=s.weight||0,s._layers=s._layers||function(){return[{z:0,draw(l){s.draw(l)}}]},a.boxes.push(s)},removeBox(a,s){const l=a.boxes?a.boxes.indexOf(s):-1;l!==-1&&a.boxes.splice(l,1)},configure(a,s,l){s.fullSize=l.fullSize,s.position=l.position,s.weight=l.weight},update(a,s,l,i){if(!a)return;const c=ea(a.options.layout.padding),d=Math.max(s-c.width,0),u=Math.max(l-c.height,0),h=dC(a.boxes),f=h.vertical,g=h.horizontal;Nt(a.boxes,A=>{typeof A.beforeLayout=="function"&&A.beforeLayout()});const b=f.reduce((A,S)=>S.box.options&&S.box.options.display===!1?A:A+1,0)||1,y=Object.freeze({outerWidth:s,outerHeight:l,padding:c,availableWidth:d,availableHeight:u,vBoxMaxWidth:d/2/b,hBoxMaxHeight:u/2}),v=Object.assign({},c);Ly(v,ea(i));const C=Object.assign({maxPadding:v,w:d,h:u,x:c.left,y:c.top},c),w=oC(f.concat(g),y);Zi(h.fullSize,C,y,w),Zi(f,C,y,w),Zi(g,C,y,w)&&Zi(f,C,y,w),hC(C),Wx(h.leftAndTop,C,y,w),C.x+=C.w,C.y+=C.h,Wx(h.rightAndBottom,C,y,w),a.chartArea={left:C.left,top:C.top,right:C.left+C.w,bottom:C.top+C.h,height:C.h,width:C.w},Nt(h.chartArea,A=>{const S=A.box;Object.assign(S,a.chartArea),S.update(C.w,C.h,{left:0,top:0,right:0,bottom:0})})}};class zy{acquireContext(s,l){}releaseContext(s){return!1}addEventListener(s,l,i){}removeEventListener(s,l,i){}getDevicePixelRatio(){return 1}getMaximumSize(s,l,i,c){return l=Math.max(0,l||s.width),i=i||s.height,{width:l,height:Math.max(0,c?Math.floor(l/c):i)}}isAttached(s){return!0}updateConfig(s){}}class fC extends zy{acquireContext(s){return s&&s.getContext&&s.getContext("2d")||null}updateConfig(s){s.options.animation=!1}}const ro="$chartjs",pC={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Kx=a=>a===null||a==="";function gC(a,s){const l=a.style,i=a.getAttribute("height"),c=a.getAttribute("width");if(a[ro]={initial:{height:i,width:c,style:{display:l.display,height:l.height,width:l.width}}},l.display=l.display||"block",l.boxSizing=l.boxSizing||"border-box",Kx(c)){const d=Ix(a,"width");d!==void 0&&(a.width=d)}if(Kx(i))if(a.style.height==="")a.height=a.width/(s||2);else{const d=Ix(a,"height");d!==void 0&&(a.height=d)}return a}const Uy=S1?{passive:!0}:!1;function xC(a,s,l){a&&a.addEventListener(s,l,Uy)}function bC(a,s,l){a&&a.canvas&&a.canvas.removeEventListener(s,l,Uy)}function yC(a,s){const l=pC[a.type]||a.type,{x:i,y:c}=Yn(a,s);return{type:l,chart:s,native:a,x:i!==void 0?i:null,y:c!==void 0?c:null}}function No(a,s){for(const l of a)if(l===s||l.contains(s))return!0}function vC(a,s,l){const i=a.canvas,c=new MutationObserver(d=>{let u=!1;for(const h of d)u=u||No(h.addedNodes,i),u=u&&!No(h.removedNodes,i);u&&l()});return c.observe(document,{childList:!0,subtree:!0}),c}function jC(a,s,l){const i=a.canvas,c=new MutationObserver(d=>{let u=!1;for(const h of d)u=u||No(h.removedNodes,i),u=u&&!No(h.addedNodes,i);u&&l()});return c.observe(document,{childList:!0,subtree:!0}),c}const dr=new Map;let Qx=0;function By(){const a=window.devicePixelRatio;a!==Qx&&(Qx=a,dr.forEach((s,l)=>{l.currentDevicePixelRatio!==a&&s()}))}function NC(a,s){dr.size||window.addEventListener("resize",By),dr.set(a,s)}function SC(a){dr.delete(a),dr.size||window.removeEventListener("resize",By)}function wC(a,s,l){const i=a.canvas,c=i&&Yh(i);if(!c)return;const d=vy((h,f)=>{const g=c.clientWidth;l(h,f),g<c.clientWidth&&l()},window),u=new ResizeObserver(h=>{const f=h[0],g=f.contentRect.width,b=f.contentRect.height;g===0&&b===0||d(g,b)});return u.observe(c),NC(a,d),u}function dh(a,s,l){l&&l.disconnect(),s==="resize"&&SC(a)}function CC(a,s,l){const i=a.canvas,c=vy(d=>{a.ctx!==null&&l(yC(d,a))},a);return xC(i,s,c),c}class AC extends zy{acquireContext(s,l){const i=s&&s.getContext&&s.getContext("2d");return i&&i.canvas===s?(gC(s,l),i):null}releaseContext(s){const l=s.canvas;if(!l[ro])return!1;const i=l[ro].initial;["height","width"].forEach(d=>{const u=i[d];Et(u)?l.removeAttribute(d):l.setAttribute(d,u)});const c=i.style||{};return Object.keys(c).forEach(d=>{l.style[d]=c[d]}),l.width=l.width,delete l[ro],!0}addEventListener(s,l,i){this.removeEventListener(s,l);const c=s.$proxies||(s.$proxies={}),u={attach:vC,detach:jC,resize:wC}[l]||CC;c[l]=u(s,l,i)}removeEventListener(s,l){const i=s.$proxies||(s.$proxies={}),c=i[l];if(!c)return;({attach:dh,detach:dh,resize:dh}[l]||bC)(s,l,c),i[l]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(s,l,i,c){return N1(s,l,i,c)}isAttached(s){const l=s&&Yh(s);return!!(l&&l.isConnected)}}function EC(a){return!Vh()||typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas?fC:AC}class Xl{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(s){const{x:l,y:i}=this.getProps(["x","y"],s);return{x:l,y:i}}hasValue(){return xo(this.x)&&xo(this.y)}getProps(s,l){const i=this.$animations;if(!l||!i)return this;const c={};return s.forEach(d=>{c[d]=i[d]&&i[d].active()?i[d]._to:this[d]}),c}}function TC(a,s){const l=a.options.ticks,i=_C(a),c=Math.min(l.maxTicksLimit||i,i),d=l.major.enabled?DC(s):[],u=d.length,h=d[0],f=d[u-1],g=[];if(u>c)return MC(s,g,d,u/c),g;const b=kC(d,s,c);if(u>0){let y,v;const C=u>1?Math.round((f-h)/(u-1)):null;for(Pc(s,g,b,Et(C)?0:h-C,h),y=0,v=u-1;y<v;y++)Pc(s,g,b,d[y],d[y+1]);return Pc(s,g,b,f,Et(C)?s.length:f+C),g}return Pc(s,g,b),g}function _C(a){const s=a.options.offset,l=a._tickSize(),i=a._length/l+(s?0:1),c=a._maxLength/l;return Math.floor(Math.min(i,c))}function kC(a,s,l){const i=RC(a),c=s.length/l;if(!i)return Math.max(c,1);const d=Mw(i);for(let u=0,h=d.length-1;u<h;u++){const f=d[u];if(f>c)return f}return Math.max(c,1)}function DC(a){const s=[];let l,i;for(l=0,i=a.length;l<i;l++)a[l].major&&s.push(l);return s}function MC(a,s,l,i){let c=0,d=l[0],u;for(i=Math.ceil(i),u=0;u<a.length;u++)u===d&&(s.push(a[u]),c++,d=l[c*i])}function Pc(a,s,l,i,c){const d=ht(i,0),u=Math.min(ht(c,a.length),a.length);let h=0,f,g,b;for(l=Math.ceil(l),c&&(f=c-i,l=f/Math.floor(f/l)),b=d;b<0;)h++,b=Math.round(d+h*l);for(g=Math.max(d,0);g<u;g++)g===b&&(s.push(a[g]),h++,b=Math.round(d+h*l))}function RC(a){const s=a.length;let l,i;if(s<2)return!1;for(i=a[0],l=1;l<s;++l)if(a[l]-a[l-1]!==i)return!1;return i}const $C=a=>a==="left"?"right":a==="right"?"left":a,Zx=(a,s,l)=>s==="top"||s==="left"?a[s]+l:a[s]-l,Jx=(a,s)=>Math.min(s||a,a);function eb(a,s){const l=[],i=a.length/s,c=a.length;let d=0;for(;d<c;d+=i)l.push(a[Math.floor(d)]);return l}function OC(a,s,l){const i=a.ticks.length,c=Math.min(s,i-1),d=a._startPixel,u=a._endPixel,h=1e-6;let f=a.getPixelForTick(c),g;if(!(l&&(i===1?g=Math.max(f-d,u-f):s===0?g=(a.getPixelForTick(1)-f)/2:g=(f-a.getPixelForTick(c-1))/2,f+=c<s?g:-g,f<d-h||f>u+h)))return f}function IC(a,s){Nt(a,l=>{const i=l.gc,c=i.length/2;let d;if(c>s){for(d=0;d<c;++d)delete l.data[i[d]];i.splice(0,c)}})}function qi(a){return a.drawTicks?a.tickLength:0}function tb(a,s){if(!a.display)return 0;const l=Ns(a.font,s),i=ea(a.padding);return(Jt(a.text)?a.text.length:1)*l.lineHeight+i.height}function LC(a,s){return Gl(a,{scale:s,type:"scale"})}function zC(a,s,l){return Gl(a,{tick:l,index:s,type:"tick"})}function UC(a,s,l){let i=jy(a);return(l&&s!=="right"||!l&&s==="right")&&(i=$C(i)),i}function BC(a,s,l,i){const{top:c,left:d,bottom:u,right:h,chart:f}=a,{chartArea:g,scales:b}=f;let y=0,v,C,w;const A=u-c,S=h-d;if(a.isHorizontal()){if(C=Ms(i,d,h),mt(l)){const E=Object.keys(l)[0],$=l[E];w=b[E].getPixelForValue($)+A-s}else l==="center"?w=(g.bottom+g.top)/2+A-s:w=Zx(a,l,s);v=h-d}else{if(mt(l)){const E=Object.keys(l)[0],$=l[E];C=b[E].getPixelForValue($)-S+s}else l==="center"?C=(g.left+g.right)/2-S+s:C=Zx(a,l,s);w=Ms(i,u,c),y=l==="left"?-Kt:Kt}return{titleX:C,titleY:w,maxWidth:v,rotation:y}}class Wl extends Xl{constructor(s){super(),this.id=s.id,this.type=s.type,this.options=void 0,this.ctx=s.ctx,this.chart=s.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(s){this.options=s.setContext(this.getContext()),this.axis=s.axis,this._userMin=this.parse(s.min),this._userMax=this.parse(s.max),this._suggestedMin=this.parse(s.suggestedMin),this._suggestedMax=this.parse(s.suggestedMax)}parse(s,l){return s}getUserBounds(){let{_userMin:s,_userMax:l,_suggestedMin:i,_suggestedMax:c}=this;return s=la(s,Number.POSITIVE_INFINITY),l=la(l,Number.NEGATIVE_INFINITY),i=la(i,Number.POSITIVE_INFINITY),c=la(c,Number.NEGATIVE_INFINITY),{min:la(s,i),max:la(l,c),minDefined:Gs(s),maxDefined:Gs(l)}}getMinMax(s){let{min:l,max:i,minDefined:c,maxDefined:d}=this.getUserBounds(),u;if(c&&d)return{min:l,max:i};const h=this.getMatchingVisibleMetas();for(let f=0,g=h.length;f<g;++f)u=h[f].controller.getMinMax(this,s),c||(l=Math.min(l,u.min)),d||(i=Math.max(i,u.max));return l=d&&l>i?i:l,i=c&&l>i?l:i,{min:la(l,la(i,l)),max:la(i,la(l,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const s=this.chart.data;return this.options.labels||(this.isHorizontal()?s.xLabels:s.yLabels)||s.labels||[]}getLabelItems(s=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(s))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Dt(this.options.beforeUpdate,[this])}update(s,l,i){const{beginAtZero:c,grace:d,ticks:u}=this.options,h=u.sampleSize;this.beforeUpdate(),this.maxWidth=s,this.maxHeight=l,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=r1(this,d,c),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const f=h<this.ticks.length;this._convertTicksToLabels(f?eb(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),u.display&&(u.autoSkip||u.source==="auto")&&(this.ticks=TC(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),f&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let s=this.options.reverse,l,i;this.isHorizontal()?(l=this.left,i=this.right):(l=this.top,i=this.bottom,s=!s),this._startPixel=l,this._endPixel=i,this._reversePixels=s,this._length=i-l,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Dt(this.options.afterUpdate,[this])}beforeSetDimensions(){Dt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Dt(this.options.afterSetDimensions,[this])}_callHooks(s){this.chart.notifyPlugins(s,this.getContext()),Dt(this.options[s],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Dt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(s){const l=this.options.ticks;let i,c,d;for(i=0,c=s.length;i<c;i++)d=s[i],d.label=Dt(l.callback,[d.value,i,s],this)}afterTickToLabelConversion(){Dt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Dt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const s=this.options,l=s.ticks,i=Jx(this.ticks.length,s.ticks.maxTicksLimit),c=l.minRotation||0,d=l.maxRotation;let u=c,h,f,g;if(!this._isVisible()||!l.display||c>=d||i<=1||!this.isHorizontal()){this.labelRotation=c;return}const b=this._getLabelSizes(),y=b.widest.width,v=b.highest.height,C=js(this.chart.width-y,0,this.maxWidth);h=s.offset?this.maxWidth/i:C/(i-1),y+6>h&&(h=C/(i-(s.offset?.5:1)),f=this.maxHeight-qi(s.grid)-l.padding-tb(s.title,this.chart.options.font),g=Math.sqrt(y*y+v*v),u=Iw(Math.min(Math.asin(js((b.highest.height+6)/h,-1,1)),Math.asin(js(f/g,-1,1))-Math.asin(js(v/g,-1,1)))),u=Math.max(c,Math.min(d,u))),this.labelRotation=u}afterCalculateLabelRotation(){Dt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Dt(this.options.beforeFit,[this])}fit(){const s={width:0,height:0},{chart:l,options:{ticks:i,title:c,grid:d}}=this,u=this._isVisible(),h=this.isHorizontal();if(u){const f=tb(c,l.options.font);if(h?(s.width=this.maxWidth,s.height=qi(d)+f):(s.height=this.maxHeight,s.width=qi(d)+f),i.display&&this.ticks.length){const{first:g,last:b,widest:y,highest:v}=this._getLabelSizes(),C=i.padding*2,w=La(this.labelRotation),A=Math.cos(w),S=Math.sin(w);if(h){const E=i.mirror?0:S*y.width+A*v.height;s.height=Math.min(this.maxHeight,s.height+E+C)}else{const E=i.mirror?0:A*y.width+S*v.height;s.width=Math.min(this.maxWidth,s.width+E+C)}this._calculatePadding(g,b,S,A)}}this._handleMargins(),h?(this.width=this._length=l.width-this._margins.left-this._margins.right,this.height=s.height):(this.width=s.width,this.height=this._length=l.height-this._margins.top-this._margins.bottom)}_calculatePadding(s,l,i,c){const{ticks:{align:d,padding:u},position:h}=this.options,f=this.labelRotation!==0,g=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const b=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,C=0;f?g?(v=c*s.width,C=i*l.height):(v=i*s.height,C=c*l.width):d==="start"?C=l.width:d==="end"?v=s.width:d!=="inner"&&(v=s.width/2,C=l.width/2),this.paddingLeft=Math.max((v-b+u)*this.width/(this.width-b),0),this.paddingRight=Math.max((C-y+u)*this.width/(this.width-y),0)}else{let b=l.height/2,y=s.height/2;d==="start"?(b=0,y=s.height):d==="end"&&(b=l.height,y=0),this.paddingTop=b+u,this.paddingBottom=y+u}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Dt(this.options.afterFit,[this])}isHorizontal(){const{axis:s,position:l}=this.options;return l==="top"||l==="bottom"||s==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(s){this.beforeTickToLabelConversion(),this.generateTickLabels(s);let l,i;for(l=0,i=s.length;l<i;l++)Et(s[l].label)&&(s.splice(l,1),i--,l--);this.afterTickToLabelConversion()}_getLabelSizes(){let s=this._labelSizes;if(!s){const l=this.options.ticks.sampleSize;let i=this.ticks;l<i.length&&(i=eb(i,l)),this._labelSizes=s=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return s}_computeLabelSizes(s,l,i){const{ctx:c,_longestTextCache:d}=this,u=[],h=[],f=Math.floor(l/Jx(l,i));let g=0,b=0,y,v,C,w,A,S,E,$,D,I,V;for(y=0;y<l;y+=f){if(w=s[y].label,A=this._resolveTickFontOptions(y),c.font=S=A.string,E=d[S]=d[S]||{data:{},gc:[]},$=A.lineHeight,D=I=0,!Et(w)&&!Jt(w))D=kx(c,E.data,E.gc,D,w),I=$;else if(Jt(w))for(v=0,C=w.length;v<C;++v)V=w[v],!Et(V)&&!Jt(V)&&(D=kx(c,E.data,E.gc,D,V),I+=$);u.push(D),h.push(I),g=Math.max(D,g),b=Math.max(I,b)}IC(d,l);const _=u.indexOf(g),B=h.indexOf(b),z=X=>({width:u[X]||0,height:h[X]||0});return{first:z(0),last:z(l-1),widest:z(_),highest:z(B),widths:u,heights:h}}getLabelForValue(s){return s}getPixelForValue(s,l){return NaN}getValueForPixel(s){}getPixelForTick(s){const l=this.ticks;return s<0||s>l.length-1?null:this.getPixelForValue(l[s].value)}getPixelForDecimal(s){this._reversePixels&&(s=1-s);const l=this._startPixel+s*this._length;return zw(this._alignToPixels?Hn(this.chart,l,0):l)}getDecimalForPixel(s){const l=(s-this._startPixel)/this._length;return this._reversePixels?1-l:l}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:s,max:l}=this;return s<0&&l<0?l:s>0&&l>0?s:0}getContext(s){const l=this.ticks||[];if(s>=0&&s<l.length){const i=l[s];return i.$context||(i.$context=zC(this.getContext(),s,i))}return this.$context||(this.$context=LC(this.chart.getContext(),this))}_tickSize(){const s=this.options.ticks,l=La(this.labelRotation),i=Math.abs(Math.cos(l)),c=Math.abs(Math.sin(l)),d=this._getLabelSizes(),u=s.autoSkipPadding||0,h=d?d.widest.width+u:0,f=d?d.highest.height+u:0;return this.isHorizontal()?f*i>h*c?h/i:f/c:f*c<h*i?f/i:h/c}_isVisible(){const s=this.options.display;return s!=="auto"?!!s:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(s){const l=this.axis,i=this.chart,c=this.options,{grid:d,position:u,border:h}=c,f=d.offset,g=this.isHorizontal(),y=this.ticks.length+(f?1:0),v=qi(d),C=[],w=h.setContext(this.getContext()),A=w.display?w.width:0,S=A/2,E=function(N){return Hn(i,N,A)};let $,D,I,V,_,B,z,X,T,W,F,Q;if(u==="top")$=E(this.bottom),B=this.bottom-v,X=$-S,W=E(s.top)+S,Q=s.bottom;else if(u==="bottom")$=E(this.top),W=s.top,Q=E(s.bottom)-S,B=$+S,X=this.top+v;else if(u==="left")$=E(this.right),_=this.right-v,z=$-S,T=E(s.left)+S,F=s.right;else if(u==="right")$=E(this.left),T=s.left,F=E(s.right)-S,_=$+S,z=this.left+v;else if(l==="x"){if(u==="center")$=E((s.top+s.bottom)/2+.5);else if(mt(u)){const N=Object.keys(u)[0],M=u[N];$=E(this.chart.scales[N].getPixelForValue(M))}W=s.top,Q=s.bottom,B=$+S,X=B+v}else if(l==="y"){if(u==="center")$=E((s.left+s.right)/2);else if(mt(u)){const N=Object.keys(u)[0],M=u[N];$=E(this.chart.scales[N].getPixelForValue(M))}_=$-S,z=_-v,T=s.left,F=s.right}const O=ht(c.ticks.maxTicksLimit,y),Y=Math.max(1,Math.ceil(y/O));for(D=0;D<y;D+=Y){const N=this.getContext(D),M=d.setContext(N),L=h.setContext(N),U=M.lineWidth,P=M.color,k=L.dash||[],G=L.dashOffset,se=M.tickWidth,q=M.tickColor,ee=M.tickBorderDash||[],te=M.tickBorderDashOffset;I=OC(this,D,f),I!==void 0&&(V=Hn(i,I,U),g?_=z=T=F=V:B=X=W=Q=V,C.push({tx1:_,ty1:B,tx2:z,ty2:X,x1:T,y1:W,x2:F,y2:Q,width:U,color:P,borderDash:k,borderDashOffset:G,tickWidth:se,tickColor:q,tickBorderDash:ee,tickBorderDashOffset:te}))}return this._ticksLength=y,this._borderValue=$,C}_computeLabelItems(s){const l=this.axis,i=this.options,{position:c,ticks:d}=i,u=this.isHorizontal(),h=this.ticks,{align:f,crossAlign:g,padding:b,mirror:y}=d,v=qi(i.grid),C=v+b,w=y?-b:C,A=-La(this.labelRotation),S=[];let E,$,D,I,V,_,B,z,X,T,W,F,Q="middle";if(c==="top")_=this.bottom-w,B=this._getXAxisLabelAlignment();else if(c==="bottom")_=this.top+w,B=this._getXAxisLabelAlignment();else if(c==="left"){const Y=this._getYAxisLabelAlignment(v);B=Y.textAlign,V=Y.x}else if(c==="right"){const Y=this._getYAxisLabelAlignment(v);B=Y.textAlign,V=Y.x}else if(l==="x"){if(c==="center")_=(s.top+s.bottom)/2+C;else if(mt(c)){const Y=Object.keys(c)[0],N=c[Y];_=this.chart.scales[Y].getPixelForValue(N)+C}B=this._getXAxisLabelAlignment()}else if(l==="y"){if(c==="center")V=(s.left+s.right)/2-C;else if(mt(c)){const Y=Object.keys(c)[0],N=c[Y];V=this.chart.scales[Y].getPixelForValue(N)}B=this._getYAxisLabelAlignment(v).textAlign}l==="y"&&(f==="start"?Q="top":f==="end"&&(Q="bottom"));const O=this._getLabelSizes();for(E=0,$=h.length;E<$;++E){D=h[E],I=D.label;const Y=d.setContext(this.getContext(E));z=this.getPixelForTick(E)+d.labelOffset,X=this._resolveTickFontOptions(E),T=X.lineHeight,W=Jt(I)?I.length:1;const N=W/2,M=Y.color,L=Y.textStrokeColor,U=Y.textStrokeWidth;let P=B;u?(V=z,B==="inner"&&(E===$-1?P=this.options.reverse?"left":"right":E===0?P=this.options.reverse?"right":"left":P="center"),c==="top"?g==="near"||A!==0?F=-W*T+T/2:g==="center"?F=-O.highest.height/2-N*T+T:F=-O.highest.height+T/2:g==="near"||A!==0?F=T/2:g==="center"?F=O.highest.height/2-N*T:F=O.highest.height-W*T,y&&(F*=-1),A!==0&&!Y.showLabelBackdrop&&(V+=T/2*Math.sin(A))):(_=z,F=(1-W)*T/2);let k;if(Y.showLabelBackdrop){const G=ea(Y.backdropPadding),se=O.heights[E],q=O.widths[E];let ee=F-G.top,te=0-G.left;switch(Q){case"middle":ee-=se/2;break;case"bottom":ee-=se;break}switch(B){case"center":te-=q/2;break;case"right":te-=q;break;case"inner":E===$-1?te-=q:E>0&&(te-=q/2);break}k={left:te,top:ee,width:q+G.width,height:se+G.height,color:Y.backdropColor}}S.push({label:I,font:X,textOffset:F,options:{rotation:A,color:M,strokeColor:L,strokeWidth:U,textAlign:P,textBaseline:Q,translation:[V,_],backdrop:k}})}return S}_getXAxisLabelAlignment(){const{position:s,ticks:l}=this.options;if(-La(this.labelRotation))return s==="top"?"left":"right";let c="center";return l.align==="start"?c="left":l.align==="end"?c="right":l.align==="inner"&&(c="inner"),c}_getYAxisLabelAlignment(s){const{position:l,ticks:{crossAlign:i,mirror:c,padding:d}}=this.options,u=this._getLabelSizes(),h=s+d,f=u.widest.width;let g,b;return l==="left"?c?(b=this.right+d,i==="near"?g="left":i==="center"?(g="center",b+=f/2):(g="right",b+=f)):(b=this.right-h,i==="near"?g="right":i==="center"?(g="center",b-=f/2):(g="left",b=this.left)):l==="right"?c?(b=this.left+d,i==="near"?g="right":i==="center"?(g="center",b-=f/2):(g="left",b-=f)):(b=this.left+h,i==="near"?g="left":i==="center"?(g="center",b+=f/2):(g="right",b=this.right)):g="right",{textAlign:g,x:b}}_computeLabelArea(){if(this.options.ticks.mirror)return;const s=this.chart,l=this.options.position;if(l==="left"||l==="right")return{top:0,left:this.left,bottom:s.height,right:this.right};if(l==="top"||l==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:s.width}}drawBackground(){const{ctx:s,options:{backgroundColor:l},left:i,top:c,width:d,height:u}=this;l&&(s.save(),s.fillStyle=l,s.fillRect(i,c,d,u),s.restore())}getLineWidthForValue(s){const l=this.options.grid;if(!this._isVisible()||!l.display)return 0;const c=this.ticks.findIndex(d=>d.value===s);return c>=0?l.setContext(this.getContext(c)).lineWidth:0}drawGrid(s){const l=this.options.grid,i=this.ctx,c=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(s));let d,u;const h=(f,g,b)=>{!b.width||!b.color||(i.save(),i.lineWidth=b.width,i.strokeStyle=b.color,i.setLineDash(b.borderDash||[]),i.lineDashOffset=b.borderDashOffset,i.beginPath(),i.moveTo(f.x,f.y),i.lineTo(g.x,g.y),i.stroke(),i.restore())};if(l.display)for(d=0,u=c.length;d<u;++d){const f=c[d];l.drawOnChartArea&&h({x:f.x1,y:f.y1},{x:f.x2,y:f.y2},f),l.drawTicks&&h({x:f.tx1,y:f.ty1},{x:f.tx2,y:f.ty2},{color:f.tickColor,width:f.tickWidth,borderDash:f.tickBorderDash,borderDashOffset:f.tickBorderDashOffset})}}drawBorder(){const{chart:s,ctx:l,options:{border:i,grid:c}}=this,d=i.setContext(this.getContext()),u=i.display?d.width:0;if(!u)return;const h=c.setContext(this.getContext(0)).lineWidth,f=this._borderValue;let g,b,y,v;this.isHorizontal()?(g=Hn(s,this.left,u)-u/2,b=Hn(s,this.right,h)+h/2,y=v=f):(y=Hn(s,this.top,u)-u/2,v=Hn(s,this.bottom,h)+h/2,g=b=f),l.save(),l.lineWidth=d.width,l.strokeStyle=d.color,l.beginPath(),l.moveTo(g,y),l.lineTo(b,v),l.stroke(),l.restore()}drawLabels(s){if(!this.options.ticks.display)return;const i=this.ctx,c=this._computeLabelArea();c&&Lh(i,c);const d=this.getLabelItems(s);for(const u of d){const h=u.options,f=u.font,g=u.label,b=u.textOffset;yo(i,g,0,b,f,h)}c&&zh(i)}drawTitle(){const{ctx:s,options:{position:l,title:i,reverse:c}}=this;if(!i.display)return;const d=Ns(i.font),u=ea(i.padding),h=i.align;let f=d.lineHeight/2;l==="bottom"||l==="center"||mt(l)?(f+=u.bottom,Jt(i.text)&&(f+=d.lineHeight*(i.text.length-1))):f+=u.top;const{titleX:g,titleY:b,maxWidth:y,rotation:v}=BC(this,f,l,h);yo(s,i.text,0,0,d,{color:i.color,maxWidth:y,rotation:v,textAlign:UC(h,l,c),textBaseline:"middle",translation:[g,b]})}draw(s){this._isVisible()&&(this.drawBackground(),this.drawGrid(s),this.drawBorder(),this.drawTitle(),this.drawLabels(s))}_layers(){const s=this.options,l=s.ticks&&s.ticks.z||0,i=ht(s.grid&&s.grid.z,-1),c=ht(s.border&&s.border.z,0);return!this._isVisible()||this.draw!==Wl.prototype.draw?[{z:l,draw:d=>{this.draw(d)}}]:[{z:i,draw:d=>{this.drawBackground(),this.drawGrid(d),this.drawTitle()}},{z:c,draw:()=>{this.drawBorder()}},{z:l,draw:d=>{this.drawLabels(d)}}]}getMatchingVisibleMetas(s){const l=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",c=[];let d,u;for(d=0,u=l.length;d<u;++d){const h=l[d];h[i]===this.id&&(!s||h.type===s)&&c.push(h)}return c}_resolveTickFontOptions(s){const l=this.options.ticks.setContext(this.getContext(s));return Ns(l.font)}_maxDigits(){const s=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/s}}class qc{constructor(s,l,i){this.type=s,this.scope=l,this.override=i,this.items=Object.create(null)}isForType(s){return Object.prototype.isPrototypeOf.call(this.type.prototype,s.prototype)}register(s){const l=Object.getPrototypeOf(s);let i;VC(l)&&(i=this.register(l));const c=this.items,d=s.id,u=this.scope+"."+d;if(!d)throw new Error("class does not have id: "+s);return d in c||(c[d]=s,FC(s,u,i),this.override&&Ft.override(s.id,s.overrides)),u}get(s){return this.items[s]}unregister(s){const l=this.items,i=s.id,c=this.scope;i in l&&delete l[i],c&&i in Ft[c]&&(delete Ft[c][i],this.override&&delete Wn[i])}}function FC(a,s,l){const i=cr(Object.create(null),[l?Ft.get(l):{},Ft.get(s),a.defaults]);Ft.set(s,i),a.defaultRoutes&&HC(s,a.defaultRoutes),a.descriptors&&Ft.describe(s,a.descriptors)}function HC(a,s){Object.keys(s).forEach(l=>{const i=l.split("."),c=i.pop(),d=[a].concat(i).join("."),u=s[l].split("."),h=u.pop(),f=u.join(".");Ft.route(d,c,f,h)})}function VC(a){return"id"in a&&"defaults"in a}class YC{constructor(){this.controllers=new qc(Ph,"datasets",!0),this.elements=new qc(Xl,"elements"),this.plugins=new qc(Object,"plugins"),this.scales=new qc(Wl,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...s){this._each("register",s)}remove(...s){this._each("unregister",s)}addControllers(...s){this._each("register",s,this.controllers)}addElements(...s){this._each("register",s,this.elements)}addPlugins(...s){this._each("register",s,this.plugins)}addScales(...s){this._each("register",s,this.scales)}getController(s){return this._get(s,this.controllers,"controller")}getElement(s){return this._get(s,this.elements,"element")}getPlugin(s){return this._get(s,this.plugins,"plugin")}getScale(s){return this._get(s,this.scales,"scale")}removeControllers(...s){this._each("unregister",s,this.controllers)}removeElements(...s){this._each("unregister",s,this.elements)}removePlugins(...s){this._each("unregister",s,this.plugins)}removeScales(...s){this._each("unregister",s,this.scales)}_each(s,l,i){[...l].forEach(c=>{const d=i||this._getRegistryForType(c);i||d.isForType(c)||d===this.plugins&&c.id?this._exec(s,d,c):Nt(c,u=>{const h=i||this._getRegistryForType(u);this._exec(s,h,u)})})}_exec(s,l,i){const c=$h(s);Dt(i["before"+c],[],i),l[s](i),Dt(i["after"+c],[],i)}_getRegistryForType(s){for(let l=0;l<this._typedRegistries.length;l++){const i=this._typedRegistries[l];if(i.isForType(s))return i}return this.plugins}_get(s,l,i){const c=l.get(s);if(c===void 0)throw new Error('"'+s+'" is not a registered '+i+".");return c}}var ca=new YC;class PC{constructor(){this._init=void 0}notify(s,l,i,c){if(l==="beforeInit"&&(this._init=this._createDescriptors(s,!0),this._notify(this._init,s,"install")),this._init===void 0)return;const d=c?this._descriptors(s).filter(c):this._descriptors(s),u=this._notify(d,s,l,i);return l==="afterDestroy"&&(this._notify(d,s,"stop"),this._notify(this._init,s,"uninstall"),this._init=void 0),u}_notify(s,l,i,c){c=c||{};for(const d of s){const u=d.plugin,h=u[i],f=[l,c,d.options];if(Dt(h,f,u)===!1&&c.cancelable)return!1}return!0}invalidate(){Et(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(s){if(this._cache)return this._cache;const l=this._cache=this._createDescriptors(s);return this._notifyStateChanges(s),l}_createDescriptors(s,l){const i=s&&s.config,c=ht(i.options&&i.options.plugins,{}),d=qC(i);return c===!1&&!l?[]:XC(s,d,c,l)}_notifyStateChanges(s){const l=this._oldCache||[],i=this._cache,c=(d,u)=>d.filter(h=>!u.some(f=>h.plugin.id===f.plugin.id));this._notify(c(l,i),s,"stop"),this._notify(c(i,l),s,"start")}}function qC(a){const s={},l=[],i=Object.keys(ca.plugins.items);for(let d=0;d<i.length;d++)l.push(ca.getPlugin(i[d]));const c=a.plugins||[];for(let d=0;d<c.length;d++){const u=c[d];l.indexOf(u)===-1&&(l.push(u),s[u.id]=!0)}return{plugins:l,localIds:s}}function GC(a,s){return!s&&a===!1?null:a===!0?{}:a}function XC(a,{plugins:s,localIds:l},i,c){const d=[],u=a.getContext();for(const h of s){const f=h.id,g=GC(i[f],c);g!==null&&d.push({plugin:h,options:WC(a.config,{plugin:h,local:l[f]},g,u)})}return d}function WC(a,{plugin:s,local:l},i,c){const d=a.pluginScopeKeys(s),u=a.getOptionScopes(i,d);return l&&s.defaults&&u.push(s.defaults),a.createResolver(u,c,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ch(a,s){const l=Ft.datasets[a]||{};return((s.datasets||{})[a]||{}).indexAxis||s.indexAxis||l.indexAxis||"x"}function KC(a,s){let l=a;return a==="_index_"?l=s:a==="_value_"&&(l=s==="x"?"y":"x"),l}function QC(a,s){return a===s?"_index_":"_value_"}function sb(a){if(a==="x"||a==="y"||a==="r")return a}function ZC(a){if(a==="top"||a==="bottom")return"x";if(a==="left"||a==="right")return"y"}function Ah(a,...s){if(sb(a))return a;for(const l of s){const i=l.axis||ZC(l.position)||a.length>1&&sb(a[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${a}' axis. Please provide 'axis' or 'position' option.`)}function ab(a,s,l){if(l[s+"AxisID"]===a)return{axis:s}}function JC(a,s){if(s.data&&s.data.datasets){const l=s.data.datasets.filter(i=>i.xAxisID===a||i.yAxisID===a);if(l.length)return ab(a,"x",l[0])||ab(a,"y",l[0])}return{}}function eA(a,s){const l=Wn[a.type]||{scales:{}},i=s.scales||{},c=Ch(a.type,s),d=Object.create(null);return Object.keys(i).forEach(u=>{const h=i[u];if(!mt(h))return console.error(`Invalid scale configuration for scale: ${u}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${u}`);const f=Ah(u,h,JC(u,a),Ft.scales[h.type]),g=QC(f,c),b=l.scales||{};d[u]=er(Object.create(null),[{axis:f},h,b[f],b[g]])}),a.data.datasets.forEach(u=>{const h=u.type||a.type,f=u.indexAxis||Ch(h,s),b=(Wn[h]||{}).scales||{};Object.keys(b).forEach(y=>{const v=KC(y,f),C=u[v+"AxisID"]||v;d[C]=d[C]||Object.create(null),er(d[C],[{axis:v},i[C],b[y]])})}),Object.keys(d).forEach(u=>{const h=d[u];er(h,[Ft.scales[h.type],Ft.scale])}),d}function Fy(a){const s=a.options||(a.options={});s.plugins=ht(s.plugins,{}),s.scales=eA(a,s)}function Hy(a){return a=a||{},a.datasets=a.datasets||[],a.labels=a.labels||[],a}function tA(a){return a=a||{},a.data=Hy(a.data),Fy(a),a}const nb=new Map,Vy=new Set;function Gc(a,s){let l=nb.get(a);return l||(l=s(),nb.set(a,l),Vy.add(l)),l}const Gi=(a,s,l)=>{const i=Xn(s,l);i!==void 0&&a.add(i)};class sA{constructor(s){this._config=tA(s),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(s){this._config.type=s}get data(){return this._config.data}set data(s){this._config.data=Hy(s)}get options(){return this._config.options}set options(s){this._config.options=s}get plugins(){return this._config.plugins}update(){const s=this._config;this.clearCache(),Fy(s)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(s){return Gc(s,()=>[[`datasets.${s}`,""]])}datasetAnimationScopeKeys(s,l){return Gc(`${s}.transition.${l}`,()=>[[`datasets.${s}.transitions.${l}`,`transitions.${l}`],[`datasets.${s}`,""]])}datasetElementScopeKeys(s,l){return Gc(`${s}-${l}`,()=>[[`datasets.${s}.elements.${l}`,`datasets.${s}`,`elements.${l}`,""]])}pluginScopeKeys(s){const l=s.id,i=this.type;return Gc(`${i}-plugin-${l}`,()=>[[`plugins.${l}`,...s.additionalOptionScopes||[]]])}_cachedScopes(s,l){const i=this._scopeCache;let c=i.get(s);return(!c||l)&&(c=new Map,i.set(s,c)),c}getOptionScopes(s,l,i){const{options:c,type:d}=this,u=this._cachedScopes(s,i),h=u.get(l);if(h)return h;const f=new Set;l.forEach(b=>{s&&(f.add(s),b.forEach(y=>Gi(f,s,y))),b.forEach(y=>Gi(f,c,y)),b.forEach(y=>Gi(f,Wn[d]||{},y)),b.forEach(y=>Gi(f,Ft,y)),b.forEach(y=>Gi(f,wh,y))});const g=Array.from(f);return g.length===0&&g.push(Object.create(null)),Vy.has(l)&&u.set(l,g),g}chartOptionScopes(){const{options:s,type:l}=this;return[s,Wn[l]||{},Ft.datasets[l]||{},{type:l},Ft,wh]}resolveNamedOptions(s,l,i,c=[""]){const d={$shared:!0},{resolver:u,subPrefixes:h}=lb(this._resolverCache,s,c);let f=u;if(nA(u,l)){d.$shared=!1,i=Nn(i)?i():i;const g=this.createResolver(s,i,h);f=Vl(u,i,g)}for(const g of l)d[g]=f[g];return d}createResolver(s,l,i=[""],c){const{resolver:d}=lb(this._resolverCache,s,i);return mt(l)?Vl(d,l,void 0,c):d}}function lb(a,s,l){let i=a.get(s);i||(i=new Map,a.set(s,i));const c=l.join();let d=i.get(c);return d||(d={resolver:Bh(s,l),subPrefixes:l.filter(h=>!h.toLowerCase().includes("hover"))},i.set(c,d)),d}const aA=a=>mt(a)&&Object.getOwnPropertyNames(a).some(s=>Nn(a[s]));function nA(a,s){const{isScriptable:l,isIndexable:i}=Ey(a);for(const c of s){const d=l(c),u=i(c),h=(u||d)&&a[c];if(d&&(Nn(h)||aA(h))||u&&Jt(h))return!0}return!1}var lA="4.5.1";const iA=["top","bottom","left","right","chartArea"];function ib(a,s){return a==="top"||a==="bottom"||iA.indexOf(a)===-1&&s==="x"}function rb(a,s){return function(l,i){return l[a]===i[a]?l[s]-i[s]:l[a]-i[a]}}function cb(a){const s=a.chart,l=s.options.animation;s.notifyPlugins("afterRender"),Dt(l&&l.onComplete,[a],s)}function rA(a){const s=a.chart,l=s.options.animation;Dt(l&&l.onProgress,[a],s)}function Yy(a){return Vh()&&typeof a=="string"?a=document.getElementById(a):a&&a.length&&(a=a[0]),a&&a.canvas&&(a=a.canvas),a}const co={},ob=a=>{const s=Yy(a);return Object.values(co).filter(l=>l.canvas===s).pop()};function cA(a,s,l){const i=Object.keys(a);for(const c of i){const d=+c;if(d>=s){const u=a[c];delete a[c],(l>0||d>s)&&(a[d+l]=u)}}}function oA(a,s,l,i){return!l||a.type==="mouseout"?null:i?s:a}let hr=class{static defaults=Ft;static instances=co;static overrides=Wn;static registry=ca;static version=lA;static getChart=ob;static register(...s){ca.add(...s),db()}static unregister(...s){ca.remove(...s),db()}constructor(s,l){const i=this.config=new sA(l),c=Yy(s),d=ob(c);if(d)throw new Error("Canvas is already in use. Chart with ID '"+d.id+"' must be destroyed before the canvas with ID '"+d.canvas.id+"' can be reused.");const u=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||EC(c)),this.platform.updateConfig(i);const h=this.platform.acquireContext(c,u.aspectRatio),f=h&&h.canvas,g=f&&f.height,b=f&&f.width;if(this.id=ww(),this.ctx=h,this.canvas=f,this.width=b,this.height=g,this._options=u,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PC,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Hw(y=>this.update(y),u.resizeDelay||0),this._dataChanges=[],co[this.id]=this,!h||!f){console.error("Failed to create chart: can't acquire context from the given item");return}$a.listen(this,"complete",cb),$a.listen(this,"progress",rA),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:s,maintainAspectRatio:l},width:i,height:c,_aspectRatio:d}=this;return Et(s)?l&&d?d:c?i/c:null:s}get data(){return this.config.data}set data(s){this.config.data=s}get options(){return this._options}set options(s){this.config.options=s}get registry(){return ca}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ox(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Dx(this.canvas,this.ctx),this}stop(){return $a.stop(this),this}resize(s,l){$a.running(this)?this._resizeBeforeDraw={width:s,height:l}:this._resize(s,l)}_resize(s,l){const i=this.options,c=this.canvas,d=i.maintainAspectRatio&&this.aspectRatio,u=this.platform.getMaximumSize(c,s,l,d),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),f=this.width?"resize":"attach";this.width=u.width,this.height=u.height,this._aspectRatio=this.aspectRatio,Ox(this,h,!0)&&(this.notifyPlugins("resize",{size:u}),Dt(i.onResize,[this,u],this),this.attached&&this._doResize(f)&&this.render())}ensureScalesHaveIDs(){const l=this.options.scales||{};Nt(l,(i,c)=>{i.id=c})}buildOrUpdateScales(){const s=this.options,l=s.scales,i=this.scales,c=Object.keys(i).reduce((u,h)=>(u[h]=!1,u),{});let d=[];l&&(d=d.concat(Object.keys(l).map(u=>{const h=l[u],f=Ah(u,h),g=f==="r",b=f==="x";return{options:h,dposition:g?"chartArea":b?"bottom":"left",dtype:g?"radialLinear":b?"category":"linear"}}))),Nt(d,u=>{const h=u.options,f=h.id,g=Ah(f,h),b=ht(h.type,u.dtype);(h.position===void 0||ib(h.position,g)!==ib(u.dposition))&&(h.position=u.dposition),c[f]=!0;let y=null;if(f in i&&i[f].type===b)y=i[f];else{const v=ca.getScale(b);y=new v({id:f,type:b,ctx:this.ctx,chart:this}),i[y.id]=y}y.init(h,s)}),Nt(c,(u,h)=>{u||delete i[h]}),Nt(i,u=>{xn.configure(this,u,u.options),xn.addBox(this,u)})}_updateMetasets(){const s=this._metasets,l=this.data.datasets.length,i=s.length;if(s.sort((c,d)=>c.index-d.index),i>l){for(let c=l;c<i;++c)this._destroyDatasetMeta(c);s.splice(l,i-l)}this._sortedMetasets=s.slice(0).sort(rb("order","index"))}_removeUnreferencedMetasets(){const{_metasets:s,data:{datasets:l}}=this;s.length>l.length&&delete this._stacks,s.forEach((i,c)=>{l.filter(d=>d===i._dataset).length===0&&this._destroyDatasetMeta(c)})}buildOrUpdateControllers(){const s=[],l=this.data.datasets;let i,c;for(this._removeUnreferencedMetasets(),i=0,c=l.length;i<c;i++){const d=l[i];let u=this.getDatasetMeta(i);const h=d.type||this.config.type;if(u.type&&u.type!==h&&(this._destroyDatasetMeta(i),u=this.getDatasetMeta(i)),u.type=h,u.indexAxis=d.indexAxis||Ch(h,this.options),u.order=d.order||0,u.index=i,u.label=""+d.label,u.visible=this.isDatasetVisible(i),u.controller)u.controller.updateIndex(i),u.controller.linkScales();else{const f=ca.getController(h),{datasetElementType:g,dataElementType:b}=Ft.datasets[h];Object.assign(f,{dataElementType:ca.getElement(b),datasetElementType:g&&ca.getElement(g)}),u.controller=new f(this,i),s.push(u.controller)}}return this._updateMetasets(),s}_resetElements(){Nt(this.data.datasets,(s,l)=>{this.getDatasetMeta(l).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(s){const l=this.config;l.update();const i=this._options=l.createResolver(l.chartOptionScopes(),this.getContext()),c=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:s,cancelable:!0})===!1)return;const d=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let u=0;for(let g=0,b=this.data.datasets.length;g<b;g++){const{controller:y}=this.getDatasetMeta(g),v=!c&&d.indexOf(y)===-1;y.buildOrUpdateElements(v),u=Math.max(+y.getMaxOverflow(),u)}u=this._minPadding=i.layout.autoPadding?u:0,this._updateLayout(u),c||Nt(d,g=>{g.reset()}),this._updateDatasets(s),this.notifyPlugins("afterUpdate",{mode:s}),this._layers.sort(rb("z","_idx"));const{_active:h,_lastEvent:f}=this;f?this._eventHandler(f,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){Nt(this.scales,s=>{xn.removeBox(this,s)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const s=this.options,l=new Set(Object.keys(this._listeners)),i=new Set(s.events);(!jx(l,i)||!!this._responsiveListeners!==s.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:s}=this,l=this._getUniformDataChanges()||[];for(const{method:i,start:c,count:d}of l){const u=i==="_removeElements"?-d:d;cA(s,c,u)}}_getUniformDataChanges(){const s=this._dataChanges;if(!s||!s.length)return;this._dataChanges=[];const l=this.data.datasets.length,i=d=>new Set(s.filter(u=>u[0]===d).map((u,h)=>h+","+u.splice(1).join(","))),c=i(0);for(let d=1;d<l;d++)if(!jx(c,i(d)))return;return Array.from(c).map(d=>d.split(",")).map(d=>({method:d[1],start:+d[2],count:+d[3]}))}_updateLayout(s){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;xn.update(this,this.width,this.height,s);const l=this.chartArea,i=l.width<=0||l.height<=0;this._layers=[],Nt(this.boxes,c=>{i&&c.position==="chartArea"||(c.configure&&c.configure(),this._layers.push(...c._layers()))},this),this._layers.forEach((c,d)=>{c._idx=d}),this.notifyPlugins("afterLayout")}_updateDatasets(s){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:s,cancelable:!0})!==!1){for(let l=0,i=this.data.datasets.length;l<i;++l)this.getDatasetMeta(l).controller.configure();for(let l=0,i=this.data.datasets.length;l<i;++l)this._updateDataset(l,Nn(s)?s({datasetIndex:l}):s);this.notifyPlugins("afterDatasetsUpdate",{mode:s})}}_updateDataset(s,l){const i=this.getDatasetMeta(s),c={meta:i,index:s,mode:l,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",c)!==!1&&(i.controller._update(l),c.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",c))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&($a.has(this)?this.attached&&!$a.running(this)&&$a.start(this):(this.draw(),cb({chart:this})))}draw(){let s;if(this._resizeBeforeDraw){const{width:i,height:c}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,c)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const l=this._layers;for(s=0;s<l.length&&l[s].z<=0;++s)l[s].draw(this.chartArea);for(this._drawDatasets();s<l.length;++s)l[s].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(s){const l=this._sortedMetasets,i=[];let c,d;for(c=0,d=l.length;c<d;++c){const u=l[c];(!s||u.visible)&&i.push(u)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const s=this.getSortedVisibleDatasetMetas();for(let l=s.length-1;l>=0;--l)this._drawDataset(s[l]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(s){const l=this.ctx,i={meta:s,index:s.index,cancelable:!0},c=E1(this,s);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(c&&Lh(l,c),s.controller.draw(),c&&zh(l),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(s){return Cy(s,this.chartArea,this._minPadding)}getElementsAtEventForMode(s,l,i,c){const d=iC.modes[l];return typeof d=="function"?d(this,s,i,c):[]}getDatasetMeta(s){const l=this.data.datasets[s],i=this._metasets;let c=i.filter(d=>d&&d._dataset===l).pop();return c||(c={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:l&&l.order||0,index:s,_dataset:l,_parsed:[],_sorted:!1},i.push(c)),c}getContext(){return this.$context||(this.$context=Gl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(s){const l=this.data.datasets[s];if(!l)return!1;const i=this.getDatasetMeta(s);return typeof i.hidden=="boolean"?!i.hidden:!l.hidden}setDatasetVisibility(s,l){const i=this.getDatasetMeta(s);i.hidden=!l}toggleDataVisibility(s){this._hiddenIndices[s]=!this._hiddenIndices[s]}getDataVisibility(s){return!this._hiddenIndices[s]}_updateVisibility(s,l,i){const c=i?"show":"hide",d=this.getDatasetMeta(s),u=d.controller._resolveAnimations(void 0,c);or(l)?(d.data[l].hidden=!i,this.update()):(this.setDatasetVisibility(s,i),u.update(d,{visible:i}),this.update(h=>h.datasetIndex===s?c:void 0))}hide(s,l){this._updateVisibility(s,l,!1)}show(s,l){this._updateVisibility(s,l,!0)}_destroyDatasetMeta(s){const l=this._metasets[s];l&&l.controller&&l.controller._destroy(),delete this._metasets[s]}_stop(){let s,l;for(this.stop(),$a.remove(this),s=0,l=this.data.datasets.length;s<l;++s)this._destroyDatasetMeta(s)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:s,ctx:l}=this;this._stop(),this.config.clearCache(),s&&(this.unbindEvents(),Dx(s,l),this.platform.releaseContext(l),this.canvas=null,this.ctx=null),delete co[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...s){return this.canvas.toDataURL(...s)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const s=this._listeners,l=this.platform,i=(d,u)=>{l.addEventListener(this,d,u),s[d]=u},c=(d,u,h)=>{d.offsetX=u,d.offsetY=h,this._eventHandler(d)};Nt(this.options.events,d=>i(d,c))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const s=this._responsiveListeners,l=this.platform,i=(f,g)=>{l.addEventListener(this,f,g),s[f]=g},c=(f,g)=>{s[f]&&(l.removeEventListener(this,f,g),delete s[f])},d=(f,g)=>{this.canvas&&this.resize(f,g)};let u;const h=()=>{c("attach",h),this.attached=!0,this.resize(),i("resize",d),i("detach",u)};u=()=>{this.attached=!1,c("resize",d),this._stop(),this._resize(0,0),i("attach",h)},l.isAttached(this.canvas)?h():u()}unbindEvents(){Nt(this._listeners,(s,l)=>{this.platform.removeEventListener(this,l,s)}),this._listeners={},Nt(this._responsiveListeners,(s,l)=>{this.platform.removeEventListener(this,l,s)}),this._responsiveListeners=void 0}updateHoverStyle(s,l,i){const c=i?"set":"remove";let d,u,h,f;for(l==="dataset"&&(d=this.getDatasetMeta(s[0].datasetIndex),d.controller["_"+c+"DatasetHoverStyle"]()),h=0,f=s.length;h<f;++h){u=s[h];const g=u&&this.getDatasetMeta(u.datasetIndex).controller;g&&g[c+"HoverStyle"](u.element,u.datasetIndex,u.index)}}getActiveElements(){return this._active||[]}setActiveElements(s){const l=this._active||[],i=s.map(({datasetIndex:d,index:u})=>{const h=this.getDatasetMeta(d);if(!h)throw new Error("No dataset found at index "+d);return{datasetIndex:d,element:h.data[u],index:u}});!fo(i,l)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,l))}notifyPlugins(s,l,i){return this._plugins.notify(this,s,l,i)}isPluginEnabled(s){return this._plugins._cache.filter(l=>l.plugin.id===s).length===1}_updateHoverStyles(s,l,i){const c=this.options.hover,d=(f,g)=>f.filter(b=>!g.some(y=>b.datasetIndex===y.datasetIndex&&b.index===y.index)),u=d(l,s),h=i?s:d(s,l);u.length&&this.updateHoverStyle(u,c.mode,!1),h.length&&c.mode&&this.updateHoverStyle(h,c.mode,!0)}_eventHandler(s,l){const i={event:s,replay:l,cancelable:!0,inChartArea:this.isPointInArea(s)},c=u=>(u.options.events||this.options.events).includes(s.native.type);if(this.notifyPlugins("beforeEvent",i,c)===!1)return;const d=this._handleEvent(s,l,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,c),(d||i.changed)&&this.render(),this}_handleEvent(s,l,i){const{_active:c=[],options:d}=this,u=l,h=this._getActiveElements(s,c,i,u),f=kw(s),g=oA(s,this._lastEvent,i,f);i&&(this._lastEvent=null,Dt(d.onHover,[s,h,this],this),f&&Dt(d.onClick,[s,h,this],this));const b=!fo(h,c);return(b||l)&&(this._active=h,this._updateHoverStyles(h,c,l)),this._lastEvent=g,b}_getActiveElements(s,l,i,c){if(s.type==="mouseout")return[];if(!i)return l;const d=this.options.hover;return this.getElementsAtEventForMode(s,d.mode,d,c)}};function db(){return Nt(hr.instances,a=>a._plugins.invalidate())}function dA(a,s,l){const{startAngle:i,x:c,y:d,outerRadius:u,innerRadius:h,options:f}=s,{borderWidth:g,borderJoinStyle:b}=f,y=Math.min(g/u,oa(i-l));if(a.beginPath(),a.arc(c,d,u-g/2,i+y/2,l-y/2),h>0){const v=Math.min(g/h,oa(i-l));a.arc(c,d,h+g/2,l-v/2,i+v/2,!0)}else{const v=Math.min(g/2,u*oa(i-l));if(b==="round")a.arc(c,d,v,l-Mt/2,i+Mt/2,!0);else if(b==="bevel"){const C=2*v*v,w=-C*Math.cos(l+Mt/2)+c,A=-C*Math.sin(l+Mt/2)+d,S=C*Math.cos(i+Mt/2)+c,E=C*Math.sin(i+Mt/2)+d;a.lineTo(w,A),a.lineTo(S,E)}}a.closePath(),a.moveTo(0,0),a.rect(0,0,a.canvas.width,a.canvas.height),a.clip("evenodd")}function uA(a,s,l){const{startAngle:i,pixelMargin:c,x:d,y:u,outerRadius:h,innerRadius:f}=s;let g=c/h;a.beginPath(),a.arc(d,u,h,i-g,l+g),f>c?(g=c/f,a.arc(d,u,f,l+g,i-g,!0)):a.arc(d,u,c,l+Kt,i-Kt),a.closePath(),a.clip()}function hA(a){return Uh(a,["outerStart","outerEnd","innerStart","innerEnd"])}function mA(a,s,l,i){const c=hA(a.options.borderRadius),d=(l-s)/2,u=Math.min(d,i*s/2),h=f=>{const g=(l-Math.min(d,f))*i/2;return js(f,0,Math.min(d,g))};return{outerStart:h(c.outerStart),outerEnd:h(c.outerEnd),innerStart:js(c.innerStart,0,u),innerEnd:js(c.innerEnd,0,u)}}function Ul(a,s,l,i){return{x:l+a*Math.cos(s),y:i+a*Math.sin(s)}}function So(a,s,l,i,c,d){const{x:u,y:h,startAngle:f,pixelMargin:g,innerRadius:b}=s,y=Math.max(s.outerRadius+i+l-g,0),v=b>0?b+i+l+g:0;let C=0;const w=c-f;if(i){const Y=b>0?b-i:0,N=y>0?y-i:0,M=(Y+N)/2,L=M!==0?w*M/(M+i):w;C=(w-L)/2}const A=Math.max(.001,w*y-l/Mt)/y,S=(w-A)/2,E=f+S+C,$=c-S-C,{outerStart:D,outerEnd:I,innerStart:V,innerEnd:_}=mA(s,v,y,$-E),B=y-D,z=y-I,X=E+D/B,T=$-I/z,W=v+V,F=v+_,Q=E+V/W,O=$-_/F;if(a.beginPath(),d){const Y=(X+T)/2;if(a.arc(u,h,y,X,Y),a.arc(u,h,y,Y,T),I>0){const U=Ul(z,T,u,h);a.arc(U.x,U.y,I,T,$+Kt)}const N=Ul(F,$,u,h);if(a.lineTo(N.x,N.y),_>0){const U=Ul(F,O,u,h);a.arc(U.x,U.y,_,$+Kt,O+Math.PI)}const M=($-_/v+(E+V/v))/2;if(a.arc(u,h,v,$-_/v,M,!0),a.arc(u,h,v,M,E+V/v,!0),V>0){const U=Ul(W,Q,u,h);a.arc(U.x,U.y,V,Q+Math.PI,E-Kt)}const L=Ul(B,E,u,h);if(a.lineTo(L.x,L.y),D>0){const U=Ul(B,X,u,h);a.arc(U.x,U.y,D,E-Kt,X)}}else{a.moveTo(u,h);const Y=Math.cos(X)*y+u,N=Math.sin(X)*y+h;a.lineTo(Y,N);const M=Math.cos(T)*y+u,L=Math.sin(T)*y+h;a.lineTo(M,L)}a.closePath()}function fA(a,s,l,i,c){const{fullCircles:d,startAngle:u,circumference:h}=s;let f=s.endAngle;if(d){So(a,s,l,i,f,c);for(let g=0;g<d;++g)a.fill();isNaN(h)||(f=u+(h%Xt||Xt))}return So(a,s,l,i,f,c),a.fill(),f}function pA(a,s,l,i,c){const{fullCircles:d,startAngle:u,circumference:h,options:f}=s,{borderWidth:g,borderJoinStyle:b,borderDash:y,borderDashOffset:v,borderRadius:C}=f,w=f.borderAlign==="inner";if(!g)return;a.setLineDash(y||[]),a.lineDashOffset=v,w?(a.lineWidth=g*2,a.lineJoin=b||"round"):(a.lineWidth=g,a.lineJoin=b||"bevel");let A=s.endAngle;if(d){So(a,s,l,i,A,c);for(let S=0;S<d;++S)a.stroke();isNaN(h)||(A=u+(h%Xt||Xt))}w&&uA(a,s,A),f.selfJoin&&A-u>=Mt&&C===0&&b!=="miter"&&dA(a,s,A),d||(So(a,s,l,i,A,c),a.stroke())}class gA extends Xl{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:s=>s!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(s){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,s&&Object.assign(this,s)}inRange(s,l,i){const c=this.getProps(["x","y"],i),{angle:d,distance:u}=gy(c,{x:s,y:l}),{startAngle:h,endAngle:f,innerRadius:g,outerRadius:b,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),v=(this.options.spacing+this.options.borderWidth)/2,C=ht(y,f-h),w=bo(d,h,f)&&h!==f,A=C>=Xt||w,S=qn(u,g+v,b+v);return A&&S}getCenterPoint(s){const{x:l,y:i,startAngle:c,endAngle:d,innerRadius:u,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],s),{offset:f,spacing:g}=this.options,b=(c+d)/2,y=(u+h+g+f)/2;return{x:l+Math.cos(b)*y,y:i+Math.sin(b)*y}}tooltipPosition(s){return this.getCenterPoint(s)}draw(s){const{options:l,circumference:i}=this,c=(l.offset||0)/4,d=(l.spacing||0)/2,u=l.circular;if(this.pixelMargin=l.borderAlign==="inner"?.33:0,this.fullCircles=i>Xt?Math.floor(i/Xt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;s.save();const h=(this.startAngle+this.endAngle)/2;s.translate(Math.cos(h)*c,Math.sin(h)*c);const f=1-Math.sin(Math.min(Mt,i||0)),g=c*f;s.fillStyle=l.backgroundColor,s.strokeStyle=l.borderColor,fA(s,this,g,d,u),pA(s,this,g,d,u),s.restore()}}function Py(a,s){const{x:l,y:i,base:c,width:d,height:u}=a.getProps(["x","y","base","width","height"],s);let h,f,g,b,y;return a.horizontal?(y=u/2,h=Math.min(l,c),f=Math.max(l,c),g=i-y,b=i+y):(y=d/2,h=l-y,f=l+y,g=Math.min(i,c),b=Math.max(i,c)),{left:h,top:g,right:f,bottom:b}}function bn(a,s,l,i){return a?0:js(s,l,i)}function xA(a,s,l){const i=a.options.borderWidth,c=a.borderSkipped,d=Ay(i);return{t:bn(c.top,d.top,0,l),r:bn(c.right,d.right,0,s),b:bn(c.bottom,d.bottom,0,l),l:bn(c.left,d.left,0,s)}}function bA(a,s,l){const{enableBorderRadius:i}=a.getProps(["enableBorderRadius"]),c=a.options.borderRadius,d=Bl(c),u=Math.min(s,l),h=a.borderSkipped,f=i||mt(c);return{topLeft:bn(!f||h.top||h.left,d.topLeft,0,u),topRight:bn(!f||h.top||h.right,d.topRight,0,u),bottomLeft:bn(!f||h.bottom||h.left,d.bottomLeft,0,u),bottomRight:bn(!f||h.bottom||h.right,d.bottomRight,0,u)}}function yA(a){const s=Py(a),l=s.right-s.left,i=s.bottom-s.top,c=xA(a,l/2,i/2),d=bA(a,l/2,i/2);return{outer:{x:s.left,y:s.top,w:l,h:i,radius:d},inner:{x:s.left+c.l,y:s.top+c.t,w:l-c.l-c.r,h:i-c.t-c.b,radius:{topLeft:Math.max(0,d.topLeft-Math.max(c.t,c.l)),topRight:Math.max(0,d.topRight-Math.max(c.t,c.r)),bottomLeft:Math.max(0,d.bottomLeft-Math.max(c.b,c.l)),bottomRight:Math.max(0,d.bottomRight-Math.max(c.b,c.r))}}}}function uh(a,s,l,i){const c=s===null,d=l===null,h=a&&!(c&&d)&&Py(a,i);return h&&(c||qn(s,h.left,h.right))&&(d||qn(l,h.top,h.bottom))}function vA(a){return a.topLeft||a.topRight||a.bottomLeft||a.bottomRight}function jA(a,s){a.rect(s.x,s.y,s.w,s.h)}function hh(a,s,l={}){const i=a.x!==l.x?-s:0,c=a.y!==l.y?-s:0,d=(a.x+a.w!==l.x+l.w?s:0)-i,u=(a.y+a.h!==l.y+l.h?s:0)-c;return{x:a.x+i,y:a.y+c,w:a.w+d,h:a.h+u,radius:a.radius}}class qy extends Xl{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(s){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,s&&Object.assign(this,s)}draw(s){const{inflateAmount:l,options:{borderColor:i,backgroundColor:c}}=this,{inner:d,outer:u}=yA(this),h=vA(u.radius)?vo:jA;s.save(),(u.w!==d.w||u.h!==d.h)&&(s.beginPath(),h(s,hh(u,l,d)),s.clip(),h(s,hh(d,-l,u)),s.fillStyle=i,s.fill("evenodd")),s.beginPath(),h(s,hh(d,l)),s.fillStyle=c,s.fill(),s.restore()}inRange(s,l,i){return uh(this,s,l,i)}inXRange(s,l){return uh(this,s,null,l)}inYRange(s,l){return uh(this,null,s,l)}getCenterPoint(s){const{x:l,y:i,base:c,horizontal:d}=this.getProps(["x","y","base","horizontal"],s);return{x:d?(l+c)/2:l,y:d?i:(i+c)/2}}getRange(s){return s==="x"?this.width/2:this.height/2}}const ub=(a,s)=>{let{boxHeight:l=s,boxWidth:i=s}=a;return a.usePointStyle&&(l=Math.min(l,s),i=a.pointStyleWidth||Math.min(i,s)),{boxWidth:i,boxHeight:l,itemHeight:Math.max(s,l)}},NA=(a,s)=>a!==null&&s!==null&&a.datasetIndex===s.datasetIndex&&a.index===s.index;class hb extends Xl{constructor(s){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=s.chart,this.options=s.options,this.ctx=s.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(s,l,i){this.maxWidth=s,this.maxHeight=l,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const s=this.options.labels||{};let l=Dt(s.generateLabels,[this.chart],this)||[];s.filter&&(l=l.filter(i=>s.filter(i,this.chart.data))),s.sort&&(l=l.sort((i,c)=>s.sort(i,c,this.chart.data))),this.options.reverse&&l.reverse(),this.legendItems=l}fit(){const{options:s,ctx:l}=this;if(!s.display){this.width=this.height=0;return}const i=s.labels,c=Ns(i.font),d=c.size,u=this._computeTitleHeight(),{boxWidth:h,itemHeight:f}=ub(i,d);let g,b;l.font=c.string,this.isHorizontal()?(g=this.maxWidth,b=this._fitRows(u,d,h,f)+10):(b=this.maxHeight,g=this._fitCols(u,c,h,f)+10),this.width=Math.min(g,s.maxWidth||this.maxWidth),this.height=Math.min(b,s.maxHeight||this.maxHeight)}_fitRows(s,l,i,c){const{ctx:d,maxWidth:u,options:{labels:{padding:h}}}=this,f=this.legendHitBoxes=[],g=this.lineWidths=[0],b=c+h;let y=s;d.textAlign="left",d.textBaseline="middle";let v=-1,C=-b;return this.legendItems.forEach((w,A)=>{const S=i+l/2+d.measureText(w.text).width;(A===0||g[g.length-1]+S+2*h>u)&&(y+=b,g[g.length-(A>0?0:1)]=0,C+=b,v++),f[A]={left:0,top:C,row:v,width:S,height:c},g[g.length-1]+=S+h}),y}_fitCols(s,l,i,c){const{ctx:d,maxHeight:u,options:{labels:{padding:h}}}=this,f=this.legendHitBoxes=[],g=this.columnSizes=[],b=u-s;let y=h,v=0,C=0,w=0,A=0;return this.legendItems.forEach((S,E)=>{const{itemWidth:$,itemHeight:D}=SA(i,l,d,S,c);E>0&&C+D+2*h>b&&(y+=v+h,g.push({width:v,height:C}),w+=v+h,A++,v=C=0),f[E]={left:w,top:C,col:A,width:$,height:D},v=Math.max(v,$),C+=D+h}),y+=v,g.push({width:v,height:C}),y}adjustHitBoxes(){if(!this.options.display)return;const s=this._computeTitleHeight(),{legendHitBoxes:l,options:{align:i,labels:{padding:c},rtl:d}}=this,u=Fl(d,this.left,this.width);if(this.isHorizontal()){let h=0,f=Ms(i,this.left+c,this.right-this.lineWidths[h]);for(const g of l)h!==g.row&&(h=g.row,f=Ms(i,this.left+c,this.right-this.lineWidths[h])),g.top+=this.top+s+c,g.left=u.leftForLtr(u.x(f),g.width),f+=g.width+c}else{let h=0,f=Ms(i,this.top+s+c,this.bottom-this.columnSizes[h].height);for(const g of l)g.col!==h&&(h=g.col,f=Ms(i,this.top+s+c,this.bottom-this.columnSizes[h].height)),g.top=f,g.left+=this.left+c,g.left=u.leftForLtr(u.x(g.left),g.width),f+=g.height+c}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const s=this.ctx;Lh(s,this),this._draw(),zh(s)}}_draw(){const{options:s,columnSizes:l,lineWidths:i,ctx:c}=this,{align:d,labels:u}=s,h=Ft.color,f=Fl(s.rtl,this.left,this.width),g=Ns(u.font),{padding:b}=u,y=g.size,v=y/2;let C;this.drawTitle(),c.textAlign=f.textAlign("left"),c.textBaseline="middle",c.lineWidth=.5,c.font=g.string;const{boxWidth:w,boxHeight:A,itemHeight:S}=ub(u,y),E=function(_,B,z){if(isNaN(w)||w<=0||isNaN(A)||A<0)return;c.save();const X=ht(z.lineWidth,1);if(c.fillStyle=ht(z.fillStyle,h),c.lineCap=ht(z.lineCap,"butt"),c.lineDashOffset=ht(z.lineDashOffset,0),c.lineJoin=ht(z.lineJoin,"miter"),c.lineWidth=X,c.strokeStyle=ht(z.strokeStyle,h),c.setLineDash(ht(z.lineDash,[])),u.usePointStyle){const T={radius:A*Math.SQRT2/2,pointStyle:z.pointStyle,rotation:z.rotation,borderWidth:X},W=f.xPlus(_,w/2),F=B+v;wy(c,T,W,F,u.pointStyleWidth&&w)}else{const T=B+Math.max((y-A)/2,0),W=f.leftForLtr(_,w),F=Bl(z.borderRadius);c.beginPath(),Object.values(F).some(Q=>Q!==0)?vo(c,{x:W,y:T,w,h:A,radius:F}):c.rect(W,T,w,A),c.fill(),X!==0&&c.stroke()}c.restore()},$=function(_,B,z){yo(c,z.text,_,B+S/2,g,{strikethrough:z.hidden,textAlign:f.textAlign(z.textAlign)})},D=this.isHorizontal(),I=this._computeTitleHeight();D?C={x:Ms(d,this.left+b,this.right-i[0]),y:this.top+b+I,line:0}:C={x:this.left+b,y:Ms(d,this.top+I+b,this.bottom-l[0].height),line:0},Dy(this.ctx,s.textDirection);const V=S+b;this.legendItems.forEach((_,B)=>{c.strokeStyle=_.fontColor,c.fillStyle=_.fontColor;const z=c.measureText(_.text).width,X=f.textAlign(_.textAlign||(_.textAlign=u.textAlign)),T=w+v+z;let W=C.x,F=C.y;f.setWidth(this.width),D?B>0&&W+T+b>this.right&&(F=C.y+=V,C.line++,W=C.x=Ms(d,this.left+b,this.right-i[C.line])):B>0&&F+V>this.bottom&&(W=C.x=W+l[C.line].width+b,C.line++,F=C.y=Ms(d,this.top+I+b,this.bottom-l[C.line].height));const Q=f.x(W);if(E(Q,F,_),W=Vw(X,W+w+v,D?W+T:this.right,s.rtl),$(f.x(W),F,_),D)C.x+=T+b;else if(typeof _.text!="string"){const O=g.lineHeight;C.y+=Gy(_,O)+b}else C.y+=V}),My(this.ctx,s.textDirection)}drawTitle(){const s=this.options,l=s.title,i=Ns(l.font),c=ea(l.padding);if(!l.display)return;const d=Fl(s.rtl,this.left,this.width),u=this.ctx,h=l.position,f=i.size/2,g=c.top+f;let b,y=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),b=this.top+g,y=Ms(s.align,y,this.right-v);else{const w=this.columnSizes.reduce((A,S)=>Math.max(A,S.height),0);b=g+Ms(s.align,this.top,this.bottom-w-s.labels.padding-this._computeTitleHeight())}const C=Ms(h,y,y+v);u.textAlign=d.textAlign(jy(h)),u.textBaseline="middle",u.strokeStyle=l.color,u.fillStyle=l.color,u.font=i.string,yo(u,l.text,C,b,i)}_computeTitleHeight(){const s=this.options.title,l=Ns(s.font),i=ea(s.padding);return s.display?l.lineHeight+i.height:0}_getLegendItemAt(s,l){let i,c,d;if(qn(s,this.left,this.right)&&qn(l,this.top,this.bottom)){for(d=this.legendHitBoxes,i=0;i<d.length;++i)if(c=d[i],qn(s,c.left,c.left+c.width)&&qn(l,c.top,c.top+c.height))return this.legendItems[i]}return null}handleEvent(s){const l=this.options;if(!AA(s.type,l))return;const i=this._getLegendItemAt(s.x,s.y);if(s.type==="mousemove"||s.type==="mouseout"){const c=this._hoveredItem,d=NA(c,i);c&&!d&&Dt(l.onLeave,[s,c,this],this),this._hoveredItem=i,i&&!d&&Dt(l.onHover,[s,i,this],this)}else i&&Dt(l.onClick,[s,i,this],this)}}function SA(a,s,l,i,c){const d=wA(i,a,s,l),u=CA(c,i,s.lineHeight);return{itemWidth:d,itemHeight:u}}function wA(a,s,l,i){let c=a.text;return c&&typeof c!="string"&&(c=c.reduce((d,u)=>d.length>u.length?d:u)),s+l.size/2+i.measureText(c).width}function CA(a,s,l){let i=a;return typeof s.text!="string"&&(i=Gy(s,l)),i}function Gy(a,s){const l=a.text?a.text.length:0;return s*l}function AA(a,s){return!!((a==="mousemove"||a==="mouseout")&&(s.onHover||s.onLeave)||s.onClick&&(a==="click"||a==="mouseup"))}var Xy={id:"legend",_element:hb,start(a,s,l){const i=a.legend=new hb({ctx:a.ctx,options:l,chart:a});xn.configure(a,i,l),xn.addBox(a,i)},stop(a){xn.removeBox(a,a.legend),delete a.legend},beforeUpdate(a,s,l){const i=a.legend;xn.configure(a,i,l),i.options=l},afterUpdate(a){const s=a.legend;s.buildLabels(),s.adjustHitBoxes()},afterEvent(a,s){s.replay||a.legend.handleEvent(s.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(a,s,l){const i=s.datasetIndex,c=l.chart;c.isDatasetVisible(i)?(c.hide(i),s.hidden=!0):(c.show(i),s.hidden=!1)},onHover:null,onLeave:null,labels:{color:a=>a.chart.options.color,boxWidth:40,padding:10,generateLabels(a){const s=a.data.datasets,{labels:{usePointStyle:l,pointStyle:i,textAlign:c,color:d,useBorderRadius:u,borderRadius:h}}=a.legend.options;return a._getSortedDatasetMetas().map(f=>{const g=f.controller.getStyle(l?0:void 0),b=ea(g.borderWidth);return{text:s[f.index].label,fillStyle:g.backgroundColor,fontColor:d,hidden:!f.visible,lineCap:g.borderCapStyle,lineDash:g.borderDash,lineDashOffset:g.borderDashOffset,lineJoin:g.borderJoinStyle,lineWidth:(b.width+b.height)/4,strokeStyle:g.borderColor,pointStyle:i||g.pointStyle,rotation:g.rotation,textAlign:c||g.textAlign,borderRadius:u&&(h||g.borderRadius),datasetIndex:f.index}},this)}},title:{color:a=>a.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:a=>!a.startsWith("on"),labels:{_scriptable:a=>!["generateLabels","filter","sort"].includes(a)}}};const Ji={average(a){if(!a.length)return!1;let s,l,i=new Set,c=0,d=0;for(s=0,l=a.length;s<l;++s){const h=a[s].element;if(h&&h.hasValue()){const f=h.tooltipPosition();i.add(f.x),c+=f.y,++d}}return d===0||i.size===0?!1:{x:[...i].reduce((h,f)=>h+f)/i.size,y:c/d}},nearest(a,s){if(!a.length)return!1;let l=s.x,i=s.y,c=Number.POSITIVE_INFINITY,d,u,h;for(d=0,u=a.length;d<u;++d){const f=a[d].element;if(f&&f.hasValue()){const g=f.getCenterPoint(),b=Lw(s,g);b<c&&(c=b,h=f)}}if(h){const f=h.tooltipPosition();l=f.x,i=f.y}return{x:l,y:i}}};function ra(a,s){return s&&(Jt(s)?Array.prototype.push.apply(a,s):a.push(s)),a}function Oa(a){return(typeof a=="string"||a instanceof String)&&a.indexOf(`
`)>-1?a.split(`
`):a}function EA(a,s){const{element:l,datasetIndex:i,index:c}=s,d=a.getDatasetMeta(i).controller,{label:u,value:h}=d.getLabelAndValue(c);return{chart:a,label:u,parsed:d.getParsed(c),raw:a.data.datasets[i].data[c],formattedValue:h,dataset:d.getDataset(),dataIndex:c,datasetIndex:i,element:l}}function mb(a,s){const l=a.chart.ctx,{body:i,footer:c,title:d}=a,{boxWidth:u,boxHeight:h}=s,f=Ns(s.bodyFont),g=Ns(s.titleFont),b=Ns(s.footerFont),y=d.length,v=c.length,C=i.length,w=ea(s.padding);let A=w.height,S=0,E=i.reduce((I,V)=>I+V.before.length+V.lines.length+V.after.length,0);if(E+=a.beforeBody.length+a.afterBody.length,y&&(A+=y*g.lineHeight+(y-1)*s.titleSpacing+s.titleMarginBottom),E){const I=s.displayColors?Math.max(h,f.lineHeight):f.lineHeight;A+=C*I+(E-C)*f.lineHeight+(E-1)*s.bodySpacing}v&&(A+=s.footerMarginTop+v*b.lineHeight+(v-1)*s.footerSpacing);let $=0;const D=function(I){S=Math.max(S,l.measureText(I).width+$)};return l.save(),l.font=g.string,Nt(a.title,D),l.font=f.string,Nt(a.beforeBody.concat(a.afterBody),D),$=s.displayColors?u+2+s.boxPadding:0,Nt(i,I=>{Nt(I.before,D),Nt(I.lines,D),Nt(I.after,D)}),$=0,l.font=b.string,Nt(a.footer,D),l.restore(),S+=w.width,{width:S,height:A}}function TA(a,s){const{y:l,height:i}=s;return l<i/2?"top":l>a.height-i/2?"bottom":"center"}function _A(a,s,l,i){const{x:c,width:d}=i,u=l.caretSize+l.caretPadding;if(a==="left"&&c+d+u>s.width||a==="right"&&c-d-u<0)return!0}function kA(a,s,l,i){const{x:c,width:d}=l,{width:u,chartArea:{left:h,right:f}}=a;let g="center";return i==="center"?g=c<=(h+f)/2?"left":"right":c<=d/2?g="left":c>=u-d/2&&(g="right"),_A(g,a,s,l)&&(g="center"),g}function fb(a,s,l){const i=l.yAlign||s.yAlign||TA(a,l);return{xAlign:l.xAlign||s.xAlign||kA(a,s,l,i),yAlign:i}}function DA(a,s){let{x:l,width:i}=a;return s==="right"?l-=i:s==="center"&&(l-=i/2),l}function MA(a,s,l){let{y:i,height:c}=a;return s==="top"?i+=l:s==="bottom"?i-=c+l:i-=c/2,i}function pb(a,s,l,i){const{caretSize:c,caretPadding:d,cornerRadius:u}=a,{xAlign:h,yAlign:f}=l,g=c+d,{topLeft:b,topRight:y,bottomLeft:v,bottomRight:C}=Bl(u);let w=DA(s,h);const A=MA(s,f,g);return f==="center"?h==="left"?w+=g:h==="right"&&(w-=g):h==="left"?w-=Math.max(b,v)+c:h==="right"&&(w+=Math.max(y,C)+c),{x:js(w,0,i.width-s.width),y:js(A,0,i.height-s.height)}}function Xc(a,s,l){const i=ea(l.padding);return s==="center"?a.x+a.width/2:s==="right"?a.x+a.width-i.right:a.x+i.left}function gb(a){return ra([],Oa(a))}function RA(a,s,l){return Gl(a,{tooltip:s,tooltipItems:l,type:"tooltip"})}function xb(a,s){const l=s&&s.dataset&&s.dataset.tooltip&&s.dataset.tooltip.callbacks;return l?a.override(l):a}const Wy={beforeTitle:Ra,title(a){if(a.length>0){const s=a[0],l=s.chart.data.labels,i=l?l.length:0;if(this&&this.options&&this.options.mode==="dataset")return s.dataset.label||"";if(s.label)return s.label;if(i>0&&s.dataIndex<i)return l[s.dataIndex]}return""},afterTitle:Ra,beforeBody:Ra,beforeLabel:Ra,label(a){if(this&&this.options&&this.options.mode==="dataset")return a.label+": "+a.formattedValue||a.formattedValue;let s=a.dataset.label||"";s&&(s+=": ");const l=a.formattedValue;return Et(l)||(s+=l),s},labelColor(a){const l=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{borderColor:l.borderColor,backgroundColor:l.backgroundColor,borderWidth:l.borderWidth,borderDash:l.borderDash,borderDashOffset:l.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(a){const l=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{pointStyle:l.pointStyle,rotation:l.rotation}},afterLabel:Ra,afterBody:Ra,beforeFooter:Ra,footer:Ra,afterFooter:Ra};function ys(a,s,l,i){const c=a[s].call(l,i);return typeof c>"u"?Wy[s].call(l,i):c}class bb extends Xl{static positioners=Ji;constructor(s){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=s.chart,this.options=s.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(s){this.options=s,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const s=this._cachedAnimations;if(s)return s;const l=this.chart,i=this.options.setContext(this.getContext()),c=i.enabled&&l.options.animation&&i.animations,d=new Ry(this.chart,c);return c._cacheable&&(this._cachedAnimations=Object.freeze(d)),d}getContext(){return this.$context||(this.$context=RA(this.chart.getContext(),this,this._tooltipItems))}getTitle(s,l){const{callbacks:i}=l,c=ys(i,"beforeTitle",this,s),d=ys(i,"title",this,s),u=ys(i,"afterTitle",this,s);let h=[];return h=ra(h,Oa(c)),h=ra(h,Oa(d)),h=ra(h,Oa(u)),h}getBeforeBody(s,l){return gb(ys(l.callbacks,"beforeBody",this,s))}getBody(s,l){const{callbacks:i}=l,c=[];return Nt(s,d=>{const u={before:[],lines:[],after:[]},h=xb(i,d);ra(u.before,Oa(ys(h,"beforeLabel",this,d))),ra(u.lines,ys(h,"label",this,d)),ra(u.after,Oa(ys(h,"afterLabel",this,d))),c.push(u)}),c}getAfterBody(s,l){return gb(ys(l.callbacks,"afterBody",this,s))}getFooter(s,l){const{callbacks:i}=l,c=ys(i,"beforeFooter",this,s),d=ys(i,"footer",this,s),u=ys(i,"afterFooter",this,s);let h=[];return h=ra(h,Oa(c)),h=ra(h,Oa(d)),h=ra(h,Oa(u)),h}_createItems(s){const l=this._active,i=this.chart.data,c=[],d=[],u=[];let h=[],f,g;for(f=0,g=l.length;f<g;++f)h.push(EA(this.chart,l[f]));return s.filter&&(h=h.filter((b,y,v)=>s.filter(b,y,v,i))),s.itemSort&&(h=h.sort((b,y)=>s.itemSort(b,y,i))),Nt(h,b=>{const y=xb(s.callbacks,b);c.push(ys(y,"labelColor",this,b)),d.push(ys(y,"labelPointStyle",this,b)),u.push(ys(y,"labelTextColor",this,b))}),this.labelColors=c,this.labelPointStyles=d,this.labelTextColors=u,this.dataPoints=h,h}update(s,l){const i=this.options.setContext(this.getContext()),c=this._active;let d,u=[];if(!c.length)this.opacity!==0&&(d={opacity:0});else{const h=Ji[i.position].call(this,c,this._eventPosition);u=this._createItems(i),this.title=this.getTitle(u,i),this.beforeBody=this.getBeforeBody(u,i),this.body=this.getBody(u,i),this.afterBody=this.getAfterBody(u,i),this.footer=this.getFooter(u,i);const f=this._size=mb(this,i),g=Object.assign({},h,f),b=fb(this.chart,i,g),y=pb(i,g,b,this.chart);this.xAlign=b.xAlign,this.yAlign=b.yAlign,d={opacity:1,x:y.x,y:y.y,width:f.width,height:f.height,caretX:h.x,caretY:h.y}}this._tooltipItems=u,this.$context=void 0,d&&this._resolveAnimations().update(this,d),s&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:l})}drawCaret(s,l,i,c){const d=this.getCaretPosition(s,i,c);l.lineTo(d.x1,d.y1),l.lineTo(d.x2,d.y2),l.lineTo(d.x3,d.y3)}getCaretPosition(s,l,i){const{xAlign:c,yAlign:d}=this,{caretSize:u,cornerRadius:h}=i,{topLeft:f,topRight:g,bottomLeft:b,bottomRight:y}=Bl(h),{x:v,y:C}=s,{width:w,height:A}=l;let S,E,$,D,I,V;return d==="center"?(I=C+A/2,c==="left"?(S=v,E=S-u,D=I+u,V=I-u):(S=v+w,E=S+u,D=I-u,V=I+u),$=S):(c==="left"?E=v+Math.max(f,b)+u:c==="right"?E=v+w-Math.max(g,y)-u:E=this.caretX,d==="top"?(D=C,I=D-u,S=E-u,$=E+u):(D=C+A,I=D+u,S=E+u,$=E-u),V=D),{x1:S,x2:E,x3:$,y1:D,y2:I,y3:V}}drawTitle(s,l,i){const c=this.title,d=c.length;let u,h,f;if(d){const g=Fl(i.rtl,this.x,this.width);for(s.x=Xc(this,i.titleAlign,i),l.textAlign=g.textAlign(i.titleAlign),l.textBaseline="middle",u=Ns(i.titleFont),h=i.titleSpacing,l.fillStyle=i.titleColor,l.font=u.string,f=0;f<d;++f)l.fillText(c[f],g.x(s.x),s.y+u.lineHeight/2),s.y+=u.lineHeight+h,f+1===d&&(s.y+=i.titleMarginBottom-h)}}_drawColorBox(s,l,i,c,d){const u=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:f,boxWidth:g}=d,b=Ns(d.bodyFont),y=Xc(this,"left",d),v=c.x(y),C=f<b.lineHeight?(b.lineHeight-f)/2:0,w=l.y+C;if(d.usePointStyle){const A={radius:Math.min(g,f)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},S=c.leftForLtr(v,g)+g/2,E=w+f/2;s.strokeStyle=d.multiKeyBackground,s.fillStyle=d.multiKeyBackground,Mx(s,A,S,E),s.strokeStyle=u.borderColor,s.fillStyle=u.backgroundColor,Mx(s,A,S,E)}else{s.lineWidth=mt(u.borderWidth)?Math.max(...Object.values(u.borderWidth)):u.borderWidth||1,s.strokeStyle=u.borderColor,s.setLineDash(u.borderDash||[]),s.lineDashOffset=u.borderDashOffset||0;const A=c.leftForLtr(v,g),S=c.leftForLtr(c.xPlus(v,1),g-2),E=Bl(u.borderRadius);Object.values(E).some($=>$!==0)?(s.beginPath(),s.fillStyle=d.multiKeyBackground,vo(s,{x:A,y:w,w:g,h:f,radius:E}),s.fill(),s.stroke(),s.fillStyle=u.backgroundColor,s.beginPath(),vo(s,{x:S,y:w+1,w:g-2,h:f-2,radius:E}),s.fill()):(s.fillStyle=d.multiKeyBackground,s.fillRect(A,w,g,f),s.strokeRect(A,w,g,f),s.fillStyle=u.backgroundColor,s.fillRect(S,w+1,g-2,f-2))}s.fillStyle=this.labelTextColors[i]}drawBody(s,l,i){const{body:c}=this,{bodySpacing:d,bodyAlign:u,displayColors:h,boxHeight:f,boxWidth:g,boxPadding:b}=i,y=Ns(i.bodyFont);let v=y.lineHeight,C=0;const w=Fl(i.rtl,this.x,this.width),A=function(z){l.fillText(z,w.x(s.x+C),s.y+v/2),s.y+=v+d},S=w.textAlign(u);let E,$,D,I,V,_,B;for(l.textAlign=u,l.textBaseline="middle",l.font=y.string,s.x=Xc(this,S,i),l.fillStyle=i.bodyColor,Nt(this.beforeBody,A),C=h&&S!=="right"?u==="center"?g/2+b:g+2+b:0,I=0,_=c.length;I<_;++I){for(E=c[I],$=this.labelTextColors[I],l.fillStyle=$,Nt(E.before,A),D=E.lines,h&&D.length&&(this._drawColorBox(l,s,I,w,i),v=Math.max(y.lineHeight,f)),V=0,B=D.length;V<B;++V)A(D[V]),v=y.lineHeight;Nt(E.after,A)}C=0,v=y.lineHeight,Nt(this.afterBody,A),s.y-=d}drawFooter(s,l,i){const c=this.footer,d=c.length;let u,h;if(d){const f=Fl(i.rtl,this.x,this.width);for(s.x=Xc(this,i.footerAlign,i),s.y+=i.footerMarginTop,l.textAlign=f.textAlign(i.footerAlign),l.textBaseline="middle",u=Ns(i.footerFont),l.fillStyle=i.footerColor,l.font=u.string,h=0;h<d;++h)l.fillText(c[h],f.x(s.x),s.y+u.lineHeight/2),s.y+=u.lineHeight+i.footerSpacing}}drawBackground(s,l,i,c){const{xAlign:d,yAlign:u}=this,{x:h,y:f}=s,{width:g,height:b}=i,{topLeft:y,topRight:v,bottomLeft:C,bottomRight:w}=Bl(c.cornerRadius);l.fillStyle=c.backgroundColor,l.strokeStyle=c.borderColor,l.lineWidth=c.borderWidth,l.beginPath(),l.moveTo(h+y,f),u==="top"&&this.drawCaret(s,l,i,c),l.lineTo(h+g-v,f),l.quadraticCurveTo(h+g,f,h+g,f+v),u==="center"&&d==="right"&&this.drawCaret(s,l,i,c),l.lineTo(h+g,f+b-w),l.quadraticCurveTo(h+g,f+b,h+g-w,f+b),u==="bottom"&&this.drawCaret(s,l,i,c),l.lineTo(h+C,f+b),l.quadraticCurveTo(h,f+b,h,f+b-C),u==="center"&&d==="left"&&this.drawCaret(s,l,i,c),l.lineTo(h,f+y),l.quadraticCurveTo(h,f,h+y,f),l.closePath(),l.fill(),c.borderWidth>0&&l.stroke()}_updateAnimationTarget(s){const l=this.chart,i=this.$animations,c=i&&i.x,d=i&&i.y;if(c||d){const u=Ji[s.position].call(this,this._active,this._eventPosition);if(!u)return;const h=this._size=mb(this,s),f=Object.assign({},u,this._size),g=fb(l,s,f),b=pb(s,f,g,l);(c._to!==b.x||d._to!==b.y)&&(this.xAlign=g.xAlign,this.yAlign=g.yAlign,this.width=h.width,this.height=h.height,this.caretX=u.x,this.caretY=u.y,this._resolveAnimations().update(this,b))}}_willRender(){return!!this.opacity}draw(s){const l=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(l);const c={width:this.width,height:this.height},d={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const u=ea(l.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;l.enabled&&h&&(s.save(),s.globalAlpha=i,this.drawBackground(d,s,c,l),Dy(s,l.textDirection),d.y+=u.top,this.drawTitle(d,s,l),this.drawBody(d,s,l),this.drawFooter(d,s,l),My(s,l.textDirection),s.restore())}getActiveElements(){return this._active||[]}setActiveElements(s,l){const i=this._active,c=s.map(({datasetIndex:h,index:f})=>{const g=this.chart.getDatasetMeta(h);if(!g)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:g.data[f],index:f}}),d=!fo(i,c),u=this._positionChanged(c,l);(d||u)&&(this._active=c,this._eventPosition=l,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(s,l,i=!0){if(l&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const c=this.options,d=this._active||[],u=this._getActiveElements(s,d,l,i),h=this._positionChanged(u,s),f=l||!fo(u,d)||h;return f&&(this._active=u,(c.enabled||c.external)&&(this._eventPosition={x:s.x,y:s.y},this.update(!0,l))),f}_getActiveElements(s,l,i,c){const d=this.options;if(s.type==="mouseout")return[];if(!c)return l.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const u=this.chart.getElementsAtEventForMode(s,d.mode,d,i);return d.reverse&&u.reverse(),u}_positionChanged(s,l){const{caretX:i,caretY:c,options:d}=this,u=Ji[d.position].call(this,s,l);return u!==!1&&(i!==u.x||c!==u.y)}}var Ky={id:"tooltip",_element:bb,positioners:Ji,afterInit(a,s,l){l&&(a.tooltip=new bb({chart:a,options:l}))},beforeUpdate(a,s,l){a.tooltip&&a.tooltip.initialize(l)},reset(a,s,l){a.tooltip&&a.tooltip.initialize(l)},afterDraw(a){const s=a.tooltip;if(s&&s._willRender()){const l={tooltip:s};if(a.notifyPlugins("beforeTooltipDraw",{...l,cancelable:!0})===!1)return;s.draw(a.ctx),a.notifyPlugins("afterTooltipDraw",l)}},afterEvent(a,s){if(a.tooltip){const l=s.replay;a.tooltip.handleEvent(s.event,l,s.inChartArea)&&(s.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(a,s)=>s.bodyFont.size,boxWidth:(a,s)=>s.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Wy},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:a=>a!=="filter"&&a!=="itemSort"&&a!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const $A=(a,s,l,i)=>(typeof s=="string"?(l=a.push(s)-1,i.unshift({index:l,label:s})):isNaN(s)&&(l=null),l);function OA(a,s,l,i){const c=a.indexOf(s);if(c===-1)return $A(a,s,l,i);const d=a.lastIndexOf(s);return c!==d?l:c}const IA=(a,s)=>a===null?null:js(Math.round(a),0,s);function yb(a){const s=this.getLabels();return a>=0&&a<s.length?s[a]:a}class Qy extends Wl{static id="category";static defaults={ticks:{callback:yb}};constructor(s){super(s),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(s){const l=this._addedLabels;if(l.length){const i=this.getLabels();for(const{index:c,label:d}of l)i[c]===d&&i.splice(c,1);this._addedLabels=[]}super.init(s)}parse(s,l){if(Et(s))return null;const i=this.getLabels();return l=isFinite(l)&&i[l]===s?l:OA(i,s,ht(l,s),this._addedLabels),IA(l,i.length-1)}determineDataLimits(){const{minDefined:s,maxDefined:l}=this.getUserBounds();let{min:i,max:c}=this.getMinMax(!0);this.options.bounds==="ticks"&&(s||(i=0),l||(c=this.getLabels().length-1)),this.min=i,this.max=c}buildTicks(){const s=this.min,l=this.max,i=this.options.offset,c=[];let d=this.getLabels();d=s===0&&l===d.length-1?d:d.slice(s,l+1),this._valueRange=Math.max(d.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let u=s;u<=l;u++)c.push({value:u});return c}getLabelForValue(s){return yb.call(this,s)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(s){return typeof s!="number"&&(s=this.parse(s)),s===null?NaN:this.getPixelForDecimal((s-this._startValue)/this._valueRange)}getPixelForTick(s){const l=this.ticks;return s<0||s>l.length-1?null:this.getPixelForValue(l[s].value)}getValueForPixel(s){return Math.round(this._startValue+this.getDecimalForPixel(s)*this._valueRange)}getBasePixel(){return this.bottom}}function LA(a,s){const l=[],{bounds:c,step:d,min:u,max:h,precision:f,count:g,maxTicks:b,maxDigits:y,includeBounds:v}=a,C=d||1,w=b-1,{min:A,max:S}=s,E=!Et(u),$=!Et(h),D=!Et(g),I=(S-A)/(y+1);let V=Sx((S-A)/w/C)*C,_,B,z,X;if(V<1e-14&&!E&&!$)return[{value:A},{value:S}];X=Math.ceil(S/V)-Math.floor(A/V),X>w&&(V=Sx(X*V/w/C)*C),Et(f)||(_=Math.pow(10,f),V=Math.ceil(V*_)/_),c==="ticks"?(B=Math.floor(A/V)*V,z=Math.ceil(S/V)*V):(B=A,z=S),E&&$&&d&&$w((h-u)/d,V/1e3)?(X=Math.round(Math.min((h-u)/V,b)),V=(h-u)/X,B=u,z=h):D?(B=E?u:B,z=$?h:z,X=g-1,V=(z-B)/X):(X=(z-B)/V,io(X,Math.round(X),V/1e3)?X=Math.round(X):X=Math.ceil(X));const T=Math.max(wx(V),wx(B));_=Math.pow(10,Et(f)?T:f),B=Math.round(B*_)/_,z=Math.round(z*_)/_;let W=0;for(E&&(v&&B!==u?(l.push({value:u}),B<u&&W++,io(Math.round((B+W*V)*_)/_,u,vb(u,I,a))&&W++):B<u&&W++);W<X;++W){const F=Math.round((B+W*V)*_)/_;if($&&F>h)break;l.push({value:F})}return $&&v&&z!==h?l.length&&io(l[l.length-1].value,h,vb(h,I,a))?l[l.length-1].value=h:l.push({value:h}):(!$||z===h)&&l.push({value:z}),l}function vb(a,s,{horizontal:l,minRotation:i}){const c=La(i),d=(l?Math.sin(c):Math.cos(c))||.001,u=.75*s*(""+a).length;return Math.min(s/d,u)}class zA extends Wl{constructor(s){super(s),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(s,l){return Et(s)||(typeof s=="number"||s instanceof Number)&&!isFinite(+s)?null:+s}handleTickRangeOptions(){const{beginAtZero:s}=this.options,{minDefined:l,maxDefined:i}=this.getUserBounds();let{min:c,max:d}=this;const u=f=>c=l?c:f,h=f=>d=i?d:f;if(s){const f=jn(c),g=jn(d);f<0&&g<0?h(0):f>0&&g>0&&u(0)}if(c===d){let f=d===0?1:Math.abs(d*.05);h(d+f),s||u(c-f)}this.min=c,this.max=d}getTickLimit(){const s=this.options.ticks;let{maxTicksLimit:l,stepSize:i}=s,c;return i?(c=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,c>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${c} ticks. Limiting to 1000.`),c=1e3)):(c=this.computeTickLimit(),l=l||11),l&&(c=Math.min(l,c)),c}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const s=this.options,l=s.ticks;let i=this.getTickLimit();i=Math.max(2,i);const c={maxTicks:i,bounds:s.bounds,min:s.min,max:s.max,precision:l.precision,step:l.stepSize,count:l.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:l.minRotation||0,includeBounds:l.includeBounds!==!1},d=this._range||this,u=LA(c,d);return s.bounds==="ticks"&&Ow(u,this,"value"),s.reverse?(u.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),u}configure(){const s=this.ticks;let l=this.min,i=this.max;if(super.configure(),this.options.offset&&s.length){const c=(i-l)/Math.max(s.length-1,1)/2;l-=c,i+=c}this._startValue=l,this._endValue=i,this._valueRange=i-l}getLabelForValue(s){return Ih(s,this.chart.options.locale,this.options.ticks.format)}}class Zy extends zA{static id="linear";static defaults={ticks:{callback:Sy.formatters.numeric}};determineDataLimits(){const{min:s,max:l}=this.getMinMax(!0);this.min=Gs(s)?s:0,this.max=Gs(l)?l:1,this.handleTickRangeOptions()}computeTickLimit(){const s=this.isHorizontal(),l=s?this.width:this.height,i=La(this.options.ticks.minRotation),c=(s?Math.sin(i):Math.cos(i))||.001,d=this._resolveTickFontOptions(0);return Math.ceil(l/Math.min(40,d.lineHeight/c))}getPixelForValue(s){return s===null?NaN:this.getPixelForDecimal((s-this._startValue)/this._valueRange)}getValueForPixel(s){return this._startValue+this.getDecimalForPixel(s)*this._valueRange}}const Ro={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vs=Object.keys(Ro);function jb(a,s){return a-s}function Nb(a,s){if(Et(s))return null;const l=a._adapter,{parser:i,round:c,isoWeekday:d}=a._parseOpts;let u=s;return typeof i=="function"&&(u=i(u)),Gs(u)||(u=typeof i=="string"?l.parse(u,i):l.parse(u)),u===null?null:(c&&(u=c==="week"&&(xo(d)||d===!0)?l.startOf(u,"isoWeek",d):l.startOf(u,c)),+u)}function Sb(a,s,l,i){const c=vs.length;for(let d=vs.indexOf(a);d<c-1;++d){const u=Ro[vs[d]],h=u.steps?u.steps:Number.MAX_SAFE_INTEGER;if(u.common&&Math.ceil((l-s)/(h*u.size))<=i)return vs[d]}return vs[c-1]}function UA(a,s,l,i,c){for(let d=vs.length-1;d>=vs.indexOf(l);d--){const u=vs[d];if(Ro[u].common&&a._adapter.diff(c,i,u)>=s-1)return u}return vs[l?vs.indexOf(l):0]}function BA(a){for(let s=vs.indexOf(a)+1,l=vs.length;s<l;++s)if(Ro[vs[s]].common)return vs[s]}function wb(a,s,l){if(!l)a[s]=!0;else if(l.length){const{lo:i,hi:c}=Oh(l,s),d=l[i]>=s?l[i]:l[c];a[d]=!0}}function FA(a,s,l,i){const c=a._adapter,d=+c.startOf(s[0].value,i),u=s[s.length-1].value;let h,f;for(h=d;h<=u;h=+c.add(h,1,i))f=l[h],f>=0&&(s[f].major=!0);return s}function Cb(a,s,l){const i=[],c={},d=s.length;let u,h;for(u=0;u<d;++u)h=s[u],c[h]=u,i.push({value:h,major:!1});return d===0||!l?i:FA(a,i,c,l)}class Ab extends Wl{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(s){super(s),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(s,l={}){const i=s.time||(s.time={}),c=this._adapter=new tC._date(s.adapters.date);c.init(l),er(i.displayFormats,c.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(s),this._normalized=l.normalized}parse(s,l){return s===void 0?null:Nb(this,s)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const s=this.options,l=this._adapter,i=s.time.unit||"day";let{min:c,max:d,minDefined:u,maxDefined:h}=this.getUserBounds();function f(g){!u&&!isNaN(g.min)&&(c=Math.min(c,g.min)),!h&&!isNaN(g.max)&&(d=Math.max(d,g.max))}(!u||!h)&&(f(this._getLabelBounds()),(s.bounds!=="ticks"||s.ticks.source!=="labels")&&f(this.getMinMax(!1))),c=Gs(c)&&!isNaN(c)?c:+l.startOf(Date.now(),i),d=Gs(d)&&!isNaN(d)?d:+l.endOf(Date.now(),i)+1,this.min=Math.min(c,d-1),this.max=Math.max(c+1,d)}_getLabelBounds(){const s=this.getLabelTimestamps();let l=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return s.length&&(l=s[0],i=s[s.length-1]),{min:l,max:i}}buildTicks(){const s=this.options,l=s.time,i=s.ticks,c=i.source==="labels"?this.getLabelTimestamps():this._generate();s.bounds==="ticks"&&c.length&&(this.min=this._userMin||c[0],this.max=this._userMax||c[c.length-1]);const d=this.min,u=this.max,h=Bw(c,d,u);return this._unit=l.unit||(i.autoSkip?Sb(l.minUnit,this.min,this.max,this._getLabelCapacity(d)):UA(this,h.length,l.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:BA(this._unit),this.initOffsets(c),s.reverse&&h.reverse(),Cb(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(s=>+s.value))}initOffsets(s=[]){let l=0,i=0,c,d;this.options.offset&&s.length&&(c=this.getDecimalForValue(s[0]),s.length===1?l=1-c:l=(this.getDecimalForValue(s[1])-c)/2,d=this.getDecimalForValue(s[s.length-1]),s.length===1?i=d:i=(d-this.getDecimalForValue(s[s.length-2]))/2);const u=s.length<3?.5:.25;l=js(l,0,u),i=js(i,0,u),this._offsets={start:l,end:i,factor:1/(l+1+i)}}_generate(){const s=this._adapter,l=this.min,i=this.max,c=this.options,d=c.time,u=d.unit||Sb(d.minUnit,l,i,this._getLabelCapacity(l)),h=ht(c.ticks.stepSize,1),f=u==="week"?d.isoWeekday:!1,g=xo(f)||f===!0,b={};let y=l,v,C;if(g&&(y=+s.startOf(y,"isoWeek",f)),y=+s.startOf(y,g?"day":u),s.diff(i,l,u)>1e5*h)throw new Error(l+" and "+i+" are too far apart with stepSize of "+h+" "+u);const w=c.ticks.source==="data"&&this.getDataTimestamps();for(v=y,C=0;v<i;v=+s.add(v,h,u),C++)wb(b,v,w);return(v===i||c.bounds==="ticks"||C===1)&&wb(b,v,w),Object.keys(b).sort(jb).map(A=>+A)}getLabelForValue(s){const l=this._adapter,i=this.options.time;return i.tooltipFormat?l.format(s,i.tooltipFormat):l.format(s,i.displayFormats.datetime)}format(s,l){const c=this.options.time.displayFormats,d=this._unit,u=l||c[d];return this._adapter.format(s,u)}_tickFormatFunction(s,l,i,c){const d=this.options,u=d.ticks.callback;if(u)return Dt(u,[s,l,i],this);const h=d.time.displayFormats,f=this._unit,g=this._majorUnit,b=f&&h[f],y=g&&h[g],v=i[l],C=g&&y&&v&&v.major;return this._adapter.format(s,c||(C?y:b))}generateTickLabels(s){let l,i,c;for(l=0,i=s.length;l<i;++l)c=s[l],c.label=this._tickFormatFunction(c.value,l,s)}getDecimalForValue(s){return s===null?NaN:(s-this.min)/(this.max-this.min)}getPixelForValue(s){const l=this._offsets,i=this.getDecimalForValue(s);return this.getPixelForDecimal((l.start+i)*l.factor)}getValueForPixel(s){const l=this._offsets,i=this.getDecimalForPixel(s)/l.factor-l.end;return this.min+i*(this.max-this.min)}_getLabelSize(s){const l=this.options.ticks,i=this.ctx.measureText(s).width,c=La(this.isHorizontal()?l.maxRotation:l.minRotation),d=Math.cos(c),u=Math.sin(c),h=this._resolveTickFontOptions(0).size;return{w:i*d+h*u,h:i*u+h*d}}_getLabelCapacity(s){const l=this.options.time,i=l.displayFormats,c=i[l.unit]||i.millisecond,d=this._tickFormatFunction(s,0,Cb(this,[s],this._majorUnit),c),u=this._getLabelSize(d),h=Math.floor(this.isHorizontal()?this.width/u.w:this.height/u.h)-1;return h>0?h:1}getDataTimestamps(){let s=this._cache.data||[],l,i;if(s.length)return s;const c=this.getMatchingVisibleMetas();if(this._normalized&&c.length)return this._cache.data=c[0].controller.getAllParsedValues(this);for(l=0,i=c.length;l<i;++l)s=s.concat(c[l].controller.getAllParsedValues(this));return this._cache.data=this.normalize(s)}getLabelTimestamps(){const s=this._cache.labels||[];let l,i;if(s.length)return s;const c=this.getLabels();for(l=0,i=c.length;l<i;++l)s.push(Nb(this,c[l]));return this._cache.labels=this._normalized?s:this.normalize(s)}normalize(s){return by(s.sort(jb))}}function Wc(a,s,l){let i=0,c=a.length-1,d,u,h,f;l?(s>=a[i].pos&&s<=a[c].pos&&({lo:i,hi:c}=Sh(a,"pos",s)),{pos:d,time:h}=a[i],{pos:u,time:f}=a[c]):(s>=a[i].time&&s<=a[c].time&&({lo:i,hi:c}=Sh(a,"time",s)),{time:d,pos:h}=a[i],{time:u,pos:f}=a[c]);const g=u-d;return g?h+(f-h)*(s-d)/g:h}class H2 extends Ab{static id="timeseries";static defaults=Ab.defaults;constructor(s){super(s),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const s=this._getTimestampsForTable(),l=this._table=this.buildLookupTable(s);this._minPos=Wc(l,this.min),this._tableRange=Wc(l,this.max)-this._minPos,super.initOffsets(s)}buildLookupTable(s){const{min:l,max:i}=this,c=[],d=[];let u,h,f,g,b;for(u=0,h=s.length;u<h;++u)g=s[u],g>=l&&g<=i&&c.push(g);if(c.length<2)return[{time:l,pos:0},{time:i,pos:1}];for(u=0,h=c.length;u<h;++u)b=c[u+1],f=c[u-1],g=c[u],Math.round((b+f)/2)!==g&&d.push({time:g,pos:u/(h-1)});return d}_generate(){const s=this.min,l=this.max;let i=super.getDataTimestamps();return(!i.includes(s)||!i.length)&&i.splice(0,0,s),(!i.includes(l)||i.length===1)&&i.push(l),i.sort((c,d)=>c-d)}_getTimestampsForTable(){let s=this._cache.all||[];if(s.length)return s;const l=this.getDataTimestamps(),i=this.getLabelTimestamps();return l.length&&i.length?s=this.normalize(l.concat(i)):s=l.length?l:i,s=this._cache.all=s,s}getDecimalForValue(s){return(Wc(this._table,s)-this._minPos)/this._tableRange}getValueForPixel(s){const l=this._offsets,i=this.getDecimalForPixel(s)/l.factor-l.end;return Wc(this._table,i*this._tableRange+this._minPos,!0)}}const Jy="label";function Eb(a,s){typeof a=="function"?a(s):a&&(a.current=s)}function HA(a,s){const l=a.options;l&&s&&Object.assign(l,s)}function ev(a,s){a.labels=s}function tv(a,s){let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jy;const i=[];a.datasets=s.map(c=>{const d=a.datasets.find(u=>u[l]===c[l]);return!d||!c.data||i.includes(d)?{...c}:(i.push(d),Object.assign(d,c),d)})}function VA(a){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Jy;const l={labels:[],datasets:[]};return ev(l,a.labels),tv(l,a.datasets,s),l}function YA(a,s){const{height:l=150,width:i=300,redraw:c=!1,datasetIdKey:d,type:u,data:h,options:f,plugins:g=[],fallbackContent:b,updateMode:y,...v}=a,C=x.useRef(null),w=x.useRef(null),A=()=>{C.current&&(w.current=new hr(C.current,{type:u,data:VA(h,d),options:f&&{...f},plugins:g}),Eb(s,w.current))},S=()=>{Eb(s,null),w.current&&(w.current.destroy(),w.current=null)};return x.useEffect(()=>{!c&&w.current&&f&&HA(w.current,f)},[c,f]),x.useEffect(()=>{!c&&w.current&&ev(w.current.config.data,h.labels)},[c,h.labels]),x.useEffect(()=>{!c&&w.current&&h.datasets&&tv(w.current.config.data,h.datasets,d)},[c,h.datasets]),x.useEffect(()=>{w.current&&(c?(S(),setTimeout(A)):w.current.update(y))},[c,f,h.labels,h.datasets,y]),x.useEffect(()=>{w.current&&(S(),setTimeout(A))},[u]),x.useEffect(()=>(A(),()=>S()),[]),qs.createElement("canvas",{ref:C,role:"img",height:l,width:i,...v},b)}const PA=x.forwardRef(YA);function sv(a,s){return hr.register(s),x.forwardRef((l,i)=>qs.createElement(PA,{...l,ref:i,type:a}))}const qA=sv("bar",Z1),Tb=sv("doughnut",eC);async function Gh(a){const s=`/classroom/api/v1/professor/${encodeURIComponent(a)}/students`,l=await fetch(s,{headers:{Accept:"application/json"},credentials:"include"});if(!l.ok)throw new Error(`(${l.status})    .`);const i=await l.json();if(!Array.isArray(i))throw new Error("    .");return i}hr.register(Qy,Zy,qy,gA,Ky,Xy);function GA(){const{lectureId:a}=dt(),[s,l]=x.useState([]),[i,c]=x.useState(null),[d,u]=x.useState(null),[h,f]=x.useState(!0),[g,b]=x.useState(null);x.useEffect(()=>{let D=!0;return(async()=>{try{f(!0),b(null);const I=`/classroom/api/v1/professor/${encodeURIComponent(a)}/statis`,[V,_,B]=await Promise.all([Gh(a),fetch(`${I}/attendance`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${I}/task`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!_.ok)throw new Error(`(${_.status})    .`);if(!B.ok)throw new Error(`(${B.status})    .`);const z=await _.json(),X=await B.json();if(!D)return;l(V),c(z),u(X)}catch(I){if(!D)return;b(I)}finally{D&&f(!1)}})(),()=>{D=!1}},[a]),x.useEffect(()=>{if(!h&&!g&&i&&s.length>0&&typeof window.bootstrap<"u"){const I=[...document.querySelectorAll('[data-bs-toggle="popover"]')].map(V=>new window.bootstrap.Popover(V));return()=>{I.forEach(V=>V.dispose())}}},[h,g,i,s]);const y=s.length>0?(()=>{const D=s.length,I=s.filter(T=>T.enrollStatusCd==="ENR_CANCEL"||T.enrollStatusCd==="ENR_WITHDRAW").length,V=s.filter(T=>T.enrollStatusCd==="ENR_ING"||T.enrollStatusCd==="ENR_DONE").length,_={};s.forEach(T=>{(T.enrollStatusCd==="ENR_ING"||T.enrollStatusCd==="ENR_DONE")&&(_[T.gradeCd]=(_[T.gradeCd]||0)+1)});const B=Object.entries(_).map(([T,W])=>({gradeCd:T,cnt:W})),z={};s.forEach(T=>{if(T.enrollStatusCd==="ENR_ING"||T.enrollStatusCd==="ENR_DONE"){const W=T.univDeptCd;z[W]||(z[W]={univDeptCd:T.univDeptCd,univDeptName:T.univDeptName,cnt:0}),z[W].cnt++}});const X=Object.values(z);return{stats:{totalCnt:D,activeCnt:V,dropoutCnt:I},byGrade:B,byDept:X}})():null,v=y?.byGrade?{labels:y.byGrade.map(D=>({"1ST":"1","2ND":"2","3RD":"3","4TH":"4"})[D.gradeCd]||D.gradeCd),datasets:[{data:y.byGrade.map(D=>D.cnt),backgroundColor:["rgba(54, 162, 235, 0.8)","rgba(255, 99, 132, 0.8)","rgba(255, 206, 86, 0.8)","rgba(75, 192, 192, 0.8)"]}]}:null,C=y?.byDept?{labels:y.byDept.map(D=>D.univDeptName||D.univDeptCd),datasets:[{data:y.byDept.map(D=>D.cnt),backgroundColor:["rgba(153, 102, 255, 0.8)","rgba(255, 159, 64, 0.8)","rgba(201, 203, 207, 0.8)","rgba(75, 192, 192, 0.8)"]}]}:null,w=i?.typeCount?(()=>{const{totalCnt:D,tbdCnt:I,okCnt:V,noCnt:_,earlyCnt:B,lateCnt:z,excpCnt:X}=i.typeCount,T=V+B+z+X,W=D>0?(T/D*100).toFixed(1):0,F=(i.attCountList||[]).map(N=>{const M=N.recordedCnt>0?N.nonAbsentCnt/N.recordedCnt*100:0,L=s.find(U=>U.enrollId===N.enrollId);return{...N,rate:M,name:L?`${L.lastName}${L.firstName}`:N.enrollId}}),Q=F.filter(N=>N.rate>=90),O=F.filter(N=>N.rate>=70&&N.rate<90),Y=F.filter(N=>N.rate<70);return{avgRate:W,excellent:Q.length,good:O.length,warning:Y.length,excellentList:Q,goodList:O,warningList:Y,tbdCnt:I}})():null,A=d?(()=>{const{taskTypeCount:D,ongoingIndivtask:I,ongoingGrouptask:V,closedIndivtask:_,closedGrouptask:B,scoresByStudentAndTask:z}=d,X=D?.indivCnt||0,T=D?.groupCnt||0,W=(I?.ongoingTaskCnt||0)+(V?.ongoingTaskCnt||0),F=I?.submitRatePct||0,Q=(_?.closedTaskCnt||0)+(B?.closedTaskCnt||0),O=_?.submitRatePct||0,Y={};z&&Array.isArray(z)&&z.forEach(k=>{k.score!==null&&k.score!==void 0&&(Y[k.enrollId]||(Y[k.enrollId]={scores:[],total:0,count:0}),Y[k.enrollId].scores.push(k.score),Y[k.enrollId].total+=k.score,Y[k.enrollId].count++)});const N=Object.entries(Y).map(([k,G])=>{const se=s.find(q=>q.enrollId===k);return{enrollId:k,name:se?`${se.lastName}${se.firstName}`:k,avgScore:G.count>0?(G.total/G.count).toFixed(1):0}}).filter(k=>k.avgScore>0),M=[...N].sort((k,G)=>G.avgScore-k.avgScore),L=M.slice(0,3),U=M.slice(-3).reverse(),P=Array(10).fill(0).map((k,G)=>({range:`${G*10}-${(G+1)*10}`,count:0}));return N.forEach(k=>{const G=parseFloat(k.avgScore),se=Math.min(Math.floor(G/10),9);P[se].count++}),{indivCnt:X,groupCnt:T,ongoingCount:W,ongoingSubmissionRate:F,closedCount:Q,closedSubmissionRate:O,scoreDistribution:P,topStudents:L,bottomStudents:U}})():null,S={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:11},padding:8,boxWidth:12}}}},E={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}},plugins:{legend:{display:!1}}},$=A?.scoreDistribution?{labels:A.scoreDistribution.map(D=>D.range),datasets:[{label:" ",data:A.scoreDistribution.map(D=>D.count),backgroundColor:"rgba(54, 162, 235, 0.7)"}]}:null;return e.jsxs("section",{id:"dashboard-root",className:"container py-0","data-lecture-id":a,children:[e.jsx("style",{children:`
        @keyframes blink-slow {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.3; }
        }
        .blink-slow {
          animation: blink-slow 2s ease-in-out infinite;
        }
      `}),h&&e.jsx("div",{className:"text-muted",children:" "}),g&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(g.message||g)}),!h&&!g&&e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:y&&e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-5",children:[e.jsx("div",{className:"text-center mb-2 small fw-semibold",children:" "}),v&&e.jsx("div",{style:{height:"140px",position:"relative"},children:e.jsx(Tb,{data:v,options:S})})]}),e.jsxs("div",{className:"col-5",children:[e.jsx("div",{className:"text-center mb-2 small fw-semibold",children:" "}),C&&e.jsx("div",{style:{height:"140px",position:"relative"},children:e.jsx(Tb,{data:C,options:S})})]}),e.jsxs("div",{className:"col-2 d-flex flex-column justify-content-center gap-3",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-muted small",children:""}),e.jsx("div",{className:"h5 mb-0 text-success",children:y.stats?.activeCnt||0})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-muted small",children:""}),e.jsx("div",{className:"h5 mb-0 text-danger",children:y.stats?.dropoutCnt||0})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-muted small",children:""}),e.jsx("div",{className:"h5 mb-0",children:y.stats?.totalCnt||0})]})]})]})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card shadow-sm h-100",children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h6 mb-0",children:" "}),w&&w.tbdCnt>0&&e.jsxs("div",{className:"text-danger small blink-slow",children:["  ",w.tbdCnt," "]})]}),e.jsx("div",{className:"card-body",children:w?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("div",{className:"text-muted small",children:" "}),e.jsxs("div",{className:"display-6 fw-bold text-primary",children:[w.avgRate,"%"]})]}),e.jsxs("div",{className:"row g-2 text-center",children:[e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"p-2 bg-success bg-opacity-10 rounded",style:{cursor:w.excellentList.length>0?"pointer":"default"},"data-bs-toggle":w.excellentList.length>0?"popover":"","data-bs-trigger":"hover","data-bs-placement":"bottom","data-bs-html":"true","data-bs-content":w.excellentList.length>0?w.excellentList.map(D=>`${D.name} (${D.rate.toFixed(1)}%)`).join("<br>"):"",title:"90%   ",children:[e.jsx("div",{className:"small text-muted",children:"90% "}),e.jsxs("div",{className:"h5 mb-0 text-success",children:[w.excellent,""]})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"p-2 bg-warning bg-opacity-10 rounded",style:{cursor:w.goodList.length>0?"pointer":"default"},"data-bs-toggle":w.goodList.length>0?"popover":"","data-bs-trigger":"hover","data-bs-placement":"bottom","data-bs-html":"true","data-bs-content":w.goodList.length>0?w.goodList.map(D=>`${D.name} (${D.rate.toFixed(1)}%)`).join("<br>"):"",title:"70~90%  ",children:[e.jsx("div",{className:"small text-muted",children:"70~90%"}),e.jsxs("div",{className:"h5 mb-0 text-warning",children:[w.good,""]})]})}),e.jsx("div",{className:"col-4",children:e.jsxs("div",{className:"p-2 bg-danger bg-opacity-10 rounded",style:{cursor:w.warningList.length>0?"pointer":"default"},"data-bs-toggle":w.warningList.length>0?"popover":"","data-bs-trigger":"hover","data-bs-placement":"bottom","data-bs-html":"true","data-bs-content":w.warningList.length>0?w.warningList.map(D=>`${D.name} (${D.rate.toFixed(1)}%)`).join("<br>"):"",title:"70%   ",children:[e.jsx("div",{className:"small text-muted",children:"70% "}),e.jsxs("div",{className:"h5 mb-0 text-danger",children:[w.warning,""]})]})})]})]}):e.jsx("div",{className:"text-muted",children:"  ."})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:A?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row g-2 mb-3 text-center",children:[e.jsx("div",{className:"col-3",children:e.jsxs("div",{className:"p-2 bg-primary bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsxs("div",{className:"h6 mb-0 text-primary",children:[A.indivCnt,""]}),e.jsx("div",{className:"small",style:{visibility:"hidden"},children:"-"})]})}),e.jsx("div",{className:"col-3",children:e.jsxs("div",{className:"p-2 bg-info bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsxs("div",{className:"h6 mb-0 text-info",children:[A.groupCnt,""]}),e.jsx("div",{className:"small",style:{visibility:"hidden"},children:"-"})]})}),e.jsx("div",{className:"col-3",children:e.jsxs("div",{className:"p-2 bg-warning bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsxs("div",{className:"h6 mb-0 text-warning",children:[A.ongoingCount,""]}),e.jsxs("div",{className:"small text-muted",children:[" ",A.ongoingSubmissionRate.toFixed(1),"%"]})]})}),e.jsx("div",{className:"col-3",children:e.jsxs("div",{className:"p-2 bg-success bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsxs("div",{className:"h6 mb-0 text-success",children:[A.closedCount,""]}),e.jsxs("div",{className:"small text-muted",children:[" ",A.closedSubmissionRate.toFixed(1),"%"]})]})})]}),$&&e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"small fw-semibold mb-2",children:"   "}),e.jsx("div",{style:{height:"120px",position:"relative"},children:e.jsx(qA,{data:$,options:E})})]}),A.topStudents.length>0&&e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"small fw-semibold mb-2",children:"Top 3"}),e.jsx("table",{className:"table table-sm table-borderless mb-0",children:e.jsx("tbody",{children:A.topStudents.map((D,I)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"text-muted",style:{width:"25px"},children:["#",I+1]}),e.jsx("td",{className:"small",children:D.name}),e.jsx("td",{className:"text-end fw-semibold small",children:D.avgScore})]},I))})})]}),e.jsxs("div",{className:"col-6",children:[e.jsx("div",{className:"small fw-semibold mb-2",children:" 3"}),e.jsx("table",{className:"table table-sm table-borderless mb-0",children:e.jsx("tbody",{children:A.bottomStudents.map((D,I)=>e.jsxs("tr",{children:[e.jsxs("td",{className:"text-muted",style:{width:"25px"},children:["#",I+1]}),e.jsx("td",{className:"small",children:D.name}),e.jsx("td",{className:"text-end fw-semibold small text-danger",children:D.avgScore})]},I))})})]})]})]}):e.jsx("div",{className:"text-muted",children:"  ."})})]})}),e.jsx("div",{className:"col-lg-6",children:e.jsxs("div",{className:"card shadow-sm h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"text-muted text-center py-5",children:[e.jsx("i",{className:"bi bi-file-earmark-text display-4 d-block mb-3 opacity-25"}),e.jsx("div",{children:"  API    "})]})})]})})]})]})}hr.register(Qy,Zy,qy,Ky,Xy);function XA(){const{lectureId:a}=dt(),[s,l]=x.useState(null),[i,c]=x.useState([]),[d,u]=x.useState([]),[h,f]=x.useState(null),[g,b]=x.useState([]),[y,v]=x.useState(!0),[C,w]=x.useState(null),{setLecture:A}=cs(),S=x.useMemo(()=>({MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""}),[]),E=D=>{if(!D||String(D).length<4)return"--:--";const I=String(D);return`${I.slice(0,2)}:${I.slice(2,4)}`};x.useEffect(()=>{let D=!0;return(async()=>{try{v(!0),w(null);const I=`/classroom/api/v1/common/${encodeURIComponent(a)}`,[V,_,B,z]=await Promise.all([fetch(I,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${I}/schedule`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${I}/plan`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${I}/ratio`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!V.ok)throw new Error(`(${V.status})    .`);if(!_.ok)throw new Error(`(${_.status})    .`);if(!B.ok)throw new Error(`(${B.status})   .`);const X=await V.json(),T=await _.json(),W=await B.json(),F=z.ok?await z.json():[];if(!D)return;l(X),A(X),c(Array.isArray(T)?T:[]),b(Array.isArray(F)?F:[]);const Q=Array.isArray(W)?W:[];if(u(Q),Q.length){const O=Q.reduce((Y,N)=>{const M=Number(N.lectureWeek);return Number.isFinite(M)?Math.min(Y,M):Y},Number(Q[0].lectureWeek)||1);f(O)}else f(null)}catch(I){if(!D)return;w(I)}finally{D&&v(!1)}})(),()=>{D=!1}},[a,A]),g.reduce((D,I)=>D+(I.ratio||0),0);const $=["rgba(54, 162, 235, 0.8)","rgba(255, 99, 132, 0.8)","rgba(255, 206, 86, 0.8)","rgba(75, 192, 192, 0.8)","rgba(153, 102, 255, 0.8)"];return g.map((D,I)=>({label:D.gradeCriteriaName||D.gradeCriteriaCd,data:[D.ratio||0],backgroundColor:$[I%$.length],borderWidth:0})),e.jsxs("section",{id:"lecture-root",className:"container py-0","data-lecture-id":a,children:[y&&e.jsx("div",{className:"text-muted",children:" "}),C&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(C.message||C)}),!y&&!C&&e.jsxs(e.Fragment,{children:[s&&e.jsxs("div",{className:"card shadow-sm mb-3",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h6 mb-0",children:" "})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-md-4",children:e.jsx("table",{className:"table table-sm table-borderless mb-0",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",style:{width:"100px"},children:""}),e.jsx("td",{className:"fw-semibold",children:s.subjectName||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:""}),e.jsx("td",{children:s.professorName||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:""}),e.jsx("td",{children:s.univDeptName||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:""}),e.jsx("td",{children:s.completionName||"-"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:""}),e.jsx("td",{children:s.subjectTypeName||"-"})]})]})})}),e.jsx("div",{className:"col-md-4",children:e.jsx("table",{className:"table table-sm table-borderless mb-0",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",style:{width:"100px"},children:" / "}),e.jsxs("td",{children:[s.credit||"-"," / ",s.hour||"-",""]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:""}),e.jsxs("td",{children:[s.currentCap||0," / ",s.maxCap||0,""]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:""}),e.jsx("td",{children:s.ended?e.jsx("span",{className:"badge bg-secondary",children:""}):s.started?e.jsx("span",{className:"badge bg-success",children:""}):e.jsx("span",{className:"badge bg-info",children:""})})]}),g.length>0&&e.jsxs("tr",{children:[e.jsx("td",{className:"text-muted",children:" "}),e.jsx("td",{children:g.map((D,I)=>e.jsxs("span",{children:[D.gradeCriteriaName," ",D.ratio,"%",I<g.length-1&&" / "]},I))})]})]})})}),e.jsxs("div",{className:"col-md-4",children:[e.jsx("div",{className:"text-muted small mb-2",children:" "}),i.length===0?e.jsx("div",{className:"text-muted small",children:"  "}):e.jsx("div",{className:"vstack gap-2",children:i.map((D,I)=>{const V=Array.isArray(D.slots)?D.slots:[];return e.jsxs("div",{className:"small",children:[e.jsxs("div",{className:"fw-semibold mb-1",children:[e.jsx("i",{className:"bi bi-geo-alt-fill text-primary me-1"}),D.placeName||D.placeCd||" "]}),e.jsx("div",{className:"ps-3",children:V.map((_,B)=>e.jsxs("div",{className:"text-muted",children:[S[_.day]??_.day??""," ",E(_.start)," ~ ",E(_.end)]},B))})]},I)})})]})]})})]}),e.jsxs("section",{id:"plan-section",className:"d-flex flex-column","aria-labelledby":"plan-h",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("h2",{id:"plan-h",className:"h5 mb-0",children:" "}),e.jsxs("div",{className:"ms-3",style:{minWidth:200},children:[e.jsx("label",{htmlFor:"plan-select",className:"form-label visually-hidden",children:" "}),e.jsxs("select",{id:"plan-select",className:"form-select form-select-sm",value:h??"",onChange:D=>f(Number(D.target.value)||null),disabled:!d.length,children:[d.length===0&&e.jsx("option",{value:"",children:"  "}),d.slice().sort((D,I)=>Number(D.lectureWeek||0)-Number(I.lectureWeek||0)).map(D=>e.jsxs("option",{value:D.lectureWeek,children:[D.lectureWeek,""]},D.lectureWeek))]})]})]}),e.jsx("div",{id:"plan-detail",className:"card flex-grow-1",children:e.jsx("div",{className:"card-body text-start",children:d.length===0||!h?e.jsx("div",{className:"text-body-secondary",children:"   ."}):(()=>{const D=d.find(I=>Number(I.lectureWeek)===Number(h));return D?e.jsxs("div",{className:"vstack gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"badge text-bg-secondary me-2",children:""}),e.jsxs("strong",{children:[D.lectureWeek,""]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{className:"fw-semibold",children:D.weekGoal||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{className:"text-break",children:D.weekDesc||"-"})]})]}):e.jsx("div",{className:"text-body-secondary",children:"   ."})})()})}),e.jsx("div",{id:"plan-empty",className:`text-body-secondary small mt-2 ${d.length?"d-none":""}`,children:"   ."})]})]})]})}function WA(){const{lectureId:a}=dt(),{lecture:s}=cs(),l=`/classroom/professor/${encodeURIComponent(a||"")}`,i=!!s?.ended,c=!!s?.finalized,d="       .",u=(h,f,g={})=>{const{end:b=!1,disabled:y=!1,tooltip:v}=g;return y?e.jsx("li",{className:"nav-item",children:e.jsx("span",{className:"nav-link disabled text-muted",title:v,"aria-disabled":"true",style:{cursor:"not-allowed"},children:f})},h):e.jsx("li",{className:"nav-item",children:e.jsx(ny,{end:b,className:({isActive:C})=>`nav-link${C?" active":""}`,to:h,children:f})},h)};return e.jsxs("ul",{className:"nav nav-pills mb-3",children:[u(l,"",{end:!0}),u(`${l}/summary`," "),u(`${l}/board`,""),u(`${l}/attendance`,""),u(`${l}/task`,""),u(`${l}/exam`,""),u(`${l}/student`," "),u(`${l}/grades`,"/ ",{disabled:c,tooltip:c?d:void 0}),i?u(`${l}/finalize`,"  /",{disabled:c,tooltip:c?d:void 0}):null]})}function KA(){const{lectureId:a}=dt(),{setStudents:s,clearLectureScoped:l}=cs();return x.useEffect(()=>{let i=!0;return(async()=>{try{if(!a)return;const c=await Gh(a);if(!i)return;s(c)}catch{if(!i)return;s([])}})(),()=>{l(),i=!1}},[a]),e.jsxs(ko,{role:"professor",lectureId:a,children:[e.jsx(WA,{}),e.jsx(sy,{})]})}const mh=10;function QA(a){if(a?.tempSaveYn==="Y")return"DRAFT";if(a?.revealAt){const s=Date.now(),l=new Date(a.revealAt).getTime();if(Number.isFinite(l)&&l>s)return"SCHEDULED"}return"PUBLISHED"}function ZA(a){return a==="NOTICE"?e.jsx("span",{className:"badge bg-warning text-dark border border-warning-subtle",children:""}):a==="MATERIAL"?e.jsx("span",{className:"badge bg-info text-dark border border-info-subtle",children:""}):e.jsx("span",{className:"badge text-bg-secondary",children:""})}function JA(a){switch(a){case"DRAFT":return e.jsx("span",{className:"badge text-bg-secondary",children:""});case"SCHEDULED":return e.jsx("span",{className:"badge text-bg-primary",children:""});case"PUBLISHED":return e.jsx("span",{className:"badge text-bg-success",children:""});default:return null}}const _b=a=>{if(!a)return"";const s=new Date(a);if(Number.isNaN(s.getTime()))return String(a);const l=b=>String(b).padStart(2,"0"),i=new Date().getFullYear(),c=s.getFullYear(),d=l(s.getMonth()+1),u=l(s.getDate()),h=l(s.getHours()),f=l(s.getMinutes());return`${c===i?`${d}-${u}`:`${c}-${d}-${u}`} ${h}:${f}`};function e2(){const{lectureId:a}=dt(),[s,l]=x.useState([]),[i,c]=x.useState(!0),[d,u]=x.useState(null),[h,f]=x.useState("all"),[g,b]=x.useState(""),[y,v]=x.useState(""),[C,w]=x.useState(""),[A,S]=x.useState(1);x.useEffect(()=>{let T=!0;return(async()=>{try{c(!0),u(null);const W=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post`,F=await fetch(W,{headers:{Accept:"application/json"},credentials:"include"});if(!F.ok)throw new Error(`(${F.status})    .`);const Q=await F.json();if(!Array.isArray(Q))throw new Error("    .");if(!T)return;l(Q)}catch(W){if(!T)return;u(W)}finally{T&&c(!1)}})(),()=>{T=!1}},[a]);const E=x.useMemo(()=>s.map(T=>({...T,_status:QA(T)})),[s]),$=T=>T.postType||T.classification||"",D=x.useMemo(()=>{let T=E.length,W=0,F=0;for(const Q of E){const O=$(Q);O==="NOTICE"?W++:O==="MATERIAL"&&F++}return{all:T,notice:W,material:F}},[E]);x.useEffect(()=>{h==="all"?b(""):h==="notice"?b("NOTICE"):h==="material"&&b("MATERIAL"),S(1)},[h]);const I=x.useMemo(()=>{let T=E;if(g&&(T=T.filter(W=>$(W)===g)),y&&(T=T.filter(W=>W._status===y)),C&&C.trim().length){const W=C.trim().toLowerCase();T=T.filter(F=>String(F.title||"").toLowerCase().includes(W)||String(F.content||"").toLowerCase().includes(W))}return T},[E,g,y,C]),V=Math.max(1,Math.ceil(I.length/mh)),_=x.useMemo(()=>I.slice((A-1)*mh,A*mh),[I,A]);x.useEffect(()=>{A>V&&S(1)},[V,A]);const B=(T,W)=>{const F=T._status,O=(T.lctPostId||T.postId||T.id)??T.id;if(O==null)return null;const Y=$(T),N=_b(T.createAt||T.createdAt),M=F==="SCHEDULED"&&T.revealAt?_b(T.revealAt):null;let L="";for(const k of[T.summary,T.content]){if(!k)continue;const G=String(k).replace(/\s+/g," ").trim();if(G.length){L=G;break}}const U=T.title||"( )",P=`/classroom/professor/${encodeURIComponent(a)}/board/${encodeURIComponent(String(O))}`;return e.jsx(qe,{to:P,className:"list-group-item list-group-item-action text-reset text-decoration-none py-2",children:e.jsxs("div",{className:"d-flex align-items-center gap-2 flex-nowrap",children:[e.jsxs("div",{className:"d-flex align-items-center gap-1 flex-shrink-0",children:[ZA(Y),JA(F)]}),e.jsxs("div",{className:"flex-grow-1 text-truncate",style:{minWidth:0},children:[e.jsx("span",{className:"fw-semibold",children:U}),L&&e.jsxs("span",{className:"text-muted",children:["  ",L]})]}),M&&e.jsxs("span",{className:"text-muted small text-nowrap flex-shrink-0",children:[": ",M]}),e.jsxs("span",{className:"text-muted small text-nowrap flex-shrink-0",children:[": ",N]})]})},String(O))},z=({id:T,label:W,active:F,onClick:Q,badge:O})=>e.jsxs("button",{className:`nav-link ${F?"active":""}`,id:`tab-${T}`,type:"button",onClick:Q,role:"tab",children:[W," ",O!=null&&e.jsx("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle ms-1",children:O})]}),X=()=>e.jsx("nav",{className:"mt-3","aria-label":"  ",children:e.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[e.jsx("li",{className:`page-item ${A<=1?"disabled":""}`,children:e.jsx("a",{className:"page-link",href:"#",onClick:T=>{T.preventDefault(),A>1&&S(A-1)},children:""})}),Array.from({length:V},(T,W)=>W+1).map(T=>e.jsx("li",{className:`page-item ${T===A?"active":""}`,children:e.jsx("a",{className:"page-link",href:"#",onClick:W=>{W.preventDefault(),S(T)},children:T})},T)),e.jsx("li",{className:`page-item ${A>=V?"disabled":""}`,children:e.jsx("a",{className:"page-link",href:"#",onClick:T=>{T.preventDefault(),A<V&&S(A+1)},children:""})})]})});return e.jsxs("section",{id:"board-root",className:"container py-0","data-lecture-id":a,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:""}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs("select",{id:"filter-type",className:"form-select form-select-sm",style:{minWidth:120},value:g,onChange:T=>b(T.target.value),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"NOTICE",children:""}),e.jsx("option",{value:"MATERIAL",children:""})]}),e.jsxs("select",{id:"filter-status",className:"form-select form-select-sm",style:{minWidth:120},value:y,onChange:T=>v(T.target.value),children:[e.jsx("option",{value:"",children:" "}),e.jsx("option",{value:"PUBLISHED",children:""}),e.jsx("option",{value:"DRAFT",children:""}),e.jsx("option",{value:"SCHEDULED",children:""})]}),e.jsxs("div",{className:"input-group input-group-sm",style:{minWidth:220},children:[e.jsx("input",{id:"search-q",type:"text",className:"form-control",placeholder:"/ ",value:C,onChange:T=>{w(T.target.value),S(1)}}),e.jsx("button",{id:"btn-search",className:"btn btn-outline-secondary",onClick:()=>S(1),children:""})]})]})]}),e.jsxs("section",{className:"mt-4","aria-labelledby":"tablist-h",children:[e.jsxs("ul",{className:"nav nav-tabs mt-2",id:"post-tabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx(z,{id:"all",label:"",active:h==="all",onClick:()=>f("all"),badge:D.all})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx(z,{id:"notice",label:"",active:h==="notice",onClick:()=>f("notice"),badge:D.notice})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsx(z,{id:"material",label:"",active:h==="material",onClick:()=>f("material"),badge:D.material})})]}),e.jsxs("div",{className:"tab-content border border-top-0 rounded-bottom p-3",children:[(i||d)&&e.jsxs("div",{children:[i&&e.jsx("div",{className:"text-muted",children:" "}),d&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(d.message||d)})]}),!i&&!d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{id:"pane-all",className:`tab-pane fade ${h==="all"?"show active":""} p-0`,role:"tabpanel","aria-labelledby":"tab-all",children:[e.jsx("div",{id:"list-all",children:g&&h==="all"?null:_.length===0?e.jsx("div",{className:"text-center text-muted py-4",children:"   ."}):e.jsx("div",{className:"list-group list-group-flush",children:_.map((T,W)=>B(T))})}),e.jsxs("div",{className:"mt-3 d-flex align-items-center justify-content-between",children:[e.jsx(X,{}),e.jsx(qe,{id:"btn-create",className:"btn btn-sm btn-primary",to:`/classroom/professor/${encodeURIComponent(a)}/board/new`,children:" "})]})]}),e.jsx("div",{id:"pane-notice",className:`tab-pane fade ${h==="notice"?"show active":""} p-0`,role:"tabpanel","aria-labelledby":"tab-notice",children:e.jsx("div",{id:"list-notice",children:I.filter(T=>$(T)==="NOTICE").length===0?e.jsx("div",{className:"text-center text-muted py-4",children:"  ."}):e.jsx("div",{className:"list-group list-group-flush",children:I.filter(T=>$(T)==="NOTICE").map((T,W)=>B(T))})})}),e.jsx("div",{id:"pane-material",className:`tab-pane fade ${h==="material"?"show active":""} p-0`,role:"tabpanel","aria-labelledby":"tab-material",children:e.jsx("div",{id:"list-material",children:I.filter(T=>$(T)==="MATERIAL").length===0?e.jsx("div",{className:"text-center text-muted py-4",children:"  ."}):e.jsx("div",{className:"list-group list-group-flush",children:I.filter(T=>$(T)==="MATERIAL").map((T,W)=>B(T))})})})]})]}),e.jsx("div",{id:"notfound-box",className:"alert alert-danger mt-3 d-none",role:"alert"})]})]})}const fh=a=>{if(!a)return"";const s=new Date(a);if(Number.isNaN(s.getTime()))return String(a);const l=i=>String(i).padStart(2,"0");return`${s.getFullYear()}-${l(s.getMonth()+1)}-${l(s.getDate())} ${l(s.getHours())}:${l(s.getMinutes())}`},t2=({t:a})=>{const s=a||"";return s==="NOTICE"?e.jsx("span",{className:"badge badge-type bg-warning text-dark border border-warning-subtle",children:""}):s==="MATERIAL"?e.jsx("span",{className:"badge badge-type bg-info text-dark border border-info-subtle",children:""}):e.jsx("span",{className:"badge badge-type text-bg-secondary",children:""})};function s2(){const{lectureId:a,postId:s}=dt(),l=rs(),[i,c]=x.useState(null),[d,u]=x.useState(!0),[h,f]=x.useState(null),{user:g,getUserId:b}=iy(),{students:y}=cs(),[v,C]=x.useState([]),[w,A]=x.useState("desc"),[S,E]=x.useState(""),[$,D]=x.useState(""),[I,V]=x.useState({variant:"",message:""}),[_,B]=x.useState(!1),[z,X]=x.useState(!1);x.useEffect(()=>{let M=!0;return(async()=>{try{u(!0),f(null);const L=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}`,U=await fetch(L,{headers:{Accept:"application/json"},credentials:"include"});if(!U.ok)throw new Error(`(${U.status})   .`);const P=await U.json();if(!M)return;c(P)}catch(L){if(!M)return;f(L)}finally{M&&u(!1)}})(),()=>{M=!1}},[a,s]);async function T(){const M=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}/reply`,L=await fetch(M,{headers:{Accept:"application/json"},credentials:"include"});if(!L.ok)throw new Error(`(${L.status})   .`);const U=await L.json();return Array.isArray(U)?U:[]}x.useEffect(()=>{let M=!0;return(async()=>{try{const L=await T();if(!M)return;C(L)}catch{}})(),()=>{M=!1}},[a,s]);const W=x.useMemo(()=>{const M=new Map;for(const k of v){const G=k.parentReply||"";M.has(G)||M.set(G,[]),M.get(G).push(k)}const L=(k,G)=>{const se=new Date(k.createAt||k.createdAt||0).getTime(),q=new Date(G.createAt||G.createdAt||0).getTime();return w==="desc"?q-se:se-q},U=(M.get("")||M.get(null)||[]).slice().sort(L),P=new Map;for(const[k,G]of M.entries())k&&P.set(k,G.slice().sort(L));return{roots:U,childrenMap:P}},[v,w]),F=M=>{const L=String(M||"");if(!L)return"-";const U=Array.isArray(y)?y.find(k=>String(k.userId||"")===L):null;if(U){const k=U.lastName||"",G=U.firstName||"",se=U.univDeptName||"",q=`${k}${G}`.trim()||U.studentNo||L;return se?`${q}(${se})`:q}const P=b&&b();if(P&&String(P)===L){const k=g?.lastName||"",G=g?.firstName||"";return`${`${k}${G}`.trim()||""} `}return""},Q=async M=>{if(M.preventDefault(),!$.trim()){V({variant:"danger",message:" ."});return}try{B(!0),V({variant:"",message:""});const L=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}/reply`,U=await fetch(L,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({parentReplyId:S||null,replyContent:$})}),P=await U.text();let k=null;try{k=P?JSON.parse(P):null}catch{}if(!U.ok)throw new Error(`   (HTTP ${U.status})`);V({variant:"success",message:"."}),D(""),E("");const G=await T();C(G)}catch(L){V({variant:"danger",message:String(L.message||L)})}finally{B(!1)}},O=async M=>{const L=String(M||"");if(L&&window.confirm(`  ?
    .`))try{const U=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}/reply/${encodeURIComponent(L)}`,P=await fetch(U,{method:"DELETE",credentials:"include"});if(!P.ok)throw new Error(`   (HTTP ${P.status})`);const k=await T();C(k)}catch(U){V({variant:"danger",message:String(U.message||U)})}},Y=async()=>{if(window.confirm(" ?"))try{X(!0);const M=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}`,L=await fetch(M,{method:"DELETE",headers:{Accept:"application/json"},credentials:"include"});if(L.status===204){l(`/classroom/professor/${encodeURIComponent(a)}/board`,{replace:!0});return}const U=await L.text().catch(()=>"");throw new Error(` . (HTTP ${L.status})`)}catch(M){console.error(M),f(M),X(!1)}},N=({r:M,depth:L=0})=>{const U=L>0,P=F(M.userId)||M.authorName||M.writerName||M.userName||"-",k=M.contentHtml,G=M.replyContent||M.content,se=M.lctReplyId||M.replyId||M.id,q=b&&b(),ee=q&&String(q)===String(M.userId||"");return e.jsxs("div",{className:`border rounded p-2 reply-item ${U?"reply-child":""} ${ee?"reply-professor":""}`,"data-reply-id":se,style:ee?{backgroundColor:"#f6f7f9"}:void 0,children:[e.jsxs("div",{className:"d-flex align-items-start justify-content-between mb-1",children:[e.jsxs("div",{className:"me-2",children:[e.jsx("strong",{className:"me-2",children:P}),e.jsx("span",{className:"small text-muted",children:fh(M.createAt||M.createdAt)})]}),e.jsxs("div",{className:"btn-group btn-group-sm",children:[!U&&e.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>E(String(se||"")),children:""}),e.jsx("button",{className:"btn btn-outline-danger",onClick:()=>O(se),children:""})]})]}),e.jsx("div",{className:"reply-body text-start",children:k?e.jsx("div",{dangerouslySetInnerHTML:{__html:k}}):e.jsx("div",{style:{whiteSpace:"pre-wrap"},children:G||""})})]})};return e.jsx("section",{id:"board-post-root",className:"container py-4","data-lecture-id":a,children:e.jsxs("div",{className:"board-layout mx-auto",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{id:"bc-board",to:`/classroom/professor/${encodeURIComponent(a)}/board`,children:""})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:""})]})}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",id:"btn-list",to:`/classroom/professor/${encodeURIComponent(a)}/board`,children:""})})]}),e.jsx("div",{className:"card shadow-sm mb-4",children:e.jsxs("div",{className:"card-body",id:"post-body",children:[d&&e.jsx("div",{className:"skeleton",style:{height:"8rem"}}),h&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(h.message||h)}),!d&&!h&&i&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex align-items-start justify-content-between gap-3 mb-3 flex-wrap",id:"post-header",children:[e.jsxs("div",{className:"flex-grow-1",children:[e.jsx("div",{className:"d-flex align-items-center flex-wrap gap-2 mb-2",id:"post-badge-row",children:e.jsx(t2,{t:i.postType||i.classification})}),e.jsx("h1",{className:"h4 mb-2",id:"post-title",children:i.title||"( )"}),e.jsxs("div",{className:"d-flex flex-wrap meta-list mb-0",id:"post-meta-row",children:[e.jsxs("div",{className:"meta-item",children:[" ",fh(i.createAt||i.createdAt)]}),i.revealAt&&e.jsxs("div",{className:"meta-item",children:[" ",fh(i.revealAt)]}),i.authorName&&e.jsxs("div",{className:"meta-item",children:[" ",i.authorName]})]})]}),e.jsxs("div",{className:"d-flex align-items-start gap-2 post-header-actions",children:[e.jsx(qe,{className:"btn btn-outline-secondary btn-sm",id:"btn-edit-bottom",to:`/classroom/professor/${encodeURIComponent(a)}/board/${encodeURIComponent(s)}/edit`,children:""}),e.jsx("button",{className:"btn btn-outline-danger btn-sm",id:"btn-delete-bottom",onClick:Y,disabled:z,children:z?"...":""})]})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"post-content mb-4",id:"post-content",children:i.contentHtml?e.jsx("div",{dangerouslySetInnerHTML:{__html:i.contentHtml}}):e.jsx("div",{style:{whiteSpace:"pre-wrap"},children:i.content||""})}),Array.isArray(i.attachments)&&i.attachments.length>0&&e.jsxs("div",{id:"attach-area",className:"mt-4",children:[e.jsx("h2",{className:"h6 mb-2",children:""}),e.jsx("ul",{className:"list-group",id:"attach-list",children:i.attachments.map((M,L)=>e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"text-truncate me-2",title:M.fileName||M.name,children:M.fileName||M.name}),M.url&&e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:M.url,children:""})]},L))})]})]})]})}),e.jsx("section",{className:"mt-5",id:"reply-section",children:e.jsxs("div",{className:"card shadow-sm",children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between gap-2 flex-wrap",children:[e.jsx("h2",{className:"h5 mb-0",children:""}),e.jsxs("div",{className:"btn-group btn-group-sm",role:"group","aria-label":" ",children:[e.jsx("button",{type:"button",className:`btn ${w==="desc"?"btn-primary":"btn-outline-secondary"}`,id:"reply-sort-newest","aria-pressed":w==="desc",onClick:()=>A("desc"),children:""}),e.jsx("button",{type:"button",className:`btn ${w==="asc"?"btn-primary":"btn-outline-secondary"}`,id:"reply-sort-oldest","aria-pressed":w==="asc",onClick:()=>A("asc"),children:""})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("form",{id:"reply-form",className:"vstack gap-3 mb-4",onSubmit:Q,children:[e.jsx("input",{type:"hidden",id:"reply-parent",name:"parentReplyId",value:S,readOnly:!0}),S&&e.jsx("div",{id:"reply-parent-indicator",className:"alert alert-secondary py-2 px-3",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-2",children:[e.jsxs("span",{id:"reply-parent-label",className:"small",children:[" : #",S]}),e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",id:"reply-parent-clear",onClick:()=>E(""),children:" "})]})}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reply-content",className:"form-label",children:" "}),e.jsx("textarea",{className:"form-control reply-textarea",id:"reply-content",rows:3,placeholder:" ",value:$,onChange:M=>D(M.target.value)})]}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{type:"submit",className:"btn btn-primary btn-sm",id:"reply-submit",disabled:_,children:_?"":""})})]}),e.jsx("hr",{className:"my-4"}),e.jsx("div",{className:"vstack gap-1",children:v.length===0?e.jsx("div",{id:"reply-empty",className:"text-muted small text-center py-4",children:"  .   ."}):e.jsx("div",{id:"reply-list",className:"vstack gap-2",children:W.roots.map(M=>e.jsxs("div",{className:"vstack gap-2",children:[e.jsx(N,{r:M,depth:0}),(W.childrenMap.get(M.lctReplyId||M.replyId||M.id)||[]).map(L=>e.jsx("div",{className:"ms-4",children:e.jsx(N,{r:L,depth:1})},L.lctReplyId||L.replyId||L.id))]},M.lctReplyId||M.replyId||M.id))})}),I.message&&e.jsx("div",{id:"reply-alert",className:`alert mt-4 alert-${I.variant||"secondary"}`,role:"alert",children:I.message})]})]})}),e.jsx("div",{id:"error-box",className:"alert alert-danger mt-3 d-none",role:"alert"})]})})}function a2(){const{lectureId:a}=dt(),s=rs(),l=x.useRef(null),i=x.useRef(null),[c,d]=x.useState("NOTICE"),[u,h]=x.useState(""),[f,g]=x.useState("PUBLISHED"),[b,y]=x.useState(""),[v,C]=x.useState(""),[w,A]=x.useState(""),[S,E]=x.useState([]),[$,D]=x.useState({show:!1,type:"danger",message:""}),[I,V]=x.useState({show:!1,message:""});x.useEffect(()=>{let T=!1;const W=async()=>{if(!i.current&&!(!l.current||!window.ClassicEditor))try{const F=await window.ClassicEditor.create(l.current);if(T){F.destroy().catch(console.error);return}i.current=F}catch(F){console.error("CKEditor initialization failed:",F)}};if(window.ClassicEditor)W();else{const F=document.querySelector('script[src*="ckeditor"]');if(F)F.addEventListener("load",()=>{T||W()});else{const Q=document.createElement("script");Q.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",Q.onload=()=>{T||W()},document.head.appendChild(Q)}}return()=>{T=!0;const F=i.current;F&&F.ui&&F.ui.view&&F.ui.view.element&&F.destroy().catch(Q=>{console.debug("Editor cleanup:",Q)}),i.current=null}},[]);const _=async T=>{const W=Array.from(T.target.files||[]);E(W),W.length>0&&console.log("Selected files:",W)},B=()=>{const T=i.current?i.current.getData():"";let W="N",F=null;if(f==="DRAFT")W="Y";else if(f==="SCHEDULED"&&b&&v){const[Q,O]=v.split(":");F=`${b}T${Q.padStart(2,"0")}:${O.padStart(2,"0")}:00`}return{title:u,content:T,fileId:w,postType:c,tempSaveYn:W,revealAt:F}},z=T=>T.title.trim()?T.content.replace(/<[^>]*>/g,"").trim()?f==="SCHEDULED"&&!T.revealAt?(D({show:!0,type:"danger",message:"  .    ."}),!1):!0:(D({show:!0,type:"danger",message:" ."}),!1):(D({show:!0,type:"danger",message:" ."}),!1),X=async T=>{T.preventDefault(),D({show:!1,type:"danger",message:""}),V({show:!1,message:""});const W=B();if(!z(W))return;const F=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post`;try{const Q=await fetch(F,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(W)});if(!Q.ok){const O=await Q.text().catch(()=>"");throw new Error(`HTTP ${Q.status} - ${O||" "}`)}V({show:!0,message:"."}),setTimeout(()=>{s(`/classroom/professor/${a}/board`)},1e3)}catch(Q){console.error(Q),D({show:!0,type:"danger",message:`   . ${Q.message}`})}};return e.jsxs("section",{id:"post-root",className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:" "}),e.jsx(qe,{className:"btn btn-outline-secondary btn-sm",to:`/classroom/professor/${encodeURIComponent(a)}/board`,children:""})]}),e.jsxs("form",{id:"post-form",className:"vstack gap-3",onSubmit:X,children:[e.jsxs("div",{className:"row g-3 align-items-end",children:[e.jsxs("div",{className:"col-12 col-md-4 col-lg-1",children:[e.jsxs("label",{htmlFor:"postType",className:"form-label",children:["",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{id:"postType",name:"postType",className:"form-select",value:c,onChange:T=>d(T.target.value),children:[e.jsx("option",{value:"NOTICE",children:""}),e.jsx("option",{value:"MATERIAL",children:""})]})]}),e.jsxs("div",{className:"col-12 col-md-8 col-lg-6",children:[e.jsxs("label",{htmlFor:"title",className:"form-label",children:["",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",id:"title",name:"title",className:"form-control",maxLength:"200",placeholder:" ",value:u,onChange:T=>h(T.target.value)})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"files",className:"form-label",children:""}),e.jsx("input",{type:"file",id:"files",name:"files",className:"form-control",multiple:!0,onChange:_}),e.jsx("div",{id:"file-list",className:"form-text",children:S.length>0?S.map((T,W)=>e.jsxs("div",{children:[" ",T.name," (",(T.size/1024).toFixed(1)," KB)"]},W)):"   ."})]}),$.show&&e.jsx("div",{id:"alert-box",className:`alert alert-${$.type}`,role:"alert",children:$.message}),I.show&&e.jsx("div",{id:"toast-box",className:"alert alert-success",role:"alert",children:I.message}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"content",className:"form-label",children:[" ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{ref:l,id:"ck-editor"})]}),e.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-end align-items-start align-items-md-center gap-3",children:[e.jsxs("fieldset",{className:"flex-grow-1",children:[e.jsxs("legend",{className:"col-form-label pt-0 mb-2",children:["  ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-3",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stPublished",value:"PUBLISHED",checked:f==="PUBLISHED",onChange:T=>g(T.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"stPublished",children:" "})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stDraft",value:"DRAFT",checked:f==="DRAFT",onChange:T=>g(T.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"stDraft",children:""})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stScheduled",value:"SCHEDULED",checked:f==="SCHEDULED",onChange:T=>g(T.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"stScheduled",children:""})]})]}),f==="SCHEDULED"&&e.jsxs("div",{id:"schedule-row",className:"row g-2 align-items-end mt-2",children:[e.jsxs("div",{className:"col-12 col-sm-6 col-md-4",children:[e.jsx("label",{htmlFor:"publishDate",className:"form-label",children:" "}),e.jsx("input",{type:"date",id:"publishDate",className:"form-control",value:b,onChange:T=>y(T.target.value)})]}),e.jsxs("div",{className:"col-12 col-sm-6 col-md-3",children:[e.jsx("label",{htmlFor:"publishTime",className:"form-label",children:" "}),e.jsx("input",{type:"time",id:"publishTime",className:"form-control",step:"60",value:v,onChange:T=>C(T.target.value)})]})]}),e.jsx("div",{className:"form-text",children:"        ."})]}),e.jsx("div",{className:"ms-md-auto",children:e.jsx("button",{type:"submit",className:"btn btn-primary",children:""})})]})]}),e.jsx("style",{jsx:!0,children:`
        .ck.ck-editor {
          max-width: 100%;
        }
        .ck-editor__editable {
          min-height: 400px;
        }
      `})]})}function n2(){const{lectureId:a,postId:s}=dt(),l=rs(),i=x.useRef(null),c=x.useRef(null),[d,u]=x.useState("NOTICE"),[h,f]=x.useState(""),[g,b]=x.useState("PUBLISHED"),[y,v]=x.useState(""),[C,w]=x.useState(""),[A,S]=x.useState(""),[E,$]=x.useState([]),[D,I]=x.useState([]),[V,_]=x.useState(!0),[B,z]=x.useState({show:!1,message:""}),[X,T]=x.useState({show:!1,message:""}),W=P=>String(P).padStart(2,"0"),F=P=>`${P.getFullYear()}-${W(P.getMonth()+1)}-${W(P.getDate())}`,Q=P=>`${W(P.getHours())}:${W(P.getMinutes())}`,O=P=>{if(P.tempSaveYn==="Y")return"DRAFT";if(P.revealAt){const k=new Date;if(new Date(P.revealAt).getTime()>k.getTime())return"SCHEDULED"}return"PUBLISHED"};x.useEffect(()=>{let P=!1;const k=async()=>{if(!c.current&&!(!i.current||!window.ClassicEditor))try{const G=await window.ClassicEditor.create(i.current);if(P){G.destroy().catch(console.error);return}c.current=G}catch(G){console.error("CKEditor initialization failed:",G)}};if(window.ClassicEditor)k();else{const G=document.querySelector('script[src*="ckeditor"]');if(G)G.addEventListener("load",()=>{P||k()});else{const se=document.createElement("script");se.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",se.onload=()=>{P||k()},document.head.appendChild(se)}}return()=>{P=!0;const G=c.current;G&&G.ui&&G.ui.view&&G.ui.view.element&&G.destroy().catch(se=>{console.debug("Editor cleanup:",se)}),c.current=null}},[]),x.useEffect(()=>{let P=!0;return(async()=>{try{_(!0);const G=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}`,se=await fetch(G,{headers:{Accept:"application/json"},credentials:"include"});if(!se.ok)throw new Error(`HTTP ${se.status}`);const q=await se.json();if(!P)return;f(q.title||""),u(q.postType||"NOTICE"),S(q.attachFileId||""),Array.isArray(q.attachFileList)&&I(q.attachFileList);const ee=O(q);if(b(ee),ee==="SCHEDULED"&&q.revealAt){const me=new Date(q.revealAt);Number.isNaN(me.getTime())||(v(F(me)),w(Q(me)))}_(!1);const te=setInterval(()=>{c.current&&(c.current.setData(q.content||""),clearInterval(te))},100);setTimeout(()=>clearInterval(te),1e4)}catch(G){if(!P)return;console.error(G),z({show:!0,message:"    ."}),_(!1)}})(),()=>{P=!1}},[a,s]);const Y=async P=>{const k=Array.from(P.target.files||[]);$(k),k.length>0&&console.log("Selected files:",k)},N=()=>{const P=c.current?c.current.getData():"";let k="N",G=null;if(g==="DRAFT")k="Y";else if(g==="SCHEDULED"&&y&&C){const[se,q]=C.split(":");G=`${y}T${se.padStart(2,"0")}:${q.padStart(2,"0")}:00`}return{title:h,content:P,fileId:A||null,postType:d,tempSaveYn:k,revealAt:G}},M=P=>P.title.trim()?P.title.trim().length>100?(z({show:!0,message:"  100."}),!1):!P.content||P.content.replace(/<[^>]*>/g,"").trim().length===0?(z({show:!0,message:" ."}),!1):P.content.length>1e3?(z({show:!0,message:"  1000."}),!1):g==="SCHEDULED"&&!P.revealAt?(z({show:!0,message:"   /  ."}),!1):!0:(z({show:!0,message:" ."}),!1),L=async P=>{P.preventDefault(),z({show:!1,message:""}),T({show:!1,message:""});const k=N();if(!M(k))return;const G=`/classroom/api/v1/professor/board/${encodeURIComponent(a)}/post/${encodeURIComponent(s)}`;try{const se=await fetch(G,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(k)});if(se.status===204){T({show:!0,message:"."}),setTimeout(()=>{l(`/classroom/professor/${a}/board/${s}`)},300);return}const q=await se.text().catch(()=>"");throw new Error(`  (HTTP ${se.status}) ${q.slice(0,200)}`)}catch(se){console.error(se),z({show:!0,message:se.message||"   ."})}},U=()=>{l(`/classroom/professor/${a}/board/${s}`)};return e.jsxs("section",{id:"post-edit-root",className:"container py-4",children:[V&&e.jsxs("div",{className:"alert alert-info",children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"  ..."]}),e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:" "}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(qe,{className:"btn btn-outline-secondary btn-sm",to:`/classroom/professor/${encodeURIComponent(a)}/board/${encodeURIComponent(s)}`,children:""}),e.jsx(qe,{className:"btn btn-outline-secondary btn-sm",to:`/classroom/professor/${encodeURIComponent(a)}/board`,children:""})]})]}),B.show&&e.jsx("div",{id:"error-box",className:"alert alert-danger",role:"alert",children:B.message}),X.show&&e.jsx("div",{id:"toast-box",className:"alert alert-success",role:"alert",children:X.message}),e.jsxs("form",{id:"edit-form",className:"vstack gap-3",onSubmit:L,children:[e.jsxs("div",{className:"row g-3 align-items-end",children:[e.jsxs("div",{className:"col-12 col-md-4 col-lg-2",children:[e.jsxs("label",{htmlFor:"postType",className:"form-label",children:["",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("select",{id:"postType",name:"postType",className:"form-select",value:d,onChange:P=>u(P.target.value),disabled:V,children:[e.jsx("option",{value:"NOTICE",children:""}),e.jsx("option",{value:"MATERIAL",children:""})]})]}),e.jsxs("div",{className:"col-12 col-md-8 col-lg-6",children:[e.jsxs("label",{htmlFor:"title",className:"form-label",children:["",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{type:"text",id:"title",name:"title",className:"form-control",maxLength:"100",placeholder:" ",value:h,onChange:P=>f(P.target.value),disabled:V})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"files",className:"form-label",children:"(    )"}),e.jsx("input",{type:"file",id:"files",name:"files",className:"form-control",multiple:!0,onChange:Y,disabled:V}),e.jsx("div",{id:"file-list",className:"form-text",children:D.length>0?e.jsxs(e.Fragment,{children:[" :"," ",D.map((P,k)=>{const G=P.originName||` ${P.fileOrder||k+1}`,se=P.extension?`.${P.extension}`:"";return`${G}${se}`}).join(", ")]}):"  "}),E.length>0&&e.jsxs("div",{className:"form-text",children:[" :"," ",E.map(P=>`${P.name} (${(P.size/1024).toFixed(1)} KB)`).join(", ")]}),e.jsx("div",{id:"file-hint",className:"form-text",children:" 5.     ."})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"content",className:"form-label",children:[" ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("div",{ref:i,id:"ck-editor"}),e.jsx("div",{className:"form-text",children:" :  1000"})]}),e.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-end align-items-start align-items-md-center gap-3",children:[e.jsxs("fieldset",{className:"flex-grow-1",children:[e.jsxs("legend",{className:"col-form-label pt-0 mb-2",children:["  ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-3",children:[e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stPublished",value:"PUBLISHED",checked:g==="PUBLISHED",onChange:P=>b(P.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"stPublished",children:" "})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stDraft",value:"DRAFT",checked:g==="DRAFT",onChange:P=>b(P.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"stDraft",children:""})]}),e.jsxs("div",{className:"form-check",children:[e.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stScheduled",value:"SCHEDULED",checked:g==="SCHEDULED",onChange:P=>b(P.target.value)}),e.jsx("label",{className:"form-check-label",htmlFor:"stScheduled",children:""})]})]}),g==="SCHEDULED"&&e.jsxs("div",{id:"schedule-row",className:"row g-2 align-items-end mt-2",children:[e.jsxs("div",{className:"col-12 col-sm-6 col-md-4",children:[e.jsx("label",{htmlFor:"publishDate",className:"form-label",children:" "}),e.jsx("input",{type:"date",id:"publishDate",className:"form-control",value:y,onChange:P=>v(P.target.value)})]}),e.jsxs("div",{className:"col-12 col-sm-6 col-md-3",children:[e.jsx("label",{htmlFor:"publishTime",className:"form-label",children:" "}),e.jsx("input",{type:"time",id:"publishTime",className:"form-control",step:"60",value:C,onChange:P=>w(P.target.value)})]})]})]}),e.jsxs("div",{className:"ms-md-auto d-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:U,disabled:V,children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:V,children:""})]})]})]}),e.jsx("style",{jsx:!0,children:`
        .ck.ck-editor {
          max-width: 100%;
        }
        .ck-editor__editable {
          min-height: 400px;
        }
      `})]})}const kb=a=>String(a).padStart(2,"0"),l2=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${String(s.getFullYear()).slice(-2)} ${kb(s.getMonth()+1)} ${kb(s.getDate())}`};function i2(){const{lectureId:a}=dt(),s=rs(),{students:l}=cs(),i="/classroom/api/v1/professor/attendance",[c,d]=x.useState([]),[u,h]=x.useState(!0),[f,g]=x.useState(null),[b,y]=x.useState(null),[v,C]=x.useState(0),[w,A]=x.useState(!1),[S,E]=x.useState(!1),[$,D]=x.useState(null),[I,V]=x.useState([]),[_,B]=x.useState(!1),[z,X]=x.useState(null),[T,W]=x.useState(0),[F,Q]=x.useState(new Map),[O,Y]=x.useState({loading:!0,error:null,data:[]}),[N,M]=x.useState({no:2,late:0,early:0});x.useEffect(()=>{let J=!0;return(async()=>{try{h(!0),g(null);const re=await fetch(`${i}/${encodeURIComponent(a)}/all`,{credentials:"include",headers:{Accept:"application/json"}});if(!re.ok)throw new Error(`(${re.status})     .`);const Ee=await re.json();if(!J)return;if(!Array.isArray(Ee))throw new Error("    .");d(Ee)}catch(re){if(!J)return;g(re)}finally{J&&h(!1)}})(),()=>{J=!1}},[a,v]),x.useEffect(()=>{let J=!0;return(async()=>{Y({loading:!0,error:null,data:[]});const Ee=`${i}/${encodeURIComponent(a)}/summary`;try{const $e=await fetch(Ee,{credentials:"include",headers:{Accept:"application/json"}});if(!J)return;if(!$e.ok)throw new Error(`     (${$e.status})`);const ue=await $e.json();J&&Y({loading:!1,error:null,data:Array.isArray(ue)?ue:[]})}catch($e){J&&Y({loading:!1,error:$e,data:[]})}})(),()=>{J=!1}},[a,v]);const L=x.useMemo(()=>{const J={total:0,ok:0,no:0,early:0,late:0,excp:0};for(const re of c)J.total+=re.totalCnt??0,J.ok+=re.okCnt??0,J.no+=re.noCnt??0,J.early+=re.earlyCnt??0,J.late+=re.lateCnt??0,J.excp+=re.excpCnt??0;return J},[c]),U=x.useMemo(()=>{if(!O.data.length||!Array.isArray(l))return[];const J=new Map(l.map(re=>[re.enrollId,re]));return O.data.map(re=>({...re,student:J.get(re.enrollId)})).filter(re=>re.student?re.noCnt>=N.no&&re.lateCnt>=N.late&&re.earlyCnt>=N.early:!1).sort((re,Ee)=>Ee.noCnt+Ee.lateCnt+Ee.earlyCnt-(re.noCnt+re.lateCnt+re.earlyCnt))},[O.data,l,N]),P=J=>{const{name:re,value:Ee}=J.target;M($e=>({...$e,[re]:Math.max(0,Number(Ee))}))},k=(J,re)=>re>0?Math.round(J/re*1e3)/10:0,G=async J=>{if(Number.isFinite(J)&&window.confirm(`#${J}  ?
  .`))try{y(J);const re=await fetch(`${i}/${encodeURIComponent(a)}/${encodeURIComponent(J)}`,{method:"DELETE",credentials:"include"});if(!re.ok)throw new Error(`(${re.status})  .`);const $e=await(await fetch(`${i}/${encodeURIComponent(a)}/all`,{credentials:"include",headers:{Accept:"application/json"}})).json().catch(()=>[]);d(Array.isArray($e)?$e:[])}catch(re){alert(re.message||String(re))}finally{y(null)}},se=async J=>{try{const re=await fetch(`${i}/${encodeURIComponent(a)}?default_status=${encodeURIComponent(J)}`,{method:"POST",credentials:"include"});if(!re.ok)throw new Error(`(${re.status})   `);const Ee=await re.json();if(typeof Ee!="number")throw new Error("  : round  ");const ue=await(await fetch(`${i}/${encodeURIComponent(a)}/all`,{credentials:"include",headers:{Accept:"application/json"}})).json().catch(()=>[]);d(Array.isArray(ue)?ue:[]),A(!1),window.confirm(" .  ?")&&await q(Ee)}catch(re){alert(re.message||String(re))}},q=async J=>{try{B(!0),X(null),E(!0),D(J),Q(new Map),W(0);const re=await fetch(`${i}/${encodeURIComponent(a)}/${encodeURIComponent(J)}/manual`,{credentials:"include",headers:{Accept:"application/json"}});if(!re.ok)throw new Error(`(${re.status})    `);const Ee=await re.json();V(Array.isArray(Ee)?Ee:[])}catch(re){X(re)}finally{B(!1)}},ee=()=>{E(!1),D(null),V([]),Q(new Map),W(0)},te=(J,re)=>{Q(Ee=>{const $e=new Map(Ee);return $e.set(String(J),{attStatusCd:re.attStatusCd,attComment:re.attComment}),$e})},me=J=>{setTimeout(()=>{const re=document.querySelector(`tr[data-enroll-id="${I[J]?.enrollId}"]`);re&&re.scrollIntoView({behavior:"smooth",block:"nearest"})},50)},oe=()=>{W(J=>{const re=Math.min(I.length-1,J+1);return me(re),re})},be=async()=>{try{if(!$){alert("  .");return}const J=Array.from(F,([Ee,$e])=>({enrollId:Ee,attStatusCd:$e.attStatusCd,attComment:$e.attComment??null})),re=await fetch(`${i}/${encodeURIComponent(a)}/${encodeURIComponent($)}/manual`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(J)});if(!re.ok)throw new Error(`(${re.status})  `);alert("."),C(Ee=>Ee+1),ee()}catch(J){alert(J.message||String(J))}};return e.jsxs("section",{id:"attendance-root",className:"container py-0","data-lecture-id":a,children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:" "}),e.jsx("div",{className:"d-flex flex-wrap gap-2 align-items-center",children:e.jsx("button",{id:"btn-open-create-modal",className:"btn btn-primary",onClick:()=>A(!0),children:" "})})]}),e.jsxs("div",{className:"row g-3 mb-2",id:"summary-cards",children:[e.jsx("div",{className:"col-12 col-md-4",children:e.jsx("div",{className:"card text-center h-100",children:e.jsxs("div",{className:"card-body py-3",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsxs("div",{id:"sum-rate-present",className:"display-6 fs-2",children:[k(L.ok,L.total)," %"]})]})})}),e.jsx("div",{className:"col-12 col-md-4",children:e.jsx("div",{className:"card text-center h-100",children:e.jsxs("div",{className:"card-body py-3",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsxs("div",{id:"sum-rate-absent",className:"display-6 fs-2",children:[k(L.no,L.total)," %"]})]})})}),e.jsx("div",{className:"col-12 col-md-4",children:e.jsx("div",{className:"card text-center h-100",children:e.jsxs("div",{className:"card-body py-3",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsxs("div",{id:"sum-rate-late-early",className:"display-6 fs-2",children:[k(L.late+L.early,L.total)," %"]})]})})})]}),u&&e.jsx("div",{className:"text-muted",children:" "}),f&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(f.message||f)}),!u&&!f&&e.jsx("section",{"aria-label":" ",children:e.jsxs("div",{className:"row g-3",children:[e.jsx("div",{className:"col-12 col-xl-6",children:e.jsx("div",{className:"card h-100",children:e.jsx("div",{className:"card-body",children:c.length===0?e.jsx("div",{className:"text-center text-muted py-4",children:"  ."}):e.jsx("div",{className:"attendance-table-container",style:{border:"none",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsx("div",{className:"attendance-table-scroll",children:e.jsxs("table",{className:"table table-sm align-middle mb-0",id:"round-table",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:80},className:"text-center",children:""}),e.jsx("th",{style:{width:120},className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{style:{width:80},className:"text-center",children:""})]})}),e.jsx("tbody",{id:"round-tbody",children:c.slice().sort((J,re)=>(re.lctRound||0)-(J.lctRound||0)).map(J=>{const re=J.lctPrintRound??J.lctRound??"-",Ee=l2(J.attDay||J.startAt||J.endAt);return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:e.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:$e=>{$e.preventDefault(),q(J.lctRound)},children:["#",re]})}),e.jsx("td",{className:"small text-muted text-center",children:Ee}),e.jsx("td",{className:"text-center",children:J.okCnt>0&&e.jsx("span",{className:"badge bg-success-subtle text-success border border-success-subtle",children:J.okCnt})}),e.jsx("td",{className:"text-center",children:J.noCnt>0&&e.jsx("span",{className:"badge bg-danger-subtle text-danger border border-danger-subtle",children:J.noCnt})}),e.jsx("td",{className:"text-center",children:J.earlyCnt>0&&e.jsx("span",{className:"badge bg-warning text-dark",children:J.earlyCnt})}),e.jsx("td",{className:"text-center",children:J.lateCnt>0&&e.jsx("span",{className:"badge bg-warning text-dark",children:J.lateCnt})}),e.jsx("td",{className:"text-center",children:J.excpCnt>0&&e.jsx("span",{className:"badge bg-info-subtle text-info border border-info-subtle",children:J.excpCnt})}),e.jsx("td",{className:"text-center",children:J.tbdCnt>0&&e.jsx("span",{className:`badge bg-secondary ${J.tbdCnt>0?"blink-tbd":""}`,children:J.tbdCnt})}),e.jsx("td",{className:"text-center",children:e.jsx("button",{className:"btn btn-sm border-0",disabled:b===J.lctRound,onClick:()=>G(J.lctRound),children:e.jsx("span",{style:{color:"red"},children:""})})})]},J.lctRound??re)})})]})})})})})}),e.jsxs("div",{className:"col-12 col-xl-6",children:[e.jsxs("div",{className:"card mb-3",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:"   "})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex flex-wrap gap-2 align-items-end justify-content-center",children:[e.jsxs("div",{className:"d-flex align-items-center gap-1",children:[e.jsx("label",{htmlFor:"filter-no",className:"form-label small mb-0",children:""}),e.jsx("input",{type:"number",id:"filter-no",name:"no",className:"form-control form-control-sm",style:{width:60},value:N.no,onChange:P,min:"0"}),e.jsx("span",{className:"small",children:","})]}),e.jsxs("div",{className:"d-flex align-items-center gap-1",children:[e.jsx("label",{htmlFor:"filter-late",className:"form-label small mb-0",children:""}),e.jsx("input",{type:"number",id:"filter-late",name:"late",className:"form-control form-control-sm",style:{width:60},value:N.late,onChange:P,min:"0"}),e.jsx("span",{className:"small",children:","})]}),e.jsxs("div",{className:"d-flex align-items-center gap-1",children:[e.jsx("label",{htmlFor:"filter-early",className:"form-label small mb-0",children:""}),e.jsx("input",{type:"number",id:"filter-early",name:"early",className:"form-control form-control-sm",style:{width:60},value:N.early,onChange:P,min:"0"}),e.jsx("span",{className:"small",children:" "})]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header",children:e.jsx("h5",{className:"card-title mb-0",children:" "})}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"attendance-table-container",style:{border:"none",borderRadius:"0.375rem",overflow:"hidden"},children:e.jsx("div",{className:"attendance-table-scroll",style:{maxHeight:350},children:O.loading||l===null?e.jsx("div",{className:"text-center text-muted py-3",children:" "}):O.error?e.jsxs("div",{className:"alert alert-danger",children:[": ",String(O.error?.message||"   ")]}):e.jsxs("table",{className:"table table-sm table-hover",children:[e.jsx("thead",{className:"table-light",style:{position:"sticky",top:0},children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:U.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"text-center text-muted",children:"   ."})}):U.map(({enrollId:J,student:re,noCnt:Ee,lateCnt:$e,earlyCnt:ue})=>e.jsxs("tr",{onClick:()=>s(`/classroom/professor/${a}/student/${re.studentNo}`),style:{cursor:"pointer"},children:[e.jsxs("td",{children:[e.jsxs("div",{children:[re.lastName,re.firstName," ",e.jsx("small",{className:"text-muted",children:re.studentNo})]}),e.jsxs("div",{className:"small text-muted",children:[re.univDeptName," ",re.gradeName]})]}),e.jsx("td",{className:"text-center",children:Ee||0}),e.jsx("td",{className:"text-center",children:$e||0}),e.jsx("td",{className:"text-center",children:ue||0})]},J))})]})})}),e.jsxs("div",{className:"text-end small text-muted mt-2",children:[" ",U.length," "]})]})]})]})]})}),w&&nr.createPortal(e.jsx("div",{className:"d-flex align-items-center justify-content-center",tabIndex:-1,role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,zIndex:2e3,backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>A(!1),children:e.jsx("div",{className:"modal-dialog modal-xl",style:{maxHeight:"90vh"},onClick:J=>J.stopPropagation(),children:e.jsxs("div",{className:"modal-content rounded-4 h-100 d-flex flex-column",style:{backgroundColor:"#fff"},children:[e.jsxs("div",{className:"modal-header border-bottom p-3",children:[e.jsx("h5",{className:"modal-title",children:" "}),e.jsx("button",{type:"button",className:"btn-close ms-auto","aria-label":"",onClick:()=>A(!1)})]}),e.jsx("div",{className:"modal-body p-4",children:e.jsxs("div",{className:"row g-3 justify-content-center",style:{maxWidth:"640px",margin:"0 auto"},children:[e.jsx("div",{className:"col-6",children:e.jsxs("div",{role:"button",className:"d-flex flex-column align-items-center justify-content-center border rounded mode-card",style:{width:"100%",height:"160px",cursor:"pointer"},onClick:()=>se("OK"),children:[e.jsx("div",{className:"h5 mb-1",children:" "}),e.jsx("div",{className:"text-muted small",children:"   "})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{role:"button",className:"d-flex flex-column align-items-center justify-content-center border rounded mode-card",style:{width:"100%",height:"160px",cursor:"pointer"},onClick:()=>se("TBD"),children:[e.jsx("div",{className:"h5 mb-1",children:" "}),e.jsx("div",{className:"text-muted small",children:"  "})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{role:"button",className:"d-flex flex-column align-items-center justify-content-center border rounded mode-card",style:{width:"100%",height:"160px",cursor:"pointer"},onClick:()=>se("NO"),children:[e.jsx("div",{className:"h5 mb-1",children:" "}),e.jsx("div",{className:"text-muted small",children:"   "})]})}),e.jsx("div",{className:"col-6",children:e.jsxs("div",{role:"button",className:"d-flex flex-column align-items-center justify-content-center border rounded mode-card disabled",style:{width:"100%",height:"160px",opacity:.6,cursor:"not-allowed"},title:"QR  .",children:[e.jsx("div",{className:"h5 mb-1",children:"QR "}),e.jsx("div",{className:"text-muted small",children:""})]})})]})}),e.jsx("div",{className:"modal-footer border-top p-3 d-flex justify-content-end gap-2",children:e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>A(!1),children:""})})]})})}),document.body),S&&nr.createPortal(e.jsx("div",{id:"studentsModal",className:"d-flex align-items-center justify-content-center",tabIndex:-1,role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,zIndex:2e3,backgroundColor:"rgba(0,0,0,0.5)"},onClick:ee,children:e.jsx("div",{className:"modal-dialog modal-xl",style:{maxHeight:"90vh"},onClick:J=>J.stopPropagation(),children:e.jsxs("div",{className:"modal-content rounded-4 h-100 d-flex flex-column",style:{backgroundColor:"#fff"},children:[e.jsxs("div",{className:"modal-header border-bottom p-3",children:[e.jsxs("h5",{className:"modal-title",children:["  ",e.jsxs("small",{className:"text-muted",children:["#",$]})]}),e.jsx("button",{type:"button",className:"btn-close ms-auto","aria-label":"",onClick:ee})]}),e.jsxs("div",{className:"modal-body d-flex flex-column flex-grow-1",style:{overflow:"hidden"},children:[e.jsxs("div",{id:"checker-panel",className:`card mb-0 ${I.length?"":"d-none"}`,children:[e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row g-3 align-items-stretch",children:[e.jsx("div",{className:"col-12 col-md-3",children:e.jsx("div",{className:"d-flex h-100 align-items-center justify-content-center",children:e.jsx("img",{id:"chk-photo",alt:"",className:"d-block rounded-3",style:{width:135,height:135,objectFit:"cover",objectPosition:"top",border:"1px solid #dee2e6"},src:I[T]?.studentNo?`/classroom/api/v1/common/photo/student/${encodeURIComponent(a)}/${encodeURIComponent(I[T].studentNo)}`:void 0})})}),e.jsx("div",{className:"col-12 col-md-9",children:e.jsxs("div",{className:"row g-3 align-items-end",children:[e.jsx("div",{className:"col-12 col-lg-5",children:e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{id:"chk-studentNo",className:"fw-semibold",children:I[T]?.studentNo||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{id:"chk-name",className:"fw-semibold",children:`${I[T]?.lastName||""}${I[T]?.firstName||""}`})]})]}),e.jsxs("div",{className:"d-flex flex-wrap gap-3 mt-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{id:"chk-dept",className:"fw-semibold",children:I[T]?.univDeptName||"-"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"small text-muted",children:""}),e.jsx("div",{id:"chk-grade",className:"fw-semibold",children:I[T]?.gradeName||I[T]?.grade||"-"})]})]})]})}),e.jsx("div",{className:"col-12 col-lg-7",children:e.jsxs("div",{className:"row g-2",children:[e.jsxs("div",{className:"col-12",children:[e.jsx("label",{htmlFor:"chk-comment",className:"form-label small text-muted mb-1",children:""}),e.jsx("input",{id:"chk-comment",type:"text",className:"form-control form-control-sm",placeholder:"",value:F.get(String(I[T]?.enrollId))?.attComment||I[T]?.attComment||"",onChange:J=>{const re=I[T];if(!re)return;const Ee=F.get(String(re.enrollId))||{};te(re.enrollId,{attStatusCd:Ee.attStatusCd||re.attStatusCd||"ATTD_TBD",attComment:J.target.value})}})]}),e.jsx("div",{className:"col-12",children:e.jsxs("div",{className:"d-flex flex-nowrap gap-1",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm text-nowrap",onClick:()=>{const J=I[T];if(!J)return;const re=F.get(String(J.enrollId))?.attComment||J.attComment||"";te(J.enrollId,{attStatusCd:"ATTD_TBD",attComment:re}),oe()},children:""}),e.jsx("button",{type:"button",className:"btn btn-success btn-sm text-nowrap",onClick:()=>{const J=I[T];if(!J)return;const re=F.get(String(J.enrollId))?.attComment||J.attComment||"";te(J.enrollId,{attStatusCd:"ATTD_OK",attComment:re}),oe()},children:""}),e.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-nowrap",onClick:()=>{const J=I[T];if(!J)return;const re=F.get(String(J.enrollId))?.attComment||J.attComment||"";te(J.enrollId,{attStatusCd:"ATTD_NO",attComment:re}),oe()},children:""}),e.jsx("button",{type:"button",className:"btn btn-warning btn-sm text-dark text-nowrap",onClick:()=>{const J=I[T];if(!J)return;const re=F.get(String(J.enrollId))?.attComment||J.attComment||"";te(J.enrollId,{attStatusCd:"ATTD_EARLY",attComment:re}),oe()},children:""}),e.jsx("button",{type:"button",className:"btn btn-warning btn-sm text-dark text-nowrap",onClick:()=>{const J=I[T];if(!J)return;const re=F.get(String(J.enrollId))?.attComment||J.attComment||"";te(J.enrollId,{attStatusCd:"ATTD_LATE",attComment:re}),oe()},children:""}),e.jsx("button",{type:"button",className:"btn btn-info btn-sm text-nowrap",onClick:()=>{const J=I[T];if(!J)return;const re=F.get(String(J.enrollId))?.attComment||J.attComment||"";te(J.enrollId,{attStatusCd:"ATTD_EXCP",attComment:re}),oe()},children:""})]})})]})})]})})]})}),e.jsx("div",{className:"table-responsive flex-grow-1",style:{maxHeight:"45vh",overflow:"auto"},children:e.jsxs("table",{className:"table table-sm table-bordered text-center align-middle mb-0",children:[e.jsx("thead",{className:"table-light",style:{position:"sticky",top:"-1px",zIndex:10},children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"64px",paddingTop:"12px",paddingBottom:"12px"},children:"#"}),e.jsx("th",{style:{width:"120px",paddingTop:"12px",paddingBottom:"12px"},children:""}),e.jsx("th",{style:{width:"80px",paddingTop:"12px",paddingBottom:"12px"},children:""}),e.jsx("th",{style:{width:"60px",paddingTop:"12px",paddingBottom:"12px"},children:""}),e.jsx("th",{style:{minWidth:"120px",paddingTop:"12px",paddingBottom:"12px"},children:""}),e.jsx("th",{style:{width:"80px",paddingTop:"12px",paddingBottom:"12px"},children:""}),e.jsx("th",{style:{minWidth:"200px",paddingTop:"12px",paddingBottom:"12px"},children:""})]})}),e.jsx("tbody",{id:"students-tbody",children:_?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted",children:" "})}):z?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-danger",children:"   ."})}):I.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted",children:"   ."})}):I.map((J,re)=>{const Ee=F.get(String(J.enrollId))||{},$e=Ee.attStatusCd||J.attStatusCd||"ATTD_TBD",ue=Ee.attComment||J.attComment||"";return e.jsxs("tr",{"data-enroll-id":J.enrollId,className:re===T?"table-active":"",onClick:()=>W(re),style:{cursor:"pointer"},children:[e.jsx("td",{children:e.jsxs("button",{className:"btn btn-sm btn-outline-secondary",onClick:fe=>{fe.preventDefault(),W(re)},children:["#",re+1]})}),e.jsx("td",{className:"text-center",children:J.studentNo}),e.jsx("td",{className:"text-center",children:`${J.lastName||""}${J.firstName||""}`}),e.jsx("td",{className:"text-center",children:J.gradeName||J.grade||"-"}),e.jsx("td",{className:"text-center",children:J.univDeptName||"-"}),e.jsx("td",{children:(()=>{const fe={ATTD_TBD:{cls:"badge bg-secondary status-pill",label:""},ATTD_OK:{cls:"badge bg-success status-pill",label:""},ATTD_NO:{cls:"badge bg-danger status-pill",label:""},ATTD_EARLY:{cls:"badge bg-warning text-dark status-pill",label:""},ATTD_LATE:{cls:"badge bg-warning text-dark status-pill",label:""},ATTD_EXCP:{cls:"badge bg-info status-pill",label:""}},Me=fe[$e]||fe.ATTD_TBD;return e.jsx("span",{className:Me.cls,children:Me.label})})()}),e.jsx("td",{children:e.jsx("input",{className:"form-control form-control-sm",value:ue,onChange:fe=>te(J.enrollId,{attStatusCd:$e,attComment:fe.target.value})})})]},J.enrollId)})})]})})]}),e.jsxs("div",{className:"modal-footer border-top p-3 d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:ee,children:""}),e.jsx("button",{id:"btn-submit-changes",type:"button",className:"btn btn-primary",onClick:be,children:""})]})]})]})})}),document.body)]})}const Kc=a=>String(a).padStart(2,"0"),ar=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${Kc(s.getMonth()+1)}-${Kc(s.getDate())} ${Kc(s.getHours())}:${Kc(s.getMinutes())}`},Db=(a,s)=>{const l=Date.now(),i=a?new Date(a).getTime():void 0,c=s?new Date(s).getTime():void 0;if(typeof i=="number"&&i>l)return"upcoming";if(typeof i=="number"&&i<=l){if(typeof c!="number"||c>=l)return"ongoing";if(c<l)return"closed"}return typeof c=="number"&&c<l?"closed":"unknown"};function r2({open:a,entries:s,total:l,error:i,saving:c,onChange:d,onSubmit:u,onClose:h}){return x.useEffect(()=>{if(!a)return;const f=document.body.style.overflow,g=b=>{b.key==="Escape"&&h()};return document.body.style.overflow="hidden",document.addEventListener("keydown",g),()=>{document.body.style.overflow=f,document.removeEventListener("keydown",g)}},[a,h]),a?nr.createPortal(e.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"exam-weight-modal-title",style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.45)",zIndex:1050,display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"},onClick:f=>{f.target===f.currentTarget&&h()},children:e.jsx("div",{className:"card shadow-lg",style:{width:"min(720px, 100%)",maxHeight:"90vh",overflow:"hidden"},onClick:f=>f.stopPropagation(),children:e.jsxs("form",{onSubmit:u,className:"d-flex flex-column",style:{height:"100%"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h5 mb-0",id:"exam-weight-modal-title",children:"   "}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"",onClick:h,disabled:c})]}),e.jsxs("div",{className:"card-body",style:{overflowY:"auto"},children:[i&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:i}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",style:{width:56},children:"#"}),e.jsx("th",{scope:"col",children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:200},children:" "}),e.jsx("th",{scope:"col",className:"text-end",style:{width:160},children:" "})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"  ."})}):s.map((f,g)=>{const b=f.startAt?ar(f.startAt):"-",y=f.endAt?ar(f.endAt):"-";return e.jsxs("tr",{children:[e.jsxs("td",{className:"text-muted",children:["#",g+1]}),e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold text-truncate",title:f.examName,children:f.examName}),e.jsx("div",{className:"text-muted small",children:f.examTypeLabel})]}),e.jsxs("td",{className:"text-center text-muted small",children:[b," ~ ",y]}),e.jsx("td",{className:"text-end",children:e.jsx("input",{type:"number",min:0,max:100,className:"form-control form-control-sm text-end",value:f.value,onChange:v=>d(f.id,v.target.value),disabled:c,required:!0})})]},f.id||g)})})]})})]}),e.jsxs("div",{className:"card-footer d-flex flex-column flex-sm-row align-items-sm-center justify-content-between gap-2",children:[e.jsxs("div",{className:"fw-semibold",children:["  :",e.jsx("span",{className:l===100?"text-success":"text-danger",children:l})]}),e.jsx("div",{className:"text-muted small flex-grow-1 text-sm-end",children:"   100  ."}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:h,disabled:c,children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c||s.length===0,children:c?" ...":""})]})]})]})})}),document.body):null}function c2(){const{lectureId:a}=dt(),[s,l]=x.useState([]),[i,c]=x.useState(!0),[d,u]=x.useState(null),[h,f]=x.useState(null),[g,b]=x.useState(!1),[y,v]=x.useState([]),[C,w]=x.useState(""),[A,S]=x.useState(!1),E=x.useCallback(async()=>{c(!0),u(null);try{const T=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}`,W=await fetch(T,{headers:{Accept:"application/json"},credentials:"include"});if(!W.ok)throw new Error(`(${W.status})    .`);const F=await W.json();if(!Array.isArray(F))throw new Error("    .");l(F)}catch(T){u(T)}finally{c(!1)}},[a]);x.useEffect(()=>{E()},[E]);const $=x.useMemo(()=>{const T=[],W=[],F=[],Q=[];return s.forEach(O=>{const Y=Db(O.startAt,O.endAt);Y==="upcoming"?W.push(O):Y==="ongoing"?F.push(O):Y==="closed"&&Q.push(O),T.push(O)}),{all:T,upcoming:W,ongoing:F,closed:Q}},[s]),D=T=>{const W=T.lctExamId??T.id,F=T.examName||T.title||"( )",Q=a&&W?`/classroom/professor/${encodeURIComponent(a)}/exam/${encodeURIComponent(W)}`:null,O={upcoming:"",ongoing:"",closed:"",unknown:""}[Db(T.startAt,T.endAt)]||"";return e.jsxs("tr",{children:[e.jsx("td",{children:Q?e.jsx(qe,{to:Q,className:"text-decoration-none",children:F}):F}),e.jsx("td",{children:T.examTypeName||T.examType||"-"}),e.jsx("td",{children:O}),e.jsxs("td",{children:[ar(T.startAt)," ~ ",ar(T.endAt)]}),e.jsx("td",{children:T.notice||"-"}),e.jsx("td",{children:typeof T.weightValue<"u"?T.weightValue:"-"}),e.jsx("td",{children:ar(T.createAt||T.createdAt)})]})};x.useEffect(()=>{g||v(s.map(T=>({id:T.lctExamId??T.id,examName:T.examName||T.title||"( )",examTypeLabel:T.examTypeName||T.examType||" ",startAt:T.startAt,endAt:T.endAt,value:T.weightValue!=null?String(T.weightValue):""})).filter(T=>T.id!=null))},[s,g]);const I=x.useCallback(()=>{i||s.length===0||(w(""),v(s.map(T=>({id:T.lctExamId??T.id,examName:T.examName||T.title||"( )",examTypeLabel:T.examTypeName||T.examType||" ",startAt:T.startAt,endAt:T.endAt,value:T.weightValue!=null?String(T.weightValue):""})).filter(T=>T.id!=null)),b(!0))},[s,i]),V=x.useCallback(()=>{A||(b(!1),w(""))},[A]),_=x.useCallback((T,W)=>{v(F=>F.map(Q=>{if(Q.id!==T)return Q;const O=W.replace(/[^0-9]/g,"").slice(0,3);if(O==="")return{...Q,value:""};const Y=Math.min(Number.parseInt(O,10)||0,100);return{...Q,value:String(Y)}})),w("")},[]),B=x.useMemo(()=>y.reduce((T,W)=>T+(Number.parseInt(W.value,10)||0),0),[y]),z=x.useCallback(async T=>{if(T.preventDefault(),A)return;if(!y.length){w("   .");return}const W=[];let F=0;for(const Q of y){const O=Number.parseInt(Q.value,10);if(!Q.id){w(" ID .");return}if(!Number.isInteger(O)||O<0||O>100){w(`${Q.examName}   0  100  .`);return}F+=O,W.push({lctExamId:Q.id,weightValue:O})}if(F!==100){w(`   ${F}. 100  .`);return}try{S(!0),w("");const Q=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/weightValue`,O=await fetch(Q,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(W)});if(!O.ok)throw new Error(`(${O.status})    .`);f({type:"success",message:"  ."}),b(!1),await E()}catch(Q){console.error("[Exam] Failed to update weight values:",Q),w(Q instanceof Error?Q.message:"    .")}finally{S(!1)}},[y,A,a,E]);x.useEffect(()=>{if(!h)return;const T=window.setTimeout(()=>f(null),4e3);return()=>window.clearTimeout(T)},[h]);const X=i||s.length===0||A;return e.jsxs("section",{id:"exam-root",className:"container py-0","data-lecture-id":a,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:""}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-primary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:" "}),e.jsxs("ul",{className:"dropdown-menu",children:[e.jsx("li",{children:e.jsx(qe,{className:"dropdown-item",to:`/classroom/professor/${encodeURIComponent(a)}/exam/offline/new`,children:"  "})}),e.jsx("li",{children:e.jsx("button",{className:"dropdown-item",type:"button",disabled:!0,children:"   ( )"})})]})]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:I,disabled:X,children:" "})]})]}),i&&e.jsx("div",{className:"text-muted",children:" ..."}),d&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(d.message||d)}),h&&!d&&e.jsx("div",{className:`alert mt-3 ${h.type==="success"?"alert-success":"alert-danger"}`,role:"alert",children:h.message}),!i&&!d&&e.jsxs("div",{className:"card shadow-sm p-0",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h5 mb-0",children:" "})}),e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("ul",{className:"nav nav-pills mb-3",id:"exam-status-tabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"exam-tab-all-btn","data-bs-toggle":"tab","data-bs-target":"#exam-tab-all",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"exam-count-all",children:$.all.length})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"exam-tab-upcoming-btn","data-bs-toggle":"tab","data-bs-target":"#exam-tab-upcoming",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"exam-count-upcoming",children:$.upcoming.length})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"exam-tab-ongoing-btn","data-bs-toggle":"tab","data-bs-target":"#exam-tab-ongoing",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"exam-count-ongoing",children:$.ongoing.length})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"exam-tab-closed-btn","data-bs-toggle":"tab","data-bs-target":"#exam-tab-closed",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"exam-count-closed",children:$.closed.length})]})})]}),e.jsxs("div",{className:"tab-content border-top",id:"exam-status-content",children:[e.jsx("div",{className:"tab-pane fade show active",id:"exam-tab-all",role:"tabpanel","aria-labelledby":"exam-tab-all-btn",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:$.all.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"  ."})}):$.all.map(T=>e.jsx(D,{...T},T.lctExamId||T.id))})]})})}),e.jsx("div",{className:"tab-pane fade",id:"exam-tab-upcoming",role:"tabpanel","aria-labelledby":"exam-tab-upcoming-btn",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:$.upcoming.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"  ."})}):$.upcoming.map(T=>e.jsx(D,{...T},T.lctExamId||T.id))})]})})}),e.jsx("div",{className:"tab-pane fade",id:"exam-tab-ongoing",role:"tabpanel","aria-labelledby":"exam-tab-ongoing-btn",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:$.ongoing.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"  ."})}):$.ongoing.map(T=>e.jsx(D,{...T},T.lctExamId||T.id))})]})})}),e.jsx("div",{className:"tab-pane fade",id:"exam-tab-closed",role:"tabpanel","aria-labelledby":"exam-tab-closed-btn",children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:" "}),e.jsx("th",{children:""}),e.jsx("th",{children:""}),e.jsx("th",{children:""})]})}),e.jsx("tbody",{children:$.closed.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"  ."})}):$.closed.map(T=>e.jsx(D,{...T},T.lctExamId||T.id))})]})})})]})]})]}),e.jsx(r2,{open:g,entries:y,total:B,error:C,saving:A,onChange:_,onSubmit:z,onClose:V})]})}const Qc=a=>String(a).padStart(2,"0"),wo=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${Qc(s.getMonth()+1)}-${Qc(s.getDate())} ${Qc(s.getHours())}:${Qc(s.getMinutes())}`},o2=(a,s)=>{const l=wo(a),i=wo(s);return l==="-"&&i==="-"?"-":i==="-"?l:`${l} ~ ${i}`},d2=a=>a==="OFF"?"":a==="ON"?"":a||" ",u2=a=>{if(!a)return"( )";const s=a.lastName||"",l=a.firstName||"",i=`${s} ${l}`.trim();return i||a.name||a.userName||a.userId||"( )"};function h2(){const{lectureId:a,examId:s}=dt(),{students:l}=cs(),i=rs(),[c,d]=x.useState(null),[u,h]=x.useState(!0),[f,g]=x.useState(null),[b,y]=x.useState(!1);x.useEffect(()=>{if(!a||!s){g(new Error(" ID   ID  .")),h(!1);return}let I=!0;return(async()=>{try{h(!0),g(null);const V=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/${encodeURIComponent(s)}`,_=await fetch(V,{headers:{Accept:"application/json"},credentials:"include"});if(!_.ok)throw new Error(`(${_.status})    .`);const B=await _.json();if(!I)return;d(B||null)}catch(V){if(!I)return;g(V)}finally{I&&h(!1)}})(),()=>{I=!1}},[a,s]);const v=x.useMemo(()=>{const I=new Map;if(Array.isArray(l))for(const V of l)V?.enrollId!==void 0&&V?.enrollId!==null&&I.set(String(V.enrollId),V);return I},[l]),C=x.useMemo(()=>Array.isArray(c?.submitList)?c.submitList:[],[c]),w=l===null,A=x.useMemo(()=>{let I=0;for(const V of C)V?.submit?.submitAt&&(I+=1);return{total:C.length||(Array.isArray(l)?l.length:0),submitted:I}},[C,l]),S=u||w,E=`/classroom/professor/${encodeURIComponent(a||"")}/exam`,$=async()=>{if(confirm("   ?"))try{y(!0);const I=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/${encodeURIComponent(s)}`,V=await fetch(I,{method:"DELETE",credentials:"include"});if(!V.ok){const _=await V.text().catch(()=>"");throw new Error(_||`(${V.status})   .`)}alert(" ."),i(E)}catch(I){alert(I instanceof Error?I.message:"    .")}finally{y(!1)}},D=()=>u?e.jsxs("div",{className:"text-center text-muted py-4",children:[e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):c?e.jsxs("dl",{className:"row mb-0",children:[e.jsx("dt",{className:"col-sm-3",children:""}),e.jsx("dd",{className:"col-sm-9",children:c.examName||"-"}),e.jsx("dt",{className:"col-sm-3",children:""}),e.jsx("dd",{className:"col-sm-9",children:d2(c.examType)}),e.jsx("dt",{className:"col-sm-3",children:" "}),e.jsx("dd",{className:"col-sm-9",children:c.examDesc||c.notice||"-"}),e.jsx("dt",{className:"col-sm-3",children:" "}),e.jsx("dd",{className:"col-sm-9",children:o2(c.startAt,c.endAt)}),e.jsx("dt",{className:"col-sm-3",children:" "}),e.jsx("dd",{className:"col-sm-9",children:typeof c.weightValue=="number"?c.weightValue:"-"}),e.jsx("dt",{className:"col-sm-3",children:""}),e.jsx("dd",{className:"col-sm-9",children:wo(c.createAt||c.createdAt)})]}):e.jsx("div",{className:"text-center py-4",children:"   ."});return e.jsxs("section",{id:"exam-detail-root",className:"container py-0","data-lecture-id":a,"data-exam-id":s,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",id:"exam-detail-title",children:c?.examName||" "}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(qe,{to:`/classroom/professor/${encodeURIComponent(a||"")}/exam/${encodeURIComponent(s||"")}/edit`,className:"btn btn-sm btn-outline-primary",children:""}),e.jsx("button",{onClick:$,disabled:b,className:"btn btn-sm btn-outline-danger",children:b?" ...":""}),e.jsx(qe,{to:E,className:"btn btn-sm btn-outline-secondary",children:""})]})]}),f?e.jsx("div",{className:"alert alert-danger",role:"alert",children:f?.message||"     ."}):null,e.jsxs("div",{className:"card shadow-sm mb-4 p-0",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h5 mb-0",children:" "})}),e.jsx("div",{className:"card-body p-3",id:"exam-info-body",children:D()})]}),e.jsxs("div",{className:"card shadow-sm p-0",children:[e.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[e.jsx("h2",{className:"h5 mb-0",children:"  "}),e.jsxs("small",{className:"text-muted",children:[": ",A.submitted," / ",A.total]})]}),e.jsx("div",{className:"card-body p-0",children:S?e.jsxs("div",{className:"text-center text-muted py-4",children:[e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):C.length===0?e.jsx("div",{className:"text-center text-muted py-4",children:"   ."}):e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",style:{width:120},children:""}),e.jsx("th",{scope:"col",children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:80},children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:160},children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:120},children:" "})]})}),e.jsx("tbody",{id:"student-results-body",children:C.map((I,V)=>{const _=v.get(String(I?.enrollId)),B=I?.submit?.modifiedScore??I?.submit?.autoScore??I?.submit?.score,z=B==null||B===""?"-":B,X=I?.submit?.submitAt?wo(I.submit.submitAt):"",T=I?.submit?.submitAt?" ":"";return e.jsxs("tr",{children:[e.jsx("td",{children:_?.studentNo||"-"}),e.jsx("td",{children:u2(_)}),e.jsx("td",{className:"text-center",children:z}),e.jsx("td",{className:"text-center",children:X}),e.jsx("td",{className:"text-center",children:T})]},I?.enrollId??I?.id??V)})})]})})})]})]})}const Zc=a=>String(a).padStart(2,"0"),Jc=a=>!(a instanceof Date)||Number.isNaN(a.getTime())?"":`${a.getFullYear()}-${Zc(a.getMonth()+1)}-${Zc(a.getDate())}T${Zc(a.getHours())}:${Zc(a.getMinutes())}`,Mb=a=>a?a.length===16?`${a}:00`:a:"",m2=a=>{const s=a?.lastName??"",l=a?.firstName??"";return`${s} ${l}`.trim()||a?.name||a?.userName||a?.userId||"(  )"},f2=a=>{const s=[];return a?.univDeptName&&s.push(a.univDeptName),a?.gradeName&&s.push(a.gradeName),s.join("  ")};function p2(){const{lectureId:a}=dt(),{students:s,setStudents:l}=cs(),i=rs(),[c,d]=x.useState(""),[u,h]=x.useState(""),[f,g]=x.useState(""),[b,y]=x.useState(""),[v,C]=x.useState(""),[w,A]=x.useState({}),[S,E]=x.useState([]),[$,D]=x.useState(""),[I,V]=x.useState(""),[_,B]=x.useState(!1),[z,X]=x.useState(!0),[T,W]=x.useState(""),[F,Q]=x.useState([]);x.useEffect(()=>{const q=new Date;q.setSeconds(0,0),g(Jc(q));const ee=new Date(q.getTime()+3600*1e3);y(Jc(ee))},[]),x.useEffect(()=>{if(Array.isArray(s)){Q(s),X(!1),W("");return}if(s===null&&a){let q=!0;return X(!0),W(""),(async()=>{try{const ee=await Gh(a);if(!q)return;Q(ee),l(ee),W("")}catch(ee){if(!q)return;Q([]),W(ee instanceof Error?ee.message:"   .")}finally{q&&X(!1)}})(),()=>{q=!1}}a||X(!1)},[a,s,l]),x.useEffect(()=>{A(q=>{const ee={};return F.forEach((te,me)=>{const oe=String(te?.enrollId??te?.enrollID??me);ee[oe]=Object.prototype.hasOwnProperty.call(q,oe)?q[oe]:""}),ee}),E([])},[F]);const O=x.useMemo(()=>F.length,[F]),Y=_||z||O===0,N=(q=!0)=>{d(""),h(""),C("");const ee=new Date;ee.setSeconds(0,0),g(Jc(ee));const te=new Date(ee.getTime()+3600*1e3);y(Jc(te)),A(()=>{const me={};return F.forEach((oe,be)=>{const J=String(oe?.enrollId??oe?.enrollID??be);me[J]=""}),me}),E([]),q&&(V(""),D(""))},M=q=>{q?.preventDefault?.(),N(!0)},L=()=>{Y||(A(q=>{const ee={...q};return F.forEach((te,me)=>{const oe=String(te?.enrollId??te?.enrollID??me);ee[oe]=String(Math.floor(Math.random()*101))}),ee}),E([]),D("   ."),V(""))},U=(q,ee)=>{A(te=>({...te,[q]:ee})),E(te=>te.includes(q)?te.filter(me=>me!==q):te)},P=()=>{D(""),V("")},k=()=>{const q=c.trim();if(!q)throw new Error(" .");const ee=u.trim();if(!ee)throw new Error("   .");const te=Mb(f),me=Mb(b);if(!te)throw new Error("   .");if(!me)throw new Error("   .");const oe=new Date(te),be=new Date(me);if(Number.isNaN(oe.getTime())||Number.isNaN(be.getTime()))throw new Error("    .");if(oe>be)throw new Error("      .");let J=null;if(v.trim().length>0){const ue=Number.parseInt(v,10);if(!Number.isInteger(ue)||ue<0||ue>100)throw new Error("  0  100   .");J=ue}if(F.length===0)throw new Error("    .");const re=[],Ee=F.map((ue,fe)=>{const Me=ue?.enrollId??ue?.enrollID;if(Me==null)throw new Error(" (enrollId)     .");const He=String(Me??fe),ge=(w[He]??"").trim();if(!ge)throw re.push(He),new Error("   .");const Le=Number.parseInt(ge,10);if(!Number.isInteger(Le)||Le<0||Le>100)throw re.push(He),new Error(" 0  100   .");return{enrollId:Me,score:Le}});E(re);const $e={examName:q,examDesc:ee,startAt:te,endAt:me,eachResultList:Ee};return J!==null&&($e.weightValue=J),$e},G=async q=>{if(q.preventDefault(),P(),E([]),!a){V(" ID  .");return}let ee;try{ee=k()}catch(me){const oe=me instanceof Error?me.message:" .";V(oe);return}const te=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/offline`;try{B(!0);const me=await fetch(te,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(ee)});if(!me.ok){const be=await me.text().catch(()=>"");throw new Error(be||`(${me.status})  .`)}const oe=me.headers.get("location");oe?i(oe):(D("  ."),N(!1))}catch(me){const oe=me instanceof Error?me.message:"    .";V(oe)}finally{B(!1)}},se=x.useMemo(()=>z?e.jsxs("div",{className:"text-center text-muted py-4",children:[e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):T?e.jsx("div",{className:"alert alert-danger mb-0",role:"alert",children:T}):O===0?e.jsx("div",{className:"text-center text-muted py-4",children:"   ."}):null,[O,T,z]);return e.jsxs("section",{id:"exam-offline-root",className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{to:`/classroom/professor/${encodeURIComponent(a||"")}/exam`,children:""})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:"  "})]})}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(a||"")}/exam`,children:""})})]}),I&&e.jsx("div",{id:"alert-box",className:"alert alert-danger",role:"alert",children:I}),$&&e.jsx("div",{id:"toast-box",className:"alert alert-success",role:"alert",children:$}),e.jsxs("form",{id:"exam-offline-form",className:"vstack gap-4",onSubmit:G,onReset:M,children:[e.jsxs("div",{className:"card shadow-sm p-0",children:[e.jsx("div",{className:"card-header",children:e.jsx("strong",{children:" "})}),e.jsxs("div",{className:"card-body p-3 vstack gap-3",children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-lg-6",children:[e.jsxs("label",{htmlFor:"exam-name",className:"form-label d-block text-start",children:[" ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"exam-name",type:"text",className:"form-control",required:!0,maxLength:100,disabled:_,value:c,onChange:q=>d(q.target.value),placeholder:": 2 "})]}),e.jsxs("div",{className:"col-12 col-lg-6",children:[e.jsxs("label",{htmlFor:"exam-weight",className:"form-label d-block text-start",children:[" (%) ",e.jsx("span",{className:"text-muted",children:"()"})]}),e.jsx("input",{id:"exam-weight",type:"number",className:"form-control",min:0,max:100,step:1,disabled:_,value:v,onChange:q=>C(q.target.value),placeholder:"0~100  "}),e.jsx("div",{className:"form-text",children:" 100%   ."})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"exam-desc",className:"form-label d-block text-start",children:["  ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("textarea",{id:"exam-desc",className:"form-control",rows:3,required:!0,disabled:_,value:u,onChange:q=>h(q.target.value),placeholder:" , ,    ."})]}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsxs("label",{htmlFor:"exam-start",className:"form-label d-block text-start",children:["   ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"exam-start",type:"datetime-local",className:"form-control",required:!0,disabled:_,value:f,onChange:q=>g(q.target.value)})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsxs("label",{htmlFor:"exam-end",className:"form-label d-block text-start",children:["   ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"exam-end",type:"datetime-local",className:"form-control",required:!0,disabled:_,value:b,onChange:q=>y(q.target.value)}),e.jsx("div",{className:"form-text",children:"     ."})]})]})]})]}),e.jsxs("div",{className:"card shadow-sm p-0",children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"  "}),e.jsx("small",{className:"text-muted ms-2",children:"* 0~100  "})]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:L,disabled:Y,children:"  "})]}),e.jsx("div",{className:"card-body p-3",children:se||e.jsx("div",{className:"row row-cols-1 row-cols-md-3 row-cols-lg-5 g-3",children:F.map((q,ee)=>{const te=String(q?.enrollId??q?.enrollID??ee),me=S.includes(te),oe=f2(q);return e.jsx("div",{className:"col",children:e.jsx("div",{className:"card h-100 shadow-sm",children:e.jsxs("div",{className:"card-body p-2",children:[e.jsxs("div",{className:"fw-semibold",children:["#",ee+1," ",m2(q)]}),e.jsxs("div",{className:"text-muted small",children:["(",q?.studentNo||" ",")"]}),oe&&e.jsx("div",{className:"text-muted small",children:oe}),e.jsxs("div",{className:"mt-2 d-flex align-items-center gap-2",children:[e.jsx("label",{htmlFor:`score-${te}`,className:"form-label mb-0 small fw-bold",children:":"}),e.jsx("input",{id:`score-${te}`,type:"number",min:0,max:100,className:`form-control form-control-sm${me?" is-invalid":""}`,style:{width:"80px"},disabled:_,value:w[te]??"",onChange:be=>U(te,be.target.value)})]}),me&&e.jsx("div",{className:"invalid-feedback d-block small mt-1",children:"0-100  "})]})})},te)})})})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"reset",className:"btn btn-outline-secondary",disabled:_,children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:_||O===0,children:_?" ...":"  "})]})]})]})}const eo=a=>String(a).padStart(2,"0"),Rb=a=>!(a instanceof Date)||Number.isNaN(a.getTime())?"":`${a.getFullYear()}-${eo(a.getMonth()+1)}-${eo(a.getDate())}T${eo(a.getHours())}:${eo(a.getMinutes())}`,$b=a=>a?a.length===16?`${a}:00`:a:"";function g2(){const{lectureId:a,examId:s}=dt(),l=rs(),[i,c]=x.useState(""),[d,u]=x.useState(""),[h,f]=x.useState(""),[g,b]=x.useState(""),[y,v]=x.useState(""),[C,w]=x.useState(""),[A,S]=x.useState(""),[E,$]=x.useState(!1),[D,I]=x.useState(!0);x.useEffect(()=>{if(!a||!s){S(" ID   ID  ."),I(!1);return}let X=!0;return(async()=>{try{I(!0),S("");const T=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/${encodeURIComponent(s)}`,W=await fetch(T,{headers:{Accept:"application/json"},credentials:"include"});if(!W.ok)throw new Error(`(${W.status})    .`);const F=await W.json();if(!X)return;if(c(F.examName||""),u(F.examDesc||F.notice||""),v(typeof F.weightValue=="number"?String(F.weightValue):""),F.startAt){const Q=new Date(F.startAt);Number.isNaN(Q.getTime())||f(Rb(Q))}if(F.endAt){const Q=new Date(F.endAt);Number.isNaN(Q.getTime())||b(Rb(Q))}}catch(T){if(!X)return;S(T instanceof Error?T.message:"     .")}finally{X&&I(!1)}})(),()=>{X=!1}},[a,s]);const V=()=>{w(""),S("")},_=()=>{const X=i.trim();if(!X)throw new Error(" .");const T=d.trim();if(!T)throw new Error("  .");const W=$b(h),F=$b(g);if(!W)throw new Error("   .");if(!F)throw new Error("   .");const Q=new Date(W),O=new Date(F);if(Number.isNaN(Q.getTime())||Number.isNaN(O.getTime()))throw new Error("    .");if(Q>O)throw new Error("      .");let Y=null;if(y.trim().length>0){const M=Number.parseInt(y,10);if(!Number.isInteger(M)||M<0||M>100)throw new Error("  0  100   .");Y=M}const N={examName:X,examDesc:T,startAt:W,endAt:F};return Y!==null&&(N.weightValue=Y),N},B=async X=>{if(X.preventDefault(),V(),!a||!s){S(" ID   ID  .");return}let T;try{T=_()}catch(F){const Q=F instanceof Error?F.message:" .";S(Q);return}const W=`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/${encodeURIComponent(s)}`;try{$(!0);const F=await fetch(W,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(T)});if(!F.ok){const Q=await F.text().catch(()=>"");throw new Error(Q||`(${F.status})  .`)}w(" ."),setTimeout(()=>{l(`/classroom/professor/${encodeURIComponent(a)}/exam/${encodeURIComponent(s)}`)},1e3)}catch(F){const Q=F instanceof Error?F.message:"    .";S(Q)}finally{$(!1)}},z=`/classroom/professor/${encodeURIComponent(a||"")}/exam/${encodeURIComponent(s||"")}`;return e.jsxs("section",{id:"exam-edit-root",className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{to:`/classroom/professor/${encodeURIComponent(a||"")}/exam`,children:""})}),e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{to:z,children:" "})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:""})]})}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",to:z,children:""})})]}),A&&e.jsx("div",{id:"alert-box",className:"alert alert-danger",role:"alert",children:A}),C&&e.jsx("div",{id:"toast-box",className:"alert alert-success",role:"alert",children:C}),D?e.jsxs("div",{className:"text-center text-muted py-4",children:[e.jsx("div",{className:"spinner-border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"Loading..."})}),e.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):e.jsxs("form",{id:"exam-edit-form",className:"vstack gap-4",onSubmit:B,children:[e.jsxs("div",{className:"card shadow-sm p-0",children:[e.jsx("div",{className:"card-header",children:e.jsx("strong",{children:" "})}),e.jsxs("div",{className:"card-body p-3 vstack gap-3",children:[e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-lg-6",children:[e.jsxs("label",{htmlFor:"exam-name",className:"form-label d-block text-start",children:[" ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"exam-name",type:"text",className:"form-control",required:!0,maxLength:100,disabled:E,value:i,onChange:X=>c(X.target.value),placeholder:": 2 "})]}),e.jsxs("div",{className:"col-12 col-lg-6",children:[e.jsxs("label",{htmlFor:"exam-weight",className:"form-label d-block text-start",children:[" (%) ",e.jsx("span",{className:"text-muted",children:"()"})]}),e.jsx("input",{id:"exam-weight",type:"number",className:"form-control",min:0,max:100,step:1,disabled:E,value:y,onChange:X=>v(X.target.value),placeholder:"0~100  "}),e.jsx("div",{className:"form-text",children:" 100%   ."})]})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"exam-desc",className:"form-label d-block text-start",children:["  ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("textarea",{id:"exam-desc",className:"form-control",rows:3,required:!0,disabled:E,value:d,onChange:X=>u(X.target.value),placeholder:" , ,    ."})]}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsxs("label",{htmlFor:"exam-start",className:"form-label d-block text-start",children:["   ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"exam-start",type:"datetime-local",className:"form-control",required:!0,disabled:E,value:h,onChange:X=>f(X.target.value)})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsxs("label",{htmlFor:"exam-end",className:"form-label d-block text-start",children:["   ",e.jsx("span",{className:"text-danger",children:"*"})]}),e.jsx("input",{id:"exam-end",type:"datetime-local",className:"form-control",required:!0,disabled:E,value:g,onChange:X=>b(X.target.value)}),e.jsx("div",{className:"form-text",children:"     ."})]})]})]})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[e.jsx(qe,{to:z,className:"btn btn-outline-secondary",disabled:E,children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:E,children:E?" ...":" "})]})]})]})}const Co=a=>{if(!a)return"-";const s=new Date(a);if(Number.isNaN(s.getTime()))return"-";const l=i=>String(i).padStart(2,"0");return`${s.getFullYear()}-${l(s.getMonth()+1)}-${l(s.getDate())} ${l(s.getHours())}:${l(s.getMinutes())}`},Ps=(a,s)=>{const l=Date.now(),i=a?new Date(a).getTime():null,c=s?new Date(s).getTime():null;if(i&&i>l)return"upcoming";if(i&&i<=l){if(!c||c>=l)return"ongoing";if(c<l)return"closed"}return"ongoing"};function x2({open:a,entries:s,total:l,error:i,saving:c,onChange:d,onSubmit:u,onClose:h}){return x.useEffect(()=>{if(!a)return;const f=document.body.style.overflow,g=b=>{b.key==="Escape"&&h()};return document.body.style.overflow="hidden",document.addEventListener("keydown",g),()=>{document.body.style.overflow=f,document.removeEventListener("keydown",g)}},[a,h]),a?nr.createPortal(e.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"task-weight-modal-title",style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.45)",zIndex:1050,display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"},onClick:f=>{f.target===f.currentTarget&&h()},children:e.jsx("div",{className:"card shadow-lg",style:{width:"min(800px, 100%)",maxHeight:"90vh"},onClick:f=>f.stopPropagation(),children:e.jsxs("form",{onSubmit:u,style:{display:"flex",flexDirection:"column",maxHeight:"90vh"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h5 mb-0",id:"task-weight-modal-title",children:"   "}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"",onClick:h,disabled:c})]}),i&&e.jsx("div",{className:"alert alert-danger m-3 mb-0",role:"alert",children:i}),e.jsx("div",{className:"card-body p-0",style:{overflowY:"auto",flex:"1 1 auto"},children:e.jsxs("table",{className:"table table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#f8f9fa"},children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",style:{width:56},children:"#"}),e.jsx("th",{scope:"col",children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:200},children:" "}),e.jsx("th",{scope:"col",className:"text-end",style:{width:160},children:" "})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"  ."})}):s.map((f,g)=>{const b=f.startAt?Co(f.startAt):"-",y=f.endAt?Co(f.endAt):"-";return e.jsxs("tr",{children:[e.jsxs("td",{className:"text-muted",children:["#",g+1]}),e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold text-truncate",title:f.taskName,children:f.taskName}),e.jsx("div",{className:"text-muted small",children:f.taskType==="INDIV"?"":""})]}),e.jsxs("td",{className:"text-center text-muted small",children:[b," ~ ",y]}),e.jsx("td",{className:"text-end",children:e.jsx("input",{type:"number",min:0,max:100,className:"form-control form-control-sm text-end",value:f.value??"",onChange:v=>d(f.taskId,v.target.value),disabled:c,placeholder:"0"})})]},f.taskId||g)})})]})}),e.jsxs("div",{className:"card-footer d-flex flex-column flex-sm-row align-items-sm-center justify-content-between gap-2",children:[e.jsxs("div",{className:"fw-semibold",children:["  :",e.jsx("span",{className:l===100?"text-success":"text-danger",children:l})]}),e.jsx("div",{className:"text-muted small flex-grow-1 text-sm-end",children:"   100  ."}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:h,disabled:c,children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:c||s.length===0,children:c?" ...":""})]})]})]})})}),document.body):null}const b2=a=>{if(!a)return{line1:"-",line2:""};const s=new Date(a);if(Number.isNaN(s.getTime()))return{line1:"-",line2:""};const l=f=>String(f).padStart(2,"0"),i=String(s.getFullYear()).slice(2),c=l(s.getMonth()+1),d=l(s.getDate()),u=l(s.getHours()),h=l(s.getMinutes());return{line1:`${i}/${c}/${d}`,line2:`${u}:${h}`}},dn=({t:a,lectureId:s,kind:l,weightValue:i})=>{const c=a.title||a.taskName||a.indivtaskName||a.grouptaskName||"( )",d=Co(a.startAt),u=Co(a.endAt),h=b2(a.createAt||a.createdAt),f=a.indivtaskId||a.id||a.taskId,g=a.grouptaskId||a.id||a.taskId,b=l==="indiv"?`/classroom/professor/${encodeURIComponent(s)}/task/indiv/${encodeURIComponent(f||"")}`:`/classroom/professor/${encodeURIComponent(s)}/task/group/${encodeURIComponent(g||"")}`,y=!!(a.attachFileId||a.fileId||Array.isArray(a.attachFileList)&&a.attachFileList.length>0),v=i!=null&&i!==0?e.jsx("span",{className:"badge bg-primary",children:i}):e.jsx("span",{className:"badge bg-secondary",children:"X"});return e.jsxs("tr",{children:[e.jsx("td",{children:e.jsxs(qe,{to:b,className:"text-reset text-decoration-none",children:[e.jsxs("div",{className:"d-flex align-items-center gap-1",children:[y&&e.jsx("i",{className:"bx bx-paperclip text-muted"}),e.jsx("div",{className:"fw-semibold text-truncate",style:{maxWidth:"380px"},title:c,children:c})]}),e.jsxs("div",{className:"text-muted small",children:[d," ~ ",u]})]})}),e.jsx("td",{className:"text-center",children:v}),e.jsxs("td",{className:"text-muted small text-center",children:[e.jsx("div",{children:h.line1}),e.jsx("div",{children:h.line2})]})]})};function y2(){const{lectureId:a}=dt(),[s,l]=x.useState([]),[i,c]=x.useState([]),[d,u]=x.useState({}),[h,f]=x.useState(!0),[g,b]=x.useState(null),[y,v]=x.useState(!1),[C,w]=x.useState([]),[A,S]=x.useState(""),[E,$]=x.useState(!1);x.useEffect(()=>{let O=!0;return(async()=>{try{f(!0),b(null);const Y=`/classroom/api/v1/professor/task/${encodeURIComponent(a)}`,[N,M,L]=await Promise.all([fetch(`${Y}/indiv`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${Y}/group`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${Y}/weight`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!N.ok||!M.ok)throw new Error("   .");const[U,P,k]=await Promise.all([N.json(),M.json(),L.ok?L.json():[]]);if(!O)return;l(Array.isArray(U)?U:[]),c(Array.isArray(P)?P:[]);const G={};Array.isArray(k)&&k.forEach(se=>{se.taskId&&(G[se.taskId]=se.weightValue)}),u(G)}catch(Y){if(!O)return;b(Y)}finally{O&&f(!1)}})(),()=>{O=!1}},[a]);const D=x.useMemo(()=>s.filter(O=>Ps(O.startAt,O.endAt)==="upcoming").length,[s]),I=x.useMemo(()=>s.filter(O=>Ps(O.startAt,O.endAt)==="ongoing").length,[s]),V=x.useMemo(()=>s.filter(O=>Ps(O.startAt,O.endAt)==="closed").length,[s]),_=x.useMemo(()=>i.filter(O=>Ps(O.startAt,O.endAt)==="upcoming").length,[i]),B=x.useMemo(()=>i.filter(O=>Ps(O.startAt,O.endAt)==="ongoing").length,[i]),z=x.useMemo(()=>i.filter(O=>Ps(O.startAt,O.endAt)==="closed").length,[i]),X=x.useMemo(()=>C.reduce((O,Y)=>O+(parseInt(Y.value)||0),0),[C]),T=x.useCallback(()=>{S("");const O=[];s.forEach(Y=>{const N=Y.indivtaskId||Y.id||Y.taskId,M=Y.indivtaskName||Y.taskName||"( )";O.push({taskType:"INDIV",taskId:N,taskName:M,startAt:Y.startAt,endAt:Y.endAt,value:d[N]??null})}),i.forEach(Y=>{const N=Y.grouptaskId||Y.id||Y.taskId,M=Y.grouptaskName||Y.taskName||"( )";O.push({taskType:"GROUP",taskId:N,taskName:M,startAt:Y.startAt,endAt:Y.endAt,value:d[N]??null})}),w(O),v(!0)},[s,i,d]),W=x.useCallback(()=>{v(!1),S("")},[]),F=x.useCallback((O,Y)=>{w(N=>N.map(M=>M.taskId===O?{...M,value:Y===""?null:parseInt(Y)||0}:M))},[]),Q=x.useCallback(async O=>{O.preventDefault(),S(""),$(!0);try{const Y=C.map(P=>({taskType:P.taskType,taskId:P.taskId,weightValue:P.value}));console.log("Submitting task weights:",Y);const N=await fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(a)}/weight`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Y)});if(!N.ok)throw new Error(`  (HTTP ${N.status})`);const M=await fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(a)}/weight`,{headers:{Accept:"application/json"},credentials:"include"}),L=M.ok?await M.json():[],U={};Array.isArray(L)&&L.forEach(P=>{P.taskId&&(U[P.taskId]=P.weightValue)}),u(U),v(!1)}catch(Y){S(Y.message||"   .")}finally{$(!1)}},[C,a]);return e.jsxs("section",{id:"task-root",className:"container py-0","data-lecture-id":a,children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h3 mb-0",children:""}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsxs("div",{className:"btn-group",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-primary dropdown-toggle","data-bs-toggle":"dropdown","aria-expanded":"false",children:" "}),e.jsxs("ul",{className:"dropdown-menu",children:[e.jsx("li",{children:e.jsx(qe,{className:"dropdown-item",to:`/classroom/professor/${encodeURIComponent(a)}/task/indiv/new`,children:" "})}),e.jsx("li",{children:e.jsx(qe,{className:"dropdown-item",to:`/classroom/professor/${encodeURIComponent(a)}/task/group/new`,children:" "})})]})]}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:T,disabled:s.length===0&&i.length===0,children:" "})]})]}),h&&e.jsx("div",{className:"text-muted",children:" "}),g&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(g.message||g)}),!h&&!g&&e.jsxs("div",{className:"row g-4 align-items-start",children:[e.jsx("div",{className:"col-12 col-xl-6",children:e.jsxs("div",{className:"card shadow-sm",children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h5 mb-0",children:" "}),e.jsx("div",{className:"small text-muted",children:": /"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("ul",{className:"nav nav-pills mb-3",id:"indiv-status-tabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"indiv-all-tab","data-bs-toggle":"tab","data-bs-target":"#indiv-all",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"indiv-count-all",children:s.length})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"indiv-upcoming-tab","data-bs-toggle":"tab","data-bs-target":"#indiv-upcoming",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"indiv-count-upcoming",children:D})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"indiv-ongoing-tab","data-bs-toggle":"tab","data-bs-target":"#indiv-ongoing",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"indiv-count-ongoing",children:I})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"indiv-closed-tab","data-bs-toggle":"tab","data-bs-target":"#indiv-closed",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"indiv-count-closed",children:V})]})})]}),e.jsxs("div",{className:"tab-content",id:"indiv-status-content",children:[e.jsxs("div",{id:"indiv-all",className:"tab-pane fade show active",role:"tabpanel","aria-labelledby":"indiv-all-tab",children:[e.jsx("div",{id:"indiv-list-all",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:""})]})}),e.jsx("tbody",{children:s.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center text-muted py-4",children:"  ."})}):s.map((O,Y)=>{const N=O.indivtaskId||O.id||O.taskId;return e.jsx(dn,{t:O,lectureId:a,kind:"indiv",weightValue:d[N]},N||Y)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"indiv-pagination-all",className:"pagination pagination-sm mb-0"})})]}),e.jsxs("div",{id:"indiv-upcoming",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"indiv-upcoming-tab",children:[e.jsx("div",{id:"indiv-list-upcoming",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:""})]})}),e.jsx("tbody",{children:s.filter(O=>Ps(O.startAt,O.endAt)==="upcoming").map((O,Y)=>{const N=O.indivtaskId||O.id||O.taskId;return e.jsx(dn,{t:O,lectureId:a,kind:"indiv",weightValue:d[N]},N||Y)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"indiv-pagination-upcoming",className:"pagination pagination-sm mb-0"})})]}),e.jsxs("div",{id:"indiv-ongoing",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"indiv-ongoing-tab",children:[e.jsx("div",{id:"indiv-list-ongoing",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:""})]})}),e.jsx("tbody",{children:s.filter(O=>Ps(O.startAt,O.endAt)==="ongoing").map((O,Y)=>{const N=O.indivtaskId||O.id||O.taskId;return e.jsx(dn,{t:O,lectureId:a,kind:"indiv",weightValue:d[N]},N||Y)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"indiv-pagination-ongoing",className:"pagination pagination-sm mb-0"})})]}),e.jsxs("div",{id:"indiv-closed",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"indiv-closed-tab",children:[e.jsx("div",{id:"indiv-list-closed",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:""})]})}),e.jsx("tbody",{children:s.filter(O=>Ps(O.startAt,O.endAt)==="closed").map((O,Y)=>{const N=O.indivtaskId||O.id||O.taskId;return e.jsx(dn,{t:O,lectureId:a,kind:"indiv",weightValue:d[N]},N||Y)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"indiv-pagination-closed",className:"pagination pagination-sm mb-0"})})]})]})]})]})}),e.jsx("div",{className:"col-12 col-xl-6",children:e.jsxs("div",{className:"card shadow-sm",children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h2",{className:"h5 mb-0",children:" "}),e.jsx("div",{className:"small text-muted",children:": /"})]}),e.jsxs("div",{className:"card-body",children:[e.jsxs("ul",{className:"nav nav-pills mb-3",id:"group-status-tabs",role:"tablist",children:[e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link active",id:"group-all-tab","data-bs-toggle":"tab","data-bs-target":"#group-all",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"group-count-all",children:i.length})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"group-upcoming-tab","data-bs-toggle":"tab","data-bs-target":"#group-upcoming",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"group-count-upcoming",children:_})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"group-ongoing-tab","data-bs-toggle":"tab","data-bs-target":"#group-ongoing",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"group-count-ongoing",children:B})]})}),e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:"nav-link",id:"group-closed-tab","data-bs-toggle":"tab","data-bs-target":"#group-closed",type:"button",role:"tab",children:[" ",e.jsx("span",{className:"badge bg-secondary ms-1",id:"group-count-closed",children:z})]})})]}),e.jsxs("div",{className:"tab-content",id:"group-status-content",children:[e.jsxs("div",{id:"group-all",className:"tab-pane fade show active",role:"tabpanel","aria-labelledby":"group-all-tab",children:[e.jsx("div",{id:"group-list-all",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:""})]})}),e.jsx("tbody",{children:i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:3,className:"text-center text-muted py-4",children:"  ."})}):i.map((O,Y)=>{const N=O.grouptaskId||O.id||O.taskId;return e.jsx(dn,{t:O,lectureId:a,kind:"group",weightValue:d[N]},N||Y)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"group-pagination-all",className:"pagination pagination-sm mb-0"})})]}),e.jsxs("div",{id:"group-upcoming",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"group-upcoming-tab",children:[e.jsx("div",{id:"group-list-upcoming",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:""})]})}),e.jsx("tbody",{children:i.filter(O=>Ps(O.startAt,O.endAt)==="upcoming").map((O,Y)=>{const N=O.grouptaskId||O.id||O.taskId;return e.jsx(dn,{t:O,lectureId:a,kind:"group",weightValue:d[N]},N||Y)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"group-pagination-upcoming",className:"pagination pagination-sm mb-0"})})]}),e.jsxs("div",{id:"group-ongoing",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"group-ongoing-tab",children:[e.jsx("div",{id:"group-list-ongoing",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:""})]})}),e.jsx("tbody",{children:i.filter(O=>Ps(O.startAt,O.endAt)==="ongoing").map((O,Y)=>{const N=O.grouptaskId||O.id||O.taskId;return e.jsx(dn,{t:O,lectureId:a,kind:"group",weightValue:d[N]},N||Y)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"group-pagination-ongoing",className:"pagination pagination-sm mb-0"})})]}),e.jsxs("div",{id:"group-closed",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"group-closed-tab",children:[e.jsx("div",{id:"group-list-closed",className:"table-responsive",children:e.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{children:""}),e.jsx("th",{className:"text-center",style:{width:100},children:""}),e.jsx("th",{className:"text-center",style:{width:120},children:""})]})}),e.jsx("tbody",{children:i.filter(O=>Ps(O.startAt,O.endAt)==="closed").map((O,Y)=>{const N=O.grouptaskId||O.id||O.taskId;return e.jsx(dn,{t:O,lectureId:a,kind:"group",weightValue:d[N]},N||Y)})})]})}),e.jsx("nav",{className:"mt-3","aria-label":"    ",children:e.jsx("ul",{id:"group-pagination-closed",className:"pagination pagination-sm mb-0"})})]})]})]})]})})]}),e.jsx("div",{id:"task-notice-box",className:"alert alert-danger mt-3 d-none",role:"alert"}),e.jsx(x2,{open:y,entries:C,total:X,error:A,saving:E,onChange:F,onSubmit:Q,onClose:W})]})}const to=a=>String(a).padStart(2,"0"),Xi=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?a:`${s.getFullYear()}-${to(s.getMonth()+1)}-${to(s.getDate())} ${to(s.getHours())}:${to(s.getMinutes())}`};function v2(){const{lectureId:a,indivtaskId:s}=dt(),l=rs(),i="/classroom/api/v1/professor",c="/classroom/api/v1/professor/task",[d,u]=x.useState(null),[h,f]=x.useState([]),[g,b]=x.useState(!0),[y,v]=x.useState(null),[C,w]=x.useState(!1),[A,S]=x.useState(!1),[E,$]=x.useState(null),[D,I]=x.useState(null),V=x.useMemo(()=>`/classroom/professor/${encodeURIComponent(a||"")}/task`,[a]),_=x.useMemo(()=>`${V}/indiv/${encodeURIComponent(s||"")}/edit`,[V,s]);x.useEffect(()=>{let U=!0;return(async()=>{try{b(!0),v(null);const[P,k]=await Promise.all([fetch(`${i}/${encodeURIComponent(a)}/students`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${c}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!P.ok||!k.ok)throw new Error("    .");const[G,se]=await Promise.all([P.json(),k.json()]);if(!U)return;f(Array.isArray(G)?G:[]),u(se||null)}catch(P){if(!U)return;v(P)}finally{U&&b(!1)}})(),()=>{U=!1}},[a,s]);const B=x.useMemo(()=>new Map((d?.studentSubmitList||[]).map(U=>[U.enrollId,U])),[d]),z=x.useMemo(()=>{const U=[],P=new Set;for(const k of h){const G=B.get(k.enrollId);G?.submitAt&&U.push({student:k,submission:G}),P.add(k.enrollId)}for(const k of d?.studentSubmitList||[])!P.has(k.enrollId)&&k.submitAt&&U.push({student:null,submission:k});return U},[h,B,d]),X=x.useMemo(()=>{const U=[];for(const P of h){const k=B.get(P.enrollId);k?.submitAt||U.push({student:P,submission:k||null})}return U},[h,B]),T=h.length,W=z.length,F=U=>U?{name:`${U.lastName||""}${U.firstName||""}`||U.name||U.userId||"( )",number:U.studentNo||""}:{name:"( )",number:""},Q=x.useMemo(()=>{if(X.length===0)return null;const{name:U,number:P}=F(X[0].student);return{label:P?`${U} (${P})`:U,rest:X.length-1}},[X]),O=x.useMemo(()=>{if(!Q)return"";const U=Q.rest>0?`  ${Q.rest}`:"";return`${Q.label}${U}`},[Q]),Y=async()=>{if(window.confirm("?"))try{w(!0);const U=await fetch(`${c}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}`,{method:"DELETE",credentials:"include"});if(!U.ok&&U.status!==204)throw new Error(`(${U.status})  `);alert("."),l(V)}catch(U){alert(U.message||String(U))}finally{w(!1)}},N=async(U,P,k,G)=>{try{G(!0);const se={enrollId:U,evaluScore:Number(P),evaluDesc:k};if(!Number.isFinite(se.evaluScore)||se.evaluScore<0||se.evaluScore>100){alert(" 0~100   .");return}const q=`${c}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}/eval`,ee=await fetch(q,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(se)});if(!ee.ok)throw new Error(`(${ee.status})  `);alert(".");const te=await fetch(`${c}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}`,{headers:{Accept:"application/json"},credentials:"include"});if(te.ok){const me=await te.json();u(me||null)}}catch(se){alert(se.message||String(se))}finally{G(!1)}},M=(U,P)=>{I(U),$(P)},L=()=>{I(null),$(null)};return e.jsxs("section",{id:"indivtask-post-root",className:"container-fluid",style:{display:"flex",flexDirection:"column",padding:"1rem",maxHeight:"100vh"},children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{id:"bc-task",to:V,children:""})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:""})]})}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",id:"btn-list",to:V,children:""})})]}),e.jsx("div",{style:{display:"flex",flexDirection:"row",gap:"0.75rem",height:"70vh",minHeight:0},children:g?e.jsx("div",{className:"card shadow-sm",style:{flex:1},children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start flex-wrap mb-2",children:[e.jsx("span",{className:"badge skeleton",style:{width:64,height:22}}),e.jsx("span",{className:"badge skeleton ms-2",style:{width:56,height:22}})]}),e.jsx("h1",{className:"h4 mb-3 skeleton",style:{width:"60%",height:"1.5rem"}}),e.jsxs("div",{className:"d-flex flex-wrap meta-list mb-3",children:[e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"task-content mb-4",children:e.jsx("div",{className:"skeleton",style:{height:"8rem"}})})]})}):y?e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(y.message||y)}):d?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card shadow-sm",style:{flex:"3",minHeight:0,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"badge text-bg-primary",children:""}),e.jsx("h1",{className:"h5 mb-0",children:d.indivtaskName||"( )"})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("a",{className:"btn btn-sm btn-primary",id:"btn-edit-task",href:_,role:"button",children:""}),e.jsx("button",{className:"btn btn-sm btn-danger",id:"btn-delete-task",type:"button",onClick:Y,disabled:C,children:C?"":""})]})]}),e.jsxs("div",{className:"card-body",style:{overflow:"auto",flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"d-flex flex-wrap gap-3 text-muted small mb-3",children:[e.jsxs("div",{children:[": ",e.jsx("span",{className:"text-body-secondary",children:Xi(d.createAt)})]}),e.jsxs("div",{children:[": ",e.jsx("span",{className:"text-body-secondary",children:Xi(d.startAt)})]}),e.jsxs("div",{children:[": ",e.jsx("span",{className:"text-body-secondary",children:Xi(d.endAt)})]})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"task-content mb-4",style:{flex:1},dangerouslySetInnerHTML:{__html:d.indivtaskDesc||""}})]}),Array.isArray(d.attachFileList)&&d.attachFileList.length>0&&e.jsxs("div",{className:"card-footer",id:"attach-area",children:[e.jsx("h2",{className:"h6 mb-2",children:""}),e.jsx("ul",{className:"list-group list-group-flush",id:"attach-list",children:d.attachFileList.map((U,P)=>{const k=U.fileOrder??U.order,G=U.originalFileName||U.originName||` ${k??P}`,se=typeof U.fileSize=="number"?`(${(U.fileSize/1024).toFixed(2)} KB)`:"",q=k!=null?`/classroom/api/v1/common/task/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}/attach/${encodeURIComponent(k)}`:void 0;return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",children:[e.jsx("i",{className:"bi bi-paperclip"})," ",G," ",se&&e.jsx("small",{className:"text-muted",children:se})]}),q?e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:q,children:""}):e.jsx("span",{className:"text-muted small",children:" "})]},`${k??P}`)})})]})]}),e.jsxs("div",{className:"card shadow-sm",style:{flex:"2",minHeight:0,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h3",{className:"h5 mb-0",children:" "}),e.jsxs("span",{className:"text-muted",children:[W," / ",T]})]}),e.jsx("div",{className:"card-body",style:{overflow:"auto",padding:0},children:e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-hover align-middle mb-0",children:[e.jsx("thead",{className:"table-light",style:{position:"sticky",top:0,zIndex:1},children:e.jsxs("tr",{children:[e.jsx("th",{style:{width:"55%"},className:"text-center",children:""}),e.jsx("th",{style:{width:"30%"},className:"text-center",children:""}),e.jsx("th",{style:{width:"15%"},className:"text-center",children:""})]})}),e.jsx("tbody",{children:z.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center text-muted py-3",children:"  ."})}):z.map(({student:U,submission:P},k)=>{const G=`${U?.lastName||""}${U?.firstName||""}`||U?.name||U?.userId||"( )",se=U?.univDeptName||"",q=U?.gradeName||"",ee=[se,q].filter(Boolean).join(", "),te=ee?`${G} (${ee})`:G,me=P?.submitAt?Xi(P.submitAt):"-";(P?.submitFiles||[]).some(J=>J&&(J.fileId||J.originName||J.originalFileName));const be=P?.evaluScore!=null?P.evaluScore:"-";return e.jsxs("tr",{onClick:()=>M(U,P),style:{cursor:"pointer"},children:[e.jsx("td",{className:"text-center",children:te}),e.jsx("td",{className:"text-center",children:me}),e.jsx("td",{className:"text-center",children:be})]},`${P?.enrollId||k}`)})})]})})}),e.jsx("div",{className:"card-footer",children:e.jsxs("div",{className:"text-muted small",children:["  : ",X.length===0?"":O]})})]})]}):null}),E&&e.jsx(j2,{student:D,submission:E,lectureId:a,indivtaskId:s,onClose:L,onEvalSubmit:N,toStudentLabel:F,fmtDateTime:Xi}),y&&e.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:y})]})}function j2({student:a,submission:s,lectureId:l,indivtaskId:i,onClose:c,onEvalSubmit:d,toStudentLabel:u,fmtDateTime:h}){const{name:f,number:g}=u(a),b=a?.studentNo||s?.studentNo||s?.enrollId||"",y=h(s?.submitAt),v=s?.submitFiles||[];return e.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",onClick:c,children:e.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",onClick:C=>C.stopPropagation(),children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("div",{className:"modal-header",children:[e.jsxs("h5",{className:"modal-title",children:[e.jsx("strong",{children:f}),g&&e.jsxs("span",{className:"text-muted small ms-2",children:["(",g,")"]})]}),e.jsx("button",{type:"button",className:"btn-close",onClick:c,"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-muted small mb-1",children:""}),e.jsx("div",{children:y})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-muted small mb-1",children:" "}),e.jsx("div",{className:"p-3 bg-light rounded",children:s?.submitDesc||"-"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-muted small mb-2",children:" "}),e.jsx("ul",{className:"list-group",children:v&&v.length>0&&v.some(C=>C?.fileId)?v.map((C,w)=>{const A=C.fileOrder??C.order,S=C.originalFileName||C.originName||` ${A??w}`,E=typeof C.fileSize=="number"?`(${(C.fileSize/1024).toFixed(2)} KB)`:"",$=A!=null&&b?`/classroom/api/v1/common/${encodeURIComponent(l)}/indivtask/${encodeURIComponent(i)}/submit/${encodeURIComponent(b)}/attach/${encodeURIComponent(A)}`:void 0;return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[e.jsx("i",{className:"bi bi-paperclip"})," ",S]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[E&&e.jsx("small",{className:"text-muted",children:E}),$&&e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:$,children:""})]})]},`${A??w}`)}):e.jsx("li",{className:"list-group-item text-muted small",children:" "})})]}),e.jsxs("div",{className:"border-top pt-3",children:[e.jsx("h6",{className:"mb-3",children:""}),e.jsx(N2,{enrollId:s?.enrollId,defaultScore:s?.evaluScore,defaultDesc:s?.evaluDesc,onSubmit:d})]})]}),e.jsx("div",{className:"modal-footer",children:e.jsx("button",{type:"button",className:"btn btn-secondary",onClick:c,children:""})})]})})})}function N2({enrollId:a,defaultScore:s,defaultDesc:l,onSubmit:i}){const[c,d]=x.useState(s??""),[u,h]=x.useState(l??""),[f,g]=x.useState(!1);return e.jsxs("form",{className:"eval-form",onSubmit:b=>{b.preventDefault(),i(a,c,u,g)},children:[e.jsxs("div",{className:"row g-2 align-items-center",children:[e.jsxs("div",{className:"col-sm-3",children:[e.jsx("label",{className:"form-label",children:" (0-100)"}),e.jsx("input",{type:"number",className:"form-control form-control-sm eval-score",min:0,max:100,value:c,onChange:b=>d(b.target.value)})]}),e.jsxs("div",{className:"col-sm-9",children:[e.jsx("label",{className:"form-label",children:""}),e.jsx("textarea",{className:"form-control form-control-sm eval-desc",rows:2,value:u,onChange:b=>h(b.target.value)})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-2",children:e.jsx("button",{type:"submit",className:"btn btn-sm btn-primary btn-save-eval",disabled:f,children:f?"":""})})]})}const so=a=>String(a).padStart(2,"0"),Wi=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?a:`${s.getFullYear()}-${so(s.getMonth()+1)}-${so(s.getDate())} ${so(s.getHours())}:${so(s.getMinutes())}`},Ob=(a,s=50)=>typeof a!="string"?"":a.length<=s?a:`${a.substring(0,s)}...`,Ib=a=>{if(typeof a!="number"||a<0)return"";const s=1024*1024,l=1024;return a>=s?`(${(a/s).toFixed(2)} MB)`:a>=l?`(${(a/l).toFixed(2)} KB)`:`(${a} Bytes)`};function S2(){const{lectureId:a,grouptaskId:s}=dt(),l=rs(),i=`/classroom/professor/${encodeURIComponent(a||"")}/task`,c="/classroom/api/v1/professor",d="/classroom/api/v1/common/task",u="/classroom/api/v1/professor/task",h="/classroom/api/v1/common",[f,g]=x.useState(null),[b,y]=x.useState([]),[v,C]=x.useState(!0),[w,A]=x.useState(null),[S,E]=x.useState(!1),{getStudentPhotoUrl:$,getStudentPhotoBlobUrl:D,cacheStudentPhotoBlobUrl:I}=cs(),[V,_]=x.useState({}),B=x.useRef(new Set);x.useEffect(()=>{let N=!0;return(async()=>{try{C(!0),A(null);const[M,L,U]=await Promise.all([fetch(`${u}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${u}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}/jo`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${c}/${encodeURIComponent(a)}/students`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!M.ok)throw new Error(`(${M.status})   `);if(!L.ok)throw new Error(`(${L.status})     `);const[P,k,G]=await Promise.all([M.json(),L.json(),U.ok?U.json():Promise.resolve([])]);if(!N)return;const se={...P,groupList:k};g(se),y(Array.isArray(G)?G:[])}catch(M){if(!N)return;A(M)}finally{N&&C(!1)}})(),()=>{N=!1}},[a,s,c,u]);const z=x.useMemo(()=>new Map(b.map(N=>[N.enrollId,N])),[b]),X=x.useMemo(()=>{const N=new Set;return Array.isArray(f?.groupList)&&f.groupList.forEach(M=>{(Array.isArray(M?.crewList)?M.crewList:[]).forEach(P=>{const k=z.get(P.enrollId);k?.studentNo&&N.add(k.studentNo)});const U=M?.leaderEnrollId;if(U){const P=z.get(U);P?.studentNo&&N.add(P.studentNo)}}),Array.from(N)},[f,z]);x.useEffect(()=>{X.forEach(N=>{if(!N||B.current.has(N))return;const M=D(N);if(M){_(U=>U[N]?U:{...U,[N]:M});return}const L=$(N,a);L&&(B.current.add(N),fetch(L,{credentials:"include"}).then(U=>U.ok?U.blob():null).then(U=>{if(!U)return;const P=URL.createObjectURL(U);I(N,P),_(k=>({...k,[N]:P}))}).catch(()=>{}).finally(()=>{B.current.delete(N)}))})},[X,a,D,$,I]);const T=async()=>{if(window.confirm("  ?"))try{E(!0);const N=await fetch(`${u}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}`,{method:"DELETE",credentials:"include",headers:{Accept:"application/json"}});if(!(N.status===204||N.ok))throw new Error(`(${N.status})  `);l(i)}catch(N){alert(N.message||String(N))}finally{E(!1)}},W=N=>N?.studentNo?V[N.studentNo]||D(N.studentNo)||$(N.studentNo,a)||`${h}/photo/student/${encodeURIComponent(a)}/${encodeURIComponent(N.studentNo)}`:null,F=N=>!Array.isArray(N)||N.length===0?e.jsx("p",{className:"text-muted mb-0",children:"  ."}):N.map((M,L)=>{const U=Array.isArray(M?.crewList)?M.crewList:[],P=M.leaderEnrollId,k=P&&z.get(P)||null,G=k&&(`${k.lastName||""}${k.firstName||""}`||k.name||k.userId)||"-",se=(k?.lastName||k?.firstName||G).charAt(0),q=W(k),ee=U.length,te=M.submitAt?Wi(M.submitAt):"",me=M.submitAt?e.jsx("span",{className:"badge text-bg-success",children:" "}):e.jsx("span",{className:"badge text-bg-secondary",children:""}),oe=M.submitAt?` ${te}`:"",be=M.groupName||`${L+1}`,J=k?.studentNo?` (${k.studentNo})`:"";M?.submitFileId&&M?.groupId&&`${u}${encodeURIComponent(a)}${encodeURIComponent(s)}${encodeURIComponent(M.groupId)}`;const re=M.attachFileList,Ee=e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"small text-muted",children:" "}),Array.isArray(re)&&re.length>0?e.jsx("ul",{className:"list-group list-group-flush mt-1",children:re.map(($e,ue)=>{const fe=$e.fileOrder??ue+1,Me=$e.originalFileName||$e.originName||` ${fe}`,He=Ob(Me,20),ge=Ib($e.fileSize),Le=`${u}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}/submit/${encodeURIComponent(M.groupId)}/${encodeURIComponent(fe)}`;return e.jsx("li",{className:"list-group-item ps-0",children:e.jsxs("a",{href:Le,className:"text-decoration-none text-body",title:Me,children:[e.jsx("i",{className:"bi bi-paperclip"})," ",He," ",ge&&e.jsx("small",{className:"text-muted",children:ge})]})},fe)})}):e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:"text-muted",children:"  ."})})]});return e.jsxs("div",{className:"accordion-item",children:[e.jsx("h2",{className:"accordion-header",id:`group-acc-head-${L}`,children:e.jsx("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#group-acc-body-${L}`,children:e.jsxs("div",{className:"group-summary",children:[q?e.jsx("img",{className:"avatar-56 me-2",alt:`${G} `,src:q}):e.jsx("span",{className:"avatar-fallback-56 me-2",children:se}),e.jsxs("div",{className:"group-summary-text",children:[e.jsxs("div",{className:"group-summary-title",children:[e.jsx("span",{className:"fw-semibold",children:be}),me]}),e.jsxs("div",{className:"group-summary-meta",children:[e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-person-badge"}),"  ",G,J]}),e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-people"}),"  ",ee,""]}),e.jsxs("span",{children:[e.jsx("i",{className:"bi bi-clock-history"})," ",oe]})]})]})]})})}),e.jsx("div",{id:`group-acc-body-${L}`,className:"accordion-collapse collapse","data-bs-parent":"#group-accordion",children:e.jsxs("div",{className:"accordion-body",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"h6 mb-3",children:" "}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-4",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{children:M.submitAt?te:e.jsx("span",{className:"text-muted",children:""})})]}),e.jsxs("div",{className:"col-12 col-md-8",children:[e.jsx("div",{className:"small text-muted",children:" "}),e.jsx("div",{className:"mt-1",dangerouslySetInnerHTML:{__html:M?.submitDesc||'<span class="text-muted">  .</span>'}})]})]}),Ee]}),e.jsxs("div",{children:[e.jsx("h3",{className:"h6 mb-3",children:" "}),e.jsx("div",{className:"row g-3",children:U.length===0?e.jsx("p",{className:"text-muted mb-0",children:"  ."}):U.map(($e,ue)=>{const fe=$e?.enrollId&&z.get($e.enrollId)||null,Me=fe&&(`${fe.lastName||""}${fe.firstName||""}`||fe.name||fe.userId)||"-",He=P&&$e?.enrollId===P,ge=fe?.studentNo||"  ",ce=$e?.evaluScore!==""&&$e?.evaluScore!=null?`${$e.evaluScore} / 10`:"",Se=$e?.evaluAt?Wi($e.evaluAt):"",we=(fe?.lastName||fe?.firstName||Me).charAt(0),Ve=W(fe);return e.jsx("div",{className:"col-12 col-md-6 col-lg-4",children:e.jsxs("div",{className:"member-card h-100",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3",children:[Ve?e.jsx("img",{className:"avatar-48",alt:`${Me} `,src:Ve}):e.jsx("span",{className:"avatar-fallback-48",children:we}),e.jsxs("div",{children:[e.jsx("div",{className:"fw-semibold",children:Me}),e.jsx("div",{className:"member-meta",children:ge}),He&&e.jsx("span",{className:"badge text-bg-primary mt-2",children:""})]})]}),e.jsxs("div",{className:"evaluation-box mt-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"fw-semibold",children:"  :"})," ",ce]}),e.jsx("div",{className:"evaluation-note mt-2",children:$e?.evaluDesc||""}),e.jsxs("div",{className:"evaluation-note mt-2",children:[" : ",Se]})]})]})},$e?.enrollId||ue)})})]})]})})]},L)}),Q=(f?.groupList||[]).length;(f?.groupList||[]).reduce((N,M)=>N+(M?.crewList?.length||0),0);const O=(f?.groupList||[]).filter(N=>N?.submitAt).length,Y=x.useMemo(()=>`${i}/group/${encodeURIComponent(s||"")}/edit`,[i,s]);return e.jsxs("section",{id:"grouptask-post-root",className:"container-fluid",style:{display:"flex",flexDirection:"column",padding:"1rem",maxHeight:"100vh"},children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{id:"bc-task",to:i,children:""})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:""})]})}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",id:"btn-edit",to:`/classroom/professor/${encodeURIComponent(a)}/task/group/${encodeURIComponent(s)}/edit`,children:""}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",id:"btn-delete",onClick:T,disabled:S,children:S?"...":""}),e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",id:"btn-list",to:i,children:""})]})]}),e.jsx("div",{style:{display:"flex",flexDirection:"row",gap:"0.75rem",height:"70vh",minHeight:0},children:v?e.jsx("div",{className:"card shadow-sm",style:{flex:1},children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex align-items-start flex-wrap mb-2",children:[e.jsx("span",{className:"badge skeleton",style:{width:64,height:22}}),e.jsx("span",{className:"badge skeleton ms-2",style:{width:56,height:22}})]}),e.jsx("h1",{className:"h4 mb-3 skeleton",style:{width:"60%",height:"1.5rem"}}),e.jsxs("div",{className:"d-flex flex-wrap meta-list mb-3",children:[e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),e.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"task-content mb-4",children:e.jsx("div",{className:"skeleton",style:{height:"8rem"}})})]})}):w?e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(w.message||w)}):f?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card shadow-sm",style:{flex:"3",minHeight:0,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"badge text-bg-primary",children:""}),e.jsx("h1",{className:"h5 mb-0",children:f.grouptaskName||"( )"})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("a",{className:"btn btn-sm btn-primary",id:"btn-edit-task",href:Y,role:"button",children:""}),e.jsx("button",{className:"btn btn-sm btn-danger",id:"btn-delete-task",type:"button",onClick:T,disabled:S,children:S?"":""})]})]}),e.jsxs("div",{className:"card-body",style:{overflow:"auto",flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"d-flex flex-wrap gap-3 text-muted small mb-3",children:[e.jsxs("div",{children:[": ",e.jsx("span",{className:"text-body-secondary",children:Wi(f.createAt)})]}),e.jsxs("div",{children:[": ",e.jsx("span",{className:"text-body-secondary",children:Wi(f.startAt)})]}),e.jsxs("div",{children:[": ",e.jsx("span",{className:"text-body-secondary",children:Wi(f.endAt)})]})]}),e.jsx("hr",{className:"my-3"}),e.jsx("article",{className:"task-content mb-4",style:{flex:1},dangerouslySetInnerHTML:{__html:f.grouptaskDesc||""}})]}),Array.isArray(f.attachFileList)&&f.attachFileList.length>0&&e.jsxs("div",{className:"card-footer",id:"attach-area",children:[e.jsx("h2",{className:"h6 mb-2",children:""}),e.jsx("ul",{className:"list-group list-group-flush",id:"attach-list",children:f.attachFileList.map((N,M)=>{const L=N.fileOrder??N.order??M,U=N.originalFileName||N.originName||` ${L??M}`,P=Ob(U),k=Ib(N.fileSize),G=`${d}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}/attach/${encodeURIComponent(L)}`;return e.jsx("li",{className:"list-group-item",children:e.jsxs("a",{href:G,className:"text-decoration-none text-body",title:U,children:[e.jsx("i",{className:"bi bi-paperclip"})," ",P," ",k&&e.jsx("small",{className:"text-muted",children:k})]})},`${L??M}`)})})]})]}),e.jsxs("div",{className:"card shadow-sm",style:{flex:"2",minHeight:0,display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsx("h3",{className:"h5 mb-0",children:"  "}),e.jsxs("span",{className:"text-muted",children:[O," / ",Q]})]}),e.jsx("div",{className:"card-body",style:{overflow:"auto",padding:0},children:e.jsx("div",{id:"group-accordion",className:"accordion accordion-flush",children:F(f?.groupList||[])})})]})]}):null}),w&&e.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:w})]})}const ao=a=>String(a).padStart(2,"0"),ph=a=>{if(!a)return"";const s=new Date(a);return Number.isNaN(s.getTime())?"":`${s.getFullYear()}-${ao(s.getMonth()+1)}-${ao(s.getDate())}T${ao(s.getHours())}:${ao(s.getMinutes())}`},w2=a=>Array.isArray(a)?a:a?.attachFileList&&Array.isArray(a.attachFileList)?a.attachFileList:[],C2=(a,s)=>{if(!Array.isArray(s))return"";for(const l of s){if(l?.bundleId)return l.bundleId;if(l?.fileId)return l.fileId}return""};function Lb(){const{lectureId:a,indivtaskId:s}=dt(),l=rs(),i="/classroom/api/v1/professor/task",c="/classroom/api/v1/common/task",d=!!s,[u,h]=x.useState(""),[f,g]=x.useState(""),[b,y]=x.useState(""),[v,C]=x.useState(""),[w,A]=x.useState(""),[S,E]=x.useState([]),[$,D]=x.useState(!1),[I,V]=x.useState(d),[_,B]=x.useState(""),[z,X]=x.useState(""),T=x.useRef(null),W=x.useRef(null);x.useEffect(()=>{let O=!1,Y=null;const N=async()=>{if(!(O||W.current)&&T.current&&window.ClassicEditor)try{const U=T.current.ckeditorInstance;U&&await U.destroy();const P=await window.ClassicEditor.create(T.current);if(O){P.destroy().catch(console.error);return}Y=P,W.current=P,T.current.ckeditorInstance=P}catch(U){console.error("CKEditor initialization failed:",U)}},L=setTimeout(()=>{if(window.ClassicEditor)N();else{const U=document.querySelector('script[src*="ckeditor"]');if(U){const P=()=>{O||N(),U.removeEventListener("load",P)};U.addEventListener("load",P)}else{const P=document.createElement("script");P.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",P.onload=()=>{O||N()},document.head.appendChild(P)}}},100);return()=>{O=!0,clearTimeout(L);const U=W.current||Y;U&&U.ui&&U.ui.view&&U.ui.view.element&&U.destroy().catch(P=>{console.debug("Editor cleanup:",P)}),W.current=null,T.current&&(T.current.ckeditorInstance=null)}},[]),x.useEffect(()=>{(async()=>{if(d)try{V(!0),B("");const Y=`${i}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}`,N=await fetch(Y,{headers:{Accept:"application/json"},credentials:"include"});if(!N.ok)throw new Error(`  (HTTP ${N.status})`);const M=await N.json();h(M.indivtaskName||""),y(ph(M.startAt)),C(ph(M.endAt));const L=w2(M.attachFileList),U=M.fileId||M.attachFileId||C2("",L);A(U),E(L),V(!1);const P=setInterval(()=>{W.current&&(W.current.setData(M.indivtaskDesc||""),clearInterval(P))},100);setTimeout(()=>clearInterval(P),1e4)}catch(Y){B(Y.message||String(Y)),V(!1)}else{const Y=new Date;Y.setSeconds(0,0),y(ph(Y.toISOString()))}})()},[a,s,d,i]);const F=async O=>{const Y=Array.from(O.target.files||[]);if(Y.length!==0){if(Y.length>5){B(" 5   .");return}try{D(!0),B(""),X("");const N=new FormData;for(const G of Y)N.append("files",G);const M=`/classroom/api/v1/common/${encodeURIComponent(a)}/upload?type=task`,L=await fetch(M,{method:"POST",body:N,credentials:"include"});if(!L.ok)throw new Error(`(${L.status})  `);const U=await L.json(),P=U.bundleId||U.fileId||Array.isArray(U.fileIds)&&U.fileIds[0]||Array.isArray(U.files)&&U.files[0]?.fileId||Array.isArray(U.details)&&U.details[0]?.fileId||"",k=Array.isArray(U.files)&&U.files||Array.isArray(U.details)&&U.details||[];A(P),E(k),X("    .")}catch(N){B(N.message||String(N))}finally{D(!1)}}},Q=async O=>{O.preventDefault();try{if(D(!0),B(""),X(""),!u.trim())throw new Error(" .");const Y=W.current?W.current.getData():f;if(!Y.trim())throw new Error("  .");if(!b)throw new Error("  .");if(b&&v&&b>v)throw new Error("     .");const N={indivtaskName:u.trim(),indivtaskDesc:Y.trim(),startAt:b,endAt:v||null,attachFileId:w||""};if(d){N.indivtaskId=s;const M=`${i}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}`,L=await fetch(M,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(N)});if(!L.ok){const U=await L.text().catch(()=>L.statusText);throw new Error(` (${L.status}): ${U}`)}X("."),l(`/classroom/professor/${encodeURIComponent(a)}/task/indiv/${encodeURIComponent(s)}`)}else{const M=`${i}/${encodeURIComponent(a)}/indiv`,L=await fetch(M,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(N)});if(!L.ok){const P=await L.text().catch(()=>L.statusText);throw new Error(` (${L.status}): ${P}`)}const U=L.headers.get("Location");X("."),l(U||`/classroom/professor/${encodeURIComponent(a)}/task`)}}catch(Y){B(Y.message||String(Y))}finally{D(!1)}};return I?e.jsx("section",{id:"task-form-root",className:"container py-4",children:e.jsx("div",{className:"text-muted",children:" ..."})}):e.jsxs("section",{id:"task-form-root",className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{to:`/classroom/professor/${encodeURIComponent(a)}/task`,children:""})}),d&&e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{to:`/classroom/professor/${encodeURIComponent(a)}/task`,children:" "})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:d?" ":" "})]})}),e.jsxs("div",{className:"d-flex gap-2",children:[d&&e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(a)}/task/indiv/${encodeURIComponent(s)}`,children:""}),e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(a)}/task`,children:""})]})]}),e.jsxs("form",{id:"task-form",className:"card shadow-sm",onSubmit:Q,children:[e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"task-name",className:"form-label",children:""}),e.jsx("input",{id:"task-name",type:"text",className:"form-control",maxLength:50,required:!0,disabled:$,value:u,onChange:O=>h(O.target.value),placeholder:" 5  "}),e.jsx("div",{className:"text-muted small",children:" 50"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"task-desc",className:"form-label",children:" "}),e.jsx("div",{ref:T,id:"task-desc"}),e.jsx("div",{className:"text-muted small",children:" 4000()"})]}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("label",{htmlFor:"start-at",className:"form-label",children:" "}),e.jsx("input",{id:"start-at",type:"datetime-local",className:"form-control",required:!0,disabled:$,value:b,onChange:O=>y(O.target.value)})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("label",{htmlFor:"end-at",className:"form-label",children:" "}),e.jsx("input",{id:"end-at",type:"datetime-local",className:"form-control",disabled:$,value:v,onChange:O=>C(O.target.value)})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"form-label",children:""}),e.jsx("input",{id:"file-input",type:"file",className:"form-control",multiple:!0,disabled:$,onChange:F}),e.jsx("div",{className:"text-muted small",children:"      . ( 5)"}),w&&e.jsxs("div",{id:"current-attach-box",className:"mt-2",children:[e.jsxs("div",{className:"alert alert-info py-2 mb-2",children:["  ID: ",e.jsx("span",{id:"current-file-id",children:w||"()"})]}),e.jsx("ul",{id:"current-file-list",className:"list-group small",children:S.map((O,Y)=>{const N=O.originName??O.originalName??` ${O.fileOrder??O.order??Y}`,M=O.extension?`.${O.extension}`:"",L=typeof O.fileSize=="number"?` (${O.fileSize.toLocaleString()}B)`:"",U=O.fileOrder??O.order,P=U==null||!d?"#":`${c}/${encodeURIComponent(a)}/indiv/${encodeURIComponent(s)}/attach/${encodeURIComponent(U)}`;return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[N,M,L]}),d&&U!=null&&e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:P,children:""})]},Y)})})]})]})]}),e.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[e.jsx(qe,{to:d?`/classroom/professor/${encodeURIComponent(a)}/task/indiv/${encodeURIComponent(s)}`:`/classroom/professor/${encodeURIComponent(a)}/task`,className:"btn btn-light",children:""}),e.jsx("button",{id:"btn-submit",type:"submit",className:"btn btn-primary",disabled:$,children:$?d?"":"":d?"":""})]})]}),_&&e.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:_}),z&&e.jsx("div",{id:"info-box",className:"alert alert-success mt-3",role:"alert",children:z})]})}const no=a=>String(a).padStart(2,"0"),A2=a=>{if(!a)return"";const s=new Date(a);return Number.isNaN(s.getTime())?"":`${s.getFullYear()}-${no(s.getMonth()+1)}-${no(s.getDate())}T${no(s.getHours())}:${no(s.getMinutes())}`},zb=a=>{if(!a)return null;const s=String(a).trim();return s?/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/.test(s)?`${s}:00`:s:null},Ub=a=>({tempId:`GRP${Math.random().toString(36).slice(2,10)}`,groupName:` ${a+1}`,leaderEnrollId:null,members:[]});function E2(){const{lectureId:a}=dt(),s=rs(),l="/classroom/api/v1/professor",i="/classroom/api/v1/professor/task",[c,d]=x.useState(""),[u,h]=x.useState(""),[f,g]=x.useState(""),[b,y]=x.useState(""),[v,C]=x.useState(""),[w,A]=x.useState([]),[S,E]=x.useState(!1),[$,D]=x.useState(""),[I,V]=x.useState(""),[_,B]=x.useState([]),[z,X]=x.useState(!1),[T,W]=x.useState(""),[F,Q]=x.useState(""),[O,Y]=x.useState(new Set),[N,M]=x.useState([]),L=x.useRef(null),U=x.useRef(null),P=x.useRef(null),k=ce=>{D(ce||" ."),V("")},G=ce=>{V(ce||"."),D("")},se=()=>{D(""),V("")};x.useEffect(()=>{const ce=new Date;ce.setSeconds(0,0),g(A2(ce.toISOString()))},[]);const q=async()=>{if(!a){k("  .");return}try{X(!0),W(""),se();const ce=`${l}/${encodeURIComponent(a)}/students`,Se=await fetch(ce,{headers:{Accept:"application/json"},credentials:"include"});if(!Se.ok)throw new Error(`    (HTTP ${Se.status})`);const we=await Se.json(),Ve=new Set(["ENR_CANCEL","ENR_WITHDRAW"]),Xe=(Array.isArray(we)?we:[]).filter(Ke=>!Ve.has(Ke.enrollStatusCd)).map(Ke=>({enrollId:String(Ke.enrollId||""),studentNo:String(Ke.studentNo||""),studentName:`${Ke.lastName||""}${Ke.firstName||""}`.trim(),deptName:Ke.univDeptName||Ke.deptName||""})).filter(Ke=>Ke.enrollId);B(Xe),G(` ${Xe.length} .`)}catch(ce){const Se=ce instanceof Error?ce.message:"     .";B([]),W(Se),k(Se)}finally{X(!1)}};x.useEffect(()=>{q()},[a]),x.useEffect(()=>{Y(ce=>{const Se=new Set(_.map(Xe=>Xe.enrollId)),we=new Set(N.flatMap(Xe=>Xe.members)),Ve=new Set;return ce.forEach(Xe=>{Se.has(Xe)&&!we.has(Xe)&&Ve.add(Xe)}),Ve})},[_,N]);const ee=x.useMemo(()=>new Set(N.flatMap(ce=>ce.members)),[N]),te=x.useMemo(()=>{const ce=F.trim().toLowerCase();return _.filter(Se=>ee.has(Se.enrollId)?!1:ce?Se.studentNo.toLowerCase().includes(ce)||Se.studentName.toLowerCase().includes(ce)||Se.deptName.toLowerCase().includes(ce):!0)},[_,F,ee]),me=ce=>{Y(Se=>{const we=new Set(Se);return we.has(ce)?we.delete(ce):we.add(ce),we})},oe=()=>{if(O.size===0){k("  .");return}let ce=0,Se="";if(M(we=>{const Ve=we.map(Ht=>({...Ht,members:[...Ht.members]}));Ve.length===0&&Ve.push(Ub(0));const Xe=Ve.length-1,Ke=Ve[Xe],Fe=new Set(Ke.members);return O.forEach(Ht=>{Fe.has(Ht)||(Fe.add(Ht),ce+=1)}),Ke.groupName.trim()||(Ke.groupName=` ${Xe+1}`),Ke.members=Array.from(Fe),Se=Ke.groupName,Ve}),ce===0){k("  .");return}Y(new Set),G(`${Se} ${ce} .`)},be=()=>{const ce=N.reduce((Se,we)=>Se+we.members.length,0);if(ce===0){G("  .");return}M(Se=>Se.map(we=>({...we,members:[],leaderEnrollId:null}))),G(` . ( ${ce})`)},J=()=>{M(ce=>{const Se=ce.map(we=>({...we,members:[...we.members]}));return Se.push(Ub(Se.length)),Se})},re=()=>{const ce=N.length,Se=N.filter(Ve=>Ve.members.length>0);M(Se);const we=ce-Se.length;we>0?G(`  ${we} .`):G("   .")},Ee=(ce,Se)=>{M(we=>we.map(Ve=>Ve.tempId===ce?{...Ve,groupName:Se}:Ve))},$e=ce=>{M(Se=>Se.map(we=>we.tempId===ce?{...we,members:[],leaderEnrollId:null}:we)),G(" .")},ue=ce=>{M(Se=>Se.filter(we=>we.tempId!==ce)),G(" .")},fe=(ce,Se)=>{M(we=>we.map(Ve=>Ve.tempId===ce?{...Ve,leaderEnrollId:Se}:Ve))},Me=(ce,Se)=>{M(we=>we.map(Ve=>{if(Ve.tempId!==ce)return Ve;const Xe=Ve.members.filter(Ke=>Ke!==Se);return{...Ve,members:Xe,leaderEnrollId:Ve.leaderEnrollId===Se?null:Ve.leaderEnrollId}}))},He=async ce=>{const Se=Array.from(ce.target.files||[]);if(Se.length!==0){if(!a){k("  .");return}if(Se.length>5){k(" 5   .");return}try{se(),E(!0);const we=new FormData;Se.forEach(ua=>we.append("files",ua));const Ve=new URLSearchParams({type:"task"}),Xe=`/classroom/api/v1/common/${encodeURIComponent(a)}/upload?${Ve}`,Ke=await fetch(Xe,{method:"POST",body:we,credentials:"include"});if(!Ke.ok)throw new Error(`   (${Ke.status})`);const Fe=await Ke.json(),Ht=Fe.bundleId||Fe.fileId||Array.isArray(Fe.fileIds)&&Fe.fileIds[0]||Array.isArray(Fe.files)&&Fe.files[0]?.fileId||Array.isArray(Fe.details)&&Fe.details[0]?.fileId||"",Ss=Array.isArray(Fe.files)&&Fe.files||Array.isArray(Fe.details)&&Fe.details||[];C(Ht),A(Ss),G(" .")}catch(we){k(we instanceof Error?we.message:"    .")}finally{E(!1),ce.target.value=""}}};x.useEffect(()=>{let ce=!0,Se=null;const we=async()=>{if(!(!ce||U.current)&&!(!window.ClassicEditor||!L.current))try{const Ke=L.current.ckeditorInstance;Ke&&await Ke.destroy();const Fe=await window.ClassicEditor.create(L.current,{toolbar:["heading","|","bold","italic","link","bulletedList","numberedList","blockQuote","|","insertTable","undo","redo"],placeholder:" ,  ,   ."});if(!ce){Fe.destroy().catch(console.error);return}Se=Fe,U.current=Fe,L.current.ckeditorInstance=Fe,Fe.model.document.on("change:data",()=>{h(Fe.getData())})}catch(Ke){console.error("CKEditor initialization failed:",Ke)}},Xe=setTimeout(()=>{if(window.ClassicEditor)we();else{const Ke=document.querySelector('script[src*="ckeditor"]');if(Ke){const Fe=()=>{ce&&we(),Ke.removeEventListener("load",Fe)};Ke.addEventListener("load",Fe)}else{const Fe=document.createElement("script");Fe.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",Fe.async=!0,Fe.onload=()=>{ce&&we()},document.head.appendChild(Fe),P.current=Fe}}},100);return()=>{ce=!1,clearTimeout(Xe);const Ke=U.current||Se;Ke&&Ke.ui&&Ke.ui.view&&Ke.ui.view.element&&Ke.destroy().catch(Fe=>{console.debug("Editor cleanup:",Fe)}),U.current=null,L.current&&(L.current.ckeditorInstance=null),P.current=null}},[]);const ge=async ce=>{ce.preventDefault(),se();try{if(!a)throw new Error("  .");const Se=c.trim(),we=U.current?U.current.getData().trim():u.trim(),Ve=zb(f),Xe=zb(b);if(!Se)throw new Error(" .");if(!we)throw new Error("  .");if(!Ve)throw new Error("  .");if(Ve&&Xe&&Ve>Xe)throw new Error("     .");const Ke={grouptaskName:Se,grouptaskDesc:we,startAt:Ve,endAt:Xe,attachFileId:v||"",groups:N.map(xt=>({groupName:xt.groupName,leaderEnrollId:xt.leaderEnrollId,crews:xt.members}))};E(!0);const Fe=`${i}/${encodeURIComponent(a)}/group`,Ht=await fetch(Fe,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(Ke),credentials:"include"});if(!Ht.ok){let xt="";try{if((Ht.headers.get("Content-Type")||"").includes("application/json")){const Ua=await Ht.json();xt=Ua?.message||Ua?.error||JSON.stringify(Ua)}else xt=await Ht.text()}catch{xt=""}throw new Error(`    (HTTP ${Ht.status})${xt?` - ${xt}`:""}`)}const Ss=await Ht.json(),ua=Ss?.grouptaskId||Ss?.id||Ss?.data?.grouptaskId;alert("  ."),s(ua?`/classroom/professor/${encodeURIComponent(a)}/task/group/${encodeURIComponent(ua)}`:`/classroom/professor/${encodeURIComponent(a)}/task`)}catch(Se){k(Se instanceof Error?Se.message:"    .")}finally{E(!1)}},Le=`mt-2${v||w.length?"":" d-none"}`;return e.jsxs("section",{id:"grouptask-form-root",className:"container py-4","data-lecture-id":a||"","data-prof-base":i,"data-common-base":"/classroom/api/v1/common",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{to:`/classroom/professor/${encodeURIComponent(a||"")}/task/indiv`,children:""})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:" "})]})}),e.jsx("div",{className:"d-flex gap-2",children:e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(a||"")}/task/group`,children:" "})})]}),e.jsxs("form",{id:"grouptask-form",className:"card shadow-sm",autoComplete:"off",onSubmit:ge,children:[e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"row g-3 mb-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("label",{htmlFor:"grouptask-name",className:"form-label required",children:""}),e.jsx("input",{type:"text",id:"grouptask-name",className:"form-control",maxLength:50,required:!0,placeholder:")   1 ",value:c,onChange:ce=>d(ce.target.value)}),e.jsx("div",{className:"form-hint",children:" 50"})]}),e.jsxs("div",{className:"col-12 col-md-3",children:[e.jsx("label",{htmlFor:"start-at",className:"form-label required",children:" "}),e.jsx("input",{type:"datetime-local",id:"start-at",className:"form-control",required:!0,value:f,onChange:ce=>g(ce.target.value)})]}),e.jsxs("div",{className:"col-12 col-md-3",children:[e.jsx("label",{htmlFor:"end-at",className:"form-label",children:" "}),e.jsx("input",{type:"datetime-local",id:"end-at",className:"form-control",value:b,onChange:ce=>y(ce.target.value)})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"grouptask-desc",className:"form-label required",children:" "}),e.jsx("textarea",{id:"grouptask-desc",className:"form-control d-none",ref:L,defaultValue:u,placeholder:" ,  ,   ."}),e.jsx("div",{className:"form-hint",children:" 4000 ()"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"form-label",htmlFor:"file-input",children:""}),e.jsx("input",{type:"file",id:"file-input",className:"form-control",multiple:!0,onChange:He,disabled:S}),e.jsx("div",{className:"form-hint",children:"      . ( 5)"}),e.jsx("input",{type:"hidden",id:"attach-file-id",value:v,readOnly:!0}),e.jsxs("div",{id:"current-attach-box",className:Le,children:[e.jsxs("div",{className:"alert alert-info py-2 mb-2",children:["   ID: ",e.jsx("span",{id:"current-file-id",children:v||"()"})]}),w.length>0&&e.jsx("ul",{id:"current-file-list",className:"list-group small",children:w.map((ce,Se)=>{const we=ce.originName??ce.originalName??` ${ce.fileOrder??ce.order??Se+1}`,Ve=ce.extension?`.${ce.extension}`:"",Xe=typeof ce.fileSize=="number"?` (${ce.fileSize.toLocaleString()}B)`:"";return e.jsxs("li",{className:"list-group-item",children:[we,Ve,Xe]},`${ce.fileId||we}-${Se}`)})})]})]}),e.jsx("hr",{className:"my-4"}),e.jsx("h2",{className:"h6 mb-2",children:" "}),e.jsx("div",{className:"form-hint mb-2",children:"      / ."}),e.jsxs("div",{className:"group-builder",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("strong",{children:" "}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("input",{type:"text",id:"student-search",className:"form-control form-control-sm",placeholder:"/ ",style:{width:180},value:F,onChange:ce=>Q(ce.target.value)}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",type:"button",id:"btn-refresh-students",onClick:q,children:""})]})]}),e.jsxs("div",{className:"student-list list-scroll",id:"student-list",children:[z&&e.jsx("div",{className:"p-2 text-muted small text-center",children:" ..."}),!z&&T&&e.jsx("div",{className:"p-2 text-danger small text-center",children:T}),!z&&!T&&te.length===0&&e.jsx("div",{className:"p-2 text-muted small text-center",children:"  ."}),!z&&!T&&te.map(ce=>e.jsx("label",{className:"d-flex align-items-center justify-content-between px-2 py-1 border-bottom",children:e.jsxs("span",{className:"small text-truncate",children:[e.jsx("input",{type:"checkbox",className:"form-check-input me-2","data-enroll":ce.enrollId,checked:O.has(ce.enrollId),onChange:()=>me(ce.enrollId)}),e.jsx("b",{children:ce.studentNo}),"  ",ce.studentName,ce.deptName?e.jsxs("small",{className:"text-muted",children:[" / ",ce.deptName]}):null]})},ce.enrollId))]}),e.jsx("div",{className:"form-hint mt-1",children:'   "  "    .'})]}),e.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center",children:[e.jsx("button",{className:"btn btn-sm btn-primary mb-2",type:"button",id:"btn-assign-selected",onClick:oe,children:"  "}),e.jsx("button",{className:"btn btn-sm btn-outline-secondary",type:"button",id:"btn-unassign-all",onClick:be,children:"  "})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[e.jsx("strong",{children:""}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{className:"btn btn-sm btn-outline-primary",type:"button",id:"btn-add-group",onClick:J,children:" "}),e.jsx("button",{className:"btn btn-sm btn-outline-danger",type:"button",id:"btn-remove-empty-groups",onClick:re,children:"  "})]})]}),e.jsxs("div",{className:"group-list list-scroll p-2",id:"group-list",children:[N.length===0&&e.jsx("div",{className:"p-2 text-muted small text-center",children:" .    ."}),N.map(ce=>e.jsxs("div",{className:"group-card","data-gid":ce.tempId,children:[e.jsxs("div",{className:"group-header mb-2",children:[e.jsx("div",{className:"d-flex align-items-center gap-2",children:e.jsx("input",{className:"form-control form-control-sm group-name-input","data-gid":ce.tempId,style:{width:220},value:ce.groupName,onChange:Se=>Ee(ce.tempId,Se.target.value),placeholder:" "})}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary btn-clear-members",onClick:()=>$e(ce.tempId),children:" "}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger btn-delete-group",onClick:()=>ue(ce.tempId),children:" "})]})]}),e.jsxs("div",{className:"group-members",children:[ce.members.length===0&&e.jsx("div",{className:"text-muted small",children:"  ."}),ce.members.map(Se=>{const we=_.find(Xe=>Xe.enrollId===Se);if(!we)return null;const Ve=ce.leaderEnrollId===Se;return e.jsxs("div",{className:`member-badge${Ve?" leader":""}`,"data-enroll":Se,children:[e.jsxs("span",{children:[e.jsx("b",{children:we.studentNo}),"  ",we.studentName]}),Ve&&e.jsx("span",{className:"badge text-bg-primary",children:""}),e.jsxs("span",{className:"member-actions",children:[!Ve&&e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary btn-set-leader",onClick:()=>fe(ce.tempId,Se),children:" "}),e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger btn-remove-member",onClick:()=>Me(ce.tempId,Se),children:""})]})]},Se)})]})]},ce.tempId))]})]})]})]}),e.jsx("div",{className:"card-footer d-flex justify-content-end gap-2",children:e.jsx("button",{type:"submit",id:"btn-submit",className:"btn btn-primary",disabled:S,children:S?" ...":""})})]}),$&&e.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:$}),I&&e.jsx("div",{id:"info-box",className:"alert alert-success mt-3",role:"alert",children:I})]})}const lo=a=>String(a).padStart(2,"0"),Bb=a=>{if(!a)return"";const s=new Date(a);return Number.isNaN(s.getTime())?"":`${s.getFullYear()}-${lo(s.getMonth()+1)}-${lo(s.getDate())}T${lo(s.getHours())}:${lo(s.getMinutes())}`},T2=a=>Array.isArray(a)?a:a?.attachFileList&&Array.isArray(a.attachFileList)?a.attachFileList:[],_2=(a,s)=>{if(!Array.isArray(s))return"";for(const l of s){if(l?.bundleId)return l.bundleId;if(l?.fileId)return l.fileId}return""};function k2(){const{lectureId:a,grouptaskId:s}=dt(),l=rs(),i="/classroom/api/v1/professor/task",c="/classroom/api/v1/common/task",[d,u]=x.useState(""),[h,f]=x.useState(""),[g,b]=x.useState(""),[y,v]=x.useState(""),[C,w]=x.useState(""),[A,S]=x.useState([]),[E,$]=x.useState(!1),[D,I]=x.useState(!0),[V,_]=x.useState(""),[B,z]=x.useState(""),X=x.useRef(null),T=x.useRef(null);x.useEffect(()=>{let Q=!1,O=null;const Y=async()=>{if(!(Q||T.current)&&X.current&&window.ClassicEditor)try{const L=X.current.ckeditorInstance;L&&await L.destroy();const U=await window.ClassicEditor.create(X.current);if(Q){U.destroy().catch(console.error);return}O=U,T.current=U,X.current.ckeditorInstance=U}catch(L){console.error("CKEditor initialization failed:",L)}},M=setTimeout(()=>{if(window.ClassicEditor)Y();else{const L=document.querySelector('script[src*="ckeditor"]');if(L){const U=()=>{Q||Y(),L.removeEventListener("load",U)};L.addEventListener("load",U)}else{const U=document.createElement("script");U.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",U.onload=()=>{Q||Y()},document.head.appendChild(U)}}},100);return()=>{Q=!0,clearTimeout(M);const L=T.current||O;L&&L.ui&&L.ui.view&&L.ui.view.element&&L.destroy().catch(U=>{console.debug("Editor cleanup:",U)}),T.current=null,X.current&&(X.current.ckeditorInstance=null)}},[]),x.useEffect(()=>{(async()=>{try{I(!0),_("");const O=`${i}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}`,Y=await fetch(O,{headers:{Accept:"application/json"},credentials:"include"});if(!Y.ok)throw new Error(`  (HTTP ${Y.status})`);const N=await Y.json();u(N.grouptaskName||""),b(Bb(N.startAt)),v(Bb(N.endAt));const M=T2(N.attachFileList),L=N.fileId||N.attachFileId||_2("",M);w(L),S(M),I(!1);const U=setInterval(()=>{T.current&&(T.current.setData(N.grouptaskDesc||""),clearInterval(U))},100);setTimeout(()=>clearInterval(U),1e4)}catch(O){_(O.message||String(O)),I(!1)}})()},[a,s,i]);const W=async Q=>{const O=Array.from(Q.target.files||[]);if(O.length!==0){if(O.length>5){_(" 5   .");return}try{$(!0),_(""),z("");const Y=new FormData;for(const k of O)Y.append("files",k);const N=`/classroom/api/v1/common/${encodeURIComponent(a)}/upload?type=task`,M=await fetch(N,{method:"POST",body:Y,credentials:"include"});if(!M.ok)throw new Error(`(${M.status})  `);const L=await M.json(),U=L.bundleId||L.fileId||Array.isArray(L.fileIds)&&L.fileIds[0]||Array.isArray(L.files)&&L.files[0]?.fileId||Array.isArray(L.details)&&L.details[0]?.fileId||"",P=Array.isArray(L.files)&&L.files||Array.isArray(L.details)&&L.details||[];w(U),S(P),z("    .")}catch(Y){_(Y.message||String(Y))}finally{$(!1)}}},F=async Q=>{Q.preventDefault();try{if($(!0),_(""),z(""),!d.trim())throw new Error(" .");const O=T.current?T.current.getData():h;if(!O.trim())throw new Error("  .");if(!g)throw new Error("  .");if(g&&y&&g>y)throw new Error("     .");const Y={grouptaskId:s,grouptaskName:d.trim(),grouptaskDesc:O.trim(),startAt:g,endAt:y||null,attachFileId:C||""},N=`${i}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}`,M=await fetch(N,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(Y)});if(!M.ok){const L=await M.text().catch(()=>M.statusText);throw new Error(` (${M.status}): ${L}`)}z("."),l(`/classroom/professor/${encodeURIComponent(a)}/task/group/${encodeURIComponent(s)}`)}catch(O){_(O.message||String(O))}finally{$(!1)}};return D?e.jsx("section",{id:"task-group-edit-root",className:"container py-4",children:e.jsx("div",{className:"text-muted",children:" ..."})}):e.jsxs("section",{id:"task-group-edit-root",className:"container py-4",children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("nav",{"aria-label":"breadcrumb",children:e.jsxs("ol",{className:"breadcrumb mb-0",children:[e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{to:`/classroom/professor/${encodeURIComponent(a)}/task`,children:""})}),e.jsx("li",{className:"breadcrumb-item",children:e.jsx(qe,{to:`/classroom/professor/${encodeURIComponent(a)}/task`,children:" "})}),e.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:" "})]})}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(a)}/task/group/${encodeURIComponent(s)}`,children:""}),e.jsx(qe,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(a)}/task`,children:""})]})]}),e.jsxs("form",{id:"task-group-form",className:"card shadow-sm",onSubmit:F,children:[e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"task-name",className:"form-label",children:""}),e.jsx("input",{id:"task-name",type:"text",className:"form-control",maxLength:50,required:!0,disabled:E,value:d,onChange:Q=>u(Q.target.value),placeholder:"   "}),e.jsx("div",{className:"text-muted small",children:" 50"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{htmlFor:"task-desc",className:"form-label",children:" "}),e.jsx("div",{ref:X,id:"task-desc"}),e.jsx("div",{className:"text-muted small",children:" 4000()"})]}),e.jsxs("div",{className:"row g-3",children:[e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("label",{htmlFor:"start-at",className:"form-label",children:" "}),e.jsx("input",{id:"start-at",type:"datetime-local",className:"form-control",required:!0,disabled:E,value:g,onChange:Q=>b(Q.target.value)})]}),e.jsxs("div",{className:"col-12 col-md-6",children:[e.jsx("label",{htmlFor:"end-at",className:"form-label",children:" "}),e.jsx("input",{id:"end-at",type:"datetime-local",className:"form-control",disabled:E,value:y,onChange:Q=>v(Q.target.value)})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"form-label",children:""}),e.jsx("input",{id:"file-input",type:"file",className:"form-control",multiple:!0,disabled:E,onChange:W}),e.jsx("div",{className:"text-muted small",children:"      . ( 5)"}),C&&e.jsxs("div",{id:"current-attach-box",className:"mt-2",children:[e.jsxs("div",{className:"alert alert-info py-2 mb-2",children:["  ID: ",e.jsx("span",{id:"current-file-id",children:C||"()"})]}),e.jsx("ul",{id:"current-file-list",className:"list-group small",children:A.map((Q,O)=>{const Y=Q.originName??Q.originalName??` ${Q.fileOrder??Q.order??O}`,N=Q.extension?`.${Q.extension}`:"",M=typeof Q.fileSize=="number"?` (${Q.fileSize.toLocaleString()}B)`:"",L=Q.fileOrder??Q.order,U=L==null?"#":`${c}/${encodeURIComponent(a)}/group/${encodeURIComponent(s)}/attach/${encodeURIComponent(L)}`;return e.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[Y,N,M]}),L!=null&&e.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:U,children:""})]},O)})})]})]})]}),e.jsxs("div",{className:"card-footer bg-white d-flex justify-content-between align-items-center flex-wrap gap-2",children:[e.jsxs("div",{children:[V&&e.jsx("div",{className:"alert alert-danger py-2 mb-0",children:V}),B&&e.jsx("div",{className:"alert alert-success py-2 mb-0",children:B})]}),e.jsxs("div",{className:"d-flex gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary",disabled:E,onClick:()=>l(`/classroom/professor/${encodeURIComponent(a)}/task/group/${encodeURIComponent(s)}`),children:""}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:E,children:E?" ...":""})]})]})]}),e.jsxs("div",{className:"alert alert-info mt-3",children:[e.jsx("strong",{children:":"}),"     (, , , )   .        ."]})]})}function D2(){const{lectureId:a}=dt(),{students:s,setStudents:l,getStudentPhotoUrl:i,getStudentPhotoBlobUrl:c,cacheStudentPhotoBlobUrl:d}=cs(),[u,h]=x.useState([]),[f,g]=x.useState(!0),[b,y]=x.useState(null),[v,C]=x.useState({department:"all",grade:"all",name:""}),[w,A]=x.useState({}),S=x.useRef(new Set);x.useEffect(()=>{let _=!0;return(async()=>{try{if(g(!0),y(null),Array.isArray(s)){h(s);return}const B=`/classroom/api/v1/professor/${encodeURIComponent(a)}/students`,z=await fetch(B,{headers:{Accept:"application/json"},credentials:"include"});if(!z.ok)throw new Error(`(${z.status})    .`);const X=await z.json();if(!_)return;const T=Array.isArray(X)?X:[];h(T),l(T)}catch(B){if(!_)return;y(B)}finally{_&&g(!1)}})(),()=>{_=!1}},[a,s,l]);const E=x.useMemo(()=>{if(!u)return[];const _=u.map(B=>B.univDeptName).filter(Boolean);return[...new Set(_)].sort()},[u]),$=x.useMemo(()=>{if(!u)return[];const _=u.map(B=>B.gradeName).filter(Boolean);return[...new Set(_)].sort()},[u]),D=x.useMemo(()=>u?u.filter(_=>{const B=[_.lastName,_.firstName].filter(Boolean).join(""),z=v.name?B.includes(v.name):!0,X=v.department==="all"?!0:_.univDeptName===v.department,T=v.grade==="all"?!0:_.gradeName===v.grade;return z&&X&&T}):[],[u,v]),I=x.useMemo(()=>D.map(_=>_.studentNo).filter(Boolean),[D]);x.useEffect(()=>{I.forEach(_=>{if(!_||S.current.has(_))return;const B=c(_);if(B){A(X=>X[_]?X:{...X,[_]:B});return}const z=i(_,a);z&&(S.current.add(_),fetch(z,{credentials:"include"}).then(X=>X.ok?X.blob():null).then(X=>{if(!X)return;const T=URL.createObjectURL(X);d(_,T),A(W=>({...W,[_]:T}))}).catch(()=>{}).finally(()=>{S.current.delete(_)}))})},[I,a,c,i,d]);const V=_=>{const{name:B,value:z}=_.target;C(X=>({...X,[B]:z}))};return e.jsxs("div",{children:[e.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[e.jsx("h1",{className:"h4 mb-0",children:""}),e.jsxs("div",{className:"text-muted small",children:[" ",D.length,""]})]}),e.jsx("div",{className:"card shadow-sm mb-4 p-0",children:e.jsx("div",{className:"card-body p-3",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-lg-7",children:e.jsxs("div",{className:"row g-2 align-items-end",children:[e.jsxs("div",{className:"col-md",children:[e.jsx("label",{htmlFor:"filter-department",className:"form-label small",children:""}),e.jsxs("select",{id:"filter-department",name:"department",className:"form-select form-select-sm",value:v.department,onChange:V,children:[e.jsx("option",{value:"all",children:""}),E.map(_=>e.jsx("option",{value:_,children:_},_))]})]}),e.jsxs("div",{className:"col-md",children:[e.jsx("label",{htmlFor:"filter-grade",className:"form-label small",children:""}),e.jsxs("select",{id:"filter-grade",name:"grade",className:"form-select form-select-sm",value:v.grade,onChange:V,children:[e.jsx("option",{value:"all",children:""}),$.map(_=>e.jsx("option",{value:_,children:_},_))]})]}),e.jsxs("div",{className:"col-md",children:[e.jsx("label",{htmlFor:"filter-name",className:"form-label small",children:""}),e.jsx("input",{type:"text",id:"filter-name",name:"name",className:"form-control form-control-sm",value:v.name,onChange:V,placeholder:" ..."})]})]})})})})}),f&&e.jsx("div",{className:"text-muted",children:" "}),b&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(b.message||b)}),!f&&!b&&e.jsx("div",{className:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-3",children:D.length===0?e.jsx("div",{className:"col-12",children:e.jsx("div",{className:"text-center text-muted py-5",children:"  ."})}):D.map((_,B)=>{const z=_.studentNo||_.userId||"",X=[_.lastName,_.firstName].filter(Boolean).join("")||z||"",T=_.univDeptName||"-",W=_.gradeName||"",F=_.email||"",Q=w[z]||c(z)||null;return e.jsx("div",{className:"col",children:e.jsxs(qe,{to:`/classroom/professor/${encodeURIComponent(a)}/student/${encodeURIComponent(z)}`,className:"card h-100 text-decoration-none text-reset p-0",children:[Q&&e.jsx("div",{className:"bg-light rounded-top",style:{overflow:"hidden"},children:e.jsx("img",{src:Q,alt:`${X} `,className:"w-100",style:{display:"block",height:"auto",objectFit:"contain"}})}),e.jsxs("div",{className:"card-body p-3",children:[e.jsxs("div",{className:"d-flex align-items-center gap-2 mb-1",children:[e.jsx("h3",{className:"h6 mb-0",children:X}),_.enrollStatusName&&e.jsx("span",{className:`badge ${_.enrollStatusCd==="ENR_ING"?"bg-primary":_.enrollStatusCd==="ENR_DONE"?"bg-success":_.enrollStatusCd==="ENR_CANCEL"?"bg-warning text-dark":_.enrollStatusCd==="ENR_WITHDRAW"?"bg-danger":"bg-secondary"}`,children:_.enrollStatusName})]}),e.jsxs("div",{className:"text-muted small mb-2",children:[" ",z||"-"]}),e.jsxs("dl",{className:"row small mb-0",children:[e.jsx("dt",{className:"col-4",children:""}),e.jsx("dd",{className:"col-8 text-end text-truncate",title:T,children:T}),W&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"col-4",children:""}),e.jsx("dd",{className:"col-8 text-end",children:W})]}),F&&e.jsxs(e.Fragment,{children:[e.jsx("dt",{className:"col-4",children:""}),e.jsx("dd",{className:"col-8 text-end text-truncate",title:F,children:F})]})]})]})]})},z||B)})})]})}const Pn=a=>String(a).padStart(2,"0"),ia=(a,s=!1)=>{if(!a)return"-";const l=new Date(a);if(Number.isNaN(l.getTime()))return"-";const i=`${l.getFullYear()}-${Pn(l.getMonth()+1)}-${Pn(l.getDate())}`,c=`${Pn(l.getHours())}:${Pn(l.getMinutes())}${s?`:${Pn(l.getSeconds())}`:""}`;return`${i} ${c}`},M2=a=>{if(!a)return"-";const s=new Date(a);return Number.isNaN(s.getTime())?"-":`${s.getFullYear()}-${Pn(s.getMonth()+1)}-${Pn(s.getDate())}`},R2=a=>{const s=(a||"").toUpperCase();return s==="OFF"?"":s==="ON"||s==="ONL"?"":""},Ao=a=>{if(a==null||a==="")return null;const s=Number(a);return Number.isFinite(s)?s:null},Fb=a=>{const s=Ao(a?.modifiedScore);if(s!=null)return{score:s,type:"modified"};const l=Ao(a?.autoScore);return l!=null?{score:l,type:"auto"}:{score:null,type:null}},$2=a=>{switch(a){case"ATTD_OK":return"badge bg-success-subtle text-success-emphasis";case"ATTD_LATE":return"badge bg-warning-subtle text-warning-emphasis";case"ATTD_ABSENT":return"badge bg-danger-subtle text-danger-emphasis";default:return"badge bg-secondary-subtle text-secondary-emphasis"}},gh=(a,s,l)=>e.jsx("span",{className:a?"badge bg-success-subtle text-success-emphasis":"badge bg-secondary-subtle text-secondary-emphasis",children:a?s:l});function O2(){const{lectureId:a,studentNo:s}=dt(),{students:l,setStudents:i,getStudentPhotoUrl:c}=cs(),[d,u]=x.useState(null),[h,f]=x.useState(null),[g,b]=x.useState(!Array.isArray(l)),[y,v]=x.useState({loading:!0,records:[],error:null}),[C,w]=x.useState({loading:!0,records:[],error:null}),[A,S]=x.useState({loading:!0,records:[],error:null}),[E,$]=x.useState({loading:!0,records:[],error:null}),[D,I]=x.useState(null);x.useEffect(()=>{if(!a||!s)return;if(Array.isArray(l)){const M=l.find(L=>String(L.studentNo||L.userId||"")===String(s));u(M||null),b(!1),f(M?null:"    .");return}let N=!0;return b(!0),f(null),(async()=>{try{const M=`/classroom/api/v1/professor/${encodeURIComponent(a)}/students`,L=await fetch(M,{headers:{Accept:"application/json"},credentials:"include"});if(!L.ok)throw new Error(`(${L.status})     .`);const U=await L.json();if(!N)return;const P=Array.isArray(U)?U:[];i(P);const k=P.find(G=>String(G.studentNo||G.userId||"")===String(s));u(k||null),f(k?null:"    .")}catch(M){if(!N)return;u(null),f(M instanceof Error?M.message:"   .")}finally{N&&b(!1)}})(),()=>{N=!1}},[a,s,l,i]),x.useEffect(()=>{if(!a||!s)return;let N=!0;v(L=>({...L,loading:!0,error:null}));const M=`/classroom/api/v1/professor/${encodeURIComponent(a)}/${encodeURIComponent(s)}/exam`;return(async()=>{try{const L=await fetch(M,{headers:{Accept:"application/json"},credentials:"include"});if(!L.ok)throw new Error(`(${L.status})     .`);const U=await L.json();if(!N)return;const P=Array.isArray(U)?U:[];P.sort((k,G)=>{const se=new Date(k?.startAt||0).getTime();return new Date(G?.startAt||0).getTime()-se}),v({loading:!1,records:P,error:null})}catch(L){if(!N)return;v({loading:!1,records:[],error:L instanceof Error?L:new Error("     .")})}})(),()=>{N=!1}},[a,s]),x.useEffect(()=>{if(!a||!s)return;let N=!0;w(L=>({...L,loading:!0,error:null}));const M=`/classroom/api/v1/professor/${encodeURIComponent(a)}/${encodeURIComponent(s)}/attendance`;return(async()=>{try{const L=await fetch(M,{headers:{Accept:"application/json"},credentials:"include"});if(!L.ok)throw new Error(`(${L.status})     .`);const U=await L.json();if(!N)return;const P=Array.isArray(U)?U:[];P.sort((k,G)=>{const se=k?.lctRound??k?.lctPrintRound??0,q=G?.lctRound??G?.lctPrintRound??0;return se-q}),w({loading:!1,records:P,error:null})}catch(L){if(!N)return;w({loading:!1,records:[],error:L instanceof Error?L:new Error("     .")})}})(),()=>{N=!1}},[a,s]),x.useEffect(()=>{if(!a||!s)return;let N=!0;S(L=>({...L,loading:!0,error:null}));const M=`/classroom/api/v1/professor/${encodeURIComponent(a)}/${encodeURIComponent(s)}/indivtask`;return(async()=>{try{const L=await fetch(M,{headers:{Accept:"application/json"},credentials:"include"});if(!L.ok)throw new Error(`(${L.status})     .`);const U=await L.json();if(!N)return;const P=Array.isArray(U)?U:[];P.sort((k,G)=>{const se=new Date(k?.startAt||0).getTime();return new Date(G?.startAt||0).getTime()-se}),S({loading:!1,records:P,error:null})}catch(L){if(!N)return;S({loading:!1,records:[],error:L instanceof Error?L:new Error("     .")})}})(),()=>{N=!1}},[a,s]),x.useEffect(()=>{if(!a||!s)return;let N=!0;$(L=>({...L,loading:!0,error:null}));const M=`/classroom/api/v1/professor/${encodeURIComponent(a)}/${encodeURIComponent(s)}/grouptask`;return(async()=>{try{const L=await fetch(M,{headers:{Accept:"application/json"},credentials:"include"});if(!L.ok)throw new Error(`(${L.status})     .`);const U=await L.json();if(!N)return;const P=Array.isArray(U)?U:[];P.sort((k,G)=>{const se=new Date(k?.startAt||0).getTime();return new Date(G?.startAt||0).getTime()-se}),$({loading:!1,records:P,error:null})}catch(L){if(!N)return;$({loading:!1,records:[],error:L instanceof Error?L:new Error("     .")})}})(),()=>{N=!1}},[a,s]),x.useEffect(()=>{if(y.error){I({variant:"alert-danger",message:"     ."});return}if(C.error){I({variant:"alert-danger",message:"     ."});return}!y.loading&&!C.loading&&y.records.length===0&&C.records.length===0?I({variant:"alert-info",message:"      ."}):I(null)},[y.loading,y.error,y.records.length,C.loading,C.error,C.records.length]);const V=x.useMemo(()=>d?[d.lastName,d.firstName].filter(Boolean).join("")||d.userName||d.userId||s||"":s||"",[d,s]),_=x.useMemo(()=>{if(!d)return"";const N=d.univDeptName||"",M=d.gradeName||"";return[N,M].filter(Boolean).join("  ")},[d]),B=d?.email||"",z=d?.enrollStatusName||"",X=d?c(d.studentNo||d.userId||"",a):null,T=x.useMemo(()=>{const N=y.records.length,M=y.records.reduce((U,P)=>U+(Ao(P?.weightValue)??0),0);if(!N)return{count:N,weightSum:M,finalClass:"alert alert-warning",finalText:"        ."};let L=0;if(y.records.forEach(U=>{const P=Ao(U?.weightValue)??0,k=Fb(U),G=k.score!=null&&U?.record?k.score:0;L+=G*(P/100)}),Math.abs(M-100)<1e-6){const U=Number.isFinite(L)?L.toFixed(2):"0.00";return{count:N,weightSum:M,finalClass:"alert alert-primary",finalText:`   100%    ${U}.`}}return{count:N,weightSum:M,finalClass:"alert alert-warning",finalText:`     ${M}     .`}},[y.records]),W=x.useMemo(()=>C.records.map(N=>{const M=N?.lctPrintRound??N?.lctRound,L=M!=null?`${M}`:"-",U=N?.qrcodeFileId?"QR":"";return{roundLabel:L,methodLabel:U}}),[C.records]),F=x.useMemo(()=>C.records.length?[{label:"",cells:C.records.map((N,M)=>e.jsx("td",{className:"text-center",children:M2(N?.attDay)},`date-${M}`))},{label:"",cells:C.records.map((N,M)=>e.jsx("td",{className:"text-center",children:e.jsx("span",{className:$2(N?.attStatusCd),children:N?.attStatusName||""})},`status-${M}`))},{label:" ",cells:C.records.map((N,M)=>e.jsx("td",{className:"text-center",children:N?.attAt?ia(N.attAt,!0):"-"},`time-${M}`))},{label:"",cells:C.records.map((N,M)=>e.jsx("td",{className:"text-center text-muted small",children:N?.attComment||"-"},`note-${M}`))}]:[],[C.records]),Q=x.useMemo(()=>y.loading?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"   ..."})}):y.error?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-danger py-4",children:y.error.message||"   ."})}):y.records.length?y.records.map((N,M)=>{const L=N?.startAt?ia(N.startAt):"",U=N?.endAt?ia(N.endAt):"",P=[R2(N?.examType)],k=[L,U?`~ ${U}`:""].filter(Boolean).join(" ");k&&P.push(k);const G=Fb(N),se=G.type==="modified"?" ()":"";return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold",children:N?.examName||"-"}),e.jsx("div",{className:"text-muted small",children:P.join("  ")})]}),e.jsx("td",{className:"text-center",children:N?.weightValue!=null?N.weightValue:"-"}),e.jsx("td",{className:"text-center",children:gh(N?.record,"","")}),e.jsx("td",{className:"text-center",children:N?.submitAt?ia(N.submitAt,!0):"-"}),e.jsx("td",{className:"text-center",children:G.score!=null?`${G.score}${se}`:"-"}),e.jsx("td",{className:"text-muted small",children:N?.modifyReason||""})]},N?.examId||N?.lctExamId||M)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"  ."})}),[y.loading,y.error,y.records]),O=x.useMemo(()=>A.loading?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"   ..."})}):A.error?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-danger py-4",children:A.error.message||"   ."})}):A.records.length?A.records.map((N,M)=>{const L=N?.startAt?ia(N.startAt):"",U=N?.endAt?ia(N.endAt):"",P=[L,U?`~ ${U}`:""].filter(Boolean).join(" "),k=!!N?.submitAt,G=!!N?.evaluAt;return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold",children:N?.indivtaskName||"-"}),e.jsx("div",{className:"text-muted small",children:P})]}),e.jsx("td",{className:"text-center",children:gh(N?.submitTarget,"","")}),e.jsx("td",{className:"text-center",children:N?.submitTarget?k?e.jsx("span",{className:"badge bg-success-subtle text-success-emphasis",children:" "}):e.jsx("span",{className:"badge bg-warning-subtle text-warning-emphasis",children:""}):"-"}),e.jsx("td",{className:"text-center",children:k?ia(N.submitAt,!0):"-"}),e.jsx("td",{className:"text-center",children:G&&N?.evaluScore!=null?N.evaluScore:"-"}),e.jsx("td",{className:"text-muted small",children:N?.evaluDesc||""})]},N?.indivtaskId||M)}):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"  ."})}),[A.loading,A.error,A.records]),Y=x.useMemo(()=>E.loading?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"   ..."})}):E.error?e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-danger py-4",children:E.error.message||"   ."})}):E.records.length?E.records.map((N,M)=>{const L=N?.startAt?ia(N.startAt):"",U=N?.endAt?ia(N.endAt):"",P=[L,U?`~ ${U}`:""].filter(Boolean).join(" "),k=!!N?.submitAt,G=!!N?.evaluAt;return e.jsxs("tr",{children:[e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold",children:N?.grouptaskName||"-"}),e.jsx("div",{className:"text-muted small",children:P})]}),e.jsx("td",{className:"text-center",children:N?.groupName||"-"}),e.jsx("td",{className:"text-center",children:gh(N?.submitTarget,"","")}),e.jsx("td",{className:"text-center",children:N?.submitTarget?k?e.jsx("span",{className:"badge bg-success-subtle text-success-emphasis",children:" "}):e.jsx("span",{className:"badge bg-warning-subtle text-warning-emphasis",children:""}):"-"}),e.jsx("td",{className:"text-center",children:k?ia(N.submitAt,!0):"-"}),e.jsx("td",{className:"text-center",children:G&&N?.evaluScore!=null?N.evaluScore:"-"}),e.jsx("td",{className:"text-muted small",children:N?.evaluDesc||""})]},N?.grouptaskId||M)}):e.jsx("tr",{children:e.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"  ."})}),[E.loading,E.error,E.records]);return e.jsxs("section",{id:"student-detail-root",className:"container py-4",children:[e.jsxs("div",{className:"d-flex flex-column flex-lg-row gap-3 align-items-lg-center justify-content-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"h3 mb-1",children:V}),e.jsxs("div",{className:"text-muted small",children:[" ",e.jsx("span",{id:"student-detail-number",children:s||"-"}),_&&e.jsx("span",{className:"ms-2",children:_})]}),B&&e.jsx("div",{className:"text-muted small",children:B}),z&&e.jsx("div",{className:"mt-1",children:e.jsx("span",{className:`badge ${d?.enrollStatusCd==="ENR_ING"?"bg-primary":d?.enrollStatusCd==="ENR_DONE"?"bg-success":d?.enrollStatusCd==="ENR_CANCEL"?"bg-warning text-dark":d?.enrollStatusCd==="ENR_WITHDRAW"?"bg-danger":"bg-secondary"}`,children:z})})]}),e.jsx("div",{className:"d-flex gap-2 ms-lg-auto",children:e.jsx(qe,{className:"btn btn-outline-secondary btn-sm",to:`/classroom/professor/${encodeURIComponent(a||"")}/student`,children:""})})]}),X&&e.jsx("div",{className:"mb-4",children:e.jsx("img",{src:X,alt:`${V} `,style:{maxWidth:"200px",borderRadius:"0.75rem"}})}),g&&e.jsx("div",{className:"text-muted mb-3",children:"   ..."}),h&&!g&&e.jsx("div",{className:"alert alert-warning mb-3",role:"alert",children:h}),D&&e.jsx("div",{id:"student-detail-notice",className:`alert ${D.variant}`,role:"alert",children:D.message}),e.jsxs("div",{className:"card shadow-sm",id:"student-attendance-card",children:[e.jsxs("div",{className:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2",children:[e.jsx("h2",{className:"h5 mb-0",children:" "}),e.jsxs("div",{className:"text-muted small",children:["  ",e.jsx("span",{id:"student-attendance-count",children:C.records.length}),""]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{id:"student-attendance-pivot",className:"table-responsive",children:C.loading?e.jsx("div",{className:"text-center text-muted py-5",children:"   ..."}):C.error?e.jsx("div",{className:"text-center text-danger py-5",children:C.error.message||"   ."}):C.records.length?e.jsxs("table",{className:"table table-sm table-bordered align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"bg-light text-center",children:""}),W.map(({roundLabel:N,methodLabel:M},L)=>e.jsxs("th",{scope:"col",className:"text-center",children:[e.jsx("div",{className:"fw-semibold",children:N}),e.jsx("div",{className:"text-muted small",children:M})]},`att-head-${L}`))]})}),e.jsx("tbody",{children:F.map((N,M)=>e.jsxs("tr",{children:[e.jsx("th",{scope:"row",className:"bg-light text-center",children:N.label}),N.cells]},`att-row-${M}`))})]}):e.jsx("div",{className:"text-center text-muted py-5",children:"   ."})}),e.jsx("div",{className:"text-muted small mt-2",children:"*     ."})]})]}),e.jsxs("div",{className:"card shadow-sm mt-4",id:"student-exam-card",children:[e.jsxs("div",{className:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2",children:[e.jsx("h2",{className:"h5 mb-0",children:"  "}),e.jsxs("div",{className:"text-muted small d-flex flex-column flex-sm-row align-items-sm-center gap-2",children:[e.jsxs("span",{children:["  ",e.jsx("span",{id:"student-exam-count",children:T.count}),""]}),e.jsxs("span",{id:"student-exam-weight-summary",children:["  : ",T.weightSum,""]})]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:`${T.finalClass} d-flex align-items-center justify-content-between`,role:"status",id:"student-exam-final-score",children:e.jsx("span",{children:T.finalText})}),e.jsx("div",{className:"table-responsive mt-3",children:e.jsxs("table",{className:"table table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:80},children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:90},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:180},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:120},children:""}),e.jsx("th",{scope:"col",children:""})]})}),e.jsx("tbody",{id:"student-exam-tbody",children:Q})]})}),e.jsx("div",{className:"text-muted small mt-2",children:"*          ."})]})]}),e.jsxs("div",{className:"card shadow-sm mt-4",id:"student-indivtask-card",children:[e.jsxs("div",{className:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2",children:[e.jsx("h2",{className:"h5 mb-0",children:"  "}),e.jsxs("div",{className:"text-muted small",children:[" ",e.jsx("span",{id:"student-indivtask-count",children:A.records.length}),""]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:90},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:100},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:180},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:80},children:""}),e.jsx("th",{scope:"col",children:" "})]})}),e.jsx("tbody",{id:"student-indivtask-tbody",children:O})]})}),e.jsx("div",{className:"text-muted small mt-2",children:"*      ."})]})]}),e.jsxs("div",{className:"card shadow-sm mt-4",id:"student-grouptask-card",children:[e.jsxs("div",{className:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2",children:[e.jsx("h2",{className:"h5 mb-0",children:"  "}),e.jsxs("div",{className:"text-muted small",children:[" ",e.jsx("span",{id:"student-grouptask-count",children:E.records.length}),""]})]}),e.jsxs("div",{className:"card-body",children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:""}),e.jsx("th",{scope:"col",className:"text-center",style:{width:120},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:90},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:100},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:180},children:" "}),e.jsx("th",{scope:"col",className:"text-center",style:{width:80},children:""}),e.jsx("th",{scope:"col",children:" "})]})}),e.jsx("tbody",{id:"student-grouptask-tbody",children:Y})]})}),e.jsx("div",{className:"text-muted small mt-2",children:"*        ."})]})]})]})}function I2(){const{lectureId:a}=dt(),{students:s}=cs(),[l,i]=x.useState(null),[c,d]=x.useState([]),[u,h]=x.useState([]),[f,g]=x.useState([]),[b,y]=x.useState([]),[v,C]=x.useState([]),[w,A]=x.useState(null),[S,E]=x.useState(null),[$,D]=x.useState(null),[I,V]=x.useState([]),[_,B]=x.useState(null),[z,X]=x.useState(null),[T,W]=x.useState([]),[F,Q]=x.useState(null),[O,Y]=x.useState(null),[N,M]=x.useState([]),[L,U]=x.useState(null),[P,k]=x.useState(null),[G,se]=x.useState([]),[q,ee]=x.useState(null),[te,me]=x.useState(null),[oe,be]=x.useState({}),[J,re]=x.useState(null),[Ee,$e]=x.useState(null),[ue,fe]=x.useState({}),[Me,He]=x.useState(!0),[ge,Le]=x.useState(null),[ce,Se]=x.useState(!1),[we,Ve]=x.useState(1),[Xe,Ke]=x.useState(null),[Fe,Ht]=x.useState([]),[Ss,ua]=x.useState([]),[xt,Kn]=x.useState({A:null,B:null,CD:[]}),[Ua,ha]=x.useState(null),[es,Xs]=x.useState(!1),[ts,mr]=x.useState(null),fr=[{code:"ATTD",name:""},{code:"EXAM",name:""},{code:"TASK",name:""},{code:"PRAC",name:""},{code:"MISC",name:""},{code:"TOTAL",name:""}],pr=async()=>{if(!(!l||!v))try{let xe=$;if(!xe){const Ce=await fetch("/classroom/api/v1/common/lecture/evaluate/score-by-attendance-status",{headers:{Accept:"application/json"},credentials:"include"});if(!Ce.ok)throw new Error(`(${Ce.status})     .`);xe=await Ce.json(),D(xe)}const ke=v.map(Ce=>{const Re=(Ce.okCnt||0)+(Ce.noCnt||0)+(Ce.earlyCnt||0)+(Ce.lateCnt||0)+(Ce.excpCnt||0);if(Re===0)return{enrollId:Ce.enrollId,score:0,isFailed:!1,details:{ok:0,excp:0,early:0,late:0,no:0,totalRounds:0}};const H=Math.ceil(Re*.3),he=(Ce.noCnt||0)+(Ce.excpCnt||0);if(he>H)return{enrollId:Ce.enrollId,score:0,isFailed:!0,reason:`+(${he}) > (${H})`,details:{ok:Ce.okCnt||0,excp:Ce.excpCnt||0,early:Ce.earlyCnt||0,late:Ce.lateCnt||0,no:Ce.noCnt||0,totalRounds:Re}};const Ne=(Ce.okCnt||0)*(xe.ATTD_OK||100),ve=(Ce.excpCnt||0)*(xe.ATTD_EXCP||80),Oe=(Ce.earlyCnt||0)*(xe.ATTD_EARLY||50),Ae=(Ce.lateCnt||0)*(xe.ATTD_LATE||50),_e=(Ce.noCnt||0)*(xe.ATTD_NO||0),Te=(Ne+ve+Oe+Ae+_e)/Re;return{enrollId:Ce.enrollId,score:Math.round(Te*100)/100,isFailed:!1,details:{ok:Ce.okCnt||0,excp:Ce.excpCnt||0,early:Ce.earlyCnt||0,late:Ce.lateCnt||0,no:Ce.noCnt||0,totalRounds:Re}}});V(ke)}catch(xe){console.error("   :",xe),alert(xe.message||"     .")}},Sn=async()=>{if(!l||!T||T.length===0){alert("   .    .");return}try{const xe=await fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(a)}/weight`,{headers:{Accept:"application/json"},credentials:"include"});if(!xe.ok)throw new Error(`(${xe.status})     .`);const ke=await xe.json(),Ce=Array.isArray(ke)?ke.filter(Ie=>Ie.weightValue>0):[];if(console.log("  :",Ce),Ce.length===0){alert("   .");return}const Re=Ce.filter(Ie=>Ie.taskType==="INDIV"),H=Ce.filter(Ie=>Ie.taskType==="GROUP"),he=[];Re.length>0?he.push(fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(a)}/indiv/summary`,{headers:{Accept:"application/json"},credentials:"include"})):he.push(Promise.resolve(null)),H.length>0?he.push(fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(a)}/group/summary`,{headers:{Accept:"application/json"},credentials:"include"})):he.push(Promise.resolve(null));const[Ne,ve]=await Promise.all(he),Oe=Ne&&Ne.ok?await Ne.json():[],Ae=ve&&ve.ok?await ve.json():[];console.log(" :",Oe),console.log(" :",Ae);const _e=T.map(Ie=>{const Te=Ie.enrollId;let Be=0;return Re.forEach(De=>{const ze=De.taskId,tt=De.weightValue,Qe=Array.isArray(Oe)?Oe.find(yt=>yt.enrollId===Te&&yt.indivtaskId===ze):null,Rt=Qe?.isTarget==="Y",Vt=Qe?.submitAt!=null;let at=0;Rt&&Vt&&(at=Qe?.score||0),Be+=at*tt/100}),H.forEach(De=>{const ze=De.taskId,tt=De.weightValue,Qe=Array.isArray(Ae)?Ae.find(yt=>yt.enrollId===Te&&yt.grouptaskId===ze):null,Rt=Qe?.grouptaskId!=null,Vt=Qe?.submitAt!=null;let at=0;Rt&&Vt&&(at=Qe?.score||0),Be+=at*tt/100}),{enrollId:Te,score:Math.round(Be*100)/100,details:{indivTasks:Re.map(De=>{const ze=Array.isArray(Oe)?Oe.find(Rt=>Rt.enrollId===Te&&Rt.indivtaskId===De.taskId):null,tt=ze?.isTarget==="Y",Qe=ze?.submitAt!=null;return{taskId:De.taskId,taskName:De.taskName,weight:De.weightValue,score:tt&&Qe&&ze?.score||0,isTarget:tt,hasSubmission:Qe}}),groupTasks:H.map(De=>{const ze=Array.isArray(Ae)?Ae.find(Rt=>Rt.enrollId===Te&&Rt.grouptaskId===De.taskId):null,tt=ze?.grouptaskId!=null,Qe=ze?.submitAt!=null;return{taskId:De.taskId,taskName:De.taskName,weight:De.weightValue,score:tt&&Qe&&ze?.score||0,isTarget:tt,hasSubmission:Qe}})}}});console.log("  :",_e),M(_e)}catch(xe){console.error("   :",xe),alert(xe.message||"     .")}},wn=async()=>{if(!l||!T||T.length===0){alert("   .    .");return}try{const xe=Array.isArray(u)?u.filter(H=>H.weightValue>0):[];if(console.log("  :",xe),xe.length===0){alert("   .");return}const ke=await fetch(`/classroom/api/v1/professor/exam/${encodeURIComponent(a)}/summary`,{headers:{Accept:"application/json"},credentials:"include"});if(!ke.ok)throw new Error(`(${ke.status})      .`);const Ce=await ke.json();console.log("  :",Ce);const Re=T.map(H=>{const he=H.enrollId;let Ne=0;const ve=Array.isArray(Ce)?Ce.find(Ae=>Ae.enrollId===he):null,Oe=xe.map(Ae=>{const _e=Ae.examId||Ae.lctExamId,Ie=Ae.weightValue,Te=ve?.scoreList?.find(tt=>tt.lctExamId===_e),Be=Te?.isTarget==="Y",De=Te?.submitAt!=null;let ze=0;return Be&&De&&(ze=Te?.score||0),Ne+=ze*Ie/100,{examId:_e,examName:Ae.examName,weight:Ie,score:ze,isTarget:Be,hasSubmission:De}});return{enrollId:he,score:Math.round(Ne*100)/100,details:Oe}});console.log("  :",Re),se(Re)}catch(xe){console.error("   :",xe),alert(xe.message||"     .")}},Qn=async()=>{if(!T||T.length===0){alert("    .    .");return}const xe=["ATTD","EXAM","TASK","PRAC","MISC"],ke={ATTD:"",EXAM:"",TASK:"",PRAC:"",MISC:""},Ce=new Map(b.map(H=>[H.gradeCriteriaCd,H])),Re=xe.map(H=>{const he=Ce.get(H);return he?{code:H,label:he.gradeCriteriaName||ke[H]||H,ratio:Number(he.ratio??0)}:null}).filter(Boolean);if(Re.length===0){alert("    .    .");return}try{Xs(!0),mr(null),Ht([]),ua([]);const H=await Promise.all(Re.map(async ve=>{const Oe="/classroom/api/v1/professor/"+encodeURIComponent(a)+"/end/score?section="+encodeURIComponent(ve.code),Ae=await fetch(Oe,{headers:{Accept:"application/json"},credentials:"include"});if(!Ae.ok)throw new Error("("+Ae.status+") "+ve.label+"   .");const _e=await Ae.json(),Ie={};return Array.isArray(_e)&&_e.forEach(Te=>{if(!Te)return;const Be=String(Te.enrollId);if(!Be)return;const De=Te.rawScore??Te.score;if(De==null)return;const ze=Number(De);Ie[Be]=Number.isFinite(ze)?ze:0}),{...ve,scores:Ie}})),Ne=T.map(ve=>{const Oe=String(ve.enrollId),Ae=H.map(Te=>{const De=Object.prototype.hasOwnProperty.call(Te.scores,Oe)?Te.scores[Oe]:null,ze=De!==null?Math.round(De*Te.ratio/100*100)/100:null;return{code:Te.code,label:Te.label,ratio:Te.ratio,rawScore:De,weightedScore:ze}}),_e=Ae.some(Te=>Te.rawScore===null||Te.rawScore===void 0),Ie=Ae.reduce((Te,Be)=>Be.rawScore===null||Be.rawScore===void 0?Te:Te+Be.rawScore*Be.ratio/100,0);return{enrollId:ve.enrollId,totalScore:Math.round(Ie*100)/100,breakdown:Ae,hasMissing:_e}}).slice().sort((ve,Oe)=>{if(ve.hasMissing!==Oe.hasMissing)return ve.hasMissing?1:-1;const Ae=Number.isFinite(ve.totalScore)?ve.totalScore:-1/0,_e=Number.isFinite(Oe.totalScore)?Oe.totalScore:-1/0;if(Ae!==_e)return _e-Ae;const Ie=Rs.get(ve.enrollId),Te=Rs.get(Oe.enrollId),Be=(Ie?.studentNo||Ie?.userId||"").toString(),De=(Te?.studentNo||Te?.userId||"").toString();return Be&&De&&Be!==De?Be.localeCompare(De):String(ve.enrollId).localeCompare(String(Oe.enrollId))});ua(H.map(({scores:ve,...Oe})=>Oe)),Ht(Ne)}catch(H){console.error("  :",H),mr(H),alert(H.message||"    .")}finally{Xs(!1)}},ma=async()=>{if(Fe.length===0){alert("  .   .");return}if(confirm(`   ?
    .`))try{const xe=Fe.map(Re=>{const Ne=(Re.breakdown.find(Oe=>Oe.code==="ATTD")?.rawScore||0)===0;let ve="-";if(Ne)ve="F";else if(w?.subjectTypeCd==="SUBJ_RELATIVE"){const Oe=Fe.map(_e=>{const Ie=_e.breakdown.find(Te=>Te.code==="ATTD");return{enrollId:_e.enrollId,totalScore:_e.totalScore,isFail:(Ie?.rawScore||0)===0}}).filter(_e=>!_e.isFail).sort((_e,Ie)=>Ie.totalScore-_e.totalScore),Ae=Oe.findIndex(_e=>_e.enrollId===Re.enrollId);if(Ae!==-1){const _e=Math.round(w.currentCap*(S?.A||0)/100),Ie=Math.round(w.currentCap*(S?.B||0)/100);let Te="C~D";Ae<_e?Te="A":Ae<_e+Ie&&(Te="B");const Be={A:xt.A!==null?xt.A:Math.floor(_e/2),B:xt.B!==null?xt.B:Math.floor(Ie/2),CD:xt.CD.length>0?xt.CD:[Math.floor((w.currentCap-_e-Ie)/4),Math.floor((w.currentCap-_e-Ie)/2),Math.floor((w.currentCap-_e-Ie)*3/4)]};if(Te==="A")ve=Oe.slice(0,_e).findIndex(tt=>tt.enrollId===Re.enrollId)<=Be.A?"A+":"A0";else if(Te==="B")ve=Oe.slice(_e,_e+Ie).findIndex(tt=>tt.enrollId===Re.enrollId)<=Be.B?"B+":"B0";else{const ze=Oe.slice(_e+Ie).findIndex(Qe=>Qe.enrollId===Re.enrollId),tt=Be.CD;ze<=(tt[0]||0)?ve="C+":ze<=(tt[1]||0)?ve="C0":ze<=(tt[2]||0)?ve="D+":ve="D0"}}}else(w?.subjectTypeCd==="SUBJ_ABSOLUTE"||w?.subjectTypeCd==="SUBJ_PASSFAIL")&&(ve="-");return{enrollId:String(Re.enrollId),gpaCd:ve}});if(xe.some(Re=>Re.gpaCd==="-")){alert("    .   .");return}const Ce=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/record`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(xe)});if(!Ce.ok)throw new Error(`   (${Ce.status})`);alert("    ."),Se(!1),Ve(1),Ke(null),window.location.reload()}catch(xe){console.error("  :",xe),alert(xe.message||"    .")}},Zn=async()=>{if(I.length===0){alert("   .");return}if(confirm("   ?"))try{const xe=I.map(Ce=>({enrollId:Ce.enrollId,gradeCriteriaCd:"ATTD",rawScore:Ce.score})),ke=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(xe)});if(!ke.ok)throw new Error(`(${ke.status})    .`);alert("   .")}catch(xe){console.error("   :",xe),alert(xe.message||"     .")}};x.useEffect(()=>{let xe=!0;return(async()=>{try{He(!0),Le(null);const ke=`/classroom/api/v1/professor/${encodeURIComponent(a)}/end`,[Ce,Re,H,he,Ne,ve,Oe,Ae]=await Promise.all([fetch(`${ke}/progress`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${ke}/task`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${ke}/exam`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${ke}/attendance`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/common/${encodeURIComponent(a)}/ratio`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/attendance/${encodeURIComponent(a)}/summary`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/common/${encodeURIComponent(a)}`,{headers:{Accept:"application/json"},credentials:"include"}),fetch("/classroom/api/v1/common/subject/evaluate/interval",{headers:{Accept:"application/json"},credentials:"include"})]);if(!Ce.ok)throw new Error(`(${Ce.status})    .`);if(!Re.ok)throw new Error(`(${Re.status})    .`);if(!H.ok)throw new Error(`(${H.status})    .`);if(!he.ok)throw new Error(`(${he.status})    .`);if(!Ne.ok)throw new Error(`(${Ne.status})    .`);if(!ve.ok)throw new Error(`(${ve.status})     .`);if(!Oe.ok)throw new Error(`(${Oe.status})    .`);if(!Ae.ok)throw new Error(`(${Ae.status})    .`);const _e=await Ce.json(),Ie=await Re.json(),Te=await H.json(),Be=await he.json(),De=await Ne.json(),ze=await ve.json(),tt=await Oe.json(),Qe=await Ae.json();if(!xe)return;i(_e),d(Array.isArray(Ie)?Ie:[]),h(Array.isArray(Te)?Te:[]),g(Array.isArray(Be)?Be:[]),y(Array.isArray(De)?De:[]),C(Array.isArray(ze)?ze:[]),A(tt),E(Qe)}catch(ke){if(!xe)return;Le(ke)}finally{xe&&He(!1)}})(),()=>{xe=!1}},[a]),x.useEffect(()=>{ce&&_===null&&F===null&&L===null&&q===null&&J===null&&(async()=>{try{console.log("===      ==="),console.log("  :",s?.length),s&&s.length>0&&(console.log("    :",s[0]),console.log(" enrollStatusCd :",s.map(Ze=>Ze.enrollStatusCd)));const xe=Array.isArray(s)?s:[];console.log(" :",xe.length),W(xe);const ke=new Set(xe.map(Ze=>Ze.enrollId)),[Ce,Re,H,he,Ne]=await Promise.all([fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score?section=ATTD`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score?section=TASK`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score?section=EXAM`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score?section=PRAC`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score?section=MISC`,{headers:{Accept:"application/json"},credentials:"include"})]);console.log("===    ==="),Ce.ok||console.warn(`    (${Ce.status})`);const ve=Ce.ok?await Ce.json():[];console.log("  :",ve.length,"");const Oe=new Map(Array.isArray(ve)?ve.map(Ze=>[Ze.enrollId,Ze.rawScore]):[]);B(Oe);let Ae=0;ke.forEach(Ze=>{Oe.has(Ze)&&Ae++}),Ae===ke.size&&ke.size>0?(console.log(" : all"),X("all")):Ae>0?(console.log(" : partial"),X("partial")):(console.log(" : none"),X("none")),console.log("===    ==="),Re.ok||console.warn(`    (${Re.status})`);const _e=Re.ok?await Re.json():[];console.log("  :",_e.length,"");const Ie=new Map(Array.isArray(_e)?_e.map(Ze=>[Ze.enrollId,Ze.rawScore]):[]);Q(Ie);let Te=0;ke.forEach(Ze=>{Ie.has(Ze)&&Te++}),Te===ke.size&&ke.size>0?(console.log(" : all"),Y("all")):Te>0?(console.log(" : partial"),Y("partial")):(console.log(" : none"),Y("none")),console.log("===    ==="),H.ok||console.warn(`    (${H.status})`);const Be=H.ok?await H.json():[];console.log("  :",Be.length,"");const De=new Map(Array.isArray(Be)?Be.map(Ze=>[Ze.enrollId,Ze.rawScore]):[]);U(De);let ze=0;ke.forEach(Ze=>{De.has(Ze)&&ze++}),ze===ke.size&&ke.size>0?(console.log(" : all"),k("all")):ze>0?(console.log(" : partial"),k("partial")):(console.log(" : none"),k("none")),console.log("===    ==="),he.ok||console.warn(`    (${he.status})`);const tt=he.ok?await he.json():[];console.log("  :",tt.length,"");const Qe=new Map(Array.isArray(tt)?tt.map(Ze=>[Ze.enrollId,Ze.rawScore]):[]);ee(Qe);let Rt=0;if(ke.forEach(Ze=>{Qe.has(Ze)&&Rt++}),Rt===ke.size&&ke.size>0)console.log(" : all"),me("all");else if(Rt>0){console.log(" : partial"),me("partial");const Ze={};Qe.forEach((Ws,ss)=>{Ze[ss]=Ws}),be(Ze)}else console.log(" : none"),me("none");console.log("===    ==="),Ne.ok||console.warn(`    (${Ne.status})`);const Vt=Ne.ok?await Ne.json():[];console.log("  :",Vt.length,"");const at=new Map(Array.isArray(Vt)?Vt.map(Ze=>[Ze.enrollId,Ze.rawScore]):[]);re(at);let yt=0;if(ke.forEach(Ze=>{at.has(Ze)&&yt++}),yt===ke.size&&ke.size>0)console.log(" : all"),$e("all");else if(yt>0){console.log(" : partial"),$e("partial");const Ze={};at.forEach((Ws,ss)=>{Ze[ss]=Ws}),fe(Ze)}else console.log(" : none"),$e("none");console.log("===      ===")}catch(xe){console.error("   :",xe),B(new Map),X("none"),Q(new Map),Y("none"),U(new Map),k("none"),ee(new Map),me("none"),re(new Map),$e("none")}})()},[ce,a,s]),x.useEffect(()=>{if(Xe===0&&z!==null&&I.length===0)if(z==="none")pr();else{const xe=T.map(ke=>{const Ce=_.get(ke.enrollId);return{enrollId:ke.enrollId,score:Ce!==void 0?Ce:null,isFailed:Ce===0}});V(xe)}},[Xe,z,I.length]);const os=l?(()=>{const xe=l.weekCnt*l.weeklyBlockCnt,ke=xe>0?(l.recordedRoundCnt/xe*100).toFixed(1):0;return{totalRounds:xe,progressRate:ke}})():null,$o=b.find(xe=>xe.gradeCriteriaCd==="TASK")?.ratio||0,gr=b.find(xe=>xe.gradeCriteriaCd==="EXAM")?.ratio||0,ws=(()=>{if($o===0)return{hasOngoingWeightedTasks:!1,ongoingTasks:[],taskWeightSum:0,isTaskWeightValid:!0,isTaskValid:!0,skipValidation:!0};const xe=c.filter(H=>H.closedYn==="N"&&H.weightValue>0),ke=xe.length>0,Ce=c.reduce((H,he)=>H+(he.weightValue||0),0),Re=Ce===100;return{hasOngoingWeightedTasks:ke,ongoingTasks:xe,taskWeightSum:Ce,isTaskWeightValid:Re,isTaskValid:!ke&&Re,skipValidation:!1}})(),us=(()=>{if(gr===0)return{hasOngoingWeightedExams:!1,ongoingExams:[],examWeightSum:0,isExamWeightValid:!0,isExamValid:!0,skipValidation:!0};const xe=u.filter(H=>H.closedYn==="N"&&H.weightValue>0),ke=xe.length>0,Ce=u.reduce((H,he)=>H+(he.weightValue||0),0),Re=Ce===100;return{hasOngoingWeightedExams:ke,ongoingExams:xe,examWeightSum:Ce,isExamWeightValid:Re,isExamValid:!ke&&Re,skipValidation:!1}})(),fa=(()=>{const xe=f.length>0;return{hasIncompleteAttendance:xe,incompleteRounds:f,isAttendanceValid:!xe}})(),Rs=x.useMemo(()=>new Map((s||[]).map(xe=>[xe.enrollId,xe])),[s]),Jn=(()=>{if(!os)return[];const xe=os.totalRounds;return xe===0?[]:v.filter(ke=>((ke.noCnt||0)+(ke.excpCnt||0))/xe*100>=30)})(),el=os?os.progressRate>=100:!1,tl=el&&ws.isTaskValid&&us.isExamValid&&fa.isAttendanceValid;return e.jsxs("section",{className:"container py-3",children:[Me&&e.jsx("div",{className:"text-muted",children:" "}),ge&&e.jsx("div",{className:"alert alert-danger",role:"alert",children:String(ge.message||ge)}),!Me&&!ge&&e.jsx("div",{className:"vstack gap-4",children:e.jsxs("div",{className:"row g-4",children:[e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h5 mb-0",children:" "})}),e.jsxs("div",{className:"card-body",children:[os&&e.jsxs("div",{className:"mb-4",children:[e.jsx("h6",{className:"fw-semibold mb-3",children:"  "}),e.jsxs("div",{className:"vstack gap-2",children:[e.jsxs("div",{children:[" ",os.totalRounds,"  ",e.jsxs("strong",{className:"text-primary",children:[l.recordedRoundCnt," "]})]}),e.jsx("div",{className:"progress",style:{height:"30px"},children:e.jsxs("div",{className:`progress-bar ${el?"bg-success":"bg-warning"}`,role:"progressbar",style:{width:`${os.progressRate}%`},"aria-valuenow":os.progressRate,"aria-valuemin":"0","aria-valuemax":"100",children:[os.progressRate,"%"]})}),!el&&e.jsx("div",{className:"alert alert-warning mb-0 small py-2",children:"      100% ."})]})]}),e.jsx("hr",{}),!ws.skipValidation&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"fw-semibold mb-2",children:"  "}),e.jsxs("ul",{className:"list-group",children:[e.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${ws.hasOngoingWeightedTasks?"list-group-item-danger":"list-group-item-success"}`,children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("strong",{children:ws.hasOngoingWeightedTasks?"    ":"  ."}),ws.hasOngoingWeightedTasks&&e.jsx("a",{href:`/classroom/professor/${a}/task`,className:"text-decoration-none small",children:"  "})]}),e.jsx("span",{style:{fontSize:"1.5rem"},children:ws.hasOngoingWeightedTasks?"":""})]}),e.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${ws.isTaskWeightValid?"list-group-item-success":"list-group-item-danger"}`,children:[e.jsx("div",{children:e.jsxs("strong",{children:["  ",ws.taskWeightSum,"."]})}),e.jsx("span",{style:{fontSize:"1.5rem"},children:ws.isTaskWeightValid?"":""})]})]})]}),!us.skipValidation&&e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"fw-semibold mb-2",children:"  "}),e.jsxs("ul",{className:"list-group",children:[e.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${us.hasOngoingWeightedExams?"list-group-item-danger":"list-group-item-success"}`,children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("strong",{children:us.hasOngoingWeightedExams?"    ":"  ."}),us.hasOngoingWeightedExams&&e.jsx("a",{href:`/classroom/professor/${a}/exam`,className:"text-decoration-none small",children:"  "})]}),e.jsx("span",{style:{fontSize:"1.5rem"},children:us.hasOngoingWeightedExams?"":""})]}),e.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${us.isExamWeightValid?"list-group-item-success":"list-group-item-danger"}`,children:[e.jsx("div",{children:e.jsxs("strong",{children:["  ",us.examWeightSum,"."]})}),e.jsx("span",{style:{fontSize:"1.5rem"},children:us.isExamWeightValid?"":""})]})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("h6",{className:"fw-semibold mb-2",children:"  "}),e.jsxs("ul",{className:"list-group",children:[e.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${fa.hasIncompleteAttendance?"list-group-item-danger":"list-group-item-success"}`,children:[e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("strong",{children:fa.hasIncompleteAttendance?"   ":"  ."}),fa.hasIncompleteAttendance&&e.jsx("a",{href:`/classroom/professor/${a}/attendance`,className:"text-decoration-none small",children:"  "})]}),e.jsx("span",{style:{fontSize:"1.5rem"},children:fa.hasIncompleteAttendance?"":""})]}),fa.hasIncompleteAttendance&&e.jsx("li",{className:"list-group-item list-group-item-warning py-2",children:e.jsxs("div",{className:"small",children:[e.jsx("strong",{children:"  :"}),e.jsx("div",{className:"mt-1",children:fa.incompleteRounds.map((xe,ke)=>e.jsxs("span",{className:"badge bg-warning text-dark me-1",children:[xe.lctRound,""]},ke))})]})})]})]}),e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("div",{children:tl?e.jsx("span",{className:"text-success",children:"     ."}):e.jsx("span",{className:"text-danger",children:"    ."})}),e.jsx("button",{className:"btn btn-primary",disabled:!tl,onClick:()=>Se(!0),children:"  "})]})]})]})}),e.jsx("div",{className:"col-md-6",children:e.jsxs("div",{className:"card h-100",children:[e.jsx("div",{className:"card-header",children:e.jsx("h2",{className:"h5 mb-0",children:""})}),e.jsx("div",{className:"card-body",children:b.length>0?e.jsxs("div",{className:"vstack gap-3",children:[e.jsxs("div",{children:[e.jsx("h6",{className:"fw-semibold mb-2",children:" "}),e.jsx("div",{className:"progress",style:{height:"30px"},children:b.map((xe,ke)=>{const Ce=["#3498db","#e74c3c","#f39c12","#2ecc71","#9b59b6"],Re=Ce[ke%Ce.length];return e.jsxs("div",{className:"progress-bar d-flex align-items-center justify-content-center fw-semibold",role:"progressbar",style:{width:`${xe.ratio}%`,backgroundColor:Re,color:"#fff"},"aria-valuenow":xe.ratio,"aria-valuemin":"0","aria-valuemax":"100",children:[xe.gradeCriteriaName," ",xe.ratio,"%"]},ke)})}),e.jsx("div",{className:"mt-2 small text-muted",children:"  +   30%    F ."})]}),Jn.length>0&&e.jsx("div",{className:"alert alert-danger mb-0 py-2",children:e.jsxs("div",{className:"small",children:[e.jsxs("strong",{children:["  : ",Jn.length,""]}),e.jsx("div",{className:"mt-1",children:Jn.map((xe,ke)=>{const Ce=os.totalRounds,Re=(xe.noCnt||0)+(xe.excpCnt||0),H=(Re/Ce*100).toFixed(1),he=Rs.get(xe.enrollId),Ne=he&&(`${he.lastName||""}${he.firstName||""}`.trim()||he.studentName)||xe.enrollId;return e.jsxs("div",{className:"text-muted",children:[Ne,": ",Re,"  (",H,"%)"]},ke)})})]})}),w&&e.jsxs("div",{className:"border-top pt-3",children:[e.jsxs("h6",{className:"fw-semibold mb-2",children:[" : ",w.subjectTypeName||w.subjectTypeCd]}),w.subjectTypeCd==="SUBJ_RELATIVE"&&e.jsxs("div",{className:"small",children:[e.jsx("p",{className:"mb-2",children:"    A, B, C~D  ."}),S&&w.currentCap&&e.jsxs("div",{className:"bg-light p-2 rounded",children:[e.jsx("div",{className:"fw-semibold mb-1",children:"     :"}),(()=>{const xe=Math.round(w.currentCap*(S.A||0)/100),ke=Math.round(w.currentCap*(S.B||0)/100),Ce=w.currentCap-xe-ke;return e.jsxs("ul",{className:"mb-1 ps-3",children:[e.jsxs("li",{children:["A : ",xe," (",S.A||0,"%)"]}),e.jsxs("li",{children:["B : ",ke," (",S.B||0,"%)"]}),e.jsxs("li",{children:["C~D : ",Ce," (",100-(S.A||0)-(S.B||0),"%)"]})]})})(),e.jsx("div",{className:"text-muted",style:{fontSize:"0.85em"},children:"       ."})]})]}),w.subjectTypeCd==="SUBJ_ABSOLUTE"&&e.jsxs("div",{className:"small",children:[e.jsx("p",{className:"mb-2",children:"     ."}),e.jsxs("div",{className:"bg-light p-2 rounded",children:[e.jsx("div",{className:"fw-semibold mb-1",children:" :"}),e.jsxs("ul",{className:"mb-0 ps-3",children:[e.jsx("li",{children:"A+: 95 "}),e.jsx("li",{children:"A0: 90~94"}),e.jsx("li",{children:"B+: 85~89"}),e.jsx("li",{children:"B0: 80~84"}),e.jsx("li",{children:"C+: 75~79"}),e.jsx("li",{children:"C0: 70~74"}),e.jsx("li",{children:"D+: 65~69"}),e.jsx("li",{children:"D0: 60~64"}),e.jsx("li",{children:"F: 60 "})]})]})]}),w.subjectTypeCd==="SUBJ_PASSFAIL"&&e.jsxs("div",{className:"small",children:[e.jsx("p",{className:"mb-1",children:" PASS  FAIL ."}),e.jsx("div",{className:"text-muted",children:"      P(PASS)  F(FAIL) ."})]})]})]}):e.jsxs("div",{className:"text-center py-5",children:[e.jsx("i",{className:"bi bi-file-earmark-text display-4 d-block mb-3 opacity-25"}),e.jsx("p",{className:"text-muted mb-0",children:"  ."})]})})]})})]})}),ce&&e.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:"-1",children:e.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",style:{maxWidth:"1140px"},children:e.jsxs("div",{className:"modal-content",style:{height:"85vh",display:"flex",flexDirection:"column"},children:[e.jsxs("div",{className:"modal-header py-2",children:[e.jsx("h6",{className:"modal-title mb-0",children:" "}),e.jsx("button",{type:"button",className:"btn-close",onClick:()=>{Se(!1),Ve(1),Ke(null)},"aria-label":"Close"})]}),e.jsxs("div",{className:"modal-body",style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{className:`small ${we>=1?"fw-bold text-primary":"text-muted"}`,children:"1)  /"}),e.jsx("span",{className:`small ${we>=2?"fw-bold text-primary":"text-muted"}`,children:"2)  "}),e.jsx("span",{className:`small ${we>=3?"fw-bold text-primary":"text-muted"}`,children:"3)   "})]}),e.jsx("div",{className:"progress",style:{height:"8px"},children:e.jsx("div",{className:"progress-bar",style:{width:`${we/3*100}%`}})})]}),we===1?e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:e.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:[e.jsx("ul",{className:"nav nav-tabs mb-3",role:"tablist",style:{flexShrink:0},children:fr.map((xe,ke)=>{const Ce=b.find(he=>he.gradeCriteriaCd===xe.code),Re=xe.code==="TOTAL"||Ce&&Ce.ratio>0,H=Xe===ke;return e.jsx("li",{className:"nav-item",role:"presentation",children:e.jsxs("button",{className:`nav-link ${H?"active":""} ${Re?"":"disabled"}`,type:"button",onClick:()=>Re&&Ke(ke),disabled:!Re,style:H?{backgroundColor:"#0d6efd",color:"#fff",borderColor:"#0d6efd",borderBottomLeftRadius:0,borderBottomRightRadius:0,borderBottom:"none"}:Re?{backgroundColor:"#e7f3ff",color:"#0d6efd",borderColor:"#b6d4fe"}:{color:"#6c757d",backgroundColor:"#e9ecef",cursor:"not-allowed"},children:[xe.name," ",Ce?`(${Ce.ratio}%)`:""]})},ke)})}),e.jsxs("div",{className:"tab-content",style:{flex:1,overflowY:"auto",minHeight:0},children:[Xe===null&&e.jsxs("div",{className:"alert alert-info text-center py-5",children:[e.jsx("h5",{className:"mb-3",children:"     "}),e.jsx("p",{className:"mb-0 text-muted",children:"        ."})]}),fr.map((xe,ke)=>{const Ce=b.find(H=>H.gradeCriteriaCd===xe.code),Re=Xe===ke;return e.jsx("div",{className:`tab-pane fade ${Re?"show active":""}`,children:Re&&e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("h6",{className:"mb-0",children:[xe.name," ",Ce?`(${Ce.ratio}%)`:""]}),e.jsx("span",{className:"badge bg-primary",children:xe.code})]})}),e.jsxs("div",{className:"card-body p-3",children:[xe.code==="ATTD"&&e.jsx("div",{children:z===null?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:" ..."})}),e.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):z==="none"?e.jsx("div",{children:I.length===0?e.jsxs("div",{className:"alert alert-warning text-center py-5",children:[e.jsx("i",{className:"bi bi-exclamation-circle fs-1 mb-3 d-block"}),e.jsx("h5",{children:"   "}),e.jsx("p",{className:"mb-0",children:"    ."}),e.jsxs("button",{className:"btn btn-primary mt-3",onClick:pr,children:[e.jsx("i",{className:"bi bi-calculator me-2"})," "]})]}):e.jsxs("div",{children:[$&&e.jsx("div",{className:"bg-light p-3 rounded mb-3",children:e.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 flex-wrap",children:[e.jsxs("div",{className:"d-flex align-items-center gap-3 flex-wrap",children:[e.jsx("strong",{className:"me-2",children:"  :"}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"small",children:""}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:$.ATTD_OK||100,disabled:!0,style:{width:"60px",backgroundColor:"#e9ecef"}})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"small",children:""}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:$.ATTD_EXCP||80,onChange:H=>{const he=parseInt(H.target.value)||0;D({...$,ATTD_EXCP:he})},style:{width:"60px"}})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"small",children:""}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:$.ATTD_LATE||50,onChange:H=>{const he=parseInt(H.target.value)||0;D({...$,ATTD_LATE:he})},style:{width:"60px"}})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"small",children:""}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:$.ATTD_EARLY||50,onChange:H=>{const he=parseInt(H.target.value)||0;D({...$,ATTD_EARLY:he})},style:{width:"60px"}})]}),e.jsxs("div",{className:"d-flex align-items-center gap-2",children:[e.jsx("span",{className:"small",children:""}),e.jsx("input",{type:"number",className:"form-control form-control-sm",value:$.ATTD_NO||0,disabled:!0,style:{width:"60px",backgroundColor:"#e9ecef"}})]})]}),e.jsxs("button",{className:"btn btn-primary btn-sm",onClick:()=>{V([])},children:[e.jsx("i",{className:"bi bi-arrow-clockwise me-1"}),""]})]})}),e.jsxs("div",{className:"alert alert-warning py-2 mb-3",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"+     30%   F ."]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:" "}),e.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:I.map((H,he)=>{const Ne=Rs.get(H.enrollId),ve=Ne?`${Ne.lastName||""}${Ne.firstName||""}`.trim()||Ne.studentName:"",Oe=Ne?.studentNo||Ne?.userId||"";return e.jsxs("tr",{className:H.isFailed?"table-danger":"",children:[e.jsx("td",{className:"text-center small",children:Oe}),e.jsx("td",{className:"text-center fw-semibold",children:ve||H.enrollId}),e.jsx("td",{className:"text-center",children:H.details?.ok||0}),e.jsx("td",{className:"text-center",children:H.details?.excp||0}),e.jsx("td",{className:"text-center",children:H.details?.late||0}),e.jsx("td",{className:"text-center",children:H.details?.early||0}),e.jsx("td",{className:"text-center",children:H.details?.no||0}),e.jsx("td",{className:"text-center fw-bold",children:H.details?.totalRounds||0}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:`badge ${H.isFailed?"bg-danger":"bg-primary"} fs-6 px-3 py-2`,children:H.isFailed?"F":H.score.toFixed(2)})}),e.jsx("td",{className:"text-center",children:H.isFailed&&H.reason&&e.jsx("span",{className:"badge bg-danger small",children:H.reason})})]},he)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-success",onClick:Zn,children:[e.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}):e.jsxs("div",{children:[(z==="all"||z==="partial")&&e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),z==="partial"&&e.jsxs("div",{className:"alert alert-warning mb-3",children:[e.jsx("strong",{children:"  :"}),e.jsx("div",{className:"mt-2",children:T.filter(H=>!_.has(H.enrollId)).map((H,he)=>{const Ne=`${H.lastName||""}${H.firstName||""}`.trim()||H.studentName,ve=H.studentNo||H.userId;return e.jsxs("span",{className:"badge bg-warning text-dark me-2",children:[ve," ",Ne]},he)})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:T.map((H,he)=>{const Ne=_.get(H.enrollId),ve=`${H.lastName||""}${H.firstName||""}`.trim()||H.studentName,Oe=H.studentNo||H.userId;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Oe}),e.jsx("td",{className:"text-center fw-semibold",children:ve}),e.jsx("td",{className:"text-center",children:Ne!==void 0?e.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:Ne.toFixed(2)}):e.jsx("span",{className:"badge bg-secondary fs-6 px-3 py-2",children:"  "})})]},he)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-warning",onClick:()=>{X("none"),V([])},children:[e.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]})}),xe.code==="EXAM"&&e.jsx("div",{children:P===null?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:" ..."})}),e.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):P==="none"?e.jsx("div",{children:G.length===0?e.jsxs("div",{className:"alert alert-warning text-center py-5",children:[e.jsx("i",{className:"bi bi-exclamation-circle fs-1 mb-3 d-block"}),e.jsx("h5",{children:"   "}),e.jsx("p",{className:"mb-0",children:"    ."}),e.jsxs("button",{className:"btn btn-primary mt-3",onClick:wn,children:[e.jsx("i",{className:"bi bi-calculator me-2"})," "]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",style:{fontSize:"0.9rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",style:{minWidth:"80px"},children:""}),e.jsx("th",{className:"text-center",style:{minWidth:"80px"},children:""}),G[0]?.details?.map((H,he)=>e.jsxs("th",{className:"text-center",style:{minWidth:"100px"},children:[H.examName,e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["(",H.weight,"%)"]})]},he)),e.jsx("th",{className:"text-center bg-light",style:{minWidth:"100px"},children:e.jsx("strong",{children:""})})]})}),e.jsx("tbody",{children:G.map((H,he)=>{const Ne=T.find(Ae=>Ae.enrollId===H.enrollId),ve=Ne?`${Ne.lastName||""}${Ne.firstName||""}`.trim()||Ne.studentName:"",Oe=Ne?Ne.studentNo||Ne.userId:"";return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Oe}),e.jsx("td",{className:"text-center fw-semibold",children:ve}),H.details?.map((Ae,_e)=>e.jsx("td",{className:"text-center",children:Ae.isTarget?Ae.hasSubmission?e.jsx("span",{className:"badge bg-info text-white",children:Ae.score.toFixed(2)}):e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-secondary text-white",children:""})},_e)),e.jsx("td",{className:"text-center bg-light",children:e.jsx("strong",{className:"fs-6 text-primary",style:{cursor:"help"},title:(()=>{const Ae=[];return H.details?.forEach(_e=>{if(_e.isTarget&&_e.hasSubmission){const Ie=_e.score*_e.weight/100;Ae.push(`${_e.examName}: ${_e.score}  ${_e.weight}% = ${Ie.toFixed(2)}`)}}),Ae.length>0?Ae.join(`
`):" "})(),children:H.score.toFixed(2)})})]},he)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-success",onClick:async()=>{if(G.length===0){alert("   .");return}if(confirm("   ?"))try{const H=G.map(ve=>({enrollId:ve.enrollId,gradeCriteriaCd:"EXAM",rawScore:ve.score})),he=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(H)});if(!he.ok)throw new Error(`(${he.status})    .`);alert("   .");const Ne=new Map;G.forEach(ve=>{Ne.set(ve.enrollId,ve.score)}),U(Ne),k("all"),se([])}catch(H){console.error("   :",H),alert(H.message||"     .")}},children:[e.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}):e.jsxs("div",{children:[(P==="all"||P==="partial")&&e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),P==="partial"&&e.jsxs("div",{className:"alert alert-warning mb-3",children:[e.jsx("strong",{children:"  :"}),e.jsx("div",{className:"mt-2",children:T.filter(H=>!L.has(H.enrollId)).map((H,he)=>{const Ne=`${H.lastName||""}${H.firstName||""}`.trim()||H.studentName,ve=H.studentNo||H.userId;return e.jsxs("span",{className:"badge bg-warning text-dark me-2",children:[ve," ",Ne]},he)})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:T.map((H,he)=>{const Ne=L.get(H.enrollId),ve=`${H.lastName||""}${H.firstName||""}`.trim()||H.studentName,Oe=H.studentNo||H.userId;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Oe}),e.jsx("td",{className:"text-center fw-semibold",children:ve}),e.jsx("td",{className:"text-center",children:Ne!==void 0?e.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:Ne.toFixed(2)}):e.jsx("span",{className:"badge bg-secondary fs-6 px-3 py-2",children:"  "})})]},he)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-warning",onClick:async()=>{k("none"),await wn()},children:[e.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]})}),xe.code==="TASK"&&e.jsx("div",{children:O===null?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:" ..."})}),e.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):O==="none"?e.jsx("div",{children:N.length===0?e.jsxs("div",{className:"alert alert-warning text-center py-5",children:[e.jsx("i",{className:"bi bi-exclamation-circle fs-1 mb-3 d-block"}),e.jsx("h5",{children:"   "}),e.jsx("p",{className:"mb-0",children:"    ."}),e.jsxs("button",{className:"btn btn-primary mt-3",onClick:Sn,children:[e.jsx("i",{className:"bi bi-calculator me-2"})," "]})]}):e.jsxs("div",{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",style:{fontSize:"0.9rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",style:{minWidth:"80px"},children:""}),e.jsx("th",{className:"text-center",style:{minWidth:"80px"},children:""}),N[0]?.details?.indivTasks?.map((H,he)=>e.jsxs("th",{className:"text-center",style:{minWidth:"100px"},children:[H.taskName,e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["(",H.weight,"%)"]})]},`indiv-${he}`)),N[0]?.details?.groupTasks?.map((H,he)=>e.jsxs("th",{className:"text-center",style:{minWidth:"100px"},children:[H.taskName,e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["(",H.weight,"%)"]})]},`group-${he}`)),e.jsx("th",{className:"text-center bg-light",style:{minWidth:"100px"},children:e.jsx("strong",{children:""})})]})}),e.jsx("tbody",{children:N.map((H,he)=>{const Ne=T.find(Ae=>Ae.enrollId===H.enrollId),ve=Ne?`${Ne.lastName||""}${Ne.firstName||""}`.trim()||Ne.studentName:"",Oe=Ne?Ne.studentNo||Ne.userId:"";return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Oe}),e.jsx("td",{className:"text-center fw-semibold",children:ve}),H.details?.indivTasks?.map((Ae,_e)=>e.jsx("td",{className:"text-center",children:Ae.isTarget?Ae.hasSubmission?e.jsx("span",{className:"badge bg-info text-white",children:Ae.score.toFixed(2)}):e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-secondary text-white",children:""})},`indiv-${_e}`)),H.details?.groupTasks?.map((Ae,_e)=>e.jsx("td",{className:"text-center",children:Ae.isTarget?Ae.hasSubmission?e.jsx("span",{className:"badge bg-info text-white",children:Ae.score.toFixed(2)}):e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-secondary text-white",children:""})},`group-${_e}`)),e.jsx("td",{className:"text-center bg-light",children:e.jsx("strong",{className:"fs-6 text-primary",style:{cursor:"help"},title:(()=>{const Ae=[];return H.details?.indivTasks?.forEach(_e=>{if(_e.isTarget&&_e.hasSubmission){const Ie=_e.score*_e.weight/100;Ae.push(`${_e.taskName}: ${_e.score}  ${_e.weight}% = ${Ie.toFixed(2)}`)}}),H.details?.groupTasks?.forEach(_e=>{if(_e.isTarget&&_e.hasSubmission){const Ie=_e.score*_e.weight/100;Ae.push(`${_e.taskName}: ${_e.score}  ${_e.weight}% = ${Ie.toFixed(2)}`)}}),Ae.length>0?Ae.join(`
`):" "})(),children:H.score.toFixed(2)})})]},he)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-success",onClick:async()=>{if(N.length===0){alert("   .");return}if(confirm("   ?"))try{const H=N.map(ve=>({enrollId:ve.enrollId,gradeCriteriaCd:"TASK",rawScore:ve.score})),he=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(H)});if(!he.ok)throw new Error(`(${he.status})    .`);alert("   .");const Ne=new Map;N.forEach(ve=>{Ne.set(ve.enrollId,ve.score)}),Q(Ne),Y("all"),M([])}catch(H){console.error("   :",H),alert(H.message||"     .")}},children:[e.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}):e.jsxs("div",{children:[(O==="all"||O==="partial")&&e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),O==="partial"&&e.jsxs("div",{className:"alert alert-warning mb-3",children:[e.jsx("strong",{children:"  :"}),e.jsx("div",{className:"mt-2",children:T.filter(H=>!F.has(H.enrollId)).map((H,he)=>{const Ne=`${H.lastName||""}${H.firstName||""}`.trim()||H.studentName,ve=H.studentNo||H.userId;return e.jsxs("span",{className:"badge bg-warning text-dark me-2",children:[ve," ",Ne]},he)})})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:T.map((H,he)=>{const Ne=F.get(H.enrollId),ve=`${H.lastName||""}${H.firstName||""}`.trim()||H.studentName,Oe=H.studentNo||H.userId;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Oe}),e.jsx("td",{className:"text-center fw-semibold",children:ve}),e.jsx("td",{className:"text-center",children:Ne!==void 0?e.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:Ne.toFixed(2)}):e.jsx("span",{className:"badge bg-secondary fs-6 px-3 py-2",children:"  "})})]},he)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-warning",onClick:async()=>{Y("none"),await Sn()},children:[e.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]})}),xe.code==="PRAC"&&e.jsx("div",{children:te===null?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:" ..."})}),e.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):te==="all"?e.jsxs("div",{children:[e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:T.map((H,he)=>{const Ne=q.get(H.enrollId),ve=`${H.lastName||""}${H.firstName||""}`.trim()||H.studentName,Oe=H.studentNo||H.userId;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Oe}),e.jsx("td",{className:"text-center fw-semibold",children:ve}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:Ne.toFixed(2)})})]},he)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-warning",onClick:()=>{const H={};q.forEach((he,Ne)=>{H[Ne]=he}),be(H),me("none")},children:[e.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]}):e.jsxs("div",{children:[te==="partial"&&e.jsxs("div",{className:"alert alert-warning mb-3",children:[e.jsx("strong",{children:"    ."}),"       ."]}),e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"      . (0-100)"]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",style:{width:"150px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"150px"},children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:T.map((H,he)=>{const Ne=`${H.lastName||""}${H.firstName||""}`.trim()||H.studentName,ve=H.studentNo||H.userId,Oe=oe[H.enrollId]??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:ve}),e.jsx("td",{className:"text-center fw-semibold",children:Ne}),e.jsx("td",{className:"text-center",children:e.jsx("input",{type:"number",className:"form-control text-center",placeholder:"0-100",min:"0",max:"100",step:"0.01",value:Oe,onChange:Ae=>{const _e=Ae.target.value;be(Ie=>({...Ie,[H.enrollId]:_e}))},style:{maxWidth:"120px",margin:"0 auto"}})})]},he)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-success",onClick:async()=>{if(Object.keys(oe).length===0){alert("   .");return}if(confirm("   ?"))try{const H=T.map(ve=>({enrollId:ve.enrollId,gradeCriteriaCd:"PRAC",rawScore:parseFloat(oe[ve.enrollId]||0)})),he=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(H)});if(!he.ok)throw new Error(`(${he.status})    .`);alert("   .");const Ne=new Map;H.forEach(ve=>{Ne.set(ve.enrollId,ve.rawScore)}),ee(Ne),me("all"),be({})}catch(H){console.error("   :",H),alert(H.message||"     .")}},children:[e.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}),xe.code==="MISC"&&e.jsx("div",{children:Ee===null?e.jsxs("div",{className:"text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:e.jsx("span",{className:"visually-hidden",children:" ..."})}),e.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):Ee==="all"?e.jsxs("div",{children:[e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:T.map((H,he)=>{const Ne=J.get(H.enrollId),ve=`${H.lastName||""}${H.firstName||""}`.trim()||H.studentName,Oe=H.studentNo||H.userId;return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Oe}),e.jsx("td",{className:"text-center fw-semibold",children:ve}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:Ne.toFixed(2)})})]},he)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-warning",onClick:()=>{const H={};J.forEach((he,Ne)=>{H[Ne]=he}),fe(H),$e("none")},children:[e.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]}):e.jsxs("div",{children:[Ee==="partial"&&e.jsxs("div",{className:"alert alert-warning mb-3",children:[e.jsx("strong",{children:"    ."}),"       ."]}),e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),"      . (0-100)"]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-primary",children:[e.jsx("th",{className:"text-center",style:{width:"150px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"150px"},children:""}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsx("tbody",{children:T.map((H,he)=>{const Ne=`${H.lastName||""}${H.firstName||""}`.trim()||H.studentName,ve=H.studentNo||H.userId,Oe=ue[H.enrollId]??"";return e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:ve}),e.jsx("td",{className:"text-center fw-semibold",children:Ne}),e.jsx("td",{className:"text-center",children:e.jsx("input",{type:"number",className:"form-control text-center",placeholder:"0-100",min:"0",max:"100",step:"0.01",value:Oe,onChange:Ae=>{const _e=Ae.target.value;fe(Ie=>({...Ie,[H.enrollId]:_e}))},style:{maxWidth:"120px",margin:"0 auto"}})})]},he)})})]})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs("button",{className:"btn btn-success",onClick:async()=>{if(Object.keys(ue).length===0){alert("   .");return}if(confirm("   ?"))try{const H=T.map(ve=>({enrollId:ve.enrollId,gradeCriteriaCd:"MISC",rawScore:parseFloat(ue[ve.enrollId]||0)})),he=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(H)});if(!he.ok)throw new Error(`(${he.status})    .`);alert("   .");const Ne=new Map;H.forEach(ve=>{Ne.set(ve.enrollId,ve.rawScore)}),re(Ne),$e("all"),fe({})}catch(H){console.error("   :",H),alert(H.message||"     .")}},children:[e.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}),xe.code==="TOTAL"&&e.jsxs("div",{children:[Fe.length===0&&e.jsx("div",{className:"table-responsive mb-4",children:e.jsxs("table",{className:"table table-bordered align-middle",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",style:{width:"150px"},children:" "}),e.jsx("th",{className:"text-center",style:{width:"100px"},children:" "}),e.jsx("th",{className:"text-center",style:{width:"120px"},children:"  "}),e.jsx("th",{className:"text-center",children:""})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:"text-center fw-semibold",children:""}),e.jsxs("td",{className:"text-center",children:[b.find(H=>H.gradeCriteriaCd==="ATTD")?.ratio||0,"%"]}),e.jsx("td",{className:"text-center",children:z===null?e.jsx("span",{className:"badge bg-secondary",children:"..."}):z==="all"?e.jsx("span",{className:"badge bg-success",children:""}):z==="partial"?e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-danger",children:" "})}),e.jsxs("td",{className:"small",children:[z==="all"&&"    .",z==="partial"&&"    .",z==="none"&&"   ."]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-center fw-semibold",children:""}),e.jsxs("td",{className:"text-center",children:[b.find(H=>H.gradeCriteriaCd==="TASK")?.ratio||0,"%"]}),e.jsx("td",{className:"text-center",children:O===null?e.jsx("span",{className:"badge bg-secondary",children:"..."}):O==="all"?e.jsx("span",{className:"badge bg-success",children:""}):O==="partial"?e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-danger",children:" "})}),e.jsxs("td",{className:"small",children:[O==="all"&&"    .",O==="partial"&&"    .",O==="none"&&"   ."]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-center fw-semibold",children:""}),e.jsxs("td",{className:"text-center",children:[b.find(H=>H.gradeCriteriaCd==="EXAM")?.ratio||0,"%"]}),e.jsx("td",{className:"text-center",children:P===null?e.jsx("span",{className:"badge bg-secondary",children:"..."}):P==="all"?e.jsx("span",{className:"badge bg-success",children:""}):P==="partial"?e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-danger",children:" "})}),e.jsxs("td",{className:"small",children:[P==="all"&&"    .",P==="partial"&&"    .",P==="none"&&"   ."]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-center fw-semibold",children:""}),e.jsxs("td",{className:"text-center",children:[b.find(H=>H.gradeCriteriaCd==="PRAC")?.ratio||0,"%"]}),e.jsx("td",{className:"text-center",children:te===null?e.jsx("span",{className:"badge bg-secondary",children:"..."}):te==="all"?e.jsx("span",{className:"badge bg-success",children:""}):te==="partial"?e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-danger",children:" "})}),e.jsxs("td",{className:"small",children:[te==="all"&&"    .",te==="partial"&&"    .",te==="none"&&"   ."]})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"text-center fw-semibold",children:""}),e.jsxs("td",{className:"text-center",children:[b.find(H=>H.gradeCriteriaCd==="MISC")?.ratio||0,"%"]}),e.jsx("td",{className:"text-center",children:Ee===null?e.jsx("span",{className:"badge bg-secondary",children:"..."}):Ee==="all"?e.jsx("span",{className:"badge bg-success",children:""}):Ee==="partial"?e.jsx("span",{className:"badge bg-warning text-dark",children:""}):e.jsx("span",{className:"badge bg-danger",children:" "})}),e.jsxs("td",{className:"small",children:[Ee==="all"&&"    .",Ee==="partial"&&"    .",Ee==="none"&&"   ."]})]})]})]})}),Fe.length===0&&(()=>{const H=b.filter(ve=>ve.ratio>0),he={ATTD:z,TASK:O,EXAM:P,PRAC:te,MISC:Ee},Ne=H.every(ve=>he[ve.gradeCriteriaCd]==="all");return H.some(ve=>he[ve.gradeCriteriaCd]==="partial"),H.some(ve=>he[ve.gradeCriteriaCd]==="none"),e.jsx("div",{className:"mb-4",children:Ne?e.jsxs("div",{className:"alert alert-success",children:[e.jsx("i",{className:"bi bi-check-circle-fill me-2"}),e.jsx("strong",{children:"   !"}),"     ."]}):e.jsxs("div",{className:"alert alert-warning",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),e.jsx("strong",{children:"   ."}),"        ."]})})})(),Fe.length===0&&e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx("button",{className:"btn btn-success btn-lg",onClick:Qn,disabled:(()=>{const H=b.filter(ve=>ve.ratio>0),he={ATTD:z,TASK:O,EXAM:P,PRAC:te,MISC:Ee};return!H.every(ve=>he[ve.gradeCriteriaCd]==="all")||es})(),children:es?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"})," ..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"bi bi-calculator me-2"}),"   "]})})}),ts&&e.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:ts.message||String(ts)}),Fe.length>0?e.jsxs("div",{className:"mt-4",children:[e.jsx("h6",{className:"fw-semibold mb-3",children:"  "}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",style:{fontSize:"0.9rem"},children:[e.jsx("thead",{children:e.jsxs("tr",{className:"table-success",children:[e.jsx("th",{className:"text-center",style:{minWidth:"90px"},children:""}),e.jsx("th",{className:"text-center",style:{minWidth:"90px"},children:""}),Ss.map(H=>e.jsxs("th",{className:"text-center",style:{minWidth:"120px"},children:[H.label,e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["(",H.ratio,"%)"]})]},H.code)),e.jsx("th",{className:"text-center bg-light",style:{minWidth:"120px"},children:e.jsx("strong",{children:""})})]})}),e.jsx("tbody",{children:Fe.map(H=>{const he=Rs.get(H.enrollId),Ne=he&&(`${he.lastName||""}${he.firstName||""}`.trim()||he.studentName)||"-",ve=he&&(he.studentNo||he.userId)||"-",Oe=H.hasMissing??H.breakdown.some(Ae=>Ae.rawScore===null||Ae.rawScore===void 0);return e.jsxs("tr",{className:Oe?"table-warning":"",children:[e.jsx("td",{className:"text-center",children:ve}),e.jsx("td",{className:"text-center fw-semibold",children:Ne}),H.breakdown.map(Ae=>{const _e=Ae.rawScore!==null&&Ae.rawScore!==void 0,Ie=typeof Ae.weightedScore=="number"?Ae.weightedScore:0;return e.jsx("td",{className:"text-center",children:_e?e.jsxs("div",{className:"d-flex flex-column align-items-center gap-1",children:[e.jsx("span",{className:"badge bg-primary-subtle text-primary border border-primary-subtle",children:Ae.rawScore.toFixed(2)}),e.jsxs("small",{className:"text-muted",children:[" ",Ae.ratio,"% = ",Ie.toFixed(2)]})]}):e.jsx("span",{className:"badge bg-warning text-dark",children:""})},Ae.code)}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:`badge ${Oe?"bg-warning text-dark":"bg-success text-white"} fs-6`,children:H.totalScore.toFixed(2)})})]},H.enrollId)})})]})})]}):!es&&e.jsx("div",{className:"text-muted mt-3",children:"     ."})]})]})]})},ke)})]})]})}):we===2?e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:[(console.log("=== modalStep 2   ==="),console.log("totalScorePreview:",Fe),console.log("totalScorePreview.length:",Fe.length),console.log("studentMap:",Rs),console.log("studentMap.size:",Rs?.size),console.log("lectureInfo:",w),console.log("evaluateInterval:",S),null),!w||w.subjectTypeCd!=="SUBJ_RELATIVE"?e.jsxs("div",{className:"alert alert-info",children:[e.jsx("i",{className:"bi bi-info-circle me-2"}),e.jsx("strong",{children:" "}),e.jsxs("p",{className:"mb-0 mt-2",children:[w?.subjectTypeCd==="SUBJ_ABSOLUTE"&&"",w?.subjectTypeCd==="SUBJ_PASSFAIL"&&"PASS or FAIL",!w&&"  "]})]}):e.jsxs("div",{children:[e.jsx("h5",{className:"mb-4",children:"   ()"}),Fe.length===0?e.jsxs("div",{className:"alert alert-warning",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),e.jsx("strong",{children:"  "}),e.jsx("p",{className:"mb-0 mt-2",children:'   ""  "   "   .'})]}):(()=>{console.log("===     ==="),console.log("totalScorePreview :",Fe);const xe=Fe.map(Te=>{const Be=Rs.get(Te.enrollId);console.log(`enrollId ${Te.enrollId}:`,Be);const De=Be&&(`${Be.lastName||""}${Be.firstName||""}`.trim()||Be.studentName)||"-",ze=Be&&(Be.studentNo||Be.userId)||"-",Qe=Te.breakdown.find(Vt=>Vt.code==="ATTD")?.rawScore||0,Rt={enrollId:Te.enrollId,studentNo:ze,name:De,totalScore:Te.totalScore,attendanceScore:Qe,isFail:Qe===0};return console.log("  :",Rt),Rt});console.log("studentsWithGrades:",xe);const ke=xe.filter(Te=>Te.isFail),Ce=xe.filter(Te=>!Te.isFail);console.log("failStudents:",ke),console.log("regularStudents:",Ce),Ce.sort((Te,Be)=>Be.totalScore-Te.totalScore),console.log("  regularStudents:",Ce);const Re=Math.round(w.currentCap*(S?.A||0)/100),H=Math.round(w.currentCap*(S?.B||0)/100);console.log("  :",{currentCap:w.currentCap,evaluateInterval:S,aCount:Re,bCount:H});const he=Ce.map((Te,Be)=>{let De="C~D";return Be<Re?De="A":Be<Re+H&&(De="B"),{...Te,interval:De,rank:Be+1}}),Ne=he.filter(Te=>Te.interval==="A"),ve=he.filter(Te=>Te.interval==="B"),Oe=he.filter(Te=>Te.interval==="C~D");console.log("  :",{aStudents:Ne,bStudents:ve,cdStudents:Oe});const Ae={A:xt.A!==null?xt.A:Math.floor(Ne.length/2),B:xt.B!==null?xt.B:Math.floor(ve.length/2),CD:xt.CD.length>0?xt.CD:[Math.floor(Oe.length/4),Math.floor(Oe.length/2),Math.floor(Oe.length*3/4)]},_e=(Te,Be,De)=>{if(De==="A")return Be<=(Ae.A||0)?"A+":"A0";if(De==="B")return Be<=(Ae.B||0)?"B+":"B0";if(De==="C~D"){const ze=Ae.CD||[];return Be<=(ze[0]||0)?"C+":Be<=(ze[1]||0)?"C0":Be<=(ze[2]||0)?"D+":"D0"}return De},Ie=(Te,Be,De,ze)=>{const tt=(at,yt)=>Ze=>{Ze.dataTransfer.effectAllowed="move",ha({interval:yt,originalIdx:at})},Qe=at=>{at.preventDefault(),at.dataTransfer.dropEffect="move"},Rt=at=>yt=>{if(yt.preventDefault(),!Ua)return;const{interval:Ze,originalIdx:Ws}=Ua;if(ze==="A"&&Ze==="A")Kn(ss=>({...ss,A:at}));else if(ze==="B"&&Ze==="B")Kn(ss=>({...ss,B:at}));else if(ze==="C~D"&&Ze==="C~D"){const ss=Ae.CD.indexOf(Ws);if(ss!==-1){const xr=[...Ae.CD];xr[ss]=at,Kn(sl=>({...sl,CD:xr.sort((al,Ks)=>al-Ks)}))}}ha(null)},Vt=()=>{ha(null)};return e.jsxs("div",{className:"mb-3",children:[e.jsxs("h6",{className:"fw-semibold mb-2",children:[Be," (",Te.length,")"]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered table-hover mb-0",style:{fontSize:"0.85rem"},children:[e.jsx("thead",{className:De,children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",style:{width:"60px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""})]})}),e.jsx("tbody",{children:Te.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"5",className:"text-center text-muted py-3",children:"   ."})}):e.jsx(e.Fragment,{children:Te.map((at,yt)=>{const Ze=_e(at,yt,ze),Ws=ze==="A"&&yt===Ae.A||ze==="B"&&yt===Ae.B||ze==="C~D"&&Ae.CD.includes(yt);return e.jsx(qs.Fragment,{children:e.jsxs("tr",{style:{position:"relative",borderBottom:Ws?"3px solid #dc3545":void 0},onDragOver:Qe,onDrop:Rt(yt),children:[e.jsx("td",{className:"text-center",children:at.rank||"-"}),e.jsx("td",{className:"text-center",children:at.studentNo}),e.jsx("td",{className:"text-center",children:at.name}),e.jsxs("td",{className:"text-center",style:{position:"relative"},children:[at.totalScore.toFixed(2),Ws&&e.jsx("div",{draggable:!0,onDragStart:tt(yt,ze),onDragEnd:Vt,style:{position:"absolute",right:"-12px",top:"50%",transform:"translateY(-50%)",width:"24px",height:"24px",borderRadius:"50%",padding:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",lineHeight:1,border:"2px solid white",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",backgroundColor:"#dc3545",color:"white",cursor:"grab",userSelect:"none",zIndex:100},onMouseDown:ss=>ss.currentTarget.style.cursor="grabbing",onMouseUp:ss=>ss.currentTarget.style.cursor="grab",children:""})]}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:`badge ${Ze.startsWith("A")?"bg-success":Ze.startsWith("B")?"bg-primary":Ze.startsWith("C")||Ze.startsWith("D")?"bg-info":"bg-danger"}`,children:Ze})})]})},at.enrollId)})})})]})})]})};return e.jsxs("div",{children:[ke.length>0&&e.jsxs("div",{className:"mb-4 p-3 bg-danger bg-opacity-10 border border-danger rounded",children:[e.jsxs("h6",{className:"fw-semibold mb-2 text-danger",children:[e.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"F  ( 0) (",ke.length,")"]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-bordered table-hover mb-0",style:{fontSize:"0.85rem"},children:[e.jsx("thead",{className:"table-danger",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""})]})}),e.jsx("tbody",{children:ke.map(Te=>e.jsxs("tr",{children:[e.jsx("td",{className:"text-center",children:Te.studentNo}),e.jsx("td",{className:"text-center",children:Te.name}),e.jsx("td",{className:"text-center",children:Te.totalScore.toFixed(2)}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:"badge bg-danger",children:"F"})})]},Te.enrollId))})]})})]}),e.jsxs("div",{className:"alert alert-info mb-3",children:[e.jsx("div",{className:"fw-semibold mb-2",children:"   "}),e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("span",{children:["A: ",Ne.length,""]}),e.jsxs("span",{children:["B: ",ve.length,""]}),e.jsxs("span",{children:["C~D: ",Oe.length,""]}),ke.length>0&&e.jsxs("span",{className:"text-danger",children:["F: ",ke.length,""]})]})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-md-4",children:Ie(Ne,"A ","table-success","A")}),e.jsx("div",{className:"col-md-4",children:Ie(ve,"B ","table-primary","B")}),e.jsx("div",{className:"col-md-4",children:Ie(Oe,"C~D ","table-info","C~D")})]})]})})()]})]})}):e.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:[e.jsx("h5",{className:"mb-4",children:"   "}),e.jsxs("div",{className:"card mb-3",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsx("h6",{className:"mb-0",children:"  "})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:" :"})," ",w?.subjectTypeName||"-"]}),e.jsxs("div",{className:"col-md-6",children:[e.jsx("strong",{children:" :"})," ",w?.currentCap||0,""]})]})})]}),e.jsxs("div",{className:"card mb-3",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsx("h6",{className:"mb-0",children:"  "})}),e.jsx("div",{className:"card-body",children:e.jsx("div",{className:"d-flex gap-3 flex-wrap",children:b.filter(xe=>xe.ratio>0).map(xe=>e.jsxs("div",{className:"badge bg-primary fs-6",children:[xe.gradeCriteriaName,": ",xe.ratio,"%"]},xe.gradeCriteriaCd))})})]}),w?.subjectTypeCd==="SUBJ_RELATIVE"&&S&&e.jsxs("div",{className:"card mb-3",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsx("h6",{className:"mb-0",children:"  "})}),e.jsx("div",{className:"card-body",children:e.jsxs("div",{className:"d-flex gap-3",children:[e.jsxs("span",{className:"badge bg-success fs-6",children:["A : ",S.A||0,"%"]}),e.jsxs("span",{className:"badge bg-primary fs-6",children:["B : ",S.B||0,"%"]}),e.jsxs("span",{className:"badge bg-info fs-6",children:["C~D : ",100-(S.A||0)-(S.B||0),"%"]})]})})]}),e.jsxs("div",{className:"card",children:[e.jsx("div",{className:"card-header bg-light",children:e.jsx("h6",{className:"mb-0",children:"   ( )"})}),e.jsx("div",{className:"card-body",children:(()=>{if(Fe.length===0)return e.jsx("div",{className:"alert alert-warning",children:"  .     ."});const xe=Fe.map(H=>{const he=Rs.get(H.enrollId),Ne=he&&(`${he.lastName||""}${he.firstName||""}`.trim()||he.studentName)||"-",ve=he&&(he.studentNo||he.userId)||"-",_e=(H.breakdown.find(Te=>Te.code==="ATTD")?.rawScore||0)===0;let Ie="-";if(_e)Ie="F";else if(w?.subjectTypeCd==="SUBJ_RELATIVE"){const Te=Fe.map(De=>{const ze=De.breakdown.find(tt=>tt.code==="ATTD");return{enrollId:De.enrollId,totalScore:De.totalScore,isFail:(ze?.rawScore||0)===0}}).filter(De=>!De.isFail).sort((De,ze)=>ze.totalScore-De.totalScore),Be=Te.findIndex(De=>De.enrollId===H.enrollId);if(Be!==-1){const De=Math.round(w.currentCap*(S?.A||0)/100),ze=Math.round(w.currentCap*(S?.B||0)/100);let tt="C~D";Be<De?tt="A":Be<De+ze&&(tt="B");const Qe={A:xt.A!==null?xt.A:Math.floor(De/2),B:xt.B!==null?xt.B:Math.floor(ze/2),CD:xt.CD.length>0?xt.CD:[Math.floor((w.currentCap-De-ze)/4),Math.floor((w.currentCap-De-ze)/2),Math.floor((w.currentCap-De-ze)*3/4)]};if(tt==="A")Ie=Te.slice(0,De).findIndex(at=>at.enrollId===H.enrollId)<=Qe.A?"A+":"A0";else if(tt==="B")Ie=Te.slice(De,De+ze).findIndex(at=>at.enrollId===H.enrollId)<=Qe.B?"B+":"B0";else{const Vt=Te.slice(De+ze).findIndex(yt=>yt.enrollId===H.enrollId),at=Qe.CD;Vt<=(at[0]||0)?Ie="C+":Vt<=(at[1]||0)?Ie="C0":Vt<=(at[2]||0)?Ie="D+":Ie="D0"}}}return{enrollId:H.enrollId,studentNo:ve,name:Ne,totalScore:H.totalScore,finalGrade:Ie,isFail:_e,breakdown:H.breakdown}}),ke=xe.filter(H=>H.isFail),Re=[...xe.filter(H=>!H.isFail),...ke];return e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-sm table-hover align-middle mb-0",style:{fontSize:"0.9rem"},children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-center",style:{width:"60px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),e.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),Ss.map(H=>e.jsxs("th",{className:"text-center",style:{width:"80px"},children:[H.label,e.jsx("br",{}),e.jsxs("small",{className:"text-muted",children:["(",H.ratio,"%)"]})]},H.code)),e.jsx("th",{className:"text-center bg-light",style:{width:"80px"},children:e.jsx("strong",{children:""})}),e.jsx("th",{className:"text-center bg-success bg-opacity-10",style:{width:"80px"},children:e.jsx("strong",{children:""})})]})}),e.jsx("tbody",{children:Re.map((H,he)=>e.jsxs("tr",{className:H.isFail?"table-danger":"",children:[e.jsx("td",{className:"text-center",children:he+1}),e.jsx("td",{className:"text-center",children:H.studentNo}),e.jsx("td",{className:"text-center",children:H.name}),H.breakdown.map(Ne=>e.jsx("td",{className:"text-center",children:Ne.rawScore!==null&&Ne.rawScore!==void 0?Ne.rawScore.toFixed(1):"-"},Ne.code)),e.jsx("td",{className:"text-center bg-light",children:e.jsx("strong",{children:H.totalScore.toFixed(2)})}),e.jsx("td",{className:"text-center",children:e.jsx("span",{className:`badge fs-6 ${H.finalGrade.startsWith("A")?"bg-success":H.finalGrade.startsWith("B")?"bg-primary":H.finalGrade.startsWith("C")||H.finalGrade.startsWith("D")?"bg-info":H.finalGrade==="F"?"bg-danger":"bg-secondary"}`,children:H.finalGrade})})]},H.enrollId))})]})})})()})]})]})})]}),e.jsxs("div",{className:"modal-footer py-2",children:[we>1&&e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>Ve(we-1),children:" "}),e.jsx("div",{className:"ms-auto",children:we<3?e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>Ve(we+1),disabled:we===1&&(()=>{const xe=b.filter(Re=>Re.ratio>0),ke={ATTD:z,TASK:O,EXAM:P,PRAC:te,MISC:Ee};return!xe.every(Re=>ke[Re.gradeCriteriaCd]==="all")||Fe.length===0})(),children:" "}):e.jsx("button",{type:"button",className:"btn btn-success btn-sm",onClick:ma,children:""})})]})]})})})]})}const Hb=["ATTD","TASK","EXAM","PRAC","MISC"],Vb={ATTD:"",TASK:"",EXAM:"",PRAC:"",MISC:""},L2=new Intl.NumberFormat("ko-KR",{minimumFractionDigits:0,maximumFractionDigits:2});function xh(a){return typeof a!="number"||Number.isNaN(a)?"-":L2.format(a)}const z2=[{code:"P",label:"P"},{code:"NP",label:"NP"}],av=[{code:"A+",label:"A+(4.5)",score:4.5},{code:"A0",label:"A0(4.0)",score:4},{code:"B+",label:"B+(3.5)",score:3.5},{code:"B0",label:"B0(3.0)",score:3},{code:"C+",label:"C+(2.5)",score:2.5},{code:"C0",label:"C0(2.0)",score:2},{code:"D+",label:"D+(1.5)",score:1.5},{code:"D0",label:"D0(1.0)",score:1},{code:"F",label:"F(0.0)",score:0}],Yb=av.reduce((a,s)=>(a[s.code]=s.score,a),{});function U2(){const{lectureId:a}=dt(),{students:s,lecture:l}=cs(),[i,c]=x.useState([]),[d,u]=x.useState([]),[h,f]=x.useState(!0),[g,b]=x.useState(null),[y,v]=x.useState(""),[C,w]=x.useState(0),[A,S]=x.useState(null),[E,$]=x.useState(!1),[D,I]=x.useState(null),[V,_]=x.useState(!1);x.useEffect(()=>{let q=!0;return a?((async()=>{try{f(!0),b(null);const ee=`/classroom/api/v1/professor/${encodeURIComponent(a)}`,[te,me]=await Promise.all([fetch(`${ee}/finalize/score`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/common/${encodeURIComponent(a)}/ratio`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!te.ok)throw new Error(`(${te.status})     .`);if(!me.ok)throw new Error(`(${me.status})      .`);const[oe,be]=await Promise.all([te.json(),me.json()]);if(!q)return;const J=Array.isArray(oe)?oe.slice().sort((re,Ee)=>String(re?.enrollId??"").localeCompare(String(Ee?.enrollId??""))):[];c(J),u(Array.isArray(be)?be:[])}catch(ee){if(!q)return;b(ee),c([]),u([])}finally{q&&f(!1)}})(),()=>{q=!1}):(c([]),u([]),f(!1),()=>{q=!1})},[a,C]),x.useEffect(()=>{if(!A)return;const q=ee=>{ee.key==="Escape"&&(ee.preventDefault(),E||(S(null),I(null)))};return document.addEventListener("keydown",q),()=>{document.removeEventListener("keydown",q)}},[A,E]);const B=x.useMemo(()=>{const q=new Map;return Array.isArray(s)&&s.forEach(ee=>{if(!ee)return;const te=ee.enrollId!=null?String(ee.enrollId):null;te&&q.set(te,ee)}),q},[s]),z=x.useMemo(()=>{if(!Array.isArray(d))return[];const q=new Map(Hb.map((ee,te)=>[ee,te]));return d.map(ee=>{const te=ee?.gradeCriteriaCd,me=Number(ee?.ratio??0),oe=ee?.gradeCriteriaName||Vb[te]||te||"",be=q.has(te)?q.get(te):Hb.length;return{code:te,label:oe,ratio:me,weight:be}}).filter(ee=>ee.code).sort((ee,te)=>ee.weight-te.weight||ee.label.localeCompare(te.label))},[d]),X=x.useMemo(()=>{const q=new Set(z.map(me=>me.code)),ee=new Set;i.forEach(me=>{me?.sectionScores&&me.sectionScores.forEach(oe=>{if(!oe?.gradeCriteriaCd)return;const be=oe.gradeCriteriaCd;q.has(be)||ee.add(be)})});const te=Array.from(ee).sort((me,oe)=>me.localeCompare(oe)).map(me=>({code:me,label:Vb[me]||me,ratio:null}));return[...z,...te]},[z,i]),T=x.useMemo(()=>z.reduce((q,ee)=>q+(Number.isFinite(ee.ratio)?ee.ratio:0),0),[z]),W=x.useMemo(()=>i.map(q=>{const ee=q?.enrollId!=null?String(q.enrollId):"",te=ee?B.get(ee):null,me=te?.studentNo||te?.userId||"-",oe=te?[te.lastName,te.firstName].filter(Boolean).join("")||te.studentName||te.userName||te.name||"":q?.studentName||"",be=oe?`${oe}(${me})`:me,J=te?.univDeptName||"",re=te?.gradeName||"",Ee={};Array.isArray(q?.sectionScores)&&q.sectionScores.forEach(ge=>{const Le=ge?.gradeCriteriaCd;Le&&(Ee[Le]=typeof ge.rawScore=="number"?ge.rawScore:null)});const $e=typeof q?.autoGrade=="number"?q.autoGrade:null,ue=typeof q?.finalGrade=="number"?q.finalGrade:null,Me=(q?.changeReason||"").trim(),He=Me.length>0||ue!=null&&($e==null||Math.abs(ue-$e)>Number.EPSILON*10);return{enrollId:ee,displayName:be,studentNo:me,department:J,grade:re,gpaCd:q?.gpaCd||"",autoGrade:$e,finalGrade:ue,changeReason:Me,sections:Ee,changed:He}}),[i,B]),F=x.useMemo(()=>{const q=y.trim().toLowerCase();return q?W.filter(ee=>ee.displayName.toLowerCase().includes(q)||ee.studentNo.toLowerCase().includes(q)||ee.enrollId.toLowerCase().includes(q)):W},[W,y]),Q=q=>{v(q.target.value)},O=async()=>{if(!(!a||V||!window.confirm("  ?     .")))try{_(!0);const ee=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/finalize`,{method:"PUT",credentials:"include"});if(ee.status===204){const be=`/classroom/professor/${encodeURIComponent(a)}`;window.location.assign(be);return}const te=`(${ee.status})    .`,me=await ee.text().catch(()=>""),oe=me?.trim()?me.trim():te;window.alert(oe)}catch(ee){const te=ee?.message||"      .";window.alert(te)}finally{_(!1)}},Y=T===100?"badge bg-success":"badge bg-warning text-dark",N=l?.subjectTypeCd==="SUBJ_PASSFAIL",M=q=>{const ee=l?.subjectTypeCd==="SUBJ_PASSFAIL";S({enrollId:q.enrollId,name:q.displayName,selected:q.gpaCd||"",reason:q.changeReason||"",passFail:ee,autoGrade:q.autoGrade}),I(null)},L=()=>{E||(S(null),I(null))},U=q=>{S(ee=>ee&&{...ee,selected:q})},P=q=>{const{value:ee}=q.target;S(te=>te&&{...te,reason:ee})},k=async()=>{if(!A||!a)return;const q=A.reason.trim();if(!A.selected){window.alert("   .");return}if(!q){window.alert("    .");return}try{$(!0),I(null);const ee=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(a)}/finalize/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({enrollId:A.enrollId,gpaCd:A.selected,changeReason:q})});if(!ee.ok){let te=`(${ee.status})    .`;try{const me=await ee.json();me&&typeof me.message=="string"&&me.message.trim().length>0&&(te=me.message)}catch{}throw new Error(te)}c(te=>te.map(me=>{if(String(me.enrollId)!==String(A.enrollId))return me;const oe={...me,gpaCd:A.selected,changeReason:q};return!A.passFail&&Object.prototype.hasOwnProperty.call(Yb,A.selected)&&(oe.finalGrade=Yb[A.selected]),oe})),S(null),I(null),w(te=>te+1)}catch(ee){I(ee?.message||String(ee));return}finally{$(!1)}},G=()=>{if(!A)return null;const q=A.passFail?z2:av,ee=A.selected;return e.jsx("div",{role:"dialog","aria-modal":"true",className:"position-fixed top-0 start-0 end-0 bottom-0 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(0, 0, 0, 0.45)",zIndex:1050,padding:"1rem"},onClick:te=>{te.target===te.currentTarget&&L()},children:e.jsxs("div",{className:"card shadow-lg w-100",style:{maxWidth:480},onClick:te=>te.stopPropagation(),children:[e.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[e.jsxs("h2",{className:"h6 mb-0",children:[A.name,"  "]}),e.jsx("button",{type:"button",className:"btn-close","aria-label":"",onClick:L,disabled:E})]}),e.jsxs("div",{className:"card-body d-flex flex-column gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-muted small mb-2",children:"  ."}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:q.map(te=>e.jsx("button",{type:"button",className:`btn btn-sm ${ee===te.code?"btn-primary":"btn-outline-primary"}`,onClick:()=>U(te.code),disabled:E,children:te.label},te.code))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"finalize-change-reason",className:"form-label small text-muted",children:" "}),e.jsx("textarea",{id:"finalize-change-reason",className:"form-control",rows:3,value:A.reason,onChange:P,placeholder:"  .",disabled:E})]}),D?e.jsx("div",{className:"alert alert-danger small mb-0",role:"alert",children:D}):null]}),e.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[e.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:L,disabled:E,children:""}),e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:k,disabled:E,children:E?" ...":" "})]})]})})},se=()=>{if(h)return e.jsx("div",{className:"card shadow-sm",children:e.jsxs("div",{className:"card-body text-center py-5",children:[e.jsx("div",{className:"spinner-border text-primary mb-3",role:"status","aria-hidden":"true"}),e.jsx("span",{className:"visually-hidden",children:"Loading..."}),e.jsx("div",{className:"text-muted small",children:"  ..."})]})});if(g){const q=g?.message||String(g);return e.jsx("div",{className:"alert alert-danger",role:"alert",children:q})}return e.jsx("div",{className:"card shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsxs("div",{className:"d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3 mb-3",children:[e.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[e.jsx("label",{htmlFor:"finalize-filter",className:"text-muted small mb-0",children:""}),e.jsx("input",{id:"finalize-filter",type:"search",value:y,onChange:Q,className:"form-control form-control-sm",placeholder:",    ...",style:{minWidth:"220px"}})]}),e.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:O,disabled:V,children:V?"  ...":"  "})]}),e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover align-middle mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",style:{width:60},children:"#"}),e.jsx("th",{scope:"col",style:{minWidth:140},children:""}),X.map(q=>e.jsxs("th",{scope:"col",className:"text-center",style:{minWidth:70},children:[e.jsx("div",{className:"fw-semibold",children:q.label}),q.ratio!=null&&e.jsxs("div",{className:"text-muted small",children:[q.ratio,"%"]})]},q.code)),e.jsx("th",{scope:"col",className:"text-center",style:{minWidth:90},children:""}),e.jsx("th",{scope:"col",style:{minWidth:200},children:" "}),e.jsx("th",{scope:"col",style:{width:90}})]})}),e.jsx("tbody",{children:F.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:X.length+5,className:"text-center text-muted py-5",children:"   ."})}):F.map((q,ee)=>{const te=q.changed;return e.jsxs("tr",{children:[e.jsxs("td",{className:"text-muted",children:["#",ee+1]}),e.jsxs("td",{children:[e.jsx("div",{className:"fw-semibold",children:q.displayName}),(q.department||q.grade)&&e.jsxs("div",{className:"text-muted small",children:[q.department,q.department&&q.grade?"  ":"",q.grade]})]}),X.map(me=>{const oe=q.sections[me.code];return e.jsx("td",{className:"text-center",children:typeof oe=="number"?e.jsx("span",{className:"fw-semibold",children:xh(oe)}):e.jsx("span",{className:"text-muted",children:"-"})},me.code)}),e.jsx("td",{className:"text-center",children:(()=>{const me=q.finalGrade!=null?q.finalGrade:null,oe=q.autoGrade!=null?q.autoGrade:null,be=me??oe,J=be!=null?xh(be):"-",re=N?q.gpaCd||"-":q.gpaCd?`${q.gpaCd} (${J})`:J!=="-"?J:"-",Ee=te?`   ${oe!=null?xh(oe):"-"}`:" ";return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`fw-semibold mb-1${te?" text-danger":""}`,children:re}),e.jsx("div",{className:"text-muted small",children:Ee})]})})()}),e.jsx("td",{children:e.jsx("div",{className:"small text-break",children:te?q.changeReason||" ":" "})}),e.jsx("td",{className:"text-end",children:e.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>M(q),children:""})})]},q.enrollId||ee)})})]})})]})})};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"d-flex flex-column gap-4",children:[e.jsx("div",{className:"d-flex flex-column flex-sm-row align-items-sm-center justify-content-between gap-2",children:e.jsx("h1",{className:"h4 mb-0",children:"  /"})}),e.jsx("div",{className:"card shadow-sm",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"h6 mb-2",children:"   "}),e.jsx("p",{className:"mb-3 text-muted small",children:"      ,      .              ."}),e.jsx("p",{className:"mb-3 text-danger small",children:"          F   ."}),e.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[z.length===0?e.jsx("span",{className:"badge bg-light text-dark border",children:"   "}):z.map(q=>e.jsxs("span",{className:"badge bg-light text-dark border",children:[q.label," ",Number.isFinite(q.ratio)?`${q.ratio}%`:""]},q.code)),z.length>0&&e.jsxs("span",{className:Y,children:[" ",T,"%"]})]})]})}),se()]}),G()]})}function B2(){return e.jsxs(m0,{children:[e.jsx(lt,{path:"/",element:e.jsx(Wg,{to:"/classroom/student",replace:!0})}),e.jsx(lt,{path:"/classroom/student",element:e.jsx(uS,{})}),e.jsxs(lt,{path:"/classroom/student/:lectureId",element:e.jsx(xS,{}),children:[e.jsx(lt,{index:!0,element:e.jsx(pS,{})}),e.jsx(lt,{path:"board",element:e.jsx(jS,{})}),e.jsx(lt,{path:"board/:postId",element:e.jsx(QS,{})}),e.jsx(lt,{path:"attendance",element:e.jsx(NS,{})}),e.jsx(lt,{path:"exam",element:e.jsx(TS,{})}),e.jsx(lt,{path:"exam/:examId",element:e.jsx(kS,{})}),e.jsx(lt,{path:"task",element:e.jsx(US,{})}),e.jsx(lt,{path:"task/indiv/:indivtaskId",element:e.jsx($S,{})}),e.jsx(lt,{path:"task/group/:grouptaskId",element:e.jsx(BS,{})}),e.jsx(lt,{path:"review",element:e.jsx(ZS,{})}),e.jsx(lt,{path:"grade",element:e.jsx(ew,{})})]}),e.jsx(lt,{path:"/classroom/professor",element:e.jsx(tw,{})}),e.jsxs(lt,{path:"/classroom/professor/:lectureId",element:e.jsx(KA,{}),children:[e.jsx(lt,{index:!0,element:e.jsx(GA,{})}),e.jsx(lt,{path:"summary",element:e.jsx(XA,{})}),e.jsx(lt,{path:"board",element:e.jsx(e2,{})}),e.jsx(lt,{path:"board/new",element:e.jsx(a2,{})}),e.jsx(lt,{path:"board/:postId/edit",element:e.jsx(n2,{})}),e.jsx(lt,{path:"board/:postId",element:e.jsx(s2,{})}),e.jsx(lt,{path:"attendance",element:e.jsx(i2,{})}),e.jsx(lt,{path:"exam",element:e.jsx(c2,{})}),e.jsx(lt,{path:"exam/offline/new",element:e.jsx(p2,{})}),e.jsx(lt,{path:"exam/:examId",element:e.jsx(h2,{})}),e.jsx(lt,{path:"exam/:examId/edit",element:e.jsx(g2,{})}),e.jsx(lt,{path:"task",element:e.jsx(y2,{})}),e.jsx(lt,{path:"task/indiv/new",element:e.jsx(Lb,{})}),e.jsx(lt,{path:"task/indiv/:indivtaskId/edit",element:e.jsx(Lb,{})}),e.jsx(lt,{path:"task/indiv/:indivtaskId",element:e.jsx(v2,{})}),e.jsx(lt,{path:"task/group/new",element:e.jsx(E2,{})}),e.jsx(lt,{path:"task/group/:grouptaskId/edit",element:e.jsx(k2,{})}),e.jsx(lt,{path:"task/group/:grouptaskId",element:e.jsx(S2,{})}),e.jsx(lt,{path:"student",element:e.jsx(D2,{})}),e.jsx(lt,{path:"student/:studentNo",element:e.jsx(O2,{})}),e.jsx(lt,{path:"grades",element:e.jsx(I2,{})}),e.jsx(lt,{path:"finalize",element:e.jsx(U2,{})})]}),e.jsx(lt,{path:"*",element:e.jsx(Wg,{to:"/classroom/student",replace:!0})})]})}NN.createRoot(document.getElementById("root")).render(e.jsx(x.StrictMode,{children:e.jsx(j0,{children:e.jsx(E0,{children:e.jsx(D0,{children:e.jsx(B2,{})})})})}));
