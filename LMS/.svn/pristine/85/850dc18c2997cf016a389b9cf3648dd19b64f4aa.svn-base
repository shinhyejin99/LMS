function Xw(t,e){for(var a=0;a<e.length;a++){const i=e[a];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in t)){const d=Object.getOwnPropertyDescriptor(i,o);d&&Object.defineProperty(t,o,d.get?d:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const u of d.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&i(u)}).observe(document,{childList:!0,subtree:!0});function a(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function i(o){if(o.ep)return;o.ep=!0;const d=a(o);fetch(o.href,d)}})();function Ww(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Vh={exports:{}},Ar={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db;function Kw(){if(db)return Ar;db=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function a(i,o,d){var u=null;if(d!==void 0&&(u=""+d),o.key!==void 0&&(u=""+o.key),"key"in o){d={};for(var h in o)h!=="key"&&(d[h]=o[h])}else d=o;return o=d.ref,{$$typeof:t,type:i,key:u,ref:o!==void 0?o:null,props:d}}return Ar.Fragment=e,Ar.jsx=a,Ar.jsxs=a,Ar}var ub;function Qw(){return ub||(ub=1,Vh.exports=Kw()),Vh.exports}var s=Qw(),Yh={exports:{}},tt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hb;function Zw(){if(hb)return tt;hb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),u=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function N(k){return k===null||typeof k!="object"?null:(k=v&&k[v]||k["@@iterator"],typeof k=="function"?k:null)}var D={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,A={};function S(k,W,P){this.props=k,this.context=W,this.refs=A,this.updater=P||D}S.prototype.isReactComponent={},S.prototype.setState=function(k,W){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,W,"setState")},S.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function M(){}M.prototype=S.prototype;function F(k,W,P){this.props=k,this.context=W,this.refs=A,this.updater=P||D}var z=F.prototype=new M;z.constructor=F,C(z,S.prototype),z.isPureReactComponent=!0;var K=Array.isArray;function R(){}var w={H:null,A:null,T:null,S:null},_=Object.prototype.hasOwnProperty;function B(k,W,P){var G=P.ref;return{$$typeof:t,type:k,key:W,ref:G!==void 0?G:null,props:P}}function T(k,W){return B(k.type,W,k.props)}function U(k){return typeof k=="object"&&k!==null&&k.$$typeof===t}function V(k){var W={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(P){return W[P]})}var q=/\/+/g;function H(k,W){return typeof k=="object"&&k!==null&&k.key!=null?V(""+k.key):W.toString(36)}function E(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(R,R):(k.status="pending",k.then(function(W){k.status==="pending"&&(k.status="fulfilled",k.value=W)},function(W){k.status==="pending"&&(k.status="rejected",k.reason=W)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function L(k,W,P,G,Y){var ee=typeof k;(ee==="undefined"||ee==="boolean")&&(k=null);var ae=!1;if(k===null)ae=!0;else switch(ee){case"bigint":case"string":case"number":ae=!0;break;case"object":switch(k.$$typeof){case t:case e:ae=!0;break;case b:return ae=k._init,L(ae(k._payload),W,P,G,Y)}}if(ae)return Y=Y(k),ae=G===""?"."+H(k,0):G,K(Y)?(P="",ae!=null&&(P=ae.replace(q,"$&/")+"/"),L(Y,W,P,"",function($e){return $e})):Y!=null&&(U(Y)&&(Y=T(Y,P+(Y.key==null||k&&k.key===Y.key?"":(""+Y.key).replace(q,"$&/")+"/")+ae)),W.push(Y)),1;ae=0;var xe=G===""?".":G+":";if(K(k))for(var me=0;me<k.length;me++)G=k[me],ee=xe+H(G,me),ae+=L(G,W,P,ee,Y);else if(me=N(k),typeof me=="function")for(k=me.call(k),me=0;!(G=k.next()).done;)G=G.value,ee=xe+H(G,me++),ae+=L(G,W,P,ee,Y);else if(ee==="object"){if(typeof k.then=="function")return L(E(k),W,P,G,Y);throw W=String(k),Error("Objects are not valid as a React child (found: "+(W==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":W)+"). If you meant to render a collection of children, use an array instead.")}return ae}function $(k,W,P){if(k==null)return k;var G=[],Y=0;return L(k,G,"","",function(ee){return W.call(P,ee,Y++)}),G}function O(k){if(k._status===-1){var W=k._result;W=W(),W.then(function(P){(k._status===0||k._status===-1)&&(k._status=1,k._result=P)},function(P){(k._status===0||k._status===-1)&&(k._status=2,k._result=P)}),k._status===-1&&(k._status=0,k._result=W)}if(k._status===1)return k._result.default;throw k._result}var Q=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var W=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(W))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)},Z={map:$,forEach:function(k,W,P){$(k,function(){W.apply(this,arguments)},P)},count:function(k){var W=0;return $(k,function(){W++}),W},toArray:function(k){return $(k,function(W){return W})||[]},only:function(k){if(!U(k))throw Error("React.Children.only expected to receive a single React element child.");return k}};return tt.Activity=y,tt.Children=Z,tt.Component=S,tt.Fragment=a,tt.Profiler=o,tt.PureComponent=F,tt.StrictMode=i,tt.Suspense=m,tt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=w,tt.__COMPILER_RUNTIME={__proto__:null,c:function(k){return w.H.useMemoCache(k)}},tt.cache=function(k){return function(){return k.apply(null,arguments)}},tt.cacheSignal=function(){return null},tt.cloneElement=function(k,W,P){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var G=C({},k.props),Y=k.key;if(W!=null)for(ee in W.key!==void 0&&(Y=""+W.key),W)!_.call(W,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&W.ref===void 0||(G[ee]=W[ee]);var ee=arguments.length-2;if(ee===1)G.children=P;else if(1<ee){for(var ae=Array(ee),xe=0;xe<ee;xe++)ae[xe]=arguments[xe+2];G.children=ae}return B(k.type,Y,G)},tt.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:d,_context:k},k},tt.createElement=function(k,W,P){var G,Y={},ee=null;if(W!=null)for(G in W.key!==void 0&&(ee=""+W.key),W)_.call(W,G)&&G!=="key"&&G!=="__self"&&G!=="__source"&&(Y[G]=W[G]);var ae=arguments.length-2;if(ae===1)Y.children=P;else if(1<ae){for(var xe=Array(ae),me=0;me<ae;me++)xe[me]=arguments[me+2];Y.children=xe}if(k&&k.defaultProps)for(G in ae=k.defaultProps,ae)Y[G]===void 0&&(Y[G]=ae[G]);return B(k,ee,Y)},tt.createRef=function(){return{current:null}},tt.forwardRef=function(k){return{$$typeof:h,render:k}},tt.isValidElement=U,tt.lazy=function(k){return{$$typeof:b,_payload:{_status:-1,_result:k},_init:O}},tt.memo=function(k,W){return{$$typeof:p,type:k,compare:W===void 0?null:W}},tt.startTransition=function(k){var W=w.T,P={};w.T=P;try{var G=k(),Y=w.S;Y!==null&&Y(P,G),typeof G=="object"&&G!==null&&typeof G.then=="function"&&G.then(R,Q)}catch(ee){Q(ee)}finally{W!==null&&P.types!==null&&(W.types=P.types),w.T=W}},tt.unstable_useCacheRefresh=function(){return w.H.useCacheRefresh()},tt.use=function(k){return w.H.use(k)},tt.useActionState=function(k,W,P){return w.H.useActionState(k,W,P)},tt.useCallback=function(k,W){return w.H.useCallback(k,W)},tt.useContext=function(k){return w.H.useContext(k)},tt.useDebugValue=function(){},tt.useDeferredValue=function(k,W){return w.H.useDeferredValue(k,W)},tt.useEffect=function(k,W){return w.H.useEffect(k,W)},tt.useEffectEvent=function(k){return w.H.useEffectEvent(k)},tt.useId=function(){return w.H.useId()},tt.useImperativeHandle=function(k,W,P){return w.H.useImperativeHandle(k,W,P)},tt.useInsertionEffect=function(k,W){return w.H.useInsertionEffect(k,W)},tt.useLayoutEffect=function(k,W){return w.H.useLayoutEffect(k,W)},tt.useMemo=function(k,W){return w.H.useMemo(k,W)},tt.useOptimistic=function(k,W){return w.H.useOptimistic(k,W)},tt.useReducer=function(k,W,P){return w.H.useReducer(k,W,P)},tt.useRef=function(k){return w.H.useRef(k)},tt.useState=function(k){return w.H.useState(k)},tt.useSyncExternalStore=function(k,W,P){return w.H.useSyncExternalStore(k,W,P)},tt.useTransition=function(){return w.H.useTransition()},tt.version="19.2.0",tt}var mb;function Om(){return mb||(mb=1,Yh.exports=Zw()),Yh.exports}var x=Om();const Gs=Ww(x),Jw=Xw({__proto__:null,default:Gs},[x]);var qh={exports:{}},Er={},Gh={exports:{}},Xh={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fb;function eS(){return fb||(fb=1,(function(t){function e(L,$){var O=L.length;L.push($);e:for(;0<O;){var Q=O-1>>>1,Z=L[Q];if(0<o(Z,$))L[Q]=$,L[O]=Z,O=Q;else break e}}function a(L){return L.length===0?null:L[0]}function i(L){if(L.length===0)return null;var $=L[0],O=L.pop();if(O!==$){L[0]=O;e:for(var Q=0,Z=L.length,k=Z>>>1;Q<k;){var W=2*(Q+1)-1,P=L[W],G=W+1,Y=L[G];if(0>o(P,O))G<Z&&0>o(Y,P)?(L[Q]=Y,L[G]=O,Q=G):(L[Q]=P,L[W]=O,Q=W);else if(G<Z&&0>o(Y,O))L[Q]=Y,L[G]=O,Q=G;else break e}}return $}function o(L,$){var O=L.sortIndex-$.sortIndex;return O!==0?O:L.id-$.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;t.unstable_now=function(){return d.now()}}else{var u=Date,h=u.now();t.unstable_now=function(){return u.now()-h}}var m=[],p=[],b=1,y=null,v=3,N=!1,D=!1,C=!1,A=!1,S=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,F=typeof setImmediate<"u"?setImmediate:null;function z(L){for(var $=a(p);$!==null;){if($.callback===null)i(p);else if($.startTime<=L)i(p),$.sortIndex=$.expirationTime,e(m,$);else break;$=a(p)}}function K(L){if(C=!1,z(L),!D)if(a(m)!==null)D=!0,R||(R=!0,V());else{var $=a(p);$!==null&&E(K,$.startTime-L)}}var R=!1,w=-1,_=5,B=-1;function T(){return A?!0:!(t.unstable_now()-B<_)}function U(){if(A=!1,R){var L=t.unstable_now();B=L;var $=!0;try{e:{D=!1,C&&(C=!1,M(w),w=-1),N=!0;var O=v;try{t:{for(z(L),y=a(m);y!==null&&!(y.expirationTime>L&&T());){var Q=y.callback;if(typeof Q=="function"){y.callback=null,v=y.priorityLevel;var Z=Q(y.expirationTime<=L);if(L=t.unstable_now(),typeof Z=="function"){y.callback=Z,z(L),$=!0;break t}y===a(m)&&i(m),z(L)}else i(m);y=a(m)}if(y!==null)$=!0;else{var k=a(p);k!==null&&E(K,k.startTime-L),$=!1}}break e}finally{y=null,v=O,N=!1}$=void 0}}finally{$?V():R=!1}}}var V;if(typeof F=="function")V=function(){F(U)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,H=q.port2;q.port1.onmessage=U,V=function(){H.postMessage(null)}}else V=function(){S(U,0)};function E(L,$){w=S(function(){L(t.unstable_now())},$)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(L){switch(v){case 1:case 2:case 3:var $=3;break;default:$=v}var O=v;v=$;try{return L()}finally{v=O}},t.unstable_requestPaint=function(){A=!0},t.unstable_runWithPriority=function(L,$){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var O=v;v=L;try{return $()}finally{v=O}},t.unstable_scheduleCallback=function(L,$,O){var Q=t.unstable_now();switch(typeof O=="object"&&O!==null?(O=O.delay,O=typeof O=="number"&&0<O?Q+O:Q):O=Q,L){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=O+Z,L={id:b++,callback:$,priorityLevel:L,startTime:O,expirationTime:Z,sortIndex:-1},O>Q?(L.sortIndex=O,e(p,L),a(m)===null&&L===a(p)&&(C?(M(w),w=-1):C=!0,E(K,O-Q))):(L.sortIndex=Z,e(m,L),D||N||(D=!0,R||(R=!0,V()))),L},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(L){var $=v;return function(){var O=v;v=$;try{return L.apply(this,arguments)}finally{v=O}}}})(Xh)),Xh}var pb;function tS(){return pb||(pb=1,Gh.exports=eS()),Gh.exports}var Wh={exports:{}},bs={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gb;function sS(){if(gb)return bs;gb=1;var t=Om();function e(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)p+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var i={d:{f:a,r:function(){throw Error(e(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(m,p,b){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:y==null?null:""+y,children:m,containerInfo:p,implementation:b}}var u=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return bs.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,bs.createPortal=function(m,p){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(e(299));return d(m,p,null,b)},bs.flushSync=function(m){var p=u.T,b=i.p;try{if(u.T=null,i.p=2,m)return m()}finally{u.T=p,i.p=b,i.d.f()}},bs.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},bs.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},bs.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var b=p.as,y=h(b,p.crossOrigin),v=typeof p.integrity=="string"?p.integrity:void 0,N=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;b==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:N}):b==="script"&&i.d.X(m,{crossOrigin:y,integrity:v,fetchPriority:N,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},bs.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var b=h(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},bs.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var b=p.as,y=h(b,p.crossOrigin);i.d.L(m,b,{crossOrigin:y,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},bs.preloadModule=function(m,p){if(typeof m=="string")if(p){var b=h(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:b,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},bs.requestFormReset=function(m){i.d.r(m)},bs.unstable_batchedUpdates=function(m,p){return m(p)},bs.useFormState=function(m,p,b){return u.H.useFormState(m,p,b)},bs.useFormStatus=function(){return u.H.useHostTransitionStatus()},bs.version="19.2.0",bs}var xb;function Bv(){if(xb)return Wh.exports;xb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Wh.exports=sS(),Wh.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bb;function nS(){if(bb)return Er;bb=1;var t=tS(),e=Om(),a=Bv();function i(n){var l="https://react.dev/errors/"+n;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)l+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+n+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function d(n){var l=n,r=n;if(n.alternate)for(;l.return;)l=l.return;else{n=l;do l=n,(l.flags&4098)!==0&&(r=l.return),n=l.return;while(n)}return l.tag===3?r:null}function u(n){if(n.tag===13){var l=n.memoizedState;if(l===null&&(n=n.alternate,n!==null&&(l=n.memoizedState)),l!==null)return l.dehydrated}return null}function h(n){if(n.tag===31){var l=n.memoizedState;if(l===null&&(n=n.alternate,n!==null&&(l=n.memoizedState)),l!==null)return l.dehydrated}return null}function m(n){if(d(n)!==n)throw Error(i(188))}function p(n){var l=n.alternate;if(!l){if(l=d(n),l===null)throw Error(i(188));return l!==n?null:n}for(var r=n,c=l;;){var f=r.return;if(f===null)break;var g=f.alternate;if(g===null){if(c=f.return,c!==null){r=c;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===r)return m(f),n;if(g===c)return m(f),l;g=g.sibling}throw Error(i(188))}if(r.return!==c.return)r=f,c=g;else{for(var j=!1,I=f.child;I;){if(I===r){j=!0,r=f,c=g;break}if(I===c){j=!0,c=f,r=g;break}I=I.sibling}if(!j){for(I=g.child;I;){if(I===r){j=!0,r=g,c=f;break}if(I===c){j=!0,c=g,r=f;break}I=I.sibling}if(!j)throw Error(i(189))}}if(r.alternate!==c)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?n:l}function b(n){var l=n.tag;if(l===5||l===26||l===27||l===6)return n;for(n=n.child;n!==null;){if(l=b(n),l!==null)return l;n=n.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),N=Symbol.for("react.transitional.element"),D=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),M=Symbol.for("react.consumer"),F=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),R=Symbol.for("react.suspense_list"),w=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),T=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function V(n){return n===null||typeof n!="object"?null:(n=U&&n[U]||n["@@iterator"],typeof n=="function"?n:null)}var q=Symbol.for("react.client.reference");function H(n){if(n==null)return null;if(typeof n=="function")return n.$$typeof===q?null:n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case C:return"Fragment";case S:return"Profiler";case A:return"StrictMode";case K:return"Suspense";case R:return"SuspenseList";case B:return"Activity"}if(typeof n=="object")switch(n.$$typeof){case D:return"Portal";case F:return n.displayName||"Context";case M:return(n._context.displayName||"Context")+".Consumer";case z:var l=n.render;return n=n.displayName,n||(n=l.displayName||l.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case w:return l=n.displayName||null,l!==null?l:H(n.type)||"Memo";case _:l=n._payload,n=n._init;try{return H(n(l))}catch{}}return null}var E=Array.isArray,L=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,$=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O={pending:!1,data:null,method:null,action:null},Q=[],Z=-1;function k(n){return{current:n}}function W(n){0>Z||(n.current=Q[Z],Q[Z]=null,Z--)}function P(n,l){Z++,Q[Z]=n.current,n.current=l}var G=k(null),Y=k(null),ee=k(null),ae=k(null);function xe(n,l){switch(P(ee,l),P(Y,n),P(G,null),l.nodeType){case 9:case 11:n=(n=l.documentElement)&&(n=n.namespaceURI)?$x(n):0;break;default:if(n=l.tagName,l=l.namespaceURI)l=$x(l),n=Rx(l,n);else switch(n){case"svg":n=1;break;case"math":n=2;break;default:n=0}}W(G),P(G,n)}function me(){W(G),W(Y),W(ee)}function $e(n){n.memoizedState!==null&&P(ae,n);var l=G.current,r=Rx(l,n.type);l!==r&&(P(Y,n),P(G,r))}function se(n){Y.current===n&&(W(G),W(Y)),ae.current===n&&(W(ae),Nr._currentValue=O)}var ue,te;function oe(n){if(ue===void 0)try{throw Error()}catch(r){var l=r.stack.trim().match(/\n( *(at )?)/);ue=l&&l[1]||"",te=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ue+n+te}var we=!1;function _e(n,l){if(!n||we)return"";we=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(l){var ve=function(){throw Error()};if(Object.defineProperty(ve.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ve,[])}catch(he){var ce=he}Reflect.construct(n,[],ve)}else{try{ve.call()}catch(he){ce=he}n.call(ve.prototype)}}else{try{throw Error()}catch(he){ce=he}(ve=n())&&typeof ve.catch=="function"&&ve.catch(function(){})}}catch(he){if(he&&ce&&typeof he.stack=="string")return[he.stack,ce.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),j=g[0],I=g[1];if(j&&I){var J=j.split(`
`),re=I.split(`
`);for(f=c=0;c<J.length&&!J[c].includes("DetermineComponentFrameRoot");)c++;for(;f<re.length&&!re[f].includes("DetermineComponentFrameRoot");)f++;if(c===J.length||f===re.length)for(c=J.length-1,f=re.length-1;1<=c&&0<=f&&J[c]!==re[f];)f--;for(;1<=c&&0<=f;c--,f--)if(J[c]!==re[f]){if(c!==1||f!==1)do if(c--,f--,0>f||J[c]!==re[f]){var ge=`
`+J[c].replace(" at new "," at ");return n.displayName&&ge.includes("<anonymous>")&&(ge=ge.replace("<anonymous>",n.displayName)),ge}while(1<=c&&0<=f);break}}}finally{we=!1,Error.prepareStackTrace=r}return(r=n?n.displayName||n.name:"")?oe(r):""}function He(n,l){switch(n.tag){case 26:case 27:case 5:return oe(n.type);case 16:return oe("Lazy");case 13:return n.child!==l&&l!==null?oe("Suspense Fallback"):oe("Suspense");case 19:return oe("SuspenseList");case 0:case 15:return _e(n.type,!1);case 11:return _e(n.type.render,!1);case 1:return _e(n.type,!0);case 31:return oe("Activity");default:return""}}function be(n){try{var l="",r=null;do l+=He(n,r),r=n,n=n.return;while(n);return l}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}var qe=Object.prototype.hasOwnProperty,de=t.unstable_scheduleCallback,Ne=t.unstable_cancelCallback,De=t.unstable_shouldYield,Ue=t.unstable_requestPaint,Xe=t.unstable_now,Ge=t.unstable_getCurrentPriorityLevel,et=t.unstable_ImmediatePriority,pt=t.unstable_UserBlockingPriority,Os=t.unstable_NormalPriority,Rn=t.unstable_LowPriority,vs=t.unstable_IdlePriority,Gt=t.log,Ln=t.unstable_setDisableYieldValue,oa=null,us=null;function Qs(n){if(typeof Gt=="function"&&Ln(n),us&&typeof us.setStrictMode=="function")try{us.setStrictMode(oa,n)}catch{}}var gs=Math.clz32?Math.clz32:lo,Oi=Math.log,ao=Math.LN2;function lo(n){return n>>>=0,n===0?32:31-(Oi(n)/ao|0)|0}var Xa=256,Wa=262144,Ka=4194304;function In(n){var l=n&42;if(l!==0)return l;switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return n&261888;case 262144:case 524288:case 1048576:case 2097152:return n&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return n&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return n}}function _l(n,l,r){var c=n.pendingLanes;if(c===0)return 0;var f=0,g=n.suspendedLanes,j=n.pingedLanes;n=n.warmLanes;var I=c&134217727;return I!==0?(c=I&~g,c!==0?f=In(c):(j&=I,j!==0?f=In(j):r||(r=I&~n,r!==0&&(f=In(r))))):(I=c&~g,I!==0?f=In(I):j!==0?f=In(j):r||(r=c&~n,r!==0&&(f=In(r)))),f===0?0:l!==0&&l!==f&&(l&g)===0&&(g=f&-f,r=l&-l,g>=r||g===32&&(r&4194048)!==0)?l:f}function Qa(n,l){return(n.pendingLanes&~(n.suspendedLanes&~n.pingedLanes)&l)===0}function Zs(n,l){switch(n){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function io(){var n=Ka;return Ka<<=1,(Ka&62914560)===0&&(Ka=4194304),n}function Bi(n){for(var l=[],r=0;31>r;r++)l.push(n);return l}function js(n,l){n.pendingLanes|=l,l!==268435456&&(n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0)}function fn(n,l,r,c,f,g){var j=n.pendingLanes;n.pendingLanes=r,n.suspendedLanes=0,n.pingedLanes=0,n.warmLanes=0,n.expiredLanes&=r,n.entangledLanes&=r,n.errorRecoveryDisabledLanes&=r,n.shellSuspendCounter=0;var I=n.entanglements,J=n.expirationTimes,re=n.hiddenUpdates;for(r=j&~r;0<r;){var ge=31-gs(r),ve=1<<ge;I[ge]=0,J[ge]=-1;var ce=re[ge];if(ce!==null)for(re[ge]=null,ge=0;ge<ce.length;ge++){var he=ce[ge];he!==null&&(he.lane&=-536870913)}r&=~ve}c!==0&&jn(n,c,0),g!==0&&f===0&&n.tag!==0&&(n.suspendedLanes|=g&~(j&~l))}function jn(n,l,r){n.pendingLanes|=l,n.suspendedLanes&=~l;var c=31-gs(l);n.entangledLanes|=l,n.entanglements[c]=n.entanglements[c]|1073741824|r&261930}function Js(n,l){var r=n.entangledLanes|=l;for(n=n.entanglements;r;){var c=31-gs(r),f=1<<c;f&l|n[c]&l&&(n[c]|=l),r&=~f}}function Dl(n,l){var r=l&-l;return r=(r&42)!==0?1:Za(r),(r&(n.suspendedLanes|l))!==0?0:r}function Za(n){switch(n){case 2:n=1;break;case 8:n=4;break;case 32:n=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:n=128;break;case 268435456:n=134217728;break;default:n=0}return n}function Ml(n){return n&=-n,2<n?8<n?(n&134217727)!==0?32:268435456:8:2}function je(){var n=$.p;return n!==0?n:(n=window.event,n===void 0?32:nb(n.type))}function Me(n,l){var r=$.p;try{return $.p=n,l()}finally{$.p=r}}var Ae=Math.random().toString(36).slice(2),Le="__reactFiber$"+Ae,X="__reactProps$"+Ae,fe="__reactContainer$"+Ae,Se="__reactEvents$"+Ae,Te="__reactListeners$"+Ae,Ce="__reactHandles$"+Ae,ke="__reactResources$"+Ae,Oe="__reactMarker$"+Ae;function Ie(n){delete n[Le],delete n[X],delete n[Se],delete n[Te],delete n[Ce]}function Ee(n){var l=n[Le];if(l)return l;for(var r=n.parentNode;r;){if(l=r[fe]||r[Le]){if(r=l.alternate,l.child!==null||r!==null&&r.child!==null)for(n=Fx(n);n!==null;){if(r=n[Le])return r;n=Fx(n)}return l}n=r,r=n.parentNode}return null}function Be(n){if(n=n[Le]||n[fe]){var l=n.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return n}return null}function Re(n){var l=n.tag;if(l===5||l===26||l===27||l===6)return n.stateNode;throw Error(i(33))}function Fe(n){var l=n[ke];return l||(l=n[ke]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Ke(n){n[Oe]=!0}var rt=new Set,$t={};function It(n,l){lt(n,l),lt(n+"Capture",l)}function lt(n,l){for($t[n]=l,n=0;n<l.length;n++)rt.add(l[n])}var Ft=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Je={},pn={};function xs(n){return qe.call(pn,n)?!0:qe.call(Je,n)?!1:Ft.test(n)?pn[n]=!0:(Je[n]=!0,!1)}function Ja(n,l,r){if(xs(l))if(r===null)n.removeAttribute(l);else{switch(typeof r){case"undefined":case"function":case"symbol":n.removeAttribute(l);return;case"boolean":var c=l.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){n.removeAttribute(l);return}}n.setAttribute(l,""+r)}}function $l(n,l,r){if(r===null)n.removeAttribute(l);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(l);return}n.setAttribute(l,""+r)}}function gn(n,l,r,c){if(c===null)n.removeAttribute(r);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":n.removeAttribute(r);return}n.setAttributeNS(l,r,""+c)}}function Cs(n){switch(typeof n){case"bigint":case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function Cf(n){var l=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function Fj(n,l,r){var c=Object.getOwnPropertyDescriptor(n.constructor.prototype,l);if(!n.hasOwnProperty(l)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var f=c.get,g=c.set;return Object.defineProperty(n,l,{configurable:!0,get:function(){return f.call(this)},set:function(j){r=""+j,g.call(this,j)}}),Object.defineProperty(n,l,{enumerable:c.enumerable}),{getValue:function(){return r},setValue:function(j){r=""+j},stopTracking:function(){n._valueTracker=null,delete n[l]}}}}function Od(n){if(!n._valueTracker){var l=Cf(n)?"checked":"value";n._valueTracker=Fj(n,l,""+n[l])}}function Af(n){if(!n)return!1;var l=n._valueTracker;if(!l)return!0;var r=l.getValue(),c="";return n&&(c=Cf(n)?n.checked?"true":"false":n.value),n=c,n!==r?(l.setValue(n),!0):!1}function ro(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}var Hj=/[\n"\\]/g;function en(n){return n.replace(Hj,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Bd(n,l,r,c,f,g,j,I){n.name="",j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?n.type=j:n.removeAttribute("type"),l!=null?j==="number"?(l===0&&n.value===""||n.value!=l)&&(n.value=""+Cs(l)):n.value!==""+Cs(l)&&(n.value=""+Cs(l)):j!=="submit"&&j!=="reset"||n.removeAttribute("value"),l!=null?zd(n,j,Cs(l)):r!=null?zd(n,j,Cs(r)):c!=null&&n.removeAttribute("value"),f==null&&g!=null&&(n.defaultChecked=!!g),f!=null&&(n.checked=f&&typeof f!="function"&&typeof f!="symbol"),I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?n.name=""+Cs(I):n.removeAttribute("name")}function Ef(n,l,r,c,f,g,j,I){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(n.type=g),l!=null||r!=null){if(!(g!=="submit"&&g!=="reset"||l!=null)){Od(n);return}r=r!=null?""+Cs(r):"",l=l!=null?""+Cs(l):r,I||l===n.value||(n.value=l),n.defaultValue=l}c=c??f,c=typeof c!="function"&&typeof c!="symbol"&&!!c,n.checked=I?n.checked:!!c,n.defaultChecked=!!c,j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(n.name=j),Od(n)}function zd(n,l,r){l==="number"&&ro(n.ownerDocument)===n||n.defaultValue===""+r||(n.defaultValue=""+r)}function Rl(n,l,r,c){if(n=n.options,l){l={};for(var f=0;f<r.length;f++)l["$"+r[f]]=!0;for(r=0;r<n.length;r++)f=l.hasOwnProperty("$"+n[r].value),n[r].selected!==f&&(n[r].selected=f),f&&c&&(n[r].defaultSelected=!0)}else{for(r=""+Cs(r),l=null,f=0;f<n.length;f++){if(n[f].value===r){n[f].selected=!0,c&&(n[f].defaultSelected=!0);return}l!==null||n[f].disabled||(l=n[f])}l!==null&&(l.selected=!0)}}function Tf(n,l,r){if(l!=null&&(l=""+Cs(l),l!==n.value&&(n.value=l),r==null)){n.defaultValue!==l&&(n.defaultValue=l);return}n.defaultValue=r!=null?""+Cs(r):""}function kf(n,l,r,c){if(l==null){if(c!=null){if(r!=null)throw Error(i(92));if(E(c)){if(1<c.length)throw Error(i(93));c=c[0]}r=c}r==null&&(r=""),l=r}r=Cs(l),n.defaultValue=r,c=n.textContent,c===r&&c!==""&&c!==null&&(n.value=c),Od(n)}function Ll(n,l){if(l){var r=n.firstChild;if(r&&r===n.lastChild&&r.nodeType===3){r.nodeValue=l;return}}n.textContent=l}var Pj=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _f(n,l,r){var c=l.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?c?n.setProperty(l,""):l==="float"?n.cssFloat="":n[l]="":c?n.setProperty(l,r):typeof r!="number"||r===0||Pj.has(l)?l==="float"?n.cssFloat=r:n[l]=(""+r).trim():n[l]=r+"px"}function Df(n,l,r){if(l!=null&&typeof l!="object")throw Error(i(62));if(n=n.style,r!=null){for(var c in r)!r.hasOwnProperty(c)||l!=null&&l.hasOwnProperty(c)||(c.indexOf("--")===0?n.setProperty(c,""):c==="float"?n.cssFloat="":n[c]="");for(var f in l)c=l[f],l.hasOwnProperty(f)&&r[f]!==c&&_f(n,f,c)}else for(var g in l)l.hasOwnProperty(g)&&_f(n,g,l[g])}function Ud(n){if(n.indexOf("-")===-1)return!1;switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vj=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Yj=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function oo(n){return Yj.test(""+n)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":n}function On(){}var Fd=null;function Hd(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Il=null,Ol=null;function Mf(n){var l=Be(n);if(l&&(n=l.stateNode)){var r=n[X]||null;e:switch(n=l.stateNode,l.type){case"input":if(Bd(n,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),l=r.name,r.type==="radio"&&l!=null){for(r=n;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+en(""+l)+'"][type="radio"]'),l=0;l<r.length;l++){var c=r[l];if(c!==n&&c.form===n.form){var f=c[X]||null;if(!f)throw Error(i(90));Bd(c,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(l=0;l<r.length;l++)c=r[l],c.form===n.form&&Af(c)}break e;case"textarea":Tf(n,r.value,r.defaultValue);break e;case"select":l=r.value,l!=null&&Rl(n,!!r.multiple,l,!1)}}}var Pd=!1;function $f(n,l,r){if(Pd)return n(l,r);Pd=!0;try{var c=n(l);return c}finally{if(Pd=!1,(Il!==null||Ol!==null)&&(Ko(),Il&&(l=Il,n=Ol,Ol=Il=null,Mf(l),n)))for(l=0;l<n.length;l++)Mf(n[l])}}function zi(n,l){var r=n.stateNode;if(r===null)return null;var c=r[X]||null;if(c===null)return null;r=c[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(n=n.type,c=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!c;break e;default:n=!1}if(n)return null;if(r&&typeof r!="function")throw Error(i(231,l,typeof r));return r}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vd=!1;if(Bn)try{var Ui={};Object.defineProperty(Ui,"passive",{get:function(){Vd=!0}}),window.addEventListener("test",Ui,Ui),window.removeEventListener("test",Ui,Ui)}catch{Vd=!1}var ca=null,Yd=null,co=null;function Rf(){if(co)return co;var n,l=Yd,r=l.length,c,f="value"in ca?ca.value:ca.textContent,g=f.length;for(n=0;n<r&&l[n]===f[n];n++);var j=r-n;for(c=1;c<=j&&l[r-c]===f[g-c];c++);return co=f.slice(n,1<c?1-c:void 0)}function uo(n){var l=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&l===13&&(n=13)):n=l,n===10&&(n=13),32<=n||n===13?n:0}function ho(){return!0}function Lf(){return!1}function As(n){function l(r,c,f,g,j){this._reactName=r,this._targetInst=f,this.type=c,this.nativeEvent=g,this.target=j,this.currentTarget=null;for(var I in n)n.hasOwnProperty(I)&&(r=n[I],this[I]=r?r(g):g[I]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?ho:Lf,this.isPropagationStopped=Lf,this}return y(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ho)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ho)},persist:function(){},isPersistent:ho}),l}var el={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mo=As(el),Fi=y({},el,{view:0,detail:0}),qj=As(Fi),qd,Gd,Hi,fo=y({},Fi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wd,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Hi&&(Hi&&n.type==="mousemove"?(qd=n.screenX-Hi.screenX,Gd=n.screenY-Hi.screenY):Gd=qd=0,Hi=n),qd)},movementY:function(n){return"movementY"in n?n.movementY:Gd}}),If=As(fo),Gj=y({},fo,{dataTransfer:0}),Xj=As(Gj),Wj=y({},Fi,{relatedTarget:0}),Xd=As(Wj),Kj=y({},el,{animationName:0,elapsedTime:0,pseudoElement:0}),Qj=As(Kj),Zj=y({},el,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),Jj=As(Zj),eN=y({},el,{data:0}),Of=As(eN),tN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aN(n){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(n):(n=nN[n])?!!l[n]:!1}function Wd(){return aN}var lN=y({},Fi,{key:function(n){if(n.key){var l=tN[n.key]||n.key;if(l!=="Unidentified")return l}return n.type==="keypress"?(n=uo(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?sN[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wd,charCode:function(n){return n.type==="keypress"?uo(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?uo(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),iN=As(lN),rN=y({},fo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bf=As(rN),oN=y({},Fi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wd}),cN=As(oN),dN=y({},el,{propertyName:0,elapsedTime:0,pseudoElement:0}),uN=As(dN),hN=y({},fo,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),mN=As(hN),fN=y({},el,{newState:0,oldState:0}),pN=As(fN),gN=[9,13,27,32],Kd=Bn&&"CompositionEvent"in window,Pi=null;Bn&&"documentMode"in document&&(Pi=document.documentMode);var xN=Bn&&"TextEvent"in window&&!Pi,zf=Bn&&(!Kd||Pi&&8<Pi&&11>=Pi),Uf=" ",Ff=!1;function Hf(n,l){switch(n){case"keyup":return gN.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pf(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Bl=!1;function bN(n,l){switch(n){case"compositionend":return Pf(l);case"keypress":return l.which!==32?null:(Ff=!0,Uf);case"textInput":return n=l.data,n===Uf&&Ff?null:n;default:return null}}function yN(n,l){if(Bl)return n==="compositionend"||!Kd&&Hf(n,l)?(n=Rf(),co=Yd=ca=null,Bl=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return zf&&l.locale!=="ko"?null:l.data;default:return null}}var vN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vf(n){var l=n&&n.nodeName&&n.nodeName.toLowerCase();return l==="input"?!!vN[n.type]:l==="textarea"}function Yf(n,l,r,c){Il?Ol?Ol.push(c):Ol=[c]:Il=c,l=nc(l,"onChange"),0<l.length&&(r=new mo("onChange","change",null,r,c),n.push({event:r,listeners:l}))}var Vi=null,Yi=null;function jN(n){Ex(n,0)}function po(n){var l=Re(n);if(Af(l))return n}function qf(n,l){if(n==="change")return l}var Gf=!1;if(Bn){var Qd;if(Bn){var Zd="oninput"in document;if(!Zd){var Xf=document.createElement("div");Xf.setAttribute("oninput","return;"),Zd=typeof Xf.oninput=="function"}Qd=Zd}else Qd=!1;Gf=Qd&&(!document.documentMode||9<document.documentMode)}function Wf(){Vi&&(Vi.detachEvent("onpropertychange",Kf),Yi=Vi=null)}function Kf(n){if(n.propertyName==="value"&&po(Yi)){var l=[];Yf(l,Yi,n,Hd(n)),$f(jN,l)}}function NN(n,l,r){n==="focusin"?(Wf(),Vi=l,Yi=r,Vi.attachEvent("onpropertychange",Kf)):n==="focusout"&&Wf()}function wN(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return po(Yi)}function SN(n,l){if(n==="click")return po(l)}function CN(n,l){if(n==="input"||n==="change")return po(l)}function AN(n,l){return n===l&&(n!==0||1/n===1/l)||n!==n&&l!==l}var Bs=typeof Object.is=="function"?Object.is:AN;function qi(n,l){if(Bs(n,l))return!0;if(typeof n!="object"||n===null||typeof l!="object"||l===null)return!1;var r=Object.keys(n),c=Object.keys(l);if(r.length!==c.length)return!1;for(c=0;c<r.length;c++){var f=r[c];if(!qe.call(l,f)||!Bs(n[f],l[f]))return!1}return!0}function Qf(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Zf(n,l){var r=Qf(n);n=0;for(var c;r;){if(r.nodeType===3){if(c=n+r.textContent.length,n<=l&&c>=l)return{node:r,offset:l-n};n=c}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Qf(r)}}function Jf(n,l){return n&&l?n===l?!0:n&&n.nodeType===3?!1:l&&l.nodeType===3?Jf(n,l.parentNode):"contains"in n?n.contains(l):n.compareDocumentPosition?!!(n.compareDocumentPosition(l)&16):!1:!1}function ep(n){n=n!=null&&n.ownerDocument!=null&&n.ownerDocument.defaultView!=null?n.ownerDocument.defaultView:window;for(var l=ro(n.document);l instanceof n.HTMLIFrameElement;){try{var r=typeof l.contentWindow.location.href=="string"}catch{r=!1}if(r)n=l.contentWindow;else break;l=ro(n.document)}return l}function Jd(n){var l=n&&n.nodeName&&n.nodeName.toLowerCase();return l&&(l==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||l==="textarea"||n.contentEditable==="true")}var EN=Bn&&"documentMode"in document&&11>=document.documentMode,zl=null,eu=null,Gi=null,tu=!1;function tp(n,l,r){var c=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;tu||zl==null||zl!==ro(c)||(c=zl,"selectionStart"in c&&Jd(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Gi&&qi(Gi,c)||(Gi=c,c=nc(eu,"onSelect"),0<c.length&&(l=new mo("onSelect","select",null,l,r),n.push({event:l,listeners:c}),l.target=zl)))}function tl(n,l){var r={};return r[n.toLowerCase()]=l.toLowerCase(),r["Webkit"+n]="webkit"+l,r["Moz"+n]="moz"+l,r}var Ul={animationend:tl("Animation","AnimationEnd"),animationiteration:tl("Animation","AnimationIteration"),animationstart:tl("Animation","AnimationStart"),transitionrun:tl("Transition","TransitionRun"),transitionstart:tl("Transition","TransitionStart"),transitioncancel:tl("Transition","TransitionCancel"),transitionend:tl("Transition","TransitionEnd")},su={},sp={};Bn&&(sp=document.createElement("div").style,"AnimationEvent"in window||(delete Ul.animationend.animation,delete Ul.animationiteration.animation,delete Ul.animationstart.animation),"TransitionEvent"in window||delete Ul.transitionend.transition);function sl(n){if(su[n])return su[n];if(!Ul[n])return n;var l=Ul[n],r;for(r in l)if(l.hasOwnProperty(r)&&r in sp)return su[n]=l[r];return n}var np=sl("animationend"),ap=sl("animationiteration"),lp=sl("animationstart"),TN=sl("transitionrun"),kN=sl("transitionstart"),_N=sl("transitioncancel"),ip=sl("transitionend"),rp=new Map,nu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");nu.push("scrollEnd");function xn(n,l){rp.set(n,l),It(l,[n])}var go=typeof reportError=="function"?reportError:function(n){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof n=="object"&&n!==null&&typeof n.message=="string"?String(n.message):String(n),error:n});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",n);return}console.error(n)},tn=[],Fl=0,au=0;function xo(){for(var n=Fl,l=au=Fl=0;l<n;){var r=tn[l];tn[l++]=null;var c=tn[l];tn[l++]=null;var f=tn[l];tn[l++]=null;var g=tn[l];if(tn[l++]=null,c!==null&&f!==null){var j=c.pending;j===null?f.next=f:(f.next=j.next,j.next=f),c.pending=f}g!==0&&op(r,f,g)}}function bo(n,l,r,c){tn[Fl++]=n,tn[Fl++]=l,tn[Fl++]=r,tn[Fl++]=c,au|=c,n.lanes|=c,n=n.alternate,n!==null&&(n.lanes|=c)}function lu(n,l,r,c){return bo(n,l,r,c),yo(n)}function nl(n,l){return bo(n,null,null,l),yo(n)}function op(n,l,r){n.lanes|=r;var c=n.alternate;c!==null&&(c.lanes|=r);for(var f=!1,g=n.return;g!==null;)g.childLanes|=r,c=g.alternate,c!==null&&(c.childLanes|=r),g.tag===22&&(n=g.stateNode,n===null||n._visibility&1||(f=!0)),n=g,g=g.return;return n.tag===3?(g=n.stateNode,f&&l!==null&&(f=31-gs(r),n=g.hiddenUpdates,c=n[f],c===null?n[f]=[l]:c.push(l),l.lane=r|536870912),g):null}function yo(n){if(50<pr)throw pr=0,fh=null,Error(i(185));for(var l=n.return;l!==null;)n=l,l=n.return;return n.tag===3?n.stateNode:null}var Hl={};function DN(n,l,r,c){this.tag=n,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zs(n,l,r,c){return new DN(n,l,r,c)}function iu(n){return n=n.prototype,!(!n||!n.isReactComponent)}function zn(n,l){var r=n.alternate;return r===null?(r=zs(n.tag,l,n.key,n.mode),r.elementType=n.elementType,r.type=n.type,r.stateNode=n.stateNode,r.alternate=n,n.alternate=r):(r.pendingProps=l,r.type=n.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=n.flags&65011712,r.childLanes=n.childLanes,r.lanes=n.lanes,r.child=n.child,r.memoizedProps=n.memoizedProps,r.memoizedState=n.memoizedState,r.updateQueue=n.updateQueue,l=n.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},r.sibling=n.sibling,r.index=n.index,r.ref=n.ref,r.refCleanup=n.refCleanup,r}function cp(n,l){n.flags&=65011714;var r=n.alternate;return r===null?(n.childLanes=0,n.lanes=l,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=r.childLanes,n.lanes=r.lanes,n.child=r.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=r.memoizedProps,n.memoizedState=r.memoizedState,n.updateQueue=r.updateQueue,n.type=r.type,l=r.dependencies,n.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),n}function vo(n,l,r,c,f,g){var j=0;if(c=n,typeof n=="function")iu(n)&&(j=1);else if(typeof n=="string")j=Iw(n,r,G.current)?26:n==="html"||n==="head"||n==="body"?27:5;else e:switch(n){case B:return n=zs(31,r,l,f),n.elementType=B,n.lanes=g,n;case C:return al(r.children,f,g,l);case A:j=8,f|=24;break;case S:return n=zs(12,r,l,f|2),n.elementType=S,n.lanes=g,n;case K:return n=zs(13,r,l,f),n.elementType=K,n.lanes=g,n;case R:return n=zs(19,r,l,f),n.elementType=R,n.lanes=g,n;default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case F:j=10;break e;case M:j=9;break e;case z:j=11;break e;case w:j=14;break e;case _:j=16,c=null;break e}j=29,r=Error(i(130,n===null?"null":typeof n,"")),c=null}return l=zs(j,r,l,f),l.elementType=n,l.type=c,l.lanes=g,l}function al(n,l,r,c){return n=zs(7,n,c,l),n.lanes=r,n}function ru(n,l,r){return n=zs(6,n,null,l),n.lanes=r,n}function dp(n){var l=zs(18,null,null,0);return l.stateNode=n,l}function ou(n,l,r){return l=zs(4,n.children!==null?n.children:[],n.key,l),l.lanes=r,l.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},l}var up=new WeakMap;function sn(n,l){if(typeof n=="object"&&n!==null){var r=up.get(n);return r!==void 0?r:(l={value:n,source:l,stack:be(l)},up.set(n,l),l)}return{value:n,source:l,stack:be(l)}}var Pl=[],Vl=0,jo=null,Xi=0,nn=[],an=0,da=null,Nn=1,wn="";function Un(n,l){Pl[Vl++]=Xi,Pl[Vl++]=jo,jo=n,Xi=l}function hp(n,l,r){nn[an++]=Nn,nn[an++]=wn,nn[an++]=da,da=n;var c=Nn;n=wn;var f=32-gs(c)-1;c&=~(1<<f),r+=1;var g=32-gs(l)+f;if(30<g){var j=f-f%5;g=(c&(1<<j)-1).toString(32),c>>=j,f-=j,Nn=1<<32-gs(l)+f|r<<f|c,wn=g+n}else Nn=1<<g|r<<f|c,wn=n}function cu(n){n.return!==null&&(Un(n,1),hp(n,1,0))}function du(n){for(;n===jo;)jo=Pl[--Vl],Pl[Vl]=null,Xi=Pl[--Vl],Pl[Vl]=null;for(;n===da;)da=nn[--an],nn[an]=null,wn=nn[--an],nn[an]=null,Nn=nn[--an],nn[an]=null}function mp(n,l){nn[an++]=Nn,nn[an++]=wn,nn[an++]=da,Nn=l.id,wn=l.overflow,da=n}var hs=null,Ot=null,gt=!1,ua=null,ln=!1,uu=Error(i(519));function ha(n){var l=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Wi(sn(l,n)),uu}function fp(n){var l=n.stateNode,r=n.type,c=n.memoizedProps;switch(l[Le]=n,l[X]=c,r){case"dialog":dt("cancel",l),dt("close",l);break;case"iframe":case"object":case"embed":dt("load",l);break;case"video":case"audio":for(r=0;r<xr.length;r++)dt(xr[r],l);break;case"source":dt("error",l);break;case"img":case"image":case"link":dt("error",l),dt("load",l);break;case"details":dt("toggle",l);break;case"input":dt("invalid",l),Ef(l,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0);break;case"select":dt("invalid",l);break;case"textarea":dt("invalid",l),kf(l,c.value,c.defaultValue,c.children)}r=c.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||l.textContent===""+r||c.suppressHydrationWarning===!0||Dx(l.textContent,r)?(c.popover!=null&&(dt("beforetoggle",l),dt("toggle",l)),c.onScroll!=null&&dt("scroll",l),c.onScrollEnd!=null&&dt("scrollend",l),c.onClick!=null&&(l.onclick=On),l=!0):l=!1,l||ha(n,!0)}function pp(n){for(hs=n.return;hs;)switch(hs.tag){case 5:case 31:case 13:ln=!1;return;case 27:case 3:ln=!0;return;default:hs=hs.return}}function Yl(n){if(n!==hs)return!1;if(!gt)return pp(n),gt=!0,!1;var l=n.tag,r;if((r=l!==3&&l!==27)&&((r=l===5)&&(r=n.type,r=!(r!=="form"&&r!=="button")||kh(n.type,n.memoizedProps)),r=!r),r&&Ot&&ha(n),pp(n),l===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Ot=Ux(n)}else if(l===31){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(317));Ot=Ux(n)}else l===27?(l=Ot,Aa(n.type)?(n=Rh,Rh=null,Ot=n):Ot=l):Ot=hs?on(n.stateNode.nextSibling):null;return!0}function ll(){Ot=hs=null,gt=!1}function hu(){var n=ua;return n!==null&&(_s===null?_s=n:_s.push.apply(_s,n),ua=null),n}function Wi(n){ua===null?ua=[n]:ua.push(n)}var mu=k(null),il=null,Fn=null;function ma(n,l,r){P(mu,l._currentValue),l._currentValue=r}function Hn(n){n._currentValue=mu.current,W(mu)}function fu(n,l,r){for(;n!==null;){var c=n.alternate;if((n.childLanes&l)!==l?(n.childLanes|=l,c!==null&&(c.childLanes|=l)):c!==null&&(c.childLanes&l)!==l&&(c.childLanes|=l),n===r)break;n=n.return}}function pu(n,l,r,c){var f=n.child;for(f!==null&&(f.return=n);f!==null;){var g=f.dependencies;if(g!==null){var j=f.child;g=g.firstContext;e:for(;g!==null;){var I=g;g=f;for(var J=0;J<l.length;J++)if(I.context===l[J]){g.lanes|=r,I=g.alternate,I!==null&&(I.lanes|=r),fu(g.return,r,n),c||(j=null);break e}g=I.next}}else if(f.tag===18){if(j=f.return,j===null)throw Error(i(341));j.lanes|=r,g=j.alternate,g!==null&&(g.lanes|=r),fu(j,r,n),j=null}else j=f.child;if(j!==null)j.return=f;else for(j=f;j!==null;){if(j===n){j=null;break}if(f=j.sibling,f!==null){f.return=j.return,j=f;break}j=j.return}f=j}}function ql(n,l,r,c){n=null;for(var f=l,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var j=f.alternate;if(j===null)throw Error(i(387));if(j=j.memoizedProps,j!==null){var I=f.type;Bs(f.pendingProps.value,j.value)||(n!==null?n.push(I):n=[I])}}else if(f===ae.current){if(j=f.alternate,j===null)throw Error(i(387));j.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(n!==null?n.push(Nr):n=[Nr])}f=f.return}n!==null&&pu(l,n,r,c),l.flags|=262144}function No(n){for(n=n.firstContext;n!==null;){if(!Bs(n.context._currentValue,n.memoizedValue))return!0;n=n.next}return!1}function rl(n){il=n,Fn=null,n=n.dependencies,n!==null&&(n.firstContext=null)}function ms(n){return gp(il,n)}function wo(n,l){return il===null&&rl(n),gp(n,l)}function gp(n,l){var r=l._currentValue;if(l={context:l,memoizedValue:r,next:null},Fn===null){if(n===null)throw Error(i(308));Fn=l,n.dependencies={lanes:0,firstContext:l},n.flags|=524288}else Fn=Fn.next=l;return r}var MN=typeof AbortController<"u"?AbortController:function(){var n=[],l=this.signal={aborted:!1,addEventListener:function(r,c){n.push(c)}};this.abort=function(){l.aborted=!0,n.forEach(function(r){return r()})}},$N=t.unstable_scheduleCallback,RN=t.unstable_NormalPriority,Jt={$$typeof:F,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gu(){return{controller:new MN,data:new Map,refCount:0}}function Ki(n){n.refCount--,n.refCount===0&&$N(RN,function(){n.controller.abort()})}var Qi=null,xu=0,Gl=0,Xl=null;function LN(n,l){if(Qi===null){var r=Qi=[];xu=0,Gl=vh(),Xl={status:"pending",value:void 0,then:function(c){r.push(c)}}}return xu++,l.then(xp,xp),l}function xp(){if(--xu===0&&Qi!==null){Xl!==null&&(Xl.status="fulfilled");var n=Qi;Qi=null,Gl=0,Xl=null;for(var l=0;l<n.length;l++)(0,n[l])()}}function IN(n,l){var r=[],c={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return n.then(function(){c.status="fulfilled",c.value=l;for(var f=0;f<r.length;f++)(0,r[f])(l)},function(f){for(c.status="rejected",c.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),c}var bp=L.S;L.S=function(n,l){tx=Xe(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&LN(n,l),bp!==null&&bp(n,l)};var ol=k(null);function bu(){var n=ol.current;return n!==null?n:_t.pooledCache}function So(n,l){l===null?P(ol,ol.current):P(ol,l.pool)}function yp(){var n=bu();return n===null?null:{parent:Jt._currentValue,pool:n}}var Wl=Error(i(460)),yu=Error(i(474)),Co=Error(i(542)),Ao={then:function(){}};function vp(n){return n=n.status,n==="fulfilled"||n==="rejected"}function jp(n,l,r){switch(r=n[r],r===void 0?n.push(l):r!==l&&(l.then(On,On),l=r),l.status){case"fulfilled":return l.value;case"rejected":throw n=l.reason,wp(n),n;default:if(typeof l.status=="string")l.then(On,On);else{if(n=_t,n!==null&&100<n.shellSuspendCounter)throw Error(i(482));n=l,n.status="pending",n.then(function(c){if(l.status==="pending"){var f=l;f.status="fulfilled",f.value=c}},function(c){if(l.status==="pending"){var f=l;f.status="rejected",f.reason=c}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw n=l.reason,wp(n),n}throw dl=l,Wl}}function cl(n){try{var l=n._init;return l(n._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(dl=r,Wl):r}}var dl=null;function Np(){if(dl===null)throw Error(i(459));var n=dl;return dl=null,n}function wp(n){if(n===Wl||n===Co)throw Error(i(483))}var Kl=null,Zi=0;function Eo(n){var l=Zi;return Zi+=1,Kl===null&&(Kl=[]),jp(Kl,n,l)}function Ji(n,l){l=l.props.ref,n.ref=l!==void 0?l:null}function To(n,l){throw l.$$typeof===v?Error(i(525)):(n=Object.prototype.toString.call(l),Error(i(31,n==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":n)))}function Sp(n){function l(le,ne){if(n){var ie=le.deletions;ie===null?(le.deletions=[ne],le.flags|=16):ie.push(ne)}}function r(le,ne){if(!n)return null;for(;ne!==null;)l(le,ne),ne=ne.sibling;return null}function c(le){for(var ne=new Map;le!==null;)le.key!==null?ne.set(le.key,le):ne.set(le.index,le),le=le.sibling;return ne}function f(le,ne){return le=zn(le,ne),le.index=0,le.sibling=null,le}function g(le,ne,ie){return le.index=ie,n?(ie=le.alternate,ie!==null?(ie=ie.index,ie<ne?(le.flags|=67108866,ne):ie):(le.flags|=67108866,ne)):(le.flags|=1048576,ne)}function j(le){return n&&le.alternate===null&&(le.flags|=67108866),le}function I(le,ne,ie,ye){return ne===null||ne.tag!==6?(ne=ru(ie,le.mode,ye),ne.return=le,ne):(ne=f(ne,ie),ne.return=le,ne)}function J(le,ne,ie,ye){var Ye=ie.type;return Ye===C?ge(le,ne,ie.props.children,ye,ie.key):ne!==null&&(ne.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===_&&cl(Ye)===ne.type)?(ne=f(ne,ie.props),Ji(ne,ie),ne.return=le,ne):(ne=vo(ie.type,ie.key,ie.props,null,le.mode,ye),Ji(ne,ie),ne.return=le,ne)}function re(le,ne,ie,ye){return ne===null||ne.tag!==4||ne.stateNode.containerInfo!==ie.containerInfo||ne.stateNode.implementation!==ie.implementation?(ne=ou(ie,le.mode,ye),ne.return=le,ne):(ne=f(ne,ie.children||[]),ne.return=le,ne)}function ge(le,ne,ie,ye,Ye){return ne===null||ne.tag!==7?(ne=al(ie,le.mode,ye,Ye),ne.return=le,ne):(ne=f(ne,ie),ne.return=le,ne)}function ve(le,ne,ie){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return ne=ru(""+ne,le.mode,ie),ne.return=le,ne;if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case N:return ie=vo(ne.type,ne.key,ne.props,null,le.mode,ie),Ji(ie,ne),ie.return=le,ie;case D:return ne=ou(ne,le.mode,ie),ne.return=le,ne;case _:return ne=cl(ne),ve(le,ne,ie)}if(E(ne)||V(ne))return ne=al(ne,le.mode,ie,null),ne.return=le,ne;if(typeof ne.then=="function")return ve(le,Eo(ne),ie);if(ne.$$typeof===F)return ve(le,wo(le,ne),ie);To(le,ne)}return null}function ce(le,ne,ie,ye){var Ye=ne!==null?ne.key:null;if(typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint")return Ye!==null?null:I(le,ne,""+ie,ye);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case N:return ie.key===Ye?J(le,ne,ie,ye):null;case D:return ie.key===Ye?re(le,ne,ie,ye):null;case _:return ie=cl(ie),ce(le,ne,ie,ye)}if(E(ie)||V(ie))return Ye!==null?null:ge(le,ne,ie,ye,null);if(typeof ie.then=="function")return ce(le,ne,Eo(ie),ye);if(ie.$$typeof===F)return ce(le,ne,wo(le,ie),ye);To(le,ie)}return null}function he(le,ne,ie,ye,Ye){if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return le=le.get(ie)||null,I(ne,le,""+ye,Ye);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case N:return le=le.get(ye.key===null?ie:ye.key)||null,J(ne,le,ye,Ye);case D:return le=le.get(ye.key===null?ie:ye.key)||null,re(ne,le,ye,Ye);case _:return ye=cl(ye),he(le,ne,ie,ye,Ye)}if(E(ye)||V(ye))return le=le.get(ie)||null,ge(ne,le,ye,Ye,null);if(typeof ye.then=="function")return he(le,ne,ie,Eo(ye),Ye);if(ye.$$typeof===F)return he(le,ne,ie,wo(ne,ye),Ye);To(ne,ye)}return null}function ze(le,ne,ie,ye){for(var Ye=null,yt=null,Pe=ne,at=ne=0,ft=null;Pe!==null&&at<ie.length;at++){Pe.index>at?(ft=Pe,Pe=null):ft=Pe.sibling;var vt=ce(le,Pe,ie[at],ye);if(vt===null){Pe===null&&(Pe=ft);break}n&&Pe&&vt.alternate===null&&l(le,Pe),ne=g(vt,ne,at),yt===null?Ye=vt:yt.sibling=vt,yt=vt,Pe=ft}if(at===ie.length)return r(le,Pe),gt&&Un(le,at),Ye;if(Pe===null){for(;at<ie.length;at++)Pe=ve(le,ie[at],ye),Pe!==null&&(ne=g(Pe,ne,at),yt===null?Ye=Pe:yt.sibling=Pe,yt=Pe);return gt&&Un(le,at),Ye}for(Pe=c(Pe);at<ie.length;at++)ft=he(Pe,le,at,ie[at],ye),ft!==null&&(n&&ft.alternate!==null&&Pe.delete(ft.key===null?at:ft.key),ne=g(ft,ne,at),yt===null?Ye=ft:yt.sibling=ft,yt=ft);return n&&Pe.forEach(function(Da){return l(le,Da)}),gt&&Un(le,at),Ye}function Ze(le,ne,ie,ye){if(ie==null)throw Error(i(151));for(var Ye=null,yt=null,Pe=ne,at=ne=0,ft=null,vt=ie.next();Pe!==null&&!vt.done;at++,vt=ie.next()){Pe.index>at?(ft=Pe,Pe=null):ft=Pe.sibling;var Da=ce(le,Pe,vt.value,ye);if(Da===null){Pe===null&&(Pe=ft);break}n&&Pe&&Da.alternate===null&&l(le,Pe),ne=g(Da,ne,at),yt===null?Ye=Da:yt.sibling=Da,yt=Da,Pe=ft}if(vt.done)return r(le,Pe),gt&&Un(le,at),Ye;if(Pe===null){for(;!vt.done;at++,vt=ie.next())vt=ve(le,vt.value,ye),vt!==null&&(ne=g(vt,ne,at),yt===null?Ye=vt:yt.sibling=vt,yt=vt);return gt&&Un(le,at),Ye}for(Pe=c(Pe);!vt.done;at++,vt=ie.next())vt=he(Pe,le,at,vt.value,ye),vt!==null&&(n&&vt.alternate!==null&&Pe.delete(vt.key===null?at:vt.key),ne=g(vt,ne,at),yt===null?Ye=vt:yt.sibling=vt,yt=vt);return n&&Pe.forEach(function(Gw){return l(le,Gw)}),gt&&Un(le,at),Ye}function kt(le,ne,ie,ye){if(typeof ie=="object"&&ie!==null&&ie.type===C&&ie.key===null&&(ie=ie.props.children),typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case N:e:{for(var Ye=ie.key;ne!==null;){if(ne.key===Ye){if(Ye=ie.type,Ye===C){if(ne.tag===7){r(le,ne.sibling),ye=f(ne,ie.props.children),ye.return=le,le=ye;break e}}else if(ne.elementType===Ye||typeof Ye=="object"&&Ye!==null&&Ye.$$typeof===_&&cl(Ye)===ne.type){r(le,ne.sibling),ye=f(ne,ie.props),Ji(ye,ie),ye.return=le,le=ye;break e}r(le,ne);break}else l(le,ne);ne=ne.sibling}ie.type===C?(ye=al(ie.props.children,le.mode,ye,ie.key),ye.return=le,le=ye):(ye=vo(ie.type,ie.key,ie.props,null,le.mode,ye),Ji(ye,ie),ye.return=le,le=ye)}return j(le);case D:e:{for(Ye=ie.key;ne!==null;){if(ne.key===Ye)if(ne.tag===4&&ne.stateNode.containerInfo===ie.containerInfo&&ne.stateNode.implementation===ie.implementation){r(le,ne.sibling),ye=f(ne,ie.children||[]),ye.return=le,le=ye;break e}else{r(le,ne);break}else l(le,ne);ne=ne.sibling}ye=ou(ie,le.mode,ye),ye.return=le,le=ye}return j(le);case _:return ie=cl(ie),kt(le,ne,ie,ye)}if(E(ie))return ze(le,ne,ie,ye);if(V(ie)){if(Ye=V(ie),typeof Ye!="function")throw Error(i(150));return ie=Ye.call(ie),Ze(le,ne,ie,ye)}if(typeof ie.then=="function")return kt(le,ne,Eo(ie),ye);if(ie.$$typeof===F)return kt(le,ne,wo(le,ie),ye);To(le,ie)}return typeof ie=="string"&&ie!==""||typeof ie=="number"||typeof ie=="bigint"?(ie=""+ie,ne!==null&&ne.tag===6?(r(le,ne.sibling),ye=f(ne,ie),ye.return=le,le=ye):(r(le,ne),ye=ru(ie,le.mode,ye),ye.return=le,le=ye),j(le)):r(le,ne)}return function(le,ne,ie,ye){try{Zi=0;var Ye=kt(le,ne,ie,ye);return Kl=null,Ye}catch(Pe){if(Pe===Wl||Pe===Co)throw Pe;var yt=zs(29,Pe,null,le.mode);return yt.lanes=ye,yt.return=le,yt}finally{}}}var ul=Sp(!0),Cp=Sp(!1),fa=!1;function vu(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ju(n,l){n=n.updateQueue,l.updateQueue===n&&(l.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,callbacks:null})}function pa(n){return{lane:n,tag:0,payload:null,callback:null,next:null}}function ga(n,l,r){var c=n.updateQueue;if(c===null)return null;if(c=c.shared,(Nt&2)!==0){var f=c.pending;return f===null?l.next=l:(l.next=f.next,f.next=l),c.pending=l,l=yo(n),op(n,null,r),l}return bo(n,c,l,r),yo(n)}function er(n,l,r){if(l=l.updateQueue,l!==null&&(l=l.shared,(r&4194048)!==0)){var c=l.lanes;c&=n.pendingLanes,r|=c,l.lanes=r,Js(n,r)}}function Nu(n,l){var r=n.updateQueue,c=n.alternate;if(c!==null&&(c=c.updateQueue,r===c)){var f=null,g=null;if(r=r.firstBaseUpdate,r!==null){do{var j={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};g===null?f=g=j:g=g.next=j,r=r.next}while(r!==null);g===null?f=g=l:g=g.next=l}else f=g=l;r={baseState:c.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},n.updateQueue=r;return}n=r.lastBaseUpdate,n===null?r.firstBaseUpdate=l:n.next=l,r.lastBaseUpdate=l}var wu=!1;function tr(){if(wu){var n=Xl;if(n!==null)throw n}}function sr(n,l,r,c){wu=!1;var f=n.updateQueue;fa=!1;var g=f.firstBaseUpdate,j=f.lastBaseUpdate,I=f.shared.pending;if(I!==null){f.shared.pending=null;var J=I,re=J.next;J.next=null,j===null?g=re:j.next=re,j=J;var ge=n.alternate;ge!==null&&(ge=ge.updateQueue,I=ge.lastBaseUpdate,I!==j&&(I===null?ge.firstBaseUpdate=re:I.next=re,ge.lastBaseUpdate=J))}if(g!==null){var ve=f.baseState;j=0,ge=re=J=null,I=g;do{var ce=I.lane&-536870913,he=ce!==I.lane;if(he?(mt&ce)===ce:(c&ce)===ce){ce!==0&&ce===Gl&&(wu=!0),ge!==null&&(ge=ge.next={lane:0,tag:I.tag,payload:I.payload,callback:null,next:null});e:{var ze=n,Ze=I;ce=l;var kt=r;switch(Ze.tag){case 1:if(ze=Ze.payload,typeof ze=="function"){ve=ze.call(kt,ve,ce);break e}ve=ze;break e;case 3:ze.flags=ze.flags&-65537|128;case 0:if(ze=Ze.payload,ce=typeof ze=="function"?ze.call(kt,ve,ce):ze,ce==null)break e;ve=y({},ve,ce);break e;case 2:fa=!0}}ce=I.callback,ce!==null&&(n.flags|=64,he&&(n.flags|=8192),he=f.callbacks,he===null?f.callbacks=[ce]:he.push(ce))}else he={lane:ce,tag:I.tag,payload:I.payload,callback:I.callback,next:null},ge===null?(re=ge=he,J=ve):ge=ge.next=he,j|=ce;if(I=I.next,I===null){if(I=f.shared.pending,I===null)break;he=I,I=he.next,he.next=null,f.lastBaseUpdate=he,f.shared.pending=null}}while(!0);ge===null&&(J=ve),f.baseState=J,f.firstBaseUpdate=re,f.lastBaseUpdate=ge,g===null&&(f.shared.lanes=0),ja|=j,n.lanes=j,n.memoizedState=ve}}function Ap(n,l){if(typeof n!="function")throw Error(i(191,n));n.call(l)}function Ep(n,l){var r=n.callbacks;if(r!==null)for(n.callbacks=null,n=0;n<r.length;n++)Ap(r[n],l)}var Ql=k(null),ko=k(0);function Tp(n,l){n=Qn,P(ko,n),P(Ql,l),Qn=n|l.baseLanes}function Su(){P(ko,Qn),P(Ql,Ql.current)}function Cu(){Qn=ko.current,W(Ql),W(ko)}var Us=k(null),rn=null;function xa(n){var l=n.alternate;P(Xt,Xt.current&1),P(Us,n),rn===null&&(l===null||Ql.current!==null||l.memoizedState!==null)&&(rn=n)}function Au(n){P(Xt,Xt.current),P(Us,n),rn===null&&(rn=n)}function kp(n){n.tag===22?(P(Xt,Xt.current),P(Us,n),rn===null&&(rn=n)):ba()}function ba(){P(Xt,Xt.current),P(Us,Us.current)}function Fs(n){W(Us),rn===n&&(rn=null),W(Xt)}var Xt=k(0);function _o(n){for(var l=n;l!==null;){if(l.tag===13){var r=l.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Mh(r)||$h(r)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var Pn=0,nt=null,Et=null,es=null,Do=!1,Zl=!1,hl=!1,Mo=0,nr=0,Jl=null,ON=0;function Yt(){throw Error(i(321))}function Eu(n,l){if(l===null)return!1;for(var r=0;r<l.length&&r<n.length;r++)if(!Bs(n[r],l[r]))return!1;return!0}function Tu(n,l,r,c,f,g){return Pn=g,nt=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,L.H=n===null||n.memoizedState===null?hg:Pu,hl=!1,g=r(c,f),hl=!1,Zl&&(g=Dp(l,r,c,f)),_p(n),g}function _p(n){L.H=ir;var l=Et!==null&&Et.next!==null;if(Pn=0,es=Et=nt=null,Do=!1,nr=0,Jl=null,l)throw Error(i(300));n===null||ts||(n=n.dependencies,n!==null&&No(n)&&(ts=!0))}function Dp(n,l,r,c){nt=n;var f=0;do{if(Zl&&(Jl=null),nr=0,Zl=!1,25<=f)throw Error(i(301));if(f+=1,es=Et=null,n.updateQueue!=null){var g=n.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}L.H=mg,g=l(r,c)}while(Zl);return g}function BN(){var n=L.H,l=n.useState()[0];return l=typeof l.then=="function"?ar(l):l,n=n.useState()[0],(Et!==null?Et.memoizedState:null)!==n&&(nt.flags|=1024),l}function ku(){var n=Mo!==0;return Mo=0,n}function _u(n,l,r){l.updateQueue=n.updateQueue,l.flags&=-2053,n.lanes&=~r}function Du(n){if(Do){for(n=n.memoizedState;n!==null;){var l=n.queue;l!==null&&(l.pending=null),n=n.next}Do=!1}Pn=0,es=Et=nt=null,Zl=!1,nr=Mo=0,Jl=null}function Ns(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return es===null?nt.memoizedState=es=n:es=es.next=n,es}function Wt(){if(Et===null){var n=nt.alternate;n=n!==null?n.memoizedState:null}else n=Et.next;var l=es===null?nt.memoizedState:es.next;if(l!==null)es=l,Et=n;else{if(n===null)throw nt.alternate===null?Error(i(467)):Error(i(310));Et=n,n={memoizedState:Et.memoizedState,baseState:Et.baseState,baseQueue:Et.baseQueue,queue:Et.queue,next:null},es===null?nt.memoizedState=es=n:es=es.next=n}return es}function $o(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ar(n){var l=nr;return nr+=1,Jl===null&&(Jl=[]),n=jp(Jl,n,l),l=nt,(es===null?l.memoizedState:es.next)===null&&(l=l.alternate,L.H=l===null||l.memoizedState===null?hg:Pu),n}function Ro(n){if(n!==null&&typeof n=="object"){if(typeof n.then=="function")return ar(n);if(n.$$typeof===F)return ms(n)}throw Error(i(438,String(n)))}function Mu(n){var l=null,r=nt.updateQueue;if(r!==null&&(l=r.memoCache),l==null){var c=nt.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(l={data:c.data.map(function(f){return f.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),r===null&&(r=$o(),nt.updateQueue=r),r.memoCache=l,r=l.data[l.index],r===void 0)for(r=l.data[l.index]=Array(n),c=0;c<n;c++)r[c]=T;return l.index++,r}function Vn(n,l){return typeof l=="function"?l(n):l}function Lo(n){var l=Wt();return $u(l,Et,n)}function $u(n,l,r){var c=n.queue;if(c===null)throw Error(i(311));c.lastRenderedReducer=r;var f=n.baseQueue,g=c.pending;if(g!==null){if(f!==null){var j=f.next;f.next=g.next,g.next=j}l.baseQueue=f=g,c.pending=null}if(g=n.baseState,f===null)n.memoizedState=g;else{l=f.next;var I=j=null,J=null,re=l,ge=!1;do{var ve=re.lane&-536870913;if(ve!==re.lane?(mt&ve)===ve:(Pn&ve)===ve){var ce=re.revertLane;if(ce===0)J!==null&&(J=J.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),ve===Gl&&(ge=!0);else if((Pn&ce)===ce){re=re.next,ce===Gl&&(ge=!0);continue}else ve={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},J===null?(I=J=ve,j=g):J=J.next=ve,nt.lanes|=ce,ja|=ce;ve=re.action,hl&&r(g,ve),g=re.hasEagerState?re.eagerState:r(g,ve)}else ce={lane:ve,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},J===null?(I=J=ce,j=g):J=J.next=ce,nt.lanes|=ve,ja|=ve;re=re.next}while(re!==null&&re!==l);if(J===null?j=g:J.next=I,!Bs(g,n.memoizedState)&&(ts=!0,ge&&(r=Xl,r!==null)))throw r;n.memoizedState=g,n.baseState=j,n.baseQueue=J,c.lastRenderedState=g}return f===null&&(c.lanes=0),[n.memoizedState,c.dispatch]}function Ru(n){var l=Wt(),r=l.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=n;var c=r.dispatch,f=r.pending,g=l.memoizedState;if(f!==null){r.pending=null;var j=f=f.next;do g=n(g,j.action),j=j.next;while(j!==f);Bs(g,l.memoizedState)||(ts=!0),l.memoizedState=g,l.baseQueue===null&&(l.baseState=g),r.lastRenderedState=g}return[g,c]}function Mp(n,l,r){var c=nt,f=Wt(),g=gt;if(g){if(r===void 0)throw Error(i(407));r=r()}else r=l();var j=!Bs((Et||f).memoizedState,r);if(j&&(f.memoizedState=r,ts=!0),f=f.queue,Ou(Lp.bind(null,c,f,n),[n]),f.getSnapshot!==l||j||es!==null&&es.memoizedState.tag&1){if(c.flags|=2048,ei(9,{destroy:void 0},Rp.bind(null,c,f,r,l),null),_t===null)throw Error(i(349));g||(Pn&127)!==0||$p(c,l,r)}return r}function $p(n,l,r){n.flags|=16384,n={getSnapshot:l,value:r},l=nt.updateQueue,l===null?(l=$o(),nt.updateQueue=l,l.stores=[n]):(r=l.stores,r===null?l.stores=[n]:r.push(n))}function Rp(n,l,r,c){l.value=r,l.getSnapshot=c,Ip(l)&&Op(n)}function Lp(n,l,r){return r(function(){Ip(l)&&Op(n)})}function Ip(n){var l=n.getSnapshot;n=n.value;try{var r=l();return!Bs(n,r)}catch{return!0}}function Op(n){var l=nl(n,2);l!==null&&Ds(l,n,2)}function Lu(n){var l=Ns();if(typeof n=="function"){var r=n;if(n=r(),hl){Qs(!0);try{r()}finally{Qs(!1)}}}return l.memoizedState=l.baseState=n,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vn,lastRenderedState:n},l}function Bp(n,l,r,c){return n.baseState=r,$u(n,Et,typeof c=="function"?c:Vn)}function zN(n,l,r,c,f){if(Bo(n))throw Error(i(485));if(n=l.action,n!==null){var g={payload:f,action:n,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(j){g.listeners.push(j)}};L.T!==null?r(!0):g.isTransition=!1,c(g),r=l.pending,r===null?(g.next=l.pending=g,zp(l,g)):(g.next=r.next,l.pending=r.next=g)}}function zp(n,l){var r=l.action,c=l.payload,f=n.state;if(l.isTransition){var g=L.T,j={};L.T=j;try{var I=r(f,c),J=L.S;J!==null&&J(j,I),Up(n,l,I)}catch(re){Iu(n,l,re)}finally{g!==null&&j.types!==null&&(g.types=j.types),L.T=g}}else try{g=r(f,c),Up(n,l,g)}catch(re){Iu(n,l,re)}}function Up(n,l,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(c){Fp(n,l,c)},function(c){return Iu(n,l,c)}):Fp(n,l,r)}function Fp(n,l,r){l.status="fulfilled",l.value=r,Hp(l),n.state=r,l=n.pending,l!==null&&(r=l.next,r===l?n.pending=null:(r=r.next,l.next=r,zp(n,r)))}function Iu(n,l,r){var c=n.pending;if(n.pending=null,c!==null){c=c.next;do l.status="rejected",l.reason=r,Hp(l),l=l.next;while(l!==c)}n.action=null}function Hp(n){n=n.listeners;for(var l=0;l<n.length;l++)(0,n[l])()}function Pp(n,l){return l}function Vp(n,l){if(gt){var r=_t.formState;if(r!==null){e:{var c=nt;if(gt){if(Ot){t:{for(var f=Ot,g=ln;f.nodeType!==8;){if(!g){f=null;break t}if(f=on(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){Ot=on(f.nextSibling),c=f.data==="F!";break e}}ha(c)}c=!1}c&&(l=r[0])}}return r=Ns(),r.memoizedState=r.baseState=l,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pp,lastRenderedState:l},r.queue=c,r=cg.bind(null,nt,c),c.dispatch=r,c=Lu(!1),g=Hu.bind(null,nt,!1,c.queue),c=Ns(),f={state:l,dispatch:null,action:n,pending:null},c.queue=f,r=zN.bind(null,nt,f,g,r),f.dispatch=r,c.memoizedState=n,[l,r,!1]}function Yp(n){var l=Wt();return qp(l,Et,n)}function qp(n,l,r){if(l=$u(n,l,Pp)[0],n=Lo(Vn)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var c=ar(l)}catch(j){throw j===Wl?Co:j}else c=l;l=Wt();var f=l.queue,g=f.dispatch;return r!==l.memoizedState&&(nt.flags|=2048,ei(9,{destroy:void 0},UN.bind(null,f,r),null)),[c,g,n]}function UN(n,l){n.action=l}function Gp(n){var l=Wt(),r=Et;if(r!==null)return qp(l,r,n);Wt(),l=l.memoizedState,r=Wt();var c=r.queue.dispatch;return r.memoizedState=n,[l,c,!1]}function ei(n,l,r,c){return n={tag:n,create:r,deps:c,inst:l,next:null},l=nt.updateQueue,l===null&&(l=$o(),nt.updateQueue=l),r=l.lastEffect,r===null?l.lastEffect=n.next=n:(c=r.next,r.next=n,n.next=c,l.lastEffect=n),n}function Xp(){return Wt().memoizedState}function Io(n,l,r,c){var f=Ns();nt.flags|=n,f.memoizedState=ei(1|l,{destroy:void 0},r,c===void 0?null:c)}function Oo(n,l,r,c){var f=Wt();c=c===void 0?null:c;var g=f.memoizedState.inst;Et!==null&&c!==null&&Eu(c,Et.memoizedState.deps)?f.memoizedState=ei(l,g,r,c):(nt.flags|=n,f.memoizedState=ei(1|l,g,r,c))}function Wp(n,l){Io(8390656,8,n,l)}function Ou(n,l){Oo(2048,8,n,l)}function FN(n){nt.flags|=4;var l=nt.updateQueue;if(l===null)l=$o(),nt.updateQueue=l,l.events=[n];else{var r=l.events;r===null?l.events=[n]:r.push(n)}}function Kp(n){var l=Wt().memoizedState;return FN({ref:l,nextImpl:n}),function(){if((Nt&2)!==0)throw Error(i(440));return l.impl.apply(void 0,arguments)}}function Qp(n,l){return Oo(4,2,n,l)}function Zp(n,l){return Oo(4,4,n,l)}function Jp(n,l){if(typeof l=="function"){n=n();var r=l(n);return function(){typeof r=="function"?r():l(null)}}if(l!=null)return n=n(),l.current=n,function(){l.current=null}}function eg(n,l,r){r=r!=null?r.concat([n]):null,Oo(4,4,Jp.bind(null,l,n),r)}function Bu(){}function tg(n,l){var r=Wt();l=l===void 0?null:l;var c=r.memoizedState;return l!==null&&Eu(l,c[1])?c[0]:(r.memoizedState=[n,l],n)}function sg(n,l){var r=Wt();l=l===void 0?null:l;var c=r.memoizedState;if(l!==null&&Eu(l,c[1]))return c[0];if(c=n(),hl){Qs(!0);try{n()}finally{Qs(!1)}}return r.memoizedState=[c,l],c}function zu(n,l,r){return r===void 0||(Pn&1073741824)!==0&&(mt&261930)===0?n.memoizedState=l:(n.memoizedState=r,n=nx(),nt.lanes|=n,ja|=n,r)}function ng(n,l,r,c){return Bs(r,l)?r:Ql.current!==null?(n=zu(n,r,c),Bs(n,l)||(ts=!0),n):(Pn&42)===0||(Pn&1073741824)!==0&&(mt&261930)===0?(ts=!0,n.memoizedState=r):(n=nx(),nt.lanes|=n,ja|=n,l)}function ag(n,l,r,c,f){var g=$.p;$.p=g!==0&&8>g?g:8;var j=L.T,I={};L.T=I,Hu(n,!1,l,r);try{var J=f(),re=L.S;if(re!==null&&re(I,J),J!==null&&typeof J=="object"&&typeof J.then=="function"){var ge=IN(J,c);lr(n,l,ge,Vs(n))}else lr(n,l,c,Vs(n))}catch(ve){lr(n,l,{then:function(){},status:"rejected",reason:ve},Vs())}finally{$.p=g,j!==null&&I.types!==null&&(j.types=I.types),L.T=j}}function HN(){}function Uu(n,l,r,c){if(n.tag!==5)throw Error(i(476));var f=lg(n).queue;ag(n,f,l,O,r===null?HN:function(){return ig(n),r(c)})}function lg(n){var l=n.memoizedState;if(l!==null)return l;l={memoizedState:O,baseState:O,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vn,lastRenderedState:O},next:null};var r={};return l.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Vn,lastRenderedState:r},next:null},n.memoizedState=l,n=n.alternate,n!==null&&(n.memoizedState=l),l}function ig(n){var l=lg(n);l.next===null&&(l=n.alternate.memoizedState),lr(n,l.next.queue,{},Vs())}function Fu(){return ms(Nr)}function rg(){return Wt().memoizedState}function og(){return Wt().memoizedState}function PN(n){for(var l=n.return;l!==null;){switch(l.tag){case 24:case 3:var r=Vs();n=pa(r);var c=ga(l,n,r);c!==null&&(Ds(c,l,r),er(c,l,r)),l={cache:gu()},n.payload=l;return}l=l.return}}function VN(n,l,r){var c=Vs();r={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},Bo(n)?dg(l,r):(r=lu(n,l,r,c),r!==null&&(Ds(r,n,c),ug(r,l,c)))}function cg(n,l,r){var c=Vs();lr(n,l,r,c)}function lr(n,l,r,c){var f={lane:c,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(Bo(n))dg(l,f);else{var g=n.alternate;if(n.lanes===0&&(g===null||g.lanes===0)&&(g=l.lastRenderedReducer,g!==null))try{var j=l.lastRenderedState,I=g(j,r);if(f.hasEagerState=!0,f.eagerState=I,Bs(I,j))return bo(n,l,f,0),_t===null&&xo(),!1}catch{}finally{}if(r=lu(n,l,f,c),r!==null)return Ds(r,n,c),ug(r,l,c),!0}return!1}function Hu(n,l,r,c){if(c={lane:2,revertLane:vh(),gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},Bo(n)){if(l)throw Error(i(479))}else l=lu(n,r,c,2),l!==null&&Ds(l,n,2)}function Bo(n){var l=n.alternate;return n===nt||l!==null&&l===nt}function dg(n,l){Zl=Do=!0;var r=n.pending;r===null?l.next=l:(l.next=r.next,r.next=l),n.pending=l}function ug(n,l,r){if((r&4194048)!==0){var c=l.lanes;c&=n.pendingLanes,r|=c,l.lanes=r,Js(n,r)}}var ir={readContext:ms,use:Ro,useCallback:Yt,useContext:Yt,useEffect:Yt,useImperativeHandle:Yt,useLayoutEffect:Yt,useInsertionEffect:Yt,useMemo:Yt,useReducer:Yt,useRef:Yt,useState:Yt,useDebugValue:Yt,useDeferredValue:Yt,useTransition:Yt,useSyncExternalStore:Yt,useId:Yt,useHostTransitionStatus:Yt,useFormState:Yt,useActionState:Yt,useOptimistic:Yt,useMemoCache:Yt,useCacheRefresh:Yt};ir.useEffectEvent=Yt;var hg={readContext:ms,use:Ro,useCallback:function(n,l){return Ns().memoizedState=[n,l===void 0?null:l],n},useContext:ms,useEffect:Wp,useImperativeHandle:function(n,l,r){r=r!=null?r.concat([n]):null,Io(4194308,4,Jp.bind(null,l,n),r)},useLayoutEffect:function(n,l){return Io(4194308,4,n,l)},useInsertionEffect:function(n,l){Io(4,2,n,l)},useMemo:function(n,l){var r=Ns();l=l===void 0?null:l;var c=n();if(hl){Qs(!0);try{n()}finally{Qs(!1)}}return r.memoizedState=[c,l],c},useReducer:function(n,l,r){var c=Ns();if(r!==void 0){var f=r(l);if(hl){Qs(!0);try{r(l)}finally{Qs(!1)}}}else f=l;return c.memoizedState=c.baseState=f,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:f},c.queue=n,n=n.dispatch=VN.bind(null,nt,n),[c.memoizedState,n]},useRef:function(n){var l=Ns();return n={current:n},l.memoizedState=n},useState:function(n){n=Lu(n);var l=n.queue,r=cg.bind(null,nt,l);return l.dispatch=r,[n.memoizedState,r]},useDebugValue:Bu,useDeferredValue:function(n,l){var r=Ns();return zu(r,n,l)},useTransition:function(){var n=Lu(!1);return n=ag.bind(null,nt,n.queue,!0,!1),Ns().memoizedState=n,[!1,n]},useSyncExternalStore:function(n,l,r){var c=nt,f=Ns();if(gt){if(r===void 0)throw Error(i(407));r=r()}else{if(r=l(),_t===null)throw Error(i(349));(mt&127)!==0||$p(c,l,r)}f.memoizedState=r;var g={value:r,getSnapshot:l};return f.queue=g,Wp(Lp.bind(null,c,g,n),[n]),c.flags|=2048,ei(9,{destroy:void 0},Rp.bind(null,c,g,r,l),null),r},useId:function(){var n=Ns(),l=_t.identifierPrefix;if(gt){var r=wn,c=Nn;r=(c&~(1<<32-gs(c)-1)).toString(32)+r,l="_"+l+"R_"+r,r=Mo++,0<r&&(l+="H"+r.toString(32)),l+="_"}else r=ON++,l="_"+l+"r_"+r.toString(32)+"_";return n.memoizedState=l},useHostTransitionStatus:Fu,useFormState:Vp,useActionState:Vp,useOptimistic:function(n){var l=Ns();l.memoizedState=l.baseState=n;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=r,l=Hu.bind(null,nt,!0,r),r.dispatch=l,[n,l]},useMemoCache:Mu,useCacheRefresh:function(){return Ns().memoizedState=PN.bind(null,nt)},useEffectEvent:function(n){var l=Ns(),r={impl:n};return l.memoizedState=r,function(){if((Nt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},Pu={readContext:ms,use:Ro,useCallback:tg,useContext:ms,useEffect:Ou,useImperativeHandle:eg,useInsertionEffect:Qp,useLayoutEffect:Zp,useMemo:sg,useReducer:Lo,useRef:Xp,useState:function(){return Lo(Vn)},useDebugValue:Bu,useDeferredValue:function(n,l){var r=Wt();return ng(r,Et.memoizedState,n,l)},useTransition:function(){var n=Lo(Vn)[0],l=Wt().memoizedState;return[typeof n=="boolean"?n:ar(n),l]},useSyncExternalStore:Mp,useId:rg,useHostTransitionStatus:Fu,useFormState:Yp,useActionState:Yp,useOptimistic:function(n,l){var r=Wt();return Bp(r,Et,n,l)},useMemoCache:Mu,useCacheRefresh:og};Pu.useEffectEvent=Kp;var mg={readContext:ms,use:Ro,useCallback:tg,useContext:ms,useEffect:Ou,useImperativeHandle:eg,useInsertionEffect:Qp,useLayoutEffect:Zp,useMemo:sg,useReducer:Ru,useRef:Xp,useState:function(){return Ru(Vn)},useDebugValue:Bu,useDeferredValue:function(n,l){var r=Wt();return Et===null?zu(r,n,l):ng(r,Et.memoizedState,n,l)},useTransition:function(){var n=Ru(Vn)[0],l=Wt().memoizedState;return[typeof n=="boolean"?n:ar(n),l]},useSyncExternalStore:Mp,useId:rg,useHostTransitionStatus:Fu,useFormState:Gp,useActionState:Gp,useOptimistic:function(n,l){var r=Wt();return Et!==null?Bp(r,Et,n,l):(r.baseState=n,[n,r.queue.dispatch])},useMemoCache:Mu,useCacheRefresh:og};mg.useEffectEvent=Kp;function Vu(n,l,r,c){l=n.memoizedState,r=r(c,l),r=r==null?l:y({},l,r),n.memoizedState=r,n.lanes===0&&(n.updateQueue.baseState=r)}var Yu={enqueueSetState:function(n,l,r){n=n._reactInternals;var c=Vs(),f=pa(c);f.payload=l,r!=null&&(f.callback=r),l=ga(n,f,c),l!==null&&(Ds(l,n,c),er(l,n,c))},enqueueReplaceState:function(n,l,r){n=n._reactInternals;var c=Vs(),f=pa(c);f.tag=1,f.payload=l,r!=null&&(f.callback=r),l=ga(n,f,c),l!==null&&(Ds(l,n,c),er(l,n,c))},enqueueForceUpdate:function(n,l){n=n._reactInternals;var r=Vs(),c=pa(r);c.tag=2,l!=null&&(c.callback=l),l=ga(n,c,r),l!==null&&(Ds(l,n,r),er(l,n,r))}};function fg(n,l,r,c,f,g,j){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(c,g,j):l.prototype&&l.prototype.isPureReactComponent?!qi(r,c)||!qi(f,g):!0}function pg(n,l,r,c){n=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(r,c),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(r,c),l.state!==n&&Yu.enqueueReplaceState(l,l.state,null)}function ml(n,l){var r=l;if("ref"in l){r={};for(var c in l)c!=="ref"&&(r[c]=l[c])}if(n=n.defaultProps){r===l&&(r=y({},r));for(var f in n)r[f]===void 0&&(r[f]=n[f])}return r}function gg(n){go(n)}function xg(n){console.error(n)}function bg(n){go(n)}function zo(n,l){try{var r=n.onUncaughtError;r(l.value,{componentStack:l.stack})}catch(c){setTimeout(function(){throw c})}}function yg(n,l,r){try{var c=n.onCaughtError;c(r.value,{componentStack:r.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function qu(n,l,r){return r=pa(r),r.tag=3,r.payload={element:null},r.callback=function(){zo(n,l)},r}function vg(n){return n=pa(n),n.tag=3,n}function jg(n,l,r,c){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var g=c.value;n.payload=function(){return f(g)},n.callback=function(){yg(l,r,c)}}var j=r.stateNode;j!==null&&typeof j.componentDidCatch=="function"&&(n.callback=function(){yg(l,r,c),typeof f!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var I=c.stack;this.componentDidCatch(c.value,{componentStack:I!==null?I:""})})}function YN(n,l,r,c,f){if(r.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(l=r.alternate,l!==null&&ql(l,r,f,!0),r=Us.current,r!==null){switch(r.tag){case 31:case 13:return rn===null?Qo():r.alternate===null&&qt===0&&(qt=3),r.flags&=-257,r.flags|=65536,r.lanes=f,c===Ao?r.flags|=16384:(l=r.updateQueue,l===null?r.updateQueue=new Set([c]):l.add(c),xh(n,c,f)),!1;case 22:return r.flags|=65536,c===Ao?r.flags|=16384:(l=r.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([c])},r.updateQueue=l):(r=l.retryQueue,r===null?l.retryQueue=new Set([c]):r.add(c)),xh(n,c,f)),!1}throw Error(i(435,r.tag))}return xh(n,c,f),Qo(),!1}if(gt)return l=Us.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=f,c!==uu&&(n=Error(i(422),{cause:c}),Wi(sn(n,r)))):(c!==uu&&(l=Error(i(423),{cause:c}),Wi(sn(l,r))),n=n.current.alternate,n.flags|=65536,f&=-f,n.lanes|=f,c=sn(c,r),f=qu(n.stateNode,c,f),Nu(n,f),qt!==4&&(qt=2)),!1;var g=Error(i(520),{cause:c});if(g=sn(g,r),fr===null?fr=[g]:fr.push(g),qt!==4&&(qt=2),l===null)return!0;c=sn(c,r),r=l;do{switch(r.tag){case 3:return r.flags|=65536,n=f&-f,r.lanes|=n,n=qu(r.stateNode,c,n),Nu(r,n),!1;case 1:if(l=r.type,g=r.stateNode,(r.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(Na===null||!Na.has(g))))return r.flags|=65536,f&=-f,r.lanes|=f,f=vg(f),jg(f,n,r,c),Nu(r,f),!1}r=r.return}while(r!==null);return!1}var Gu=Error(i(461)),ts=!1;function fs(n,l,r,c){l.child=n===null?Cp(l,null,r,c):ul(l,n.child,r,c)}function Ng(n,l,r,c,f){r=r.render;var g=l.ref;if("ref"in c){var j={};for(var I in c)I!=="ref"&&(j[I]=c[I])}else j=c;return rl(l),c=Tu(n,l,r,j,g,f),I=ku(),n!==null&&!ts?(_u(n,l,f),Yn(n,l,f)):(gt&&I&&cu(l),l.flags|=1,fs(n,l,c,f),l.child)}function wg(n,l,r,c,f){if(n===null){var g=r.type;return typeof g=="function"&&!iu(g)&&g.defaultProps===void 0&&r.compare===null?(l.tag=15,l.type=g,Sg(n,l,g,c,f)):(n=vo(r.type,null,c,l,l.mode,f),n.ref=l.ref,n.return=l,l.child=n)}if(g=n.child,!th(n,f)){var j=g.memoizedProps;if(r=r.compare,r=r!==null?r:qi,r(j,c)&&n.ref===l.ref)return Yn(n,l,f)}return l.flags|=1,n=zn(g,c),n.ref=l.ref,n.return=l,l.child=n}function Sg(n,l,r,c,f){if(n!==null){var g=n.memoizedProps;if(qi(g,c)&&n.ref===l.ref)if(ts=!1,l.pendingProps=c=g,th(n,f))(n.flags&131072)!==0&&(ts=!0);else return l.lanes=n.lanes,Yn(n,l,f)}return Xu(n,l,r,c,f)}function Cg(n,l,r,c){var f=c.children,g=n!==null?n.memoizedState:null;if(n===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),c.mode==="hidden"){if((l.flags&128)!==0){if(g=g!==null?g.baseLanes|r:r,n!==null){for(c=l.child=n.child,f=0;c!==null;)f=f|c.lanes|c.childLanes,c=c.sibling;c=f&~g}else c=0,l.child=null;return Ag(n,l,g,r,c)}if((r&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},n!==null&&So(l,g!==null?g.cachePool:null),g!==null?Tp(l,g):Su(),kp(l);else return c=l.lanes=536870912,Ag(n,l,g!==null?g.baseLanes|r:r,r,c)}else g!==null?(So(l,g.cachePool),Tp(l,g),ba(),l.memoizedState=null):(n!==null&&So(l,null),Su(),ba());return fs(n,l,f,r),l.child}function rr(n,l){return n!==null&&n.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function Ag(n,l,r,c,f){var g=bu();return g=g===null?null:{parent:Jt._currentValue,pool:g},l.memoizedState={baseLanes:r,cachePool:g},n!==null&&So(l,null),Su(),kp(l),n!==null&&ql(n,l,c,!0),l.childLanes=f,null}function Uo(n,l){return l=Ho({mode:l.mode,children:l.children},n.mode),l.ref=n.ref,n.child=l,l.return=n,l}function Eg(n,l,r){return ul(l,n.child,null,r),n=Uo(l,l.pendingProps),n.flags|=2,Fs(l),l.memoizedState=null,n}function qN(n,l,r){var c=l.pendingProps,f=(l.flags&128)!==0;if(l.flags&=-129,n===null){if(gt){if(c.mode==="hidden")return n=Uo(l,c),l.lanes=536870912,rr(null,n);if(Au(l),(n=Ot)?(n=zx(n,ln),n=n!==null&&n.data==="&"?n:null,n!==null&&(l.memoizedState={dehydrated:n,treeContext:da!==null?{id:Nn,overflow:wn}:null,retryLane:536870912,hydrationErrors:null},r=dp(n),r.return=l,l.child=r,hs=l,Ot=null)):n=null,n===null)throw ha(l);return l.lanes=536870912,null}return Uo(l,c)}var g=n.memoizedState;if(g!==null){var j=g.dehydrated;if(Au(l),f)if(l.flags&256)l.flags&=-257,l=Eg(n,l,r);else if(l.memoizedState!==null)l.child=n.child,l.flags|=128,l=null;else throw Error(i(558));else if(ts||ql(n,l,r,!1),f=(r&n.childLanes)!==0,ts||f){if(c=_t,c!==null&&(j=Dl(c,r),j!==0&&j!==g.retryLane))throw g.retryLane=j,nl(n,j),Ds(c,n,j),Gu;Qo(),l=Eg(n,l,r)}else n=g.treeContext,Ot=on(j.nextSibling),hs=l,gt=!0,ua=null,ln=!1,n!==null&&mp(l,n),l=Uo(l,c),l.flags|=4096;return l}return n=zn(n.child,{mode:c.mode,children:c.children}),n.ref=l.ref,l.child=n,n.return=l,n}function Fo(n,l){var r=l.ref;if(r===null)n!==null&&n.ref!==null&&(l.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(n===null||n.ref!==r)&&(l.flags|=4194816)}}function Xu(n,l,r,c,f){return rl(l),r=Tu(n,l,r,c,void 0,f),c=ku(),n!==null&&!ts?(_u(n,l,f),Yn(n,l,f)):(gt&&c&&cu(l),l.flags|=1,fs(n,l,r,f),l.child)}function Tg(n,l,r,c,f,g){return rl(l),l.updateQueue=null,r=Dp(l,c,r,f),_p(n),c=ku(),n!==null&&!ts?(_u(n,l,g),Yn(n,l,g)):(gt&&c&&cu(l),l.flags|=1,fs(n,l,r,g),l.child)}function kg(n,l,r,c,f){if(rl(l),l.stateNode===null){var g=Hl,j=r.contextType;typeof j=="object"&&j!==null&&(g=ms(j)),g=new r(c,g),l.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Yu,l.stateNode=g,g._reactInternals=l,g=l.stateNode,g.props=c,g.state=l.memoizedState,g.refs={},vu(l),j=r.contextType,g.context=typeof j=="object"&&j!==null?ms(j):Hl,g.state=l.memoizedState,j=r.getDerivedStateFromProps,typeof j=="function"&&(Vu(l,r,j,c),g.state=l.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(j=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),j!==g.state&&Yu.enqueueReplaceState(g,g.state,null),sr(l,c,g,f),tr(),g.state=l.memoizedState),typeof g.componentDidMount=="function"&&(l.flags|=4194308),c=!0}else if(n===null){g=l.stateNode;var I=l.memoizedProps,J=ml(r,I);g.props=J;var re=g.context,ge=r.contextType;j=Hl,typeof ge=="object"&&ge!==null&&(j=ms(ge));var ve=r.getDerivedStateFromProps;ge=typeof ve=="function"||typeof g.getSnapshotBeforeUpdate=="function",I=l.pendingProps!==I,ge||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(I||re!==j)&&pg(l,g,c,j),fa=!1;var ce=l.memoizedState;g.state=ce,sr(l,c,g,f),tr(),re=l.memoizedState,I||ce!==re||fa?(typeof ve=="function"&&(Vu(l,r,ve,c),re=l.memoizedState),(J=fa||fg(l,r,J,c,ce,re,j))?(ge||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(l.flags|=4194308)):(typeof g.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=c,l.memoizedState=re),g.props=c,g.state=re,g.context=j,c=J):(typeof g.componentDidMount=="function"&&(l.flags|=4194308),c=!1)}else{g=l.stateNode,ju(n,l),j=l.memoizedProps,ge=ml(r,j),g.props=ge,ve=l.pendingProps,ce=g.context,re=r.contextType,J=Hl,typeof re=="object"&&re!==null&&(J=ms(re)),I=r.getDerivedStateFromProps,(re=typeof I=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(j!==ve||ce!==J)&&pg(l,g,c,J),fa=!1,ce=l.memoizedState,g.state=ce,sr(l,c,g,f),tr();var he=l.memoizedState;j!==ve||ce!==he||fa||n!==null&&n.dependencies!==null&&No(n.dependencies)?(typeof I=="function"&&(Vu(l,r,I,c),he=l.memoizedState),(ge=fa||fg(l,r,ge,c,ce,he,J)||n!==null&&n.dependencies!==null&&No(n.dependencies))?(re||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,he,J),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,he,J)),typeof g.componentDidUpdate=="function"&&(l.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof g.componentDidUpdate!="function"||j===n.memoizedProps&&ce===n.memoizedState||(l.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&ce===n.memoizedState||(l.flags|=1024),l.memoizedProps=c,l.memoizedState=he),g.props=c,g.state=he,g.context=J,c=ge):(typeof g.componentDidUpdate!="function"||j===n.memoizedProps&&ce===n.memoizedState||(l.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||j===n.memoizedProps&&ce===n.memoizedState||(l.flags|=1024),c=!1)}return g=c,Fo(n,l),c=(l.flags&128)!==0,g||c?(g=l.stateNode,r=c&&typeof r.getDerivedStateFromError!="function"?null:g.render(),l.flags|=1,n!==null&&c?(l.child=ul(l,n.child,null,f),l.child=ul(l,null,r,f)):fs(n,l,r,f),l.memoizedState=g.state,n=l.child):n=Yn(n,l,f),n}function _g(n,l,r,c){return ll(),l.flags|=256,fs(n,l,r,c),l.child}var Wu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ku(n){return{baseLanes:n,cachePool:yp()}}function Qu(n,l,r){return n=n!==null?n.childLanes&~r:0,l&&(n|=Ps),n}function Dg(n,l,r){var c=l.pendingProps,f=!1,g=(l.flags&128)!==0,j;if((j=g)||(j=n!==null&&n.memoizedState===null?!1:(Xt.current&2)!==0),j&&(f=!0,l.flags&=-129),j=(l.flags&32)!==0,l.flags&=-33,n===null){if(gt){if(f?xa(l):ba(),(n=Ot)?(n=zx(n,ln),n=n!==null&&n.data!=="&"?n:null,n!==null&&(l.memoizedState={dehydrated:n,treeContext:da!==null?{id:Nn,overflow:wn}:null,retryLane:536870912,hydrationErrors:null},r=dp(n),r.return=l,l.child=r,hs=l,Ot=null)):n=null,n===null)throw ha(l);return $h(n)?l.lanes=32:l.lanes=536870912,null}var I=c.children;return c=c.fallback,f?(ba(),f=l.mode,I=Ho({mode:"hidden",children:I},f),c=al(c,f,r,null),I.return=l,c.return=l,I.sibling=c,l.child=I,c=l.child,c.memoizedState=Ku(r),c.childLanes=Qu(n,j,r),l.memoizedState=Wu,rr(null,c)):(xa(l),Zu(l,I))}var J=n.memoizedState;if(J!==null&&(I=J.dehydrated,I!==null)){if(g)l.flags&256?(xa(l),l.flags&=-257,l=Ju(n,l,r)):l.memoizedState!==null?(ba(),l.child=n.child,l.flags|=128,l=null):(ba(),I=c.fallback,f=l.mode,c=Ho({mode:"visible",children:c.children},f),I=al(I,f,r,null),I.flags|=2,c.return=l,I.return=l,c.sibling=I,l.child=c,ul(l,n.child,null,r),c=l.child,c.memoizedState=Ku(r),c.childLanes=Qu(n,j,r),l.memoizedState=Wu,l=rr(null,c));else if(xa(l),$h(I)){if(j=I.nextSibling&&I.nextSibling.dataset,j)var re=j.dgst;j=re,c=Error(i(419)),c.stack="",c.digest=j,Wi({value:c,source:null,stack:null}),l=Ju(n,l,r)}else if(ts||ql(n,l,r,!1),j=(r&n.childLanes)!==0,ts||j){if(j=_t,j!==null&&(c=Dl(j,r),c!==0&&c!==J.retryLane))throw J.retryLane=c,nl(n,c),Ds(j,n,c),Gu;Mh(I)||Qo(),l=Ju(n,l,r)}else Mh(I)?(l.flags|=192,l.child=n.child,l=null):(n=J.treeContext,Ot=on(I.nextSibling),hs=l,gt=!0,ua=null,ln=!1,n!==null&&mp(l,n),l=Zu(l,c.children),l.flags|=4096);return l}return f?(ba(),I=c.fallback,f=l.mode,J=n.child,re=J.sibling,c=zn(J,{mode:"hidden",children:c.children}),c.subtreeFlags=J.subtreeFlags&65011712,re!==null?I=zn(re,I):(I=al(I,f,r,null),I.flags|=2),I.return=l,c.return=l,c.sibling=I,l.child=c,rr(null,c),c=l.child,I=n.child.memoizedState,I===null?I=Ku(r):(f=I.cachePool,f!==null?(J=Jt._currentValue,f=f.parent!==J?{parent:J,pool:J}:f):f=yp(),I={baseLanes:I.baseLanes|r,cachePool:f}),c.memoizedState=I,c.childLanes=Qu(n,j,r),l.memoizedState=Wu,rr(n.child,c)):(xa(l),r=n.child,n=r.sibling,r=zn(r,{mode:"visible",children:c.children}),r.return=l,r.sibling=null,n!==null&&(j=l.deletions,j===null?(l.deletions=[n],l.flags|=16):j.push(n)),l.child=r,l.memoizedState=null,r)}function Zu(n,l){return l=Ho({mode:"visible",children:l},n.mode),l.return=n,n.child=l}function Ho(n,l){return n=zs(22,n,null,l),n.lanes=0,n}function Ju(n,l,r){return ul(l,n.child,null,r),n=Zu(l,l.pendingProps.children),n.flags|=2,l.memoizedState=null,n}function Mg(n,l,r){n.lanes|=l;var c=n.alternate;c!==null&&(c.lanes|=l),fu(n.return,l,r)}function eh(n,l,r,c,f,g){var j=n.memoizedState;j===null?n.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:c,tail:r,tailMode:f,treeForkCount:g}:(j.isBackwards=l,j.rendering=null,j.renderingStartTime=0,j.last=c,j.tail=r,j.tailMode=f,j.treeForkCount=g)}function $g(n,l,r){var c=l.pendingProps,f=c.revealOrder,g=c.tail;c=c.children;var j=Xt.current,I=(j&2)!==0;if(I?(j=j&1|2,l.flags|=128):j&=1,P(Xt,j),fs(n,l,c,r),c=gt?Xi:0,!I&&n!==null&&(n.flags&128)!==0)e:for(n=l.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Mg(n,r,l);else if(n.tag===19)Mg(n,r,l);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===l)break e;for(;n.sibling===null;){if(n.return===null||n.return===l)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}switch(f){case"forwards":for(r=l.child,f=null;r!==null;)n=r.alternate,n!==null&&_o(n)===null&&(f=r),r=r.sibling;r=f,r===null?(f=l.child,l.child=null):(f=r.sibling,r.sibling=null),eh(l,!1,f,r,g,c);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=l.child,l.child=null;f!==null;){if(n=f.alternate,n!==null&&_o(n)===null){l.child=f;break}n=f.sibling,f.sibling=r,r=f,f=n}eh(l,!0,r,null,g,c);break;case"together":eh(l,!1,null,null,void 0,c);break;default:l.memoizedState=null}return l.child}function Yn(n,l,r){if(n!==null&&(l.dependencies=n.dependencies),ja|=l.lanes,(r&l.childLanes)===0)if(n!==null){if(ql(n,l,r,!1),(r&l.childLanes)===0)return null}else return null;if(n!==null&&l.child!==n.child)throw Error(i(153));if(l.child!==null){for(n=l.child,r=zn(n,n.pendingProps),l.child=r,r.return=l;n.sibling!==null;)n=n.sibling,r=r.sibling=zn(n,n.pendingProps),r.return=l;r.sibling=null}return l.child}function th(n,l){return(n.lanes&l)!==0?!0:(n=n.dependencies,!!(n!==null&&No(n)))}function GN(n,l,r){switch(l.tag){case 3:xe(l,l.stateNode.containerInfo),ma(l,Jt,n.memoizedState.cache),ll();break;case 27:case 5:$e(l);break;case 4:xe(l,l.stateNode.containerInfo);break;case 10:ma(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,Au(l),null;break;case 13:var c=l.memoizedState;if(c!==null)return c.dehydrated!==null?(xa(l),l.flags|=128,null):(r&l.child.childLanes)!==0?Dg(n,l,r):(xa(l),n=Yn(n,l,r),n!==null?n.sibling:null);xa(l);break;case 19:var f=(n.flags&128)!==0;if(c=(r&l.childLanes)!==0,c||(ql(n,l,r,!1),c=(r&l.childLanes)!==0),f){if(c)return $g(n,l,r);l.flags|=128}if(f=l.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),P(Xt,Xt.current),c)break;return null;case 22:return l.lanes=0,Cg(n,l,r,l.pendingProps);case 24:ma(l,Jt,n.memoizedState.cache)}return Yn(n,l,r)}function Rg(n,l,r){if(n!==null)if(n.memoizedProps!==l.pendingProps)ts=!0;else{if(!th(n,r)&&(l.flags&128)===0)return ts=!1,GN(n,l,r);ts=(n.flags&131072)!==0}else ts=!1,gt&&(l.flags&1048576)!==0&&hp(l,Xi,l.index);switch(l.lanes=0,l.tag){case 16:e:{var c=l.pendingProps;if(n=cl(l.elementType),l.type=n,typeof n=="function")iu(n)?(c=ml(n,c),l.tag=1,l=kg(null,l,n,c,r)):(l.tag=0,l=Xu(null,l,n,c,r));else{if(n!=null){var f=n.$$typeof;if(f===z){l.tag=11,l=Ng(null,l,n,c,r);break e}else if(f===w){l.tag=14,l=wg(null,l,n,c,r);break e}}throw l=H(n)||n,Error(i(306,l,""))}}return l;case 0:return Xu(n,l,l.type,l.pendingProps,r);case 1:return c=l.type,f=ml(c,l.pendingProps),kg(n,l,c,f,r);case 3:e:{if(xe(l,l.stateNode.containerInfo),n===null)throw Error(i(387));c=l.pendingProps;var g=l.memoizedState;f=g.element,ju(n,l),sr(l,c,null,r);var j=l.memoizedState;if(c=j.cache,ma(l,Jt,c),c!==g.cache&&pu(l,[Jt],r,!0),tr(),c=j.element,g.isDehydrated)if(g={element:c,isDehydrated:!1,cache:j.cache},l.updateQueue.baseState=g,l.memoizedState=g,l.flags&256){l=_g(n,l,c,r);break e}else if(c!==f){f=sn(Error(i(424)),l),Wi(f),l=_g(n,l,c,r);break e}else{switch(n=l.stateNode.containerInfo,n.nodeType){case 9:n=n.body;break;default:n=n.nodeName==="HTML"?n.ownerDocument.body:n}for(Ot=on(n.firstChild),hs=l,gt=!0,ua=null,ln=!0,r=Cp(l,null,c,r),l.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(ll(),c===f){l=Yn(n,l,r);break e}fs(n,l,c,r)}l=l.child}return l;case 26:return Fo(n,l),n===null?(r=Yx(l.type,null,l.pendingProps,null))?l.memoizedState=r:gt||(r=l.type,n=l.pendingProps,c=ac(ee.current).createElement(r),c[Le]=l,c[X]=n,ps(c,r,n),Ke(c),l.stateNode=c):l.memoizedState=Yx(l.type,n.memoizedProps,l.pendingProps,n.memoizedState),null;case 27:return $e(l),n===null&&gt&&(c=l.stateNode=Hx(l.type,l.pendingProps,ee.current),hs=l,ln=!0,f=Ot,Aa(l.type)?(Rh=f,Ot=on(c.firstChild)):Ot=f),fs(n,l,l.pendingProps.children,r),Fo(n,l),n===null&&(l.flags|=4194304),l.child;case 5:return n===null&&gt&&((f=c=Ot)&&(c=ww(c,l.type,l.pendingProps,ln),c!==null?(l.stateNode=c,hs=l,Ot=on(c.firstChild),ln=!1,f=!0):f=!1),f||ha(l)),$e(l),f=l.type,g=l.pendingProps,j=n!==null?n.memoizedProps:null,c=g.children,kh(f,g)?c=null:j!==null&&kh(f,j)&&(l.flags|=32),l.memoizedState!==null&&(f=Tu(n,l,BN,null,null,r),Nr._currentValue=f),Fo(n,l),fs(n,l,c,r),l.child;case 6:return n===null&&gt&&((n=r=Ot)&&(r=Sw(r,l.pendingProps,ln),r!==null?(l.stateNode=r,hs=l,Ot=null,n=!0):n=!1),n||ha(l)),null;case 13:return Dg(n,l,r);case 4:return xe(l,l.stateNode.containerInfo),c=l.pendingProps,n===null?l.child=ul(l,null,c,r):fs(n,l,c,r),l.child;case 11:return Ng(n,l,l.type,l.pendingProps,r);case 7:return fs(n,l,l.pendingProps,r),l.child;case 8:return fs(n,l,l.pendingProps.children,r),l.child;case 12:return fs(n,l,l.pendingProps.children,r),l.child;case 10:return c=l.pendingProps,ma(l,l.type,c.value),fs(n,l,c.children,r),l.child;case 9:return f=l.type._context,c=l.pendingProps.children,rl(l),f=ms(f),c=c(f),l.flags|=1,fs(n,l,c,r),l.child;case 14:return wg(n,l,l.type,l.pendingProps,r);case 15:return Sg(n,l,l.type,l.pendingProps,r);case 19:return $g(n,l,r);case 31:return qN(n,l,r);case 22:return Cg(n,l,r,l.pendingProps);case 24:return rl(l),c=ms(Jt),n===null?(f=bu(),f===null&&(f=_t,g=gu(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=r),f=g),l.memoizedState={parent:c,cache:f},vu(l),ma(l,Jt,f)):((n.lanes&r)!==0&&(ju(n,l),sr(l,null,null,r),tr()),f=n.memoizedState,g=l.memoizedState,f.parent!==c?(f={parent:c,cache:c},l.memoizedState=f,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=f),ma(l,Jt,c)):(c=g.cache,ma(l,Jt,c),c!==f.cache&&pu(l,[Jt],r,!0))),fs(n,l,l.pendingProps.children,r),l.child;case 29:throw l.pendingProps}throw Error(i(156,l.tag))}function qn(n){n.flags|=4}function sh(n,l,r,c,f){if((l=(n.mode&32)!==0)&&(l=!1),l){if(n.flags|=16777216,(f&335544128)===f)if(n.stateNode.complete)n.flags|=8192;else if(rx())n.flags|=8192;else throw dl=Ao,yu}else n.flags&=-16777217}function Lg(n,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)n.flags&=-16777217;else if(n.flags|=16777216,!Kx(l))if(rx())n.flags|=8192;else throw dl=Ao,yu}function Po(n,l){l!==null&&(n.flags|=4),n.flags&16384&&(l=n.tag!==22?io():536870912,n.lanes|=l,ai|=l)}function or(n,l){if(!gt)switch(n.tailMode){case"hidden":l=n.tail;for(var r=null;l!==null;)l.alternate!==null&&(r=l),l=l.sibling;r===null?n.tail=null:r.sibling=null;break;case"collapsed":r=n.tail;for(var c=null;r!==null;)r.alternate!==null&&(c=r),r=r.sibling;c===null?l||n.tail===null?n.tail=null:n.tail.sibling=null:c.sibling=null}}function Bt(n){var l=n.alternate!==null&&n.alternate.child===n.child,r=0,c=0;if(l)for(var f=n.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags&65011712,c|=f.flags&65011712,f.return=n,f=f.sibling;else for(f=n.child;f!==null;)r|=f.lanes|f.childLanes,c|=f.subtreeFlags,c|=f.flags,f.return=n,f=f.sibling;return n.subtreeFlags|=c,n.childLanes=r,l}function XN(n,l,r){var c=l.pendingProps;switch(du(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(l),null;case 1:return Bt(l),null;case 3:return r=l.stateNode,c=null,n!==null&&(c=n.memoizedState.cache),l.memoizedState.cache!==c&&(l.flags|=2048),Hn(Jt),me(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Yl(l)?qn(l):n===null||n.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,hu())),Bt(l),null;case 26:var f=l.type,g=l.memoizedState;return n===null?(qn(l),g!==null?(Bt(l),Lg(l,g)):(Bt(l),sh(l,f,null,c,r))):g?g!==n.memoizedState?(qn(l),Bt(l),Lg(l,g)):(Bt(l),l.flags&=-16777217):(n=n.memoizedProps,n!==c&&qn(l),Bt(l),sh(l,f,n,c,r)),null;case 27:if(se(l),r=ee.current,f=l.type,n!==null&&l.stateNode!=null)n.memoizedProps!==c&&qn(l);else{if(!c){if(l.stateNode===null)throw Error(i(166));return Bt(l),null}n=G.current,Yl(l)?fp(l):(n=Hx(f,c,r),l.stateNode=n,qn(l))}return Bt(l),null;case 5:if(se(l),f=l.type,n!==null&&l.stateNode!=null)n.memoizedProps!==c&&qn(l);else{if(!c){if(l.stateNode===null)throw Error(i(166));return Bt(l),null}if(g=G.current,Yl(l))fp(l);else{var j=ac(ee.current);switch(g){case 1:g=j.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=j.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=j.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=j.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=j.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof c.is=="string"?j.createElement("select",{is:c.is}):j.createElement("select"),c.multiple?g.multiple=!0:c.size&&(g.size=c.size);break;default:g=typeof c.is=="string"?j.createElement(f,{is:c.is}):j.createElement(f)}}g[Le]=l,g[X]=c;e:for(j=l.child;j!==null;){if(j.tag===5||j.tag===6)g.appendChild(j.stateNode);else if(j.tag!==4&&j.tag!==27&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===l)break e;for(;j.sibling===null;){if(j.return===null||j.return===l)break e;j=j.return}j.sibling.return=j.return,j=j.sibling}l.stateNode=g;e:switch(ps(g,f,c),f){case"button":case"input":case"select":case"textarea":c=!!c.autoFocus;break e;case"img":c=!0;break e;default:c=!1}c&&qn(l)}}return Bt(l),sh(l,l.type,n===null?null:n.memoizedProps,l.pendingProps,r),null;case 6:if(n&&l.stateNode!=null)n.memoizedProps!==c&&qn(l);else{if(typeof c!="string"&&l.stateNode===null)throw Error(i(166));if(n=ee.current,Yl(l)){if(n=l.stateNode,r=l.memoizedProps,c=null,f=hs,f!==null)switch(f.tag){case 27:case 5:c=f.memoizedProps}n[Le]=l,n=!!(n.nodeValue===r||c!==null&&c.suppressHydrationWarning===!0||Dx(n.nodeValue,r)),n||ha(l,!0)}else n=ac(n).createTextNode(c),n[Le]=l,l.stateNode=n}return Bt(l),null;case 31:if(r=l.memoizedState,n===null||n.memoizedState!==null){if(c=Yl(l),r!==null){if(n===null){if(!c)throw Error(i(318));if(n=l.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(i(557));n[Le]=l}else ll(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Bt(l),n=!1}else r=hu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=r),n=!0;if(!n)return l.flags&256?(Fs(l),l):(Fs(l),null);if((l.flags&128)!==0)throw Error(i(558))}return Bt(l),null;case 13:if(c=l.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(f=Yl(l),c!==null&&c.dehydrated!==null){if(n===null){if(!f)throw Error(i(318));if(f=l.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Le]=l}else ll(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;Bt(l),f=!1}else f=hu(),n!==null&&n.memoizedState!==null&&(n.memoizedState.hydrationErrors=f),f=!0;if(!f)return l.flags&256?(Fs(l),l):(Fs(l),null)}return Fs(l),(l.flags&128)!==0?(l.lanes=r,l):(r=c!==null,n=n!==null&&n.memoizedState!==null,r&&(c=l.child,f=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(f=c.alternate.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048)),r!==n&&r&&(l.child.flags|=8192),Po(l,l.updateQueue),Bt(l),null);case 4:return me(),n===null&&Sh(l.stateNode.containerInfo),Bt(l),null;case 10:return Hn(l.type),Bt(l),null;case 19:if(W(Xt),c=l.memoizedState,c===null)return Bt(l),null;if(f=(l.flags&128)!==0,g=c.rendering,g===null)if(f)or(c,!1);else{if(qt!==0||n!==null&&(n.flags&128)!==0)for(n=l.child;n!==null;){if(g=_o(n),g!==null){for(l.flags|=128,or(c,!1),n=g.updateQueue,l.updateQueue=n,Po(l,n),l.subtreeFlags=0,n=r,r=l.child;r!==null;)cp(r,n),r=r.sibling;return P(Xt,Xt.current&1|2),gt&&Un(l,c.treeForkCount),l.child}n=n.sibling}c.tail!==null&&Xe()>Xo&&(l.flags|=128,f=!0,or(c,!1),l.lanes=4194304)}else{if(!f)if(n=_o(g),n!==null){if(l.flags|=128,f=!0,n=n.updateQueue,l.updateQueue=n,Po(l,n),or(c,!0),c.tail===null&&c.tailMode==="hidden"&&!g.alternate&&!gt)return Bt(l),null}else 2*Xe()-c.renderingStartTime>Xo&&r!==536870912&&(l.flags|=128,f=!0,or(c,!1),l.lanes=4194304);c.isBackwards?(g.sibling=l.child,l.child=g):(n=c.last,n!==null?n.sibling=g:l.child=g,c.last=g)}return c.tail!==null?(n=c.tail,c.rendering=n,c.tail=n.sibling,c.renderingStartTime=Xe(),n.sibling=null,r=Xt.current,P(Xt,f?r&1|2:r&1),gt&&Un(l,c.treeForkCount),n):(Bt(l),null);case 22:case 23:return Fs(l),Cu(),c=l.memoizedState!==null,n!==null?n.memoizedState!==null!==c&&(l.flags|=8192):c&&(l.flags|=8192),c?(r&536870912)!==0&&(l.flags&128)===0&&(Bt(l),l.subtreeFlags&6&&(l.flags|=8192)):Bt(l),r=l.updateQueue,r!==null&&Po(l,r.retryQueue),r=null,n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),c=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(c=l.memoizedState.cachePool.pool),c!==r&&(l.flags|=2048),n!==null&&W(ol),null;case 24:return r=null,n!==null&&(r=n.memoizedState.cache),l.memoizedState.cache!==r&&(l.flags|=2048),Hn(Jt),Bt(l),null;case 25:return null;case 30:return null}throw Error(i(156,l.tag))}function WN(n,l){switch(du(l),l.tag){case 1:return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 3:return Hn(Jt),me(),n=l.flags,(n&65536)!==0&&(n&128)===0?(l.flags=n&-65537|128,l):null;case 26:case 27:case 5:return se(l),null;case 31:if(l.memoizedState!==null){if(Fs(l),l.alternate===null)throw Error(i(340));ll()}return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 13:if(Fs(l),n=l.memoizedState,n!==null&&n.dehydrated!==null){if(l.alternate===null)throw Error(i(340));ll()}return n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 19:return W(Xt),null;case 4:return me(),null;case 10:return Hn(l.type),null;case 22:case 23:return Fs(l),Cu(),n!==null&&W(ol),n=l.flags,n&65536?(l.flags=n&-65537|128,l):null;case 24:return Hn(Jt),null;case 25:return null;default:return null}}function Ig(n,l){switch(du(l),l.tag){case 3:Hn(Jt),me();break;case 26:case 27:case 5:se(l);break;case 4:me();break;case 31:l.memoizedState!==null&&Fs(l);break;case 13:Fs(l);break;case 19:W(Xt);break;case 10:Hn(l.type);break;case 22:case 23:Fs(l),Cu(),n!==null&&W(ol);break;case 24:Hn(Jt)}}function cr(n,l){try{var r=l.updateQueue,c=r!==null?r.lastEffect:null;if(c!==null){var f=c.next;r=f;do{if((r.tag&n)===n){c=void 0;var g=r.create,j=r.inst;c=g(),j.destroy=c}r=r.next}while(r!==f)}}catch(I){Ct(l,l.return,I)}}function ya(n,l,r){try{var c=l.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var g=f.next;c=g;do{if((c.tag&n)===n){var j=c.inst,I=j.destroy;if(I!==void 0){j.destroy=void 0,f=l;var J=r,re=I;try{re()}catch(ge){Ct(f,J,ge)}}}c=c.next}while(c!==g)}}catch(ge){Ct(l,l.return,ge)}}function Og(n){var l=n.updateQueue;if(l!==null){var r=n.stateNode;try{Ep(l,r)}catch(c){Ct(n,n.return,c)}}}function Bg(n,l,r){r.props=ml(n.type,n.memoizedProps),r.state=n.memoizedState;try{r.componentWillUnmount()}catch(c){Ct(n,l,c)}}function dr(n,l){try{var r=n.ref;if(r!==null){switch(n.tag){case 26:case 27:case 5:var c=n.stateNode;break;case 30:c=n.stateNode;break;default:c=n.stateNode}typeof r=="function"?n.refCleanup=r(c):r.current=c}}catch(f){Ct(n,l,f)}}function Sn(n,l){var r=n.ref,c=n.refCleanup;if(r!==null)if(typeof c=="function")try{c()}catch(f){Ct(n,l,f)}finally{n.refCleanup=null,n=n.alternate,n!=null&&(n.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Ct(n,l,f)}else r.current=null}function zg(n){var l=n.type,r=n.memoizedProps,c=n.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":r.autoFocus&&c.focus();break e;case"img":r.src?c.src=r.src:r.srcSet&&(c.srcset=r.srcSet)}}catch(f){Ct(n,n.return,f)}}function nh(n,l,r){try{var c=n.stateNode;xw(c,n.type,r,l),c[X]=l}catch(f){Ct(n,n.return,f)}}function Ug(n){return n.tag===5||n.tag===3||n.tag===26||n.tag===27&&Aa(n.type)||n.tag===4}function ah(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Ug(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.tag===27&&Aa(n.type)||n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function lh(n,l,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,l?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(n,l):(l=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,l.appendChild(n),r=r._reactRootContainer,r!=null||l.onclick!==null||(l.onclick=On));else if(c!==4&&(c===27&&Aa(n.type)&&(r=n.stateNode,l=null),n=n.child,n!==null))for(lh(n,l,r),n=n.sibling;n!==null;)lh(n,l,r),n=n.sibling}function Vo(n,l,r){var c=n.tag;if(c===5||c===6)n=n.stateNode,l?r.insertBefore(n,l):r.appendChild(n);else if(c!==4&&(c===27&&Aa(n.type)&&(r=n.stateNode),n=n.child,n!==null))for(Vo(n,l,r),n=n.sibling;n!==null;)Vo(n,l,r),n=n.sibling}function Fg(n){var l=n.stateNode,r=n.memoizedProps;try{for(var c=n.type,f=l.attributes;f.length;)l.removeAttributeNode(f[0]);ps(l,c,r),l[Le]=n,l[X]=r}catch(g){Ct(n,n.return,g)}}var Gn=!1,ss=!1,ih=!1,Hg=typeof WeakSet=="function"?WeakSet:Set,rs=null;function KN(n,l){if(n=n.containerInfo,Eh=uc,n=ep(n),Jd(n)){if("selectionStart"in n)var r={start:n.selectionStart,end:n.selectionEnd};else e:{r=(r=n.ownerDocument)&&r.defaultView||window;var c=r.getSelection&&r.getSelection();if(c&&c.rangeCount!==0){r=c.anchorNode;var f=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{r.nodeType,g.nodeType}catch{r=null;break e}var j=0,I=-1,J=-1,re=0,ge=0,ve=n,ce=null;t:for(;;){for(var he;ve!==r||f!==0&&ve.nodeType!==3||(I=j+f),ve!==g||c!==0&&ve.nodeType!==3||(J=j+c),ve.nodeType===3&&(j+=ve.nodeValue.length),(he=ve.firstChild)!==null;)ce=ve,ve=he;for(;;){if(ve===n)break t;if(ce===r&&++re===f&&(I=j),ce===g&&++ge===c&&(J=j),(he=ve.nextSibling)!==null)break;ve=ce,ce=ve.parentNode}ve=he}r=I===-1||J===-1?null:{start:I,end:J}}else r=null}r=r||{start:0,end:0}}else r=null;for(Th={focusedElem:n,selectionRange:r},uc=!1,rs=l;rs!==null;)if(l=rs,n=l.child,(l.subtreeFlags&1028)!==0&&n!==null)n.return=l,rs=n;else for(;rs!==null;){switch(l=rs,g=l.alternate,n=l.flags,l.tag){case 0:if((n&4)!==0&&(n=l.updateQueue,n=n!==null?n.events:null,n!==null))for(r=0;r<n.length;r++)f=n[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((n&1024)!==0&&g!==null){n=void 0,r=l,f=g.memoizedProps,g=g.memoizedState,c=r.stateNode;try{var ze=ml(r.type,f);n=c.getSnapshotBeforeUpdate(ze,g),c.__reactInternalSnapshotBeforeUpdate=n}catch(Ze){Ct(r,r.return,Ze)}}break;case 3:if((n&1024)!==0){if(n=l.stateNode.containerInfo,r=n.nodeType,r===9)Dh(n);else if(r===1)switch(n.nodeName){case"HEAD":case"HTML":case"BODY":Dh(n);break;default:n.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((n&1024)!==0)throw Error(i(163))}if(n=l.sibling,n!==null){n.return=l.return,rs=n;break}rs=l.return}}function Pg(n,l,r){var c=r.flags;switch(r.tag){case 0:case 11:case 15:Wn(n,r),c&4&&cr(5,r);break;case 1:if(Wn(n,r),c&4)if(n=r.stateNode,l===null)try{n.componentDidMount()}catch(j){Ct(r,r.return,j)}else{var f=ml(r.type,l.memoizedProps);l=l.memoizedState;try{n.componentDidUpdate(f,l,n.__reactInternalSnapshotBeforeUpdate)}catch(j){Ct(r,r.return,j)}}c&64&&Og(r),c&512&&dr(r,r.return);break;case 3:if(Wn(n,r),c&64&&(n=r.updateQueue,n!==null)){if(l=null,r.child!==null)switch(r.child.tag){case 27:case 5:l=r.child.stateNode;break;case 1:l=r.child.stateNode}try{Ep(n,l)}catch(j){Ct(r,r.return,j)}}break;case 27:l===null&&c&4&&Fg(r);case 26:case 5:Wn(n,r),l===null&&c&4&&zg(r),c&512&&dr(r,r.return);break;case 12:Wn(n,r);break;case 31:Wn(n,r),c&4&&qg(n,r);break;case 13:Wn(n,r),c&4&&Gg(n,r),c&64&&(n=r.memoizedState,n!==null&&(n=n.dehydrated,n!==null&&(r=lw.bind(null,r),Cw(n,r))));break;case 22:if(c=r.memoizedState!==null||Gn,!c){l=l!==null&&l.memoizedState!==null||ss,f=Gn;var g=ss;Gn=c,(ss=l)&&!g?Kn(n,r,(r.subtreeFlags&8772)!==0):Wn(n,r),Gn=f,ss=g}break;case 30:break;default:Wn(n,r)}}function Vg(n){var l=n.alternate;l!==null&&(n.alternate=null,Vg(l)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(l=n.stateNode,l!==null&&Ie(l)),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}var Ht=null,Es=!1;function Xn(n,l,r){for(r=r.child;r!==null;)Yg(n,l,r),r=r.sibling}function Yg(n,l,r){if(us&&typeof us.onCommitFiberUnmount=="function")try{us.onCommitFiberUnmount(oa,r)}catch{}switch(r.tag){case 26:ss||Sn(r,l),Xn(n,l,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:ss||Sn(r,l);var c=Ht,f=Es;Aa(r.type)&&(Ht=r.stateNode,Es=!1),Xn(n,l,r),yr(r.stateNode),Ht=c,Es=f;break;case 5:ss||Sn(r,l);case 6:if(c=Ht,f=Es,Ht=null,Xn(n,l,r),Ht=c,Es=f,Ht!==null)if(Es)try{(Ht.nodeType===9?Ht.body:Ht.nodeName==="HTML"?Ht.ownerDocument.body:Ht).removeChild(r.stateNode)}catch(g){Ct(r,l,g)}else try{Ht.removeChild(r.stateNode)}catch(g){Ct(r,l,g)}break;case 18:Ht!==null&&(Es?(n=Ht,Ox(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,r.stateNode),hi(n)):Ox(Ht,r.stateNode));break;case 4:c=Ht,f=Es,Ht=r.stateNode.containerInfo,Es=!0,Xn(n,l,r),Ht=c,Es=f;break;case 0:case 11:case 14:case 15:ya(2,r,l),ss||ya(4,r,l),Xn(n,l,r);break;case 1:ss||(Sn(r,l),c=r.stateNode,typeof c.componentWillUnmount=="function"&&Bg(r,l,c)),Xn(n,l,r);break;case 21:Xn(n,l,r);break;case 22:ss=(c=ss)||r.memoizedState!==null,Xn(n,l,r),ss=c;break;default:Xn(n,l,r)}}function qg(n,l){if(l.memoizedState===null&&(n=l.alternate,n!==null&&(n=n.memoizedState,n!==null))){n=n.dehydrated;try{hi(n)}catch(r){Ct(l,l.return,r)}}}function Gg(n,l){if(l.memoizedState===null&&(n=l.alternate,n!==null&&(n=n.memoizedState,n!==null&&(n=n.dehydrated,n!==null))))try{hi(n)}catch(r){Ct(l,l.return,r)}}function QN(n){switch(n.tag){case 31:case 13:case 19:var l=n.stateNode;return l===null&&(l=n.stateNode=new Hg),l;case 22:return n=n.stateNode,l=n._retryCache,l===null&&(l=n._retryCache=new Hg),l;default:throw Error(i(435,n.tag))}}function Yo(n,l){var r=QN(n);l.forEach(function(c){if(!r.has(c)){r.add(c);var f=iw.bind(null,n,c);c.then(f,f)}})}function Ts(n,l){var r=l.deletions;if(r!==null)for(var c=0;c<r.length;c++){var f=r[c],g=n,j=l,I=j;e:for(;I!==null;){switch(I.tag){case 27:if(Aa(I.type)){Ht=I.stateNode,Es=!1;break e}break;case 5:Ht=I.stateNode,Es=!1;break e;case 3:case 4:Ht=I.stateNode.containerInfo,Es=!0;break e}I=I.return}if(Ht===null)throw Error(i(160));Yg(g,j,f),Ht=null,Es=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)Xg(l,n),l=l.sibling}var bn=null;function Xg(n,l){var r=n.alternate,c=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:Ts(l,n),ks(n),c&4&&(ya(3,n,n.return),cr(3,n),ya(5,n,n.return));break;case 1:Ts(l,n),ks(n),c&512&&(ss||r===null||Sn(r,r.return)),c&64&&Gn&&(n=n.updateQueue,n!==null&&(c=n.callbacks,c!==null&&(r=n.shared.hiddenCallbacks,n.shared.hiddenCallbacks=r===null?c:r.concat(c))));break;case 26:var f=bn;if(Ts(l,n),ks(n),c&512&&(ss||r===null||Sn(r,r.return)),c&4){var g=r!==null?r.memoizedState:null;if(c=n.memoizedState,r===null)if(c===null)if(n.stateNode===null){e:{c=n.type,r=n.memoizedProps,f=f.ownerDocument||f;t:switch(c){case"title":g=f.getElementsByTagName("title")[0],(!g||g[Oe]||g[Le]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(c),f.head.insertBefore(g,f.querySelector("head > title"))),ps(g,c,r),g[Le]=n,Ke(g),c=g;break e;case"link":var j=Xx("link","href",f).get(c+(r.href||""));if(j){for(var I=0;I<j.length;I++)if(g=j[I],g.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&g.getAttribute("rel")===(r.rel==null?null:r.rel)&&g.getAttribute("title")===(r.title==null?null:r.title)&&g.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){j.splice(I,1);break t}}g=f.createElement(c),ps(g,c,r),f.head.appendChild(g);break;case"meta":if(j=Xx("meta","content",f).get(c+(r.content||""))){for(I=0;I<j.length;I++)if(g=j[I],g.getAttribute("content")===(r.content==null?null:""+r.content)&&g.getAttribute("name")===(r.name==null?null:r.name)&&g.getAttribute("property")===(r.property==null?null:r.property)&&g.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&g.getAttribute("charset")===(r.charSet==null?null:r.charSet)){j.splice(I,1);break t}}g=f.createElement(c),ps(g,c,r),f.head.appendChild(g);break;default:throw Error(i(468,c))}g[Le]=n,Ke(g),c=g}n.stateNode=c}else Wx(f,n.type,n.stateNode);else n.stateNode=Gx(f,c,n.memoizedProps);else g!==c?(g===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):g.count--,c===null?Wx(f,n.type,n.stateNode):Gx(f,c,n.memoizedProps)):c===null&&n.stateNode!==null&&nh(n,n.memoizedProps,r.memoizedProps)}break;case 27:Ts(l,n),ks(n),c&512&&(ss||r===null||Sn(r,r.return)),r!==null&&c&4&&nh(n,n.memoizedProps,r.memoizedProps);break;case 5:if(Ts(l,n),ks(n),c&512&&(ss||r===null||Sn(r,r.return)),n.flags&32){f=n.stateNode;try{Ll(f,"")}catch(ze){Ct(n,n.return,ze)}}c&4&&n.stateNode!=null&&(f=n.memoizedProps,nh(n,f,r!==null?r.memoizedProps:f)),c&1024&&(ih=!0);break;case 6:if(Ts(l,n),ks(n),c&4){if(n.stateNode===null)throw Error(i(162));c=n.memoizedProps,r=n.stateNode;try{r.nodeValue=c}catch(ze){Ct(n,n.return,ze)}}break;case 3:if(rc=null,f=bn,bn=lc(l.containerInfo),Ts(l,n),bn=f,ks(n),c&4&&r!==null&&r.memoizedState.isDehydrated)try{hi(l.containerInfo)}catch(ze){Ct(n,n.return,ze)}ih&&(ih=!1,Wg(n));break;case 4:c=bn,bn=lc(n.stateNode.containerInfo),Ts(l,n),ks(n),bn=c;break;case 12:Ts(l,n),ks(n);break;case 31:Ts(l,n),ks(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Yo(n,c)));break;case 13:Ts(l,n),ks(n),n.child.flags&8192&&n.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(Go=Xe()),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Yo(n,c)));break;case 22:f=n.memoizedState!==null;var J=r!==null&&r.memoizedState!==null,re=Gn,ge=ss;if(Gn=re||f,ss=ge||J,Ts(l,n),ss=ge,Gn=re,ks(n),c&8192)e:for(l=n.stateNode,l._visibility=f?l._visibility&-2:l._visibility|1,f&&(r===null||J||Gn||ss||fl(n)),r=null,l=n;;){if(l.tag===5||l.tag===26){if(r===null){J=r=l;try{if(g=J.stateNode,f)j=g.style,typeof j.setProperty=="function"?j.setProperty("display","none","important"):j.display="none";else{I=J.stateNode;var ve=J.memoizedProps.style,ce=ve!=null&&ve.hasOwnProperty("display")?ve.display:null;I.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(ze){Ct(J,J.return,ze)}}}else if(l.tag===6){if(r===null){J=l;try{J.stateNode.nodeValue=f?"":J.memoizedProps}catch(ze){Ct(J,J.return,ze)}}}else if(l.tag===18){if(r===null){J=l;try{var he=J.stateNode;f?Bx(he,!0):Bx(J.stateNode,!1)}catch(ze){Ct(J,J.return,ze)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===n)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===n)break e;for(;l.sibling===null;){if(l.return===null||l.return===n)break e;r===l&&(r=null),l=l.return}r===l&&(r=null),l.sibling.return=l.return,l=l.sibling}c&4&&(c=n.updateQueue,c!==null&&(r=c.retryQueue,r!==null&&(c.retryQueue=null,Yo(n,r))));break;case 19:Ts(l,n),ks(n),c&4&&(c=n.updateQueue,c!==null&&(n.updateQueue=null,Yo(n,c)));break;case 30:break;case 21:break;default:Ts(l,n),ks(n)}}function ks(n){var l=n.flags;if(l&2){try{for(var r,c=n.return;c!==null;){if(Ug(c)){r=c;break}c=c.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var f=r.stateNode,g=ah(n);Vo(n,g,f);break;case 5:var j=r.stateNode;r.flags&32&&(Ll(j,""),r.flags&=-33);var I=ah(n);Vo(n,I,j);break;case 3:case 4:var J=r.stateNode.containerInfo,re=ah(n);lh(n,re,J);break;default:throw Error(i(161))}}catch(ge){Ct(n,n.return,ge)}n.flags&=-3}l&4096&&(n.flags&=-4097)}function Wg(n){if(n.subtreeFlags&1024)for(n=n.child;n!==null;){var l=n;Wg(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),n=n.sibling}}function Wn(n,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)Pg(n,l.alternate,l),l=l.sibling}function fl(n){for(n=n.child;n!==null;){var l=n;switch(l.tag){case 0:case 11:case 14:case 15:ya(4,l,l.return),fl(l);break;case 1:Sn(l,l.return);var r=l.stateNode;typeof r.componentWillUnmount=="function"&&Bg(l,l.return,r),fl(l);break;case 27:yr(l.stateNode);case 26:case 5:Sn(l,l.return),fl(l);break;case 22:l.memoizedState===null&&fl(l);break;case 30:fl(l);break;default:fl(l)}n=n.sibling}}function Kn(n,l,r){for(r=r&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var c=l.alternate,f=n,g=l,j=g.flags;switch(g.tag){case 0:case 11:case 15:Kn(f,g,r),cr(4,g);break;case 1:if(Kn(f,g,r),c=g,f=c.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(re){Ct(c,c.return,re)}if(c=g,f=c.updateQueue,f!==null){var I=c.stateNode;try{var J=f.shared.hiddenCallbacks;if(J!==null)for(f.shared.hiddenCallbacks=null,f=0;f<J.length;f++)Ap(J[f],I)}catch(re){Ct(c,c.return,re)}}r&&j&64&&Og(g),dr(g,g.return);break;case 27:Fg(g);case 26:case 5:Kn(f,g,r),r&&c===null&&j&4&&zg(g),dr(g,g.return);break;case 12:Kn(f,g,r);break;case 31:Kn(f,g,r),r&&j&4&&qg(f,g);break;case 13:Kn(f,g,r),r&&j&4&&Gg(f,g);break;case 22:g.memoizedState===null&&Kn(f,g,r),dr(g,g.return);break;case 30:break;default:Kn(f,g,r)}l=l.sibling}}function rh(n,l){var r=null;n!==null&&n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(r=n.memoizedState.cachePool.pool),n=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(n=l.memoizedState.cachePool.pool),n!==r&&(n!=null&&n.refCount++,r!=null&&Ki(r))}function oh(n,l){n=null,l.alternate!==null&&(n=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==n&&(l.refCount++,n!=null&&Ki(n))}function yn(n,l,r,c){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Kg(n,l,r,c),l=l.sibling}function Kg(n,l,r,c){var f=l.flags;switch(l.tag){case 0:case 11:case 15:yn(n,l,r,c),f&2048&&cr(9,l);break;case 1:yn(n,l,r,c);break;case 3:yn(n,l,r,c),f&2048&&(n=null,l.alternate!==null&&(n=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==n&&(l.refCount++,n!=null&&Ki(n)));break;case 12:if(f&2048){yn(n,l,r,c),n=l.stateNode;try{var g=l.memoizedProps,j=g.id,I=g.onPostCommit;typeof I=="function"&&I(j,l.alternate===null?"mount":"update",n.passiveEffectDuration,-0)}catch(J){Ct(l,l.return,J)}}else yn(n,l,r,c);break;case 31:yn(n,l,r,c);break;case 13:yn(n,l,r,c);break;case 23:break;case 22:g=l.stateNode,j=l.alternate,l.memoizedState!==null?g._visibility&2?yn(n,l,r,c):ur(n,l):g._visibility&2?yn(n,l,r,c):(g._visibility|=2,ti(n,l,r,c,(l.subtreeFlags&10256)!==0||!1)),f&2048&&rh(j,l);break;case 24:yn(n,l,r,c),f&2048&&oh(l.alternate,l);break;default:yn(n,l,r,c)}}function ti(n,l,r,c,f){for(f=f&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var g=n,j=l,I=r,J=c,re=j.flags;switch(j.tag){case 0:case 11:case 15:ti(g,j,I,J,f),cr(8,j);break;case 23:break;case 22:var ge=j.stateNode;j.memoizedState!==null?ge._visibility&2?ti(g,j,I,J,f):ur(g,j):(ge._visibility|=2,ti(g,j,I,J,f)),f&&re&2048&&rh(j.alternate,j);break;case 24:ti(g,j,I,J,f),f&&re&2048&&oh(j.alternate,j);break;default:ti(g,j,I,J,f)}l=l.sibling}}function ur(n,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var r=n,c=l,f=c.flags;switch(c.tag){case 22:ur(r,c),f&2048&&rh(c.alternate,c);break;case 24:ur(r,c),f&2048&&oh(c.alternate,c);break;default:ur(r,c)}l=l.sibling}}var hr=8192;function si(n,l,r){if(n.subtreeFlags&hr)for(n=n.child;n!==null;)Qg(n,l,r),n=n.sibling}function Qg(n,l,r){switch(n.tag){case 26:si(n,l,r),n.flags&hr&&n.memoizedState!==null&&Ow(r,bn,n.memoizedState,n.memoizedProps);break;case 5:si(n,l,r);break;case 3:case 4:var c=bn;bn=lc(n.stateNode.containerInfo),si(n,l,r),bn=c;break;case 22:n.memoizedState===null&&(c=n.alternate,c!==null&&c.memoizedState!==null?(c=hr,hr=16777216,si(n,l,r),hr=c):si(n,l,r));break;default:si(n,l,r)}}function Zg(n){var l=n.alternate;if(l!==null&&(n=l.child,n!==null)){l.child=null;do l=n.sibling,n.sibling=null,n=l;while(n!==null)}}function mr(n){var l=n.deletions;if((n.flags&16)!==0){if(l!==null)for(var r=0;r<l.length;r++){var c=l[r];rs=c,ex(c,n)}Zg(n)}if(n.subtreeFlags&10256)for(n=n.child;n!==null;)Jg(n),n=n.sibling}function Jg(n){switch(n.tag){case 0:case 11:case 15:mr(n),n.flags&2048&&ya(9,n,n.return);break;case 3:mr(n);break;case 12:mr(n);break;case 22:var l=n.stateNode;n.memoizedState!==null&&l._visibility&2&&(n.return===null||n.return.tag!==13)?(l._visibility&=-3,qo(n)):mr(n);break;default:mr(n)}}function qo(n){var l=n.deletions;if((n.flags&16)!==0){if(l!==null)for(var r=0;r<l.length;r++){var c=l[r];rs=c,ex(c,n)}Zg(n)}for(n=n.child;n!==null;){switch(l=n,l.tag){case 0:case 11:case 15:ya(8,l,l.return),qo(l);break;case 22:r=l.stateNode,r._visibility&2&&(r._visibility&=-3,qo(l));break;default:qo(l)}n=n.sibling}}function ex(n,l){for(;rs!==null;){var r=rs;switch(r.tag){case 0:case 11:case 15:ya(8,r,l);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var c=r.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ki(r.memoizedState.cache)}if(c=r.child,c!==null)c.return=r,rs=c;else e:for(r=n;rs!==null;){c=rs;var f=c.sibling,g=c.return;if(Vg(c),c===r){rs=null;break e}if(f!==null){f.return=g,rs=f;break e}rs=g}}}var ZN={getCacheForType:function(n){var l=ms(Jt),r=l.data.get(n);return r===void 0&&(r=n(),l.data.set(n,r)),r},cacheSignal:function(){return ms(Jt).controller.signal}},JN=typeof WeakMap=="function"?WeakMap:Map,Nt=0,_t=null,ct=null,mt=0,St=0,Hs=null,va=!1,ni=!1,ch=!1,Qn=0,qt=0,ja=0,pl=0,dh=0,Ps=0,ai=0,fr=null,_s=null,uh=!1,Go=0,tx=0,Xo=1/0,Wo=null,Na=null,as=0,wa=null,li=null,Zn=0,hh=0,mh=null,sx=null,pr=0,fh=null;function Vs(){return(Nt&2)!==0&&mt!==0?mt&-mt:L.T!==null?vh():je()}function nx(){if(Ps===0)if((mt&536870912)===0||gt){var n=Wa;Wa<<=1,(Wa&3932160)===0&&(Wa=262144),Ps=n}else Ps=536870912;return n=Us.current,n!==null&&(n.flags|=32),Ps}function Ds(n,l,r){(n===_t&&(St===2||St===9)||n.cancelPendingCommit!==null)&&(ii(n,0),Sa(n,mt,Ps,!1)),js(n,r),((Nt&2)===0||n!==_t)&&(n===_t&&((Nt&2)===0&&(pl|=r),qt===4&&Sa(n,mt,Ps,!1)),Cn(n))}function ax(n,l,r){if((Nt&6)!==0)throw Error(i(327));var c=!r&&(l&127)===0&&(l&n.expiredLanes)===0||Qa(n,l),f=c?sw(n,l):gh(n,l,!0),g=c;do{if(f===0){ni&&!c&&Sa(n,l,0,!1);break}else{if(r=n.current.alternate,g&&!ew(r)){f=gh(n,l,!1),g=!1;continue}if(f===2){if(g=l,n.errorRecoveryDisabledLanes&g)var j=0;else j=n.pendingLanes&-536870913,j=j!==0?j:j&536870912?536870912:0;if(j!==0){l=j;e:{var I=n;f=fr;var J=I.current.memoizedState.isDehydrated;if(J&&(ii(I,j).flags|=256),j=gh(I,j,!1),j!==2){if(ch&&!J){I.errorRecoveryDisabledLanes|=g,pl|=g,f=4;break e}g=_s,_s=f,g!==null&&(_s===null?_s=g:_s.push.apply(_s,g))}f=j}if(g=!1,f!==2)continue}}if(f===1){ii(n,0),Sa(n,l,0,!0);break}e:{switch(c=n,g=f,g){case 0:case 1:throw Error(i(345));case 4:if((l&4194048)!==l)break;case 6:Sa(c,l,Ps,!va);break e;case 2:_s=null;break;case 3:case 5:break;default:throw Error(i(329))}if((l&62914560)===l&&(f=Go+300-Xe(),10<f)){if(Sa(c,l,Ps,!va),_l(c,0,!0)!==0)break e;Zn=l,c.timeoutHandle=Lx(lx.bind(null,c,r,_s,Wo,uh,l,Ps,pl,ai,va,g,"Throttled",-0,0),f);break e}lx(c,r,_s,Wo,uh,l,Ps,pl,ai,va,g,null,-0,0)}}break}while(!0);Cn(n)}function lx(n,l,r,c,f,g,j,I,J,re,ge,ve,ce,he){if(n.timeoutHandle=-1,ve=l.subtreeFlags,ve&8192||(ve&16785408)===16785408){ve={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:On},Qg(l,g,ve);var ze=(g&62914560)===g?Go-Xe():(g&4194048)===g?tx-Xe():0;if(ze=Bw(ve,ze),ze!==null){Zn=g,n.cancelPendingCommit=ze(mx.bind(null,n,l,g,r,c,f,j,I,J,ge,ve,null,ce,he)),Sa(n,g,j,!re);return}}mx(n,l,g,r,c,f,j,I,J)}function ew(n){for(var l=n;;){var r=l.tag;if((r===0||r===11||r===15)&&l.flags&16384&&(r=l.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var c=0;c<r.length;c++){var f=r[c],g=f.getSnapshot;f=f.value;try{if(!Bs(g(),f))return!1}catch{return!1}}if(r=l.child,l.subtreeFlags&16384&&r!==null)r.return=l,l=r;else{if(l===n)break;for(;l.sibling===null;){if(l.return===null||l.return===n)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Sa(n,l,r,c){l&=~dh,l&=~pl,n.suspendedLanes|=l,n.pingedLanes&=~l,c&&(n.warmLanes|=l),c=n.expirationTimes;for(var f=l;0<f;){var g=31-gs(f),j=1<<g;c[g]=-1,f&=~j}r!==0&&jn(n,r,l)}function Ko(){return(Nt&6)===0?(gr(0),!1):!0}function ph(){if(ct!==null){if(St===0)var n=ct.return;else n=ct,Fn=il=null,Du(n),Kl=null,Zi=0,n=ct;for(;n!==null;)Ig(n.alternate,n),n=n.return;ct=null}}function ii(n,l){var r=n.timeoutHandle;r!==-1&&(n.timeoutHandle=-1,vw(r)),r=n.cancelPendingCommit,r!==null&&(n.cancelPendingCommit=null,r()),Zn=0,ph(),_t=n,ct=r=zn(n.current,null),mt=l,St=0,Hs=null,va=!1,ni=Qa(n,l),ch=!1,ai=Ps=dh=pl=ja=qt=0,_s=fr=null,uh=!1,(l&8)!==0&&(l|=l&32);var c=n.entangledLanes;if(c!==0)for(n=n.entanglements,c&=l;0<c;){var f=31-gs(c),g=1<<f;l|=n[f],c&=~g}return Qn=l,xo(),r}function ix(n,l){nt=null,L.H=ir,l===Wl||l===Co?(l=Np(),St=3):l===yu?(l=Np(),St=4):St=l===Gu?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Hs=l,ct===null&&(qt=1,zo(n,sn(l,n.current)))}function rx(){var n=Us.current;return n===null?!0:(mt&4194048)===mt?rn===null:(mt&62914560)===mt||(mt&536870912)!==0?n===rn:!1}function ox(){var n=L.H;return L.H=ir,n===null?ir:n}function cx(){var n=L.A;return L.A=ZN,n}function Qo(){qt=4,va||(mt&4194048)!==mt&&Us.current!==null||(ni=!0),(ja&134217727)===0&&(pl&134217727)===0||_t===null||Sa(_t,mt,Ps,!1)}function gh(n,l,r){var c=Nt;Nt|=2;var f=ox(),g=cx();(_t!==n||mt!==l)&&(Wo=null,ii(n,l)),l=!1;var j=qt;e:do try{if(St!==0&&ct!==null){var I=ct,J=Hs;switch(St){case 8:ph(),j=6;break e;case 3:case 2:case 9:case 6:Us.current===null&&(l=!0);var re=St;if(St=0,Hs=null,ri(n,I,J,re),r&&ni){j=0;break e}break;default:re=St,St=0,Hs=null,ri(n,I,J,re)}}tw(),j=qt;break}catch(ge){ix(n,ge)}while(!0);return l&&n.shellSuspendCounter++,Fn=il=null,Nt=c,L.H=f,L.A=g,ct===null&&(_t=null,mt=0,xo()),j}function tw(){for(;ct!==null;)dx(ct)}function sw(n,l){var r=Nt;Nt|=2;var c=ox(),f=cx();_t!==n||mt!==l?(Wo=null,Xo=Xe()+500,ii(n,l)):ni=Qa(n,l);e:do try{if(St!==0&&ct!==null){l=ct;var g=Hs;t:switch(St){case 1:St=0,Hs=null,ri(n,l,g,1);break;case 2:case 9:if(vp(g)){St=0,Hs=null,ux(l);break}l=function(){St!==2&&St!==9||_t!==n||(St=7),Cn(n)},g.then(l,l);break e;case 3:St=7;break e;case 4:St=5;break e;case 7:vp(g)?(St=0,Hs=null,ux(l)):(St=0,Hs=null,ri(n,l,g,7));break;case 5:var j=null;switch(ct.tag){case 26:j=ct.memoizedState;case 5:case 27:var I=ct;if(j?Kx(j):I.stateNode.complete){St=0,Hs=null;var J=I.sibling;if(J!==null)ct=J;else{var re=I.return;re!==null?(ct=re,Zo(re)):ct=null}break t}}St=0,Hs=null,ri(n,l,g,5);break;case 6:St=0,Hs=null,ri(n,l,g,6);break;case 8:ph(),qt=6;break e;default:throw Error(i(462))}}nw();break}catch(ge){ix(n,ge)}while(!0);return Fn=il=null,L.H=c,L.A=f,Nt=r,ct!==null?0:(_t=null,mt=0,xo(),qt)}function nw(){for(;ct!==null&&!De();)dx(ct)}function dx(n){var l=Rg(n.alternate,n,Qn);n.memoizedProps=n.pendingProps,l===null?Zo(n):ct=l}function ux(n){var l=n,r=l.alternate;switch(l.tag){case 15:case 0:l=Tg(r,l,l.pendingProps,l.type,void 0,mt);break;case 11:l=Tg(r,l,l.pendingProps,l.type.render,l.ref,mt);break;case 5:Du(l);default:Ig(r,l),l=ct=cp(l,Qn),l=Rg(r,l,Qn)}n.memoizedProps=n.pendingProps,l===null?Zo(n):ct=l}function ri(n,l,r,c){Fn=il=null,Du(l),Kl=null,Zi=0;var f=l.return;try{if(YN(n,f,l,r,mt)){qt=1,zo(n,sn(r,n.current)),ct=null;return}}catch(g){if(f!==null)throw ct=f,g;qt=1,zo(n,sn(r,n.current)),ct=null;return}l.flags&32768?(gt||c===1?n=!0:ni||(mt&536870912)!==0?n=!1:(va=n=!0,(c===2||c===9||c===3||c===6)&&(c=Us.current,c!==null&&c.tag===13&&(c.flags|=16384))),hx(l,n)):Zo(l)}function Zo(n){var l=n;do{if((l.flags&32768)!==0){hx(l,va);return}n=l.return;var r=XN(l.alternate,l,Qn);if(r!==null){ct=r;return}if(l=l.sibling,l!==null){ct=l;return}ct=l=n}while(l!==null);qt===0&&(qt=5)}function hx(n,l){do{var r=WN(n.alternate,n);if(r!==null){r.flags&=32767,ct=r;return}if(r=n.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!l&&(n=n.sibling,n!==null)){ct=n;return}ct=n=r}while(n!==null);qt=6,ct=null}function mx(n,l,r,c,f,g,j,I,J){n.cancelPendingCommit=null;do Jo();while(as!==0);if((Nt&6)!==0)throw Error(i(327));if(l!==null){if(l===n.current)throw Error(i(177));if(g=l.lanes|l.childLanes,g|=au,fn(n,r,g,j,I,J),n===_t&&(ct=_t=null,mt=0),li=l,wa=n,Zn=r,hh=g,mh=f,sx=c,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(n.callbackNode=null,n.callbackPriority=0,rw(Os,function(){return bx(),null})):(n.callbackNode=null,n.callbackPriority=0),c=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||c){c=L.T,L.T=null,f=$.p,$.p=2,j=Nt,Nt|=4;try{KN(n,l,r)}finally{Nt=j,$.p=f,L.T=c}}as=1,fx(),px(),gx()}}function fx(){if(as===1){as=0;var n=wa,l=li,r=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||r){r=L.T,L.T=null;var c=$.p;$.p=2;var f=Nt;Nt|=4;try{Xg(l,n);var g=Th,j=ep(n.containerInfo),I=g.focusedElem,J=g.selectionRange;if(j!==I&&I&&I.ownerDocument&&Jf(I.ownerDocument.documentElement,I)){if(J!==null&&Jd(I)){var re=J.start,ge=J.end;if(ge===void 0&&(ge=re),"selectionStart"in I)I.selectionStart=re,I.selectionEnd=Math.min(ge,I.value.length);else{var ve=I.ownerDocument||document,ce=ve&&ve.defaultView||window;if(ce.getSelection){var he=ce.getSelection(),ze=I.textContent.length,Ze=Math.min(J.start,ze),kt=J.end===void 0?Ze:Math.min(J.end,ze);!he.extend&&Ze>kt&&(j=kt,kt=Ze,Ze=j);var le=Zf(I,Ze),ne=Zf(I,kt);if(le&&ne&&(he.rangeCount!==1||he.anchorNode!==le.node||he.anchorOffset!==le.offset||he.focusNode!==ne.node||he.focusOffset!==ne.offset)){var ie=ve.createRange();ie.setStart(le.node,le.offset),he.removeAllRanges(),Ze>kt?(he.addRange(ie),he.extend(ne.node,ne.offset)):(ie.setEnd(ne.node,ne.offset),he.addRange(ie))}}}}for(ve=[],he=I;he=he.parentNode;)he.nodeType===1&&ve.push({element:he,left:he.scrollLeft,top:he.scrollTop});for(typeof I.focus=="function"&&I.focus(),I=0;I<ve.length;I++){var ye=ve[I];ye.element.scrollLeft=ye.left,ye.element.scrollTop=ye.top}}uc=!!Eh,Th=Eh=null}finally{Nt=f,$.p=c,L.T=r}}n.current=l,as=2}}function px(){if(as===2){as=0;var n=wa,l=li,r=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||r){r=L.T,L.T=null;var c=$.p;$.p=2;var f=Nt;Nt|=4;try{Pg(n,l.alternate,l)}finally{Nt=f,$.p=c,L.T=r}}as=3}}function gx(){if(as===4||as===3){as=0,Ue();var n=wa,l=li,r=Zn,c=sx;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?as=5:(as=0,li=wa=null,xx(n,n.pendingLanes));var f=n.pendingLanes;if(f===0&&(Na=null),Ml(r),l=l.stateNode,us&&typeof us.onCommitFiberRoot=="function")try{us.onCommitFiberRoot(oa,l,void 0,(l.current.flags&128)===128)}catch{}if(c!==null){l=L.T,f=$.p,$.p=2,L.T=null;try{for(var g=n.onRecoverableError,j=0;j<c.length;j++){var I=c[j];g(I.value,{componentStack:I.stack})}}finally{L.T=l,$.p=f}}(Zn&3)!==0&&Jo(),Cn(n),f=n.pendingLanes,(r&261930)!==0&&(f&42)!==0?n===fh?pr++:(pr=0,fh=n):pr=0,gr(0)}}function xx(n,l){(n.pooledCacheLanes&=l)===0&&(l=n.pooledCache,l!=null&&(n.pooledCache=null,Ki(l)))}function Jo(){return fx(),px(),gx(),bx()}function bx(){if(as!==5)return!1;var n=wa,l=hh;hh=0;var r=Ml(Zn),c=L.T,f=$.p;try{$.p=32>r?32:r,L.T=null,r=mh,mh=null;var g=wa,j=Zn;if(as=0,li=wa=null,Zn=0,(Nt&6)!==0)throw Error(i(331));var I=Nt;if(Nt|=4,Jg(g.current),Kg(g,g.current,j,r),Nt=I,gr(0,!1),us&&typeof us.onPostCommitFiberRoot=="function")try{us.onPostCommitFiberRoot(oa,g)}catch{}return!0}finally{$.p=f,L.T=c,xx(n,l)}}function yx(n,l,r){l=sn(r,l),l=qu(n.stateNode,l,2),n=ga(n,l,2),n!==null&&(js(n,2),Cn(n))}function Ct(n,l,r){if(n.tag===3)yx(n,n,r);else for(;l!==null;){if(l.tag===3){yx(l,n,r);break}else if(l.tag===1){var c=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(Na===null||!Na.has(c))){n=sn(r,n),r=vg(2),c=ga(l,r,2),c!==null&&(jg(r,c,l,n),js(c,2),Cn(c));break}}l=l.return}}function xh(n,l,r){var c=n.pingCache;if(c===null){c=n.pingCache=new JN;var f=new Set;c.set(l,f)}else f=c.get(l),f===void 0&&(f=new Set,c.set(l,f));f.has(r)||(ch=!0,f.add(r),n=aw.bind(null,n,l,r),l.then(n,n))}function aw(n,l,r){var c=n.pingCache;c!==null&&c.delete(l),n.pingedLanes|=n.suspendedLanes&r,n.warmLanes&=~r,_t===n&&(mt&r)===r&&(qt===4||qt===3&&(mt&62914560)===mt&&300>Xe()-Go?(Nt&2)===0&&ii(n,0):dh|=r,ai===mt&&(ai=0)),Cn(n)}function vx(n,l){l===0&&(l=io()),n=nl(n,l),n!==null&&(js(n,l),Cn(n))}function lw(n){var l=n.memoizedState,r=0;l!==null&&(r=l.retryLane),vx(n,r)}function iw(n,l){var r=0;switch(n.tag){case 31:case 13:var c=n.stateNode,f=n.memoizedState;f!==null&&(r=f.retryLane);break;case 19:c=n.stateNode;break;case 22:c=n.stateNode._retryCache;break;default:throw Error(i(314))}c!==null&&c.delete(l),vx(n,r)}function rw(n,l){return de(n,l)}var ec=null,oi=null,bh=!1,tc=!1,yh=!1,Ca=0;function Cn(n){n!==oi&&n.next===null&&(oi===null?ec=oi=n:oi=oi.next=n),tc=!0,bh||(bh=!0,cw())}function gr(n,l){if(!yh&&tc){yh=!0;do for(var r=!1,c=ec;c!==null;){if(n!==0){var f=c.pendingLanes;if(f===0)var g=0;else{var j=c.suspendedLanes,I=c.pingedLanes;g=(1<<31-gs(42|n)+1)-1,g&=f&~(j&~I),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(r=!0,Sx(c,g))}else g=mt,g=_l(c,c===_t?g:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),(g&3)===0||Qa(c,g)||(r=!0,Sx(c,g));c=c.next}while(r);yh=!1}}function ow(){jx()}function jx(){tc=bh=!1;var n=0;Ca!==0&&yw()&&(n=Ca);for(var l=Xe(),r=null,c=ec;c!==null;){var f=c.next,g=Nx(c,l);g===0?(c.next=null,r===null?ec=f:r.next=f,f===null&&(oi=r)):(r=c,(n!==0||(g&3)!==0)&&(tc=!0)),c=f}as!==0&&as!==5||gr(n),Ca!==0&&(Ca=0)}function Nx(n,l){for(var r=n.suspendedLanes,c=n.pingedLanes,f=n.expirationTimes,g=n.pendingLanes&-62914561;0<g;){var j=31-gs(g),I=1<<j,J=f[j];J===-1?((I&r)===0||(I&c)!==0)&&(f[j]=Zs(I,l)):J<=l&&(n.expiredLanes|=I),g&=~I}if(l=_t,r=mt,r=_l(n,n===l?r:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c=n.callbackNode,r===0||n===l&&(St===2||St===9)||n.cancelPendingCommit!==null)return c!==null&&c!==null&&Ne(c),n.callbackNode=null,n.callbackPriority=0;if((r&3)===0||Qa(n,r)){if(l=r&-r,l===n.callbackPriority)return l;switch(c!==null&&Ne(c),Ml(r)){case 2:case 8:r=pt;break;case 32:r=Os;break;case 268435456:r=vs;break;default:r=Os}return c=wx.bind(null,n),r=de(r,c),n.callbackPriority=l,n.callbackNode=r,l}return c!==null&&c!==null&&Ne(c),n.callbackPriority=2,n.callbackNode=null,2}function wx(n,l){if(as!==0&&as!==5)return n.callbackNode=null,n.callbackPriority=0,null;var r=n.callbackNode;if(Jo()&&n.callbackNode!==r)return null;var c=mt;return c=_l(n,n===_t?c:0,n.cancelPendingCommit!==null||n.timeoutHandle!==-1),c===0?null:(ax(n,c,l),Nx(n,Xe()),n.callbackNode!=null&&n.callbackNode===r?wx.bind(null,n):null)}function Sx(n,l){if(Jo())return null;ax(n,l,!0)}function cw(){jw(function(){(Nt&6)!==0?de(et,ow):jx()})}function vh(){if(Ca===0){var n=Gl;n===0&&(n=Xa,Xa<<=1,(Xa&261888)===0&&(Xa=256)),Ca=n}return Ca}function Cx(n){return n==null||typeof n=="symbol"||typeof n=="boolean"?null:typeof n=="function"?n:oo(""+n)}function Ax(n,l){var r=l.ownerDocument.createElement("input");return r.name=l.name,r.value=l.value,n.id&&r.setAttribute("form",n.id),l.parentNode.insertBefore(r,l),n=new FormData(n),r.parentNode.removeChild(r),n}function dw(n,l,r,c,f){if(l==="submit"&&r&&r.stateNode===f){var g=Cx((f[X]||null).action),j=c.submitter;j&&(l=(l=j[X]||null)?Cx(l.formAction):j.getAttribute("formAction"),l!==null&&(g=l,j=null));var I=new mo("action","action",null,c,f);n.push({event:I,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Ca!==0){var J=j?Ax(f,j):new FormData(f);Uu(r,{pending:!0,data:J,method:f.method,action:g},null,J)}}else typeof g=="function"&&(I.preventDefault(),J=j?Ax(f,j):new FormData(f),Uu(r,{pending:!0,data:J,method:f.method,action:g},g,J))},currentTarget:f}]})}}for(var jh=0;jh<nu.length;jh++){var Nh=nu[jh],uw=Nh.toLowerCase(),hw=Nh[0].toUpperCase()+Nh.slice(1);xn(uw,"on"+hw)}xn(np,"onAnimationEnd"),xn(ap,"onAnimationIteration"),xn(lp,"onAnimationStart"),xn("dblclick","onDoubleClick"),xn("focusin","onFocus"),xn("focusout","onBlur"),xn(TN,"onTransitionRun"),xn(kN,"onTransitionStart"),xn(_N,"onTransitionCancel"),xn(ip,"onTransitionEnd"),lt("onMouseEnter",["mouseout","mouseover"]),lt("onMouseLeave",["mouseout","mouseover"]),lt("onPointerEnter",["pointerout","pointerover"]),lt("onPointerLeave",["pointerout","pointerover"]),It("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),It("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),It("onBeforeInput",["compositionend","keypress","textInput","paste"]),It("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),It("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),It("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xr));function Ex(n,l){l=(l&4)!==0;for(var r=0;r<n.length;r++){var c=n[r],f=c.event;c=c.listeners;e:{var g=void 0;if(l)for(var j=c.length-1;0<=j;j--){var I=c[j],J=I.instance,re=I.currentTarget;if(I=I.listener,J!==g&&f.isPropagationStopped())break e;g=I,f.currentTarget=re;try{g(f)}catch(ge){go(ge)}f.currentTarget=null,g=J}else for(j=0;j<c.length;j++){if(I=c[j],J=I.instance,re=I.currentTarget,I=I.listener,J!==g&&f.isPropagationStopped())break e;g=I,f.currentTarget=re;try{g(f)}catch(ge){go(ge)}f.currentTarget=null,g=J}}}}function dt(n,l){var r=l[Se];r===void 0&&(r=l[Se]=new Set);var c=n+"__bubble";r.has(c)||(Tx(l,n,2,!1),r.add(c))}function wh(n,l,r){var c=0;l&&(c|=4),Tx(r,n,c,l)}var sc="_reactListening"+Math.random().toString(36).slice(2);function Sh(n){if(!n[sc]){n[sc]=!0,rt.forEach(function(r){r!=="selectionchange"&&(mw.has(r)||wh(r,!1,n),wh(r,!0,n))});var l=n.nodeType===9?n:n.ownerDocument;l===null||l[sc]||(l[sc]=!0,wh("selectionchange",!1,l))}}function Tx(n,l,r,c){switch(nb(l)){case 2:var f=Fw;break;case 8:f=Hw;break;default:f=zh}r=f.bind(null,l,r,n),f=void 0,!Vd||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(f=!0),c?f!==void 0?n.addEventListener(l,r,{capture:!0,passive:f}):n.addEventListener(l,r,!0):f!==void 0?n.addEventListener(l,r,{passive:f}):n.addEventListener(l,r,!1)}function Ch(n,l,r,c,f){var g=c;if((l&1)===0&&(l&2)===0&&c!==null)e:for(;;){if(c===null)return;var j=c.tag;if(j===3||j===4){var I=c.stateNode.containerInfo;if(I===f)break;if(j===4)for(j=c.return;j!==null;){var J=j.tag;if((J===3||J===4)&&j.stateNode.containerInfo===f)return;j=j.return}for(;I!==null;){if(j=Ee(I),j===null)return;if(J=j.tag,J===5||J===6||J===26||J===27){c=g=j;continue e}I=I.parentNode}}c=c.return}$f(function(){var re=g,ge=Hd(r),ve=[];e:{var ce=rp.get(n);if(ce!==void 0){var he=mo,ze=n;switch(n){case"keypress":if(uo(r)===0)break e;case"keydown":case"keyup":he=iN;break;case"focusin":ze="focus",he=Xd;break;case"focusout":ze="blur",he=Xd;break;case"beforeblur":case"afterblur":he=Xd;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":he=If;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":he=Xj;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":he=cN;break;case np:case ap:case lp:he=Qj;break;case ip:he=uN;break;case"scroll":case"scrollend":he=qj;break;case"wheel":he=mN;break;case"copy":case"cut":case"paste":he=Jj;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":he=Bf;break;case"toggle":case"beforetoggle":he=pN}var Ze=(l&4)!==0,kt=!Ze&&(n==="scroll"||n==="scrollend"),le=Ze?ce!==null?ce+"Capture":null:ce;Ze=[];for(var ne=re,ie;ne!==null;){var ye=ne;if(ie=ye.stateNode,ye=ye.tag,ye!==5&&ye!==26&&ye!==27||ie===null||le===null||(ye=zi(ne,le),ye!=null&&Ze.push(br(ne,ye,ie))),kt)break;ne=ne.return}0<Ze.length&&(ce=new he(ce,ze,null,r,ge),ve.push({event:ce,listeners:Ze}))}}if((l&7)===0){e:{if(ce=n==="mouseover"||n==="pointerover",he=n==="mouseout"||n==="pointerout",ce&&r!==Fd&&(ze=r.relatedTarget||r.fromElement)&&(Ee(ze)||ze[fe]))break e;if((he||ce)&&(ce=ge.window===ge?ge:(ce=ge.ownerDocument)?ce.defaultView||ce.parentWindow:window,he?(ze=r.relatedTarget||r.toElement,he=re,ze=ze?Ee(ze):null,ze!==null&&(kt=d(ze),Ze=ze.tag,ze!==kt||Ze!==5&&Ze!==27&&Ze!==6)&&(ze=null)):(he=null,ze=re),he!==ze)){if(Ze=If,ye="onMouseLeave",le="onMouseEnter",ne="mouse",(n==="pointerout"||n==="pointerover")&&(Ze=Bf,ye="onPointerLeave",le="onPointerEnter",ne="pointer"),kt=he==null?ce:Re(he),ie=ze==null?ce:Re(ze),ce=new Ze(ye,ne+"leave",he,r,ge),ce.target=kt,ce.relatedTarget=ie,ye=null,Ee(ge)===re&&(Ze=new Ze(le,ne+"enter",ze,r,ge),Ze.target=ie,Ze.relatedTarget=kt,ye=Ze),kt=ye,he&&ze)t:{for(Ze=fw,le=he,ne=ze,ie=0,ye=le;ye;ye=Ze(ye))ie++;ye=0;for(var Ye=ne;Ye;Ye=Ze(Ye))ye++;for(;0<ie-ye;)le=Ze(le),ie--;for(;0<ye-ie;)ne=Ze(ne),ye--;for(;ie--;){if(le===ne||ne!==null&&le===ne.alternate){Ze=le;break t}le=Ze(le),ne=Ze(ne)}Ze=null}else Ze=null;he!==null&&kx(ve,ce,he,Ze,!1),ze!==null&&kt!==null&&kx(ve,kt,ze,Ze,!0)}}e:{if(ce=re?Re(re):window,he=ce.nodeName&&ce.nodeName.toLowerCase(),he==="select"||he==="input"&&ce.type==="file")var yt=qf;else if(Vf(ce))if(Gf)yt=CN;else{yt=wN;var Pe=NN}else he=ce.nodeName,!he||he.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?re&&Ud(re.elementType)&&(yt=qf):yt=SN;if(yt&&(yt=yt(n,re))){Yf(ve,yt,r,ge);break e}Pe&&Pe(n,ce,re),n==="focusout"&&re&&ce.type==="number"&&re.memoizedProps.value!=null&&zd(ce,"number",ce.value)}switch(Pe=re?Re(re):window,n){case"focusin":(Vf(Pe)||Pe.contentEditable==="true")&&(zl=Pe,eu=re,Gi=null);break;case"focusout":Gi=eu=zl=null;break;case"mousedown":tu=!0;break;case"contextmenu":case"mouseup":case"dragend":tu=!1,tp(ve,r,ge);break;case"selectionchange":if(EN)break;case"keydown":case"keyup":tp(ve,r,ge)}var at;if(Kd)e:{switch(n){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else Bl?Hf(n,r)&&(ft="onCompositionEnd"):n==="keydown"&&r.keyCode===229&&(ft="onCompositionStart");ft&&(zf&&r.locale!=="ko"&&(Bl||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&Bl&&(at=Rf()):(ca=ge,Yd="value"in ca?ca.value:ca.textContent,Bl=!0)),Pe=nc(re,ft),0<Pe.length&&(ft=new Of(ft,n,null,r,ge),ve.push({event:ft,listeners:Pe}),at?ft.data=at:(at=Pf(r),at!==null&&(ft.data=at)))),(at=xN?bN(n,r):yN(n,r))&&(ft=nc(re,"onBeforeInput"),0<ft.length&&(Pe=new Of("onBeforeInput","beforeinput",null,r,ge),ve.push({event:Pe,listeners:ft}),Pe.data=at)),dw(ve,n,re,r,ge)}Ex(ve,l)})}function br(n,l,r){return{instance:n,listener:l,currentTarget:r}}function nc(n,l){for(var r=l+"Capture",c=[];n!==null;){var f=n,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=zi(n,r),f!=null&&c.unshift(br(n,f,g)),f=zi(n,l),f!=null&&c.push(br(n,f,g))),n.tag===3)return c;n=n.return}return[]}function fw(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5&&n.tag!==27);return n||null}function kx(n,l,r,c,f){for(var g=l._reactName,j=[];r!==null&&r!==c;){var I=r,J=I.alternate,re=I.stateNode;if(I=I.tag,J!==null&&J===c)break;I!==5&&I!==26&&I!==27||re===null||(J=re,f?(re=zi(r,g),re!=null&&j.unshift(br(r,re,J))):f||(re=zi(r,g),re!=null&&j.push(br(r,re,J)))),r=r.return}j.length!==0&&n.push({event:l,listeners:j})}var pw=/\r\n?/g,gw=/\u0000|\uFFFD/g;function _x(n){return(typeof n=="string"?n:""+n).replace(pw,`
`).replace(gw,"")}function Dx(n,l){return l=_x(l),_x(n)===l}function Tt(n,l,r,c,f,g){switch(r){case"children":typeof c=="string"?l==="body"||l==="textarea"&&c===""||Ll(n,c):(typeof c=="number"||typeof c=="bigint")&&l!=="body"&&Ll(n,""+c);break;case"className":$l(n,"class",c);break;case"tabIndex":$l(n,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":$l(n,r,c);break;case"style":Df(n,c,g);break;case"data":if(l!=="object"){$l(n,"data",c);break}case"src":case"href":if(c===""&&(l!=="a"||r!=="href")){n.removeAttribute(r);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=oo(""+c),n.setAttribute(r,c);break;case"action":case"formAction":if(typeof c=="function"){n.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(r==="formAction"?(l!=="input"&&Tt(n,l,"name",f.name,f,null),Tt(n,l,"formEncType",f.formEncType,f,null),Tt(n,l,"formMethod",f.formMethod,f,null),Tt(n,l,"formTarget",f.formTarget,f,null)):(Tt(n,l,"encType",f.encType,f,null),Tt(n,l,"method",f.method,f,null),Tt(n,l,"target",f.target,f,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){n.removeAttribute(r);break}c=oo(""+c),n.setAttribute(r,c);break;case"onClick":c!=null&&(n.onclick=On);break;case"onScroll":c!=null&&dt("scroll",n);break;case"onScrollEnd":c!=null&&dt("scrollend",n);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=r}}break;case"multiple":n.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":n.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){n.removeAttribute("xlink:href");break}r=oo(""+c),n.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""+c):n.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,""):n.removeAttribute(r);break;case"capture":case"download":c===!0?n.setAttribute(r,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?n.setAttribute(r,c):n.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?n.setAttribute(r,c):n.removeAttribute(r);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?n.removeAttribute(r):n.setAttribute(r,c);break;case"popover":dt("beforetoggle",n),dt("toggle",n),Ja(n,"popover",c);break;case"xlinkActuate":gn(n,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":gn(n,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":gn(n,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":gn(n,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":gn(n,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":gn(n,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":gn(n,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":gn(n,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":gn(n,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":Ja(n,"is",c);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=Vj.get(r)||r,Ja(n,r,c))}}function Ah(n,l,r,c,f,g){switch(r){case"style":Df(n,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(i(61));if(r=c.__html,r!=null){if(f.children!=null)throw Error(i(60));n.innerHTML=r}}break;case"children":typeof c=="string"?Ll(n,c):(typeof c=="number"||typeof c=="bigint")&&Ll(n,""+c);break;case"onScroll":c!=null&&dt("scroll",n);break;case"onScrollEnd":c!=null&&dt("scrollend",n);break;case"onClick":c!=null&&(n.onclick=On);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!$t.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),l=r.slice(2,f?r.length-7:void 0),g=n[X]||null,g=g!=null?g[r]:null,typeof g=="function"&&n.removeEventListener(l,g,f),typeof c=="function")){typeof g!="function"&&g!==null&&(r in n?n[r]=null:n.hasAttribute(r)&&n.removeAttribute(r)),n.addEventListener(l,c,f);break e}r in n?n[r]=c:c===!0?n.setAttribute(r,""):Ja(n,r,c)}}}function ps(n,l,r){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":dt("error",n),dt("load",n);var c=!1,f=!1,g;for(g in r)if(r.hasOwnProperty(g)){var j=r[g];if(j!=null)switch(g){case"src":c=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Tt(n,l,g,j,r,null)}}f&&Tt(n,l,"srcSet",r.srcSet,r,null),c&&Tt(n,l,"src",r.src,r,null);return;case"input":dt("invalid",n);var I=g=j=f=null,J=null,re=null;for(c in r)if(r.hasOwnProperty(c)){var ge=r[c];if(ge!=null)switch(c){case"name":f=ge;break;case"type":j=ge;break;case"checked":J=ge;break;case"defaultChecked":re=ge;break;case"value":g=ge;break;case"defaultValue":I=ge;break;case"children":case"dangerouslySetInnerHTML":if(ge!=null)throw Error(i(137,l));break;default:Tt(n,l,c,ge,r,null)}}Ef(n,g,I,J,re,j,f,!1);return;case"select":dt("invalid",n),c=j=g=null;for(f in r)if(r.hasOwnProperty(f)&&(I=r[f],I!=null))switch(f){case"value":g=I;break;case"defaultValue":j=I;break;case"multiple":c=I;default:Tt(n,l,f,I,r,null)}l=g,r=j,n.multiple=!!c,l!=null?Rl(n,!!c,l,!1):r!=null&&Rl(n,!!c,r,!0);return;case"textarea":dt("invalid",n),g=f=c=null;for(j in r)if(r.hasOwnProperty(j)&&(I=r[j],I!=null))switch(j){case"value":c=I;break;case"defaultValue":f=I;break;case"children":g=I;break;case"dangerouslySetInnerHTML":if(I!=null)throw Error(i(91));break;default:Tt(n,l,j,I,r,null)}kf(n,c,f,g);return;case"option":for(J in r)if(r.hasOwnProperty(J)&&(c=r[J],c!=null))switch(J){case"selected":n.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:Tt(n,l,J,c,r,null)}return;case"dialog":dt("beforetoggle",n),dt("toggle",n),dt("cancel",n),dt("close",n);break;case"iframe":case"object":dt("load",n);break;case"video":case"audio":for(c=0;c<xr.length;c++)dt(xr[c],n);break;case"image":dt("error",n),dt("load",n);break;case"details":dt("toggle",n);break;case"embed":case"source":case"link":dt("error",n),dt("load",n);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in r)if(r.hasOwnProperty(re)&&(c=r[re],c!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,l));default:Tt(n,l,re,c,r,null)}return;default:if(Ud(l)){for(ge in r)r.hasOwnProperty(ge)&&(c=r[ge],c!==void 0&&Ah(n,l,ge,c,r,void 0));return}}for(I in r)r.hasOwnProperty(I)&&(c=r[I],c!=null&&Tt(n,l,I,c,r,null))}function xw(n,l,r,c){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,j=null,I=null,J=null,re=null,ge=null;for(he in r){var ve=r[he];if(r.hasOwnProperty(he)&&ve!=null)switch(he){case"checked":break;case"value":break;case"defaultValue":J=ve;default:c.hasOwnProperty(he)||Tt(n,l,he,null,c,ve)}}for(var ce in c){var he=c[ce];if(ve=r[ce],c.hasOwnProperty(ce)&&(he!=null||ve!=null))switch(ce){case"type":g=he;break;case"name":f=he;break;case"checked":re=he;break;case"defaultChecked":ge=he;break;case"value":j=he;break;case"defaultValue":I=he;break;case"children":case"dangerouslySetInnerHTML":if(he!=null)throw Error(i(137,l));break;default:he!==ve&&Tt(n,l,ce,he,c,ve)}}Bd(n,j,I,J,re,ge,g,f);return;case"select":he=j=I=ce=null;for(g in r)if(J=r[g],r.hasOwnProperty(g)&&J!=null)switch(g){case"value":break;case"multiple":he=J;default:c.hasOwnProperty(g)||Tt(n,l,g,null,c,J)}for(f in c)if(g=c[f],J=r[f],c.hasOwnProperty(f)&&(g!=null||J!=null))switch(f){case"value":ce=g;break;case"defaultValue":I=g;break;case"multiple":j=g;default:g!==J&&Tt(n,l,f,g,c,J)}l=I,r=j,c=he,ce!=null?Rl(n,!!r,ce,!1):!!c!=!!r&&(l!=null?Rl(n,!!r,l,!0):Rl(n,!!r,r?[]:"",!1));return;case"textarea":he=ce=null;for(I in r)if(f=r[I],r.hasOwnProperty(I)&&f!=null&&!c.hasOwnProperty(I))switch(I){case"value":break;case"children":break;default:Tt(n,l,I,null,c,f)}for(j in c)if(f=c[j],g=r[j],c.hasOwnProperty(j)&&(f!=null||g!=null))switch(j){case"value":ce=f;break;case"defaultValue":he=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&Tt(n,l,j,f,c,g)}Tf(n,ce,he);return;case"option":for(var ze in r)if(ce=r[ze],r.hasOwnProperty(ze)&&ce!=null&&!c.hasOwnProperty(ze))switch(ze){case"selected":n.selected=!1;break;default:Tt(n,l,ze,null,c,ce)}for(J in c)if(ce=c[J],he=r[J],c.hasOwnProperty(J)&&ce!==he&&(ce!=null||he!=null))switch(J){case"selected":n.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:Tt(n,l,J,ce,c,he)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in r)ce=r[Ze],r.hasOwnProperty(Ze)&&ce!=null&&!c.hasOwnProperty(Ze)&&Tt(n,l,Ze,null,c,ce);for(re in c)if(ce=c[re],he=r[re],c.hasOwnProperty(re)&&ce!==he&&(ce!=null||he!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(i(137,l));break;default:Tt(n,l,re,ce,c,he)}return;default:if(Ud(l)){for(var kt in r)ce=r[kt],r.hasOwnProperty(kt)&&ce!==void 0&&!c.hasOwnProperty(kt)&&Ah(n,l,kt,void 0,c,ce);for(ge in c)ce=c[ge],he=r[ge],!c.hasOwnProperty(ge)||ce===he||ce===void 0&&he===void 0||Ah(n,l,ge,ce,c,he);return}}for(var le in r)ce=r[le],r.hasOwnProperty(le)&&ce!=null&&!c.hasOwnProperty(le)&&Tt(n,l,le,null,c,ce);for(ve in c)ce=c[ve],he=r[ve],!c.hasOwnProperty(ve)||ce===he||ce==null&&he==null||Tt(n,l,ve,ce,c,he)}function Mx(n){switch(n){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bw(){if(typeof performance.getEntriesByType=="function"){for(var n=0,l=0,r=performance.getEntriesByType("resource"),c=0;c<r.length;c++){var f=r[c],g=f.transferSize,j=f.initiatorType,I=f.duration;if(g&&I&&Mx(j)){for(j=0,I=f.responseEnd,c+=1;c<r.length;c++){var J=r[c],re=J.startTime;if(re>I)break;var ge=J.transferSize,ve=J.initiatorType;ge&&Mx(ve)&&(J=J.responseEnd,j+=ge*(J<I?1:(I-re)/(J-re)))}if(--c,l+=8*(g+j)/(f.duration/1e3),n++,10<n)break}}if(0<n)return l/n/1e6}return navigator.connection&&(n=navigator.connection.downlink,typeof n=="number")?n:5}var Eh=null,Th=null;function ac(n){return n.nodeType===9?n:n.ownerDocument}function $x(n){switch(n){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Rx(n,l){if(n===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return n===1&&l==="foreignObject"?0:n}function kh(n,l){return n==="textarea"||n==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var _h=null;function yw(){var n=window.event;return n&&n.type==="popstate"?n===_h?!1:(_h=n,!0):(_h=null,!1)}var Lx=typeof setTimeout=="function"?setTimeout:void 0,vw=typeof clearTimeout=="function"?clearTimeout:void 0,Ix=typeof Promise=="function"?Promise:void 0,jw=typeof queueMicrotask=="function"?queueMicrotask:typeof Ix<"u"?function(n){return Ix.resolve(null).then(n).catch(Nw)}:Lx;function Nw(n){setTimeout(function(){throw n})}function Aa(n){return n==="head"}function Ox(n,l){var r=l,c=0;do{var f=r.nextSibling;if(n.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(c===0){n.removeChild(f),hi(l);return}c--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")c++;else if(r==="html")yr(n.ownerDocument.documentElement);else if(r==="head"){r=n.ownerDocument.head,yr(r);for(var g=r.firstChild;g;){var j=g.nextSibling,I=g.nodeName;g[Oe]||I==="SCRIPT"||I==="STYLE"||I==="LINK"&&g.rel.toLowerCase()==="stylesheet"||r.removeChild(g),g=j}}else r==="body"&&yr(n.ownerDocument.body);r=f}while(r);hi(l)}function Bx(n,l){var r=n;n=0;do{var c=r.nextSibling;if(r.nodeType===1?l?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(l?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(n===0)break;n--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||n++;r=c}while(r)}function Dh(n){var l=n.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var r=l;switch(l=l.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Dh(r),Ie(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}n.removeChild(r)}}function ww(n,l,r,c){for(;n.nodeType===1;){var f=r;if(n.nodeName.toLowerCase()!==l.toLowerCase()){if(!c&&(n.nodeName!=="INPUT"||n.type!=="hidden"))break}else if(c){if(!n[Oe])switch(l){case"meta":if(!n.hasAttribute("itemprop"))break;return n;case"link":if(g=n.getAttribute("rel"),g==="stylesheet"&&n.hasAttribute("data-precedence"))break;if(g!==f.rel||n.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||n.getAttribute("title")!==(f.title==null?null:f.title))break;return n;case"style":if(n.hasAttribute("data-precedence"))break;return n;case"script":if(g=n.getAttribute("src"),(g!==(f.src==null?null:f.src)||n.getAttribute("type")!==(f.type==null?null:f.type)||n.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&n.hasAttribute("async")&&!n.hasAttribute("itemprop"))break;return n;default:return n}}else if(l==="input"&&n.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&n.getAttribute("name")===g)return n}else return n;if(n=on(n.nextSibling),n===null)break}return null}function Sw(n,l,r){if(l==="")return null;for(;n.nodeType!==3;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!r||(n=on(n.nextSibling),n===null))return null;return n}function zx(n,l){for(;n.nodeType!==8;)if((n.nodeType!==1||n.nodeName!=="INPUT"||n.type!=="hidden")&&!l||(n=on(n.nextSibling),n===null))return null;return n}function Mh(n){return n.data==="$?"||n.data==="$~"}function $h(n){return n.data==="$!"||n.data==="$?"&&n.ownerDocument.readyState!=="loading"}function Cw(n,l){var r=n.ownerDocument;if(n.data==="$~")n._reactRetry=l;else if(n.data!=="$?"||r.readyState!=="loading")l();else{var c=function(){l(),r.removeEventListener("DOMContentLoaded",c)};r.addEventListener("DOMContentLoaded",c),n._reactRetry=c}}function on(n){for(;n!=null;n=n.nextSibling){var l=n.nodeType;if(l===1||l===3)break;if(l===8){if(l=n.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return n}var Rh=null;function Ux(n){n=n.nextSibling;for(var l=0;n;){if(n.nodeType===8){var r=n.data;if(r==="/$"||r==="/&"){if(l===0)return on(n.nextSibling);l--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||l++}n=n.nextSibling}return null}function Fx(n){n=n.previousSibling;for(var l=0;n;){if(n.nodeType===8){var r=n.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(l===0)return n;l--}else r!=="/$"&&r!=="/&"||l++}n=n.previousSibling}return null}function Hx(n,l,r){switch(l=ac(r),n){case"html":if(n=l.documentElement,!n)throw Error(i(452));return n;case"head":if(n=l.head,!n)throw Error(i(453));return n;case"body":if(n=l.body,!n)throw Error(i(454));return n;default:throw Error(i(451))}}function yr(n){for(var l=n.attributes;l.length;)n.removeAttributeNode(l[0]);Ie(n)}var cn=new Map,Px=new Set;function lc(n){return typeof n.getRootNode=="function"?n.getRootNode():n.nodeType===9?n:n.ownerDocument}var Jn=$.d;$.d={f:Aw,r:Ew,D:Tw,C:kw,L:_w,m:Dw,X:$w,S:Mw,M:Rw};function Aw(){var n=Jn.f(),l=Ko();return n||l}function Ew(n){var l=Be(n);l!==null&&l.tag===5&&l.type==="form"?ig(l):Jn.r(n)}var ci=typeof document>"u"?null:document;function Vx(n,l,r){var c=ci;if(c&&typeof l=="string"&&l){var f=en(l);f='link[rel="'+n+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),Px.has(f)||(Px.add(f),n={rel:n,crossOrigin:r,href:l},c.querySelector(f)===null&&(l=c.createElement("link"),ps(l,"link",n),Ke(l),c.head.appendChild(l)))}}function Tw(n){Jn.D(n),Vx("dns-prefetch",n,null)}function kw(n,l){Jn.C(n,l),Vx("preconnect",n,l)}function _w(n,l,r){Jn.L(n,l,r);var c=ci;if(c&&n&&l){var f='link[rel="preload"][as="'+en(l)+'"]';l==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+en(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+en(r.imageSizes)+'"]')):f+='[href="'+en(n)+'"]';var g=f;switch(l){case"style":g=di(n);break;case"script":g=ui(n)}cn.has(g)||(n=y({rel:"preload",href:l==="image"&&r&&r.imageSrcSet?void 0:n,as:l},r),cn.set(g,n),c.querySelector(f)!==null||l==="style"&&c.querySelector(vr(g))||l==="script"&&c.querySelector(jr(g))||(l=c.createElement("link"),ps(l,"link",n),Ke(l),c.head.appendChild(l)))}}function Dw(n,l){Jn.m(n,l);var r=ci;if(r&&n){var c=l&&typeof l.as=="string"?l.as:"script",f='link[rel="modulepreload"][as="'+en(c)+'"][href="'+en(n)+'"]',g=f;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=ui(n)}if(!cn.has(g)&&(n=y({rel:"modulepreload",href:n},l),cn.set(g,n),r.querySelector(f)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(jr(g)))return}c=r.createElement("link"),ps(c,"link",n),Ke(c),r.head.appendChild(c)}}}function Mw(n,l,r){Jn.S(n,l,r);var c=ci;if(c&&n){var f=Fe(c).hoistableStyles,g=di(n);l=l||"default";var j=f.get(g);if(!j){var I={loading:0,preload:null};if(j=c.querySelector(vr(g)))I.loading=5;else{n=y({rel:"stylesheet",href:n,"data-precedence":l},r),(r=cn.get(g))&&Lh(n,r);var J=j=c.createElement("link");Ke(J),ps(J,"link",n),J._p=new Promise(function(re,ge){J.onload=re,J.onerror=ge}),J.addEventListener("load",function(){I.loading|=1}),J.addEventListener("error",function(){I.loading|=2}),I.loading|=4,ic(j,l,c)}j={type:"stylesheet",instance:j,count:1,state:I},f.set(g,j)}}}function $w(n,l){Jn.X(n,l);var r=ci;if(r&&n){var c=Fe(r).hoistableScripts,f=ui(n),g=c.get(f);g||(g=r.querySelector(jr(f)),g||(n=y({src:n,async:!0},l),(l=cn.get(f))&&Ih(n,l),g=r.createElement("script"),Ke(g),ps(g,"link",n),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function Rw(n,l){Jn.M(n,l);var r=ci;if(r&&n){var c=Fe(r).hoistableScripts,f=ui(n),g=c.get(f);g||(g=r.querySelector(jr(f)),g||(n=y({src:n,async:!0,type:"module"},l),(l=cn.get(f))&&Ih(n,l),g=r.createElement("script"),Ke(g),ps(g,"link",n),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(f,g))}}function Yx(n,l,r,c){var f=(f=ee.current)?lc(f):null;if(!f)throw Error(i(446));switch(n){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(l=di(r.href),r=Fe(f).hoistableStyles,c=r.get(l),c||(c={type:"style",instance:null,count:0,state:null},r.set(l,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){n=di(r.href);var g=Fe(f).hoistableStyles,j=g.get(n);if(j||(f=f.ownerDocument||f,j={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(n,j),(g=f.querySelector(vr(n)))&&!g._p&&(j.instance=g,j.state.loading=5),cn.has(n)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},cn.set(n,r),g||Lw(f,n,r,j.state))),l&&c===null)throw Error(i(528,""));return j}if(l&&c!==null)throw Error(i(529,""));return null;case"script":return l=r.async,r=r.src,typeof r=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=ui(r),r=Fe(f).hoistableScripts,c=r.get(l),c||(c={type:"script",instance:null,count:0,state:null},r.set(l,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,n))}}function di(n){return'href="'+en(n)+'"'}function vr(n){return'link[rel="stylesheet"]['+n+"]"}function qx(n){return y({},n,{"data-precedence":n.precedence,precedence:null})}function Lw(n,l,r,c){n.querySelector('link[rel="preload"][as="style"]['+l+"]")?c.loading=1:(l=n.createElement("link"),c.preload=l,l.addEventListener("load",function(){return c.loading|=1}),l.addEventListener("error",function(){return c.loading|=2}),ps(l,"link",r),Ke(l),n.head.appendChild(l))}function ui(n){return'[src="'+en(n)+'"]'}function jr(n){return"script[async]"+n}function Gx(n,l,r){if(l.count++,l.instance===null)switch(l.type){case"style":var c=n.querySelector('style[data-href~="'+en(r.href)+'"]');if(c)return l.instance=c,Ke(c),c;var f=y({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return c=(n.ownerDocument||n).createElement("style"),Ke(c),ps(c,"style",f),ic(c,r.precedence,n),l.instance=c;case"stylesheet":f=di(r.href);var g=n.querySelector(vr(f));if(g)return l.state.loading|=4,l.instance=g,Ke(g),g;c=qx(r),(f=cn.get(f))&&Lh(c,f),g=(n.ownerDocument||n).createElement("link"),Ke(g);var j=g;return j._p=new Promise(function(I,J){j.onload=I,j.onerror=J}),ps(g,"link",c),l.state.loading|=4,ic(g,r.precedence,n),l.instance=g;case"script":return g=ui(r.src),(f=n.querySelector(jr(g)))?(l.instance=f,Ke(f),f):(c=r,(f=cn.get(g))&&(c=y({},r),Ih(c,f)),n=n.ownerDocument||n,f=n.createElement("script"),Ke(f),ps(f,"link",c),n.head.appendChild(f),l.instance=f);case"void":return null;default:throw Error(i(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(c=l.instance,l.state.loading|=4,ic(c,r.precedence,n));return l.instance}function ic(n,l,r){for(var c=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=c.length?c[c.length-1]:null,g=f,j=0;j<c.length;j++){var I=c[j];if(I.dataset.precedence===l)g=I;else if(g!==f)break}g?g.parentNode.insertBefore(n,g.nextSibling):(l=r.nodeType===9?r.head:r,l.insertBefore(n,l.firstChild))}function Lh(n,l){n.crossOrigin==null&&(n.crossOrigin=l.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=l.referrerPolicy),n.title==null&&(n.title=l.title)}function Ih(n,l){n.crossOrigin==null&&(n.crossOrigin=l.crossOrigin),n.referrerPolicy==null&&(n.referrerPolicy=l.referrerPolicy),n.integrity==null&&(n.integrity=l.integrity)}var rc=null;function Xx(n,l,r){if(rc===null){var c=new Map,f=rc=new Map;f.set(r,c)}else f=rc,c=f.get(r),c||(c=new Map,f.set(r,c));if(c.has(n))return c;for(c.set(n,null),r=r.getElementsByTagName(n),f=0;f<r.length;f++){var g=r[f];if(!(g[Oe]||g[Le]||n==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var j=g.getAttribute(l)||"";j=n+j;var I=c.get(j);I?I.push(g):c.set(j,[g])}}return c}function Wx(n,l,r){n=n.ownerDocument||n,n.head.insertBefore(r,l==="title"?n.querySelector("head > title"):null)}function Iw(n,l,r){if(r===1||l.itemProp!=null)return!1;switch(n){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return n=l.disabled,typeof l.precedence=="string"&&n==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function Kx(n){return!(n.type==="stylesheet"&&(n.state.loading&3)===0)}function Ow(n,l,r,c){if(r.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=di(c.href),g=l.querySelector(vr(f));if(g){l=g._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(n.count++,n=oc.bind(n),l.then(n,n)),r.state.loading|=4,r.instance=g,Ke(g);return}g=l.ownerDocument||l,c=qx(c),(f=cn.get(f))&&Lh(c,f),g=g.createElement("link"),Ke(g);var j=g;j._p=new Promise(function(I,J){j.onload=I,j.onerror=J}),ps(g,"link",c),r.instance=g}n.stylesheets===null&&(n.stylesheets=new Map),n.stylesheets.set(r,l),(l=r.state.preload)&&(r.state.loading&3)===0&&(n.count++,r=oc.bind(n),l.addEventListener("load",r),l.addEventListener("error",r))}}var Oh=0;function Bw(n,l){return n.stylesheets&&n.count===0&&dc(n,n.stylesheets),0<n.count||0<n.imgCount?function(r){var c=setTimeout(function(){if(n.stylesheets&&dc(n,n.stylesheets),n.unsuspend){var g=n.unsuspend;n.unsuspend=null,g()}},6e4+l);0<n.imgBytes&&Oh===0&&(Oh=62500*bw());var f=setTimeout(function(){if(n.waitingForImages=!1,n.count===0&&(n.stylesheets&&dc(n,n.stylesheets),n.unsuspend)){var g=n.unsuspend;n.unsuspend=null,g()}},(n.imgBytes>Oh?50:800)+l);return n.unsuspend=r,function(){n.unsuspend=null,clearTimeout(c),clearTimeout(f)}}:null}function oc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)dc(this,this.stylesheets);else if(this.unsuspend){var n=this.unsuspend;this.unsuspend=null,n()}}}var cc=null;function dc(n,l){n.stylesheets=null,n.unsuspend!==null&&(n.count++,cc=new Map,l.forEach(zw,n),cc=null,oc.call(n))}function zw(n,l){if(!(l.state.loading&4)){var r=cc.get(n);if(r)var c=r.get(null);else{r=new Map,cc.set(n,r);for(var f=n.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var j=f[g];(j.nodeName==="LINK"||j.getAttribute("media")!=="not all")&&(r.set(j.dataset.precedence,j),c=j)}c&&r.set(null,c)}f=l.instance,j=f.getAttribute("data-precedence"),g=r.get(j)||c,g===c&&r.set(null,f),r.set(j,f),this.count++,c=oc.bind(this),f.addEventListener("load",c),f.addEventListener("error",c),g?g.parentNode.insertBefore(f,g.nextSibling):(n=n.nodeType===9?n.head:n,n.insertBefore(f,n.firstChild)),l.state.loading|=4}}var Nr={$$typeof:F,Provider:null,Consumer:null,_currentValue:O,_currentValue2:O,_threadCount:0};function Uw(n,l,r,c,f,g,j,I,J){this.tag=1,this.containerInfo=n,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Bi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bi(0),this.hiddenUpdates=Bi(null),this.identifierPrefix=c,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=j,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=J,this.incompleteTransitions=new Map}function Qx(n,l,r,c,f,g,j,I,J,re,ge,ve){return n=new Uw(n,l,r,j,J,re,ge,ve,I),l=1,g===!0&&(l|=24),g=zs(3,null,null,l),n.current=g,g.stateNode=n,l=gu(),l.refCount++,n.pooledCache=l,l.refCount++,g.memoizedState={element:c,isDehydrated:r,cache:l},vu(g),n}function Zx(n){return n?(n=Hl,n):Hl}function Jx(n,l,r,c,f,g){f=Zx(f),c.context===null?c.context=f:c.pendingContext=f,c=pa(l),c.payload={element:r},g=g===void 0?null:g,g!==null&&(c.callback=g),r=ga(n,c,l),r!==null&&(Ds(r,n,l),er(r,n,l))}function eb(n,l){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var r=n.retryLane;n.retryLane=r!==0&&r<l?r:l}}function Bh(n,l){eb(n,l),(n=n.alternate)&&eb(n,l)}function tb(n){if(n.tag===13||n.tag===31){var l=nl(n,67108864);l!==null&&Ds(l,n,67108864),Bh(n,67108864)}}function sb(n){if(n.tag===13||n.tag===31){var l=Vs();l=Za(l);var r=nl(n,l);r!==null&&Ds(r,n,l),Bh(n,l)}}var uc=!0;function Fw(n,l,r,c){var f=L.T;L.T=null;var g=$.p;try{$.p=2,zh(n,l,r,c)}finally{$.p=g,L.T=f}}function Hw(n,l,r,c){var f=L.T;L.T=null;var g=$.p;try{$.p=8,zh(n,l,r,c)}finally{$.p=g,L.T=f}}function zh(n,l,r,c){if(uc){var f=Uh(c);if(f===null)Ch(n,l,c,hc,r),ab(n,c);else if(Vw(f,n,l,r,c))c.stopPropagation();else if(ab(n,c),l&4&&-1<Pw.indexOf(n)){for(;f!==null;){var g=Be(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var j=In(g.pendingLanes);if(j!==0){var I=g;for(I.pendingLanes|=2,I.entangledLanes|=2;j;){var J=1<<31-gs(j);I.entanglements[1]|=J,j&=~J}Cn(g),(Nt&6)===0&&(Xo=Xe()+500,gr(0))}}break;case 31:case 13:I=nl(g,2),I!==null&&Ds(I,g,2),Ko(),Bh(g,2)}if(g=Uh(c),g===null&&Ch(n,l,c,hc,r),g===f)break;f=g}f!==null&&c.stopPropagation()}else Ch(n,l,c,null,r)}}function Uh(n){return n=Hd(n),Fh(n)}var hc=null;function Fh(n){if(hc=null,n=Ee(n),n!==null){var l=d(n);if(l===null)n=null;else{var r=l.tag;if(r===13){if(n=u(l),n!==null)return n;n=null}else if(r===31){if(n=h(l),n!==null)return n;n=null}else if(r===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;n=null}else l!==n&&(n=null)}}return hc=n,null}function nb(n){switch(n){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ge()){case et:return 2;case pt:return 8;case Os:case Rn:return 32;case vs:return 268435456;default:return 32}default:return 32}}var Hh=!1,Ea=null,Ta=null,ka=null,wr=new Map,Sr=new Map,_a=[],Pw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function ab(n,l){switch(n){case"focusin":case"focusout":Ea=null;break;case"dragenter":case"dragleave":Ta=null;break;case"mouseover":case"mouseout":ka=null;break;case"pointerover":case"pointerout":wr.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sr.delete(l.pointerId)}}function Cr(n,l,r,c,f,g){return n===null||n.nativeEvent!==g?(n={blockedOn:l,domEventName:r,eventSystemFlags:c,nativeEvent:g,targetContainers:[f]},l!==null&&(l=Be(l),l!==null&&tb(l)),n):(n.eventSystemFlags|=c,l=n.targetContainers,f!==null&&l.indexOf(f)===-1&&l.push(f),n)}function Vw(n,l,r,c,f){switch(l){case"focusin":return Ea=Cr(Ea,n,l,r,c,f),!0;case"dragenter":return Ta=Cr(Ta,n,l,r,c,f),!0;case"mouseover":return ka=Cr(ka,n,l,r,c,f),!0;case"pointerover":var g=f.pointerId;return wr.set(g,Cr(wr.get(g)||null,n,l,r,c,f)),!0;case"gotpointercapture":return g=f.pointerId,Sr.set(g,Cr(Sr.get(g)||null,n,l,r,c,f)),!0}return!1}function lb(n){var l=Ee(n.target);if(l!==null){var r=d(l);if(r!==null){if(l=r.tag,l===13){if(l=u(r),l!==null){n.blockedOn=l,Me(n.priority,function(){sb(r)});return}}else if(l===31){if(l=h(r),l!==null){n.blockedOn=l,Me(n.priority,function(){sb(r)});return}}else if(l===3&&r.stateNode.current.memoizedState.isDehydrated){n.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}n.blockedOn=null}function mc(n){if(n.blockedOn!==null)return!1;for(var l=n.targetContainers;0<l.length;){var r=Uh(n.nativeEvent);if(r===null){r=n.nativeEvent;var c=new r.constructor(r.type,r);Fd=c,r.target.dispatchEvent(c),Fd=null}else return l=Be(r),l!==null&&tb(l),n.blockedOn=r,!1;l.shift()}return!0}function ib(n,l,r){mc(n)&&r.delete(l)}function Yw(){Hh=!1,Ea!==null&&mc(Ea)&&(Ea=null),Ta!==null&&mc(Ta)&&(Ta=null),ka!==null&&mc(ka)&&(ka=null),wr.forEach(ib),Sr.forEach(ib)}function fc(n,l){n.blockedOn===l&&(n.blockedOn=null,Hh||(Hh=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Yw)))}var pc=null;function rb(n){pc!==n&&(pc=n,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){pc===n&&(pc=null);for(var l=0;l<n.length;l+=3){var r=n[l],c=n[l+1],f=n[l+2];if(typeof c!="function"){if(Fh(c||r)===null)continue;break}var g=Be(r);g!==null&&(n.splice(l,3),l-=3,Uu(g,{pending:!0,data:f,method:r.method,action:c},c,f))}}))}function hi(n){function l(J){return fc(J,n)}Ea!==null&&fc(Ea,n),Ta!==null&&fc(Ta,n),ka!==null&&fc(ka,n),wr.forEach(l),Sr.forEach(l);for(var r=0;r<_a.length;r++){var c=_a[r];c.blockedOn===n&&(c.blockedOn=null)}for(;0<_a.length&&(r=_a[0],r.blockedOn===null);)lb(r),r.blockedOn===null&&_a.shift();if(r=(n.ownerDocument||n).$$reactFormReplay,r!=null)for(c=0;c<r.length;c+=3){var f=r[c],g=r[c+1],j=f[X]||null;if(typeof g=="function")j||rb(r);else if(j){var I=null;if(g&&g.hasAttribute("formAction")){if(f=g,j=g[X]||null)I=j.formAction;else if(Fh(f)!==null)continue}else I=j.action;typeof I=="function"?r[c+1]=I:(r.splice(c,3),c-=3),rb(r)}}}function ob(){function n(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(j){return f=j})},focusReset:"manual",scroll:"manual"})}function l(){f!==null&&(f(),f=null),c||setTimeout(r,20)}function r(){if(!c&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var c=!1,f=null;return navigation.addEventListener("navigate",n),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(r,100),function(){c=!0,navigation.removeEventListener("navigate",n),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),f!==null&&(f(),f=null)}}}function Ph(n){this._internalRoot=n}gc.prototype.render=Ph.prototype.render=function(n){var l=this._internalRoot;if(l===null)throw Error(i(409));var r=l.current,c=Vs();Jx(r,c,n,l,null,null)},gc.prototype.unmount=Ph.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var l=n.containerInfo;Jx(n.current,2,null,n,null,null),Ko(),l[fe]=null}};function gc(n){this._internalRoot=n}gc.prototype.unstable_scheduleHydration=function(n){if(n){var l=je();n={blockedOn:null,target:n,priority:l};for(var r=0;r<_a.length&&l!==0&&l<_a[r].priority;r++);_a.splice(r,0,n),r===0&&lb(n)}};var cb=e.version;if(cb!=="19.2.0")throw Error(i(527,cb,"19.2.0"));$.findDOMNode=function(n){var l=n._reactInternals;if(l===void 0)throw typeof n.render=="function"?Error(i(188)):(n=Object.keys(n).join(","),Error(i(268,n)));return n=p(l),n=n!==null?b(n):null,n=n===null?null:n.stateNode,n};var qw={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xc.isDisabled&&xc.supportsFiber)try{oa=xc.inject(qw),us=xc}catch{}}return Er.createRoot=function(n,l){if(!o(n))throw Error(i(299));var r=!1,c="",f=gg,g=xg,j=bg;return l!=null&&(l.unstable_strictMode===!0&&(r=!0),l.identifierPrefix!==void 0&&(c=l.identifierPrefix),l.onUncaughtError!==void 0&&(f=l.onUncaughtError),l.onCaughtError!==void 0&&(g=l.onCaughtError),l.onRecoverableError!==void 0&&(j=l.onRecoverableError)),l=Qx(n,1,!1,null,null,r,c,null,f,g,j,ob),n[fe]=l.current,Sh(n),new Ph(l)},Er.hydrateRoot=function(n,l,r){if(!o(n))throw Error(i(299));var c=!1,f="",g=gg,j=xg,I=bg,J=null;return r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(j=r.onCaughtError),r.onRecoverableError!==void 0&&(I=r.onRecoverableError),r.formState!==void 0&&(J=r.formState)),l=Qx(n,1,!0,l,r??null,c,f,J,g,j,I,ob),l.context=Zx(null),r=l.current,c=Vs(),c=Za(c),f=pa(c),f.callback=null,ga(r,f,c),r=c,l.current.lanes=r,js(l,r),Cn(l),n[fe]=l.current,Sh(n),new gc(l)},Er.version="19.2.0",Er}var yb;function aS(){if(yb)return qh.exports;yb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),qh.exports=nS(),qh.exports}var lS=aS(),Qc=Bv();/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Yr(){return Yr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},Yr.apply(this,arguments)}var Ia;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Ia||(Ia={}));const vb="popstate";function iS(t){t===void 0&&(t={});function e(i,o){let{pathname:d,search:u,hash:h}=i.location;return wm("",{pathname:d,search:u,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function a(i,o){return typeof o=="string"?o:Zc(o)}return oS(e,a,null,t)}function Vt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function zv(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function rS(){return Math.random().toString(36).substr(2,8)}function jb(t,e){return{usr:t.state,key:t.key,idx:e}}function wm(t,e,a,i){return a===void 0&&(a=null),Yr({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ai(e):e,{state:a,key:e&&e.key||i||rS()})}function Zc(t){let{pathname:e="/",search:a="",hash:i=""}=t;return a&&a!=="?"&&(e+=a.charAt(0)==="?"?a:"?"+a),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ai(t){let e={};if(t){let a=t.indexOf("#");a>=0&&(e.hash=t.substr(a),t=t.substr(0,a));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function oS(t,e,a,i){i===void 0&&(i={});let{window:o=document.defaultView,v5Compat:d=!1}=i,u=o.history,h=Ia.Pop,m=null,p=b();p==null&&(p=0,u.replaceState(Yr({},u.state,{idx:p}),""));function b(){return(u.state||{idx:null}).idx}function y(){h=Ia.Pop;let A=b(),S=A==null?null:A-p;p=A,m&&m({action:h,location:C.location,delta:S})}function v(A,S){h=Ia.Push;let M=wm(C.location,A,S);p=b()+1;let F=jb(M,p),z=C.createHref(M);try{u.pushState(F,"",z)}catch(K){if(K instanceof DOMException&&K.name==="DataCloneError")throw K;o.location.assign(z)}d&&m&&m({action:h,location:C.location,delta:1})}function N(A,S){h=Ia.Replace;let M=wm(C.location,A,S);p=b();let F=jb(M,p),z=C.createHref(M);u.replaceState(F,"",z),d&&m&&m({action:h,location:C.location,delta:0})}function D(A){let S=o.location.origin!=="null"?o.location.origin:o.location.href,M=typeof A=="string"?A:Zc(A);return M=M.replace(/ $/,"%20"),Vt(S,"No window.location.(origin|href) available to create URL for href: "+M),new URL(M,S)}let C={get action(){return h},get location(){return t(o,u)},listen(A){if(m)throw new Error("A history only accepts one active listener");return o.addEventListener(vb,y),m=A,()=>{o.removeEventListener(vb,y),m=null}},createHref(A){return e(o,A)},createURL:D,encodeLocation(A){let S=D(A);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:N,go(A){return u.go(A)}};return C}var Nb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Nb||(Nb={}));function cS(t,e,a){return a===void 0&&(a="/"),dS(t,e,a)}function dS(t,e,a,i){let o=typeof e=="string"?Ai(e):e,d=Ni(o.pathname||"/",a);if(d==null)return null;let u=Uv(t);uS(u);let h=null;for(let m=0;h==null&&m<u.length;++m){let p=NS(d);h=vS(u[m],p)}return h}function Uv(t,e,a,i){e===void 0&&(e=[]),a===void 0&&(a=[]),i===void 0&&(i="");let o=(d,u,h)=>{let m={relativePath:h===void 0?d.path||"":h,caseSensitive:d.caseSensitive===!0,childrenIndex:u,route:d};m.relativePath.startsWith("/")&&(Vt(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let p=Va([i,m.relativePath]),b=a.concat(m);d.children&&d.children.length>0&&(Vt(d.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+p+'".')),Uv(d.children,e,b,p)),!(d.path==null&&!d.index)&&e.push({path:p,score:bS(p,d.index),routesMeta:b})};return t.forEach((d,u)=>{var h;if(d.path===""||!((h=d.path)!=null&&h.includes("?")))o(d,u);else for(let m of Fv(d.path))o(d,u,m)}),e}function Fv(t){let e=t.split("/");if(e.length===0)return[];let[a,...i]=e,o=a.endsWith("?"),d=a.replace(/\?$/,"");if(i.length===0)return o?[d,""]:[d];let u=Fv(i.join("/")),h=[];return h.push(...u.map(m=>m===""?d:[d,m].join("/"))),o&&h.push(...u),h.map(m=>t.startsWith("/")&&m===""?"/":m)}function uS(t){t.sort((e,a)=>e.score!==a.score?a.score-e.score:yS(e.routesMeta.map(i=>i.childrenIndex),a.routesMeta.map(i=>i.childrenIndex)))}const hS=/^:[\w-]+$/,mS=3,fS=2,pS=1,gS=10,xS=-2,wb=t=>t==="*";function bS(t,e){let a=t.split("/"),i=a.length;return a.some(wb)&&(i+=xS),e&&(i+=fS),a.filter(o=>!wb(o)).reduce((o,d)=>o+(hS.test(d)?mS:d===""?pS:gS),i)}function yS(t,e){return t.length===e.length&&t.slice(0,-1).every((i,o)=>i===e[o])?t[t.length-1]-e[e.length-1]:0}function vS(t,e,a){let{routesMeta:i}=t,o={},d="/",u=[];for(let h=0;h<i.length;++h){let m=i[h],p=h===i.length-1,b=d==="/"?e:e.slice(d.length)||"/",y=Sm({path:m.relativePath,caseSensitive:m.caseSensitive,end:p},b),v=m.route;if(!y)return null;Object.assign(o,y.params),u.push({params:o,pathname:Va([d,y.pathname]),pathnameBase:AS(Va([d,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(d=Va([d,y.pathnameBase]))}return u}function Sm(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[a,i]=jS(t.path,t.caseSensitive,t.end),o=e.match(a);if(!o)return null;let d=o[0],u=d.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:i.reduce((p,b,y)=>{let{paramName:v,isOptional:N}=b;if(v==="*"){let C=h[y]||"";u=d.slice(0,d.length-C.length).replace(/(.)\/+$/,"$1")}const D=h[y];return N&&!D?p[v]=void 0:p[v]=(D||"").replace(/%2F/g,"/"),p},{}),pathname:d,pathnameBase:u,pattern:t}}function jS(t,e,a){e===void 0&&(e=!1),a===void 0&&(a=!0),zv(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],o="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,h,m)=>(i.push({paramName:h,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),o+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?o+="\\/*$":t!==""&&t!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),i]}function NS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return zv(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ni(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let a=e.endsWith("/")?e.length-1:e.length,i=t.charAt(a);return i&&i!=="/"?null:t.slice(a)||"/"}function wS(t,e){e===void 0&&(e="/");let{pathname:a,search:i="",hash:o=""}=typeof t=="string"?Ai(t):t;return{pathname:a?a.startsWith("/")?a:SS(a,e):e,search:ES(i),hash:TS(o)}}function SS(t,e){let a=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(o=>{o===".."?a.length>1&&a.pop():o!=="."&&a.push(o)}),a.length>1?a.join("/"):"/"}function Kh(t,e,a,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+a+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function CS(t){return t.filter((e,a)=>a===0||e.route.path&&e.route.path.length>0)}function Bm(t,e){let a=CS(t);return e?a.map((i,o)=>o===a.length-1?i.pathname:i.pathnameBase):a.map(i=>i.pathnameBase)}function zm(t,e,a,i){i===void 0&&(i=!1);let o;typeof t=="string"?o=Ai(t):(o=Yr({},t),Vt(!o.pathname||!o.pathname.includes("?"),Kh("?","pathname","search",o)),Vt(!o.pathname||!o.pathname.includes("#"),Kh("#","pathname","hash",o)),Vt(!o.search||!o.search.includes("#"),Kh("#","search","hash",o)));let d=t===""||o.pathname==="",u=d?"/":o.pathname,h;if(u==null)h=a;else{let y=e.length-1;if(!i&&u.startsWith("..")){let v=u.split("/");for(;v[0]==="..";)v.shift(),y-=1;o.pathname=v.join("/")}h=y>=0?e[y]:"/"}let m=wS(o,h),p=u&&u!=="/"&&u.endsWith("/"),b=(d||u===".")&&a.endsWith("/");return!m.pathname.endsWith("/")&&(p||b)&&(m.pathname+="/"),m}const Va=t=>t.join("/").replace(/\/\/+/g,"/"),AS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),ES=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Hv=["post","put","patch","delete"];new Set(Hv);const _S=["get",...Hv];new Set(_S);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qr(){return qr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},qr.apply(this,arguments)}const Sd=x.createContext(null),Pv=x.createContext(null),ra=x.createContext(null),Cd=x.createContext(null),$n=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Vv=x.createContext(null);function DS(t,e){let{relative:a}=e===void 0?{}:e;Ei()||Vt(!1);let{basename:i,navigator:o}=x.useContext(ra),{hash:d,pathname:u,search:h}=Ad(t,{relative:a}),m=u;return i!=="/"&&(m=u==="/"?i:Va([i,u])),o.createHref({pathname:m,search:h,hash:d})}function Ei(){return x.useContext(Cd)!=null}function Ti(){return Ei()||Vt(!1),x.useContext(Cd).location}function Yv(t){x.useContext(ra).static||x.useLayoutEffect(t)}function is(){let{isDataRoute:t}=x.useContext($n);return t?qS():MS()}function MS(){Ei()||Vt(!1);let t=x.useContext(Sd),{basename:e,future:a,navigator:i}=x.useContext(ra),{matches:o}=x.useContext($n),{pathname:d}=Ti(),u=JSON.stringify(Bm(o,a.v7_relativeSplatPath)),h=x.useRef(!1);return Yv(()=>{h.current=!0}),x.useCallback(function(p,b){if(b===void 0&&(b={}),!h.current)return;if(typeof p=="number"){i.go(p);return}let y=zm(p,JSON.parse(u),d,b.relative==="path");t==null&&e!=="/"&&(y.pathname=y.pathname==="/"?e:Va([e,y.pathname])),(b.replace?i.replace:i.push)(y,b.state,b)},[e,i,u,d,t])}const $S=x.createContext(null);function RS(t){let e=x.useContext($n).outlet;return e&&x.createElement($S.Provider,{value:t},e)}function ht(){let{matches:t}=x.useContext($n),e=t[t.length-1];return e?e.params:{}}function Ad(t,e){let{relative:a}=e===void 0?{}:e,{future:i}=x.useContext(ra),{matches:o}=x.useContext($n),{pathname:d}=Ti(),u=JSON.stringify(Bm(o,i.v7_relativeSplatPath));return x.useMemo(()=>zm(t,JSON.parse(u),d,a==="path"),[t,u,d,a])}function LS(t,e){return IS(t,e)}function IS(t,e,a,i){Ei()||Vt(!1);let{navigator:o}=x.useContext(ra),{matches:d}=x.useContext($n),u=d[d.length-1],h=u?u.params:{};u&&u.pathname;let m=u?u.pathnameBase:"/";u&&u.route;let p=Ti(),b;if(e){var y;let A=typeof e=="string"?Ai(e):e;m==="/"||(y=A.pathname)!=null&&y.startsWith(m)||Vt(!1),b=A}else b=p;let v=b.pathname||"/",N=v;if(m!=="/"){let A=m.replace(/^\//,"").split("/");N="/"+v.replace(/^\//,"").split("/").slice(A.length).join("/")}let D=cS(t,{pathname:N}),C=FS(D&&D.map(A=>Object.assign({},A,{params:Object.assign({},h,A.params),pathname:Va([m,o.encodeLocation?o.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?m:Va([m,o.encodeLocation?o.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),d,a,i);return e&&C?x.createElement(Cd.Provider,{value:{location:qr({pathname:"/",search:"",hash:"",state:null,key:"default"},b),navigationType:Ia.Pop}},C):C}function OS(){let t=YS(),e=kS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),a=t instanceof Error?t.stack:null,o={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),a?x.createElement("pre",{style:o},a):null,null)}const BS=x.createElement(OS,null);class zS extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,a){return a.location!==e.location||a.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:a.error,location:a.location,revalidation:e.revalidation||a.revalidation}}componentDidCatch(e,a){console.error("React Router caught the following error during render",e,a)}render(){return this.state.error!==void 0?x.createElement($n.Provider,{value:this.props.routeContext},x.createElement(Vv.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function US(t){let{routeContext:e,match:a,children:i}=t,o=x.useContext(Sd);return o&&o.static&&o.staticContext&&(a.route.errorElement||a.route.ErrorBoundary)&&(o.staticContext._deepestRenderedBoundaryId=a.route.id),x.createElement($n.Provider,{value:e},i)}function FS(t,e,a,i){var o;if(e===void 0&&(e=[]),a===void 0&&(a=null),i===void 0&&(i=null),t==null){var d;if(!a)return null;if(a.errors)t=a.matches;else if((d=i)!=null&&d.v7_partialHydration&&e.length===0&&!a.initialized&&a.matches.length>0)t=a.matches;else return null}let u=t,h=(o=a)==null?void 0:o.errors;if(h!=null){let b=u.findIndex(y=>y.route.id&&h?.[y.route.id]!==void 0);b>=0||Vt(!1),u=u.slice(0,Math.min(u.length,b+1))}let m=!1,p=-1;if(a&&i&&i.v7_partialHydration)for(let b=0;b<u.length;b++){let y=u[b];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(p=b),y.route.id){let{loaderData:v,errors:N}=a,D=y.route.loader&&v[y.route.id]===void 0&&(!N||N[y.route.id]===void 0);if(y.route.lazy||D){m=!0,p>=0?u=u.slice(0,p+1):u=[u[0]];break}}}return u.reduceRight((b,y,v)=>{let N,D=!1,C=null,A=null;a&&(N=h&&y.route.id?h[y.route.id]:void 0,C=y.route.errorElement||BS,m&&(p<0&&v===0?(GS("route-fallback"),D=!0,A=null):p===v&&(D=!0,A=y.route.hydrateFallbackElement||null)));let S=e.concat(u.slice(0,v+1)),M=()=>{let F;return N?F=C:D?F=A:y.route.Component?F=x.createElement(y.route.Component,null):y.route.element?F=y.route.element:F=b,x.createElement(US,{match:y,routeContext:{outlet:b,matches:S,isDataRoute:a!=null},children:F})};return a&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?x.createElement(zS,{location:a.location,revalidation:a.revalidation,component:C,error:N,children:M(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):M()},null)}var qv=(function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t})(qv||{}),Gv=(function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t})(Gv||{});function HS(t){let e=x.useContext(Sd);return e||Vt(!1),e}function PS(t){let e=x.useContext(Pv);return e||Vt(!1),e}function VS(t){let e=x.useContext($n);return e||Vt(!1),e}function Xv(t){let e=VS(),a=e.matches[e.matches.length-1];return a.route.id||Vt(!1),a.route.id}function YS(){var t;let e=x.useContext(Vv),a=PS(),i=Xv();return e!==void 0?e:(t=a.errors)==null?void 0:t[i]}function qS(){let{router:t}=HS(qv.UseNavigateStable),e=Xv(Gv.UseNavigateStable),a=x.useRef(!1);return Yv(()=>{a.current=!0}),x.useCallback(function(o,d){d===void 0&&(d={}),a.current&&(typeof o=="number"?t.navigate(o):t.navigate(o,qr({fromRouteId:e},d)))},[t,e])}const Sb={};function GS(t,e,a){Sb[t]||(Sb[t]=!0)}function XS(t,e){t?.v7_startTransition,t?.v7_relativeSplatPath}function Cb(t){let{to:e,replace:a,state:i,relative:o}=t;Ei()||Vt(!1);let{future:d,static:u}=x.useContext(ra),{matches:h}=x.useContext($n),{pathname:m}=Ti(),p=is(),b=zm(e,Bm(h,d.v7_relativeSplatPath),m,o==="path"),y=JSON.stringify(b);return x.useEffect(()=>p(JSON.parse(y),{replace:a,state:i,relative:o}),[p,y,o,a,i]),null}function Wv(t){return RS(t.context)}function it(t){Vt(!1)}function WS(t){let{basename:e="/",children:a=null,location:i,navigationType:o=Ia.Pop,navigator:d,static:u=!1,future:h}=t;Ei()&&Vt(!1);let m=e.replace(/^\/*/,"/"),p=x.useMemo(()=>({basename:m,navigator:d,static:u,future:qr({v7_relativeSplatPath:!1},h)}),[m,h,d,u]);typeof i=="string"&&(i=Ai(i));let{pathname:b="/",search:y="",hash:v="",state:N=null,key:D="default"}=i,C=x.useMemo(()=>{let A=Ni(b,m);return A==null?null:{location:{pathname:A,search:y,hash:v,state:N,key:D},navigationType:o}},[m,b,y,v,N,D,o]);return C==null?null:x.createElement(ra.Provider,{value:p},x.createElement(Cd.Provider,{children:a,value:C}))}function KS(t){let{children:e,location:a}=t;return LS(Cm(e),a)}new Promise(()=>{});function Cm(t,e){e===void 0&&(e=[]);let a=[];return x.Children.forEach(t,(i,o)=>{if(!x.isValidElement(i))return;let d=[...e,o];if(i.type===x.Fragment){a.push.apply(a,Cm(i.props.children,d));return}i.type!==it&&Vt(!1),!i.props.index||!i.props.children||Vt(!1);let u={id:i.props.id||d.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(u.children=Cm(i.props.children,d)),a.push(u)}),a}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jc(){return Jc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},Jc.apply(this,arguments)}function Kv(t,e){if(t==null)return{};var a={},i=Object.keys(t),o,d;for(d=0;d<i.length;d++)o=i[d],!(e.indexOf(o)>=0)&&(a[o]=t[o]);return a}function QS(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ZS(t,e){return t.button===0&&(!e||e==="_self")&&!QS(t)}const JS=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],e2=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],t2="6";try{window.__reactRouterVersion=t2}catch{}const s2=x.createContext({isTransitioning:!1}),n2="startTransition",Ab=Jw[n2];function a2(t){let{basename:e,children:a,future:i,window:o}=t,d=x.useRef();d.current==null&&(d.current=iS({window:o,v5Compat:!0}));let u=d.current,[h,m]=x.useState({action:u.action,location:u.location}),{v7_startTransition:p}=i||{},b=x.useCallback(y=>{p&&Ab?Ab(()=>m(y)):m(y)},[m,p]);return x.useLayoutEffect(()=>u.listen(b),[u,b]),x.useEffect(()=>XS(i),[i]),x.createElement(WS,{basename:e,children:a,location:h.location,navigationType:h.action,navigator:u,future:i})}const l2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",i2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,st=x.forwardRef(function(e,a){let{onClick:i,relative:o,reloadDocument:d,replace:u,state:h,target:m,to:p,preventScrollReset:b,viewTransition:y}=e,v=Kv(e,JS),{basename:N}=x.useContext(ra),D,C=!1;if(typeof p=="string"&&i2.test(p)&&(D=p,l2))try{let F=new URL(window.location.href),z=p.startsWith("//")?new URL(F.protocol+p):new URL(p),K=Ni(z.pathname,N);z.origin===F.origin&&K!=null?p=K+z.search+z.hash:C=!0}catch{}let A=DS(p,{relative:o}),S=o2(p,{replace:u,state:h,target:m,preventScrollReset:b,relative:o,viewTransition:y});function M(F){i&&i(F),F.defaultPrevented||S(F)}return x.createElement("a",Jc({},v,{href:D||A,onClick:C||d?i:M,ref:a,target:m}))}),Qv=x.forwardRef(function(e,a){let{"aria-current":i="page",caseSensitive:o=!1,className:d="",end:u=!1,style:h,to:m,viewTransition:p,children:b}=e,y=Kv(e,e2),v=Ad(m,{relative:y.relative}),N=Ti(),D=x.useContext(Pv),{navigator:C,basename:A}=x.useContext(ra),S=D!=null&&c2(v)&&p===!0,M=C.encodeLocation?C.encodeLocation(v).pathname:v.pathname,F=N.pathname,z=D&&D.navigation&&D.navigation.location?D.navigation.location.pathname:null;o||(F=F.toLowerCase(),z=z?z.toLowerCase():null,M=M.toLowerCase()),z&&A&&(z=Ni(z,A)||z);const K=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let R=F===M||!u&&F.startsWith(M)&&F.charAt(K)==="/",w=z!=null&&(z===M||!u&&z.startsWith(M)&&z.charAt(M.length)==="/"),_={isActive:R,isPending:w,isTransitioning:S},B=R?i:void 0,T;typeof d=="function"?T=d(_):T=[d,R?"active":null,w?"pending":null,S?"transitioning":null].filter(Boolean).join(" ");let U=typeof h=="function"?h(_):h;return x.createElement(st,Jc({},y,{"aria-current":B,className:T,ref:a,style:U,to:m,viewTransition:p}),typeof b=="function"?b(_):b)});var Am;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Am||(Am={}));var Eb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Eb||(Eb={}));function r2(t){let e=x.useContext(Sd);return e||Vt(!1),e}function o2(t,e){let{target:a,replace:i,state:o,preventScrollReset:d,relative:u,viewTransition:h}=e===void 0?{}:e,m=is(),p=Ti(),b=Ad(t,{relative:u});return x.useCallback(y=>{if(ZS(y,a)){y.preventDefault();let v=i!==void 0?i:Zc(p)===Zc(b);m(t,{replace:v,state:o,preventScrollReset:d,relative:u,viewTransition:h})}},[p,m,b,i,o,a,t,d,u,h])}function c2(t,e){e===void 0&&(e={});let a=x.useContext(s2);a==null&&Vt(!1);let{basename:i}=r2(Am.useViewTransitionState),o=Ad(t,{relative:e.relative});if(!a.isTransitioning)return!1;let d=Ni(a.currentLocation.pathname,i)||a.currentLocation.pathname,u=Ni(a.nextLocation.pathname,i)||a.nextLocation.pathname;return Sm(o.pathname,u)!=null||Sm(o.pathname,d)!=null}const Zv=x.createContext(null);function d2({children:t}){const[e,a]=x.useState(null),[i,o]=x.useState(null),d=x.useMemo(()=>{const u=()=>e&&(e.userId||e.id||e.username||e.userName)||null;return{user:e,role:i,setUser:a,setRole:o,getUserId:u,isCurrentUser:m=>{if(!m)return!1;const p=u();return p!=null&&String(p)===String(m)}}},[e,i]);return s.jsx(Zv.Provider,{value:d,children:t})}function Jv(){const t=x.useContext(Zv);if(!t)throw new Error("useUser must be used within <UserProvider>");return t}function u2({role:t="student"}){const e=x.useRef(null),a=x.useRef(null),i=x.useRef(null),[o,d]=x.useState(null),[u,h]=x.useState(null),m=Jv(),p=t==="professor"?"/classroom/api/v1/professor/me":"/classroom/api/v1/student/me";x.useMemo(()=>({lastName:"",firstName:"",engLname:" ",engFname:" ",mobileNo:"",email:"",professorNo:"",studentNo:"",univDeptName:"",gradeName:"",stuStatusName:"",prfStatusName:"",prfAppntName:"",prfPositName:""}),[]);const b=(v,N)=>{if(!v)return'<div class="text-muted"> </div>';const D=v.lastName||"",C=v.firstName||"",A=`${D}${C}`.trim();let S='<div class="container-fluid p-0">';const M=(F,z,K=!1)=>z?K?`
          <div class="d-flex mb-1">
            <div class="text-muted small me-2">${y(F)}</div>
            <div class="fw-semibold text-nowrap">${y(String(z))}</div>
          </div>
        `:`
        <div class="row g-0 mb-1">
          <div class="col-4 text-muted small">${y(F)}</div>
          <div class="col-8 fw-semibold">${y(String(z))}</div>
        </div>
      `:"";return A&&(S+=M("",A)),v.studentNo?S+=M("",v.studentNo):v.professorNo&&(S+=M("",v.professorNo)),v.univDeptName&&(S+=M("",v.univDeptName)),v.gradeName&&N==="student"&&(S+=M("",v.gradeName)),v.stuStatusName?S+=M("",v.stuStatusName):v.prfStatusName&&(S+=M("",v.prfStatusName)),v.mobileNo&&(S+=M("",v.mobileNo)),v.email&&(S+=M("",v.email,!0)),S+="</div>",S};function y(v){return String(v).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}return x.useEffect(()=>{let v=!0;return(async()=>{try{const N=await fetch(p,{headers:{Accept:"application/json"},credentials:"include"});if(!N.ok)throw new Error(`HTTP ${N.status}`);const D=await N.json();if(!v)return;d(D);try{m.setUser(D),m.setRole(t)}catch{}}catch(N){if(!v)return;h(N)}})(),()=>{v=!1}},[p]),x.useEffect(()=>{if(a.current){if(u)a.current.textContent="  ";else if(o){const v=o.lastName||"",N=o.firstName||"",D=`${v}${N}`.trim(),C=o.univDeptName||"";if(t==="professor")a.current.innerHTML=`<i class="bi bi-person-circle me-1"></i> ${y(`${C} ${D}`.trim())} `;else{const A=o.gradeName||"";a.current.innerHTML=`<i class="bi bi-person-circle me-1"></i> ${y(`${C} ${A} ${D}`.trim())}`}}}},[o,u,t]),x.useEffect(()=>{const v=e.current;if(!v||!window.bootstrap)return;i.current&&i.current.dispose&&(i.current.dispose(),i.current=null);const N=new window.bootstrap.Popover(v,{trigger:"hover",placement:"bottom",html:!0,title:" ",content:()=>b(o,t)});return i.current=N,()=>{i.current&&i.current.dispose&&(i.current.dispose(),i.current=null)}},[o]),s.jsx("li",{ref:e,className:"nav-item",id:"user-info-container",style:{cursor:"pointer"},"data-user-role":t,children:s.jsxs("span",{className:"navbar-text",id:"user-info-text",ref:a,children:[s.jsx("i",{className:"bi bi-person-circle me-1"}),"  "]})})}async function h2(t){const a=`/classroom/api/v1/common/${encodeURIComponent(t)}`,i=await fetch(a,{headers:{Accept:"application/json"},credentials:"include"});if(!i.ok)throw new Error(`(${i.status})    .`);return i.json()}function m2(t){if(!t)return[];try{if(Array.isArray(t))return t;if(typeof t=="string")return JSON.parse(t)}catch{}return[]}const e0=x.createContext(null);function f2({children:t}){const[e,a]=x.useState(null),[i,o]=x.useState(null),d=x.useRef(new Map),u=x.useCallback(()=>e?.lectureId||e?.id||e?.lectureNo||null,[e]),h=x.useCallback(N=>{if(!N)return null;const[D,C]=String(N).split("_");return`${D} ${{REG1:"1",REG2:"2",SUB1:"",SUB2:""}[C]||C||""}`.trim()},[]),m=x.useCallback((N,D)=>{const C=D||u();return!C||!N?null:`/classroom/api/v1/common/photo/student/${encodeURIComponent(C)}/${encodeURIComponent(N)}`},[u]),p=x.useCallback(N=>d.current.get(String(N))||null,[]),b=x.useCallback((N,D)=>{!N||!D||d.current.set(String(N),String(D))},[]),y=x.useCallback(()=>{o(null);for(const N of d.current.values())try{URL.revokeObjectURL(N)}catch{}d.current.clear()},[]),v=x.useMemo(()=>({lecture:e,setLecture:a,getLectureId:u,formatYearTerm:h,students:i,setStudents:o,getStudentPhotoUrl:m,getStudentPhotoBlobUrl:p,cacheStudentPhotoBlobUrl:b,clearLectureScoped:y}),[e,i,u,h,m,p,b,y]);return s.jsx(e0.Provider,{value:v,children:t})}function ds(){const t=x.useContext(e0);if(!t)throw new Error("useLecture must be used within <LectureProvider>");return t}function p2({lectureId:t}){const e=x.useRef(null),a=x.useRef(null),[i,o]=x.useState(null),[d,u]=x.useState(null),[h,m]=x.useState(!1),{lecture:p,setLecture:b,formatYearTerm:y}=ds(),v=x.useMemo(()=>({MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""}),[]),N=S=>{if(!S||String(S).length<4)return"--:--";const M=String(S);return`${M.slice(0,2)}:${M.slice(2,4)}`},D=S=>String(S??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),C=S=>{if(!S)return null;const M=y(S.yeartermCd),F=m2(S.scheduleJson),z=S.currentCap!=null||S.maxCap!=null?`${S.currentCap??"-"} / ${S.maxCap??"-"}`:null;return{subjectName:S.subjectName,professorName:S.professorName,univDeptName:S.univDeptName,completionName:S.completionName,subjectTypeName:S.subjectTypeName,yearTerm:M,credit:S.credit,hour:S.hour,capacity:z,ended:!!S.ended,endAt:S.endAt,schedules:F}},A=S=>{if(h)return'<div class="d-flex align-items-center"><div class="spinner-border spinner-border-sm me-2" role="status"></div> </div>';if(d)return`<div class="text-danger small">${D(String(d.message||d))}</div>`;if(!S)return'<div class="text-muted small"> </div>';const M=[[" ",S.professorName],["",S.univDeptName]].filter(([,w])=>w!=null&&String(w).trim().length>0),F=[["",S.completionName],["",S.subjectTypeName],["/",S.credit!=null||S.hour!=null?`${S.credit??"-"} / ${S.hour??"-"}`:null],["",S.capacity],["",S.yearTerm]].filter(([,w])=>w!=null&&String(w).trim().length>0),z=S.schedules&&S.schedules.length?S.schedules.map((w,_)=>{const B=w.placeName||w.placeCd||" ";return(Array.isArray(w.slots)?w.slots:[]).map((T,U)=>`<div class="lecture-schedule-line d-flex justify-content-between">
               <span>${D(v[T.day]??T.day??"")} ${N(T.start)} ~ ${N(T.end)}</span>
               <span>${D(B)}</span>
             </div>`).join("")}).join(""):'<div class="text-muted small">  </div>',K=M.map(([w,_])=>`
        <div class="lecture-info-item">
          <strong class="lecture-info-label">${w===" "?'<i class="bi bi-person-fill"></i>':'<i class="bi bi-building"></i>'} ${D(w)}</strong>
          <span class="lecture-info-value">${D(String(_))}</span>
        </div>
      `).join(""),R=F.map(([w,_])=>`
      <div class="lecture-sub-info-item">
        <strong class="lecture-sub-info-label">${D(w)}</strong>
        <span class="lecture-sub-info-value">${D(String(_))}</span>
      </div>
    `).join("");return`
      <div class="lecture-info-popover-content">
        <div class="lecture-info-main">${K}</div>
        <hr class="my-2">
        <div class="lecture-info-sub">${R}</div>
        <hr class="my-2">
        <div class="lecture-schedule-section">
          <strong class="lecture-info-label"><i class="bi bi-clock-fill"></i> </strong>
          <div class="lecture-schedule-list mt-1">${z}</div>
        </div>
      </div>
    `};return x.useEffect(()=>{let S=!0;if(t)return(async()=>{try{m(!0),u(null);const M=await h2(t);if(!S)return;o(M),b(M)}catch(M){if(!S)return;u(M)}finally{S&&m(!1)}})(),()=>{S=!1}},[t,b]),x.useEffect(()=>{const S=e.current;if(!S||!window.bootstrap)return;a.current?.dispose&&(a.current.dispose(),a.current=null);const M=new window.bootstrap.Popover(S,{trigger:"hover",placement:"bottom",html:!0,title:" ",content:()=>A(C(i)),customClass:"lecture-info-popover"});return a.current=M,()=>{a.current?.dispose&&(a.current.dispose(),a.current=null)}},[i,h,d]),s.jsxs("button",{ref:e,type:"button",className:"btn btn-link nav-link text-white-50 p-0 ms-1","aria-label":"  ",children:[s.jsx("i",{className:"bi bi-info-circle","aria-hidden":"true"}),"  "]})}const bc=["","","","",""],Tb={:"MO",:"TU",:"WE",:"TH",:"FR"},Ra=[];for(let t=9;t<=18;t++)Ra.push(`${String(t).padStart(2,"0")}00`),Ra.push(`${String(t).padStart(2,"0")}30`);Ra.push("1900");const g2=[{value:"REG1",label:"1"},{value:"REG2",label:"2"},{value:"SUB1",label:""},{value:"SUB2",label:""}],kb=["#FFB3BA","#FFDFBA","#FFFFBA","#BAFFC9","#BAE1FF","#D4BAFF","#FFB3E6","#FFC9BA","#BAF0FF","#E6BAFF","#FFBABA","#FFE5BA","#F0FFBA","#BAFFDB","#BADEFF"];function x2(){const t=is(),[e,a]=x.useState(""),[i,o]=x.useState(""),[d,u]=x.useState([]),[h,m]=x.useState(!1),[p,b]=x.useState(!1),[y,v]=x.useState(!1),N=new Date().getFullYear(),D=[];for(let R=N-3;R<=N+1;R++)D.push(R);x.useEffect(()=>{p&&!y&&(C(),v(!0))},[p]),x.useEffect(()=>{e&&i&&C()},[e,i]);const C=async()=>{m(!0);try{let R="/classroom/api/v1/professor/schedule";e&&i&&(R+=`?yeartermCd=${e}_${i}`);const w=await fetch(R);if(!w.ok)throw new Error("Failed to fetch schedule");const _=await w.json();u(_||[])}catch(R){console.error("Failed to fetch schedule:",R),u([])}finally{m(!1)}},A=R=>{const _=!R.currentTarget.closest(".dropdown").classList.contains("show");b(_)},S=R=>{const w=R.substring(0,2),_=R.substring(2);return{dayCode:w,time:_}},M=R=>{const w={};return R.forEach(_=>{w[_.lectureId]||(w[_.lectureId]=[]),w[_.lectureId].push(_)}),Object.keys(w).forEach(_=>{w[_].sort((B,T)=>{const U=S(B.timeblockCd),V=S(T.timeblockCd);return U.dayCode!==V.dayCode?U.dayCode.localeCompare(V.dayCode):U.time.localeCompare(V.time)})}),w},F=R=>{const w=[];let _=null;return R.forEach(B=>{const{dayCode:T,time:U}=S(B.timeblockCd);if(!_||_.dayCode!==T)_&&w.push(_),_={lectureId:B.lectureId,subjectName:B.subjectName,placeName:B.placeName,dayCode:T,startTime:U,endTime:U,items:[B]};else{const V=_.endTime,q=z(V);U===q?(_.endTime=U,_.items.push(B)):(w.push(_),_={lectureId:B.lectureId,subjectName:B.subjectName,placeName:B.placeName,dayCode:T,startTime:U,endTime:U,items:[B]})}}),_&&w.push(_),w},z=R=>{const w=parseInt(R.substring(0,2));return parseInt(R.substring(2))===30?`${String(w+1).padStart(2,"0")}00`:`${String(w).padStart(2,"0")}30`},K=()=>{const R=M(d),w=[],_={};let B=0;Object.keys(R).sort((V,q)=>{const H=S(R[V][0].timeblockCd),E=S(R[q][0].timeblockCd);return H.dayCode!==E.dayCode?H.dayCode.localeCompare(E.dayCode):H.time.localeCompare(E.time)}).forEach(V=>{_[V]=kb[B%kb.length],B++;const q=F(R[V]);w.push(...q)});const U={};return bc.forEach(V=>{U[V]={},Ra.forEach(q=>{U[V][q]=null})}),w.forEach(V=>{const q=Object.keys(Tb).find($=>Tb[$]===V.dayCode);if(!q)return;const H=Ra.indexOf(V.startTime),E=z(V.endTime),L=Ra.indexOf(E);if(H!==-1&&L!==-1){const $=L-H;U[q][V.startTime]={...V,rowSpan:$,color:_[V.lectureId]};for(let O=H+1;O<L;O++)U[q][Ra[O]]="occupied"}}),s.jsxs("table",{className:"table table-bordered table-sm",style:{tableLayout:"fixed"},children:[s.jsxs("colgroup",{children:[s.jsx("col",{style:{width:"80px"}}),bc.map(V=>s.jsx("col",{style:{width:"100px"}},V))]}),s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"80px",minWidth:"80px",textAlign:"center"},children:""}),bc.map(V=>s.jsx("th",{style:{width:"100px",textAlign:"center"},children:V},V))]})}),s.jsx("tbody",{children:Ra.slice(0,-1).map((V,q)=>s.jsxs("tr",{style:{height:"30px"},children:[s.jsxs("td",{className:"text-center align-middle",style:{fontSize:"0.85rem"},children:[V.substring(0,2),":",V.substring(2),"~",z(V).substring(0,2),":",z(V).substring(2)]}),bc.map(H=>{const E=U[H][V];return E==="occupied"?null:E&&E.rowSpan?s.jsxs("td",{rowSpan:E.rowSpan,className:"p-2 text-center align-middle position-relative",style:{backgroundColor:E.color,cursor:"pointer",verticalAlign:"middle"},onClick:()=>t(`/classroom/professor/lecture/${E.lectureId}`),children:[s.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600"},children:E.subjectName}),s.jsx("div",{style:{fontSize:"0.75rem",marginTop:"4px"},children:E.placeName})]},H):s.jsx("td",{},H)})]},V))})]})};return s.jsxs("div",{className:"dropdown",children:[s.jsx("a",{className:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:A,children:""}),s.jsxs("div",{className:"dropdown-menu dropdown-menu-dark dropdown-menu-end p-3",style:{minWidth:"700px",maxWidth:"800px"},children:[s.jsxs("div",{className:"mb-3 d-flex gap-2",children:[s.jsxs("select",{className:"form-select form-select-sm",value:e,onChange:R=>a(R.target.value),style:{width:"auto"},children:[s.jsx("option",{value:"",children:""}),D.map(R=>s.jsxs("option",{value:R,children:[R,""]},R))]}),s.jsxs("select",{className:"form-select form-select-sm",value:i,onChange:R=>o(R.target.value),style:{width:"auto"},children:[s.jsx("option",{value:"",children:""}),g2.map(R=>s.jsx("option",{value:R.value,children:R.label},R.value))]})]}),h&&s.jsx("div",{className:"text-center py-3",children:s.jsx("div",{className:"spinner-border spinner-border-sm text-light",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),!h&&y&&s.jsx("div",{style:{maxHeight:"700px",overflowY:"auto",backgroundColor:"white",borderRadius:"4px",padding:"8px"},children:d.length>0?K():s.jsx("div",{className:"text-center py-3 text-muted",children:"   ."})})]})]})}const yc=["","","","",""],_b={:"MO",:"TU",:"WE",:"TH",:"FR"},La=[];for(let t=9;t<=18;t++)La.push(`${String(t).padStart(2,"0")}00`),La.push(`${String(t).padStart(2,"0")}30`);La.push("1900");const b2=[{value:"REG1",label:"1"},{value:"REG2",label:"2"},{value:"SUB1",label:""},{value:"SUB2",label:""}],Db=["#FFB3BA","#FFDFBA","#FFFFBA","#BAFFC9","#BAE1FF","#D4BAFF","#FFB3E6","#FFC9BA","#BAF0FF","#E6BAFF","#FFBABA","#FFE5BA","#F0FFBA","#BAFFDB","#BADEFF"];function y2(){const t=is(),[e,a]=x.useState(""),[i,o]=x.useState(""),[d,u]=x.useState([]),[h,m]=x.useState(!1),[p,b]=x.useState(!1),[y,v]=x.useState(!1),N=new Date().getFullYear(),D=[];for(let R=N-3;R<=N+1;R++)D.push(R);x.useEffect(()=>{p&&!y&&(C(),v(!0))},[p]),x.useEffect(()=>{e&&i&&C()},[e,i]);const C=async()=>{m(!0);try{let R="/classroom/api/v1/student/schedule";e&&i&&(R+=`?yeartermCd=${e}_${i}`);const w=await fetch(R);if(!w.ok)throw new Error("Failed to fetch schedule");const _=await w.json();u(_||[])}catch(R){console.error("Failed to fetch schedule:",R),u([])}finally{m(!1)}},A=R=>{const _=!R.currentTarget.closest(".dropdown").classList.contains("show");b(_)},S=R=>{const w=R.substring(0,2),_=R.substring(2);return{dayCode:w,time:_}},M=R=>{const w={};return R.forEach(_=>{w[_.lectureId]||(w[_.lectureId]=[]),w[_.lectureId].push(_)}),Object.keys(w).forEach(_=>{w[_].sort((B,T)=>{const U=S(B.timeblockCd),V=S(T.timeblockCd);return U.dayCode!==V.dayCode?U.dayCode.localeCompare(V.dayCode):U.time.localeCompare(V.time)})}),w},F=R=>{const w=[];let _=null;return R.forEach(B=>{const{dayCode:T,time:U}=S(B.timeblockCd);if(!_||_.dayCode!==T)_&&w.push(_),_={lectureId:B.lectureId,subjectName:B.subjectName,placeName:B.placeName,dayCode:T,startTime:U,endTime:U,items:[B]};else{const V=_.endTime,q=z(V);U===q?(_.endTime=U,_.items.push(B)):(w.push(_),_={lectureId:B.lectureId,subjectName:B.subjectName,placeName:B.placeName,dayCode:T,startTime:U,endTime:U,items:[B]})}}),_&&w.push(_),w},z=R=>{const w=parseInt(R.substring(0,2));return parseInt(R.substring(2))===30?`${String(w+1).padStart(2,"0")}00`:`${String(w).padStart(2,"0")}30`},K=()=>{const R=M(d),w=[],_={};let B=0;Object.keys(R).sort((V,q)=>{const H=S(R[V][0].timeblockCd),E=S(R[q][0].timeblockCd);return H.dayCode!==E.dayCode?H.dayCode.localeCompare(E.dayCode):H.time.localeCompare(E.time)}).forEach(V=>{_[V]=Db[B%Db.length],B++;const q=F(R[V]);w.push(...q)});const U={};return yc.forEach(V=>{U[V]={},La.forEach(q=>{U[V][q]=null})}),w.forEach(V=>{const q=Object.keys(_b).find($=>_b[$]===V.dayCode);if(!q)return;const H=La.indexOf(V.startTime),E=z(V.endTime),L=La.indexOf(E);if(H!==-1&&L!==-1){const $=L-H;U[q][V.startTime]={...V,rowSpan:$,color:_[V.lectureId]};for(let O=H+1;O<L;O++)U[q][La[O]]="occupied"}}),s.jsxs("table",{className:"table table-bordered table-sm",style:{tableLayout:"fixed"},children:[s.jsxs("colgroup",{children:[s.jsx("col",{style:{width:"80px"}}),yc.map(V=>s.jsx("col",{style:{width:"100px"}},V))]}),s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"80px",minWidth:"80px",textAlign:"center"},children:""}),yc.map(V=>s.jsx("th",{style:{width:"100px",textAlign:"center"},children:V},V))]})}),s.jsx("tbody",{children:La.slice(0,-1).map((V,q)=>s.jsxs("tr",{style:{height:"30px"},children:[s.jsxs("td",{className:"text-center align-middle",style:{fontSize:"0.85rem"},children:[V.substring(0,2),":",V.substring(2),"~",z(V).substring(0,2),":",z(V).substring(2)]}),yc.map(H=>{const E=U[H][V];return E==="occupied"?null:E&&E.rowSpan?s.jsxs("td",{rowSpan:E.rowSpan,className:"p-2 text-center align-middle position-relative",style:{backgroundColor:E.color,cursor:"pointer",verticalAlign:"middle"},onClick:()=>t(`/classroom/student/lecture/${E.lectureId}`),children:[s.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600"},children:E.subjectName}),s.jsx("div",{style:{fontSize:"0.75rem",marginTop:"4px"},children:E.placeName})]},H):s.jsx("td",{},H)})]},V))})]})};return s.jsxs("div",{className:"dropdown",children:[s.jsx("a",{className:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",onClick:A,children:""}),s.jsxs("div",{className:"dropdown-menu dropdown-menu-dark dropdown-menu-end p-3",style:{minWidth:"700px",maxWidth:"800px"},children:[s.jsxs("div",{className:"mb-3 d-flex gap-2",children:[s.jsxs("select",{className:"form-select form-select-sm",value:e,onChange:R=>a(R.target.value),style:{width:"auto"},children:[s.jsx("option",{value:"",children:""}),D.map(R=>s.jsxs("option",{value:R,children:[R,""]},R))]}),s.jsxs("select",{className:"form-select form-select-sm",value:i,onChange:R=>o(R.target.value),style:{width:"auto"},children:[s.jsx("option",{value:"",children:""}),b2.map(R=>s.jsx("option",{value:R.value,children:R.label},R.value))]})]}),h&&s.jsx("div",{className:"text-center py-3",children:s.jsx("div",{className:"spinner-border spinner-border-sm text-light",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})})}),!h&&y&&s.jsx("div",{style:{maxHeight:"700px",overflowY:"auto",backgroundColor:"white",borderRadius:"4px",padding:"8px"},children:d.length>0?K():s.jsx("div",{className:"text-center py-3 text-muted",children:"   ."})})]})]})}function v2({role:t="student",lectureId:e}){const{lecture:a}=ds();return s.jsx("nav",{className:"navbar navbar-dark app-header",children:s.jsxs("div",{className:"container-fluid d-flex align-items-center",children:[s.jsxs("div",{className:"d-flex align-items-center me-auto gap-2",children:[s.jsx(st,{className:"navbar-brand fw-bold m-0",to:`/classroom/${t}`,style:{fontSize:"1.25em"},children:"Classroom"}),e?s.jsxs("div",{className:"d-flex align-items-center gap-2",style:{position:"absolute",left:"260px"},children:[s.jsx("span",{className:"navbar-text text-white fw-semibold",style:{fontSize:"1.5em"},"data-lecture-subject-label":"true",children:a?.subjectName||" "}),s.jsx(p2,{lectureId:e})]}):null]}),s.jsxs("ul",{className:"navbar-nav flex-row ms-auto align-items-center gap-3",children:[s.jsx(u2,{role:t}),s.jsx("li",{className:"nav-item",children:t==="professor"?s.jsx(x2,{}):s.jsx(y2,{})}),s.jsxs("li",{className:"nav-item dropdown",children:[s.jsx("a",{className:"nav-link dropdown-toggle",href:"#",role:"button","data-bs-toggle":"dropdown","aria-expanded":"false",children:""}),s.jsxs("ul",{className:"dropdown-menu dropdown-menu-dark dropdown-menu-end",children:[s.jsx("li",{children:s.jsx("a",{className:"dropdown-item",href:"http://localhost/portal",target:"_blank",rel:"noopener noreferrer",children:" "})}),s.jsx("li",{children:s.jsx("hr",{className:"dropdown-divider"})}),t==="professor"?s.jsx("li",{children:s.jsx("a",{className:"dropdown-item",href:"http://localhost/professor",target:"_blank",rel:"noopener noreferrer",children:""})}):s.jsx("li",{children:s.jsx("a",{className:"dropdown-item",href:"http://localhost/student",target:"_blank",rel:"noopener noreferrer",children:""})})]})]}),s.jsx("li",{className:"nav-item",children:s.jsx("a",{className:"nav-link p-0 text-danger",href:"/logout",children:""})})]})]})})}var t0={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Mb=Gs.createContext&&Gs.createContext(t0),j2=["attr","size","title"];function N2(t,e){if(t==null)return{};var a=w2(t,e),i,o;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(t);for(o=0;o<d.length;o++)i=d[o],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(a[i]=t[i])}return a}function w2(t,e){if(t==null)return{};var a={};for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)){if(e.indexOf(i)>=0)continue;a[i]=t[i]}return a}function ed(){return ed=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var a=arguments[e];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}return t},ed.apply(this,arguments)}function $b(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,i)}return a}function td(t){for(var e=1;e<arguments.length;e++){var a=arguments[e]!=null?arguments[e]:{};e%2?$b(Object(a),!0).forEach(function(i){S2(t,i,a[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):$b(Object(a)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(a,i))})}return t}function S2(t,e,a){return e=C2(e),e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function C2(t){var e=A2(t,"string");return typeof e=="symbol"?e:e+""}function A2(t,e){if(typeof t!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var i=a.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function s0(t){return t&&t.map((e,a)=>Gs.createElement(e.tag,td({key:a},e.attr),s0(e.child)))}function Um(t){return e=>Gs.createElement(E2,ed({attr:td({},t.attr)},e),s0(t.child))}function E2(t){var e=a=>{var{attr:i,size:o,title:d}=t,u=N2(t,j2),h=o||a.size||"1em",m;return a.className&&(m=a.className),t.className&&(m=(m?m+" ":"")+t.className),Gs.createElement("svg",ed({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},a.attr,i,u,{className:m,style:td(td({color:t.color||a.color},a.style),t.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),d&&Gs.createElement("title",null,d),t.children)};return Mb!==void 0?Gs.createElement(Mb.Consumer,null,a=>e(a)):e(t0)}function T2(t){return Um({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 16a2 2 0 0 0 2-2H6a2 2 0 0 0 2 2m.995-14.901a1 1 0 1 0-1.99 0A5 5 0 0 0 3 6c0 1.098-.5 6-2 7h14c-1.5-1-2-5.902-2-7 0-2.42-1.72-4.44-4.005-4.901"},child:[]}]})(t)}function k2(t){return Um({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783"},child:[]}]})(t)}function _2(t){return Um({attr:{fill:"currentColor",viewBox:"0 0 16 16"},child:[{tag:"path",attr:{d:"M9.5 0a.5.5 0 0 1 .5.5.5.5 0 0 0 .5.5.5.5 0 0 1 .5.5V2a.5.5 0 0 1-.5.5h-5A.5.5 0 0 1 5 2v-.5a.5.5 0 0 1 .5-.5.5.5 0 0 0 .5-.5.5.5 0 0 1 .5-.5z"},child:[]},{tag:"path",attr:{d:"M3 2.5a.5.5 0 0 1 .5-.5H4a.5.5 0 0 0 0-1h-.5A1.5 1.5 0 0 0 2 2.5v12A1.5 1.5 0 0 0 3.5 16h9a1.5 1.5 0 0 0 1.5-1.5v-12A1.5 1.5 0 0 0 12.5 1H12a.5.5 0 0 0 0 1h.5a.5.5 0 0 1 .5.5v12a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5z"},child:[]},{tag:"path",attr:{d:"M10.854 7.854a.5.5 0 0 0-.708-.708L7.5 9.793 6.354 8.646a.5.5 0 1 0-.708.708l1.5 1.5a.5.5 0 0 0 .708 0z"},child:[]}]})(t)}const dn={loading:" ...",loadError:"    .",ongoingLectures:" ",ongoingEmpty:"   .",tasks:" ",tasksEmpty:"  .",reviews:" ",reviewsEmpty:"   ."},D2="/classroom/api/v1/student/mylist",M2="/classroom/api/v1/student/me/indivtask",$2="/classroom/api/v1/student/review",vc=t=>String(t).padStart(2,"0"),R2=t=>{if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?"":`${e.getFullYear()}-${vc(e.getMonth()+1)}-${vc(e.getDate())} ${vc(e.getHours())}:${vc(e.getMinutes())}`};function L2(){const[t,e]=x.useState(!1),[a,i]=x.useState([]),[o,d]=x.useState(!1),[u,h]=x.useState(""),[m,p]=x.useState(!1),[b,y]=x.useState([]),[v,N]=x.useState(!1),[D,C]=x.useState(""),[A,S]=x.useState(!1),[M,F]=x.useState([]),[z,K]=x.useState(!1),[R,w]=x.useState("");x.useEffect(()=>{let V=!1;async function q(){try{d(!0),h("");const H=await fetch(D2,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!H.ok)throw new Error(`HTTP ${H.status}`);const E=await H.json();V||i(Array.isArray(E)?E:[])}catch(H){console.error("[SidebarStudent] failed to load lectures",H),V||(i([]),h(dn.loadError))}finally{V||d(!1)}}return q(),()=>{V=!0}},[]),x.useEffect(()=>{let V=!1;async function q(){try{N(!0),C("");const H=await fetch(M2,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!H.ok)throw new Error(`HTTP ${H.status}`);const E=await H.json();V||y(Array.isArray(E)?E:[])}catch(H){console.error("[SidebarStudent] failed to load tasks",H),V||(y([]),C(dn.loadError))}finally{V||N(!1)}}return q(),()=>{V=!0}},[]),x.useEffect(()=>{let V=!1;async function q(){try{K(!0),w("");const H=await fetch($2,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!H.ok)throw new Error(`HTTP ${H.status}`);const E=await H.json();V||F(Array.isArray(E)?E:[])}catch(H){console.error("[SidebarStudent] failed to load reviews",H),V||(F([]),w(dn.loadError))}finally{V||K(!1)}}return q(),()=>{V=!0}},[]);const _=x.useMemo(()=>a.filter(V=>V&&V.ended===!1),[a]),B=x.useMemo(()=>M.length===0?[]:M.map(V=>a.find(q=>q.lectureId===V)).filter(Boolean),[M,a]),T=v?"...":b.length,U=z?"...":M.length;return s.jsxs("nav",{className:"list-group list-group-flush rounded-0",children:[s.jsx("button",{type:"button",className:`list-group-item list-group-item-action d-flex justify-content-between align-items-center fw-semibold ${t?"bg-primary-subtle text-primary-emphasis":"bg-body-tertiary"}`,onClick:()=>e(V=>!V),children:s.jsxs("span",{className:"d-flex align-items-center",children:[s.jsx(k2,{className:"me-2 fs-5"})," ",dn.ongoingLectures]})}),t&&s.jsxs("div",{className:"list-group list-group-flush bg-primary-subtle border-top border-primary-subtle",children:[o&&s.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:dn.loading}),!o&&u&&s.jsx("div",{className:"list-group-item small text-danger bg-transparent border-0",children:u}),!o&&!u&&_.length===0&&s.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:dn.ongoingEmpty}),!o&&!u&&_.map(V=>s.jsxs(st,{to:`/classroom/student/${encodeURIComponent(V.lectureId||"")}`,className:"list-group-item list-group-item-action ps-4 bg-transparent border-0",children:[s.jsx("div",{className:"fw-semibold text-truncate text-primary-emphasis",children:V.subjectName||"-"}),s.jsx("div",{className:"text-muted small text-truncate",children:V.completionName||""})]},V.lectureId))]}),s.jsx("button",{type:"button",className:`list-group-item list-group-item-action d-flex justify-content-between align-items-center fw-semibold ${m?"bg-primary-subtle text-primary-emphasis":"bg-body-tertiary"}`,onClick:()=>p(V=>!V),children:s.jsxs("span",{className:"d-flex align-items-center",children:[s.jsx(_2,{className:"me-2 fs-5"})," ",dn.tasks,s.jsx("span",{className:"ms-2 badge text-bg-secondary",children:T})]})}),m&&s.jsxs("div",{className:"list-group list-group-flush bg-primary-subtle border-top border-primary-subtle",children:[v&&s.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:dn.loading}),!v&&D&&s.jsx("div",{className:"list-group-item small text-danger bg-transparent border-0",children:D}),!v&&!D&&b.length===0&&s.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:dn.tasksEmpty}),!v&&!D&&b.map(V=>s.jsxs(st,{to:`/classroom/student/${encodeURIComponent(V.lectureId||"")}/task/indiv/${encodeURIComponent(V.indivtaskId||"")}`,className:"list-group-item list-group-item-action ps-4 bg-transparent border-0",children:[s.jsx("div",{className:"fw-semibold text-truncate text-primary-emphasis",children:V.indivtaskName||"-"}),s.jsx("div",{className:"text-muted small text-truncate",children:(V.subjectName||"")+(V.subjectName&&V.endAt?"  ":"")+(R2(V.endAt)||"")})]},V.indivtaskId))]}),M.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("button",{type:"button",className:`list-group-item list-group-item-action d-flex justify-content-between align-items-center fw-semibold ${A?"bg-primary-subtle text-primary-emphasis":"bg-body-tertiary"}`,onClick:()=>S(V=>!V),children:s.jsxs("span",{className:"d-flex align-items-center",children:[s.jsx(T2,{className:"me-2 fs-5"})," ",dn.reviews,s.jsx("span",{className:"ms-2 badge text-bg-secondary",children:U})]})}),A&&s.jsxs("div",{className:"list-group list-group-flush bg-primary-subtle border-top border-primary-subtle",children:[z&&s.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:dn.loading}),!z&&R&&s.jsx("div",{className:"list-group-item small text-danger bg-transparent border-0",children:R}),!z&&!R&&B.length===0&&s.jsx("div",{className:"list-group-item small text-muted bg-transparent border-0",children:dn.reviewsEmpty}),!z&&!R&&B.map(V=>s.jsxs(st,{to:`/classroom/student/${encodeURIComponent(V.lectureId||"")}/review`,className:"list-group-item list-group-item-action ps-4 bg-transparent border-0",children:[s.jsx("div",{className:"fw-semibold text-truncate text-primary-emphasis",children:V.subjectName||"-"}),s.jsx("div",{className:"text-muted small text-truncate",children:V.completionName||""})]},V.lectureId))]})]})]})}function I2(){const[t,e]=x.useState(!1),[a,i]=x.useState(!1),[o,d]=x.useState(null),[u,h]=x.useState([]),[m,p]=x.useState(!1),[b,y]=x.useState(!1),[v,N]=x.useState(null),[D,C]=x.useState([]),[A,S]=x.useState(!1),[M,F]=x.useState(!1),[z,K]=x.useState(null),[R,w]=x.useState([]);x.useEffect(()=>{let $=!0;return(async()=>{try{i(!0),d(null);const O=await fetch("/classroom/api/v1/professor/me/indivtask",{headers:{Accept:"application/json"},credentials:"include"});if(!O.ok)throw new Error(`(${O.status})    .`);const Q=await O.json();if(!$)return;h(Array.isArray(Q)?Q:[])}catch(O){if(!$)return;d(O)}finally{$&&i(!1)}})(),()=>{$=!1}},[]),x.useEffect(()=>{let $=!0;return(async()=>{try{y(!0),N(null);const O=await fetch("/classroom/api/v1/professor/me/grouptask",{headers:{Accept:"application/json"},credentials:"include"});if(!O.ok)throw new Error(`(${O.status})    .`);const Q=await O.json();if(!$)return;C(Array.isArray(Q)?Q:[])}catch(O){if(!$)return;N(O)}finally{$&&y(!1)}})(),()=>{$=!1}},[]),x.useEffect(()=>{let $=!0;return(async()=>{try{F(!0),K(null);const O=await fetch("/classroom/api/v1/professor/mylist",{headers:{Accept:"application/json"},credentials:"include"});if(!O.ok)throw new Error(`(${O.status})    .`);const Q=await O.json();if(!$)return;w(Array.isArray(Q)?Q:[])}catch(O){if(!$)return;K(O)}finally{$&&F(!1)}})(),()=>{$=!1}},[]);const _=x.useMemo(()=>u.map($=>{const O=$?.lecture||{},Q=$?.indivtask||{},Z=O.lectureId||"",k=O.subjectName||" ",W=Q.indivtaskId||"",P=Q.indivtaskName||" ",G=Number($?.submitCount??0);return{lectureId:Z,lectureLabel:k,taskId:W,taskLabel:P,submitCount:Number.isFinite(G)?G:0}}),[u]),B=x.useMemo(()=>D.map($=>{const O=$?.lecture||{},Q=$?.grouptask||{},Z=O.lectureId||"",k=O.subjectName||" ",W=Q.grouptaskId||"",P=Q.grouptaskName||" ",G=Number($?.submitCount??0);return{lectureId:Z,lectureLabel:k,taskId:W,taskLabel:P,submitCount:Number.isFinite(G)?G:0}}),[D]),T=x.useMemo(()=>R.filter($=>$.started&&!$.ended).map($=>({lectureId:$.lectureId||"",subjectName:$.subjectName||" ",completionName:$.completionName||""})),[R]),U=_.length,V=B.length,q=T.length,H=()=>e($=>!$),E=()=>p($=>!$),L=()=>S($=>!$);return s.jsxs("nav",{className:"list-group list-group-flush rounded-0",children:[s.jsxs("button",{type:"button",className:"list-group-item list-group-item-action d-flex align-items-center justify-content-between py-2 ps-3",onClick:L,"aria-expanded":A,"aria-controls":"sidebar-ongoing-lectures-panel",children:[s.jsx("span",{className:"fw-bold",style:{fontSize:"1.3em"},children:" "}),s.jsxs("span",{className:"d-flex align-items-center gap-2",children:[s.jsx("span",{className:"badge text-bg-secondary",children:q}),s.jsx("span",{"aria-hidden":"true",children:A?"^":"v"})]})]}),A&&s.jsxs("div",{id:"sidebar-ongoing-lectures-panel",className:"list-group list-group-flush border-bottom rounded-0",children:[M&&s.jsx("div",{className:"list-group-item small text-muted",children:" ..."}),z&&!M&&s.jsx("div",{className:"list-group-item small text-danger",children:String(z.message||z)}),!M&&!z&&T.length===0&&s.jsx("div",{className:"list-group-item small text-muted",children:"  ."}),!M&&!z&&T.map($=>{const{lectureId:O,subjectName:Q,completionName:Z}=$;if(!O)return null;const k=`/classroom/professor/${encodeURIComponent(O)}`;return s.jsxs(st,{to:k,className:"list-group-item list-group-item-action small py-2 bg-white",children:[s.jsx("div",{className:"fw-semibold text-truncate",children:Q}),Z&&s.jsx("div",{className:"text-muted small",children:Z})]},O)})]}),s.jsxs("button",{type:"button",className:"list-group-item list-group-item-action d-flex align-items-center justify-content-between py-2 ps-3",onClick:H,"aria-expanded":t,"aria-controls":"sidebar-review-task-panel",children:[s.jsx("span",{className:"fw-bold",style:{fontSize:"1.3em"},children:"  "}),s.jsxs("span",{className:"d-flex align-items-center gap-2",children:[s.jsx("span",{className:"badge text-bg-secondary",children:U}),s.jsx("span",{"aria-hidden":"true",children:t?"^":"v"})]})]}),t&&s.jsxs("div",{id:"sidebar-review-task-panel",className:"list-group list-group-flush border-bottom rounded-0",children:[a&&s.jsx("div",{className:"list-group-item small text-muted",children:" ..."}),o&&!a&&s.jsx("div",{className:"list-group-item small text-danger",children:String(o.message||o)}),!a&&!o&&_.length===0&&s.jsx("div",{className:"list-group-item small text-muted",children:"  ."}),!a&&!o&&_.map($=>{const{lectureId:O,lectureLabel:Q,taskId:Z,taskLabel:k,submitCount:W}=$;if(!O||!Z)return null;const P=`/classroom/professor/${encodeURIComponent(O)}/task/indiv/${encodeURIComponent(Z)}`;return s.jsxs(st,{to:P,className:"list-group-item list-group-item-action small py-2 bg-white",children:[s.jsxs("div",{className:"text-muted small",children:["[",Q,"]"]}),s.jsx("div",{className:"fw-semibold text-truncate",children:k}),s.jsxs("div",{className:"text-muted",children:["  : ",W,""]})]},`${O}-${Z}`)})]}),s.jsxs("button",{type:"button",className:"list-group-item list-group-item-action d-flex align-items-center justify-content-between py-2 ps-3",onClick:E,"aria-expanded":m,"aria-controls":"sidebar-review-grouptask-panel",children:[s.jsx("span",{className:"fw-bold",style:{fontSize:"1.3em"},children:"  "}),s.jsxs("span",{className:"d-flex align-items-center gap-2",children:[s.jsx("span",{className:"badge text-bg-secondary",children:V}),s.jsx("span",{"aria-hidden":"true",children:m?"^":"v"})]})]}),m&&s.jsxs("div",{id:"sidebar-review-grouptask-panel",className:"list-group list-group-flush border-bottom rounded-0",children:[b&&s.jsx("div",{className:"list-group-item small text-muted",children:" ..."}),v&&!b&&s.jsx("div",{className:"list-group-item small text-danger",children:String(v.message||v)}),!b&&!v&&B.length===0&&s.jsx("div",{className:"list-group-item small text-muted",children:"  ."}),!b&&!v&&B.map($=>{const{lectureId:O,lectureLabel:Q,taskId:Z,taskLabel:k,submitCount:W}=$;if(!O||!Z)return null;const P=`/classroom/professor/${encodeURIComponent(O)}/task/group/${encodeURIComponent(Z)}`;return s.jsxs(st,{to:P,className:"list-group-item list-group-item-action small py-2 bg-white",children:[s.jsxs("div",{className:"text-muted small",children:["[",Q,"]"]}),s.jsx("div",{className:"fw-semibold text-truncate",children:k}),s.jsxs("div",{className:"text-muted",children:["  : ",W,""]})]},`${O}-${Z}`)})]})]})}function O2(){const t=new Date().getFullYear();return s.jsx("footer",{className:"app-footer",children:s.jsxs("div",{className:"container py-3 text-muted small d-flex justify-content-between",children:[s.jsxs("span",{children:[" ",s.jsx("span",{children:t})," JSU Classroom"]}),s.jsx("span",{children:"v0.1 Prototype"})]})})}function Ed({role:t="student",children:e,lectureId:a,onLectureInfo:i}){return s.jsxs("div",{className:"app",children:[s.jsx(v2,{role:t,lectureId:a,onLectureInfo:i}),s.jsxs("main",{className:"app-main",children:[s.jsx("aside",{className:"app-sidebar",children:t==="professor"?s.jsx(I2,{}):s.jsx(L2,{})}),s.jsx("section",{className:"app-content",children:s.jsx("div",{className:"container p-3",children:e})})]}),s.jsx(O2,{})]})}const B2={MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""},z2={REG1:"1",REG2:"2",SUB1:"",SUB2:""},U2={REG1:1,REG2:2,SUB1:3,SUB2:4},Pt={pageTitle:"  ",summary:(t,e)=>` ${t}   ${e}`,ongoingTitle:" ",endedTitle:" ",loading:"   ...",empty:"  .",error:"     .",cannotDisplay:"    .",professorFallback:"  ",deptFallback:"-",completionFallback:"-",creditUnknown:"  ",hourUnknown:"  ",capacityLabel:(t,e)=>e>0?`${t} / ${e}`:`${t}`,scheduleHeading:"",scheduleEmpty:"  .",endInfo:t=>`: ${t}`,statusEnded:"",statusOngoing:""},Rb=t=>{if(!t||String(t).length<4)return"--:--";const e=String(t),a=parseInt(e.slice(0,2),10),i=e.slice(2,4);return`${a}:${i}`},F2=t=>{if(!t)return[];if(Array.isArray(t))return t;if(typeof t=="string")try{const e=JSON.parse(t);return Array.isArray(e)?e:[]}catch{return[]}return[]},Lb=t=>{if(!t)return{year:0,order:99};const[e="0",a=""]=String(t).split("_");return{year:Number(e)||0,order:U2[a]??99}},H2=t=>{if(!t)return"  ";const[e,a]=String(t).split("_"),i=z2[a]||a||"";return i?`${e} ${i}`:`${e}`},P2=t=>{if(!t)return"  ";const e=new Date(t);if(Number.isNaN(e.getTime()))return"  ";const a=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${a}-${i}-${o}`},Ib=t=>t.slice().sort((e,a)=>{const i=Lb(e.yeartermCd),o=Lb(a.yeartermCd);return i.year!==o.year?o.year-i.year:i.order!==o.order?i.order-o.order:String(e.subjectName||"").localeCompare(String(a.subjectName||""),"ko")}),V2=t=>t?`/classroom/student/${encodeURIComponent(t)}`:"#",Y2=t=>{if(!t&&t!==0)return null;const e=String(t).trim();return e?`/classroom/api/v1/common/photo/professor/${encodeURIComponent(e)}`:null},q2=t=>t.length?t.map((e,a)=>{const i=e?.placeName||e?.placeCd||"  ",o=Array.isArray(e?.slots)?e.slots:[];return s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"badge bg-light text-dark border me-2",children:i}),s.jsx("ul",{className:"mb-0 ps-3",children:o.length===0?s.jsx("li",{className:"text-muted",children:Pt.scheduleEmpty}):o.map((d,u)=>{const h=B2[d?.day]??d?.day??"";return s.jsxs("li",{children:[h," ",Rb(d?.start),"-",Rb(d?.end)]},`${i}-${a}-${u}`)})})]},`${i}-${a}`)}):s.jsx("p",{className:"text-muted mb-0",children:Pt.scheduleEmpty}),G2=({lecture:t})=>{const e=F2(t?.scheduleJson),a=V2(t?.lectureId),i=!!t?.ended,o=Y2(t?.professorNo),d=t?.professorName||Pt.professorFallback,u=t?.univDeptName||Pt.deptFallback,h=t?.completionName||Pt.completionFallback,m=t?.subjectTypeName||"-",p=Number.isFinite(Number(t?.credit))?`${t.credit}`:Pt.creditUnknown,b=Number.isFinite(Number(t?.hour))?`${t.hour}`:Pt.hourUnknown,y=Number.isFinite(Number(t?.currentCap))?Number(t.currentCap):0,v=Number.isFinite(Number(t?.maxCap))?Number(t.maxCap):0,N=Pt.capacityLabel(y,v),D=i?Pt.endInfo(P2(t?.endAt)):null;return s.jsx("div",{className:"col-12 col-lg-6 col-xl-4",children:s.jsx("article",{className:"card shadow-sm h-100",children:s.jsxs("div",{className:"card-body d-flex flex-column",children:[s.jsxs("div",{className:"d-flex align-items-start justify-content-between mb-2",children:[s.jsx("h2",{className:"h5 lh-base mb-0",children:s.jsx(st,{className:"stretched-link text-decoration-none",to:a,children:t?.subjectName||" "})}),s.jsx("span",{className:`badge ${i?"bg-secondary-subtle text-secondary border border-secondary-subtle":"bg-success-subtle text-success border border-success-subtle"}`,children:i?Pt.statusEnded:Pt.statusOngoing})]}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsxs("div",{className:"clearfix",children:[o?s.jsx("img",{src:o,alt:`${d}  `,className:"stu-card-professor float-end ms-3 mb-2"}):null,s.jsx("div",{className:"mb-2 small text-body-secondary",children:u}),s.jsx("div",{className:"text-muted small mb-1",children:H2(t?.yeartermCd)}),s.jsxs("ul",{className:"list-unstyled small mb-0",children:[s.jsxs("li",{children:[" : ",d]}),s.jsxs("li",{children:[" : ",h]}),s.jsxs("li",{children:[" : ",m]}),s.jsxs("li",{children:[" / : ",p,"  ",b]}),s.jsxs("li",{children:[" : ",N]})]})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("strong",{className:"d-block mb-1",children:Pt.scheduleHeading}),q2(e)]})]}),D?s.jsx("div",{className:"text-muted small mt-auto pt-3 border-top",children:D}):null]})})})},Ob=({idPrefix:t,title:e,count:a,open:i,onToggle:o,children:d,badgeClassName:u="bg-secondary-subtle text-secondary border border-secondary-subtle"})=>s.jsx("div",{className:"accordion mt-2",id:`${t}-accordion`,children:s.jsxs("div",{className:"accordion-item",children:[s.jsx("h2",{className:"accordion-header",id:`${t}-heading`,children:s.jsxs("button",{className:`accordion-button${i?"":" collapsed"}`,type:"button","aria-expanded":i,"aria-controls":`${t}-collapse`,onClick:o,children:[e,s.jsxs("span",{className:`badge ${u} ms-2`,children:[a,""]})]})}),s.jsx("div",{id:`${t}-collapse`,className:`accordion-collapse collapse${i?" show":""}`,"aria-labelledby":`${t}-heading`,children:s.jsx("div",{className:"accordion-body",children:d})})]})});function X2(){const[t,e]=x.useState([]),[a,i]=x.useState(!0),[o,d]=x.useState(""),[u,h]=x.useState("ongoing");x.useEffect(()=>{let v=!0;return(async()=>{try{i(!0),d("");const N=await fetch("/classroom/api/v1/student/mylist",{headers:{Accept:"application/json"},credentials:"include"});if(!N.ok)throw new Error(`(${N.status}) ${Pt.error}`);const D=await N.text();if(!v)return;let C=[];if(D&&D.trim())try{C=JSON.parse(D)}catch(A){console.warn("JSON  :",A),C=[]}Array.isArray(C)||(C=[]),e(C)}catch(N){if(!v)return;d(N instanceof Error?N.message:Pt.error),e([])}finally{v&&i(!1)}})(),()=>{v=!1}},[]);const m=x.useMemo(()=>Ib(t.filter(v=>!v?.ended)),[t]),p=x.useMemo(()=>Ib(t.filter(v=>!!v?.ended)),[t]),b=Pt.summary(m.length,p.length),y=v=>a?s.jsx("div",{className:"text-center text-muted py-4",children:Pt.loading}):o?s.jsx("div",{className:"text-center text-muted py-4",children:Pt.cannotDisplay}):v.length?s.jsx("div",{className:"row g-3",children:v.map(N=>s.jsx(G2,{lecture:N},N?.lectureId||N?.subjectName))}):s.jsx("div",{className:"text-muted text-center py-4",children:Pt.empty});return s.jsx(Ed,{role:"student",children:s.jsxs("div",{id:"stu-main-root",className:"container my-4","data-api":"/classroom/api/v1/student/mylist",children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("h1",{className:"h3 mb-0",children:Pt.pageTitle}),s.jsx("div",{className:"text-muted small",id:"stu-lecture-summary","aria-live":"polite",children:o?"":b})]}),o&&s.jsx("div",{id:"stu-error-box",className:"alert alert-danger",role:"alert",children:o}),s.jsxs("section",{className:"accordion-section mb-4",children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[s.jsx("h2",{className:"h5 mb-0",children:Pt.ongoingTitle}),s.jsxs("span",{className:"badge bg-success-subtle text-success border border-success-subtle",id:"stu-ongoing-count",children:[m.length,""]})]}),s.jsx(Ob,{idPrefix:"stu-ongoing",title:Pt.ongoingTitle,count:m.length,open:u==="ongoing",onToggle:()=>h(u==="ongoing"?null:"ongoing"),badgeClassName:"bg-success-subtle text-success border border-success-subtle",children:y(m)})]}),s.jsxs("section",{className:"accordion-section",children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between",children:[s.jsx("h2",{className:"h5 mb-0",children:Pt.endedTitle}),s.jsxs("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle",id:"stu-ended-count",children:[p.length,""]})]}),s.jsx(Ob,{idPrefix:"stu-ended",title:Pt.endedTitle,count:p.length,open:u==="ended",onToggle:()=>h(u==="ended"?null:"ended"),children:y(p)})]})]})})}const We={defaultTitle:" ",subtitleLoading:"   ...",planHeading:"  ",planLoadingTitle:"   ...",planLoadingBody:" .",planEmpty:"   .",planGoalLabel:" ",planDescLabel:" ",overviewHeading:" ",overviewLoading:"   ...",overviewProfessorLabel:" ",overviewIndexLabel:"",overviewGoalLabel:" ",overviewPrereqLabel:" ",overviewCapacityLabel:"",overviewEndLabel:"",overviewGoalFallback:"  .",overviewPrereqFallback:"  .",overviewCapacityFallback:"  .",overviewProfessorFallback:"  ",overviewIndexFallback:" ",overviewEndFallback:"",scheduleHeading:" /",scheduleLoading:"   ...",scheduleEmpty:"  .",scheduleDay:"",scheduleTime:"",schedulePlace:"",classmateHeading:"  ",classmateLoading:"   ...",classmateEmpty:"    .",classmateFallback:"    .",classmateModalTitle:"  ",modalClose:"",tableStudentNo:"",tableName:"",tableDept:"",tableStatus:"",summaryExtraPrefix:" ",summaryExtraSuffix:"",unknownTerm:"  ",unknownProfessor:"",unknownStudentName:" ",countSuffix:"",genericError:"    .",missingLecture:"  ."},W2={MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""},Tr="/classroom/api/v1/common",Bb="/classroom/api/v1/student",zb=t=>{if(!t||String(t).length<4)return"--:--";const e=String(t);return`${e.slice(0,2)}:${e.slice(2,4)}`},K2=t=>{if(!t)return"-";if(typeof t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t))return t;const e=new Date(t);if(Number.isNaN(e.getTime()))return"-";const a=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${a}-${i}-${o}`},Q2=t=>{if(!t)return[];if(Array.isArray(t))return t;if(typeof t=="string")try{const e=JSON.parse(t);return Array.isArray(e)?e:[]}catch{return[]}return[]},Qh=(t,e)=>{const a=typeof t=="string"?t.trim():"";if(!a)return s.jsx("span",{className:"text-body-secondary",children:e});const i=a.split(/\r?\n/);return i.map((o,d)=>s.jsxs(x.Fragment,{children:[o||"",d<i.length-1?s.jsx("br",{}):null]},`${d}-${o}`))};function Z2(){const{lectureId:t}=ht(),{setLecture:e,setStudents:a,formatYearTerm:i}=ds(),[o,d]=x.useState(We.defaultTitle),[u,h]=x.useState(We.subtitleLoading),[m,p]=x.useState(!0),[b,y]=x.useState(null),[v,N]=x.useState(null),[D,C]=x.useState([]),[A,S]=x.useState(1),[M,F]=x.useState([]),[z,K]=x.useState([]);x.useEffect(()=>{let B=!0;return(async()=>{try{if(!t)throw new Error(We.missingLecture);p(!0),y(null);const T=encodeURIComponent(t),U={headers:{Accept:"application/json"},credentials:"include"},V=[fetch(`${Tr}/${T}`,U),fetch(`${Tr}/${T}/plan`,U),fetch(`${Tr}/${T}/schedule`,U),fetch(`${Bb}/${T}/students`,U)],q=async G=>{if(G.status===404)return{data:null,notFound:!0};if(G.status===204)return{data:[]};if(!G.ok){const ae=await G.text().catch(()=>""),xe=ae?` - ${ae}`:"";throw new Error(`HTTP ${G.status} ${G.statusText}${xe}`)}if((G.headers.get("content-type")||"").includes("application/json"))return{data:await G.json()};const ee=await G.text();try{return{data:JSON.parse(ee)}}catch{return{data:ee}}},[H,E,L,$]=await Promise.all(V.map(G=>G.then(q)));if(!B)return;const O=H.notFound?null:H.data;if(N(O||null),e(O||null),O){d(O.subjectName||We.defaultTitle);const G=O.professorName||We.overviewProfessorFallback,Y=i(O.yeartermCd)||We.unknownTerm;h(`${G}  ${Y}`)}else d(We.defaultTitle),h(We.subtitleLoading);const Q=E.notFound?[]:E.data,Z=Array.isArray(Q)?Q.filter(G=>G&&G.lectureWeek!==void 0):[];Z.sort((G,Y)=>(Number(G.lectureWeek)||0)-(Number(Y.lectureWeek)||0)),C(Z);const k=L.notFound?[]:L.data;F(Q2(k));const W=$.notFound?[]:$.data,P=Array.isArray(W)?W.slice():[];P.sort((G,Y)=>{const ee=String(G?.gradeCd||"").localeCompare(String(Y?.gradeCd||""));if(ee!==0)return ee;const ae=`${G?.lastName||""}${G?.firstName||""}`,xe=`${Y?.lastName||""}${Y?.firstName||""}`;return ae.localeCompare(xe,"ko")}),K(P),a(P)}catch(T){if(!B)return;y(T instanceof Error?T.message:We.genericError)}finally{B&&p(!1)}})(),()=>{B=!1}},[t,e,a,i]),`${z.length}${We.countSuffix}`;const R=x.useMemo(()=>v?.professorNo?`${Tr}/photo/professor/${encodeURIComponent(String(v.professorNo).trim())}`:null,[v?.professorNo]),w=x.useMemo(()=>m?s.jsxs("div",{className:"text-center py-4",children:[s.jsx("div",{className:"spinner-border text-primary",role:"status",children:s.jsx("span",{className:"visually-hidden",children:We.planLoadingTitle})}),s.jsx("p",{className:"text-muted mt-2 mb-0",children:We.planLoadingBody})]}):D.length?s.jsxs(s.Fragment,{children:[s.jsx("ul",{className:"nav nav-tabs mb-3",id:"planTabs",role:"tablist",children:D.map(B=>{const T=Number(B.lectureWeek);return s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsx("button",{className:`nav-link ${A===T?"active":""}`,id:`week-${T}-tab`,type:"button",role:"tab","aria-controls":`#week-${T}-tab-pane`,"aria-selected":A===T,onClick:()=>S(T),children:`${T}`})},T)})}),s.jsx("div",{className:"tab-content flex-grow-1 border border-top-0 rounded-bottom p-3",id:"planTabContent",children:D.map(B=>{const T=Number(B.lectureWeek);return s.jsx("div",{className:`tab-pane fade ${A===T?"show active":""}`,id:`week-${T}-tab-pane`,role:"tabpanel","aria-labelledby":`week-${T}-tab`,tabIndex:"0",children:s.jsxs("div",{className:"card-body bg-light-subtle",children:[s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"fw-semibold mb-1 text-primary",children:[s.jsx("i",{className:"bi bi-bullseye me-2"}),We.planGoalLabel]}),s.jsx("p",{className:"mb-0",children:Qh(B.weekGoal,We.overviewGoalFallback)})]}),s.jsxs("div",{className:"fw-semibold mb-1",children:[s.jsx("i",{className:"bi bi-journal-text me-2"}),We.planDescLabel]}),s.jsx("p",{className:"mb-0",children:Qh(B.weekDesc,We.overviewGoalFallback)})]})},T)})})]}):s.jsx("div",{className:"text-muted text-center py-4",children:We.planEmpty}),[D,A,m]),_=x.useMemo(()=>m?s.jsx("div",{className:"text-body-secondary",children:We.scheduleLoading}):M.length?s.jsxs("div",{className:"table-responsive border rounded",children:[" ",s.jsxs("table",{className:"table table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",style:{width:"5.5rem"},children:We.scheduleDay}),s.jsx("th",{className:"text-center",style:{width:"9rem"},children:We.scheduleTime})]})}),s.jsx("tbody",{children:M.map((B,T)=>B.slots.map((U,V)=>s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:W2[U.day]||U.day||"-"}),s.jsxs("td",{className:"text-center",children:[s.jsx("div",{children:U.start?`${zb(U.start)} ~ ${zb(U.end)}`:"-"}),B.placeName===""?s.jsxs("div",{className:"small text-muted",children:[B.placeName,s.jsx("br",{}),"  209"]}):s.jsx("div",{className:"small text-muted",children:B.placeName||B.placeCd||" "})]})]},`${T}-${V}`)))})]})]}):s.jsx("div",{className:"text-body-secondary",children:We.scheduleEmpty}),[M,m]);return s.jsxs("section",{id:"stu-lecture-root",className:"container py-4","data-lecture-id":t||"","data-common-api":Tr,"data-student-api":Bb,children:[s.jsxs("header",{className:"mb-4",children:[s.jsx("h1",{className:"h3 mb-1 text-primary",id:"stu-lecture-title",children:o}),s.jsx("p",{className:"text-muted mb-0",id:"stu-lecture-subtitle",children:u})]}),b&&s.jsx("div",{id:"stu-lecture-alert",className:"alert alert-danger",role:"alert",children:b||We.genericError}),s.jsxs("div",{className:"row g-4 align-items-stretch mb-4",children:[s.jsxs("div",{className:"col-12 col-xl-8 d-flex flex-column gap-4",children:[s.jsxs("section",{id:"plan-section",className:"card h-100 flex-fill","aria-labelledby":"plan-heading",style:{height:"350px !important"},children:[s.jsx("div",{className:"card-header d-flex align-items-center justify-content-between",children:s.jsxs("h2",{className:"h5 mb-0",id:"plan-heading",children:[" ",We.planHeading]})}),s.jsxs("div",{className:"card-body d-flex flex-column",children:[w,s.jsx("div",{id:"plan-empty",className:`text-body-secondary small mt-3${D.length||m?" d-none":""}`,children:We.planEmpty})]})]}),s.jsxs("section",{id:"classmate-section",className:"card h-100 flex-fill","aria-labelledby":"classmate-heading",children:[s.jsxs("div",{className:"card-header d-flex flex-wrap align-items-center justify-content-between gap-2",children:[s.jsxs("h2",{className:"h6 mb-0",id:"classmate-heading",children:[" ",We.classmateHeading]}),s.jsxs("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle",id:"classmate-total-badge",children:[z.length,We.countSuffix]})]}),s.jsxs("div",{className:"card-body p-0",children:[" ",m&&s.jsx("div",{className:"text-body-secondary text-center py-4",children:We.classmateLoading}),!m&&z.length===0?s.jsx("div",{className:"text-body-secondary text-center py-4",children:We.classmateEmpty}):s.jsx("div",{className:"p-3",children:s.jsx("div",{className:"table-responsive",style:{maxHeight:"240px",overflowY:"auto"},children:s.jsxs("table",{className:"table table-sm table-hover align-middle mb-0",children:[s.jsx("thead",{className:"table-primary sticky-top",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",children:We.tableStudentNo}),s.jsx("th",{className:"text-center",children:We.tableName}),s.jsx("th",{className:"text-center",children:We.tableDept})]})}),s.jsx("tbody",{children:z.map((B,T)=>{const U=`${B?.lastName||""}${B?.firstName||""}`.trim()||B?.studentName||We.unknownStudentName,V=B?.gradeName||B?.grade||"";return s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:B?.studentNo||"-"}),s.jsxs("td",{className:"text-center",children:[U,V?s.jsx("span",{className:"badge bg-primary-subtle text-primary-emphasis border-primary-subtle ms-2",children:V}):null]}),s.jsx("td",{className:"text-center",children:B?.univDeptName||B?.deptName||"-"})]},`${B?.enrollId||B?.studentNo||T}`)})})]})})})]})]})]}),s.jsxs("div",{className:"col-12 col-xl-4 d-flex flex-column gap-4",children:[s.jsxs("section",{id:"overview-section",className:"card h-100 flex-fill","aria-labelledby":"overview-heading",style:{height:"350px !important"},children:[s.jsx("div",{className:"card-header",children:s.jsxs("h2",{className:"h6 mb-0",id:"overview-heading",children:[" ",We.overviewHeading]})}),s.jsxs("div",{className:"card-body px-3 d-flex flex-column",id:"overview-body",children:[m&&s.jsx("div",{className:"text-body-secondary",children:We.overviewLoading}),!m&&!v&&s.jsx("div",{className:"text-body-secondary",children:We.classmateFallback}),!m&&v&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"d-flex gap-3",children:[R?s.jsx("img",{src:R,alt:`${v.professorName||We.overviewProfessorFallback}`,className:"overview-photo flex-shrink-0"}):s.jsx("div",{className:"overview-photo-placeholder flex-shrink-0",children:We.overviewProfessorFallback}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("div",{className:"text-muted small mb-1",children:i(v.yeartermCd)||We.unknownTerm}),s.jsx("div",{className:"fw-semibold",children:v.subjectName||We.defaultTitle}),s.jsx("div",{className:"small text-body-secondary",children:`${We.overviewProfessorLabel}: ${v.professorName||We.overviewProfessorFallback}`}),s.jsx("div",{className:"small text-body-secondary",children:`${We.overviewIndexLabel}: ${v.lectureIndex||We.overviewIndexFallback}`})]})]}),s.jsxs("div",{className:"d-flex flex-column gap-0 mt-3 mb-0 border-top pt-3",children:[" ",s.jsxs("div",{className:"d-flex",children:[s.jsx("dt",{className:"text-primary col-4",style:{fontSize:"0.9rem"},children:We.overviewGoalLabel})," ",s.jsx("dd",{className:"mb-0 text-end col-8",style:{fontSize:"0.9rem"},children:Qh(v.lectureGoal,We.overviewGoalFallback)})," "]}),s.jsxs("div",{className:"d-flex",children:[s.jsx("dt",{className:"text-info col-4",style:{fontSize:"0.9rem"},children:We.overviewPrereqLabel})," ",s.jsx("dd",{className:"mb-0 text-end col-8",style:{fontSize:"0.9rem"},children:v.prereqSubject||We.overviewPrereqFallback})," "]}),s.jsxs("div",{className:"d-flex",children:[s.jsx("dt",{className:"text-success col-4",style:{fontSize:"0.9rem"},children:We.overviewCapacityLabel})," ",s.jsx("dd",{className:"mb-0 text-end col-8",style:{fontSize:"0.9rem"},children:Number.isFinite(Number(v.maxCap))?`${v.maxCap}${We.countSuffix}`:We.overviewCapacityFallback})]}),s.jsxs("div",{className:"d-flex",children:[s.jsx("dt",{className:"text-danger col-4",style:{fontSize:"0.9rem"},children:We.overviewEndLabel})," ",s.jsx("dd",{className:"mb-0 text-end col-8",style:{fontSize:"0.9rem"},children:v.endAt?K2(v.endAt):We.overviewEndFallback})," "]})]})]})]})]}),s.jsxs("section",{id:"schedule-section",className:"card h-100 flex-fill","aria-labelledby":"schedule-heading",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h2",{className:"h6 mb-0",id:"schedule-heading",children:[" ",We.scheduleHeading]})}),s.jsx("div",{className:"card-body",id:"schedule-body",children:_})]})]})]})]})}const ea={dashboard:"",board:"",attendance:"",exam:"",task:"",review:"",grade:""};function J2(){const{lectureId:t}=ht(),{lecture:e}=ds(),[a,i]=x.useState({show:!1,enabled:!1}),[o,d]=x.useState(null);x.useEffect(()=>{let p=!0;return(async()=>{if(!e||!e.ended){i({show:!1,enabled:!1});return}i({show:!0,enabled:!1});try{const y=await fetch("/classroom/api/v1/student/review",{headers:{Accept:"application/json"},credentials:"include"});if(!y.ok)return;const v=await y.json();if(!p)return;const D=(Array.isArray(v)?v:[]).includes(t);i({show:!0,enabled:D})}catch{}})(),()=>{p=!1}},[e,t]);const u=`/classroom/student/${encodeURIComponent(t||"")}`,h=(p,b,y={})=>s.jsx("li",{className:"nav-item",children:s.jsx(Qv,{end:y.end,className:({isActive:v})=>`nav-link${v?" active":""}`,to:p,children:b})},p),m=(p,b,y)=>{const v=y&&o===b,N=()=>d(b),D=()=>d(C=>C===b?null:C);return s.jsxs("li",{className:"nav-item position-relative",onMouseEnter:N,onMouseLeave:D,onFocus:N,onBlur:D,children:[s.jsx("span",{className:"nav-link disabled text-muted",style:{cursor:"not-allowed",pointerEvents:"auto"},role:"button","aria-disabled":"true",tabIndex:0,children:p}),v&&s.jsxs("div",{className:"position-absolute text-nowrap",style:{top:"100%",left:"50%",transform:"translate(-50%, 0.5rem)",backgroundColor:"#212529",color:"#fff",padding:"0.35rem 0.6rem",borderRadius:"0.375rem",fontSize:"0.8rem",boxShadow:"0 0.5rem 1rem rgba(0, 0, 0, 0.18)",whiteSpace:"nowrap",zIndex:1050,pointerEvents:"none"},role:"tooltip",children:[y,s.jsx("div",{style:{position:"absolute",top:"-0.4rem",left:"50%",transform:"translateX(-50%)",width:0,height:0,borderLeft:"0.4rem solid transparent",borderRight:"0.4rem solid transparent",borderBottom:"0.4rem solid #212529"}})]})]},b)};return s.jsxs("ul",{className:"nav nav-pills mb-4",children:[h(u,ea.dashboard,{end:!0}),h(`${u}/board`,ea.board),h(`${u}/attendance`,ea.attendance),h(`${u}/task`,ea.task),h(`${u}/exam`,ea.exam),a.show&&s.jsxs(s.Fragment,{children:[a.enabled?h(`${u}/review`,ea.review):m(ea.review,"review","  "),a.enabled?m(ea.grade,"grade","     "):h(`${u}/grade`,ea.grade)]})]})}function e1(){const{lectureId:t}=ht(),{setLecture:e,clearLectureScoped:a}=ds();return x.useEffect(()=>{let i=!0;return t&&(async()=>{try{const d=await fetch(`/classroom/api/v1/common/lecture/${t}`,{headers:{Accept:"application/json"},credentials:"include"}),u=d.headers.get("content-type");if(u&&u.includes("text/html")){console.warn("Received HTML instead of JSON - possible authentication issue"),i&&e(null);return}if(!d.ok)throw new Error("Failed to fetch lecture info");const h=await d.json();i&&e(h)}catch(d){console.error(d),i&&e(null)}})(),()=>{i=!1,a(),e(null)}},[t,e,a]),s.jsxs(Ed,{role:"student",lectureId:t,children:[s.jsx(J2,{}),s.jsx(Wv,{})]})}const Zh=10;function t1(t){return t==="NOTICE"?s.jsx("span",{className:"badge bg-warning text-dark border border-warning-subtle",children:""}):t==="MATERIAL"?s.jsx("span",{className:"badge bg-info text-dark border border-info-subtle",children:""}):s.jsx("span",{className:"badge text-bg-secondary",children:""})}const s1=t=>{if(!t)return"";const e=new Date(t);if(Number.isNaN(e.getTime()))return String(t);const a=b=>String(b).padStart(2,"0"),i=new Date().getFullYear(),o=e.getFullYear(),d=a(e.getMonth()+1),u=a(e.getDate()),h=a(e.getHours()),m=a(e.getMinutes());return`${o===i?`${d}-${u}`:`${o}-${d}-${u}`} ${h}:${m}`};function n1(){const{lectureId:t}=ht(),[e,a]=x.useState([]),[i,o]=x.useState(!0),[d,u]=x.useState(null),[h,m]=x.useState("all"),[p,b]=x.useState(""),[y,v]=x.useState(""),[N,D]=x.useState(1);x.useEffect(()=>{let w=!0;return(async()=>{try{o(!0),u(null);const _=`/classroom/api/v1/student/board/${encodeURIComponent(t)}/post`,B=await fetch(_,{headers:{Accept:"application/json"},credentials:"include"});if(!B.ok)throw new Error(`(${B.status})    .`);const T=await B.json();if(!Array.isArray(T))throw new Error("    .");if(!w)return;a(T)}catch(_){if(!w)return;u(_)}finally{w&&o(!1)}})(),()=>{w=!1}},[t]);const C=w=>w.postType||w.classification||"",A=x.useMemo(()=>{let w=e.length,_=0,B=0;for(const T of e){const U=C(T);U==="NOTICE"?_++:U==="MATERIAL"&&B++}return{all:w,notice:_,material:B}},[e]);x.useEffect(()=>{h==="all"?b(""):h==="notice"?b("NOTICE"):h==="material"&&b("MATERIAL"),D(1)},[h]);const S=x.useMemo(()=>{let w=e;if(p&&(w=w.filter(_=>C(_)===p)),y&&y.trim().length){const _=y.trim().toLowerCase();w=w.filter(B=>String(B.title||"").toLowerCase().includes(_)||String(B.content||"").toLowerCase().includes(_))}return w},[e,p,y]),M=Math.max(1,Math.ceil(S.length/Zh)),F=x.useMemo(()=>S.slice((N-1)*Zh,N*Zh),[S,N]);x.useEffect(()=>{N>M&&D(1)},[M,N]);const z=(w,_)=>{const T=(w.lctPostId||w.postId||w.id)??w.id;if(T==null)return null;const U=C(w),V=s1(w.createAt||w.createdAt);let q="";for(const L of[w.summary,w.content]){if(!L)continue;const $=String(L).replace(/\s+/g," ").trim();if($.length){q=$;break}}const H=w.title||"( )",E=`/classroom/student/${encodeURIComponent(t)}/board/${encodeURIComponent(String(T))}`;return s.jsx(st,{to:E,className:"list-group-item list-group-item-action text-reset text-decoration-none py-2",children:s.jsxs("div",{className:"d-flex align-items-center gap-2 flex-nowrap",children:[s.jsx("div",{className:"d-flex align-items-center gap-1 flex-shrink-0",children:t1(U)}),s.jsxs("div",{className:"flex-grow-1 text-truncate",style:{minWidth:0},children:[s.jsx("span",{className:"fw-semibold",children:H}),q&&s.jsxs("span",{className:"text-muted",children:["  ",q]})]}),s.jsxs("span",{className:"text-muted small text-nowrap flex-shrink-0",children:[": ",V]})]})},String(T))},K=({id:w,label:_,active:B,onClick:T,badge:U})=>s.jsxs("button",{className:`nav-link ${B?"active":""}`,id:`tab-${w}`,type:"button",onClick:T,role:"tab",children:[_," ",U!=null&&s.jsx("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle ms-1",children:U})]}),R=()=>s.jsx("nav",{className:"mt-3","aria-label":"  ",children:s.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[s.jsx("li",{className:`page-item ${N<=1?"disabled":""}`,children:s.jsx("a",{className:"page-link",href:"#",onClick:w=>{w.preventDefault(),N>1&&D(N-1)},children:""})}),Array.from({length:M},(w,_)=>_+1).map(w=>s.jsx("li",{className:`page-item ${w===N?"active":""}`,children:s.jsx("a",{className:"page-link",href:"#",onClick:_=>{_.preventDefault(),D(w)},children:w})},w)),s.jsx("li",{className:`page-item ${N>=M?"disabled":""}`,children:s.jsx("a",{className:"page-link",href:"#",onClick:w=>{w.preventDefault(),N<M&&D(N+1)},children:""})})]})});return s.jsxs("section",{id:"board-root",className:"container py-0","data-lecture-id":t,children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("h1",{className:"h3 mb-0",children:""}),s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsxs("select",{id:"filter-type",className:"form-select form-select-sm",style:{minWidth:120},value:p,onChange:w=>b(w.target.value),children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"NOTICE",children:""}),s.jsx("option",{value:"MATERIAL",children:""})]}),s.jsxs("div",{className:"input-group input-group-sm",style:{minWidth:220},children:[s.jsx("input",{id:"search-q",type:"text",className:"form-control",placeholder:"/ ",value:y,onChange:w=>{v(w.target.value),D(1)}}),s.jsx("button",{id:"btn-search",className:"btn btn-outline-secondary",onClick:()=>D(1),children:""})]})]})]}),s.jsxs("section",{className:"mt-4","aria-labelledby":"tablist-h",children:[s.jsxs("ul",{className:"nav nav-tabs mt-2",id:"post-tabs",role:"tablist",children:[s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsx(K,{id:"all",label:"",active:h==="all",onClick:()=>m("all"),badge:A.all})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsx(K,{id:"notice",label:"",active:h==="notice",onClick:()=>m("notice"),badge:A.notice})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsx(K,{id:"material",label:"",active:h==="material",onClick:()=>m("material"),badge:A.material})})]}),s.jsxs("div",{className:"tab-content border border-top-0 rounded-bottom p-3",children:[(i||d)&&s.jsxs("div",{children:[i&&s.jsx("div",{className:"text-muted",children:" "}),d&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:String(d.message||d)})]}),!i&&!d&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{id:"pane-all",className:`tab-pane fade ${h==="all"?"show active":""} p-0`,role:"tabpanel","aria-labelledby":"tab-all",children:[s.jsx("div",{id:"list-all",children:p&&h==="all"?null:F.length===0?s.jsx("div",{className:"text-center text-muted py-4",children:"   ."}):s.jsx("div",{className:"list-group list-group-flush",children:F.map((w,_)=>z(w))})}),s.jsx("div",{className:"mt-3 d-flex align-items-center justify-content-between",children:s.jsx(R,{})})]}),s.jsx("div",{id:"pane-notice",className:`tab-pane fade ${h==="notice"?"show active":""} p-0`,role:"tabpanel","aria-labelledby":"tab-notice",children:s.jsx("div",{id:"list-notice",children:S.filter(w=>C(w)==="NOTICE").length===0?s.jsx("div",{className:"text-center text-muted py-4",children:"  ."}):s.jsx("div",{className:"list-group list-group-flush",children:S.filter(w=>C(w)==="NOTICE").map((w,_)=>z(w))})})}),s.jsx("div",{id:"pane-material",className:`tab-pane fade ${h==="material"?"show active":""} p-0`,role:"tabpanel","aria-labelledby":"tab-material",children:s.jsx("div",{id:"list-material",children:S.filter(w=>C(w)==="MATERIAL").length===0?s.jsx("div",{className:"text-center text-muted py-4",children:"  ."}):s.jsx("div",{className:"list-group list-group-flush",children:S.filter(w=>C(w)==="MATERIAL").map((w,_)=>z(w))})})})]})]}),s.jsx("div",{id:"notfound-box",className:"alert alert-danger mt-3 d-none",role:"alert"})]})]})}const a1=()=>{const{lectureId:t}=ht(),[e,a]=x.useState(null),[i,o]=x.useState(!0),[d,u]=x.useState(null),m="/classroom/api/v1/student";x.useEffect(()=>{(async()=>{o(!0);try{const A=await fetch(`${m}/${t}/attendance`);if(!A.ok)throw new Error("Failed to fetch attendance data");const S=await A.json(),M=S.length;let F=0,z=0,K=0,R=0,w=0;S.forEach(_=>{_.attStatusCd==="ATTD_OK"?F++:_.attStatusCd==="ATTD_LATE"?z++:_.attStatusCd==="ATTD_EARLY"?K++:_.attStatusCd==="ATTD_NO"?R++:_.attStatusCd==="ATTD_EXCUSE"&&w++}),a({summary:{totalLectures:M,attended:F,tardy:z,earlyLeave:K,absent:R,excused:w},details:S})}catch(A){u(A.message)}finally{o(!1)}})()},[t,m]);const p=C=>{if(!C)return{month:"-",day:""};const A=C.split("-");return A.length===3?{month:`${A[1]}`,day:`${A[2]}`}:{month:C,day:""}},b=C=>{const A=[];for(let S=0;S<C.length;S+=15)A.push(C.slice(S,S+15));return A},y=C=>{switch(C){case"":return"success";case"":return"warning";case"":return"warning";case"":return"info";case"":return"danger";default:return"secondary"}},v=C=>C===""||C===""?"#fd7e14":null,N=()=>{if(!e||!e.summary)return null;const{totalLectures:C,attended:A,tardy:S,earlyLeave:M,absent:F,excused:z}=e.summary,K=C>0?(A/C*100).toFixed(1):0,R=C>0?(S/C*100).toFixed(1):0,w=C>0?(M/C*100).toFixed(1):0,_=C>0?(F/C*100).toFixed(1):0,B=C>0?(z/C*100).toFixed(1):0,T=[{label:" ",value:`${C}`,color:"primary"},{label:"",value:`${A}`,color:"success"},{label:"",value:`${S}`,color:"warning"},{label:"",value:`${M}`,color:"warning"},{label:"",value:`${z}`,color:"info"},{label:"",value:`${F}`,color:"danger"}];return s.jsxs("div",{className:"bg-white rounded shadow-sm p-3",children:[s.jsx("div",{className:"row g-3",children:T.map(U=>s.jsx("div",{className:"col-lg-2",children:s.jsx("div",{className:"bg-light p-3 rounded h-100",children:s.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[s.jsx("span",{className:`fs-5 text-${U.color}`,children:U.label}),s.jsx("span",{className:"fs-4 fw-bold",children:U.value})]})})},U.label))}),s.jsxs("div",{className:"mt-4 pt-3 border-top",children:[s.jsx("h5",{className:"mb-3",children:""}),s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsxs("p",{className:"fs-3 fw-bold mb-0 me-3",children:[K,"%"]}),s.jsxs("div",{className:"progress flex-grow-1",style:{height:"25px"},children:[s.jsx("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${K}%`},"aria-valuenow":K,"aria-valuemin":"0","aria-valuemax":"100",title:`: ${K}%`}),s.jsx("div",{className:"progress-bar bg-warning",role:"progressbar",style:{width:`${R}%`},"aria-valuenow":R,"aria-valuemin":"0","aria-valuemax":"100",title:`: ${R}%`}),s.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${w}%`,backgroundColor:"#fd7e14"},"aria-valuenow":w,"aria-valuemin":"0","aria-valuemax":"100",title:`: ${w}%`}),s.jsx("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:`${B}%`},"aria-valuenow":B,"aria-valuemin":"0","aria-valuemax":"100",title:`: ${B}%`}),s.jsx("div",{className:"progress-bar bg-danger",role:"progressbar",style:{width:`${_}%`},"aria-valuenow":_,"aria-valuemin":"0","aria-valuemax":"100",title:`: ${_}%`})]})]})]})]})},D=()=>{if(!e||!e.details)return null;const C=b(e.details);return s.jsxs("div",{className:"bg-white rounded shadow-sm p-3 mt-4",children:[s.jsx("h5",{className:"mb-3",children:"  "}),C.map((A,S)=>s.jsx("div",{className:S>0?"mt-4":"",children:s.jsx("div",{className:"table-responsive",children:s.jsx("table",{className:"table table-bordered mb-0",children:s.jsxs("tbody",{children:[s.jsx("tr",{children:A.map((M,F)=>s.jsx("td",{className:"text-center fw-bold p-2",style:{width:`${100/A.length}%`},children:M.lctPrintRound},F))}),s.jsx("tr",{children:A.map((M,F)=>{const{month:z,day:K}=p(M.attDay);return s.jsxs("td",{className:"p-2 text-muted",style:{fontSize:"0.85rem",width:`${100/A.length}%`},children:[s.jsx("div",{className:"text-start",children:z}),s.jsx("div",{className:"text-end",children:K})]},F)})}),s.jsx("tr",{children:A.map((M,F)=>{const z=y(M.attStatusName),K=v(M.attStatusName);return s.jsx("td",{className:"text-center p-2",style:{width:`${100/A.length}%`},children:s.jsx("span",{className:`badge ${K?"":`bg-${z}`}`,style:K?{backgroundColor:K,fontSize:"0.75rem"}:{fontSize:"0.75rem"},children:M.attStatusName})},F)})})]})})})},S))]})};return i?s.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"200px"},children:s.jsx("div",{className:"spinner-border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):d?s.jsxs("div",{className:"alert alert-danger",role:"alert",children:["Error: ",d]}):s.jsxs("div",{className:"container mt-4",children:[s.jsx("h2",{className:"mb-4",children:" "}),N(),D()]})},jc=t=>String(t).padStart(2,"0"),Jh=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?"-":`${e.getFullYear()}-${jc(e.getMonth()+1)}-${jc(e.getDate())} ${jc(e.getHours())}:${jc(e.getMinutes())}`},l1=(t,e)=>{const a=Date.now(),i=t?new Date(t).getTime():null,o=e?new Date(e).getTime():null;return i&&a<i?"upcoming":i&&(!o||a<=o)?"ongoing":o&&a>o?"closed":"unknown"},i1=t=>{switch(t){case"ongoing":return s.jsx("span",{className:"badge text-bg-success",children:" "});case"upcoming":return s.jsx("span",{className:"badge text-bg-secondary",children:""});case"closed":return s.jsx("span",{className:"badge text-bg-dark",children:""});default:return s.jsx("span",{className:"badge text-bg-light text-muted",children:"-"})}},r1={OFF:"",ON:""},Ub=["all","ongoing","upcoming","closed"],o1={ongoing:" ",upcoming:"",closed:"",all:""},c1={all:"primary",ongoing:"success",upcoming:"warning",closed:"danger"},d1={ongoing:"   .",upcoming:"  .",closed:"  .",all:"  ."};function u1(){const{lectureId:t}=ht(),[e,a]=x.useState([]),[i,o]=x.useState(!0),[d,u]=x.useState(""),[h,m]=x.useState("all");x.useEffect(()=>{let A=!0;return(async()=>{if(!t){u("    ."),o(!1);return}try{o(!0),u("");const M=await fetch(`/classroom/api/v1/student/${encodeURIComponent(t)}/exam`,{headers:{Accept:"application/json"},credentials:"include"});if(!M.ok){const z=await M.text().catch(()=>"");throw new Error(z||`(${M.status})    .`)}const F=await M.json();if(!A)return;a(Array.isArray(F)?F:[])}catch(M){if(!A)return;u(M instanceof Error?M.message:"     ."),a([])}finally{A&&o(!1)}})(),()=>{A=!1}},[t]);const p=x.useMemo(()=>e.map(A=>({...A,status:l1(A.startAt,A.endAt)})),[e]),b=x.useMemo(()=>{const A={ongoing:[],upcoming:[],closed:[],all:[]};return p.forEach(S=>{A.all.push(S),A[S.status]&&A[S.status].push(S)}),A},[p]),y=x.useMemo(()=>Object.fromEntries(Ub.map(A=>[A,b[A]?.length||0])),[b]),v=A=>{m(A)},N=b[h]||[],D=d1[h]||"  .",C=`/classroom/student/${encodeURIComponent(t||"")}`;return s.jsxs("section",{className:"container py-4",children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("h1",{className:"h3 mb-0",children:""}),s.jsx("p",{className:"text-muted small mb-0",children:"       ."})]}),d&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:d}),s.jsx("ul",{className:"nav nav-tabs mb-0",role:"tablist",children:Ub.map(A=>{const S=c1[A]||"secondary";return s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:`nav-link ${h===A?"active":""}`,type:"button",role:"tab","aria-selected":h===A,onClick:()=>v(A),children:[o1[A]," ",s.jsx("span",{className:`badge text-bg-${S} ms-1`,children:y[A]})]})},A)})}),s.jsx("div",{className:"tab-content border border-top-0 rounded-bottom p-3",children:s.jsx("div",{id:`pane-${h}`,className:"tab-pane fade show active p-0",role:"tabpanel","aria-labelledby":`tab-${h}`,children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"30%"},children:""}),s.jsx("th",{style:{width:"10%"},children:""}),s.jsx("th",{style:{width:"20%"},children:" "}),s.jsx("th",{style:{width:"10%"},children:""}),s.jsx("th",{style:{width:"10%"},children:" "}),s.jsx("th",{style:{width:"10%"},children:" "}),s.jsx("th",{style:{width:"10%"},className:"text-center",children:""})]})}),s.jsx("tbody",{children:i?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:" ..."})}):N.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:D})}):N.sort((A,S)=>{const M=A.startAt?new Date(A.startAt).getTime():0;return(S.startAt?new Date(S.startAt).getTime():0)-M}).map(A=>{const S=`${Jh(A.startAt)} ~ ${Jh(A.endAt)}`;return s.jsxs("tr",{children:[s.jsxs("td",{children:[s.jsx("div",{className:"fw-semibold",children:A.examName}),s.jsxs("div",{className:"text-muted small",children:[" ",Jh(A.createAt)]})]}),s.jsx("td",{children:r1[A.examType]||""}),s.jsx("td",{className:"text-muted small",children:S}),s.jsx("td",{children:Number.isFinite(Number(A.weightValue))?`${A.weightValue}%`:"-"}),s.jsx("td",{children:i1(A.status)}),s.jsx("td",{children:A.submitted?s.jsx("span",{className:"badge text-bg-success",children:" "}):s.jsx("span",{className:"badge text-bg-secondary",children:""})}),s.jsx("td",{className:"text-center",children:s.jsx(st,{className:"btn btn-sm btn-outline-primary",to:`${C}/exam/${encodeURIComponent(A.lctExamId)}`,children:""})})]},A.lctExamId)})})]})})})})]})}const Nc=t=>String(t).padStart(2,"0"),sd=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?"-":`${e.getFullYear()}-${Nc(e.getMonth()+1)}-${Nc(e.getDate())} ${Nc(e.getHours())}:${Nc(e.getMinutes())}`},h1=(t,e)=>{const a=sd(t),i=sd(e);return a==="-"&&i==="-"?"-":i==="-"?a:`${a} ~ ${i}`},m1=t=>t==="OFF"?"":t==="ON"?"":t||" ";function f1(){const{lectureId:t,examId:e}=ht(),[a,i]=x.useState(null),[o,d]=x.useState(!0),[u,h]=x.useState("");x.useEffect(()=>{let A=!0;return(async()=>{if(!t||!e){h("    ."),d(!1);return}try{d(!0),h("");const M=await fetch(`/classroom/api/v1/student/${encodeURIComponent(t)}/exam/${encodeURIComponent(e)}`,{headers:{Accept:"application/json"},credentials:"include"});if(!M.ok){const z=await M.text().catch(()=>"");throw new Error(z||`(${M.status})    .`)}const F=await M.json();if(!A)return;i(F||null)}catch(M){if(!A)return;h(M instanceof Error?M.message:"     ."),i(null)}finally{A&&d(!1)}})(),()=>{A=!1}},[t,e]);const m=x.useMemo(()=>!a?.submitList||!Array.isArray(a.submitList)?null:(a.submitList.find(S=>S?.submit)||a.submitList[0])?.submit||null,[a]),p=m?.submitAt?sd(m.submitAt):null,b=m?.autoScore,y=m?.modifiedScore,v=y??b,N=typeof y=="number"&&!Number.isNaN(y)&&y!==b,D=`/classroom/student/${encodeURIComponent(t||"")}/exam`,C=()=>o?s.jsxs("div",{className:"text-center text-muted py-4",children:[s.jsx("div",{className:"spinner-border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})}),s.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):a?s.jsxs("dl",{className:"row mb-0",children:[s.jsx("dd",{className:"col-sm-12 fs-3 fw-bold",children:a.examName||"-"}),s.jsx("dt",{className:"col-sm-2",children:""}),s.jsx("dd",{className:"col-sm-10",children:sd(a.createAt||a.createdAt)}),s.jsx("dt",{className:"col-sm-2",children:""}),s.jsx("dd",{className:"col-sm-10",children:m1(a.examType)}),s.jsx("dt",{className:"col-sm-2",children:" "}),s.jsx("dd",{className:"col-sm-10",children:a.examDesc||a.notice||"-"}),s.jsx("dt",{className:"col-sm-2",children:" "}),s.jsx("dd",{className:"col-sm-10",children:h1(a.startAt,a.endAt)}),s.jsx("dt",{className:"col-sm-2",children:" "}),s.jsxs("dd",{className:"col-sm-10",children:[typeof a.weightValue=="number"?a.weightValue:"-","%"]})]}):s.jsx("div",{className:"text-center py-4",children:"   ."});return s.jsxs("section",{id:"student-exam-detail-root",className:"container py-0","data-lecture-id":t,"data-exam-id":e,children:[s.jsx("div",{className:"d-flex align-items-center justify-content-end mb-3",children:s.jsx(st,{to:D,className:"btn btn-sm btn-outline-secondary",children:""})}),u?s.jsx("div",{className:"alert alert-danger",role:"alert",children:u}):null,s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"mb-4",style:{width:"60%"},children:s.jsxs("div",{className:"card shadow p-0",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"h5 mb-0",children:" "})}),s.jsx("div",{className:"card-body p-3",id:"exam-info-body",children:C()})]})}),s.jsx("div",{className:"mb-4",style:{width:"40%"},children:s.jsxs("div",{className:"card shadow p-0",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"h5 mb-0",children:"  "})}),s.jsx("div",{className:"card-body p-3",children:o?s.jsxs("div",{className:"text-center text-muted py-4",children:[s.jsx("div",{className:"spinner-border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})}),s.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):m?s.jsxs("dl",{className:"row mb-0 fs-5",children:[s.jsx("dt",{className:"col-sm-4",children:""}),s.jsx("dd",{className:"col-sm-8",children:p||"  "}),s.jsx("dt",{className:"col-sm-4",children:""}),s.jsxs("dd",{className:"col-sm-8",children:[typeof v=="number"?`${v}/100`:"  ",N&&typeof b=="number"&&s.jsxs("span",{className:"text-muted small d-block",children:["( ",b,"/100)"]})]}),N&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"col-sm-5",children:"  "}),s.jsx("dd",{className:"col-sm-7",children:m.modifyReason||"  ."})]})]}):s.jsx("div",{className:"text-center text-muted py-4",children:"  ."})})]})})]})]})}const ut={breadcrumbLabel:"",detailLabel:"",back:"",taskLoading:" ...",taskLoadFailed:"   .",attachments:"",submitStatus:" ",submitHistoryLoading:"   ...",submitNotFound:"  .",submitButtonNew:"",submitButtonEdit:" ",formTitleNew:" ",formTitleEdit:" ",formDescription:"",formFiles:" ",existingFiles:"  ",newFiles:"  ",fileGuide:"      .",submit:"",cancel:"",scoreLabel:"",feedbackLabel:" ",evaluatedAtLabel:"",submittedAtLabel:"",descriptionLabel:" ",noFiles:"  .",download:"",uploadSuccess:" .",uploadError:"  .",submitSuccess:" .",submitError:"    .",invalidLecture:"      .",fileLimit:" 5   ."},Ur=t=>String(t).padStart(2,"0"),Fb=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?"-":`${e.getFullYear()}-${Ur(e.getMonth()+1)}-${Ur(e.getDate())}`},Hb=t=>{if(!t)return"-";const e=new Date(t);if(Number.isNaN(e.getTime()))return"-";let a=e.getHours();const i=a>=12?"PM":"AM";return a=a%12,a=a||12,`${e.getFullYear()}-${Ur(e.getMonth()+1)}-${Ur(e.getDate())} ${i} ${a}:${Ur(e.getMinutes())}`},p1=t=>{const e=t.bundleId||t.fileId||Array.isArray(t.fileIds)&&t.fileIds[0]||Array.isArray(t.files)&&t.files[0]?.fileId||Array.isArray(t.details)&&t.details[0]?.fileId||"",a=Array.isArray(t.files)&&t.files||Array.isArray(t.details)&&t.details||[];return{fileId:e||"",details:a}},g1=(t,e,a)=>`/classroom/api/v1/common/task/${encodeURIComponent(t)}/indiv/${encodeURIComponent(e)}/attach/${encodeURIComponent(String(a))}`,x1=(t,e,a,i)=>a?`/classroom/api/v1/common/${encodeURIComponent(t)}/indivtask/${encodeURIComponent(e)}/submit/${encodeURIComponent(a)}/attach/${encodeURIComponent(String(i))}`:"#";function b1(){const{lectureId:t,indivtaskId:e}=ht(),a=t||"",i=e||"",[o,d]=x.useState(null),[u,h]=x.useState(null),[m,p]=x.useState(!0),[b,y]=x.useState(""),[v,N]=x.useState(!1),[D,C]=x.useState(""),[A,S]=x.useState(""),[M,F]=x.useState([]),[z,K]=x.useState([]),[R,w]=x.useState(!1),[_,B]=x.useState(""),[T,U]=x.useState(""),[V,q]=x.useState(""),H=x.useRef(null),E=encodeURIComponent(a),L=encodeURIComponent(i),$=x.useMemo(()=>!a||!i?null:`/classroom/api/v1/student/${E}/task/indiv/${L}`,[a,i,E,L]),O=x.useMemo(()=>{if(!o?.studentSubmitList||o.studentSubmitList.length===0)return null;const me=[...o.studentSubmitList].sort(($e,se)=>{const ue=$e.submitAt?new Date($e.submitAt).getTime():0,te=se.submitAt?new Date(se.submitAt).getTime():0;return ue-te});return me[me.length-1]},[o]),Q=x.useCallback(async()=>{if(!$){y(ut.invalidLecture),p(!1);return}try{p(!0),y("");const[me,$e]=await Promise.all([fetch($,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/student/${E}/me`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!me.ok){const te=await me.text().catch(()=>"");throw new Error(`(${me.status}) ${te||ut.taskLoadFailed}`)}if(!$e.ok){const te=await $e.text().catch(()=>"");throw new Error(`(${$e.status}) ${te||ut.taskLoadFailed}`)}const se=await me.json(),ue=await $e.json();d(se),h(ue)}catch(me){y(me instanceof Error?me.message:ut.taskLoadFailed),d(null)}finally{p(!1)}},[$,E]);x.useEffect(()=>{Q()},[Q]);const Z=()=>{if(B(""),U(""),q(""),O){C(O.submitDesc||"");const me=Array.isArray(O.submitFiles)&&O.submitFiles[0]?.fileId||"";S(me),F(Array.isArray(O.submitFiles)?O.submitFiles:[])}else C(""),S(""),F([]);K([]),H.current&&(H.current.value=""),N(!0)},k=()=>{N(!1),U(""),B(""),q(""),K([]),H.current&&(H.current.value="")},W=()=>{const me=new Date,$e=String(me.getMonth()+1).padStart(2,"0"),se=String(me.getDate()).padStart(2,"0");C(`${$e} ${se} `)},P=async me=>{const $e=Array.from(me.target.files||[]);if(U(""),B(""),$e.length!==0){if(!a){U(ut.invalidLecture);return}if($e.length>5){U(ut.fileLimit),me.target.value="";return}try{w(!0);const se=new FormData;$e.forEach(He=>se.append("files",He));const ue=`/classroom/api/v1/common/${E}/upload?type=task`,te=await fetch(ue,{method:"POST",body:se,credentials:"include"});if(!te.ok){const He=await te.text().catch(()=>"");throw new Error(He||ut.uploadError)}const oe=await te.json(),{fileId:we,details:_e}=p1(oe);S(we),K(_e),B(ut.uploadSuccess),F([])}catch(se){U(se instanceof Error?se.message:ut.uploadError)}finally{w(!1),me.target&&(me.target.value="")}}},G=async me=>{if(me.preventDefault(),!$){U(ut.invalidLecture);return}try{w(!0),U(""),B("");const se=await fetch($,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({submitDesc:D,submitFileId:A||null})});if(se.status!==204){const ue=await se.text().catch(()=>"");throw new Error(ue||ut.submitError)}B(ut.submitSuccess),q(ut.submitSuccess),N(!1),K([]),H.current&&(H.current.value=""),await Q()}catch($e){U($e instanceof Error?$e.message:ut.submitError)}finally{w(!1)}},Y=!!(o?.attachFileList&&o.attachFileList.length>0),ee=x.useMemo(()=>o?.endAt?new Date(o.endAt).getTime()<Date.now():!1,[o]),xe=x.useMemo(()=>!!O?.submitAt,[O])?ut.submitButtonEdit:ut.submitButtonNew;return s.jsxs("section",{id:"indivtask-post-root",className:"container-fluid",style:{display:"flex",flexDirection:"column",padding:"1rem",maxHeight:"100vh"},children:[s.jsx("div",{style:{display:"flex",flexDirection:"row",gap:"0.75rem",height:"70vh",minHeight:0},children:m?s.jsx("div",{className:"card shadow-sm",style:{flex:1},children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"d-flex align-items-start flex-wrap mb-2",children:[s.jsx("span",{className:"badge skeleton",style:{width:64,height:22}}),s.jsx("span",{className:"badge skeleton ms-2",style:{width:56,height:22}})]}),s.jsx("h1",{className:"h4 mb-3 skeleton",style:{width:"60%",height:"1.5rem"}}),s.jsxs("div",{className:"d-flex flex-wrap meta-list mb-3",children:[s.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),s.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),s.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}})]}),s.jsx("hr",{className:"my-3"}),s.jsx("article",{className:"task-content mb-4",children:s.jsx("div",{className:"skeleton",style:{height:"8rem"}})})]})}):b?s.jsx("div",{className:"alert alert-danger",role:"alert",children:b}):o?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"card shadow-sm",style:{flex:"3",minHeight:0,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("span",{className:"badge text-bg-primary",children:""}),s.jsx("h1",{className:"h5 mb-0",children:!m&&o?o.indivtaskName:" "})]}),!m&&o&&s.jsxs("div",{className:"d-flex gap-3 small text-nowrap",children:[s.jsxs("span",{className:"small",children:[": ",s.jsx("span",{className:"fw-bold text-primary",children:Fb(o.startAt)})]}),s.jsxs("span",{className:"small",children:[": ",s.jsx("span",{className:"fw-bold text-danger",children:Fb(o.endAt)})]})]})]}),s.jsx("div",{className:"card-body",style:{overflow:"auto",flex:1,display:"flex",flexDirection:"column"},children:s.jsx("article",{className:"task-content mb-4",dangerouslySetInnerHTML:{__html:o.indivtaskDesc||"( )"}})}),Y&&s.jsxs("div",{className:"card-footer",id:"attach-area",children:[s.jsx("h2",{className:"h6 mb-2",children:ut.attachments}),s.jsx("ul",{className:"list-group list-group-flush",id:"attach-list",children:o.attachFileList.map((me,$e)=>{const se=me.originalFileName||me.originName||` ${me.fileOrder??$e+1}`,ue=typeof me.fileSize=="number"?` (${(me.fileSize/1024).toFixed(2)} KB)`:"",te=g1(a,i,me.fileOrder??$e+1);return s.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[s.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[s.jsx("i",{className:"bi bi-paperclip me-1"}),se,s.jsx("small",{className:"text-muted",children:ue})]}),s.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:te,children:ut.download})]},`task-attach-${me.fileOrder??$e}`)})})]})]}),s.jsxs("div",{className:"card shadow-sm",style:{flex:"2",minHeight:0,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[s.jsx("h2",{className:"h5 mb-0",children:ut.submitStatus}),!v&&s.jsx("button",{type:"button",id:"show-submit-form-btn",className:ee?"attendance-btn attendance-btn-default":"attendance-btn attendance-btn-save",onClick:Z,disabled:m||R,style:{minWidth:"100px"},children:xe}),v&&s.jsx("button",{type:"button",className:"btn-close",onClick:k,"aria-label":"Close"})]}),!v&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"card-body",id:"submission-history-body",style:{overflow:"auto",flex:1},children:[V&&s.jsx("div",{className:"alert alert-success",role:"alert",children:V}),m&&s.jsx("p",{className:"text-muted",children:ut.submitHistoryLoading}),!m&&!O&&s.jsx("div",{className:"text-center p-4",children:s.jsx("p",{className:"text-muted",children:ut.submitNotFound})}),!m&&O&&s.jsxs("div",{children:[s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-3",children:ut.submittedAtLabel}),s.jsx("dd",{className:"col-sm-9",children:Hb(O.submitAt)}),s.jsx("dt",{className:"col-sm-3",children:ut.descriptionLabel}),s.jsx("dd",{className:"col-sm-9",children:O.submitDesc||"-"})]}),s.jsx("h6",{className:"mt-3 mb-2",children:ut.attachments}),s.jsx("ul",{className:"list-group",children:Array.isArray(O.submitFiles)&&O.submitFiles.length>0?O.submitFiles.map((me,$e)=>{const se=me.originalFileName||me.originName||` ${me.fileOrder??$e+1}`,ue=typeof me.fileSize=="number"?` (${(me.fileSize/1024).toFixed(2)} KB)`:"",te=x1(a,i,u?.studentNo,me.fileOrder??$e+1);return s.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[s.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[s.jsx("i",{className:"bi bi-paperclip me-1"}),se,s.jsx("small",{className:"text-muted",children:ue})]}),s.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:te,children:ut.download})]},`submit-file-${me.fileOrder??$e}`)}):s.jsx("li",{className:"list-group-item text-muted",children:ut.noFiles})})]})]}),!m&&O?.evaluAt&&s.jsxs("div",{className:"card-footer bg-success-subtle",children:[s.jsx("h2",{className:"h6 mb-2 text-success-emphasis",children:" "}),s.jsxs("dl",{className:"row mb-0",children:[s.jsx("dt",{className:"col-sm-3",children:ut.scoreLabel}),s.jsx("dd",{className:"col-sm-9 fw-bold",children:O.evaluScore??"-"}),s.jsx("dt",{className:"col-sm-3",children:ut.feedbackLabel}),s.jsx("dd",{className:"col-sm-9",children:O.evaluDesc||"-"}),s.jsx("dt",{className:"col-sm-3 text-muted",children:ut.evaluatedAtLabel}),s.jsx("dd",{className:"col-sm-9 text-muted",children:Hb(O.evaluAt)})]})]})]}),v&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"card-body",id:"submission-form-body",style:{overflow:"auto",flex:1},children:[T&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:T}),_&&s.jsx("div",{className:"alert alert-success",role:"alert",children:_}),s.jsxs("form",{id:"submit-form",onSubmit:G,children:[s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[s.jsx("label",{htmlFor:"submit-desc",className:"form-label mb-0",children:ut.formDescription}),s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:W,disabled:R,children:""})]}),s.jsx("textarea",{className:"form-control",id:"submit-desc",rows:4,placeholder:"   .",value:D,onChange:me=>C(me.target.value)})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"submit-file-input",className:"form-label",children:ut.formFiles}),M.length>0&&z.length===0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"form-label text-muted small",children:ut.existingFiles}),s.jsx("ul",{className:"list-group",children:M.map((me,$e)=>{const se=me.originalFileName||me.originName||` ${me.fileOrder??$e+1}`,ue=typeof me.fileSize=="number"?` (${(me.fileSize/1024).toFixed(2)} KB)`:"";return s.jsxs("li",{className:"list-group-item list-group-item-light d-flex justify-content-between align-items-center",children:[s.jsx("span",{children:se}),s.jsx("small",{className:"text-muted",children:ue})]},`existing-${me.fileOrder??$e}`)})})]}),z.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{className:"form-label text-muted small",children:ut.newFiles}),s.jsx("ul",{className:"list-group",children:z.map((me,$e)=>{const se=me.originalName||me.originName||me.originalFileName||` ${me.fileOrder??$e+1}`,ue=typeof me.fileSize=="number"?` (${(me.fileSize/1024).toFixed(2)} KB)`:"";return s.jsxs("li",{className:"list-group-item list-group-item-light d-flex justify-content-between align-items-center",children:[s.jsx("span",{children:se}),s.jsx("small",{className:"text-muted",children:ue})]},`uploaded-${me.fileId??$e}`)})})]}),s.jsx("input",{className:"form-control",type:"file",id:"submit-file-input",ref:H,multiple:!0,onChange:P,disabled:R}),s.jsx("div",{className:"form-text",children:ut.fileGuide})]})]})]}),s.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",id:"cancel-submit-btn",className:"attendance-btn attendance-btn-default",onClick:k,disabled:R,style:{minWidth:"100px"},children:ut.cancel}),s.jsx("button",{type:"submit",className:"attendance-btn attendance-btn-save",id:"submit-button",disabled:R,form:"submit-form",style:{minWidth:"100px"},children:R?ut.taskLoading:ut.submit})]})]})]})]}):null}),b&&s.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:b})]})}const Ir=[{key:"all",label:""},{key:"ongoing",label:""},{key:"closed",label:""}],mi=10,kr=()=>({all:[],ongoing:[],closed:[]}),wc=()=>({all:1,ongoing:1,closed:1}),Pb=t=>String(t).padStart(2,"0"),Vb=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?"-":`${e.getFullYear()}-${Pb(e.getMonth()+1)}-${Pb(e.getDate())}`},y1=t=>{const e=Date.now(),a=t.startAt?new Date(t.startAt).getTime():null,i=t.endAt?new Date(t.endAt).getTime():null;return a&&a>e?"upcoming":i&&i<e?"closed":"ongoing"},v1=t=>({type:"indiv",id:t.indivtaskId,name:t.indivtaskName,createAt:t.createAt,startAt:t.startAt,endAt:t.endAt,hasAttachFile:!!t.hasAttachFile,submitted:!!t.submitted}),j1=t=>({type:"group",id:t.grouptaskId,name:t.grouptaskName,createAt:t.createAt,startAt:t.startAt,endAt:t.endAt,hasAttachFile:!!t.hasAttachFile,submitted:!!t.submitted,target:!!t.target}),N1=t=>{const[e,a]=x.useState(!0),[i,o]=x.useState(""),[d,u]=x.useState(kr),[h,m]=x.useState(kr);return x.useEffect(()=>{let p=!0;return(async()=>{if(!t){o("    ."),a(!1);return}try{a(!0),o("");const y={headers:{Accept:"application/json"},credentials:"include"},v=`/classroom/api/v1/student/${encodeURIComponent(t)}/task`,[N,D]=await Promise.all([fetch(`${v}/indiv`,y),fetch(`${v}/group`,y)]);if(!p)return;if(!N.ok)throw new Error(`(${N.status})    .`);if(!D.ok)throw new Error(`(${D.status})    .`);const C=await N.json().catch(()=>[]),A=await D.json().catch(()=>[]);if(!p)return;const S=(M,F)=>{const z=(Array.isArray(M)?M:[]).map(F);z.sort((R,w)=>{const _=R.createAt?new Date(R.createAt).getTime():0;return(w.createAt?new Date(w.createAt).getTime():0)-_});const K=kr();for(const R of z){const w=y1(R);K.all.push(R),K[w]&&K[w].push(R)}return K};u(()=>S(C,v1)),m(()=>S(A,j1))}catch(y){if(!p)return;o(y instanceof Error?y.message:"    ."),u(kr),m(kr)}finally{p&&a(!1)}})(),()=>{p=!1}},[t]),{loading:e,error:i,indivBuckets:d,groupBuckets:h}},Yb=({totalCount:t,pageSize:e,currentPage:a,onChange:i,label:o})=>{const d=Math.max(1,Math.ceil(t/e));if(d<=1)return null;const u=[],h=(m,p,b=!1,y=!1,v)=>{u.push(s.jsx("li",{className:`page-item${b?" disabled":""}${y?" active":""}`,children:s.jsx("button",{type:"button",className:"page-link",onClick:()=>{b||i(m)},children:p})},v??p))};h(Math.max(1,a-1),"",a===1,!1,"prev");for(let m=1;m<=d;m+=1)h(m,String(m),!1,m===a);return h(Math.min(d,a+1),"",a===d,!1,"next"),s.jsx("nav",{className:"mt-3","aria-label":o,children:s.jsx("ul",{className:"pagination pagination-sm mb-0",children:u})})},qb=({lectureId:t,tasks:e,loading:a})=>a?s.jsx("div",{className:"text-muted p-3 text-center",children:" ..."}):!e||e.length===0?s.jsx("div",{className:"text-muted p-3 text-center",children:"  ."}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"table-light",children:[s.jsx("th",{children:""}),s.jsx("th",{className:"text-center",style:{width:"100px"},children:" "}),s.jsx("th",{className:"text-center d-none d-md-table-cell",style:{width:"120px"},children:" "})]})}),s.jsx("tbody",{children:e.map(i=>{const o=`/classroom/student/${encodeURIComponent(t||"")}/task/${i.type}/${encodeURIComponent(i.id)}`;return s.jsxs("tr",{children:[s.jsx("td",{className:"align-middle",style:{width:"250px",overflow:"hidden",textOverflow:"ellipsis"},children:s.jsx(st,{to:o,className:"text-decoration-none d-block",children:s.jsx("div",{className:"fw-bold text-primary",children:i.name||"-"})})}),s.jsx("td",{className:"align-middle text-center",style:{width:"100px"},children:i.type==="group"&&i.target===!1?s.jsx("span",{className:"badge bg-secondary",children:""}):s.jsx("span",{className:`badge ${i.submitted?"":"bg-secondary"}`,style:i.submitted?{backgroundColor:"#198754",color:"white"}:{},children:i.submitted?" ":""})}),s.jsxs("td",{className:"align-middle text-center d-none d-md-table-cell text-nowrap small",style:{width:"120px"},children:[s.jsx("div",{children:Vb(i.startAt)}),s.jsxs("div",{children:["~ ",Vb(i.endAt)]})]})]},`${i.type}-${i.id}`)})})]})}),Gb=({scope:t,activeKey:e,onChange:a,counts:i})=>s.jsx("ul",{className:"nav nav-pills mb-3",id:`${t}-status-tabs`,role:"tablist",children:Ir.map(o=>{const d=o.key==="all"?"bg-primary":o.key==="ongoing"?"bg-success":o.key==="closed"?"bg-danger":"bg-secondary";return s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:`nav-link${e===o.key?" active":""}`,id:`${t}-${o.key}-tab`,type:"button",role:"tab","aria-selected":e===o.key,onClick:()=>a(o.key),children:[o.label,s.jsx("span",{className:`badge rounded-pill ${d} ms-1 ${o.key==="ongoing"?"text-white":""}`,id:`${t}-count-${o.key}`,style:{minWidth:"30px"},children:i[o.key]??0})]})},o.key)})});function w1(){const{lectureId:t}=ht(),{loading:e,error:a,indivBuckets:i,groupBuckets:o}=N1(t),[d,u]=x.useState("ongoing"),[h,m]=x.useState("ongoing"),[p,b]=x.useState(wc),[y,v]=x.useState(wc);x.useEffect(()=>{b(wc()),v(wc()),u(i.ongoing.length>0?"ongoing":"all"),m(o.ongoing.length>0?"ongoing":"all")},[t,i.ongoing.length,o.ongoing.length]);const N=x.useMemo(()=>Ir.reduce((F,z)=>(F[z.key]=i[z.key]?.length??0,F),{}),[i]),D=x.useMemo(()=>Ir.reduce((F,z)=>(F[z.key]=o[z.key]?.length??0,F),{}),[o]),C=x.useMemo(()=>{const F=i[d]??[],K=((p[d]??1)-1)*mi;return F.slice(K,K+mi)},[i,d,p]),A=x.useMemo(()=>{const F=o[h]??[],K=((y[h]??1)-1)*mi;return F.slice(K,K+mi)},[o,h,y]),S=F=>{u(F),b(z=>({...z,[F]:1}))},M=F=>{m(F),v(z=>({...z,[F]:1}))};return s.jsxs("section",{id:"task-root",className:"container py-4","data-lecture-id":t||"","data-api":`/classroom/api/v1/student/${encodeURIComponent(t||"")}/task`,children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("h1",{className:"h3 mb-0",children:""}),s.jsx("p",{className:"text-muted small mb-0",children:"       ."})]}),s.jsxs("div",{className:"row g-4 align-items-start",children:[s.jsx("div",{className:"col-12 col-xl-6",children:s.jsxs("div",{className:"card shadow-sm",children:[s.jsx("div",{className:"card-header d-flex align-items-center justify-content-between",children:s.jsx("h2",{className:"h5 mb-0",children:" "})}),s.jsxs("div",{className:"card-body",children:[s.jsx(Gb,{scope:"indiv",activeKey:d,onChange:S,counts:N}),s.jsx("div",{className:"tab-content",id:"indiv-status-content",children:Ir.map(F=>{const z=d===F.key,K=`indiv-${F.key}`,R=p[F.key]??1;return s.jsx("div",{id:K,role:"tabpanel","aria-labelledby":`${K}-tab`,className:`tab-pane fade${z?" show active":""}`,children:z?s.jsxs(s.Fragment,{children:[s.jsx(qb,{lectureId:t,tasks:C,loading:e}),s.jsx(Yb,{totalCount:N[F.key]||0,pageSize:mi,currentPage:R,onChange:w=>b(_=>({..._,[F.key]:w})),label:"    "})]}):null},F.key)})})]})]})}),s.jsx("div",{className:"col-12 col-xl-6",children:s.jsxs("div",{className:"card shadow-sm",children:[s.jsx("div",{className:"card-header d-flex align-items-center justify-content-between",children:s.jsx("h2",{className:"h5 mb-0",children:" "})}),s.jsxs("div",{className:"card-body",children:[s.jsx(Gb,{scope:"group",activeKey:h,onChange:M,counts:D}),s.jsx("div",{className:"tab-content",id:"group-status-content",children:Ir.map(F=>{const z=h===F.key,K=`group-${F.key}`,R=y[F.key]??1;return s.jsx("div",{id:K,role:"tabpanel","aria-labelledby":`${K}-tab`,className:`tab-pane fade${z?" show active":""}`,children:z?s.jsxs(s.Fragment,{children:[s.jsx(qb,{lectureId:t,tasks:A,loading:e}),s.jsx(Yb,{totalCount:D[F.key]||0,pageSize:mi,currentPage:R,onChange:w=>v(_=>({..._,[F.key]:w})),label:"    "})]}):null},F.key)})})]})]})})]}),a&&s.jsx("div",{id:"task-notice-box",className:"alert alert-danger mt-3",role:"alert",children:a})]})}const xi=t=>String(t).padStart(2,"0"),Xb=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?"-":`${e.getFullYear()}-${xi(e.getMonth()+1)}-${xi(e.getDate())}`},em=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?"-":`${e.getFullYear()}-${xi(e.getMonth()+1)}-${xi(e.getDate())} ${xi(e.getHours())}:${xi(e.getMinutes())}`};function S1(){const{lectureId:t,grouptaskId:e}=ht(),{students:a,setStudents:i}=ds(),[o,d]=x.useState(null),[u,h]=x.useState(null),[m,p]=x.useState(null),[b,y]=x.useState(Array.isArray(a)?a:[]),[v,N]=x.useState(!0),[D,C]=x.useState(!0),[A,S]=x.useState(""),[M,F]=x.useState(!1),[z,K]=x.useState(0),[R,w]=x.useState(!1),[_,B]=x.useState(""),[T,U]=x.useState(""),[V,q]=x.useState([]),[H,E]=x.useState(!1),[L,$]=x.useState(""),[O,Q]=x.useState(""),Z=x.useRef(null),k=t?encodeURIComponent(t):"",W=e?encodeURIComponent(e):"",P=be=>{const qe=be.bundleId||be.fileId||Array.isArray(be.fileIds)&&be.fileIds[0]||Array.isArray(be.files)&&be.files[0]?.fileId||Array.isArray(be.details)&&be.details[0]?.fileId||"",de=Array.isArray(be.files)&&be.files||Array.isArray(be.details)&&be.details||[];return{fileId:qe,details:de}};x.useEffect(()=>{let be=!0;return(async()=>{if(!t||!e){S("    ."),N(!1);return}try{N(!0),S("");const de=encodeURIComponent(t),Ne=encodeURIComponent(e),[De,Ue]=await Promise.all([fetch(`/classroom/api/v1/student/${de}/task/group/${Ne}`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/student/${de}/me`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!De.ok){const et=await De.text().catch(()=>"");throw new Error(et||`(${De.status})    .`)}const Xe=await De.json(),Ge=Ue.ok?await Ue.json():null;if(!be)return;d(Xe||null),h(Ge||null)}catch(de){if(!be)return;S(de instanceof Error?de.message:"     ."),d(null)}finally{be&&N(!1)}})(),()=>{be=!1}},[t,e,z]),x.useEffect(()=>{let be=!0;return(async()=>{if(!t||!e){C(!1);return}try{C(!0);const de=encodeURIComponent(t),Ne=encodeURIComponent(e),De=await fetch(`/classroom/api/v1/student/${de}/task/group/${Ne}/jo`,{headers:{Accept:"application/json"},credentials:"include"});if(!De.ok){if(De.status===404){if(!be)return;p(null);return}const Xe=await De.text().catch(()=>"");throw new Error(Xe||`(${De.status})    .`)}const Ue=await De.json();if(!be)return;p(Ue||null)}catch(de){if(!be)return;console.error(de),p(null)}finally{be&&C(!1)}})(),()=>{be=!1}},[t,e,z]),x.useEffect(()=>{if(Array.isArray(b)&&b.length>0)return;let be=!0;return(async()=>{if(t)try{F(!0);const de=await fetch(`/classroom/api/v1/student/${encodeURIComponent(t)}/students`,{headers:{Accept:"application/json"},credentials:"include"});if(!de.ok)return;const Ne=await de.json();if(!be)return;const De=Array.isArray(Ne)?Ne:[];y(De),i&&i(De)}finally{be&&F(!1)}})(),()=>{be=!1}},[t,b,i]);const G=x.useMemo(()=>new Map((b||[]).map(be=>[be.enrollId,be])),[b]),Y=u?.enrollId,ee=m?.leaderEnrollId,ae=x.useMemo(()=>m?.crewList?m.crewList.map(be=>{const qe=G.get(be.enrollId)||{},de=`${qe.lastName||""}${qe.firstName||""}`.trim()||qe.studentName||"-",Ne=qe.studentNo||"-";return{enrollId:be.enrollId,name:de,studentNo:Ne,isLeader:be.enrollId===ee,isSelf:be.enrollId===Y,evaluScore:be.evaluScore,evaluDesc:be.evaluDesc,evaluAt:be.evaluAt,initial:(de||"?").charAt(0)}}):[],[m,G,ee,Y]),xe={submitDesc:m?.submitDesc,submitFileId:m?.submitFileId,submitAt:m?.submitAt},me=Array.isArray(o?.attachFileList)?o.attachFileList:[],$e=xe?.submitDesc,se=xe?.submitAt?em(xe.submitAt):null,ue=!!(Y&&ee&&Y===ee),te="/classroom/api/v1/common/task",oe="/classroom/api/v1/student",we=(be,qe)=>{const de=be.fileOrder??qe;return`${te}/${encodeURIComponent(t)}/group/${encodeURIComponent(e)}/attach/${encodeURIComponent(de)}`},_e=xe?.submitFileId&&m?.groupId?`${oe}/${k}/task/group/${W}/submit/${encodeURIComponent(m.groupId)}`:null,He=`/classroom/student/${encodeURIComponent(t||"")}/task`;return s.jsxs("section",{className:"container py-4",id:"student-group-task-detail",children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("nav",{"aria-label":"breadcrumb",children:s.jsxs("ol",{className:"breadcrumb mb-0",children:[s.jsx("li",{className:"breadcrumb-item",children:s.jsx(st,{to:He,children:""})}),s.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:" "})]})}),s.jsx(st,{to:He,className:"btn btn-sm btn-outline-secondary",children:""})]}),A&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:A}),s.jsx("div",{className:"card shadow-sm mb-4",children:s.jsx("div",{className:"card-body",children:v?s.jsxs(s.Fragment,{children:[s.jsx("h1",{className:"h4 placeholder-glow",children:s.jsx("span",{className:"placeholder col-6"})}),s.jsxs("div",{className:"placeholder-glow d-flex gap-2 flex-wrap text-muted small mb-3",children:[s.jsx("span",{className:"placeholder col-3"}),s.jsx("span",{className:"placeholder col-3"}),s.jsx("span",{className:"placeholder col-3"})]})]}):o?s.jsxs(s.Fragment,{children:[s.jsx("h1",{className:"h4 mb-3",children:o.grouptaskName||"  "}),s.jsxs("div",{className:"d-flex flex-wrap gap-3 text-muted small mb-3",children:[s.jsxs("span",{children:[" ",em(o.createAt)]}),s.jsxs("span",{className:"text-nowrap small",children:["  ",Xb(o.startAt)," ~ ",Xb(o.endAt)]})]}),s.jsx("article",{className:"task-content mb-3",dangerouslySetInnerHTML:{__html:o.grouptaskDesc||'<p class="text-muted mb-0"> .</p>'}}),me.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h2",{className:"h6 mb-2",children:" "}),s.jsx("ul",{className:"list-group",children:me.map((be,qe)=>{const de=be.originalFileName||be.originName||` ${be.fileOrder??qe+1}`,Ne=typeof be.fileSize=="number"?`(${be.fileSize.toLocaleString()} Byte)`:"";return s.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[s.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[s.jsx("i",{className:"bi bi-paperclip me-2"}),de," ",s.jsx("small",{className:"text-muted",children:Ne})]}),s.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:we(be,qe),children:""})]},be.fileId||qe)})})]})]}):s.jsx("p",{className:"text-muted mb-0",children:"    ."})})}),s.jsxs("div",{className:"card shadow-sm mb-4",children:[s.jsx("div",{className:"card-header d-flex justify-content-between align-items-center",children:s.jsx("h2",{className:"h6 mb-0",children:"   "})}),s.jsx("div",{className:"card-body",children:D?s.jsx("p",{className:"text-muted placeholder-glow",children:s.jsx("span",{className:"placeholder col-3"})}):m?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"row g-3",children:[s.jsxs("div",{className:"col-12 col-md-4",children:[s.jsx("div",{className:"small text-muted",children:" "}),s.jsx("div",{children:m.groupName||"  "})]}),s.jsxs("div",{className:"col-12 col-md-4",children:[s.jsx("div",{className:"small text-muted",children:""}),s.jsx("div",{children:ae.find(be=>be.isLeader)?.name||"-"})]}),s.jsxs("div",{className:"col-12 col-md-4",children:[s.jsx("div",{className:"small text-muted",children:" "}),s.jsx("div",{children:xe?.submitAt?`  (${se})`:""})]})]}),s.jsx("hr",{className:"my-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"small text-muted mb-1",children:" "}),s.jsx("div",{className:"p-2 bg-body-secondary rounded",children:$e||s.jsx("span",{className:"text-muted",children:"  ."})})]}),_e&&s.jsx("div",{className:"mt-3",children:s.jsx("a",{className:"btn btn-sm btn-outline-primary",href:_e,children:"   "})})]}):s.jsx("p",{className:"text-muted mb-0",children:"     ."})})]}),ue&&m&&s.jsx("div",{className:"mb-4",children:s.jsx("button",{type:"button",className:"btn btn-sm btn-primary",onClick:()=>{Q(""),$(""),B($e||""),U(xe?.submitFileId||""),q([]),Z.current&&(Z.current.value=""),w(!0)},disabled:H,children:"/"})}),ue&&R&&s.jsxs("div",{className:"card shadow-sm mb-4",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"h6 mb-0",children:" "})}),s.jsxs("div",{className:"card-body",children:[O&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:O}),L&&s.jsx("div",{className:"alert alert-success",role:"alert",children:L}),s.jsxs("form",{onSubmit:async be=>{if(be.preventDefault(),!t||!e||!m?.groupId){Q("    .");return}try{E(!0),Q(""),$("");const qe={submitDesc:_||"",submitFileId:T||null},de=await fetch(`/classroom/api/v1/student/${k}/task/group/${W}`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(qe)});if(!de.ok){const Ne=await de.text().catch(()=>"");throw new Error(Ne||`(${de.status})   .`)}$(" ."),w(!1),K(Ne=>Ne+1)}catch(qe){Q(qe instanceof Error?qe.message:"    .")}finally{E(!1),q([]),Z.current&&(Z.current.value="")}},children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"group-submit-desc",className:"form-label",children:" "}),s.jsx("textarea",{id:"group-submit-desc",className:"form-control",rows:4,placeholder:"   .",value:_,onChange:be=>B(be.target.value),disabled:H})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"group-submit-file",className:"form-label",children:" "}),T&&V.length===0&&s.jsxs("div",{className:"alert alert-info small py-2",children:["   ID: ",T,s.jsx("br",{}),"      ."]}),V.length>0&&s.jsx("ul",{className:"list-group mb-2",children:V.map((be,qe)=>{const de=be.originalName||be.originName||be.originalFileName||` ${be.fileOrder??qe+1}`,Ne=typeof be.fileSize=="number"?` (${(be.fileSize/1024).toFixed(2)} KB)`:"";return s.jsxs("li",{className:"list-group-item",children:[de,s.jsx("small",{className:"text-muted",children:Ne})]},`${be.fileId||qe}`)})}),s.jsx("input",{id:"group-submit-file",className:"form-control",type:"file",multiple:!0,ref:Z,onChange:async be=>{const qe=Array.from(be.target.files||[]);if(qe.length){if(!t){Q("    .");return}if(qe.length>5){Q("  5   ."),be.target.value="";return}try{E(!0),Q(""),$("");const de=new FormData;qe.forEach(et=>de.append("files",et));const Ne=`/classroom/api/v1/common/${k}/upload?type=task`,De=await fetch(Ne,{method:"POST",body:de,credentials:"include"});if(!De.ok){const et=await De.text().catch(()=>"");throw new Error(et||`(${De.status})   .`)}const Ue=await De.json(),{fileId:Xe,details:Ge}=P(Ue);U(Xe||""),q(Ge),$(" .")}catch(de){Q(de instanceof Error?de.message:"    .")}finally{E(!1),be.target&&(be.target.value="")}}},disabled:H}),s.jsx("div",{className:"form-text",children:"      ."})]}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>{w(!1),Q(""),$(""),q([]),Z.current&&(Z.current.value="")},disabled:H,children:""}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:H,children:H?" ...":""})]})]})]})]}),s.jsxs("div",{className:"card shadow-sm",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"h6 mb-0",children:" "})}),s.jsx("div",{className:"card-body",children:D||M?s.jsx("p",{className:"text-muted placeholder-glow",children:s.jsx("span",{className:"placeholder col-4"})}):ae.length===0?s.jsx("p",{className:"text-muted mb-0",children:"    ."}):s.jsx("div",{className:"row g-3",children:ae.map(be=>s.jsx("div",{className:"col-12 col-md-6 col-lg-4",children:s.jsxs("div",{className:`member-card h-100 ${be.isSelf?"border-primary":""}`,children:[s.jsxs("div",{className:"d-flex align-items-center gap-3",children:[s.jsx("div",{className:"avatar-48 bg-light border d-flex align-items-center justify-content-center",children:be.initial}),s.jsxs("div",{children:[s.jsx("div",{className:"fw-semibold",children:be.name}),s.jsx("div",{className:"member-meta",children:be.studentNo}),be.isLeader&&s.jsx("span",{className:"badge text-bg-primary mt-2",children:""})]})]}),be.isSelf&&s.jsxs("div",{className:"evaluation-box mt-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"fw-semibold",children:"  :"})," ",typeof be.evaluScore=="number"?`${be.evaluScore}`:""]}),s.jsx("div",{className:"evaluation-note mt-2",children:be.evaluDesc||" ."}),s.jsxs("div",{className:"evaluation-note mt-2",children:[" : ",be.evaluAt?em(be.evaluAt):""]})]})]})},be.enrollId))})})]})]})}const Dt={breadcrumbBoard:"",breadcrumbCurrent:"",listButton:"",attachments:"",noContent:" .",replySectionTitle:"",replySortNewest:"",replySortOldest:"",replyPlaceholder:" .",replySubmit:"",replySubmitLoading:" ...",replyEmpty:"  .   .",replyLoading:"  ...",replyAlertEmpty:"  .",replyAlertInvalid:"   .",replySubmitSuccess:"",replySubmitFail:"  .",replyDelete:"",replyDeleteConfirm:" ?",replyDeleteSuccess:" .",replyDeleteFail:"  .",replyNoContent:" ",invalidParams:" . (lectureId/postId)",postLoadError:"    .",replyLoadError:"    ."},Sc={author:"",createdAt:"",revealAt:" ",viewCount:""},Cc=t=>String(t).padStart(2,"0"),tm=t=>{if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?String(t):`${e.getFullYear()}-${Cc(e.getMonth()+1)}-${Cc(e.getDate())} ${Cc(e.getHours())}:${Cc(e.getMinutes())}`},C1=t=>{if(!t)return"";if(!/[&<>"']/.test(t)||/<[^>]+>/.test(t))return t;const e=document.createElement("textarea");return e.innerHTML=t,e.value},A1=t=>{if(!t)return"";try{const a=new DOMParser().parseFromString(t,"text/html");return a.querySelectorAll("script, style, iframe, object, embed, link[rel='import']").forEach(i=>i.remove()),a.querySelectorAll("*").forEach(i=>{Array.from(i.attributes).forEach(o=>{/^on/i.test(o.name)&&i.removeAttribute(o.name)})}),a.body.innerHTML}catch(e){return console.warn("[StudentBoardPost] sanitize failed",e),t}},E1=t=>String(t??"").replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#39;"),T1=t=>{const e=E1(t||"");return e?e.replace(/\r?\n/g,"<br />"):""},k1=t=>{if(!Number.isFinite(t)||t<=0)return"";const e=1024,a=e*1024;if(t>=a){const o=t/a;return`${o>=10?Math.round(o):Math.round(o*10)/10} mb`}const i=t/e;return`${i>=10?Math.round(i):Math.round(i*10)/10} kb`},_1=t=>{if(!t)return"PUBLISHED";if(t.tempSaveYn==="Y")return"DRAFT";if(t.revealAt){const e=new Date(t.revealAt);if(!Number.isNaN(e.getTime())&&e.getTime()>Date.now())return"SCHEDULED"}return"PUBLISHED"},D1=({type:t})=>t==="NOTICE"?s.jsx("span",{className:"badge badge-type bg-warning text-dark border border-warning-subtle",children:""}):t==="MATERIAL"?s.jsx("span",{className:"badge badge-type bg-info text-dark border border-info-subtle",children:""}):s.jsx("span",{className:"badge badge-type text-bg-secondary",children:""}),M1=({status:t})=>{switch(t){case"DRAFT":return s.jsx("span",{className:"badge text-bg-secondary",children:""});case"SCHEDULED":return s.jsx("span",{className:"badge text-bg-primary",children:""});default:return s.jsx("span",{className:"badge text-bg-success",children:""})}},$a=t=>String(t?.lctReplyId||t?.replyId||t?.id||""),$1=t=>{if(!t)return"";if(t.parentReplyId)return t.parentReplyId;const e=t.parentReply||t.parent;return e?typeof e=="string"?e:typeof e=="object"&&(e.lctReplyId||e.replyId||e.id||e.parentReplyId)||"":""},Wb=t=>{if(t?.createAt||t?.createdAt){const a=Date.parse(t.createAt||t.createdAt);if(!Number.isNaN(a))return a}const e=Number(String(t?.lctReplyId||t?.replyId||t?.id||"").replace(/\D/g,""));return Number.isNaN(e)?0:e},R1=(t,e)=>{const a=Wb(t)-Wb(e);return a!==0?a:$a(t).localeCompare($a(e))};function L1(){const{lectureId:t,postId:e}=ht(),a=t||"",i=e||"",o=encodeURIComponent(a),d=encodeURIComponent(i),[u,h]=x.useState(null),[m,p]=x.useState(!0),[b,y]=x.useState(""),[v,N]=x.useState(null),[D,C]=x.useState(()=>new Map),[A,S]=x.useState([]),[M,F]=x.useState("desc"),[z,K]=x.useState(!1),[R,w]=x.useState(""),[_,B]=x.useState(""),[T,U]=x.useState({variant:"",message:""}),[V,q]=x.useState(!1),[H,E]=x.useState(""),L=x.useCallback(()=>{U({variant:"",message:""})},[]),$=x.useCallback(async()=>{if(!a||!i)throw new Error(Dt.invalidParams);const te=`/classroom/api/v1/student/board/${o}/post/${d}`,oe=await fetch(te,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!oe.ok)throw new Error(`${Dt.postLoadError} (HTTP ${oe.status})`);return oe.json()},[a,i,o,d]),O=x.useCallback(async()=>{if(!a)return null;const te=`/classroom/api/v1/common/${o}/professor`;try{const oe=await fetch(te,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!oe.ok)throw new Error(`HTTP ${oe.status}`);return oe.json()}catch(oe){return console.warn("[StudentBoardPost] professor info load failed",oe),null}},[a,o]),Q=x.useCallback(async()=>{const te=new Map;if(!a)return te;const oe=`/classroom/api/v1/student/${o}/students`;try{const we=await fetch(oe,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!we.ok)throw new Error(`HTTP ${we.status}`);const _e=await we.json();Array.isArray(_e)&&_e.forEach(He=>{if(!He)return;const be=String(He.userId||"").trim();be&&te.set(be,He)})}catch(we){console.warn("[StudentBoardPost] student roster load failed",we)}return te},[a,o]),Z=x.useCallback(async()=>{if(!a||!i)return S([]),w(Dt.replyLoadError),[];const te=`/classroom/api/v1/student/board/${o}/post/${d}/reply`;try{K(!0),w("");const oe=await fetch(te,{headers:{Accept:"application/json"},credentials:"same-origin"});if(!oe.ok)throw new Error(`HTTP ${oe.status}`);const we=await oe.json(),_e=Array.isArray(we)?we:[];return S(_e),_e}catch(oe){return console.error("[StudentBoardPost] reply load error",oe),S([]),w(Dt.replyLoadError),[]}finally{K(!1)}},[a,i,o,d]);x.useEffect(()=>{if(!a||!i){h(null),y(Dt.invalidParams),p(!1);return}let te=!1;return(async()=>{try{p(!0),y("");const oe=await $();te||h(oe)}catch(oe){te||(h(null),y(oe.message||Dt.postLoadError))}finally{te||p(!1)}})(),()=>{te=!0}},[a,i,$]),x.useEffect(()=>{let te=!1;return(async()=>{const[oe,we]=await Promise.all([O(),Q()]);te||(N(oe),C(new Map(we)))})(),()=>{te=!0}},[O,Q]),x.useEffect(()=>{let te=!1;return(async()=>await Z())(),()=>{te=!0}},[Z]);const k=x.useMemo(()=>{if(!u)return[];const te=u.attachFileList||u.attachFiles||u.attachments||u.files||[];return Array.isArray(te)?te.map((oe,we)=>{const _e=` ${oe?.fileOrder||we+1}`,He=oe?.originName||oe?.originalFilename||oe?.originalFileName||oe?.fileName||oe?.fileNm||_e,be=String(oe?.extension||oe?.fileExtension||"").replace(/^\./,"");let qe=typeof He=="string"?He:String(He??_e);be&&typeof qe=="string"&&!qe.toLowerCase().endsWith(`.${be.toLowerCase()}`)&&(qe=`${qe}.${be}`);const de=oe?.fileOrder??oe?.atchFileSn??oe?.fileSn??oe?.attachFileOrder??oe?.fileId??oe?.id??we,Ne=typeof oe?.downloadUrl=="string"&&oe.downloadUrl||typeof oe?.url=="string"&&oe.url||typeof oe?.fileUrl=="string"&&oe.fileUrl||`/classroom/api/v1/common/board/${o}/post/${d}/attach/${encodeURIComponent(String(de))}`,De=k1(Number(oe?.fileSize??oe?.size??oe?.fileLength??0));return{key:`${de}-${we}`,name:qe,href:Ne,sizeLabel:De}}):[]},[u,o,d]),W=x.useMemo(()=>{if(!u)return"";const te=u.content||u.postContent||u.contentHtml||"",oe=C1(te);return A1(oe)},[u]),P=x.useMemo(()=>{const te=new Map;return A.forEach(oe=>{const we=$a(oe);we&&te.set(we,oe)}),te},[A]),G=x.useMemo(()=>{if(!A.length)return{top:[],children:new Map};const te=new Map,oe=[];A.forEach(_e=>{const He=$a(_e),be=$1(_e);be&&be!==He&&P.has(be)?(te.has(be)||te.set(be,[]),te.get(be).push(_e)):oe.push(_e)});const we=(_e,He)=>R1(_e,He);return oe.sort(we),te.forEach((_e,He)=>{const be=_e.slice().sort(we);te.set(He,be)}),M==="desc"&&oe.reverse(),{top:oe,children:te}},[A,P,M]),Y=x.useCallback(te=>{if(!te)return"";const oe=te.lastName||"",we=te.firstName||"",_e=`${oe}${we}`.trim();return _e||te.userName||te.userId||""},[]),ee=x.useCallback(te=>{if(!te)return"";const oe=te.lastName||"",we=te.firstName||"",_e=`${oe}${we}`.trim();return _e||te.userName||te.professorName||te.userId||""},[]),ae=x.useCallback(te=>{if(!te)return"";const oe=String(te.userId||"").trim();if(oe&&v?.userId&&v.userId===oe){const we=ee(v);return we?`${we} `:" "}if(oe&&D instanceof Map&&D.has(oe)){const we=D.get(oe),_e=Y(we)||oe,He=we?.univDeptName||"";return He?`${_e}(${He})`:_e}return te.writerName||te.authorName||te.studentName||oe||""},[v,D,ee,Y]),xe=x.useCallback(te=>{const oe=String(te?.userId||"").trim();return!!(oe&&v?.userId&&v.userId===oe)},[v]),me=x.useCallback(async te=>{te.preventDefault(),L();const oe=_.trim();if(!oe){U({variant:"warning",message:Dt.replyAlertEmpty});return}if(!a||!i){U({variant:"danger",message:Dt.replyAlertInvalid});return}const we=`/classroom/api/v1/student/board/${o}/post/${d}/reply`;try{q(!0);const _e=await fetch(we,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"same-origin",body:JSON.stringify({replyContent:oe})});if(!_e.ok)throw new Error(`HTTP ${_e.status}`);B(""),U({variant:"success",message:Dt.replySubmitSuccess}),await Z()}catch(_e){console.error("[StudentBoardPost] reply submit error",_e),U({variant:"danger",message:Dt.replySubmitFail})}finally{q(!1)}},[L,a,i,o,d,_,Z]),$e=x.useCallback(async te=>{if(!te)return;if(!a||!i){U({variant:"danger",message:Dt.replyAlertInvalid});return}if(!window.confirm(Dt.replyDeleteConfirm))return;const we=`/classroom/api/v1/student/board/${o}/post/${d}/reply/${encodeURIComponent(te)}`;try{E(te);const _e=await fetch(we,{method:"DELETE",headers:{Accept:"application/json"},credentials:"same-origin"});if(!_e.ok)throw new Error(`HTTP ${_e.status}`);U({variant:"info",message:Dt.replyDeleteSuccess}),await Z()}catch(_e){console.error("[StudentBoardPost] reply delete error",_e),U({variant:"danger",message:Dt.replyDeleteFail})}finally{E("")}},[a,i,o,d,Z]),se=x.useCallback((te,oe=0,we="root")=>{const _e=$a(te)||`${we}-${oe}`,He=xe(te),be=oe>0,qe=G.children.get($a(te))||[],de=T1(te?.replyContent||te?.content||"");return s.jsxs("div",{className:`border rounded p-2 reply-item ${be?"reply-child":""} ${He?"reply-professor":""}`,"data-reply-id":_e,style:He?{backgroundColor:"#f6f7f9"}:void 0,children:[s.jsxs("div",{className:"d-flex align-items-start justify-content-between mb-1",children:[s.jsxs("div",{className:"me-2",children:[s.jsx("strong",{className:"me-2",children:ae(te)}),s.jsx("span",{className:"small text-muted",children:tm(te?.createAt||te?.createdAt)})]}),!be&&s.jsx("div",{className:"btn-group btn-group-sm",children:s.jsx("button",{className:"btn btn-outline-danger",onClick:()=>$e($a(te)),disabled:!!H&&H===$a(te),children:Dt.replyDelete})})]}),s.jsx("div",{className:"reply-body text-start",children:de?s.jsx("div",{dangerouslySetInnerHTML:{__html:de}}):s.jsx("div",{style:{whiteSpace:"pre-wrap"},children:Dt.replyNoContent})}),qe.length>0&&s.jsx("div",{className:"mt-2 vstack gap-1",children:qe.map((Ne,De)=>se(Ne,oe+1,`${_e}-${De}`))})]},_e)},[G.children,ae,$e,H,xe]),ue=x.useMemo(()=>{if(!u)return[];const te=[],oe=u.writerName||u.professorName||u.authorName;oe&&te.push(`${Sc.author}: ${oe}`);const we=tm(u.createAt||u.createdAt);we&&te.push(`${Sc.createdAt}: ${we}`);const _e=tm(u.revealAt);return _e&&te.push(`${Sc.revealAt}: ${_e}`),u.viewCount!=null&&te.push(`${Sc.viewCount}: ${u.viewCount}`),te},[u]);return s.jsx("section",{id:"board-post-root",className:"container py-4","data-lecture-id":a,children:s.jsx("div",{className:"board-layout mx-auto",style:{marginTop:0,marginBottom:0},children:s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-lg-7",children:s.jsx("div",{className:"card shadow-sm",children:s.jsx("div",{className:"card-body",id:"post-body",children:b?s.jsx("div",{className:"alert alert-danger",role:"alert",children:b}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"d-flex align-items-start justify-content-between gap-3 mb-3 flex-wrap py-1 px-2",id:"post-header",children:s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("div",{className:"d-flex align-items-center flex-wrap gap-2 mb-2",id:"post-badge-row",children:m?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"badge skeleton",style:{width:"72px",height:"24px"}}),s.jsx("span",{className:"badge skeleton",style:{width:"56px",height:"24px"}})]}):s.jsxs(s.Fragment,{children:[s.jsx(D1,{type:u?.postType}),s.jsx(M1,{status:_1(u)})]})}),s.jsx("h1",{className:"h4 mb-2",id:"post-title",children:m?s.jsx("span",{className:"skeleton",style:{display:"block",height:"1.5rem"},children:""}):(u?.title||u?.postTitle||"").trim()||Dt.noContent}),s.jsx("div",{className:"d-flex flex-wrap meta-list mb-0",id:"post-meta-row",children:m?[1,2,3].map(te=>s.jsx("div",{className:"meta-item skeleton",style:{width:"180px",height:"1rem"}},te)):ue.map((te,oe)=>s.jsx("div",{className:"meta-item",children:te},oe))})]})}),s.jsx("hr",{className:"my-3"}),s.jsx("article",{className:"post-content mb-4 p-1",id:"post-content",children:m?s.jsx("div",{className:"skeleton",style:{height:"12rem"}}):W?s.jsx("div",{dangerouslySetInnerHTML:{__html:W}}):s.jsx("p",{className:"text-muted mb-0",children:Dt.noContent})}),!m&&k.length>0&&s.jsxs("div",{id:"attach-area",className:"mt-4",children:[s.jsx("h2",{className:"h6 mb-2",children:Dt.attachments}),s.jsx("ul",{className:"list-group",id:"attach-list",children:k.map(te=>s.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[s.jsx("span",{className:"text-truncate me-2",title:te.name,children:te.name}),s.jsx("a",{className:"btn btn-sm btn-outline-secondary py-1 px-2",href:te.href,download:!0,children:""})]},te.key))})]})]})})})}),s.jsx("div",{className:"col-lg-5",children:!b&&s.jsx("section",{id:"reply-section",style:{marginTop:0},children:s.jsxs("div",{className:"card shadow-sm",style:{marginBottom:0},children:[s.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between gap-2 flex-wrap py-2",children:[s.jsx("h2",{className:"h5 mb-0",children:Dt.replySectionTitle}),s.jsxs("div",{className:"btn-group btn-group-sm",role:"group","aria-label":" ",children:[s.jsx("button",{type:"button",className:`btn py-1 px-2 ${M==="desc"?"btn-primary":"btn-outline-secondary"}`,id:"reply-sort-newest","aria-pressed":M==="desc",onClick:()=>F("desc"),children:Dt.replySortNewest}),s.jsx("button",{type:"button",className:`btn py-1 px-2 ${M==="asc"?"btn-primary":"btn-outline-secondary"}`,id:"reply-sort-oldest","aria-pressed":M==="asc",onClick:()=>F("asc"),children:Dt.replySortOldest})]})]}),s.jsxs("div",{className:"card-body pb-2 p-2",children:[s.jsxs("form",{id:"reply-form",className:"vstack gap-2 mb-3",onSubmit:me,children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"reply-content",className:"form-label",children:" "}),s.jsx("textarea",{className:"form-control reply-textarea",id:"reply-content",rows:2,placeholder:Dt.replyPlaceholder,value:_,onChange:te=>B(te.target.value),style:{resize:"vertical",padding:"4px"},disabled:V})]}),s.jsx("div",{className:"d-flex justify-content-end",children:s.jsx("button",{type:"submit",className:"btn btn-primary btn-sm py-1 px-2",id:"reply-submit",disabled:V,children:V?Dt.replySubmitLoading:Dt.replySubmit})})]}),s.jsx("hr",{className:"my-2"}),s.jsxs("div",{className:"vstack gap-1",children:[T.message&&s.jsx("div",{className:`alert alert-${T.variant} py-2 small`,role:"alert",children:T.message}),z?s.jsx("div",{className:"text-center py-3 text-muted",children:Dt.replyLoading}):G.top.length===0?s.jsx("div",{className:"text-center text-muted py-3 small",children:R||Dt.replyEmpty}):G.top.map(te=>se(te))]})]})]})})})]})})})}/*!
* sweetalert2 v11.26.3
* Released under the MIT License.
*/function n0(t,e,a){if(typeof t=="function"?t===e:t.has(e))return arguments.length<3?e:a;throw new TypeError("Private element is not present on this object")}function I1(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Kb(t,e){return t.get(n0(t,e))}function O1(t,e,a){I1(t,e),e.set(t,a)}function B1(t,e,a){return t.set(n0(t,e),a),a}const z1=100,Qe={},U1=()=>{Qe.previousActiveElement instanceof HTMLElement?(Qe.previousActiveElement.focus(),Qe.previousActiveElement=null):document.body&&document.body.focus()},F1=t=>new Promise(e=>{if(!t)return e();const a=window.scrollX,i=window.scrollY;Qe.restoreFocusTimeout=setTimeout(()=>{U1(),e()},z1),window.scrollTo(a,i)}),a0="swal2-",H1=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],pe=H1.reduce((t,e)=>(t[e]=a0+e,t),{}),P1=["success","warning","info","question","error"],nd=P1.reduce((t,e)=>(t[e]=a0+e,t),{}),l0="SweetAlert2:",Fm=t=>t.charAt(0).toUpperCase()+t.slice(1),ws=t=>{console.warn(`${l0} ${typeof t=="object"?t.join(" "):t}`)},Tl=t=>{console.error(`${l0} ${t}`)},Qb=[],V1=t=>{Qb.includes(t)||(Qb.push(t),ws(t))},i0=(t,e=null)=>{V1(`"${t}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Td=t=>typeof t=="function"?t():t,Hm=t=>t&&typeof t.toPromise=="function",Qr=t=>Hm(t)?t.toPromise():Promise.resolve(t),Pm=t=>t&&Promise.resolve(t)===t,Ss=()=>document.body.querySelector(`.${pe.container}`),Zr=t=>{const e=Ss();return e?e.querySelector(t):null},Ws=t=>Zr(`.${t}`),jt=()=>Ws(pe.popup),ki=()=>Ws(pe.icon),Y1=()=>Ws(pe["icon-content"]),r0=()=>Ws(pe.title),Vm=()=>Ws(pe["html-container"]),o0=()=>Ws(pe.image),Ym=()=>Ws(pe["progress-steps"]),kd=()=>Ws(pe["validation-message"]),Mn=()=>Zr(`.${pe.actions} .${pe.confirm}`),_i=()=>Zr(`.${pe.actions} .${pe.cancel}`),kl=()=>Zr(`.${pe.actions} .${pe.deny}`),q1=()=>Ws(pe["input-label"]),Di=()=>Zr(`.${pe.loader}`),Jr=()=>Ws(pe.actions),c0=()=>Ws(pe.footer),_d=()=>Ws(pe["timer-progress-bar"]),qm=()=>Ws(pe.close),G1=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,Gm=()=>{const t=jt();if(!t)return[];const e=t.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),a=Array.from(e).sort((d,u)=>{const h=parseInt(d.getAttribute("tabindex")||"0"),m=parseInt(u.getAttribute("tabindex")||"0");return h>m?1:h<m?-1:0}),i=t.querySelectorAll(G1),o=Array.from(i).filter(d=>d.getAttribute("tabindex")!=="-1");return[...new Set(a.concat(o))].filter(d=>Is(d))},Xm=()=>ia(document.body,pe.shown)&&!ia(document.body,pe["toast-shown"])&&!ia(document.body,pe["no-backdrop"]),Dd=()=>{const t=jt();return t?ia(t,pe.toast):!1},X1=()=>{const t=jt();return t?t.hasAttribute("data-loading"):!1},Ks=(t,e)=>{if(t.textContent="",e){const i=new DOMParser().parseFromString(e,"text/html"),o=i.querySelector("head");o&&Array.from(o.childNodes).forEach(u=>{t.appendChild(u)});const d=i.querySelector("body");d&&Array.from(d.childNodes).forEach(u=>{u instanceof HTMLVideoElement||u instanceof HTMLAudioElement?t.appendChild(u.cloneNode(!0)):t.appendChild(u)})}},ia=(t,e)=>{if(!e)return!1;const a=e.split(/\s+/);for(let i=0;i<a.length;i++)if(!t.classList.contains(a[i]))return!1;return!0},W1=(t,e)=>{Array.from(t.classList).forEach(a=>{!Object.values(pe).includes(a)&&!Object.values(nd).includes(a)&&!Object.values(e.showClass||{}).includes(a)&&t.classList.remove(a)})},Xs=(t,e,a)=>{if(W1(t,e),!e.customClass)return;const i=e.customClass[a];if(i){if(typeof i!="string"&&!i.forEach){ws(`Invalid type of customClass.${a}! Expected string or iterable object, got "${typeof i}"`);return}wt(t,i)}},Md=(t,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return t.querySelector(`.${pe.popup} > .${pe[e]}`);case"checkbox":return t.querySelector(`.${pe.popup} > .${pe.checkbox} input`);case"radio":return t.querySelector(`.${pe.popup} > .${pe.radio} input:checked`)||t.querySelector(`.${pe.popup} > .${pe.radio} input:first-child`);case"range":return t.querySelector(`.${pe.popup} > .${pe.range} input`);default:return t.querySelector(`.${pe.popup} > .${pe.input}`)}},d0=t=>{if(t.focus(),t.type!=="file"){const e=t.value;t.value="",t.value=e}},u0=(t,e,a)=>{!t||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(i=>{Array.isArray(t)?t.forEach(o=>{a?o.classList.add(i):o.classList.remove(i)}):a?t.classList.add(i):t.classList.remove(i)}))},wt=(t,e)=>{u0(t,e,!0)},hn=(t,e)=>{u0(t,e,!1)},Oa=(t,e)=>{const a=Array.from(t.children);for(let i=0;i<a.length;i++){const o=a[i];if(o instanceof HTMLElement&&ia(o,e))return o}},wl=(t,e,a)=>{a===`${parseInt(`${a}`)}`&&(a=parseInt(a)),a||parseInt(`${a}`)===0?t.style.setProperty(e,typeof a=="number"?`${a}px`:a):t.style.removeProperty(e)},cs=(t,e="flex")=>{t&&(t.style.display=e)},ys=t=>{t&&(t.style.display="none")},Wm=(t,e="block")=>{t&&new MutationObserver(()=>{eo(t,t.innerHTML,e)}).observe(t,{childList:!0,subtree:!0})},Zb=(t,e,a,i)=>{const o=t.querySelector(e);o&&o.style.setProperty(a,i)},eo=(t,e,a="flex")=>{e?cs(t,a):ys(t)},Is=t=>!!(t&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)),K1=()=>!Is(Mn())&&!Is(kl())&&!Is(_i()),Em=t=>t.scrollHeight>t.clientHeight,Q1=(t,e)=>{let a=t;for(;a&&a!==e;){if(Em(a))return!0;a=a.parentElement}return!1},h0=t=>{const e=window.getComputedStyle(t),a=parseFloat(e.getPropertyValue("animation-duration")||"0"),i=parseFloat(e.getPropertyValue("transition-duration")||"0");return a>0||i>0},Km=(t,e=!1)=>{const a=_d();a&&Is(a)&&(e&&(a.style.transition="none",a.style.width="100%"),setTimeout(()=>{a.style.transition=`width ${t/1e3}s linear`,a.style.width="0%"},10))},Z1=()=>{const t=_d();if(!t)return;const e=parseInt(window.getComputedStyle(t).width);t.style.removeProperty("transition"),t.style.width="100%";const a=parseInt(window.getComputedStyle(t).width),i=e/a*100;t.style.width=`${i}%`},J1=()=>typeof window>"u"||typeof document>"u",eC=`
 <div aria-labelledby="${pe.title}" aria-describedby="${pe["html-container"]}" class="${pe.popup}" tabindex="-1">
   <button type="button" class="${pe.close}"></button>
   <ul class="${pe["progress-steps"]}"></ul>
   <div class="${pe.icon}"></div>
   <img class="${pe.image}" />
   <h2 class="${pe.title}" id="${pe.title}"></h2>
   <div class="${pe["html-container"]}" id="${pe["html-container"]}"></div>
   <input class="${pe.input}" id="${pe.input}" />
   <input type="file" class="${pe.file}" />
   <div class="${pe.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${pe.select}" id="${pe.select}"></select>
   <div class="${pe.radio}"></div>
   <label class="${pe.checkbox}">
     <input type="checkbox" id="${pe.checkbox}" />
     <span class="${pe.label}"></span>
   </label>
   <textarea class="${pe.textarea}" id="${pe.textarea}"></textarea>
   <div class="${pe["validation-message"]}" id="${pe["validation-message"]}"></div>
   <div class="${pe.actions}">
     <div class="${pe.loader}"></div>
     <button type="button" class="${pe.confirm}"></button>
     <button type="button" class="${pe.deny}"></button>
     <button type="button" class="${pe.cancel}"></button>
   </div>
   <div class="${pe.footer}"></div>
   <div class="${pe["timer-progress-bar-container"]}">
     <div class="${pe["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),tC=()=>{const t=Ss();return t?(t.remove(),hn([document.documentElement,document.body],[pe["no-backdrop"],pe["toast-shown"],pe["has-column"]]),!0):!1},gl=()=>{Qe.currentInstance.resetValidationMessage()},sC=()=>{const t=jt(),e=Oa(t,pe.input),a=Oa(t,pe.file),i=t.querySelector(`.${pe.range} input`),o=t.querySelector(`.${pe.range} output`),d=Oa(t,pe.select),u=t.querySelector(`.${pe.checkbox} input`),h=Oa(t,pe.textarea);e.oninput=gl,a.onchange=gl,d.onchange=gl,u.onchange=gl,h.oninput=gl,i.oninput=()=>{gl(),o.value=i.value},i.onchange=()=>{gl(),o.value=i.value}},nC=t=>typeof t=="string"?document.querySelector(t):t,aC=t=>{const e=jt();e.setAttribute("role",t.toast?"alert":"dialog"),e.setAttribute("aria-live",t.toast?"polite":"assertive"),t.toast||e.setAttribute("aria-modal","true")},lC=t=>{window.getComputedStyle(t).direction==="rtl"&&wt(Ss(),pe.rtl)},iC=t=>{const e=tC();if(J1()){Tl("SweetAlert2 requires document to initialize");return}const a=document.createElement("div");a.className=pe.container,e&&wt(a,pe["no-transition"]),Ks(a,eC),a.dataset.swal2Theme=t.theme;const i=nC(t.target);i.appendChild(a),t.topLayer&&(a.setAttribute("popover",""),a.showPopover()),aC(t),lC(i),sC()},Qm=(t,e)=>{t instanceof HTMLElement?e.appendChild(t):typeof t=="object"?rC(t,e):t&&Ks(e,t)},rC=(t,e)=>{t.jquery?oC(e,t):Ks(e,t.toString())},oC=(t,e)=>{if(t.textContent="",0 in e)for(let a=0;a in e;a++)t.appendChild(e[a].cloneNode(!0));else t.appendChild(e.cloneNode(!0))},cC=(t,e)=>{const a=Jr(),i=Di();!a||!i||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?ys(a):cs(a),Xs(a,e,"actions"),dC(a,i,e),Ks(i,e.loaderHtml||""),Xs(i,e,"loader"))};function dC(t,e,a){const i=Mn(),o=kl(),d=_i();!i||!o||!d||(nm(i,"confirm",a),nm(o,"deny",a),nm(d,"cancel",a),uC(i,o,d,a),a.reverseButtons&&(a.toast?(t.insertBefore(d,i),t.insertBefore(o,i)):(t.insertBefore(d,e),t.insertBefore(o,e),t.insertBefore(i,e))))}function uC(t,e,a,i){if(!i.buttonsStyling){hn([t,e,a],pe.styled);return}wt([t,e,a],pe.styled),i.confirmButtonColor&&t.style.setProperty("--swal2-confirm-button-background-color",i.confirmButtonColor),i.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",i.denyButtonColor),i.cancelButtonColor&&a.style.setProperty("--swal2-cancel-button-background-color",i.cancelButtonColor),sm(t),sm(e),sm(a)}function sm(t){const e=window.getComputedStyle(t);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const a=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");t.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${a}`))}function nm(t,e,a){const i=Fm(e);eo(t,a[`show${i}Button`],"inline-block"),Ks(t,a[`${e}ButtonText`]||""),t.setAttribute("aria-label",a[`${e}ButtonAriaLabel`]||""),t.className=pe[e],Xs(t,a,`${e}Button`)}const hC=(t,e)=>{const a=qm();a&&(Ks(a,e.closeButtonHtml||""),Xs(a,e,"closeButton"),eo(a,e.showCloseButton),a.setAttribute("aria-label",e.closeButtonAriaLabel||""))},mC=(t,e)=>{const a=Ss();a&&(fC(a,e.backdrop),pC(a,e.position),gC(a,e.grow),Xs(a,e,"container"))};function fC(t,e){typeof e=="string"?t.style.background=e:e||wt([document.documentElement,document.body],pe["no-backdrop"])}function pC(t,e){e&&(e in pe?wt(t,pe[e]):(ws('The "position" parameter is not valid, defaulting to "center"'),wt(t,pe.center)))}function gC(t,e){e&&wt(t,pe[`grow-${e}`])}var Lt={innerParams:new WeakMap,domCache:new WeakMap};const xC=["input","file","range","select","radio","checkbox","textarea"],bC=(t,e)=>{const a=jt();if(!a)return;const i=Lt.innerParams.get(t),o=!i||e.input!==i.input;xC.forEach(d=>{const u=Oa(a,pe[d]);u&&(jC(d,e.inputAttributes),u.className=pe[d],o&&ys(u))}),e.input&&(o&&yC(e),NC(e))},yC=t=>{if(!t.input)return;if(!Kt[t.input]){Tl(`Unexpected type of input! Expected ${Object.keys(Kt).join(" | ")}, got "${t.input}"`);return}const e=m0(t.input);if(!e)return;const a=Kt[t.input](e,t);cs(e),t.inputAutoFocus&&setTimeout(()=>{d0(a)})},vC=t=>{for(let e=0;e<t.attributes.length;e++){const a=t.attributes[e].name;["id","type","value","style"].includes(a)||t.removeAttribute(a)}},jC=(t,e)=>{const a=jt();if(!a)return;const i=Md(a,t);if(i){vC(i);for(const o in e)i.setAttribute(o,e[o])}},NC=t=>{if(!t.input)return;const e=m0(t.input);e&&Xs(e,t,"input")},Zm=(t,e)=>{!t.placeholder&&e.inputPlaceholder&&(t.placeholder=e.inputPlaceholder)},to=(t,e,a)=>{if(a.inputLabel){const i=document.createElement("label"),o=pe["input-label"];i.setAttribute("for",t.id),i.className=o,typeof a.customClass=="object"&&wt(i,a.customClass.inputLabel),i.innerText=a.inputLabel,e.insertAdjacentElement("beforebegin",i)}},m0=t=>{const e=jt();if(e)return Oa(e,pe[t]||pe.input)},ad=(t,e)=>{["string","number"].includes(typeof e)?t.value=`${e}`:Pm(e)||ws(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},Kt={};Kt.text=Kt.email=Kt.password=Kt.number=Kt.tel=Kt.url=Kt.search=Kt.date=Kt["datetime-local"]=Kt.time=Kt.week=Kt.month=(t,e)=>(ad(t,e.inputValue),to(t,t,e),Zm(t,e),t.type=e.input,t);Kt.file=(t,e)=>(to(t,t,e),Zm(t,e),t);Kt.range=(t,e)=>{const a=t.querySelector("input"),i=t.querySelector("output");return ad(a,e.inputValue),a.type=e.input,ad(i,e.inputValue),to(a,t,e),t};Kt.select=(t,e)=>{if(t.textContent="",e.inputPlaceholder){const a=document.createElement("option");Ks(a,e.inputPlaceholder),a.value="",a.disabled=!0,a.selected=!0,t.appendChild(a)}return to(t,t,e),t};Kt.radio=t=>(t.textContent="",t);Kt.checkbox=(t,e)=>{const a=Md(jt(),"checkbox");a.value="1",a.checked=!!e.inputValue;const i=t.querySelector("span");return Ks(i,e.inputPlaceholder||e.inputLabel),a};Kt.textarea=(t,e)=>{ad(t,e.inputValue),Zm(t,e),to(t,t,e);const a=i=>parseInt(window.getComputedStyle(i).marginLeft)+parseInt(window.getComputedStyle(i).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const i=parseInt(window.getComputedStyle(jt()).width),o=()=>{if(!document.body.contains(t))return;const d=t.offsetWidth+a(t);d>i?jt().style.width=`${d}px`:wl(jt(),"width",e.width)};new MutationObserver(o).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const wC=(t,e)=>{const a=Vm();a&&(Wm(a),Xs(a,e,"htmlContainer"),e.html?(Qm(e.html,a),cs(a,"block")):e.text?(a.textContent=e.text,cs(a,"block")):ys(a),bC(t,e))},SC=(t,e)=>{const a=c0();a&&(Wm(a),eo(a,!!e.footer,"block"),e.footer&&Qm(e.footer,a),Xs(a,e,"footer"))},CC=(t,e)=>{const a=Lt.innerParams.get(t),i=ki();if(!i)return;if(a&&e.icon===a.icon){ey(i,e),Jb(i,e);return}if(!e.icon&&!e.iconHtml){ys(i);return}if(e.icon&&Object.keys(nd).indexOf(e.icon)===-1){Tl(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),ys(i);return}cs(i),ey(i,e),Jb(i,e),wt(i,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",f0)},Jb=(t,e)=>{for(const[a,i]of Object.entries(nd))e.icon!==a&&hn(t,i);wt(t,e.icon&&nd[e.icon]),TC(t,e),f0(),Xs(t,e,"icon")},f0=()=>{const t=jt();if(!t)return;const e=window.getComputedStyle(t).getPropertyValue("background-color"),a=t.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let i=0;i<a.length;i++)a[i].style.backgroundColor=e},AC=t=>`
  ${t.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${t.animation?'<div class="swal2-success-fix"></div>':""}
  ${t.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,EC=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,ey=(t,e)=>{if(!e.icon&&!e.iconHtml)return;let a=t.innerHTML,i="";e.iconHtml?i=ty(e.iconHtml):e.icon==="success"?(i=AC(e),a=a.replace(/ style=".*?"/g,"")):e.icon==="error"?i=EC:e.icon&&(i=ty({question:"?",warning:"!",info:"i"}[e.icon])),a.trim()!==i.trim()&&Ks(t,i)},TC=(t,e)=>{if(e.iconColor){t.style.color=e.iconColor,t.style.borderColor=e.iconColor;for(const a of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Zb(t,a,"background-color",e.iconColor);Zb(t,".swal2-success-ring","border-color",e.iconColor)}},ty=t=>`<div class="${pe["icon-content"]}">${t}</div>`,kC=(t,e)=>{const a=o0();if(a){if(!e.imageUrl){ys(a);return}cs(a,""),a.setAttribute("src",e.imageUrl),a.setAttribute("alt",e.imageAlt||""),wl(a,"width",e.imageWidth),wl(a,"height",e.imageHeight),a.className=pe.image,Xs(a,e,"image")}};let Jm=!1,p0=0,g0=0,x0=0,b0=0;const _C=t=>{t.addEventListener("mousedown",ld),document.body.addEventListener("mousemove",id),t.addEventListener("mouseup",rd),t.addEventListener("touchstart",ld),document.body.addEventListener("touchmove",id),t.addEventListener("touchend",rd)},DC=t=>{t.removeEventListener("mousedown",ld),document.body.removeEventListener("mousemove",id),t.removeEventListener("mouseup",rd),t.removeEventListener("touchstart",ld),document.body.removeEventListener("touchmove",id),t.removeEventListener("touchend",rd)},ld=t=>{const e=jt();if(t.target===e||ki().contains(t.target)){Jm=!0;const a=y0(t);p0=a.clientX,g0=a.clientY,x0=parseInt(e.style.insetInlineStart)||0,b0=parseInt(e.style.insetBlockStart)||0,wt(e,"swal2-dragging")}},id=t=>{const e=jt();if(Jm){let{clientX:a,clientY:i}=y0(t);e.style.insetInlineStart=`${x0+(a-p0)}px`,e.style.insetBlockStart=`${b0+(i-g0)}px`}},rd=()=>{const t=jt();Jm=!1,hn(t,"swal2-dragging")},y0=t=>{let e=0,a=0;return t.type.startsWith("mouse")?(e=t.clientX,a=t.clientY):t.type.startsWith("touch")&&(e=t.touches[0].clientX,a=t.touches[0].clientY),{clientX:e,clientY:a}},MC=(t,e)=>{const a=Ss(),i=jt();if(!(!a||!i)){if(e.toast){wl(a,"width",e.width),i.style.width="100%";const o=Di();o&&i.insertBefore(o,ki())}else wl(i,"width",e.width);wl(i,"padding",e.padding),e.color&&(i.style.color=e.color),e.background&&(i.style.background=e.background),ys(kd()),$C(i,e),e.draggable&&!e.toast?(wt(i,pe.draggable),_C(i)):(hn(i,pe.draggable),DC(i))}},$C=(t,e)=>{const a=e.showClass||{};t.className=`${pe.popup} ${Is(t)?a.popup:""}`,e.toast?(wt([document.documentElement,document.body],pe["toast-shown"]),wt(t,pe.toast)):wt(t,pe.modal),Xs(t,e,"popup"),typeof e.customClass=="string"&&wt(t,e.customClass),e.icon&&wt(t,pe[`icon-${e.icon}`])},RC=(t,e)=>{const a=Ym();if(!a)return;const{progressSteps:i,currentProgressStep:o}=e;if(!i||i.length===0||o===void 0){ys(a);return}cs(a),a.textContent="",o>=i.length&&ws("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),i.forEach((d,u)=>{const h=LC(d);if(a.appendChild(h),u===o&&wt(h,pe["active-progress-step"]),u!==i.length-1){const m=IC(e);a.appendChild(m)}})},LC=t=>{const e=document.createElement("li");return wt(e,pe["progress-step"]),Ks(e,t),e},IC=t=>{const e=document.createElement("li");return wt(e,pe["progress-step-line"]),t.progressStepsDistance&&wl(e,"width",t.progressStepsDistance),e},OC=(t,e)=>{const a=r0();a&&(Wm(a),eo(a,!!(e.title||e.titleText),"block"),e.title&&Qm(e.title,a),e.titleText&&(a.innerText=e.titleText),Xs(a,e,"title"))},v0=(t,e)=>{MC(t,e),mC(t,e),RC(t,e),CC(t,e),kC(t,e),OC(t,e),hC(t,e),wC(t,e),cC(t,e),SC(t,e);const a=jt();typeof e.didRender=="function"&&a&&e.didRender(a),Qe.eventEmitter.emit("didRender",a)},BC=()=>Is(jt()),j0=()=>{var t;return(t=Mn())===null||t===void 0?void 0:t.click()},zC=()=>{var t;return(t=kl())===null||t===void 0?void 0:t.click()},UC=()=>{var t;return(t=_i())===null||t===void 0?void 0:t.click()},Mi=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),N0=t=>{t.keydownTarget&&t.keydownHandlerAdded&&(t.keydownTarget.removeEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!1)},FC=(t,e,a)=>{N0(t),e.toast||(t.keydownHandler=i=>PC(e,i,a),t.keydownTarget=e.keydownListenerCapture?window:jt(),t.keydownListenerCapture=e.keydownListenerCapture,t.keydownTarget.addEventListener("keydown",t.keydownHandler,{capture:t.keydownListenerCapture}),t.keydownHandlerAdded=!0)},Tm=(t,e)=>{var a;const i=Gm();if(i.length){t=t+e,t===-2&&(t=i.length-1),t===i.length?t=0:t===-1&&(t=i.length-1),i[t].focus();return}(a=jt())===null||a===void 0||a.focus()},w0=["ArrowRight","ArrowDown"],HC=["ArrowLeft","ArrowUp"],PC=(t,e,a)=>{t&&(e.isComposing||e.keyCode===229||(t.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?VC(e,t):e.key==="Tab"?YC(e):[...w0,...HC].includes(e.key)?qC(e.key):e.key==="Escape"&&GC(e,t,a)))},VC=(t,e)=>{if(!Td(e.allowEnterKey))return;const a=Md(jt(),e.input);if(t.target&&a&&t.target instanceof HTMLElement&&t.target.outerHTML===a.outerHTML){if(["textarea","file"].includes(e.input))return;j0(),t.preventDefault()}},YC=t=>{const e=t.target,a=Gm();let i=-1;for(let o=0;o<a.length;o++)if(e===a[o]){i=o;break}t.shiftKey?Tm(i,-1):Tm(i,1),t.stopPropagation(),t.preventDefault()},qC=t=>{const e=Jr(),a=Mn(),i=kl(),o=_i();if(!e||!a||!i||!o)return;const d=[a,i,o];if(document.activeElement instanceof HTMLElement&&!d.includes(document.activeElement))return;const u=w0.includes(t)?"nextElementSibling":"previousElementSibling";let h=document.activeElement;if(h){for(let m=0;m<e.children.length;m++){if(h=h[u],!h)return;if(h instanceof HTMLButtonElement&&Is(h))break}h instanceof HTMLButtonElement&&h.focus()}},GC=(t,e,a)=>{t.preventDefault(),Td(e.allowEscapeKey)&&a(Mi.esc)};var wi={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const XC=()=>{const t=Ss();Array.from(document.body.children).forEach(a=>{a.contains(t)||(a.hasAttribute("aria-hidden")&&a.setAttribute("data-previous-aria-hidden",a.getAttribute("aria-hidden")||""),a.setAttribute("aria-hidden","true"))})},S0=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},C0=typeof window<"u"&&!!window.GestureEvent,WC=()=>{if(C0&&!ia(document.body,pe.iosfix)){const t=document.body.scrollTop;document.body.style.top=`${t*-1}px`,wt(document.body,pe.iosfix),KC()}},KC=()=>{const t=Ss();if(!t)return;let e;t.ontouchstart=a=>{e=QC(a)},t.ontouchmove=a=>{e&&(a.preventDefault(),a.stopPropagation())}},QC=t=>{const e=t.target,a=Ss(),i=Vm();return!a||!i||ZC(t)||JC(t)?!1:e===a||!Em(a)&&e instanceof HTMLElement&&!Q1(e,i)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(Em(i)&&i.contains(e))},ZC=t=>t.touches&&t.touches.length&&t.touches[0].touchType==="stylus",JC=t=>t.touches&&t.touches.length>1,eA=()=>{if(ia(document.body,pe.iosfix)){const t=parseInt(document.body.style.top,10);hn(document.body,pe.iosfix),document.body.style.top="",document.body.scrollTop=t*-1}},tA=()=>{const t=document.createElement("div");t.className=pe["scrollbar-measure"],document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e};let bi=null;const sA=t=>{bi===null&&(document.body.scrollHeight>window.innerHeight||t==="scroll")&&(bi=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${bi+tA()}px`)},nA=()=>{bi!==null&&(document.body.style.paddingRight=`${bi}px`,bi=null)};function A0(t,e,a,i){Dd()?sy(t,i):(F1(a).then(()=>sy(t,i)),N0(Qe)),C0?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),Xm()&&(nA(),eA(),S0()),aA()}function aA(){hn([document.documentElement,document.body],[pe.shown,pe["height-auto"],pe["no-backdrop"],pe["toast-shown"]])}function Ba(t){t=iA(t);const e=wi.swalPromiseResolve.get(this),a=lA(this);this.isAwaitingPromise?t.isDismissed||(so(this),e(t)):a&&e(t)}const lA=t=>{const e=jt();if(!e)return!1;const a=Lt.innerParams.get(t);if(!a||ia(e,a.hideClass.popup))return!1;hn(e,a.showClass.popup),wt(e,a.hideClass.popup);const i=Ss();return hn(i,a.showClass.backdrop),wt(i,a.hideClass.backdrop),rA(t,e,a),!0};function E0(t){const e=wi.swalPromiseReject.get(this);so(this),e&&e(t)}const so=t=>{t.isAwaitingPromise&&(delete t.isAwaitingPromise,Lt.innerParams.get(t)||t._destroy())},iA=t=>typeof t>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},t),rA=(t,e,a)=>{var i;const o=Ss(),d=h0(e);typeof a.willClose=="function"&&a.willClose(e),(i=Qe.eventEmitter)===null||i===void 0||i.emit("willClose",e),d?oA(t,e,o,a.returnFocus,a.didClose):A0(t,o,a.returnFocus,a.didClose)},oA=(t,e,a,i,o)=>{Qe.swalCloseEventFinishedCallback=A0.bind(null,t,a,i,o);const d=function(u){if(u.target===e){var h;(h=Qe.swalCloseEventFinishedCallback)===null||h===void 0||h.call(Qe),delete Qe.swalCloseEventFinishedCallback,e.removeEventListener("animationend",d),e.removeEventListener("transitionend",d)}};e.addEventListener("animationend",d),e.addEventListener("transitionend",d)},sy=(t,e)=>{setTimeout(()=>{var a;typeof e=="function"&&e.bind(t.params)(),(a=Qe.eventEmitter)===null||a===void 0||a.emit("didClose"),t._destroy&&t._destroy()})},Si=t=>{let e=jt();if(e||new Ve,e=jt(),!e)return;const a=Di();Dd()?ys(ki()):cA(e,t),cs(a),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},cA=(t,e)=>{const a=Jr(),i=Di();!a||!i||(!e&&Is(Mn())&&(e=Mn()),cs(a),e&&(ys(e),i.setAttribute("data-button-to-replace",e.className),a.insertBefore(i,e)),wt([t,a],pe.loading))},dA=(t,e)=>{e.input==="select"||e.input==="radio"?pA(t,e):["text","email","number","tel","textarea"].some(a=>a===e.input)&&(Hm(e.inputValue)||Pm(e.inputValue))&&(Si(Mn()),gA(t,e))},uA=(t,e)=>{const a=t.getInput();if(!a)return null;switch(e.input){case"checkbox":return hA(a);case"radio":return mA(a);case"file":return fA(a);default:return e.inputAutoTrim?a.value.trim():a.value}},hA=t=>t.checked?1:0,mA=t=>t.checked?t.value:null,fA=t=>t.files&&t.files.length?t.getAttribute("multiple")!==null?t.files:t.files[0]:null,pA=(t,e)=>{const a=jt();if(!a)return;const i=o=>{e.input==="select"?xA(a,od(o),e):e.input==="radio"&&bA(a,od(o),e)};Hm(e.inputOptions)||Pm(e.inputOptions)?(Si(Mn()),Qr(e.inputOptions).then(o=>{t.hideLoading(),i(o)})):typeof e.inputOptions=="object"?i(e.inputOptions):Tl(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},gA=(t,e)=>{const a=t.getInput();a&&(ys(a),Qr(e.inputValue).then(i=>{a.value=e.input==="number"?`${parseFloat(i)||0}`:`${i}`,cs(a),a.focus(),t.hideLoading()}).catch(i=>{Tl(`Error in inputValue promise: ${i}`),a.value="",cs(a),a.focus(),t.hideLoading()}))};function xA(t,e,a){const i=Oa(t,pe.select);if(!i)return;const o=(d,u,h)=>{const m=document.createElement("option");m.value=h,Ks(m,u),m.selected=T0(h,a.inputValue),d.appendChild(m)};e.forEach(d=>{const u=d[0],h=d[1];if(Array.isArray(h)){const m=document.createElement("optgroup");m.label=u,m.disabled=!1,i.appendChild(m),h.forEach(p=>o(m,p[1],p[0]))}else o(i,h,u)}),i.focus()}function bA(t,e,a){const i=Oa(t,pe.radio);if(!i)return;e.forEach(d=>{const u=d[0],h=d[1],m=document.createElement("input"),p=document.createElement("label");m.type="radio",m.name=pe.radio,m.value=u,T0(u,a.inputValue)&&(m.checked=!0);const b=document.createElement("span");Ks(b,h),b.className=pe.label,p.appendChild(m),p.appendChild(b),i.appendChild(p)});const o=i.querySelectorAll("input");o.length&&o[0].focus()}const od=t=>{const e=[];return t instanceof Map?t.forEach((a,i)=>{let o=a;typeof o=="object"&&(o=od(o)),e.push([i,o])}):Object.keys(t).forEach(a=>{let i=t[a];typeof i=="object"&&(i=od(i)),e.push([a,i])}),e},T0=(t,e)=>!!e&&e.toString()===t.toString(),yA=t=>{const e=Lt.innerParams.get(t);t.disableButtons(),e.input?k0(t,"confirm"):tf(t,!0)},vA=t=>{const e=Lt.innerParams.get(t);t.disableButtons(),e.returnInputValueOnDeny?k0(t,"deny"):ef(t,!1)},jA=(t,e)=>{t.disableButtons(),e(Mi.cancel)},k0=(t,e)=>{const a=Lt.innerParams.get(t);if(!a.input){Tl(`The "input" parameter is needed to be set when using returnInputValueOn${Fm(e)}`);return}const i=t.getInput(),o=uA(t,a);a.inputValidator?NA(t,o,e):i&&!i.checkValidity()?(t.enableButtons(),t.showValidationMessage(a.validationMessage||i.validationMessage)):e==="deny"?ef(t,o):tf(t,o)},NA=(t,e,a)=>{const i=Lt.innerParams.get(t);t.disableInput(),Promise.resolve().then(()=>Qr(i.inputValidator(e,i.validationMessage))).then(d=>{t.enableButtons(),t.enableInput(),d?t.showValidationMessage(d):a==="deny"?ef(t,e):tf(t,e)})},ef=(t,e)=>{const a=Lt.innerParams.get(t||void 0);a.showLoaderOnDeny&&Si(kl()),a.preDeny?(t.isAwaitingPromise=!0,Promise.resolve().then(()=>Qr(a.preDeny(e,a.validationMessage))).then(o=>{o===!1?(t.hideLoading(),so(t)):t.close({isDenied:!0,value:typeof o>"u"?e:o})}).catch(o=>_0(t||void 0,o))):t.close({isDenied:!0,value:e})},ny=(t,e)=>{t.close({isConfirmed:!0,value:e})},_0=(t,e)=>{t.rejectPromise(e)},tf=(t,e)=>{const a=Lt.innerParams.get(t||void 0);a.showLoaderOnConfirm&&Si(),a.preConfirm?(t.resetValidationMessage(),t.isAwaitingPromise=!0,Promise.resolve().then(()=>Qr(a.preConfirm(e,a.validationMessage))).then(o=>{Is(kd())||o===!1?(t.hideLoading(),so(t)):ny(t,typeof o>"u"?e:o)}).catch(o=>_0(t||void 0,o))):ny(t,e)};function cd(){const t=Lt.innerParams.get(this);if(!t)return;const e=Lt.domCache.get(this);ys(e.loader),Dd()?t.icon&&cs(ki()):wA(e),hn([e.popup,e.actions],pe.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const wA=t=>{const e=t.popup.getElementsByClassName(t.loader.getAttribute("data-button-to-replace"));e.length?cs(e[0],"inline-block"):K1()&&ys(t.actions)};function D0(){const t=Lt.innerParams.get(this),e=Lt.domCache.get(this);return e?Md(e.popup,t.input):null}function M0(t,e,a){const i=Lt.domCache.get(t);e.forEach(o=>{i[o].disabled=a})}function $0(t,e){const a=jt();if(!(!a||!t))if(t.type==="radio"){const i=a.querySelectorAll(`[name="${pe.radio}"]`);for(let o=0;o<i.length;o++)i[o].disabled=e}else t.disabled=e}function R0(){M0(this,["confirmButton","denyButton","cancelButton"],!1)}function L0(){M0(this,["confirmButton","denyButton","cancelButton"],!0)}function I0(){$0(this.getInput(),!1)}function O0(){$0(this.getInput(),!0)}function B0(t){const e=Lt.domCache.get(this),a=Lt.innerParams.get(this);Ks(e.validationMessage,t),e.validationMessage.className=pe["validation-message"],a.customClass&&a.customClass.validationMessage&&wt(e.validationMessage,a.customClass.validationMessage),cs(e.validationMessage);const i=this.getInput();i&&(i.setAttribute("aria-invalid","true"),i.setAttribute("aria-describedby",pe["validation-message"]),d0(i),wt(i,pe.inputerror))}function z0(){const t=Lt.domCache.get(this);t.validationMessage&&ys(t.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),hn(e,pe.inputerror))}const yi={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},SA=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],CA={allowEnterKey:void 0},AA=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],U0=t=>Object.prototype.hasOwnProperty.call(yi,t),F0=t=>SA.indexOf(t)!==-1,H0=t=>CA[t],EA=t=>{U0(t)||ws(`Unknown parameter "${t}"`)},TA=t=>{AA.includes(t)&&ws(`The parameter "${t}" is incompatible with toasts`)},kA=t=>{const e=H0(t);e&&i0(t,e)},P0=t=>{t.backdrop===!1&&t.allowOutsideClick&&ws('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),t.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(t.theme)&&ws(`Invalid theme "${t.theme}"`);for(const e in t)EA(e),t.toast&&TA(e),kA(e)};function V0(t){const e=Ss(),a=jt(),i=Lt.innerParams.get(this);if(!a||ia(a,i.hideClass.popup)){ws("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const o=_A(t),d=Object.assign({},i,o);P0(d),e.dataset.swal2Theme=d.theme,v0(this,d),Lt.innerParams.set(this,d),Object.defineProperties(this,{params:{value:Object.assign({},this.params,t),writable:!1,enumerable:!0}})}const _A=t=>{const e={};return Object.keys(t).forEach(a=>{F0(a)?e[a]=t[a]:ws(`Invalid parameter to update: ${a}`)}),e};function Y0(){const t=Lt.domCache.get(this),e=Lt.innerParams.get(this);if(!e){q0(this);return}t.popup&&Qe.swalCloseEventFinishedCallback&&(Qe.swalCloseEventFinishedCallback(),delete Qe.swalCloseEventFinishedCallback),typeof e.didDestroy=="function"&&e.didDestroy(),Qe.eventEmitter.emit("didDestroy"),DA(this)}const DA=t=>{q0(t),delete t.params,delete Qe.keydownHandler,delete Qe.keydownTarget,delete Qe.currentInstance},q0=t=>{t.isAwaitingPromise?(am(Lt,t),t.isAwaitingPromise=!0):(am(wi,t),am(Lt,t),delete t.isAwaitingPromise,delete t.disableButtons,delete t.enableButtons,delete t.getInput,delete t.disableInput,delete t.enableInput,delete t.hideLoading,delete t.disableLoading,delete t.showValidationMessage,delete t.resetValidationMessage,delete t.close,delete t.closePopup,delete t.closeModal,delete t.closeToast,delete t.rejectPromise,delete t.update,delete t._destroy)},am=(t,e)=>{for(const a in t)t[a].delete(e)};var MA=Object.freeze({__proto__:null,_destroy:Y0,close:Ba,closeModal:Ba,closePopup:Ba,closeToast:Ba,disableButtons:L0,disableInput:O0,disableLoading:cd,enableButtons:R0,enableInput:I0,getInput:D0,handleAwaitingPromise:so,hideLoading:cd,rejectPromise:E0,resetValidationMessage:z0,showValidationMessage:B0,update:V0});const $A=(t,e,a)=>{t.toast?RA(t,e,a):(IA(e),OA(e),BA(t,e,a))},RA=(t,e,a)=>{e.popup.onclick=()=>{t&&(LA(t)||t.timer||t.input)||a(Mi.close)}},LA=t=>!!(t.showConfirmButton||t.showDenyButton||t.showCancelButton||t.showCloseButton);let dd=!1;const IA=t=>{t.popup.onmousedown=()=>{t.container.onmouseup=function(e){t.container.onmouseup=()=>{},e.target===t.container&&(dd=!0)}}},OA=t=>{t.container.onmousedown=e=>{e.target===t.container&&e.preventDefault(),t.popup.onmouseup=function(a){t.popup.onmouseup=()=>{},(a.target===t.popup||a.target instanceof HTMLElement&&t.popup.contains(a.target))&&(dd=!0)}}},BA=(t,e,a)=>{e.container.onclick=i=>{if(dd){dd=!1;return}i.target===e.container&&Td(t.allowOutsideClick)&&a(Mi.backdrop)}},zA=t=>typeof t=="object"&&t.jquery,ay=t=>t instanceof Element||zA(t),UA=t=>{const e={};return typeof t[0]=="object"&&!ay(t[0])?Object.assign(e,t[0]):["title","html","icon"].forEach((a,i)=>{const o=t[i];typeof o=="string"||ay(o)?e[a]=o:o!==void 0&&Tl(`Unexpected type of ${a}! Expected "string" or "Element", got ${typeof o}`)}),e};function FA(...t){return new this(...t)}function HA(t){class e extends this{_main(i,o){return super._main(i,Object.assign({},t,o))}}return e}const PA=()=>Qe.timeout&&Qe.timeout.getTimerLeft(),G0=()=>{if(Qe.timeout)return Z1(),Qe.timeout.stop()},X0=()=>{if(Qe.timeout){const t=Qe.timeout.start();return Km(t),t}},VA=()=>{const t=Qe.timeout;return t&&(t.running?G0():X0())},YA=t=>{if(Qe.timeout){const e=Qe.timeout.increase(t);return Km(e,!0),e}},qA=()=>!!(Qe.timeout&&Qe.timeout.isRunning());let ly=!1;const km={};function GA(t="data-swal-template"){km[t]=this,ly||(document.body.addEventListener("click",XA),ly=!0)}const XA=t=>{for(let e=t.target;e&&e!==document;e=e.parentNode)for(const a in km){const i=e.getAttribute(a);if(i){km[a].fire({template:i});return}}};class WA{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,a){const i=this._getHandlersByEventName(e);i.includes(a)||i.push(a)}once(e,a){const i=(...o)=>{this.removeListener(e,i),a.apply(this,o)};this.on(e,i)}emit(e,...a){this._getHandlersByEventName(e).forEach(i=>{try{i.apply(this,a)}catch(o){console.error(o)}})}removeListener(e,a){const i=this._getHandlersByEventName(e),o=i.indexOf(a);o>-1&&i.splice(o,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}}Qe.eventEmitter=new WA;const KA=(t,e)=>{Qe.eventEmitter.on(t,e)},QA=(t,e)=>{Qe.eventEmitter.once(t,e)},ZA=(t,e)=>{if(!t){Qe.eventEmitter.reset();return}e?Qe.eventEmitter.removeListener(t,e):Qe.eventEmitter.removeAllListeners(t)};var JA=Object.freeze({__proto__:null,argsToParams:UA,bindClickHandler:GA,clickCancel:UC,clickConfirm:j0,clickDeny:zC,enableLoading:Si,fire:FA,getActions:Jr,getCancelButton:_i,getCloseButton:qm,getConfirmButton:Mn,getContainer:Ss,getDenyButton:kl,getFocusableElements:Gm,getFooter:c0,getHtmlContainer:Vm,getIcon:ki,getIconContent:Y1,getImage:o0,getInputLabel:q1,getLoader:Di,getPopup:jt,getProgressSteps:Ym,getTimerLeft:PA,getTimerProgressBar:_d,getTitle:r0,getValidationMessage:kd,increaseTimer:YA,isDeprecatedParameter:H0,isLoading:X1,isTimerRunning:qA,isUpdatableParameter:F0,isValidParameter:U0,isVisible:BC,mixin:HA,off:ZA,on:KA,once:QA,resumeTimer:X0,showLoading:Si,stopTimer:G0,toggleTimer:VA});class eE{constructor(e,a){this.callback=e,this.remaining=a,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const a=this.running;return a&&this.stop(),this.remaining+=e,a&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const W0=["swal-title","swal-html","swal-footer"],tE=t=>{const e=typeof t.template=="string"?document.querySelector(t.template):t.template;if(!e)return{};const a=e.content;return cE(a),Object.assign(sE(a),nE(a),aE(a),lE(a),iE(a),rE(a),oE(a,W0))},sE=t=>{const e={};return Array.from(t.querySelectorAll("swal-param")).forEach(i=>{Cl(i,["name","value"]);const o=i.getAttribute("name"),d=i.getAttribute("value");!o||!d||(typeof yi[o]=="boolean"?e[o]=d!=="false":typeof yi[o]=="object"?e[o]=JSON.parse(d):e[o]=d)}),e},nE=t=>{const e={};return Array.from(t.querySelectorAll("swal-function-param")).forEach(i=>{const o=i.getAttribute("name"),d=i.getAttribute("value");!o||!d||(e[o]=new Function(`return ${d}`)())}),e},aE=t=>{const e={};return Array.from(t.querySelectorAll("swal-button")).forEach(i=>{Cl(i,["type","color","aria-label"]);const o=i.getAttribute("type");!o||!["confirm","cancel","deny"].includes(o)||(e[`${o}ButtonText`]=i.innerHTML,e[`show${Fm(o)}Button`]=!0,i.hasAttribute("color")&&(e[`${o}ButtonColor`]=i.getAttribute("color")),i.hasAttribute("aria-label")&&(e[`${o}ButtonAriaLabel`]=i.getAttribute("aria-label")))}),e},lE=t=>{const e={},a=t.querySelector("swal-image");return a&&(Cl(a,["src","width","height","alt"]),a.hasAttribute("src")&&(e.imageUrl=a.getAttribute("src")||void 0),a.hasAttribute("width")&&(e.imageWidth=a.getAttribute("width")||void 0),a.hasAttribute("height")&&(e.imageHeight=a.getAttribute("height")||void 0),a.hasAttribute("alt")&&(e.imageAlt=a.getAttribute("alt")||void 0)),e},iE=t=>{const e={},a=t.querySelector("swal-icon");return a&&(Cl(a,["type","color"]),a.hasAttribute("type")&&(e.icon=a.getAttribute("type")),a.hasAttribute("color")&&(e.iconColor=a.getAttribute("color")),e.iconHtml=a.innerHTML),e},rE=t=>{const e={},a=t.querySelector("swal-input");a&&(Cl(a,["type","label","placeholder","value"]),e.input=a.getAttribute("type")||"text",a.hasAttribute("label")&&(e.inputLabel=a.getAttribute("label")),a.hasAttribute("placeholder")&&(e.inputPlaceholder=a.getAttribute("placeholder")),a.hasAttribute("value")&&(e.inputValue=a.getAttribute("value")));const i=Array.from(t.querySelectorAll("swal-input-option"));return i.length&&(e.inputOptions={},i.forEach(o=>{Cl(o,["value"]);const d=o.getAttribute("value");if(!d)return;const u=o.innerHTML;e.inputOptions[d]=u})),e},oE=(t,e)=>{const a={};for(const i in e){const o=e[i],d=t.querySelector(o);d&&(Cl(d,[]),a[o.replace(/^swal-/,"")]=d.innerHTML.trim())}return a},cE=t=>{const e=W0.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(t.children).forEach(a=>{const i=a.tagName.toLowerCase();e.includes(i)||ws(`Unrecognized element <${i}>`)})},Cl=(t,e)=>{Array.from(t.attributes).forEach(a=>{e.indexOf(a.name)===-1&&ws([`Unrecognized attribute "${a.name}" on <${t.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},K0=10,dE=t=>{const e=Ss(),a=jt();typeof t.willOpen=="function"&&t.willOpen(a),Qe.eventEmitter.emit("willOpen",a);const o=window.getComputedStyle(document.body).overflowY;mE(e,a,t),setTimeout(()=>{uE(e,a)},K0),Xm()&&(hE(e,t.scrollbarPadding,o),XC()),!Dd()&&!Qe.previousActiveElement&&(Qe.previousActiveElement=document.activeElement),typeof t.didOpen=="function"&&setTimeout(()=>t.didOpen(a)),Qe.eventEmitter.emit("didOpen",a)},ud=t=>{const e=jt();if(t.target!==e)return;const a=Ss();e.removeEventListener("animationend",ud),e.removeEventListener("transitionend",ud),a.style.overflowY="auto",hn(a,pe["no-transition"])},uE=(t,e)=>{h0(e)?(t.style.overflowY="hidden",e.addEventListener("animationend",ud),e.addEventListener("transitionend",ud)):t.style.overflowY="auto"},hE=(t,e,a)=>{WC(),e&&a!=="hidden"&&sA(a),setTimeout(()=>{t.scrollTop=0})},mE=(t,e,a)=>{wt(t,a.showClass.backdrop),a.animation?(e.style.setProperty("opacity","0","important"),cs(e,"grid"),setTimeout(()=>{wt(e,a.showClass.popup),e.style.removeProperty("opacity")},K0)):cs(e,"grid"),wt([document.documentElement,document.body],pe.shown),a.heightAuto&&a.backdrop&&!a.toast&&wt([document.documentElement,document.body],pe["height-auto"])};var iy={email:(t,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(t,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(t)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function fE(t){t.inputValidator||(t.input==="email"&&(t.inputValidator=iy.email),t.input==="url"&&(t.inputValidator=iy.url))}function pE(t){(!t.target||typeof t.target=="string"&&!document.querySelector(t.target)||typeof t.target!="string"&&!t.target.appendChild)&&(ws('Target parameter is not valid, defaulting to "body"'),t.target="body")}function gE(t){fE(t),t.showLoaderOnConfirm&&!t.preConfirm&&ws(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),pE(t),typeof t.title=="string"&&(t.title=t.title.split(`
`).join("<br />")),iC(t)}let _n;var Ac=new WeakMap;class Zt{constructor(...e){if(O1(this,Ac,void 0),typeof window>"u")return;_n=this;const a=Object.freeze(this.constructor.argsToParams(e));this.params=a,this.isAwaitingPromise=!1,B1(Ac,this,this._main(_n.params))}_main(e,a={}){if(P0(Object.assign({},a,e)),Qe.currentInstance){const d=wi.swalPromiseResolve.get(Qe.currentInstance),{isAwaitingPromise:u}=Qe.currentInstance;Qe.currentInstance._destroy(),u||d({isDismissed:!0}),Xm()&&S0()}Qe.currentInstance=_n;const i=bE(e,a);gE(i),Object.freeze(i),Qe.timeout&&(Qe.timeout.stop(),delete Qe.timeout),clearTimeout(Qe.restoreFocusTimeout);const o=yE(_n);return v0(_n,i),Lt.innerParams.set(_n,i),xE(_n,o,i)}then(e){return Kb(Ac,this).then(e)}finally(e){return Kb(Ac,this).finally(e)}}const xE=(t,e,a)=>new Promise((i,o)=>{const d=u=>{t.close({isDismissed:!0,dismiss:u,isConfirmed:!1,isDenied:!1})};wi.swalPromiseResolve.set(t,i),wi.swalPromiseReject.set(t,o),e.confirmButton.onclick=()=>{yA(t)},e.denyButton.onclick=()=>{vA(t)},e.cancelButton.onclick=()=>{jA(t,d)},e.closeButton.onclick=()=>{d(Mi.close)},$A(a,e,d),FC(Qe,a,d),dA(t,a),dE(a),vE(Qe,a,d),jE(e,a),setTimeout(()=>{e.container.scrollTop=0})}),bE=(t,e)=>{const a=tE(t),i=Object.assign({},yi,e,a,t);return i.showClass=Object.assign({},yi.showClass,i.showClass),i.hideClass=Object.assign({},yi.hideClass,i.hideClass),i.animation===!1&&(i.showClass={backdrop:"swal2-noanimation"},i.hideClass={}),i},yE=t=>{const e={popup:jt(),container:Ss(),actions:Jr(),confirmButton:Mn(),denyButton:kl(),cancelButton:_i(),loader:Di(),closeButton:qm(),validationMessage:kd(),progressSteps:Ym()};return Lt.domCache.set(t,e),e},vE=(t,e,a)=>{const i=_d();ys(i),e.timer&&(t.timeout=new eE(()=>{a("timer"),delete t.timeout},e.timer),e.timerProgressBar&&(cs(i),Xs(i,e,"timerProgressBar"),setTimeout(()=>{t.timeout&&t.timeout.running&&Km(e.timer)})))},jE=(t,e)=>{if(!e.toast){if(!Td(e.allowEnterKey)){i0("allowEnterKey"),SE();return}NE(t)||wE(t,e)||Tm(-1,1)}},NE=t=>{const e=Array.from(t.popup.querySelectorAll("[autofocus]"));for(const a of e)if(a instanceof HTMLElement&&Is(a))return a.focus(),!0;return!1},wE=(t,e)=>e.focusDeny&&Is(t.denyButton)?(t.denyButton.focus(),!0):e.focusCancel&&Is(t.cancelButton)?(t.cancelButton.focus(),!0):e.focusConfirm&&Is(t.confirmButton)?(t.confirmButton.focus(),!0):!1,SE=()=>{document.activeElement instanceof HTMLElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur()};Zt.prototype.disableButtons=L0;Zt.prototype.enableButtons=R0;Zt.prototype.getInput=D0;Zt.prototype.disableInput=O0;Zt.prototype.enableInput=I0;Zt.prototype.hideLoading=cd;Zt.prototype.disableLoading=cd;Zt.prototype.showValidationMessage=B0;Zt.prototype.resetValidationMessage=z0;Zt.prototype.close=Ba;Zt.prototype.closePopup=Ba;Zt.prototype.closeModal=Ba;Zt.prototype.closeToast=Ba;Zt.prototype.rejectPromise=E0;Zt.prototype.update=V0;Zt.prototype._destroy=Y0;Object.assign(Zt,JA);Object.keys(MA).forEach(t=>{Zt[t]=function(...e){return _n&&_n[t]?_n[t](...e):null}});Zt.DismissReason=Mi;Zt.version="11.26.3";const Ve=Zt;Ve.default=Ve;typeof document<"u"&&(function(t,e){var a=t.createElement("style");if(t.getElementsByTagName("head")[0].appendChild(a),a.styleSheet)a.styleSheet.disabled||(a.styleSheet.cssText=e);else try{a.innerHTML=e}catch{a.innerText=e}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');function CE(){const{lectureId:t}=ht(),e=is(),[a,i]=x.useState([]),[o,d]=x.useState({}),[u,h]=x.useState(!0),[m,p]=x.useState(""),[b,y]=x.useState(!1);x.useEffect(()=>{let S=!0;return(async()=>{if(!t){p("    ."),h(!1);return}try{h(!0),p("");const F=await fetch("/classroom/api/v1/student/review",{headers:{Accept:"application/json"},credentials:"include"});if(F.ok){const R=await F.json();if(!S)return;if(Array.isArray(R)&&!R.includes(t)){await Ve.fire({icon:"info",title:"  ",text:"  .",confirmButtonText:""}),e(-1);return}}const z=await fetch(`/classroom/api/v1/student/${encodeURIComponent(t)}/review/question`,{headers:{Accept:"application/json"},credentials:"include"});if(!z.ok){const R=await z.text().catch(()=>"");throw new Error(R||`(${z.status})    .`)}const K=await z.json();if(!S)return;i(Array.isArray(K)?K:[])}catch(F){if(!S)return;p(F instanceof Error?F.message:"     ."),i([])}finally{S&&h(!1)}})(),()=>{S=!1}},[t,e]);const v=x.useMemo(()=>{const S=a.filter(z=>z.answerTypeCd==="OBJ_SINGLE"),M=a.filter(z=>z.answerTypeCd==="SUBJ_SRT"),F=a.filter(z=>z.answerTypeCd==="SUBJ_LONG");return{objective:S,shortAnswer:M,longAnswer:F}},[a]),N=(S,M)=>{d(F=>({...F,[S]:M}))},D=S=>{S.target.style.height="auto",S.target.style.height=S.target.scrollHeight+"px"},C=()=>{const S={};v.objective.forEach(M=>{S[M.questionNo]=String(Math.floor(Math.random()*3)+3)}),v.shortAnswer.forEach(M=>{S[M.questionNo]="      ."}),v.longAnswer.forEach(M=>{S[M.questionNo]="   ,     .      ."}),d(S)},A=async S=>{S.preventDefault();const M=[];if(v.objective.forEach((z,K)=>{(!o[z.questionNo]||o[z.questionNo].toString().trim()==="")&&M.push({section:" ",number:K+1})}),v.shortAnswer.forEach((z,K)=>{(!o[z.questionNo]||o[z.questionNo].toString().trim()==="")&&M.push({section:" ",number:K+1})}),v.longAnswer.forEach((z,K)=>{(!o[z.questionNo]||o[z.questionNo].toString().trim()==="")&&M.push({section:" ",number:K+1})}),M.length>0){const z={};M.forEach(R=>{z[R.section]||(z[R.section]=[]),z[R.section].push(R.number)});const K=Object.entries(z).map(([R,w])=>`${R} ${w.join(",")}`);await Ve.fire({icon:"warning",title:"   ",html:K.join("<br/>"),confirmButtonText:""});return}if((await Ve.fire({icon:"question",title:" ?",text:"    .",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed)try{y(!0),p("");const z=Object.entries(o).map(([w,_])=>({questionNo:Number(w),answer:_.toString()}));console.log("  :"),console.log(JSON.stringify(z,null,2));const K=await fetch(`/classroom/api/v1/student/${encodeURIComponent(t)}/review`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(z)});if(!K.ok){const w=await K.text().catch(()=>"");throw new Error(w||`(${K.status})   .`)}(await Ve.fire({icon:"success",title:" ",text:" .",showCancelButton:!0,confirmButtonText:" ",confirmButtonColor:"#dc3545",cancelButtonText:""})).isConfirmed?e(`/classroom/student/${t}/grade`):e(`/classroom/student/${t}`)}catch(z){p(z instanceof Error?z.message:"    .")}finally{y(!1)}};return s.jsxs("div",{className:"container",children:[s.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[s.jsx("h1",{className:"h4 mb-0",children:""}),s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:C,disabled:b||u,children:""})]}),m&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:m}),u?s.jsx("div",{className:"text-center py-5",children:s.jsx("div",{className:"spinner-border text-primary",role:"status",children:s.jsx("span",{className:"visually-hidden",children:" ..."})})}):a.length===0?s.jsx("div",{className:"alert alert-warning",children:"    ."}):s.jsxs("form",{onSubmit:A,children:[s.jsxs("div",{className:"alert alert-info mb-4",children:[s.jsx("strong",{children:":"}),"     .     ."]}),v.objective.length>0&&s.jsxs("div",{className:"review-section",children:[s.jsx("h2",{children:" "}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover objective-table",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"#"}),s.jsx("th",{children:""}),s.jsx("th",{className:"text-center",children:"  "}),s.jsx("th",{className:"text-center",children:" "}),s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:" "})]})}),s.jsx("tbody",{children:v.objective.map((S,M)=>s.jsxs("tr",{children:[s.jsx("td",{children:M+1}),s.jsx("td",{children:S.question}),["1","2","3","4","5"].map(F=>s.jsx("td",{className:"text-center",children:s.jsx("label",{className:"form-check-label",children:s.jsx("input",{type:"radio",name:`question-${S.questionNo}`,value:F,checked:o[S.questionNo]===F,onChange:z=>N(S.questionNo,z.target.value),disabled:b,className:"form-check-input"})})},F))]},S.questionNo))})]})})]}),v.shortAnswer.length>0&&s.jsxs("div",{className:"review-section",children:[s.jsx("h2",{children:" "}),v.shortAnswer.map((S,M)=>s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{className:"form-label",children:[M+1,". ",S.question]}),s.jsx("input",{type:"text",className:"form-control",value:o[S.questionNo]||"",onChange:F=>N(S.questionNo,F.target.value),placeholder:" ",disabled:b,maxLength:200})]},S.questionNo))]}),v.longAnswer.length>0&&s.jsxs("div",{className:"review-section",children:[s.jsx("h2",{children:" "}),v.longAnswer.map((S,M)=>s.jsxs("div",{className:"mb-3",children:[s.jsxs("label",{className:"form-label",children:[M+1,". ",S.question]}),s.jsx("textarea",{className:"form-control",value:o[S.questionNo]||"",onChange:F=>N(S.questionNo,F.target.value),onInput:D,placeholder:" ",rows:4,disabled:b,maxLength:1e3})]},S.questionNo))]}),s.jsxs("div",{className:"d-flex gap-2 justify-content-end",children:[s.jsx("button",{type:"button",className:"attendance-btn attendance-btn-default",onClick:()=>e(`/classroom/student/${t}`),disabled:b,style:{minWidth:"100px"},children:""}),s.jsx("button",{type:"submit",className:"attendance-btn attendance-btn-save",disabled:b,style:{minWidth:"100px"},children:b?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"})," ..."]}):" "})]})]})]})}const Rt={heading:"/",intro:"1   .     .",cta:" ",loading:"  ...",error:"    .    .",missingLecture:"    .",gradeLabel:"",gradeFallback:"-",gradeSectionTitle:" ",gradeSectionDescription:"       .",gradePlaceholder:"   .",professorTitle:"  ",professorPlaceholder:"    .",professorLoading:"    .",professorError:"    .    .",nameLabel:"",deptLabel:"",emailLabel:"",phoneLabel:"()",officeLabel:"",emptyData:"   ."},AE=t=>{if(t==null)return"";const e=Number(t);return Number.isFinite(e)?e.toFixed(2).replace(/\.?0+$/,""):""};function EE(){const{lectureId:t}=ht(),[e,a]=x.useState("idle"),[i,o]=x.useState(""),[d,u]=x.useState(null),[h,m]=x.useState(null),[p,b]=x.useState(!1),[y,v]=x.useState("loading"),N=x.useMemo(()=>{if(!d)return null;const M=d.gpaCd||Rt.gradeFallback,F=d.autoGrade,z=AE(F);return z?`${M}(${z})`:M},[d]),D=x.useMemo(()=>{if(!h)return"";const M=h.lastName||"",F=h.firstName||"";return`${M}${F}`.trim()},[h]),C=x.useMemo(()=>!h?.professorNo||p?null:`/classroom/api/v1/common/photo/professor/${encodeURIComponent(h.professorNo)}`,[p,h]),A=x.useCallback(async()=>{if(!t){o(Rt.missingLecture),a("error");return}a("loading"),o(""),u(null),b(!1);try{const M=encodeURIComponent(t),F=await fetch(`/classroom/api/v1/student/${M}/score`,{headers:{Accept:"application/json"},credentials:"include"});if(!F.ok)throw new Error(`${F.status} ${F.statusText}`);const z=await F.json(),K=Array.isArray(z)?z[0]||null:z||null;if(!K)throw new Error(Rt.emptyData);u(K),a("done")}catch(M){a("error"),o(M?.message||Rt.error)}},[t]),S=x.useMemo(()=>h?[{label:Rt.emailLabel,value:h.email||Rt.gradeFallback},{label:Rt.phoneLabel,value:h.mobileNo||Rt.gradeFallback},{label:Rt.officeLabel,value:h.officeNo||Rt.gradeFallback}]:[],[h]);return x.useEffect(()=>{if(!t){m(null),v("error");return}let M=!0;return(async()=>{v("loading"),b(!1);try{const z=encodeURIComponent(t),K=await fetch(`/classroom/api/v1/common/${z}/professor`,{headers:{Accept:"application/json"},credentials:"include"});if(!K.ok)throw new Error(`${K.status} ${K.statusText}`);const R=await K.json();if(!M)return;m(R&&typeof R=="object"?R:null),v("done")}catch{if(!M)return;m(null),v("error")}})(),()=>{M=!1}},[t]),s.jsx("div",{className:"card border-0 shadow-sm",children:s.jsxs("div",{className:"card-body",children:[s.jsx("h2",{className:"h5 mb-3",children:Rt.heading}),s.jsx("p",{className:"text-muted mb-4",children:Rt.intro}),e==="error"&&s.jsx("div",{className:"alert alert-danger rounded-4",role:"alert",children:i||Rt.error}),s.jsxs("div",{className:"row g-4",children:[s.jsx("div",{className:"col-12 col-lg-6",children:s.jsxs("div",{className:"border rounded-4 p-4 h-100",children:[s.jsx("h3",{className:"h6 mb-3 text-secondary fw-semibold",children:Rt.gradeSectionTitle}),s.jsx("p",{className:"text-muted small mb-4",children:Rt.gradeSectionDescription}),s.jsx("div",{className:"mb-4 text-center",style:{minHeight:"120px",display:"flex",alignItems:"center",justifyContent:"center"},children:e==="done"?s.jsx("div",{style:{fontSize:"3rem"},className:"fw-bold text-primary",children:N||Rt.gradeFallback}):e==="loading"?s.jsx("div",{className:"text-muted",children:Rt.loading}):null}),e!=="done"&&s.jsx("div",{className:"text-center mt-5",children:s.jsx("button",{type:"button",className:"btn btn-primary btn-lg px-4 shadow-sm",onClick:A,disabled:e==="loading",children:e==="loading"?Rt.loading:Rt.cta})})]})}),s.jsx("div",{className:"col-12 col-lg-6",children:s.jsxs("div",{className:"border rounded-4 p-4 h-100 bg-light",children:[s.jsx("h3",{className:"h6 mb-3 text-secondary fw-semibold",children:Rt.professorTitle}),y==="loading"&&s.jsx("p",{className:"text-muted small mb-0",children:Rt.professorLoading}),y==="error"&&s.jsx("p",{className:"text-danger small mb-0",children:Rt.professorError}),y==="done"&&h&&s.jsxs("div",{className:"d-flex flex-column flex-md-row align-items-start justify-content-between gap-4",children:[s.jsxs("div",{className:"flex-grow-1",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"fw-semibold fs-5",children:D||Rt.gradeFallback}),s.jsx("div",{className:"text-muted small",children:h.univDeptName||Rt.gradeFallback})]}),s.jsx("dl",{className:"row mb-0",children:S.map(({label:M,value:F})=>s.jsxs(Gs.Fragment,{children:[s.jsx("dt",{className:"col-sm-4 text-muted",children:M}),s.jsx("dd",{className:"col-sm-8",children:F||Rt.gradeFallback})]},M))})]}),s.jsx("div",{className:"flex-shrink-0 d-flex justify-content-end",children:C?s.jsx("img",{src:C,alt:D?`${D} Professor photo`:"Professor photo",className:"shadow-sm",style:{maxHeight:"240px",width:"auto",borderRadius:"1rem",objectFit:"contain"},onError:()=>b(!0)}):s.jsx("div",{className:"bg-secondary-subtle border d-flex align-items-center justify-content-center text-muted fw-semibold shadow-sm",style:{width:"180px",height:"220px",borderRadius:"1rem"},children:D?D[0]:"P"})})]}),y==="done"&&!h&&s.jsx("p",{className:"text-muted small mb-0",children:Rt.professorPlaceholder})]})})]})]})})}function TE(){const[t,e]=x.useState([]),[a,i]=x.useState(!0),[o,d]=x.useState(null),u=x.useMemo(()=>({MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""}),[]),h=x.useMemo(()=>({REG1:"1",REG2:"2",SUB1:"",SUB2:""}),[]),m=x.useMemo(()=>({REG1:1,REG2:2,SUB1:3,SUB2:4}),[]),p=x.useMemo(()=>({scheduleHeading:"",scheduleEmpty:"  ."}),[]),b=w=>{if(!w||String(w).length<4)return"--:--";const _=String(w);return`${_.slice(0,2)}:${_.slice(2,4)}`},y=w=>String(w??"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;"),v=w=>{if(!w)return[];try{if(Array.isArray(w))return w;if(typeof w=="string")return JSON.parse(w)}catch{}return[]},N=w=>{if(!w)return{year:0,order:99,termCd:""};const[_="0",B=""]=String(w).split("_");return{year:Number(_)||0,order:m[B]??99,termCd:B}},D=w=>w.slice().sort((_,B)=>{const T=N(_.yeartermCd),U=N(B.yeartermCd);return T.year!==U.year?U.year-T.year:T.order!==U.order?T.order-U.order:(_.subjectName||"").localeCompare(B.subjectName||"","ko")}),C=w=>{if(!w)return"  ";const[_,B]=String(w).split("_"),T=h[B]??B??"";return T?`${_} ${T}`:`${_}`},A=w=>{if(!w)return"";const _=new Date(w);if(Number.isNaN(_.getTime()))return"";const B=String(_.getMonth()+1).padStart(2,"0"),T=String(_.getDate()).padStart(2,"0");return`${_.getFullYear()}-${B}-${T}`},S=w=>w.length?w.map((_,B)=>{const T=_?.placeName||_?.placeCd||"  ",U=Array.isArray(_?.slots)?_.slots:[];return s.jsxs("div",{className:"mb-2",children:[s.jsx("div",{className:"badge bg-light text-dark border me-2",children:T}),s.jsx("ul",{className:"mb-0 ps-3",children:U.length===0?s.jsx("li",{className:"text-muted",children:p.scheduleEmpty}):U.map((V,q)=>{const H=u[V?.day]??V?.day??"";return s.jsxs("li",{children:[H," ",b(V?.start),"-",b(V?.end)]},`${T}-${B}-${q}`)})})]},`${T}-${B}`)}):s.jsx("p",{className:"text-muted mb-0",children:p.scheduleEmpty});x.useEffect(()=>{let w=!0;return(async()=>{try{i(!0),d(null);const _=await fetch("/classroom/api/v1/professor/mylist",{headers:{Accept:"application/json"},credentials:"include"});if(!_.ok)throw new Error(`(${_.status})    .`);const B=await _.text();if(!w)return;let T=[];if(B&&B.trim())try{T=JSON.parse(B)}catch(U){console.warn("JSON  :",U),T=[]}Array.isArray(T)||(T=[]),e(T)}catch(_){if(!w)return;d(_)}finally{w&&i(!1)}})(),()=>{w=!1}},[]);const M=x.useMemo(()=>{const w=t.filter(_=>!_.started&&!_.ended);return D(w)},[t]),F=x.useMemo(()=>{const w=t.filter(_=>_.started&&!_.ended);return D(w)},[t]),z=x.useMemo(()=>D(t.filter(w=>!!w.ended)),[t]),K=({lecture:w})=>{const _=v(w.scheduleJson);let B;w.ended?B=s.jsx("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle",children:""}):w.started?B=s.jsx("span",{className:"badge bg-success-subtle text-success border border-success-subtle",children:""}):B=s.jsx("span",{className:"badge bg-info-subtle text-info border border-info-subtle",children:""});const T=C(w.yeartermCd),U=w.deptName||"-",V=w.subjectName||"-",q=w.professorName||"-",H=w.completion||w.completionName||"-",E=w.subjectTypeName||"-",L=w.credit??w.creditPoint??"-",$=w.hour??w.classHour??"-",O=w.capacityText||w.capacity||"",Q=w.ended?w.endDate?`: ${A(w.endDate)}`:"":"",Z=w.lectureId||w.id||w.lectureNo;return s.jsx("div",{className:"col-12 col-md-6 col-lg-4",children:s.jsx("article",{className:"card h-100 position-relative",children:s.jsxs("div",{className:"card-body d-flex flex-column",children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[s.jsx("h3",{className:"h6 mb-0 text-truncate",title:V,children:V}),B]}),s.jsx("div",{className:"text-muted small mb-2",children:T}),s.jsx("div",{className:"mb-2 small text-body-secondary",children:U}),s.jsxs("ul",{className:"list-unstyled small mb-3",children:[s.jsxs("li",{children:[": ",y(q)]}),s.jsxs("li",{children:[": ",y(H)]}),s.jsxs("li",{children:[": ",y(E)]}),s.jsxs("li",{children:[" / : ",y(String(L)),"  ",y(String($))]}),O?s.jsxs("li",{children:[": ",y(String(O))]}):null]}),s.jsxs("div",{className:"mb-2",children:[s.jsx("strong",{className:"d-block mb-1",children:""}),S(_)]}),Q&&s.jsx("div",{className:"mt-auto text-muted small",children:Q}),Z&&s.jsx(st,{to:`/classroom/professor/${encodeURIComponent(Z)}`,className:"stretched-link","aria-label":`${V}  `})]})})})},R=({id:w,title:_,items:B,defaultOpen:T})=>s.jsxs("div",{className:"accordion-item",children:[s.jsx("h2",{className:"accordion-header",id:`${w}-heading`,children:s.jsxs("button",{className:`accordion-button ${T?"":"collapsed"}`,type:"button","data-bs-toggle":"collapse","data-bs-target":`#${w}-collapse`,"aria-expanded":T?"true":"false","aria-controls":`${w}-collapse`,"data-bs-parent":"#lectures-accordion",children:[_,s.jsxs("span",{className:"badge bg-secondary-subtle text-secondary border border-secondary-subtle ms-2",children:[B.length,""]})]})}),s.jsx("div",{id:`${w}-collapse`,className:`accordion-collapse collapse ${T?"show":""}`,"aria-labelledby":`${w}-heading`,"data-bs-parent":"#lectures-accordion",children:s.jsx("div",{className:"accordion-body",children:B.length?s.jsx("div",{className:"row g-3",children:B.map(U=>s.jsx(K,{lecture:U},U.lectureId||`${U.subjectName}-${U.yeartermCd}`))}):s.jsx("div",{className:"text-muted text-center py-4",children:"  ."})})})]});return s.jsxs(Ed,{role:"professor",children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("h1",{className:"h4 mb-0",children:" "}),s.jsx("div",{className:"text-muted small","aria-live":"polite",children:a?" ":` ${M.length}   ${F.length}   ${z.length}`})]}),o&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:String(o.message||o)}),!o&&s.jsxs("div",{className:"accordion",id:"lectures-accordion",children:[s.jsx(R,{id:"prof-ongoing",title:" ",items:F,defaultOpen:!0}),s.jsx(R,{id:"prof-upcoming",title:" ",items:M,defaultOpen:!1}),s.jsx(R,{id:"prof-ended",title:" ",items:z,defaultOpen:!1})]})]})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function no(t){return t+.5|0}const za=(t,e,a)=>Math.max(Math.min(t,a),e);function Or(t){return za(no(t*2.55),0,255)}function Ya(t){return za(no(t*255),0,255)}function aa(t){return za(no(t/2.55)/100,0,1)}function ry(t){return za(no(t*100),0,100)}const un={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},_m=[..."0123456789ABCDEF"],kE=t=>_m[t&15],_E=t=>_m[(t&240)>>4]+_m[t&15],Ec=t=>(t&240)>>4===(t&15),DE=t=>Ec(t.r)&&Ec(t.g)&&Ec(t.b)&&Ec(t.a);function ME(t){var e=t.length,a;return t[0]==="#"&&(e===4||e===5?a={r:255&un[t[1]]*17,g:255&un[t[2]]*17,b:255&un[t[3]]*17,a:e===5?un[t[4]]*17:255}:(e===7||e===9)&&(a={r:un[t[1]]<<4|un[t[2]],g:un[t[3]]<<4|un[t[4]],b:un[t[5]]<<4|un[t[6]],a:e===9?un[t[7]]<<4|un[t[8]]:255})),a}const $E=(t,e)=>t<255?e(t):"";function RE(t){var e=DE(t)?kE:_E;return t?"#"+e(t.r)+e(t.g)+e(t.b)+$E(t.a,e):void 0}const LE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Q0(t,e,a){const i=e*Math.min(a,1-a),o=(d,u=(d+t/30)%12)=>a-i*Math.max(Math.min(u-3,9-u,1),-1);return[o(0),o(8),o(4)]}function IE(t,e,a){const i=(o,d=(o+t/60)%6)=>a-a*e*Math.max(Math.min(d,4-d,1),0);return[i(5),i(3),i(1)]}function OE(t,e,a){const i=Q0(t,1,.5);let o;for(e+a>1&&(o=1/(e+a),e*=o,a*=o),o=0;o<3;o++)i[o]*=1-e-a,i[o]+=e;return i}function BE(t,e,a,i,o){return t===o?(e-a)/i+(e<a?6:0):e===o?(a-t)/i+2:(t-e)/i+4}function sf(t){const a=t.r/255,i=t.g/255,o=t.b/255,d=Math.max(a,i,o),u=Math.min(a,i,o),h=(d+u)/2;let m,p,b;return d!==u&&(b=d-u,p=h>.5?b/(2-d-u):b/(d+u),m=BE(a,i,o,b,d),m=m*60+.5),[m|0,p||0,h]}function nf(t,e,a,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,a,i)).map(Ya)}function af(t,e,a){return nf(Q0,t,e,a)}function zE(t,e,a){return nf(OE,t,e,a)}function UE(t,e,a){return nf(IE,t,e,a)}function Z0(t){return(t%360+360)%360}function FE(t){const e=LE.exec(t);let a=255,i;if(!e)return;e[5]!==i&&(a=e[6]?Or(+e[5]):Ya(+e[5]));const o=Z0(+e[2]),d=+e[3]/100,u=+e[4]/100;return e[1]==="hwb"?i=zE(o,d,u):e[1]==="hsv"?i=UE(o,d,u):i=af(o,d,u),{r:i[0],g:i[1],b:i[2],a}}function HE(t,e){var a=sf(t);a[0]=Z0(a[0]+e),a=af(a),t.r=a[0],t.g=a[1],t.b=a[2]}function PE(t){if(!t)return;const e=sf(t),a=e[0],i=ry(e[1]),o=ry(e[2]);return t.a<255?`hsla(${a}, ${i}%, ${o}%, ${aa(t.a)})`:`hsl(${a}, ${i}%, ${o}%)`}const oy={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},cy={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function VE(){const t={},e=Object.keys(cy),a=Object.keys(oy);let i,o,d,u,h;for(i=0;i<e.length;i++){for(u=h=e[i],o=0;o<a.length;o++)d=a[o],h=h.replace(d,oy[d]);d=parseInt(cy[u],16),t[h]=[d>>16&255,d>>8&255,d&255]}return t}let Tc;function YE(t){Tc||(Tc=VE(),Tc.transparent=[0,0,0,0]);const e=Tc[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const qE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function GE(t){const e=qE.exec(t);let a=255,i,o,d;if(e){if(e[7]!==i){const u=+e[7];a=e[8]?Or(u):za(u*255,0,255)}return i=+e[1],o=+e[3],d=+e[5],i=255&(e[2]?Or(i):za(i,0,255)),o=255&(e[4]?Or(o):za(o,0,255)),d=255&(e[6]?Or(d):za(d,0,255)),{r:i,g:o,b:d,a}}}function XE(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${aa(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const lm=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,fi=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function WE(t,e,a){const i=fi(aa(t.r)),o=fi(aa(t.g)),d=fi(aa(t.b));return{r:Ya(lm(i+a*(fi(aa(e.r))-i))),g:Ya(lm(o+a*(fi(aa(e.g))-o))),b:Ya(lm(d+a*(fi(aa(e.b))-d))),a:t.a+a*(e.a-t.a)}}function kc(t,e,a){if(t){let i=sf(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*a,e===0?360:1)),i=af(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function J0(t,e){return t&&Object.assign(e||{},t)}function dy(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Ya(t[3]))):(e=J0(t,{r:0,g:0,b:0,a:1}),e.a=Ya(e.a)),e}function KE(t){return t.charAt(0)==="r"?GE(t):FE(t)}class Gr{constructor(e){if(e instanceof Gr)return e;const a=typeof e;let i;a==="object"?i=dy(e):a==="string"&&(i=ME(e)||YE(e)||KE(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=J0(this._rgb);return e&&(e.a=aa(e.a)),e}set rgb(e){this._rgb=dy(e)}rgbString(){return this._valid?XE(this._rgb):void 0}hexString(){return this._valid?RE(this._rgb):void 0}hslString(){return this._valid?PE(this._rgb):void 0}mix(e,a){if(e){const i=this.rgb,o=e.rgb;let d;const u=a===d?.5:a,h=2*u-1,m=i.a-o.a,p=((h*m===-1?h:(h+m)/(1+h*m))+1)/2;d=1-p,i.r=255&p*i.r+d*o.r+.5,i.g=255&p*i.g+d*o.g+.5,i.b=255&p*i.b+d*o.b+.5,i.a=u*i.a+(1-u)*o.a,this.rgb=i}return this}interpolate(e,a){return e&&(this._rgb=WE(this._rgb,e._rgb,a)),this}clone(){return new Gr(this.rgb)}alpha(e){return this._rgb.a=Ya(e),this}clearer(e){const a=this._rgb;return a.a*=1-e,this}greyscale(){const e=this._rgb,a=no(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=a,this}opaquer(e){const a=this._rgb;return a.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return kc(this._rgb,2,e),this}darken(e){return kc(this._rgb,2,-e),this}saturate(e){return kc(this._rgb,1,e),this}desaturate(e){return kc(this._rgb,1,-e),this}rotate(e){return HE(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function ta(){}const QE=(()=>{let t=0;return()=>t++})();function Mt(t){return t==null}function os(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function bt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function mn(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function An(t,e){return mn(t)?t:e}function xt(t,e){return typeof t>"u"?e:t}const ZE=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100:+t/e,ej=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function zt(t,e,a){if(t&&typeof t.call=="function")return t.apply(a,e)}function At(t,e,a,i){let o,d,u;if(os(t))for(d=t.length,o=0;o<d;o++)e.call(a,t[o],o);else if(bt(t))for(u=Object.keys(t),d=u.length,o=0;o<d;o++)e.call(a,t[u[o]],u[o])}function hd(t,e){let a,i,o,d;if(!t||!e||t.length!==e.length)return!1;for(a=0,i=t.length;a<i;++a)if(o=t[a],d=e[a],o.datasetIndex!==d.datasetIndex||o.index!==d.index)return!1;return!0}function md(t){if(os(t))return t.map(md);if(bt(t)){const e=Object.create(null),a=Object.keys(t),i=a.length;let o=0;for(;o<i;++o)e[a[o]]=md(t[a[o]]);return e}return t}function tj(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function JE(t,e,a,i){if(!tj(t))return;const o=e[t],d=a[t];bt(o)&&bt(d)?Xr(o,d,i):e[t]=md(d)}function Xr(t,e,a){const i=os(e)?e:[e],o=i.length;if(!bt(t))return t;a=a||{};const d=a.merger||JE;let u;for(let h=0;h<o;++h){if(u=i[h],!bt(u))continue;const m=Object.keys(u);for(let p=0,b=m.length;p<b;++p)d(m[p],t,u,a)}return t}function Fr(t,e){return Xr(t,e,{merger:eT})}function eT(t,e,a){if(!tj(t))return;const i=e[t],o=a[t];bt(i)&&bt(o)?Fr(i,o):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=md(o))}const uy={"":t=>t,x:t=>t.x,y:t=>t.y};function tT(t){const e=t.split("."),a=[];let i="";for(const o of e)i+=o,i.endsWith("\\")?i=i.slice(0,-1)+".":(a.push(i),i="");return a}function sT(t){const e=tT(t);return a=>{for(const i of e){if(i==="")break;a=a&&a[i]}return a}}function Al(t,e){return(uy[e]||(uy[e]=sT(e)))(t)}function lf(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Wr=t=>typeof t<"u",Ga=t=>typeof t=="function",hy=(t,e)=>{if(t.size!==e.size)return!1;for(const a of t)if(!e.has(a))return!1;return!0};function nT(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ut=Math.PI,ns=2*Ut,fd=Number.POSITIVE_INFINITY,aT=Ut/180,ls=Ut/2,xl=Ut/4,my=Ut*2/3,sj=Math.log10,qa=Math.sign;function Xc(t,e,a){return Math.abs(t-e)<a}function fy(t){const e=Math.round(t);t=Xc(t,e,t/1e3)?e:t;const a=Math.pow(10,Math.floor(sj(t))),i=t/a;return(i<=1?1:i<=2?2:i<=5?5:10)*a}function lT(t){const e=[],a=Math.sqrt(t);let i;for(i=1;i<a;i++)t%i===0&&(e.push(i),e.push(t/i));return a===(a|0)&&e.push(a),e.sort((o,d)=>o-d).pop(),e}function iT(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function pd(t){return!iT(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function rT(t,e){const a=Math.round(t);return a-e<=t&&a+e>=t}function oT(t,e,a){let i,o,d;for(i=0,o=t.length;i<o;i++)d=t[i][a],isNaN(d)||(e.min=Math.min(e.min,d),e.max=Math.max(e.max,d))}function la(t){return t*(Ut/180)}function cT(t){return t*(180/Ut)}function py(t){if(!mn(t))return;let e=1,a=0;for(;Math.round(t*e)/e!==t;)e*=10,a++;return a}function nj(t,e){const a=e.x-t.x,i=e.y-t.y,o=Math.sqrt(a*a+i*i);let d=Math.atan2(i,a);return d<-.5*Ut&&(d+=ns),{angle:d,distance:o}}function dT(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Dn(t){return(t%ns+ns)%ns}function gd(t,e,a,i){const o=Dn(t),d=Dn(e),u=Dn(a),h=Dn(d-o),m=Dn(u-o),p=Dn(o-d),b=Dn(o-u);return o===d||o===u||i&&d===u||h>m&&p<b}function Rs(t,e,a){return Math.max(e,Math.min(a,t))}function uT(t){return Rs(t,-32768,32767)}function Nl(t,e,a,i=1e-6){return t>=Math.min(e,a)-i&&t<=Math.max(e,a)+i}function rf(t,e,a){a=a||(u=>t[u]<e);let i=t.length-1,o=0,d;for(;i-o>1;)d=o+i>>1,a(d)?o=d:i=d;return{lo:o,hi:i}}const Dm=(t,e,a,i)=>rf(t,a,i?o=>{const d=t[o][e];return d<a||d===a&&t[o+1][e]===a}:o=>t[o][e]<a),hT=(t,e,a)=>rf(t,a,i=>t[i][e]>=a);function mT(t,e,a){let i=0,o=t.length;for(;i<o&&t[i]<e;)i++;for(;o>i&&t[o-1]>a;)o--;return i>0||o<t.length?t.slice(i,o):t}const aj=["push","pop","shift","splice","unshift"];function fT(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),aj.forEach(a=>{const i="_onData"+lf(a),o=t[a];Object.defineProperty(t,a,{configurable:!0,enumerable:!1,value(...d){const u=o.apply(this,d);return t._chartjs.listeners.forEach(h=>{typeof h[i]=="function"&&h[i](...d)}),u}})})}function gy(t,e){const a=t._chartjs;if(!a)return;const i=a.listeners,o=i.indexOf(e);o!==-1&&i.splice(o,1),!(i.length>0)&&(aj.forEach(d=>{delete t[d]}),delete t._chartjs)}function lj(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ij=(function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame})();function rj(t,e){let a=[],i=!1;return function(...o){a=o,i||(i=!0,ij.call(window,()=>{i=!1,t.apply(e,a)}))}}function pT(t,e){let a;return function(...i){return e?(clearTimeout(a),a=setTimeout(t,e,i)):t.apply(this,i),e}}const oj=t=>t==="start"?"left":t==="end"?"right":"center",qs=(t,e,a)=>t==="start"?e:t==="end"?a:(e+a)/2,gT=(t,e,a,i)=>t===(i?"left":"right")?a:t==="center"?(e+a)/2:e,_c=t=>t===0||t===1,xy=(t,e,a)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*ns/a)),by=(t,e,a)=>Math.pow(2,-10*t)*Math.sin((t-e)*ns/a)+1,Hr={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*ls)+1,easeOutSine:t=>Math.sin(t*ls),easeInOutSine:t=>-.5*(Math.cos(Ut*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>_c(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>_c(t)?t:xy(t,.075,.3),easeOutElastic:t=>_c(t)?t:by(t,.075,.3),easeInOutElastic(t){return _c(t)?t:t<.5?.5*xy(t*2,.1125,.45):.5+.5*by(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Hr.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Hr.easeInBounce(t*2)*.5:Hr.easeOutBounce(t*2-1)*.5+.5};function cj(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function yy(t){return cj(t)?t:new Gr(t)}function im(t){return cj(t)?t:new Gr(t).saturate(.5).darken(.1).hexString()}const xT=["x","y","borderWidth","radius","tension"],bT=["color","borderColor","backgroundColor"];function yT(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:bT},numbers:{type:"number",properties:xT}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function vT(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const vy=new Map;function jT(t,e){e=e||{};const a=t+JSON.stringify(e);let i=vy.get(a);return i||(i=new Intl.NumberFormat(t,e),vy.set(a,i)),i}function of(t,e,a){return jT(e,a).format(t)}const NT={values(t){return os(t)?t:""+t},numeric(t,e,a){if(t===0)return"0";const i=this.chart.options.locale;let o,d=t;if(a.length>1){const p=Math.max(Math.abs(a[0].value),Math.abs(a[a.length-1].value));(p<1e-4||p>1e15)&&(o="scientific"),d=wT(t,a)}const u=sj(Math.abs(d)),h=isNaN(u)?1:Math.max(Math.min(-1*Math.floor(u),20),0),m={notation:o,minimumFractionDigits:h,maximumFractionDigits:h};return Object.assign(m,this.options.ticks.format),of(t,i,m)}};function wT(t,e){let a=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(a)>=1&&t!==Math.floor(t)&&(a=t-Math.floor(t)),a}var dj={formatters:NT};function ST(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,a)=>a.lineWidth,tickColor:(e,a)=>a.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:dj.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const El=Object.create(null),Mm=Object.create(null);function Pr(t,e){if(!e)return t;const a=e.split(".");for(let i=0,o=a.length;i<o;++i){const d=a[i];t=t[d]||(t[d]=Object.create(null))}return t}function rm(t,e,a){return typeof e=="string"?Xr(Pr(t,e),a):Xr(Pr(t,""),e)}class CT{constructor(e,a){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,o)=>im(o.backgroundColor),this.hoverBorderColor=(i,o)=>im(o.borderColor),this.hoverColor=(i,o)=>im(o.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(a)}set(e,a){return rm(this,e,a)}get(e){return Pr(this,e)}describe(e,a){return rm(Mm,e,a)}override(e,a){return rm(El,e,a)}route(e,a,i,o){const d=Pr(this,e),u=Pr(this,i),h="_"+a;Object.defineProperties(d,{[h]:{value:d[a],writable:!0},[a]:{enumerable:!0,get(){const m=this[h],p=u[o];return bt(m)?Object.assign({},p,m):xt(m,p)},set(m){this[h]=m}}})}apply(e){e.forEach(a=>a(this))}}var Qt=new CT({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[yT,vT,ST]);function AT(t){return!t||Mt(t.size)||Mt(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function jy(t,e,a,i,o){let d=e[o];return d||(d=e[o]=t.measureText(o).width,a.push(o)),d>i&&(i=d),i}function bl(t,e,a){const i=t.currentDevicePixelRatio,o=a!==0?Math.max(a/2,.5):0;return Math.round((e-o)*i)/i+o}function Ny(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function wy(t,e,a,i){uj(t,e,a,i,null)}function uj(t,e,a,i,o){let d,u,h,m,p,b,y,v;const N=e.pointStyle,D=e.rotation,C=e.radius;let A=(D||0)*aT;if(N&&typeof N=="object"&&(d=N.toString(),d==="[object HTMLImageElement]"||d==="[object HTMLCanvasElement]")){t.save(),t.translate(a,i),t.rotate(A),t.drawImage(N,-N.width/2,-N.height/2,N.width,N.height),t.restore();return}if(!(isNaN(C)||C<=0)){switch(t.beginPath(),N){default:o?t.ellipse(a,i,o/2,C,0,0,ns):t.arc(a,i,C,0,ns),t.closePath();break;case"triangle":b=o?o/2:C,t.moveTo(a+Math.sin(A)*b,i-Math.cos(A)*C),A+=my,t.lineTo(a+Math.sin(A)*b,i-Math.cos(A)*C),A+=my,t.lineTo(a+Math.sin(A)*b,i-Math.cos(A)*C),t.closePath();break;case"rectRounded":p=C*.516,m=C-p,u=Math.cos(A+xl)*m,y=Math.cos(A+xl)*(o?o/2-p:m),h=Math.sin(A+xl)*m,v=Math.sin(A+xl)*(o?o/2-p:m),t.arc(a-y,i-h,p,A-Ut,A-ls),t.arc(a+v,i-u,p,A-ls,A),t.arc(a+y,i+h,p,A,A+ls),t.arc(a-v,i+u,p,A+ls,A+Ut),t.closePath();break;case"rect":if(!D){m=Math.SQRT1_2*C,b=o?o/2:m,t.rect(a-b,i-m,2*b,2*m);break}A+=xl;case"rectRot":y=Math.cos(A)*(o?o/2:C),u=Math.cos(A)*C,h=Math.sin(A)*C,v=Math.sin(A)*(o?o/2:C),t.moveTo(a-y,i-h),t.lineTo(a+v,i-u),t.lineTo(a+y,i+h),t.lineTo(a-v,i+u),t.closePath();break;case"crossRot":A+=xl;case"cross":y=Math.cos(A)*(o?o/2:C),u=Math.cos(A)*C,h=Math.sin(A)*C,v=Math.sin(A)*(o?o/2:C),t.moveTo(a-y,i-h),t.lineTo(a+y,i+h),t.moveTo(a+v,i-u),t.lineTo(a-v,i+u);break;case"star":y=Math.cos(A)*(o?o/2:C),u=Math.cos(A)*C,h=Math.sin(A)*C,v=Math.sin(A)*(o?o/2:C),t.moveTo(a-y,i-h),t.lineTo(a+y,i+h),t.moveTo(a+v,i-u),t.lineTo(a-v,i+u),A+=xl,y=Math.cos(A)*(o?o/2:C),u=Math.cos(A)*C,h=Math.sin(A)*C,v=Math.sin(A)*(o?o/2:C),t.moveTo(a-y,i-h),t.lineTo(a+y,i+h),t.moveTo(a+v,i-u),t.lineTo(a-v,i+u);break;case"line":u=o?o/2:Math.cos(A)*C,h=Math.sin(A)*C,t.moveTo(a-u,i-h),t.lineTo(a+u,i+h);break;case"dash":t.moveTo(a,i),t.lineTo(a+Math.cos(A)*(o?o/2:C),i+Math.sin(A)*C);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function hj(t,e,a){return a=a||.5,!e||t&&t.x>e.left-a&&t.x<e.right+a&&t.y>e.top-a&&t.y<e.bottom+a}function cf(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function df(t){t.restore()}function ET(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Mt(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function TT(t,e,a,i,o){if(o.strikethrough||o.underline){const d=t.measureText(i),u=e-d.actualBoundingBoxLeft,h=e+d.actualBoundingBoxRight,m=a-d.actualBoundingBoxAscent,p=a+d.actualBoundingBoxDescent,b=o.strikethrough?(m+p)/2:p;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=o.decorationWidth||2,t.moveTo(u,b),t.lineTo(h,b),t.stroke()}}function kT(t,e){const a=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=a}function xd(t,e,a,i,o,d={}){const u=os(e)?e:[e],h=d.strokeWidth>0&&d.strokeColor!=="";let m,p;for(t.save(),t.font=o.string,ET(t,d),m=0;m<u.length;++m)p=u[m],d.backdrop&&kT(t,d.backdrop),h&&(d.strokeColor&&(t.strokeStyle=d.strokeColor),Mt(d.strokeWidth)||(t.lineWidth=d.strokeWidth),t.strokeText(p,a,i,d.maxWidth)),t.fillText(p,a,i,d.maxWidth),TT(t,a,i,p,d),i+=Number(o.lineHeight);t.restore()}function bd(t,e){const{x:a,y:i,w:o,h:d,radius:u}=e;t.arc(a+u.topLeft,i+u.topLeft,u.topLeft,1.5*Ut,Ut,!0),t.lineTo(a,i+d-u.bottomLeft),t.arc(a+u.bottomLeft,i+d-u.bottomLeft,u.bottomLeft,Ut,ls,!0),t.lineTo(a+o-u.bottomRight,i+d),t.arc(a+o-u.bottomRight,i+d-u.bottomRight,u.bottomRight,ls,0,!0),t.lineTo(a+o,i+u.topRight),t.arc(a+o-u.topRight,i+u.topRight,u.topRight,0,-ls,!0),t.lineTo(a+u.topLeft,i)}const _T=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,DT=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function MT(t,e){const a=(""+t).match(_T);if(!a||a[1]==="normal")return e*1.2;switch(t=+a[2],a[3]){case"px":return t;case"%":t/=100;break}return e*t}const $T=t=>+t||0;function uf(t,e){const a={},i=bt(e),o=i?Object.keys(e):e,d=bt(t)?i?u=>xt(t[u],t[e[u]]):u=>t[u]:()=>t;for(const u of o)a[u]=$T(d(u));return a}function mj(t){return uf(t,{top:"y",right:"x",bottom:"y",left:"x"})}function vi(t){return uf(t,["topLeft","topRight","bottomLeft","bottomRight"])}function vn(t){const e=mj(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ls(t,e){t=t||{},e=e||Qt.font;let a=xt(t.size,e.size);typeof a=="string"&&(a=parseInt(a,10));let i=xt(t.style,e.style);i&&!(""+i).match(DT)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const o={family:xt(t.family,e.family),lineHeight:MT(xt(t.lineHeight,e.lineHeight),a),size:a,style:i,weight:xt(t.weight,e.weight),string:""};return o.string=AT(o),o}function Dc(t,e,a,i){let o,d,u;for(o=0,d=t.length;o<d;++o)if(u=t[o],u!==void 0&&u!==void 0)return u}function RT(t,e,a){const{min:i,max:o}=t,d=ej(e,(o-i)/2),u=(h,m)=>a&&h===0?0:h+m;return{min:u(i,-Math.abs(d)),max:u(o,d)}}function $i(t,e){return Object.assign(Object.create(t),e)}function hf(t,e=[""],a,i,o=()=>t[0]){const d=a||t;typeof i>"u"&&(i=xj("_fallback",t));const u={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:d,_fallback:i,_getTarget:o,override:h=>hf([h,...t],e,d,i)};return new Proxy(u,{deleteProperty(h,m){return delete h[m],delete h._keys,delete t[0][m],!0},get(h,m){return pj(h,m,()=>HT(m,e,t,h))},getOwnPropertyDescriptor(h,m){return Reflect.getOwnPropertyDescriptor(h._scopes[0],m)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(h,m){return Cy(h).includes(m)},ownKeys(h){return Cy(h)},set(h,m,p){const b=h._storage||(h._storage=o());return h[m]=b[m]=p,delete h._keys,!0}})}function Ci(t,e,a,i){const o={_cacheable:!1,_proxy:t,_context:e,_subProxy:a,_stack:new Set,_descriptors:fj(t,i),setContext:d=>Ci(t,d,a,i),override:d=>Ci(t.override(d),e,a,i)};return new Proxy(o,{deleteProperty(d,u){return delete d[u],delete t[u],!0},get(d,u,h){return pj(d,u,()=>IT(d,u,h))},getOwnPropertyDescriptor(d,u){return d._descriptors.allKeys?Reflect.has(t,u)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,u)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(d,u){return Reflect.has(t,u)},ownKeys(){return Reflect.ownKeys(t)},set(d,u,h){return t[u]=h,delete d[u],!0}})}function fj(t,e={scriptable:!0,indexable:!0}){const{_scriptable:a=e.scriptable,_indexable:i=e.indexable,_allKeys:o=e.allKeys}=t;return{allKeys:o,scriptable:a,indexable:i,isScriptable:Ga(a)?a:()=>a,isIndexable:Ga(i)?i:()=>i}}const LT=(t,e)=>t?t+lf(e):e,mf=(t,e)=>bt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function pj(t,e,a){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=a();return t[e]=i,i}function IT(t,e,a){const{_proxy:i,_context:o,_subProxy:d,_descriptors:u}=t;let h=i[e];return Ga(h)&&u.isScriptable(e)&&(h=OT(e,h,t,a)),os(h)&&h.length&&(h=BT(e,h,t,u.isIndexable)),mf(e,h)&&(h=Ci(h,o,d&&d[e],u)),h}function OT(t,e,a,i){const{_proxy:o,_context:d,_subProxy:u,_stack:h}=a;if(h.has(t))throw new Error("Recursion detected: "+Array.from(h).join("->")+"->"+t);h.add(t);let m=e(d,u||i);return h.delete(t),mf(t,m)&&(m=ff(o._scopes,o,t,m)),m}function BT(t,e,a,i){const{_proxy:o,_context:d,_subProxy:u,_descriptors:h}=a;if(typeof d.index<"u"&&i(t))return e[d.index%e.length];if(bt(e[0])){const m=e,p=o._scopes.filter(b=>b!==m);e=[];for(const b of m){const y=ff(p,o,t,b);e.push(Ci(y,d,u&&u[t],h))}}return e}function gj(t,e,a){return Ga(t)?t(e,a):t}const zT=(t,e)=>t===!0?e:typeof t=="string"?Al(e,t):void 0;function UT(t,e,a,i,o){for(const d of e){const u=zT(a,d);if(u){t.add(u);const h=gj(u._fallback,a,o);if(typeof h<"u"&&h!==a&&h!==i)return h}else if(u===!1&&typeof i<"u"&&a!==i)return null}return!1}function ff(t,e,a,i){const o=e._rootScopes,d=gj(e._fallback,a,i),u=[...t,...o],h=new Set;h.add(i);let m=Sy(h,u,a,d||a,i);return m===null||typeof d<"u"&&d!==a&&(m=Sy(h,u,d,m,i),m===null)?!1:hf(Array.from(h),[""],o,d,()=>FT(e,a,i))}function Sy(t,e,a,i,o){for(;a;)a=UT(t,e,a,i,o);return a}function FT(t,e,a){const i=t._getTarget();e in i||(i[e]={});const o=i[e];return os(o)&&bt(a)?a:o||{}}function HT(t,e,a,i){let o;for(const d of e)if(o=xj(LT(d,t),a),typeof o<"u")return mf(t,o)?ff(a,i,t,o):o}function xj(t,e){for(const a of e){if(!a)continue;const i=a[t];if(typeof i<"u")return i}}function Cy(t){let e=t._keys;return e||(e=t._keys=PT(t._scopes)),e}function PT(t){const e=new Set;for(const a of t)for(const i of Object.keys(a).filter(o=>!o.startsWith("_")))e.add(i);return Array.from(e)}function pf(){return typeof window<"u"&&typeof document<"u"}function gf(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function yd(t,e,a){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[a])):i=t,i}const $d=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function VT(t,e){return $d(t).getPropertyValue(e)}const YT=["top","right","bottom","left"];function Sl(t,e,a){const i={};a=a?"-"+a:"";for(let o=0;o<4;o++){const d=YT[o];i[d]=parseFloat(t[e+"-"+d+a])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const qT=(t,e,a)=>(t>0||e>0)&&(!a||!a.shadowRoot);function GT(t,e){const a=t.touches,i=a&&a.length?a[0]:t,{offsetX:o,offsetY:d}=i;let u=!1,h,m;if(qT(o,d,t.target))h=o,m=d;else{const p=e.getBoundingClientRect();h=i.clientX-p.left,m=i.clientY-p.top,u=!0}return{x:h,y:m,box:u}}function vl(t,e){if("native"in t)return t;const{canvas:a,currentDevicePixelRatio:i}=e,o=$d(a),d=o.boxSizing==="border-box",u=Sl(o,"padding"),h=Sl(o,"border","width"),{x:m,y:p,box:b}=GT(t,a),y=u.left+(b&&h.left),v=u.top+(b&&h.top);let{width:N,height:D}=e;return d&&(N-=u.width+h.width,D-=u.height+h.height),{x:Math.round((m-y)/N*a.width/i),y:Math.round((p-v)/D*a.height/i)}}function XT(t,e,a){let i,o;if(e===void 0||a===void 0){const d=t&&gf(t);if(!d)e=t.clientWidth,a=t.clientHeight;else{const u=d.getBoundingClientRect(),h=$d(d),m=Sl(h,"border","width"),p=Sl(h,"padding");e=u.width-p.width-m.width,a=u.height-p.height-m.height,i=yd(h.maxWidth,d,"clientWidth"),o=yd(h.maxHeight,d,"clientHeight")}}return{width:e,height:a,maxWidth:i||fd,maxHeight:o||fd}}const Ua=t=>Math.round(t*10)/10;function WT(t,e,a,i){const o=$d(t),d=Sl(o,"margin"),u=yd(o.maxWidth,t,"clientWidth")||fd,h=yd(o.maxHeight,t,"clientHeight")||fd,m=XT(t,e,a);let{width:p,height:b}=m;if(o.boxSizing==="content-box"){const v=Sl(o,"border","width"),N=Sl(o,"padding");p-=N.width+v.width,b-=N.height+v.height}return p=Math.max(0,p-d.width),b=Math.max(0,i?p/i:b-d.height),p=Ua(Math.min(p,u,m.maxWidth)),b=Ua(Math.min(b,h,m.maxHeight)),p&&!b&&(b=Ua(p/2)),(e!==void 0||a!==void 0)&&i&&m.height&&b>m.height&&(b=m.height,p=Ua(Math.floor(b*i))),{width:p,height:b}}function Ay(t,e,a){const i=e||1,o=Ua(t.height*i),d=Ua(t.width*i);t.height=Ua(t.height),t.width=Ua(t.width);const u=t.canvas;return u.style&&(a||!u.style.height&&!u.style.width)&&(u.style.height=`${t.height}px`,u.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||u.height!==o||u.width!==d?(t.currentDevicePixelRatio=i,u.height=o,u.width=d,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const KT=(function(){let t=!1;try{const e={get passive(){return t=!0,!1}};pf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t})();function Ey(t,e){const a=VT(t,e),i=a&&a.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}const QT=function(t,e){return{x(a){return t+t+e-a},setWidth(a){e=a},textAlign(a){return a==="center"?a:a==="right"?"left":"right"},xPlus(a,i){return a-i},leftForLtr(a,i){return a-i}}},ZT=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ji(t,e,a){return t?QT(e,a):ZT()}function bj(t,e){let a,i;(e==="ltr"||e==="rtl")&&(a=t.canvas.style,i=[a.getPropertyValue("direction"),a.getPropertyPriority("direction")],a.setProperty("direction",e,"important"),t.prevTextDirection=i)}function yj(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Mc(t,e,a){return t.options.clip?t[a]:e[a]}function JT(t,e){const{xScale:a,yScale:i}=t;return a&&i?{left:Mc(a,e,"left"),right:Mc(a,e,"right"),top:Mc(i,e,"top"),bottom:Mc(i,e,"bottom")}:e}function ek(t,e){const a=e._clip;if(a.disabled)return!1;const i=JT(e,t.chartArea);return{left:a.left===!1?0:i.left-(a.left===!0?0:a.left),right:a.right===!1?t.width:i.right+(a.right===!0?0:a.right),top:a.top===!1?0:i.top-(a.top===!0?0:a.top),bottom:a.bottom===!1?t.height:i.bottom+(a.bottom===!0?0:a.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class tk{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,a,i,o){const d=a.listeners[o],u=a.duration;d.forEach(h=>h({chart:e,initial:a.initial,numSteps:u,currentStep:Math.min(i-a.start,u)}))}_refresh(){this._request||(this._running=!0,this._request=ij.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let a=0;this._charts.forEach((i,o)=>{if(!i.running||!i.items.length)return;const d=i.items;let u=d.length-1,h=!1,m;for(;u>=0;--u)m=d[u],m._active?(m._total>i.duration&&(i.duration=m._total),m.tick(e),h=!0):(d[u]=d[d.length-1],d.pop());h&&(o.draw(),this._notify(o,i,e,"progress")),d.length||(i.running=!1,this._notify(o,i,e,"complete"),i.initial=!1),a+=d.length}),this._lastDate=e,a===0&&(this._running=!1)}_getAnims(e){const a=this._charts;let i=a.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},a.set(e,i)),i}listen(e,a,i){this._getAnims(e).listeners[a].push(i)}add(e,a){!a||!a.length||this._getAnims(e).items.push(...a)}has(e){return this._getAnims(e).items.length>0}start(e){const a=this._charts.get(e);a&&(a.running=!0,a.start=Date.now(),a.duration=a.items.reduce((i,o)=>Math.max(i,o._duration),0),this._refresh())}running(e){if(!this._running)return!1;const a=this._charts.get(e);return!(!a||!a.running||!a.items.length)}stop(e){const a=this._charts.get(e);if(!a||!a.items.length)return;const i=a.items;let o=i.length-1;for(;o>=0;--o)i[o].cancel();a.items=[],this._notify(e,a,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var sa=new tk;const Ty="transparent",sk={boolean(t,e,a){return a>.5?e:t},color(t,e,a){const i=yy(t||Ty),o=i.valid&&yy(e||Ty);return o&&o.valid?o.mix(i,a).hexString():e},number(t,e,a){return t+(e-t)*a}};class nk{constructor(e,a,i,o){const d=a[i];o=Dc([e.to,o,d,e.from]);const u=Dc([e.from,d,o]);this._active=!0,this._fn=e.fn||sk[e.type||typeof u],this._easing=Hr[e.easing]||Hr.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=a,this._prop=i,this._from=u,this._to=o,this._promises=void 0}active(){return this._active}update(e,a,i){if(this._active){this._notify(!1);const o=this._target[this._prop],d=i-this._start,u=this._duration-d;this._start=i,this._duration=Math.floor(Math.max(u,e.duration)),this._total+=d,this._loop=!!e.loop,this._to=Dc([e.to,a,o,e.from]),this._from=Dc([e.from,o,a])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const a=e-this._start,i=this._duration,o=this._prop,d=this._from,u=this._loop,h=this._to;let m;if(this._active=d!==h&&(u||a<i),!this._active){this._target[o]=h,this._notify(!0);return}if(a<0){this._target[o]=d;return}m=a/i%2,m=u&&m>1?2-m:m,m=this._easing(Math.min(1,Math.max(0,m))),this._target[o]=this._fn(d,h,m)}wait(){const e=this._promises||(this._promises=[]);return new Promise((a,i)=>{e.push({res:a,rej:i})})}_notify(e){const a=e?"res":"rej",i=this._promises||[];for(let o=0;o<i.length;o++)i[o][a]()}}class vj{constructor(e,a){this._chart=e,this._properties=new Map,this.configure(a)}configure(e){if(!bt(e))return;const a=Object.keys(Qt.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(o=>{const d=e[o];if(!bt(d))return;const u={};for(const h of a)u[h]=d[h];(os(d.properties)&&d.properties||[o]).forEach(h=>{(h===o||!i.has(h))&&i.set(h,u)})})}_animateOptions(e,a){const i=a.options,o=lk(e,i);if(!o)return[];const d=this._createAnimations(o,i);return i.$shared&&ak(e.options.$animations,i).then(()=>{e.options=i},()=>{}),d}_createAnimations(e,a){const i=this._properties,o=[],d=e.$animations||(e.$animations={}),u=Object.keys(a),h=Date.now();let m;for(m=u.length-1;m>=0;--m){const p=u[m];if(p.charAt(0)==="$")continue;if(p==="options"){o.push(...this._animateOptions(e,a));continue}const b=a[p];let y=d[p];const v=i.get(p);if(y)if(v&&y.active()){y.update(v,b,h);continue}else y.cancel();if(!v||!v.duration){e[p]=b;continue}d[p]=y=new nk(v,e,p,b),o.push(y)}return o}update(e,a){if(this._properties.size===0){Object.assign(e,a);return}const i=this._createAnimations(e,a);if(i.length)return sa.add(this._chart,i),!0}}function ak(t,e){const a=[],i=Object.keys(e);for(let o=0;o<i.length;o++){const d=t[i[o]];d&&d.active()&&a.push(d.wait())}return Promise.all(a)}function lk(t,e){if(!e)return;let a=t.options;if(!a){t.options=e;return}return a.$shared&&(t.options=a=Object.assign({},a,{$shared:!1,$animations:{}})),a}function ky(t,e){const a=t&&t.options||{},i=a.reverse,o=a.min===void 0?e:0,d=a.max===void 0?e:0;return{start:i?d:o,end:i?o:d}}function ik(t,e,a){if(a===!1)return!1;const i=ky(t,a),o=ky(e,a);return{top:o.end,right:i.end,bottom:o.start,left:i.start}}function rk(t){let e,a,i,o;return bt(t)?(e=t.top,a=t.right,i=t.bottom,o=t.left):e=a=i=o=t,{top:e,right:a,bottom:i,left:o,disabled:t===!1}}function jj(t,e){const a=[],i=t._getSortedDatasetMetas(e);let o,d;for(o=0,d=i.length;o<d;++o)a.push(i[o].index);return a}function _y(t,e,a,i={}){const o=t.keys,d=i.mode==="single";let u,h,m,p;if(e===null)return;let b=!1;for(u=0,h=o.length;u<h;++u){if(m=+o[u],m===a){if(b=!0,i.all)continue;break}p=t.values[m],mn(p)&&(d||e===0||qa(e)===qa(p))&&(e+=p)}return!b&&!i.all?0:e}function ok(t,e){const{iScale:a,vScale:i}=e,o=a.axis==="x"?"x":"y",d=i.axis==="x"?"x":"y",u=Object.keys(t),h=new Array(u.length);let m,p,b;for(m=0,p=u.length;m<p;++m)b=u[m],h[m]={[o]:b,[d]:t[b]};return h}function om(t,e){const a=t&&t.options.stacked;return a||a===void 0&&e.stack!==void 0}function ck(t,e,a){return`${t.id}.${e.id}.${a.stack||a.type}`}function dk(t){const{min:e,max:a,minDefined:i,maxDefined:o}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:o?a:Number.POSITIVE_INFINITY}}function uk(t,e,a){const i=t[e]||(t[e]={});return i[a]||(i[a]={})}function Dy(t,e,a,i){for(const o of e.getMatchingVisibleMetas(i).reverse()){const d=t[o.index];if(a&&d>0||!a&&d<0)return o.index}return null}function My(t,e){const{chart:a,_cachedMeta:i}=t,o=a._stacks||(a._stacks={}),{iScale:d,vScale:u,index:h}=i,m=d.axis,p=u.axis,b=ck(d,u,i),y=e.length;let v;for(let N=0;N<y;++N){const D=e[N],{[m]:C,[p]:A}=D,S=D._stacks||(D._stacks={});v=S[p]=uk(o,b,C),v[h]=A,v._top=Dy(v,u,!0,i.type),v._bottom=Dy(v,u,!1,i.type);const M=v._visualValues||(v._visualValues={});M[h]=A}}function cm(t,e){const a=t.scales;return Object.keys(a).filter(i=>a[i].axis===e).shift()}function hk(t,e){return $i(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function mk(t,e,a){return $i(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:a,index:e,mode:"default",type:"data"})}function _r(t,e){const a=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const o of e){const d=o._stacks;if(!d||d[i]===void 0||d[i][a]===void 0)return;delete d[i][a],d[i]._visualValues!==void 0&&d[i]._visualValues[a]!==void 0&&delete d[i]._visualValues[a]}}}const dm=t=>t==="reset"||t==="none",$y=(t,e)=>e?t:Object.assign({},t),fk=(t,e,a)=>t&&!e.hidden&&e._stacked&&{keys:jj(a,!0),values:null};class xf{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,a){this.chart=e,this._ctx=e.ctx,this.index=a,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=om(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_r(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,a=this._cachedMeta,i=this.getDataset(),o=(y,v,N,D)=>y==="x"?v:y==="r"?D:N,d=a.xAxisID=xt(i.xAxisID,cm(e,"x")),u=a.yAxisID=xt(i.yAxisID,cm(e,"y")),h=a.rAxisID=xt(i.rAxisID,cm(e,"r")),m=a.indexAxis,p=a.iAxisID=o(m,d,u,h),b=a.vAxisID=o(m,u,d,h);a.xScale=this.getScaleForId(d),a.yScale=this.getScaleForId(u),a.rScale=this.getScaleForId(h),a.iScale=this.getScaleForId(p),a.vScale=this.getScaleForId(b)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const a=this._cachedMeta;return e===a.iScale?a.vScale:a.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&gy(this._data,this),e._stacked&&_r(e)}_dataCheck(){const e=this.getDataset(),a=e.data||(e.data=[]),i=this._data;if(bt(a)){const o=this._cachedMeta;this._data=ok(a,o)}else if(i!==a){if(i){gy(i,this);const o=this._cachedMeta;_r(o),o._parsed=[]}a&&Object.isExtensible(a)&&fT(a,this),this._syncList=[],this._data=a}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const a=this._cachedMeta,i=this.getDataset();let o=!1;this._dataCheck();const d=a._stacked;a._stacked=om(a.vScale,a),a.stack!==i.stack&&(o=!0,_r(a),a.stack=i.stack),this._resyncElements(e),(o||d!==a._stacked)&&(My(this,a._parsed),a._stacked=om(a.vScale,a))}configure(){const e=this.chart.config,a=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),a,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,a){const{_cachedMeta:i,_data:o}=this,{iScale:d,_stacked:u}=i,h=d.axis;let m=e===0&&a===o.length?!0:i._sorted,p=e>0&&i._parsed[e-1],b,y,v;if(this._parsing===!1)i._parsed=o,i._sorted=!0,v=o;else{os(o[e])?v=this.parseArrayData(i,o,e,a):bt(o[e])?v=this.parseObjectData(i,o,e,a):v=this.parsePrimitiveData(i,o,e,a);const N=()=>y[h]===null||p&&y[h]<p[h];for(b=0;b<a;++b)i._parsed[b+e]=y=v[b],m&&(N()&&(m=!1),p=y);i._sorted=m}u&&My(this,v)}parsePrimitiveData(e,a,i,o){const{iScale:d,vScale:u}=e,h=d.axis,m=u.axis,p=d.getLabels(),b=d===u,y=new Array(o);let v,N,D;for(v=0,N=o;v<N;++v)D=v+i,y[v]={[h]:b||d.parse(p[D],D),[m]:u.parse(a[D],D)};return y}parseArrayData(e,a,i,o){const{xScale:d,yScale:u}=e,h=new Array(o);let m,p,b,y;for(m=0,p=o;m<p;++m)b=m+i,y=a[b],h[m]={x:d.parse(y[0],b),y:u.parse(y[1],b)};return h}parseObjectData(e,a,i,o){const{xScale:d,yScale:u}=e,{xAxisKey:h="x",yAxisKey:m="y"}=this._parsing,p=new Array(o);let b,y,v,N;for(b=0,y=o;b<y;++b)v=b+i,N=a[v],p[b]={x:d.parse(Al(N,h),v),y:u.parse(Al(N,m),v)};return p}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,a,i){const o=this.chart,d=this._cachedMeta,u=a[e.axis],h={keys:jj(o,!0),values:a._stacks[e.axis]._visualValues};return _y(h,u,d.index,{mode:i})}updateRangeFromParsed(e,a,i,o){const d=i[a.axis];let u=d===null?NaN:d;const h=o&&i._stacks[a.axis];o&&h&&(o.values=h,u=_y(o,d,this._cachedMeta.index)),e.min=Math.min(e.min,u),e.max=Math.max(e.max,u)}getMinMax(e,a){const i=this._cachedMeta,o=i._parsed,d=i._sorted&&e===i.iScale,u=o.length,h=this._getOtherScale(e),m=fk(a,i,this.chart),p={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:b,max:y}=dk(h);let v,N;function D(){N=o[v];const C=N[h.axis];return!mn(N[e.axis])||b>C||y<C}for(v=0;v<u&&!(!D()&&(this.updateRangeFromParsed(p,e,N,m),d));++v);if(d){for(v=u-1;v>=0;--v)if(!D()){this.updateRangeFromParsed(p,e,N,m);break}}return p}getAllParsedValues(e){const a=this._cachedMeta._parsed,i=[];let o,d,u;for(o=0,d=a.length;o<d;++o)u=a[o][e.axis],mn(u)&&i.push(u);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const a=this._cachedMeta,i=a.iScale,o=a.vScale,d=this.getParsed(e);return{label:i?""+i.getLabelForValue(d[i.axis]):"",value:o?""+o.getLabelForValue(d[o.axis]):""}}_update(e){const a=this._cachedMeta;this.update(e||"default"),a._clip=rk(xt(this.options.clip,ik(a.xScale,a.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,a=this.chart,i=this._cachedMeta,o=i.data||[],d=a.chartArea,u=[],h=this._drawStart||0,m=this._drawCount||o.length-h,p=this.options.drawActiveElementsOnTop;let b;for(i.dataset&&i.dataset.draw(e,d,h,m),b=h;b<h+m;++b){const y=o[b];y.hidden||(y.active&&p?u.push(y):y.draw(e,d))}for(b=0;b<u.length;++b)u[b].draw(e,d)}getStyle(e,a){const i=a?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,a,i){const o=this.getDataset();let d;if(e>=0&&e<this._cachedMeta.data.length){const u=this._cachedMeta.data[e];d=u.$context||(u.$context=mk(this.getContext(),e,u)),d.parsed=this.getParsed(e),d.raw=o.data[e],d.index=d.dataIndex=e}else d=this.$context||(this.$context=hk(this.chart.getContext(),this.index)),d.dataset=o,d.index=d.datasetIndex=this.index;return d.active=!!a,d.mode=i,d}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,a){return this._resolveElementOptions(this.dataElementType.id,a,e)}_resolveElementOptions(e,a="default",i){const o=a==="active",d=this._cachedDataOpts,u=e+"-"+a,h=d[u],m=this.enableOptionSharing&&Wr(i);if(h)return $y(h,m);const p=this.chart.config,b=p.datasetElementScopeKeys(this._type,e),y=o?[`${e}Hover`,"hover",e,""]:[e,""],v=p.getOptionScopes(this.getDataset(),b),N=Object.keys(Qt.elements[e]),D=()=>this.getContext(i,o,a),C=p.resolveNamedOptions(v,N,D,y);return C.$shared&&(C.$shared=m,d[u]=Object.freeze($y(C,m))),C}_resolveAnimations(e,a,i){const o=this.chart,d=this._cachedDataOpts,u=`animation-${a}`,h=d[u];if(h)return h;let m;if(o.options.animation!==!1){const b=this.chart.config,y=b.datasetAnimationScopeKeys(this._type,a),v=b.getOptionScopes(this.getDataset(),y);m=b.createResolver(v,this.getContext(e,i,a))}const p=new vj(o,m&&m.animations);return m&&m._cacheable&&(d[u]=Object.freeze(p)),p}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,a){return!a||dm(e)||this.chart._animationsDisabled}_getSharedOptions(e,a){const i=this.resolveDataElementOptions(e,a),o=this._sharedOptions,d=this.getSharedOptions(i),u=this.includeOptions(a,d)||d!==o;return this.updateSharedOptions(d,a,i),{sharedOptions:d,includeOptions:u}}updateElement(e,a,i,o){dm(o)?Object.assign(e,i):this._resolveAnimations(a,o).update(e,i)}updateSharedOptions(e,a,i){e&&!dm(a)&&this._resolveAnimations(void 0,a).update(e,i)}_setStyle(e,a,i,o){e.active=o;const d=this.getStyle(a,o);this._resolveAnimations(a,i,o).update(e,{options:!o&&this.getSharedOptions(d)||d})}removeHoverStyle(e,a,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,a,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const a=this._data,i=this._cachedMeta.data;for(const[h,m,p]of this._syncList)this[h](m,p);this._syncList=[];const o=i.length,d=a.length,u=Math.min(d,o);u&&this.parse(0,u),d>o?this._insertElements(o,d-o,e):d<o&&this._removeElements(d,o-d)}_insertElements(e,a,i=!0){const o=this._cachedMeta,d=o.data,u=e+a;let h;const m=p=>{for(p.length+=a,h=p.length-1;h>=u;h--)p[h]=p[h-a]};for(m(d),h=e;h<u;++h)d[h]=new this.dataElementType;this._parsing&&m(o._parsed),this.parse(e,a),i&&this.updateElements(d,e,a,"reset")}updateElements(e,a,i,o){}_removeElements(e,a){const i=this._cachedMeta;if(this._parsing){const o=i._parsed.splice(e,a);i._stacked&&_r(i,o)}i.data.splice(e,a)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[a,i,o]=e;this[a](i,o)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,a){a&&this._sync(["_removeElements",e,a]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function pk(t,e){if(!t._cache.$bar){const a=t.getMatchingVisibleMetas(e);let i=[];for(let o=0,d=a.length;o<d;o++)i=i.concat(a[o].controller.getAllParsedValues(t));t._cache.$bar=lj(i.sort((o,d)=>o-d))}return t._cache.$bar}function gk(t){const e=t.iScale,a=pk(e,t.type);let i=e._length,o,d,u,h;const m=()=>{u===32767||u===-32768||(Wr(h)&&(i=Math.min(i,Math.abs(u-h)||i)),h=u)};for(o=0,d=a.length;o<d;++o)u=e.getPixelForValue(a[o]),m();for(h=void 0,o=0,d=e.ticks.length;o<d;++o)u=e.getPixelForTick(o),m();return i}function xk(t,e,a,i){const o=a.barThickness;let d,u;return Mt(o)?(d=e.min*a.categoryPercentage,u=a.barPercentage):(d=o*i,u=1),{chunk:d/i,ratio:u,start:e.pixels[t]-d/2}}function bk(t,e,a,i){const o=e.pixels,d=o[t];let u=t>0?o[t-1]:null,h=t<o.length-1?o[t+1]:null;const m=a.categoryPercentage;u===null&&(u=d-(h===null?e.end-e.start:h-d)),h===null&&(h=d+d-u);const p=d-(d-Math.min(u,h))/2*m;return{chunk:Math.abs(h-u)/2*m/i,ratio:a.barPercentage,start:p}}function yk(t,e,a,i){const o=a.parse(t[0],i),d=a.parse(t[1],i),u=Math.min(o,d),h=Math.max(o,d);let m=u,p=h;Math.abs(u)>Math.abs(h)&&(m=h,p=u),e[a.axis]=p,e._custom={barStart:m,barEnd:p,start:o,end:d,min:u,max:h}}function Nj(t,e,a,i){return os(t)?yk(t,e,a,i):e[a.axis]=a.parse(t,i),e}function Ry(t,e,a,i){const o=t.iScale,d=t.vScale,u=o.getLabels(),h=o===d,m=[];let p,b,y,v;for(p=a,b=a+i;p<b;++p)v=e[p],y={},y[o.axis]=h||o.parse(u[p],p),m.push(Nj(v,y,d,p));return m}function um(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function vk(t,e,a){return t!==0?qa(t):(e.isHorizontal()?1:-1)*(e.min>=a?1:-1)}function jk(t){let e,a,i,o,d;return t.horizontal?(e=t.base>t.x,a="left",i="right"):(e=t.base<t.y,a="bottom",i="top"),e?(o="end",d="start"):(o="start",d="end"),{start:a,end:i,reverse:e,top:o,bottom:d}}function Nk(t,e,a,i){let o=e.borderSkipped;const d={};if(!o){t.borderSkipped=d;return}if(o===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:u,end:h,reverse:m,top:p,bottom:b}=jk(t);o==="middle"&&a&&(t.enableBorderRadius=!0,(a._top||0)===i?o=p:(a._bottom||0)===i?o=b:(d[Ly(b,u,h,m)]=!0,o=p)),d[Ly(o,u,h,m)]=!0,t.borderSkipped=d}function Ly(t,e,a,i){return i?(t=wk(t,e,a),t=Iy(t,a,e)):t=Iy(t,e,a),t}function wk(t,e,a){return t===e?a:t===a?e:t}function Iy(t,e,a){return t==="start"?e:t==="end"?a:t}function Sk(t,{inflateAmount:e},a){t.inflateAmount=e==="auto"?a===1?.33:0:e}class Ck extends xf{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,a,i,o){return Ry(e,a,i,o)}parseArrayData(e,a,i,o){return Ry(e,a,i,o)}parseObjectData(e,a,i,o){const{iScale:d,vScale:u}=e,{xAxisKey:h="x",yAxisKey:m="y"}=this._parsing,p=d.axis==="x"?h:m,b=u.axis==="x"?h:m,y=[];let v,N,D,C;for(v=i,N=i+o;v<N;++v)C=a[v],D={},D[d.axis]=d.parse(Al(C,p),v),y.push(Nj(Al(C,b),D,u,v));return y}updateRangeFromParsed(e,a,i,o){super.updateRangeFromParsed(e,a,i,o);const d=i._custom;d&&a===this._cachedMeta.vScale&&(e.min=Math.min(e.min,d.min),e.max=Math.max(e.max,d.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const a=this._cachedMeta,{iScale:i,vScale:o}=a,d=this.getParsed(e),u=d._custom,h=um(u)?"["+u.start+", "+u.end+"]":""+o.getLabelForValue(d[o.axis]);return{label:""+i.getLabelForValue(d[i.axis]),value:h}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const a=this._cachedMeta;this.updateElements(a.data,0,a.data.length,e)}updateElements(e,a,i,o){const d=o==="reset",{index:u,_cachedMeta:{vScale:h}}=this,m=h.getBasePixel(),p=h.isHorizontal(),b=this._getRuler(),{sharedOptions:y,includeOptions:v}=this._getSharedOptions(a,o);for(let N=a;N<a+i;N++){const D=this.getParsed(N),C=d||Mt(D[h.axis])?{base:m,head:m}:this._calculateBarValuePixels(N),A=this._calculateBarIndexPixels(N,b),S=(D._stacks||{})[h.axis],M={horizontal:p,base:C.base,enableBorderRadius:!S||um(D._custom)||u===S._top||u===S._bottom,x:p?C.head:A.center,y:p?A.center:C.head,height:p?A.size:Math.abs(C.size),width:p?Math.abs(C.size):A.size};v&&(M.options=y||this.resolveDataElementOptions(N,e[N].active?"active":o));const F=M.options||e[N].options;Nk(M,F,S,u),Sk(M,F,b.ratio),this.updateElement(e[N],N,M,o)}}_getStacks(e,a){const{iScale:i}=this._cachedMeta,o=i.getMatchingVisibleMetas(this._type).filter(b=>b.controller.options.grouped),d=i.options.stacked,u=[],h=this._cachedMeta.controller.getParsed(a),m=h&&h[i.axis],p=b=>{const y=b._parsed.find(N=>N[i.axis]===m),v=y&&y[b.vScale.axis];if(Mt(v)||isNaN(v))return!0};for(const b of o)if(!(a!==void 0&&p(b))&&((d===!1||u.indexOf(b.stack)===-1||d===void 0&&b.stack===void 0)&&u.push(b.stack),b.index===e))break;return u.length||u.push(void 0),u}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,a=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===a).shift()}_getAxis(){const e={},a=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[xt(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,a)]=!0;return Object.keys(e)}_getStackIndex(e,a,i){const o=this._getStacks(e,i),d=a!==void 0?o.indexOf(a):-1;return d===-1?o.length-1:d}_getRuler(){const e=this.options,a=this._cachedMeta,i=a.iScale,o=[];let d,u;for(d=0,u=a.data.length;d<u;++d)o.push(i.getPixelForValue(this.getParsed(d)[i.axis],d));const h=e.barThickness;return{min:h||gk(a),pixels:o,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:h?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:a,_stacked:i,index:o},options:{base:d,minBarLength:u}}=this,h=d||0,m=this.getParsed(e),p=m._custom,b=um(p);let y=m[a.axis],v=0,N=i?this.applyStack(a,m,i):y,D,C;N!==y&&(v=N-y,N=y),b&&(y=p.barStart,N=p.barEnd-p.barStart,y!==0&&qa(y)!==qa(p.barEnd)&&(v=0),v+=y);const A=!Mt(d)&&!b?d:v;let S=a.getPixelForValue(A);if(this.chart.getDataVisibility(e)?D=a.getPixelForValue(v+N):D=S,C=D-S,Math.abs(C)<u){C=vk(C,a,h)*u,y===h&&(S-=C/2);const M=a.getPixelForDecimal(0),F=a.getPixelForDecimal(1),z=Math.min(M,F),K=Math.max(M,F);S=Math.max(Math.min(S,K),z),D=S+C,i&&!b&&(m._stacks[a.axis]._visualValues[o]=a.getValueForPixel(D)-a.getValueForPixel(S))}if(S===a.getPixelForValue(h)){const M=qa(C)*a.getLineWidthForValue(h)/2;S+=M,C-=M}return{size:C,base:S,head:D,center:D+C/2}}_calculateBarIndexPixels(e,a){const i=a.scale,o=this.options,d=o.skipNull,u=xt(o.maxBarThickness,1/0);let h,m;const p=this._getAxisCount();if(a.grouped){const b=d?this._getStackCount(e):a.stackCount,y=o.barThickness==="flex"?bk(e,a,o,b*p):xk(e,a,o,b*p),v=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,N=this._getAxis().indexOf(xt(v,this.getFirstScaleIdForIndexAxis())),D=this._getStackIndex(this.index,this._cachedMeta.stack,d?e:void 0)+N;h=y.start+y.chunk*D+y.chunk/2,m=Math.min(u,y.chunk*y.ratio)}else h=i.getPixelForValue(this.getParsed(e)[i.axis],e),m=Math.min(u,a.min*a.ratio);return{base:h-m/2,head:h+m/2,center:h,size:m}}draw(){const e=this._cachedMeta,a=e.vScale,i=e.data,o=i.length;let d=0;for(;d<o;++d)this.getParsed(d)[a.axis]!==null&&!i[d].hidden&&i[d].draw(this._ctx)}}function Ak(t,e,a){let i=1,o=1,d=0,u=0;if(e<ns){const h=t,m=h+e,p=Math.cos(h),b=Math.sin(h),y=Math.cos(m),v=Math.sin(m),N=(F,z,K)=>gd(F,h,m,!0)?1:Math.max(z,z*a,K,K*a),D=(F,z,K)=>gd(F,h,m,!0)?-1:Math.min(z,z*a,K,K*a),C=N(0,p,y),A=N(ls,b,v),S=D(Ut,p,y),M=D(Ut+ls,b,v);i=(C-S)/2,o=(A-M)/2,d=-(C+S)/2,u=-(A+M)/2}return{ratioX:i,ratioY:o,offsetX:d,offsetY:u}}class Ek extends xf{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const a=e.data,{labels:{pointStyle:i,textAlign:o,color:d,useBorderRadius:u,borderRadius:h}}=e.legend.options;return a.labels.length&&a.datasets.length?a.labels.map((m,p)=>{const y=e.getDatasetMeta(0).controller.getStyle(p);return{text:m,fillStyle:y.backgroundColor,fontColor:d,hidden:!e.getDataVisibility(p),lineDash:y.borderDash,lineDashOffset:y.borderDashOffset,lineJoin:y.borderJoinStyle,lineWidth:y.borderWidth,strokeStyle:y.borderColor,textAlign:o,pointStyle:i,borderRadius:u&&(h||y.borderRadius),index:p}}):[]}},onClick(e,a,i){i.chart.toggleDataVisibility(a.index),i.chart.update()}}}};constructor(e,a){super(e,a),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,a){const i=this.getDataset().data,o=this._cachedMeta;if(this._parsing===!1)o._parsed=i;else{let d=m=>+i[m];if(bt(i[e])){const{key:m="value"}=this._parsing;d=p=>+Al(i[p],m)}let u,h;for(u=e,h=e+a;u<h;++u)o._parsed[u]=d(u)}}_getRotation(){return la(this.options.rotation-90)}_getCircumference(){return la(this.options.circumference)}_getRotationExtents(){let e=ns,a=-ns;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){const o=this.chart.getDatasetMeta(i).controller,d=o._getRotation(),u=o._getCircumference();e=Math.min(e,d),a=Math.max(a,d+u)}return{rotation:e,circumference:a-e}}update(e){const a=this.chart,{chartArea:i}=a,o=this._cachedMeta,d=o.data,u=this.getMaxBorderWidth()+this.getMaxOffset(d)+this.options.spacing,h=Math.max((Math.min(i.width,i.height)-u)/2,0),m=Math.min(ZE(this.options.cutout,h),1),p=this._getRingWeight(this.index),{circumference:b,rotation:y}=this._getRotationExtents(),{ratioX:v,ratioY:N,offsetX:D,offsetY:C}=Ak(y,b,m),A=(i.width-u)/v,S=(i.height-u)/N,M=Math.max(Math.min(A,S)/2,0),F=ej(this.options.radius,M),z=Math.max(F*m,0),K=(F-z)/this._getVisibleDatasetWeightTotal();this.offsetX=D*F,this.offsetY=C*F,o.total=this.calculateTotal(),this.outerRadius=F-K*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-K*p,0),this.updateElements(d,0,d.length,e)}_circumference(e,a){const i=this.options,o=this._cachedMeta,d=this._getCircumference();return a&&i.animation.animateRotate||!this.chart.getDataVisibility(e)||o._parsed[e]===null||o.data[e].hidden?0:this.calculateCircumference(o._parsed[e]*d/ns)}updateElements(e,a,i,o){const d=o==="reset",u=this.chart,h=u.chartArea,p=u.options.animation,b=(h.left+h.right)/2,y=(h.top+h.bottom)/2,v=d&&p.animateScale,N=v?0:this.innerRadius,D=v?0:this.outerRadius,{sharedOptions:C,includeOptions:A}=this._getSharedOptions(a,o);let S=this._getRotation(),M;for(M=0;M<a;++M)S+=this._circumference(M,d);for(M=a;M<a+i;++M){const F=this._circumference(M,d),z=e[M],K={x:b+this.offsetX,y:y+this.offsetY,startAngle:S,endAngle:S+F,circumference:F,outerRadius:D,innerRadius:N};A&&(K.options=C||this.resolveDataElementOptions(M,z.active?"active":o)),S+=F,this.updateElement(z,M,K,o)}}calculateTotal(){const e=this._cachedMeta,a=e.data;let i=0,o;for(o=0;o<a.length;o++){const d=e._parsed[o];d!==null&&!isNaN(d)&&this.chart.getDataVisibility(o)&&!a[o].hidden&&(i+=Math.abs(d))}return i}calculateCircumference(e){const a=this._cachedMeta.total;return a>0&&!isNaN(e)?ns*(Math.abs(e)/a):0}getLabelAndValue(e){const a=this._cachedMeta,i=this.chart,o=i.data.labels||[],d=of(a._parsed[e],i.options.locale);return{label:o[e]||"",value:d}}getMaxBorderWidth(e){let a=0;const i=this.chart;let o,d,u,h,m;if(!e){for(o=0,d=i.data.datasets.length;o<d;++o)if(i.isDatasetVisible(o)){u=i.getDatasetMeta(o),e=u.data,h=u.controller;break}}if(!e)return 0;for(o=0,d=e.length;o<d;++o)m=h.resolveDataElementOptions(o),m.borderAlign!=="inner"&&(a=Math.max(a,m.borderWidth||0,m.hoverBorderWidth||0));return a}getMaxOffset(e){let a=0;for(let i=0,o=e.length;i<o;++i){const d=this.resolveDataElementOptions(i);a=Math.max(a,d.offset||0,d.hoverOffset||0)}return a}_getRingWeightOffset(e){let a=0;for(let i=0;i<e;++i)this.chart.isDatasetVisible(i)&&(a+=this._getRingWeight(i));return a}_getRingWeight(e){return Math.max(xt(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}function yl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class bf{static override(e){Object.assign(bf.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return yl()}parse(){return yl()}format(){return yl()}add(){return yl()}diff(){return yl()}startOf(){return yl()}endOf(){return yl()}}var Tk={_date:bf};function kk(t,e,a,i){const{controller:o,data:d,_sorted:u}=t,h=o._cachedMeta.iScale,m=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(h&&e===h.axis&&e!=="r"&&u&&d.length){const p=h._reversePixels?hT:Dm;if(i){if(o._sharedOptions){const b=d[0],y=typeof b.getRange=="function"&&b.getRange(e);if(y){const v=p(d,e,a-y),N=p(d,e,a+y);return{lo:v.lo,hi:N.hi}}}}else{const b=p(d,e,a);if(m){const{vScale:y}=o._cachedMeta,{_parsed:v}=t,N=v.slice(0,b.lo+1).reverse().findIndex(C=>!Mt(C[y.axis]));b.lo-=Math.max(0,N);const D=v.slice(b.hi).findIndex(C=>!Mt(C[y.axis]));b.hi+=Math.max(0,D)}return b}}return{lo:0,hi:d.length-1}}function Rd(t,e,a,i,o){const d=t.getSortedVisibleDatasetMetas(),u=a[e];for(let h=0,m=d.length;h<m;++h){const{index:p,data:b}=d[h],{lo:y,hi:v}=kk(d[h],e,u,o);for(let N=y;N<=v;++N){const D=b[N];D.skip||i(D,p,N)}}}function _k(t){const e=t.indexOf("x")!==-1,a=t.indexOf("y")!==-1;return function(i,o){const d=e?Math.abs(i.x-o.x):0,u=a?Math.abs(i.y-o.y):0;return Math.sqrt(Math.pow(d,2)+Math.pow(u,2))}}function hm(t,e,a,i,o){const d=[];return!o&&!t.isPointInArea(e)||Rd(t,a,e,function(h,m,p){!o&&!hj(h,t.chartArea,0)||h.inRange(e.x,e.y,i)&&d.push({element:h,datasetIndex:m,index:p})},!0),d}function Dk(t,e,a,i){let o=[];function d(u,h,m){const{startAngle:p,endAngle:b}=u.getProps(["startAngle","endAngle"],i),{angle:y}=nj(u,{x:e.x,y:e.y});gd(y,p,b)&&o.push({element:u,datasetIndex:h,index:m})}return Rd(t,a,e,d),o}function Mk(t,e,a,i,o,d){let u=[];const h=_k(a);let m=Number.POSITIVE_INFINITY;function p(b,y,v){const N=b.inRange(e.x,e.y,o);if(i&&!N)return;const D=b.getCenterPoint(o);if(!(!!d||t.isPointInArea(D))&&!N)return;const A=h(e,D);A<m?(u=[{element:b,datasetIndex:y,index:v}],m=A):A===m&&u.push({element:b,datasetIndex:y,index:v})}return Rd(t,a,e,p),u}function mm(t,e,a,i,o,d){return!d&&!t.isPointInArea(e)?[]:a==="r"&&!i?Dk(t,e,a,o):Mk(t,e,a,i,o,d)}function Oy(t,e,a,i,o){const d=[],u=a==="x"?"inXRange":"inYRange";let h=!1;return Rd(t,a,e,(m,p,b)=>{m[u]&&m[u](e[a],o)&&(d.push({element:m,datasetIndex:p,index:b}),h=h||m.inRange(e.x,e.y,o))}),i&&!h?[]:d}var $k={modes:{index(t,e,a,i){const o=vl(e,t),d=a.axis||"x",u=a.includeInvisible||!1,h=a.intersect?hm(t,o,d,i,u):mm(t,o,d,!1,i,u),m=[];return h.length?(t.getSortedVisibleDatasetMetas().forEach(p=>{const b=h[0].index,y=p.data[b];y&&!y.skip&&m.push({element:y,datasetIndex:p.index,index:b})}),m):[]},dataset(t,e,a,i){const o=vl(e,t),d=a.axis||"xy",u=a.includeInvisible||!1;let h=a.intersect?hm(t,o,d,i,u):mm(t,o,d,!1,i,u);if(h.length>0){const m=h[0].datasetIndex,p=t.getDatasetMeta(m).data;h=[];for(let b=0;b<p.length;++b)h.push({element:p[b],datasetIndex:m,index:b})}return h},point(t,e,a,i){const o=vl(e,t),d=a.axis||"xy",u=a.includeInvisible||!1;return hm(t,o,d,i,u)},nearest(t,e,a,i){const o=vl(e,t),d=a.axis||"xy",u=a.includeInvisible||!1;return mm(t,o,d,a.intersect,i,u)},x(t,e,a,i){const o=vl(e,t);return Oy(t,o,"x",a.intersect,i)},y(t,e,a,i){const o=vl(e,t);return Oy(t,o,"y",a.intersect,i)}}};const wj=["left","top","right","bottom"];function Dr(t,e){return t.filter(a=>a.pos===e)}function By(t,e){return t.filter(a=>wj.indexOf(a.pos)===-1&&a.box.axis===e)}function Mr(t,e){return t.sort((a,i)=>{const o=e?i:a,d=e?a:i;return o.weight===d.weight?o.index-d.index:o.weight-d.weight})}function Rk(t){const e=[];let a,i,o,d,u,h;for(a=0,i=(t||[]).length;a<i;++a)o=t[a],{position:d,options:{stack:u,stackWeight:h=1}}=o,e.push({index:a,box:o,pos:d,horizontal:o.isHorizontal(),weight:o.weight,stack:u&&d+u,stackWeight:h});return e}function Lk(t){const e={};for(const a of t){const{stack:i,pos:o,stackWeight:d}=a;if(!i||!wj.includes(o))continue;const u=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});u.count++,u.weight+=d}return e}function Ik(t,e){const a=Lk(t),{vBoxMaxWidth:i,hBoxMaxHeight:o}=e;let d,u,h;for(d=0,u=t.length;d<u;++d){h=t[d];const{fullSize:m}=h.box,p=a[h.stack],b=p&&h.stackWeight/p.weight;h.horizontal?(h.width=b?b*i:m&&e.availableWidth,h.height=o):(h.width=i,h.height=b?b*o:m&&e.availableHeight)}return a}function Ok(t){const e=Rk(t),a=Mr(e.filter(p=>p.box.fullSize),!0),i=Mr(Dr(e,"left"),!0),o=Mr(Dr(e,"right")),d=Mr(Dr(e,"top"),!0),u=Mr(Dr(e,"bottom")),h=By(e,"x"),m=By(e,"y");return{fullSize:a,leftAndTop:i.concat(d),rightAndBottom:o.concat(m).concat(u).concat(h),chartArea:Dr(e,"chartArea"),vertical:i.concat(o).concat(m),horizontal:d.concat(u).concat(h)}}function zy(t,e,a,i){return Math.max(t[a],e[a])+Math.max(t[i],e[i])}function Sj(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Bk(t,e,a,i){const{pos:o,box:d}=a,u=t.maxPadding;if(!bt(o)){a.size&&(t[o]-=a.size);const y=i[a.stack]||{size:0,count:1};y.size=Math.max(y.size,a.horizontal?d.height:d.width),a.size=y.size/y.count,t[o]+=a.size}d.getPadding&&Sj(u,d.getPadding());const h=Math.max(0,e.outerWidth-zy(u,t,"left","right")),m=Math.max(0,e.outerHeight-zy(u,t,"top","bottom")),p=h!==t.w,b=m!==t.h;return t.w=h,t.h=m,a.horizontal?{same:p,other:b}:{same:b,other:p}}function zk(t){const e=t.maxPadding;function a(i){const o=Math.max(e[i]-t[i],0);return t[i]+=o,o}t.y+=a("top"),t.x+=a("left"),a("right"),a("bottom")}function Uk(t,e){const a=e.maxPadding;function i(o){const d={left:0,top:0,right:0,bottom:0};return o.forEach(u=>{d[u]=Math.max(e[u],a[u])}),d}return i(t?["left","right"]:["top","bottom"])}function Br(t,e,a,i){const o=[];let d,u,h,m,p,b;for(d=0,u=t.length,p=0;d<u;++d){h=t[d],m=h.box,m.update(h.width||e.w,h.height||e.h,Uk(h.horizontal,e));const{same:y,other:v}=Bk(e,a,h,i);p|=y&&o.length,b=b||v,m.fullSize||o.push(h)}return p&&Br(o,e,a,i)||b}function $c(t,e,a,i,o){t.top=a,t.left=e,t.right=e+i,t.bottom=a+o,t.width=i,t.height=o}function Uy(t,e,a,i){const o=a.padding;let{x:d,y:u}=e;for(const h of t){const m=h.box,p=i[h.stack]||{placed:0,weight:1},b=h.stackWeight/p.weight||1;if(h.horizontal){const y=e.w*b,v=p.size||m.height;Wr(p.start)&&(u=p.start),m.fullSize?$c(m,o.left,u,a.outerWidth-o.right-o.left,v):$c(m,e.left+p.placed,u,y,v),p.start=u,p.placed+=y,u=m.bottom}else{const y=e.h*b,v=p.size||m.width;Wr(p.start)&&(d=p.start),m.fullSize?$c(m,d,o.top,v,a.outerHeight-o.bottom-o.top):$c(m,d,e.top+p.placed,v,y),p.start=d,p.placed+=y,d=m.right}}e.x=d,e.y=u}var Fa={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(a){e.draw(a)}}]},t.boxes.push(e)},removeBox(t,e){const a=t.boxes?t.boxes.indexOf(e):-1;a!==-1&&t.boxes.splice(a,1)},configure(t,e,a){e.fullSize=a.fullSize,e.position=a.position,e.weight=a.weight},update(t,e,a,i){if(!t)return;const o=vn(t.options.layout.padding),d=Math.max(e-o.width,0),u=Math.max(a-o.height,0),h=Ok(t.boxes),m=h.vertical,p=h.horizontal;At(t.boxes,C=>{typeof C.beforeLayout=="function"&&C.beforeLayout()});const b=m.reduce((C,A)=>A.box.options&&A.box.options.display===!1?C:C+1,0)||1,y=Object.freeze({outerWidth:e,outerHeight:a,padding:o,availableWidth:d,availableHeight:u,vBoxMaxWidth:d/2/b,hBoxMaxHeight:u/2}),v=Object.assign({},o);Sj(v,vn(i));const N=Object.assign({maxPadding:v,w:d,h:u,x:o.left,y:o.top},o),D=Ik(m.concat(p),y);Br(h.fullSize,N,y,D),Br(m,N,y,D),Br(p,N,y,D)&&Br(m,N,y,D),zk(N),Uy(h.leftAndTop,N,y,D),N.x+=N.w,N.y+=N.h,Uy(h.rightAndBottom,N,y,D),t.chartArea={left:N.left,top:N.top,right:N.left+N.w,bottom:N.top+N.h,height:N.h,width:N.w},At(h.chartArea,C=>{const A=C.box;Object.assign(A,t.chartArea),A.update(N.w,N.h,{left:0,top:0,right:0,bottom:0})})}};class Cj{acquireContext(e,a){}releaseContext(e){return!1}addEventListener(e,a,i){}removeEventListener(e,a,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,a,i,o){return a=Math.max(0,a||e.width),i=i||e.height,{width:a,height:Math.max(0,o?Math.floor(a/o):i)}}isAttached(e){return!0}updateConfig(e){}}class Fk extends Cj{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const Wc="$chartjs",Hk={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Fy=t=>t===null||t==="";function Pk(t,e){const a=t.style,i=t.getAttribute("height"),o=t.getAttribute("width");if(t[Wc]={initial:{height:i,width:o,style:{display:a.display,height:a.height,width:a.width}}},a.display=a.display||"block",a.boxSizing=a.boxSizing||"border-box",Fy(o)){const d=Ey(t,"width");d!==void 0&&(t.width=d)}if(Fy(i))if(t.style.height==="")t.height=t.width/(e||2);else{const d=Ey(t,"height");d!==void 0&&(t.height=d)}return t}const Aj=KT?{passive:!0}:!1;function Vk(t,e,a){t&&t.addEventListener(e,a,Aj)}function Yk(t,e,a){t&&t.canvas&&t.canvas.removeEventListener(e,a,Aj)}function qk(t,e){const a=Hk[t.type]||t.type,{x:i,y:o}=vl(t,e);return{type:a,chart:e,native:t,x:i!==void 0?i:null,y:o!==void 0?o:null}}function vd(t,e){for(const a of t)if(a===e||a.contains(e))return!0}function Gk(t,e,a){const i=t.canvas,o=new MutationObserver(d=>{let u=!1;for(const h of d)u=u||vd(h.addedNodes,i),u=u&&!vd(h.removedNodes,i);u&&a()});return o.observe(document,{childList:!0,subtree:!0}),o}function Xk(t,e,a){const i=t.canvas,o=new MutationObserver(d=>{let u=!1;for(const h of d)u=u||vd(h.removedNodes,i),u=u&&!vd(h.addedNodes,i);u&&a()});return o.observe(document,{childList:!0,subtree:!0}),o}const Kr=new Map;let Hy=0;function Ej(){const t=window.devicePixelRatio;t!==Hy&&(Hy=t,Kr.forEach((e,a)=>{a.currentDevicePixelRatio!==t&&e()}))}function Wk(t,e){Kr.size||window.addEventListener("resize",Ej),Kr.set(t,e)}function Kk(t){Kr.delete(t),Kr.size||window.removeEventListener("resize",Ej)}function Qk(t,e,a){const i=t.canvas,o=i&&gf(i);if(!o)return;const d=rj((h,m)=>{const p=o.clientWidth;a(h,m),p<o.clientWidth&&a()},window),u=new ResizeObserver(h=>{const m=h[0],p=m.contentRect.width,b=m.contentRect.height;p===0&&b===0||d(p,b)});return u.observe(o),Wk(t,d),u}function fm(t,e,a){a&&a.disconnect(),e==="resize"&&Kk(t)}function Zk(t,e,a){const i=t.canvas,o=rj(d=>{t.ctx!==null&&a(qk(d,t))},t);return Vk(i,e,o),o}class Jk extends Cj{acquireContext(e,a){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(Pk(e,a),i):null}releaseContext(e){const a=e.canvas;if(!a[Wc])return!1;const i=a[Wc].initial;["height","width"].forEach(d=>{const u=i[d];Mt(u)?a.removeAttribute(d):a.setAttribute(d,u)});const o=i.style||{};return Object.keys(o).forEach(d=>{a.style[d]=o[d]}),a.width=a.width,delete a[Wc],!0}addEventListener(e,a,i){this.removeEventListener(e,a);const o=e.$proxies||(e.$proxies={}),u={attach:Gk,detach:Xk,resize:Qk}[a]||Zk;o[a]=u(e,a,i)}removeEventListener(e,a){const i=e.$proxies||(e.$proxies={}),o=i[a];if(!o)return;({attach:fm,detach:fm,resize:fm}[a]||Yk)(e,a,o),i[a]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,a,i,o){return WT(e,a,i,o)}isAttached(e){const a=e&&gf(e);return!!(a&&a.isConnected)}}function e_(t){return!pf()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?Fk:Jk}let Ri=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){const{x:a,y:i}=this.getProps(["x","y"],e);return{x:a,y:i}}hasValue(){return pd(this.x)&&pd(this.y)}getProps(e,a){const i=this.$animations;if(!a||!i)return this;const o={};return e.forEach(d=>{o[d]=i[d]&&i[d].active()?i[d]._to:this[d]}),o}};function t_(t,e){const a=t.options.ticks,i=s_(t),o=Math.min(a.maxTicksLimit||i,i),d=a.major.enabled?a_(e):[],u=d.length,h=d[0],m=d[u-1],p=[];if(u>o)return l_(e,p,d,u/o),p;const b=n_(d,e,o);if(u>0){let y,v;const N=u>1?Math.round((m-h)/(u-1)):null;for(Rc(e,p,b,Mt(N)?0:h-N,h),y=0,v=u-1;y<v;y++)Rc(e,p,b,d[y],d[y+1]);return Rc(e,p,b,m,Mt(N)?e.length:m+N),p}return Rc(e,p,b),p}function s_(t){const e=t.options.offset,a=t._tickSize(),i=t._length/a+(e?0:1),o=t._maxLength/a;return Math.floor(Math.min(i,o))}function n_(t,e,a){const i=i_(t),o=e.length/a;if(!i)return Math.max(o,1);const d=lT(i);for(let u=0,h=d.length-1;u<h;u++){const m=d[u];if(m>o)return m}return Math.max(o,1)}function a_(t){const e=[];let a,i;for(a=0,i=t.length;a<i;a++)t[a].major&&e.push(a);return e}function l_(t,e,a,i){let o=0,d=a[0],u;for(i=Math.ceil(i),u=0;u<t.length;u++)u===d&&(e.push(t[u]),o++,d=a[o*i])}function Rc(t,e,a,i,o){const d=xt(i,0),u=Math.min(xt(o,t.length),t.length);let h=0,m,p,b;for(a=Math.ceil(a),o&&(m=o-i,a=m/Math.floor(m/a)),b=d;b<0;)h++,b=Math.round(d+h*a);for(p=Math.max(d,0);p<u;p++)p===b&&(e.push(t[p]),h++,b=Math.round(d+h*a))}function i_(t){const e=t.length;let a,i;if(e<2)return!1;for(i=t[0],a=1;a<e;++a)if(t[a]-t[a-1]!==i)return!1;return i}const r_=t=>t==="left"?"right":t==="right"?"left":t,Py=(t,e,a)=>e==="top"||e==="left"?t[e]+a:t[e]-a,Vy=(t,e)=>Math.min(e||t,t);function Yy(t,e){const a=[],i=t.length/e,o=t.length;let d=0;for(;d<o;d+=i)a.push(t[Math.floor(d)]);return a}function o_(t,e,a){const i=t.ticks.length,o=Math.min(e,i-1),d=t._startPixel,u=t._endPixel,h=1e-6;let m=t.getPixelForTick(o),p;if(!(a&&(i===1?p=Math.max(m-d,u-m):e===0?p=(t.getPixelForTick(1)-m)/2:p=(m-t.getPixelForTick(o-1))/2,m+=o<e?p:-p,m<d-h||m>u+h)))return m}function c_(t,e){At(t,a=>{const i=a.gc,o=i.length/2;let d;if(o>e){for(d=0;d<o;++d)delete a.data[i[d]];i.splice(0,o)}})}function $r(t){return t.drawTicks?t.tickLength:0}function qy(t,e){if(!t.display)return 0;const a=Ls(t.font,e),i=vn(t.padding);return(os(t.text)?t.text.length:1)*a.lineHeight+i.height}function d_(t,e){return $i(t,{scale:e,type:"scale"})}function u_(t,e,a){return $i(t,{tick:a,index:e,type:"tick"})}function h_(t,e,a){let i=oj(t);return(a&&e!=="right"||!a&&e==="right")&&(i=r_(i)),i}function m_(t,e,a,i){const{top:o,left:d,bottom:u,right:h,chart:m}=t,{chartArea:p,scales:b}=m;let y=0,v,N,D;const C=u-o,A=h-d;if(t.isHorizontal()){if(N=qs(i,d,h),bt(a)){const S=Object.keys(a)[0],M=a[S];D=b[S].getPixelForValue(M)+C-e}else a==="center"?D=(p.bottom+p.top)/2+C-e:D=Py(t,a,e);v=h-d}else{if(bt(a)){const S=Object.keys(a)[0],M=a[S];N=b[S].getPixelForValue(M)-A+e}else a==="center"?N=(p.left+p.right)/2-A+e:N=Py(t,a,e);D=qs(i,u,o),y=a==="left"?-ls:ls}return{titleX:N,titleY:D,maxWidth:v,rotation:y}}class Li extends Ri{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,a){return e}getUserBounds(){let{_userMin:e,_userMax:a,_suggestedMin:i,_suggestedMax:o}=this;return e=An(e,Number.POSITIVE_INFINITY),a=An(a,Number.NEGATIVE_INFINITY),i=An(i,Number.POSITIVE_INFINITY),o=An(o,Number.NEGATIVE_INFINITY),{min:An(e,i),max:An(a,o),minDefined:mn(e),maxDefined:mn(a)}}getMinMax(e){let{min:a,max:i,minDefined:o,maxDefined:d}=this.getUserBounds(),u;if(o&&d)return{min:a,max:i};const h=this.getMatchingVisibleMetas();for(let m=0,p=h.length;m<p;++m)u=h[m].controller.getMinMax(this,e),o||(a=Math.min(a,u.min)),d||(i=Math.max(i,u.max));return a=d&&a>i?i:a,i=o&&a>i?a:i,{min:An(a,An(i,a)),max:An(i,An(a,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){zt(this.options.beforeUpdate,[this])}update(e,a,i){const{beginAtZero:o,grace:d,ticks:u}=this.options,h=u.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=a,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=RT(this,d,o),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const m=h<this.ticks.length;this._convertTicksToLabels(m?Yy(this.ticks,h):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),u.display&&(u.autoSkip||u.source==="auto")&&(this.ticks=t_(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),m&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,a,i;this.isHorizontal()?(a=this.left,i=this.right):(a=this.top,i=this.bottom,e=!e),this._startPixel=a,this._endPixel=i,this._reversePixels=e,this._length=i-a,this._alignToPixels=this.options.alignToPixels}afterUpdate(){zt(this.options.afterUpdate,[this])}beforeSetDimensions(){zt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){zt(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),zt(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){zt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const a=this.options.ticks;let i,o,d;for(i=0,o=e.length;i<o;i++)d=e[i],d.label=zt(a.callback,[d.value,i,e],this)}afterTickToLabelConversion(){zt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){zt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,a=e.ticks,i=Vy(this.ticks.length,e.ticks.maxTicksLimit),o=a.minRotation||0,d=a.maxRotation;let u=o,h,m,p;if(!this._isVisible()||!a.display||o>=d||i<=1||!this.isHorizontal()){this.labelRotation=o;return}const b=this._getLabelSizes(),y=b.widest.width,v=b.highest.height,N=Rs(this.chart.width-y,0,this.maxWidth);h=e.offset?this.maxWidth/i:N/(i-1),y+6>h&&(h=N/(i-(e.offset?.5:1)),m=this.maxHeight-$r(e.grid)-a.padding-qy(e.title,this.chart.options.font),p=Math.sqrt(y*y+v*v),u=cT(Math.min(Math.asin(Rs((b.highest.height+6)/h,-1,1)),Math.asin(Rs(m/p,-1,1))-Math.asin(Rs(v/p,-1,1)))),u=Math.max(o,Math.min(d,u))),this.labelRotation=u}afterCalculateLabelRotation(){zt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){zt(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:a,options:{ticks:i,title:o,grid:d}}=this,u=this._isVisible(),h=this.isHorizontal();if(u){const m=qy(o,a.options.font);if(h?(e.width=this.maxWidth,e.height=$r(d)+m):(e.height=this.maxHeight,e.width=$r(d)+m),i.display&&this.ticks.length){const{first:p,last:b,widest:y,highest:v}=this._getLabelSizes(),N=i.padding*2,D=la(this.labelRotation),C=Math.cos(D),A=Math.sin(D);if(h){const S=i.mirror?0:A*y.width+C*v.height;e.height=Math.min(this.maxHeight,e.height+S+N)}else{const S=i.mirror?0:C*y.width+A*v.height;e.width=Math.min(this.maxWidth,e.width+S+N)}this._calculatePadding(p,b,A,C)}}this._handleMargins(),h?(this.width=this._length=a.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=a.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,a,i,o){const{ticks:{align:d,padding:u},position:h}=this.options,m=this.labelRotation!==0,p=h!=="top"&&this.axis==="x";if(this.isHorizontal()){const b=this.getPixelForTick(0)-this.left,y=this.right-this.getPixelForTick(this.ticks.length-1);let v=0,N=0;m?p?(v=o*e.width,N=i*a.height):(v=i*e.height,N=o*a.width):d==="start"?N=a.width:d==="end"?v=e.width:d!=="inner"&&(v=e.width/2,N=a.width/2),this.paddingLeft=Math.max((v-b+u)*this.width/(this.width-b),0),this.paddingRight=Math.max((N-y+u)*this.width/(this.width-y),0)}else{let b=a.height/2,y=e.height/2;d==="start"?(b=0,y=e.height):d==="end"&&(b=a.height,y=0),this.paddingTop=b+u,this.paddingBottom=y+u}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){zt(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:a}=this.options;return a==="top"||a==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let a,i;for(a=0,i=e.length;a<i;a++)Mt(e[a].label)&&(e.splice(a,1),i--,a--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const a=this.options.ticks.sampleSize;let i=this.ticks;a<i.length&&(i=Yy(i,a)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,a,i){const{ctx:o,_longestTextCache:d}=this,u=[],h=[],m=Math.floor(a/Vy(a,i));let p=0,b=0,y,v,N,D,C,A,S,M,F,z,K;for(y=0;y<a;y+=m){if(D=e[y].label,C=this._resolveTickFontOptions(y),o.font=A=C.string,S=d[A]=d[A]||{data:{},gc:[]},M=C.lineHeight,F=z=0,!Mt(D)&&!os(D))F=jy(o,S.data,S.gc,F,D),z=M;else if(os(D))for(v=0,N=D.length;v<N;++v)K=D[v],!Mt(K)&&!os(K)&&(F=jy(o,S.data,S.gc,F,K),z+=M);u.push(F),h.push(z),p=Math.max(F,p),b=Math.max(z,b)}c_(d,a);const R=u.indexOf(p),w=h.indexOf(b),_=B=>({width:u[B]||0,height:h[B]||0});return{first:_(0),last:_(a-1),widest:_(R),highest:_(w),widths:u,heights:h}}getLabelForValue(e){return e}getPixelForValue(e,a){return NaN}getValueForPixel(e){}getPixelForTick(e){const a=this.ticks;return e<0||e>a.length-1?null:this.getPixelForValue(a[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const a=this._startPixel+e*this._length;return uT(this._alignToPixels?bl(this.chart,a,0):a)}getDecimalForPixel(e){const a=(e-this._startPixel)/this._length;return this._reversePixels?1-a:a}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:a}=this;return e<0&&a<0?a:e>0&&a>0?e:0}getContext(e){const a=this.ticks||[];if(e>=0&&e<a.length){const i=a[e];return i.$context||(i.$context=u_(this.getContext(),e,i))}return this.$context||(this.$context=d_(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,a=la(this.labelRotation),i=Math.abs(Math.cos(a)),o=Math.abs(Math.sin(a)),d=this._getLabelSizes(),u=e.autoSkipPadding||0,h=d?d.widest.width+u:0,m=d?d.highest.height+u:0;return this.isHorizontal()?m*i>h*o?h/i:m/o:m*o<h*i?m/i:h/o}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const a=this.axis,i=this.chart,o=this.options,{grid:d,position:u,border:h}=o,m=d.offset,p=this.isHorizontal(),y=this.ticks.length+(m?1:0),v=$r(d),N=[],D=h.setContext(this.getContext()),C=D.display?D.width:0,A=C/2,S=function(L){return bl(i,L,C)};let M,F,z,K,R,w,_,B,T,U,V,q;if(u==="top")M=S(this.bottom),w=this.bottom-v,B=M-A,U=S(e.top)+A,q=e.bottom;else if(u==="bottom")M=S(this.top),U=e.top,q=S(e.bottom)-A,w=M+A,B=this.top+v;else if(u==="left")M=S(this.right),R=this.right-v,_=M-A,T=S(e.left)+A,V=e.right;else if(u==="right")M=S(this.left),T=e.left,V=S(e.right)-A,R=M+A,_=this.left+v;else if(a==="x"){if(u==="center")M=S((e.top+e.bottom)/2+.5);else if(bt(u)){const L=Object.keys(u)[0],$=u[L];M=S(this.chart.scales[L].getPixelForValue($))}U=e.top,q=e.bottom,w=M+A,B=w+v}else if(a==="y"){if(u==="center")M=S((e.left+e.right)/2);else if(bt(u)){const L=Object.keys(u)[0],$=u[L];M=S(this.chart.scales[L].getPixelForValue($))}R=M-A,_=R-v,T=e.left,V=e.right}const H=xt(o.ticks.maxTicksLimit,y),E=Math.max(1,Math.ceil(y/H));for(F=0;F<y;F+=E){const L=this.getContext(F),$=d.setContext(L),O=h.setContext(L),Q=$.lineWidth,Z=$.color,k=O.dash||[],W=O.dashOffset,P=$.tickWidth,G=$.tickColor,Y=$.tickBorderDash||[],ee=$.tickBorderDashOffset;z=o_(this,F,m),z!==void 0&&(K=bl(i,z,Q),p?R=_=T=V=K:w=B=U=q=K,N.push({tx1:R,ty1:w,tx2:_,ty2:B,x1:T,y1:U,x2:V,y2:q,width:Q,color:Z,borderDash:k,borderDashOffset:W,tickWidth:P,tickColor:G,tickBorderDash:Y,tickBorderDashOffset:ee}))}return this._ticksLength=y,this._borderValue=M,N}_computeLabelItems(e){const a=this.axis,i=this.options,{position:o,ticks:d}=i,u=this.isHorizontal(),h=this.ticks,{align:m,crossAlign:p,padding:b,mirror:y}=d,v=$r(i.grid),N=v+b,D=y?-b:N,C=-la(this.labelRotation),A=[];let S,M,F,z,K,R,w,_,B,T,U,V,q="middle";if(o==="top")R=this.bottom-D,w=this._getXAxisLabelAlignment();else if(o==="bottom")R=this.top+D,w=this._getXAxisLabelAlignment();else if(o==="left"){const E=this._getYAxisLabelAlignment(v);w=E.textAlign,K=E.x}else if(o==="right"){const E=this._getYAxisLabelAlignment(v);w=E.textAlign,K=E.x}else if(a==="x"){if(o==="center")R=(e.top+e.bottom)/2+N;else if(bt(o)){const E=Object.keys(o)[0],L=o[E];R=this.chart.scales[E].getPixelForValue(L)+N}w=this._getXAxisLabelAlignment()}else if(a==="y"){if(o==="center")K=(e.left+e.right)/2-N;else if(bt(o)){const E=Object.keys(o)[0],L=o[E];K=this.chart.scales[E].getPixelForValue(L)}w=this._getYAxisLabelAlignment(v).textAlign}a==="y"&&(m==="start"?q="top":m==="end"&&(q="bottom"));const H=this._getLabelSizes();for(S=0,M=h.length;S<M;++S){F=h[S],z=F.label;const E=d.setContext(this.getContext(S));_=this.getPixelForTick(S)+d.labelOffset,B=this._resolveTickFontOptions(S),T=B.lineHeight,U=os(z)?z.length:1;const L=U/2,$=E.color,O=E.textStrokeColor,Q=E.textStrokeWidth;let Z=w;u?(K=_,w==="inner"&&(S===M-1?Z=this.options.reverse?"left":"right":S===0?Z=this.options.reverse?"right":"left":Z="center"),o==="top"?p==="near"||C!==0?V=-U*T+T/2:p==="center"?V=-H.highest.height/2-L*T+T:V=-H.highest.height+T/2:p==="near"||C!==0?V=T/2:p==="center"?V=H.highest.height/2-L*T:V=H.highest.height-U*T,y&&(V*=-1),C!==0&&!E.showLabelBackdrop&&(K+=T/2*Math.sin(C))):(R=_,V=(1-U)*T/2);let k;if(E.showLabelBackdrop){const W=vn(E.backdropPadding),P=H.heights[S],G=H.widths[S];let Y=V-W.top,ee=0-W.left;switch(q){case"middle":Y-=P/2;break;case"bottom":Y-=P;break}switch(w){case"center":ee-=G/2;break;case"right":ee-=G;break;case"inner":S===M-1?ee-=G:S>0&&(ee-=G/2);break}k={left:ee,top:Y,width:G+W.width,height:P+W.height,color:E.backdropColor}}A.push({label:z,font:B,textOffset:V,options:{rotation:C,color:$,strokeColor:O,strokeWidth:Q,textAlign:Z,textBaseline:q,translation:[K,R],backdrop:k}})}return A}_getXAxisLabelAlignment(){const{position:e,ticks:a}=this.options;if(-la(this.labelRotation))return e==="top"?"left":"right";let o="center";return a.align==="start"?o="left":a.align==="end"?o="right":a.align==="inner"&&(o="inner"),o}_getYAxisLabelAlignment(e){const{position:a,ticks:{crossAlign:i,mirror:o,padding:d}}=this.options,u=this._getLabelSizes(),h=e+d,m=u.widest.width;let p,b;return a==="left"?o?(b=this.right+d,i==="near"?p="left":i==="center"?(p="center",b+=m/2):(p="right",b+=m)):(b=this.right-h,i==="near"?p="right":i==="center"?(p="center",b-=m/2):(p="left",b=this.left)):a==="right"?o?(b=this.left+d,i==="near"?p="right":i==="center"?(p="center",b-=m/2):(p="left",b-=m)):(b=this.left+h,i==="near"?p="left":i==="center"?(p="center",b+=m/2):(p="right",b=this.right)):p="right",{textAlign:p,x:b}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,a=this.options.position;if(a==="left"||a==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(a==="top"||a==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:a},left:i,top:o,width:d,height:u}=this;a&&(e.save(),e.fillStyle=a,e.fillRect(i,o,d,u),e.restore())}getLineWidthForValue(e){const a=this.options.grid;if(!this._isVisible()||!a.display)return 0;const o=this.ticks.findIndex(d=>d.value===e);return o>=0?a.setContext(this.getContext(o)).lineWidth:0}drawGrid(e){const a=this.options.grid,i=this.ctx,o=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let d,u;const h=(m,p,b)=>{!b.width||!b.color||(i.save(),i.lineWidth=b.width,i.strokeStyle=b.color,i.setLineDash(b.borderDash||[]),i.lineDashOffset=b.borderDashOffset,i.beginPath(),i.moveTo(m.x,m.y),i.lineTo(p.x,p.y),i.stroke(),i.restore())};if(a.display)for(d=0,u=o.length;d<u;++d){const m=o[d];a.drawOnChartArea&&h({x:m.x1,y:m.y1},{x:m.x2,y:m.y2},m),a.drawTicks&&h({x:m.tx1,y:m.ty1},{x:m.tx2,y:m.ty2},{color:m.tickColor,width:m.tickWidth,borderDash:m.tickBorderDash,borderDashOffset:m.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:a,options:{border:i,grid:o}}=this,d=i.setContext(this.getContext()),u=i.display?d.width:0;if(!u)return;const h=o.setContext(this.getContext(0)).lineWidth,m=this._borderValue;let p,b,y,v;this.isHorizontal()?(p=bl(e,this.left,u)-u/2,b=bl(e,this.right,h)+h/2,y=v=m):(y=bl(e,this.top,u)-u/2,v=bl(e,this.bottom,h)+h/2,p=b=m),a.save(),a.lineWidth=d.width,a.strokeStyle=d.color,a.beginPath(),a.moveTo(p,y),a.lineTo(b,v),a.stroke(),a.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,o=this._computeLabelArea();o&&cf(i,o);const d=this.getLabelItems(e);for(const u of d){const h=u.options,m=u.font,p=u.label,b=u.textOffset;xd(i,p,0,b,m,h)}o&&df(i)}drawTitle(){const{ctx:e,options:{position:a,title:i,reverse:o}}=this;if(!i.display)return;const d=Ls(i.font),u=vn(i.padding),h=i.align;let m=d.lineHeight/2;a==="bottom"||a==="center"||bt(a)?(m+=u.bottom,os(i.text)&&(m+=d.lineHeight*(i.text.length-1))):m+=u.top;const{titleX:p,titleY:b,maxWidth:y,rotation:v}=m_(this,m,a,h);xd(e,i.text,0,0,d,{color:i.color,maxWidth:y,rotation:v,textAlign:h_(h,a,o),textBaseline:"middle",translation:[p,b]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,a=e.ticks&&e.ticks.z||0,i=xt(e.grid&&e.grid.z,-1),o=xt(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Li.prototype.draw?[{z:a,draw:d=>{this.draw(d)}}]:[{z:i,draw:d=>{this.drawBackground(),this.drawGrid(d),this.drawTitle()}},{z:o,draw:()=>{this.drawBorder()}},{z:a,draw:d=>{this.drawLabels(d)}}]}getMatchingVisibleMetas(e){const a=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",o=[];let d,u;for(d=0,u=a.length;d<u;++d){const h=a[d];h[i]===this.id&&(!e||h.type===e)&&o.push(h)}return o}_resolveTickFontOptions(e){const a=this.options.ticks.setContext(this.getContext(e));return Ls(a.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Lc{constructor(e,a,i){this.type=e,this.scope=a,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const a=Object.getPrototypeOf(e);let i;g_(a)&&(i=this.register(a));const o=this.items,d=e.id,u=this.scope+"."+d;if(!d)throw new Error("class does not have id: "+e);return d in o||(o[d]=e,f_(e,u,i),this.override&&Qt.override(e.id,e.overrides)),u}get(e){return this.items[e]}unregister(e){const a=this.items,i=e.id,o=this.scope;i in a&&delete a[i],o&&i in Qt[o]&&(delete Qt[o][i],this.override&&delete El[i])}}function f_(t,e,a){const i=Xr(Object.create(null),[a?Qt.get(a):{},Qt.get(e),t.defaults]);Qt.set(e,i),t.defaultRoutes&&p_(e,t.defaultRoutes),t.descriptors&&Qt.describe(e,t.descriptors)}function p_(t,e){Object.keys(e).forEach(a=>{const i=a.split("."),o=i.pop(),d=[t].concat(i).join("."),u=e[a].split("."),h=u.pop(),m=u.join(".");Qt.route(d,o,m,h)})}function g_(t){return"id"in t&&"defaults"in t}class x_{constructor(){this.controllers=new Lc(xf,"datasets",!0),this.elements=new Lc(Ri,"elements"),this.plugins=new Lc(Object,"plugins"),this.scales=new Lc(Li,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,a,i){[...a].forEach(o=>{const d=i||this._getRegistryForType(o);i||d.isForType(o)||d===this.plugins&&o.id?this._exec(e,d,o):At(o,u=>{const h=i||this._getRegistryForType(u);this._exec(e,h,u)})})}_exec(e,a,i){const o=lf(e);zt(i["before"+o],[],i),a[e](i),zt(i["after"+o],[],i)}_getRegistryForType(e){for(let a=0;a<this._typedRegistries.length;a++){const i=this._typedRegistries[a];if(i.isForType(e))return i}return this.plugins}_get(e,a,i){const o=a.get(e);if(o===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return o}}var kn=new x_;class b_{constructor(){this._init=void 0}notify(e,a,i,o){if(a==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const d=o?this._descriptors(e).filter(o):this._descriptors(e),u=this._notify(d,e,a,i);return a==="afterDestroy"&&(this._notify(d,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),u}_notify(e,a,i,o){o=o||{};for(const d of e){const u=d.plugin,h=u[i],m=[a,o,d.options];if(zt(h,m,u)===!1&&o.cancelable)return!1}return!0}invalidate(){Mt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const a=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),a}_createDescriptors(e,a){const i=e&&e.config,o=xt(i.options&&i.options.plugins,{}),d=y_(i);return o===!1&&!a?[]:j_(e,d,o,a)}_notifyStateChanges(e){const a=this._oldCache||[],i=this._cache,o=(d,u)=>d.filter(h=>!u.some(m=>h.plugin.id===m.plugin.id));this._notify(o(a,i),e,"stop"),this._notify(o(i,a),e,"start")}}function y_(t){const e={},a=[],i=Object.keys(kn.plugins.items);for(let d=0;d<i.length;d++)a.push(kn.getPlugin(i[d]));const o=t.plugins||[];for(let d=0;d<o.length;d++){const u=o[d];a.indexOf(u)===-1&&(a.push(u),e[u.id]=!0)}return{plugins:a,localIds:e}}function v_(t,e){return!e&&t===!1?null:t===!0?{}:t}function j_(t,{plugins:e,localIds:a},i,o){const d=[],u=t.getContext();for(const h of e){const m=h.id,p=v_(i[m],o);p!==null&&d.push({plugin:h,options:N_(t.config,{plugin:h,local:a[m]},p,u)})}return d}function N_(t,{plugin:e,local:a},i,o){const d=t.pluginScopeKeys(e),u=t.getOptionScopes(i,d);return a&&e.defaults&&u.push(e.defaults),t.createResolver(u,o,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $m(t,e){const a=Qt.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||a.indexAxis||"x"}function w_(t,e){let a=t;return t==="_index_"?a=e:t==="_value_"&&(a=e==="x"?"y":"x"),a}function S_(t,e){return t===e?"_index_":"_value_"}function Gy(t){if(t==="x"||t==="y"||t==="r")return t}function C_(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Rm(t,...e){if(Gy(t))return t;for(const a of e){const i=a.axis||C_(a.position)||t.length>1&&Gy(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Xy(t,e,a){if(a[e+"AxisID"]===t)return{axis:e}}function A_(t,e){if(e.data&&e.data.datasets){const a=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(a.length)return Xy(t,"x",a[0])||Xy(t,"y",a[0])}return{}}function E_(t,e){const a=El[t.type]||{scales:{}},i=e.scales||{},o=$m(t.type,e),d=Object.create(null);return Object.keys(i).forEach(u=>{const h=i[u];if(!bt(h))return console.error(`Invalid scale configuration for scale: ${u}`);if(h._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${u}`);const m=Rm(u,h,A_(u,t),Qt.scales[h.type]),p=S_(m,o),b=a.scales||{};d[u]=Fr(Object.create(null),[{axis:m},h,b[m],b[p]])}),t.data.datasets.forEach(u=>{const h=u.type||t.type,m=u.indexAxis||$m(h,e),b=(El[h]||{}).scales||{};Object.keys(b).forEach(y=>{const v=w_(y,m),N=u[v+"AxisID"]||v;d[N]=d[N]||Object.create(null),Fr(d[N],[{axis:v},i[N],b[y]])})}),Object.keys(d).forEach(u=>{const h=d[u];Fr(h,[Qt.scales[h.type],Qt.scale])}),d}function Tj(t){const e=t.options||(t.options={});e.plugins=xt(e.plugins,{}),e.scales=E_(t,e)}function kj(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function T_(t){return t=t||{},t.data=kj(t.data),Tj(t),t}const Wy=new Map,_j=new Set;function Ic(t,e){let a=Wy.get(t);return a||(a=e(),Wy.set(t,a),_j.add(a)),a}const Rr=(t,e,a)=>{const i=Al(e,a);i!==void 0&&t.add(i)};class k_{constructor(e){this._config=T_(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=kj(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Tj(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ic(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,a){return Ic(`${e}.transition.${a}`,()=>[[`datasets.${e}.transitions.${a}`,`transitions.${a}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,a){return Ic(`${e}-${a}`,()=>[[`datasets.${e}.elements.${a}`,`datasets.${e}`,`elements.${a}`,""]])}pluginScopeKeys(e){const a=e.id,i=this.type;return Ic(`${i}-plugin-${a}`,()=>[[`plugins.${a}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,a){const i=this._scopeCache;let o=i.get(e);return(!o||a)&&(o=new Map,i.set(e,o)),o}getOptionScopes(e,a,i){const{options:o,type:d}=this,u=this._cachedScopes(e,i),h=u.get(a);if(h)return h;const m=new Set;a.forEach(b=>{e&&(m.add(e),b.forEach(y=>Rr(m,e,y))),b.forEach(y=>Rr(m,o,y)),b.forEach(y=>Rr(m,El[d]||{},y)),b.forEach(y=>Rr(m,Qt,y)),b.forEach(y=>Rr(m,Mm,y))});const p=Array.from(m);return p.length===0&&p.push(Object.create(null)),_j.has(a)&&u.set(a,p),p}chartOptionScopes(){const{options:e,type:a}=this;return[e,El[a]||{},Qt.datasets[a]||{},{type:a},Qt,Mm]}resolveNamedOptions(e,a,i,o=[""]){const d={$shared:!0},{resolver:u,subPrefixes:h}=Ky(this._resolverCache,e,o);let m=u;if(D_(u,a)){d.$shared=!1,i=Ga(i)?i():i;const p=this.createResolver(e,i,h);m=Ci(u,i,p)}for(const p of a)d[p]=m[p];return d}createResolver(e,a,i=[""],o){const{resolver:d}=Ky(this._resolverCache,e,i);return bt(a)?Ci(d,a,void 0,o):d}}function Ky(t,e,a){let i=t.get(e);i||(i=new Map,t.set(e,i));const o=a.join();let d=i.get(o);return d||(d={resolver:hf(e,a),subPrefixes:a.filter(h=>!h.toLowerCase().includes("hover"))},i.set(o,d)),d}const __=t=>bt(t)&&Object.getOwnPropertyNames(t).some(e=>Ga(t[e]));function D_(t,e){const{isScriptable:a,isIndexable:i}=fj(t);for(const o of e){const d=a(o),u=i(o),h=(u||d)&&t[o];if(d&&(Ga(h)||__(h))||u&&os(h))return!0}return!1}var M_="4.5.1";const $_=["top","bottom","left","right","chartArea"];function Qy(t,e){return t==="top"||t==="bottom"||$_.indexOf(t)===-1&&e==="x"}function Zy(t,e){return function(a,i){return a[t]===i[t]?a[e]-i[e]:a[t]-i[t]}}function Jy(t){const e=t.chart,a=e.options.animation;e.notifyPlugins("afterRender"),zt(a&&a.onComplete,[t],e)}function R_(t){const e=t.chart,a=e.options.animation;zt(a&&a.onProgress,[t],e)}function Dj(t){return pf()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const Kc={},ev=t=>{const e=Dj(t);return Object.values(Kc).filter(a=>a.canvas===e).pop()};function L_(t,e,a){const i=Object.keys(t);for(const o of i){const d=+o;if(d>=e){const u=t[o];delete t[o],(a>0||d>e)&&(t[d+a]=u)}}}function I_(t,e,a,i){return!a||t.type==="mouseout"?null:i?e:t}let Ii=class{static defaults=Qt;static instances=Kc;static overrides=El;static registry=kn;static version=M_;static getChart=ev;static register(...e){kn.add(...e),tv()}static unregister(...e){kn.remove(...e),tv()}constructor(e,a){const i=this.config=new k_(a),o=Dj(e),d=ev(o);if(d)throw new Error("Canvas is already in use. Chart with ID '"+d.id+"' must be destroyed before the canvas with ID '"+d.canvas.id+"' can be reused.");const u=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||e_(o)),this.platform.updateConfig(i);const h=this.platform.acquireContext(o,u.aspectRatio),m=h&&h.canvas,p=m&&m.height,b=m&&m.width;if(this.id=QE(),this.ctx=h,this.canvas=m,this.width=b,this.height=p,this._options=u,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new b_,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=pT(y=>this.update(y),u.resizeDelay||0),this._dataChanges=[],Kc[this.id]=this,!h||!m){console.error("Failed to create chart: can't acquire context from the given item");return}sa.listen(this,"complete",Jy),sa.listen(this,"progress",R_),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:a},width:i,height:o,_aspectRatio:d}=this;return Mt(e)?a&&d?d:o?i/o:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return kn}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ay(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ny(this.canvas,this.ctx),this}stop(){return sa.stop(this),this}resize(e,a){sa.running(this)?this._resizeBeforeDraw={width:e,height:a}:this._resize(e,a)}_resize(e,a){const i=this.options,o=this.canvas,d=i.maintainAspectRatio&&this.aspectRatio,u=this.platform.getMaximumSize(o,e,a,d),h=i.devicePixelRatio||this.platform.getDevicePixelRatio(),m=this.width?"resize":"attach";this.width=u.width,this.height=u.height,this._aspectRatio=this.aspectRatio,Ay(this,h,!0)&&(this.notifyPlugins("resize",{size:u}),zt(i.onResize,[this,u],this),this.attached&&this._doResize(m)&&this.render())}ensureScalesHaveIDs(){const a=this.options.scales||{};At(a,(i,o)=>{i.id=o})}buildOrUpdateScales(){const e=this.options,a=e.scales,i=this.scales,o=Object.keys(i).reduce((u,h)=>(u[h]=!1,u),{});let d=[];a&&(d=d.concat(Object.keys(a).map(u=>{const h=a[u],m=Rm(u,h),p=m==="r",b=m==="x";return{options:h,dposition:p?"chartArea":b?"bottom":"left",dtype:p?"radialLinear":b?"category":"linear"}}))),At(d,u=>{const h=u.options,m=h.id,p=Rm(m,h),b=xt(h.type,u.dtype);(h.position===void 0||Qy(h.position,p)!==Qy(u.dposition))&&(h.position=u.dposition),o[m]=!0;let y=null;if(m in i&&i[m].type===b)y=i[m];else{const v=kn.getScale(b);y=new v({id:m,type:b,ctx:this.ctx,chart:this}),i[y.id]=y}y.init(h,e)}),At(o,(u,h)=>{u||delete i[h]}),At(i,u=>{Fa.configure(this,u,u.options),Fa.addBox(this,u)})}_updateMetasets(){const e=this._metasets,a=this.data.datasets.length,i=e.length;if(e.sort((o,d)=>o.index-d.index),i>a){for(let o=a;o<i;++o)this._destroyDatasetMeta(o);e.splice(a,i-a)}this._sortedMetasets=e.slice(0).sort(Zy("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:a}}=this;e.length>a.length&&delete this._stacks,e.forEach((i,o)=>{a.filter(d=>d===i._dataset).length===0&&this._destroyDatasetMeta(o)})}buildOrUpdateControllers(){const e=[],a=this.data.datasets;let i,o;for(this._removeUnreferencedMetasets(),i=0,o=a.length;i<o;i++){const d=a[i];let u=this.getDatasetMeta(i);const h=d.type||this.config.type;if(u.type&&u.type!==h&&(this._destroyDatasetMeta(i),u=this.getDatasetMeta(i)),u.type=h,u.indexAxis=d.indexAxis||$m(h,this.options),u.order=d.order||0,u.index=i,u.label=""+d.label,u.visible=this.isDatasetVisible(i),u.controller)u.controller.updateIndex(i),u.controller.linkScales();else{const m=kn.getController(h),{datasetElementType:p,dataElementType:b}=Qt.datasets[h];Object.assign(m,{dataElementType:kn.getElement(b),datasetElementType:p&&kn.getElement(p)}),u.controller=new m(this,i),e.push(u.controller)}}return this._updateMetasets(),e}_resetElements(){At(this.data.datasets,(e,a)=>{this.getDatasetMeta(a).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const a=this.config;a.update();const i=this._options=a.createResolver(a.chartOptionScopes(),this.getContext()),o=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const d=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let u=0;for(let p=0,b=this.data.datasets.length;p<b;p++){const{controller:y}=this.getDatasetMeta(p),v=!o&&d.indexOf(y)===-1;y.buildOrUpdateElements(v),u=Math.max(+y.getMaxOverflow(),u)}u=this._minPadding=i.layout.autoPadding?u:0,this._updateLayout(u),o||At(d,p=>{p.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Zy("z","_idx"));const{_active:h,_lastEvent:m}=this;m?this._eventHandler(m,!0):h.length&&this._updateHoverStyles(h,h,!0),this.render()}_updateScales(){At(this.scales,e=>{Fa.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,a=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!hy(a,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,a=this._getUniformDataChanges()||[];for(const{method:i,start:o,count:d}of a){const u=i==="_removeElements"?-d:d;L_(e,o,u)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const a=this.data.datasets.length,i=d=>new Set(e.filter(u=>u[0]===d).map((u,h)=>h+","+u.splice(1).join(","))),o=i(0);for(let d=1;d<a;d++)if(!hy(o,i(d)))return;return Array.from(o).map(d=>d.split(",")).map(d=>({method:d[1],start:+d[2],count:+d[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Fa.update(this,this.width,this.height,e);const a=this.chartArea,i=a.width<=0||a.height<=0;this._layers=[],At(this.boxes,o=>{i&&o.position==="chartArea"||(o.configure&&o.configure(),this._layers.push(...o._layers()))},this),this._layers.forEach((o,d)=>{o._idx=d}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let a=0,i=this.data.datasets.length;a<i;++a)this.getDatasetMeta(a).controller.configure();for(let a=0,i=this.data.datasets.length;a<i;++a)this._updateDataset(a,Ga(e)?e({datasetIndex:a}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,a){const i=this.getDatasetMeta(e),o={meta:i,index:e,mode:a,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",o)!==!1&&(i.controller._update(a),o.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",o))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(sa.has(this)?this.attached&&!sa.running(this)&&sa.start(this):(this.draw(),Jy({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:o}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,o)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const a=this._layers;for(e=0;e<a.length&&a[e].z<=0;++e)a[e].draw(this.chartArea);for(this._drawDatasets();e<a.length;++e)a[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const a=this._sortedMetasets,i=[];let o,d;for(o=0,d=a.length;o<d;++o){const u=a[o];(!e||u.visible)&&i.push(u)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let a=e.length-1;a>=0;--a)this._drawDataset(e[a]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const a=this.ctx,i={meta:e,index:e.index,cancelable:!0},o=ek(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(o&&cf(a,o),e.controller.draw(),o&&df(a),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return hj(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,a,i,o){const d=$k.modes[a];return typeof d=="function"?d(this,e,i,o):[]}getDatasetMeta(e){const a=this.data.datasets[e],i=this._metasets;let o=i.filter(d=>d&&d._dataset===a).pop();return o||(o={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:a&&a.order||0,index:e,_dataset:a,_parsed:[],_sorted:!1},i.push(o)),o}getContext(){return this.$context||(this.$context=$i(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const a=this.data.datasets[e];if(!a)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!a.hidden}setDatasetVisibility(e,a){const i=this.getDatasetMeta(e);i.hidden=!a}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,a,i){const o=i?"show":"hide",d=this.getDatasetMeta(e),u=d.controller._resolveAnimations(void 0,o);Wr(a)?(d.data[a].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),u.update(d,{visible:i}),this.update(h=>h.datasetIndex===e?o:void 0))}hide(e,a){this._updateVisibility(e,a,!1)}show(e,a){this._updateVisibility(e,a,!0)}_destroyDatasetMeta(e){const a=this._metasets[e];a&&a.controller&&a.controller._destroy(),delete this._metasets[e]}_stop(){let e,a;for(this.stop(),sa.remove(this),e=0,a=this.data.datasets.length;e<a;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:a}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ny(e,a),this.platform.releaseContext(a),this.canvas=null,this.ctx=null),delete Kc[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,a=this.platform,i=(d,u)=>{a.addEventListener(this,d,u),e[d]=u},o=(d,u,h)=>{d.offsetX=u,d.offsetY=h,this._eventHandler(d)};At(this.options.events,d=>i(d,o))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,a=this.platform,i=(m,p)=>{a.addEventListener(this,m,p),e[m]=p},o=(m,p)=>{e[m]&&(a.removeEventListener(this,m,p),delete e[m])},d=(m,p)=>{this.canvas&&this.resize(m,p)};let u;const h=()=>{o("attach",h),this.attached=!0,this.resize(),i("resize",d),i("detach",u)};u=()=>{this.attached=!1,o("resize",d),this._stop(),this._resize(0,0),i("attach",h)},a.isAttached(this.canvas)?h():u()}unbindEvents(){At(this._listeners,(e,a)=>{this.platform.removeEventListener(this,a,e)}),this._listeners={},At(this._responsiveListeners,(e,a)=>{this.platform.removeEventListener(this,a,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,a,i){const o=i?"set":"remove";let d,u,h,m;for(a==="dataset"&&(d=this.getDatasetMeta(e[0].datasetIndex),d.controller["_"+o+"DatasetHoverStyle"]()),h=0,m=e.length;h<m;++h){u=e[h];const p=u&&this.getDatasetMeta(u.datasetIndex).controller;p&&p[o+"HoverStyle"](u.element,u.datasetIndex,u.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const a=this._active||[],i=e.map(({datasetIndex:d,index:u})=>{const h=this.getDatasetMeta(d);if(!h)throw new Error("No dataset found at index "+d);return{datasetIndex:d,element:h.data[u],index:u}});!hd(i,a)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,a))}notifyPlugins(e,a,i){return this._plugins.notify(this,e,a,i)}isPluginEnabled(e){return this._plugins._cache.filter(a=>a.plugin.id===e).length===1}_updateHoverStyles(e,a,i){const o=this.options.hover,d=(m,p)=>m.filter(b=>!p.some(y=>b.datasetIndex===y.datasetIndex&&b.index===y.index)),u=d(a,e),h=i?e:d(e,a);u.length&&this.updateHoverStyle(u,o.mode,!1),h.length&&o.mode&&this.updateHoverStyle(h,o.mode,!0)}_eventHandler(e,a){const i={event:e,replay:a,cancelable:!0,inChartArea:this.isPointInArea(e)},o=u=>(u.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,o)===!1)return;const d=this._handleEvent(e,a,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,o),(d||i.changed)&&this.render(),this}_handleEvent(e,a,i){const{_active:o=[],options:d}=this,u=a,h=this._getActiveElements(e,o,i,u),m=nT(e),p=I_(e,this._lastEvent,i,m);i&&(this._lastEvent=null,zt(d.onHover,[e,h,this],this),m&&zt(d.onClick,[e,h,this],this));const b=!hd(h,o);return(b||a)&&(this._active=h,this._updateHoverStyles(h,o,a)),this._lastEvent=p,b}_getActiveElements(e,a,i,o){if(e.type==="mouseout")return[];if(!i)return a;const d=this.options.hover;return this.getElementsAtEventForMode(e,d.mode,d,o)}};function tv(){return At(Ii.instances,t=>t._plugins.invalidate())}function O_(t,e,a){const{startAngle:i,x:o,y:d,outerRadius:u,innerRadius:h,options:m}=e,{borderWidth:p,borderJoinStyle:b}=m,y=Math.min(p/u,Dn(i-a));if(t.beginPath(),t.arc(o,d,u-p/2,i+y/2,a-y/2),h>0){const v=Math.min(p/h,Dn(i-a));t.arc(o,d,h+p/2,a-v/2,i+v/2,!0)}else{const v=Math.min(p/2,u*Dn(i-a));if(b==="round")t.arc(o,d,v,a-Ut/2,i+Ut/2,!0);else if(b==="bevel"){const N=2*v*v,D=-N*Math.cos(a+Ut/2)+o,C=-N*Math.sin(a+Ut/2)+d,A=N*Math.cos(i+Ut/2)+o,S=N*Math.sin(i+Ut/2)+d;t.lineTo(D,C),t.lineTo(A,S)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}function B_(t,e,a){const{startAngle:i,pixelMargin:o,x:d,y:u,outerRadius:h,innerRadius:m}=e;let p=o/h;t.beginPath(),t.arc(d,u,h,i-p,a+p),m>o?(p=o/m,t.arc(d,u,m,a+p,i-p,!0)):t.arc(d,u,o,a+ls,i-ls),t.closePath(),t.clip()}function z_(t){return uf(t,["outerStart","outerEnd","innerStart","innerEnd"])}function U_(t,e,a,i){const o=z_(t.options.borderRadius),d=(a-e)/2,u=Math.min(d,i*e/2),h=m=>{const p=(a-Math.min(d,m))*i/2;return Rs(m,0,Math.min(d,p))};return{outerStart:h(o.outerStart),outerEnd:h(o.outerEnd),innerStart:Rs(o.innerStart,0,u),innerEnd:Rs(o.innerEnd,0,u)}}function pi(t,e,a,i){return{x:a+t*Math.cos(e),y:i+t*Math.sin(e)}}function jd(t,e,a,i,o,d){const{x:u,y:h,startAngle:m,pixelMargin:p,innerRadius:b}=e,y=Math.max(e.outerRadius+i+a-p,0),v=b>0?b+i+a+p:0;let N=0;const D=o-m;if(i){const E=b>0?b-i:0,L=y>0?y-i:0,$=(E+L)/2,O=$!==0?D*$/($+i):D;N=(D-O)/2}const C=Math.max(.001,D*y-a/Ut)/y,A=(D-C)/2,S=m+A+N,M=o-A-N,{outerStart:F,outerEnd:z,innerStart:K,innerEnd:R}=U_(e,v,y,M-S),w=y-F,_=y-z,B=S+F/w,T=M-z/_,U=v+K,V=v+R,q=S+K/U,H=M-R/V;if(t.beginPath(),d){const E=(B+T)/2;if(t.arc(u,h,y,B,E),t.arc(u,h,y,E,T),z>0){const Q=pi(_,T,u,h);t.arc(Q.x,Q.y,z,T,M+ls)}const L=pi(V,M,u,h);if(t.lineTo(L.x,L.y),R>0){const Q=pi(V,H,u,h);t.arc(Q.x,Q.y,R,M+ls,H+Math.PI)}const $=(M-R/v+(S+K/v))/2;if(t.arc(u,h,v,M-R/v,$,!0),t.arc(u,h,v,$,S+K/v,!0),K>0){const Q=pi(U,q,u,h);t.arc(Q.x,Q.y,K,q+Math.PI,S-ls)}const O=pi(w,S,u,h);if(t.lineTo(O.x,O.y),F>0){const Q=pi(w,B,u,h);t.arc(Q.x,Q.y,F,S-ls,B)}}else{t.moveTo(u,h);const E=Math.cos(B)*y+u,L=Math.sin(B)*y+h;t.lineTo(E,L);const $=Math.cos(T)*y+u,O=Math.sin(T)*y+h;t.lineTo($,O)}t.closePath()}function F_(t,e,a,i,o){const{fullCircles:d,startAngle:u,circumference:h}=e;let m=e.endAngle;if(d){jd(t,e,a,i,m,o);for(let p=0;p<d;++p)t.fill();isNaN(h)||(m=u+(h%ns||ns))}return jd(t,e,a,i,m,o),t.fill(),m}function H_(t,e,a,i,o){const{fullCircles:d,startAngle:u,circumference:h,options:m}=e,{borderWidth:p,borderJoinStyle:b,borderDash:y,borderDashOffset:v,borderRadius:N}=m,D=m.borderAlign==="inner";if(!p)return;t.setLineDash(y||[]),t.lineDashOffset=v,D?(t.lineWidth=p*2,t.lineJoin=b||"round"):(t.lineWidth=p,t.lineJoin=b||"bevel");let C=e.endAngle;if(d){jd(t,e,a,i,C,o);for(let A=0;A<d;++A)t.stroke();isNaN(h)||(C=u+(h%ns||ns))}D&&B_(t,e,C),m.selfJoin&&C-u>=Ut&&N===0&&b!=="miter"&&O_(t,e,C),d||(jd(t,e,a,i,C,o),t.stroke())}class Mj extends Ri{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,a,i){const o=this.getProps(["x","y"],i),{angle:d,distance:u}=nj(o,{x:e,y:a}),{startAngle:h,endAngle:m,innerRadius:p,outerRadius:b,circumference:y}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),v=(this.options.spacing+this.options.borderWidth)/2,N=xt(y,m-h),D=gd(d,h,m)&&h!==m,C=N>=ns||D,A=Nl(u,p+v,b+v);return C&&A}getCenterPoint(e){const{x:a,y:i,startAngle:o,endAngle:d,innerRadius:u,outerRadius:h}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:m,spacing:p}=this.options,b=(o+d)/2,y=(u+h+p+m)/2;return{x:a+Math.cos(b)*y,y:i+Math.sin(b)*y}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:a,circumference:i}=this,o=(a.offset||0)/4,d=(a.spacing||0)/2,u=a.circular;if(this.pixelMargin=a.borderAlign==="inner"?.33:0,this.fullCircles=i>ns?Math.floor(i/ns):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();const h=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(h)*o,Math.sin(h)*o);const m=1-Math.sin(Math.min(Ut,i||0)),p=o*m;e.fillStyle=a.backgroundColor,e.strokeStyle=a.borderColor,F_(e,this,p,d,u),H_(e,this,p,d,u),e.restore()}}function $j(t,e){const{x:a,y:i,base:o,width:d,height:u}=t.getProps(["x","y","base","width","height"],e);let h,m,p,b,y;return t.horizontal?(y=u/2,h=Math.min(a,o),m=Math.max(a,o),p=i-y,b=i+y):(y=d/2,h=a-y,m=a+y,p=Math.min(i,o),b=Math.max(i,o)),{left:h,top:p,right:m,bottom:b}}function Ha(t,e,a,i){return t?0:Rs(e,a,i)}function P_(t,e,a){const i=t.options.borderWidth,o=t.borderSkipped,d=mj(i);return{t:Ha(o.top,d.top,0,a),r:Ha(o.right,d.right,0,e),b:Ha(o.bottom,d.bottom,0,a),l:Ha(o.left,d.left,0,e)}}function V_(t,e,a){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),o=t.options.borderRadius,d=vi(o),u=Math.min(e,a),h=t.borderSkipped,m=i||bt(o);return{topLeft:Ha(!m||h.top||h.left,d.topLeft,0,u),topRight:Ha(!m||h.top||h.right,d.topRight,0,u),bottomLeft:Ha(!m||h.bottom||h.left,d.bottomLeft,0,u),bottomRight:Ha(!m||h.bottom||h.right,d.bottomRight,0,u)}}function Y_(t){const e=$j(t),a=e.right-e.left,i=e.bottom-e.top,o=P_(t,a/2,i/2),d=V_(t,a/2,i/2);return{outer:{x:e.left,y:e.top,w:a,h:i,radius:d},inner:{x:e.left+o.l,y:e.top+o.t,w:a-o.l-o.r,h:i-o.t-o.b,radius:{topLeft:Math.max(0,d.topLeft-Math.max(o.t,o.l)),topRight:Math.max(0,d.topRight-Math.max(o.t,o.r)),bottomLeft:Math.max(0,d.bottomLeft-Math.max(o.b,o.l)),bottomRight:Math.max(0,d.bottomRight-Math.max(o.b,o.r))}}}}function pm(t,e,a,i){const o=e===null,d=a===null,h=t&&!(o&&d)&&$j(t,i);return h&&(o||Nl(e,h.left,h.right))&&(d||Nl(a,h.top,h.bottom))}function q_(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function G_(t,e){t.rect(e.x,e.y,e.w,e.h)}function gm(t,e,a={}){const i=t.x!==a.x?-e:0,o=t.y!==a.y?-e:0,d=(t.x+t.w!==a.x+a.w?e:0)-i,u=(t.y+t.h!==a.y+a.h?e:0)-o;return{x:t.x+i,y:t.y+o,w:t.w+d,h:t.h+u,radius:t.radius}}class yf extends Ri{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:a,options:{borderColor:i,backgroundColor:o}}=this,{inner:d,outer:u}=Y_(this),h=q_(u.radius)?bd:G_;e.save(),(u.w!==d.w||u.h!==d.h)&&(e.beginPath(),h(e,gm(u,a,d)),e.clip(),h(e,gm(d,-a,u)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),h(e,gm(d,a)),e.fillStyle=o,e.fill(),e.restore()}inRange(e,a,i){return pm(this,e,a,i)}inXRange(e,a){return pm(this,e,null,a)}inYRange(e,a){return pm(this,null,e,a)}getCenterPoint(e){const{x:a,y:i,base:o,horizontal:d}=this.getProps(["x","y","base","horizontal"],e);return{x:d?(a+o)/2:a,y:d?i:(i+o)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}const sv=(t,e)=>{let{boxHeight:a=e,boxWidth:i=e}=t;return t.usePointStyle&&(a=Math.min(a,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:a,itemHeight:Math.max(e,a)}},X_=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class nv extends Ri{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,a,i){this.maxWidth=e,this.maxHeight=a,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let a=zt(e.generateLabels,[this.chart],this)||[];e.filter&&(a=a.filter(i=>e.filter(i,this.chart.data))),e.sort&&(a=a.sort((i,o)=>e.sort(i,o,this.chart.data))),this.options.reverse&&a.reverse(),this.legendItems=a}fit(){const{options:e,ctx:a}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,o=Ls(i.font),d=o.size,u=this._computeTitleHeight(),{boxWidth:h,itemHeight:m}=sv(i,d);let p,b;a.font=o.string,this.isHorizontal()?(p=this.maxWidth,b=this._fitRows(u,d,h,m)+10):(b=this.maxHeight,p=this._fitCols(u,o,h,m)+10),this.width=Math.min(p,e.maxWidth||this.maxWidth),this.height=Math.min(b,e.maxHeight||this.maxHeight)}_fitRows(e,a,i,o){const{ctx:d,maxWidth:u,options:{labels:{padding:h}}}=this,m=this.legendHitBoxes=[],p=this.lineWidths=[0],b=o+h;let y=e;d.textAlign="left",d.textBaseline="middle";let v=-1,N=-b;return this.legendItems.forEach((D,C)=>{const A=i+a/2+d.measureText(D.text).width;(C===0||p[p.length-1]+A+2*h>u)&&(y+=b,p[p.length-(C>0?0:1)]=0,N+=b,v++),m[C]={left:0,top:N,row:v,width:A,height:o},p[p.length-1]+=A+h}),y}_fitCols(e,a,i,o){const{ctx:d,maxHeight:u,options:{labels:{padding:h}}}=this,m=this.legendHitBoxes=[],p=this.columnSizes=[],b=u-e;let y=h,v=0,N=0,D=0,C=0;return this.legendItems.forEach((A,S)=>{const{itemWidth:M,itemHeight:F}=W_(i,a,d,A,o);S>0&&N+F+2*h>b&&(y+=v+h,p.push({width:v,height:N}),D+=v+h,C++,v=N=0),m[S]={left:D,top:N,col:C,width:M,height:F},v=Math.max(v,M),N+=F+h}),y+=v,p.push({width:v,height:N}),y}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:a,options:{align:i,labels:{padding:o},rtl:d}}=this,u=ji(d,this.left,this.width);if(this.isHorizontal()){let h=0,m=qs(i,this.left+o,this.right-this.lineWidths[h]);for(const p of a)h!==p.row&&(h=p.row,m=qs(i,this.left+o,this.right-this.lineWidths[h])),p.top+=this.top+e+o,p.left=u.leftForLtr(u.x(m),p.width),m+=p.width+o}else{let h=0,m=qs(i,this.top+e+o,this.bottom-this.columnSizes[h].height);for(const p of a)p.col!==h&&(h=p.col,m=qs(i,this.top+e+o,this.bottom-this.columnSizes[h].height)),p.top=m,p.left+=this.left+o,p.left=u.leftForLtr(u.x(p.left),p.width),m+=p.height+o}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;cf(e,this),this._draw(),df(e)}}_draw(){const{options:e,columnSizes:a,lineWidths:i,ctx:o}=this,{align:d,labels:u}=e,h=Qt.color,m=ji(e.rtl,this.left,this.width),p=Ls(u.font),{padding:b}=u,y=p.size,v=y/2;let N;this.drawTitle(),o.textAlign=m.textAlign("left"),o.textBaseline="middle",o.lineWidth=.5,o.font=p.string;const{boxWidth:D,boxHeight:C,itemHeight:A}=sv(u,y),S=function(R,w,_){if(isNaN(D)||D<=0||isNaN(C)||C<0)return;o.save();const B=xt(_.lineWidth,1);if(o.fillStyle=xt(_.fillStyle,h),o.lineCap=xt(_.lineCap,"butt"),o.lineDashOffset=xt(_.lineDashOffset,0),o.lineJoin=xt(_.lineJoin,"miter"),o.lineWidth=B,o.strokeStyle=xt(_.strokeStyle,h),o.setLineDash(xt(_.lineDash,[])),u.usePointStyle){const T={radius:C*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:B},U=m.xPlus(R,D/2),V=w+v;uj(o,T,U,V,u.pointStyleWidth&&D)}else{const T=w+Math.max((y-C)/2,0),U=m.leftForLtr(R,D),V=vi(_.borderRadius);o.beginPath(),Object.values(V).some(q=>q!==0)?bd(o,{x:U,y:T,w:D,h:C,radius:V}):o.rect(U,T,D,C),o.fill(),B!==0&&o.stroke()}o.restore()},M=function(R,w,_){xd(o,_.text,R,w+A/2,p,{strikethrough:_.hidden,textAlign:m.textAlign(_.textAlign)})},F=this.isHorizontal(),z=this._computeTitleHeight();F?N={x:qs(d,this.left+b,this.right-i[0]),y:this.top+b+z,line:0}:N={x:this.left+b,y:qs(d,this.top+z+b,this.bottom-a[0].height),line:0},bj(this.ctx,e.textDirection);const K=A+b;this.legendItems.forEach((R,w)=>{o.strokeStyle=R.fontColor,o.fillStyle=R.fontColor;const _=o.measureText(R.text).width,B=m.textAlign(R.textAlign||(R.textAlign=u.textAlign)),T=D+v+_;let U=N.x,V=N.y;m.setWidth(this.width),F?w>0&&U+T+b>this.right&&(V=N.y+=K,N.line++,U=N.x=qs(d,this.left+b,this.right-i[N.line])):w>0&&V+K>this.bottom&&(U=N.x=U+a[N.line].width+b,N.line++,V=N.y=qs(d,this.top+z+b,this.bottom-a[N.line].height));const q=m.x(U);if(S(q,V,R),U=gT(B,U+D+v,F?U+T:this.right,e.rtl),M(m.x(U),V,R),F)N.x+=T+b;else if(typeof R.text!="string"){const H=p.lineHeight;N.y+=Rj(R,H)+b}else N.y+=K}),yj(this.ctx,e.textDirection)}drawTitle(){const e=this.options,a=e.title,i=Ls(a.font),o=vn(a.padding);if(!a.display)return;const d=ji(e.rtl,this.left,this.width),u=this.ctx,h=a.position,m=i.size/2,p=o.top+m;let b,y=this.left,v=this.width;if(this.isHorizontal())v=Math.max(...this.lineWidths),b=this.top+p,y=qs(e.align,y,this.right-v);else{const D=this.columnSizes.reduce((C,A)=>Math.max(C,A.height),0);b=p+qs(e.align,this.top,this.bottom-D-e.labels.padding-this._computeTitleHeight())}const N=qs(h,y,y+v);u.textAlign=d.textAlign(oj(h)),u.textBaseline="middle",u.strokeStyle=a.color,u.fillStyle=a.color,u.font=i.string,xd(u,a.text,N,b,i)}_computeTitleHeight(){const e=this.options.title,a=Ls(e.font),i=vn(e.padding);return e.display?a.lineHeight+i.height:0}_getLegendItemAt(e,a){let i,o,d;if(Nl(e,this.left,this.right)&&Nl(a,this.top,this.bottom)){for(d=this.legendHitBoxes,i=0;i<d.length;++i)if(o=d[i],Nl(e,o.left,o.left+o.width)&&Nl(a,o.top,o.top+o.height))return this.legendItems[i]}return null}handleEvent(e){const a=this.options;if(!Z_(e.type,a))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const o=this._hoveredItem,d=X_(o,i);o&&!d&&zt(a.onLeave,[e,o,this],this),this._hoveredItem=i,i&&!d&&zt(a.onHover,[e,i,this],this)}else i&&zt(a.onClick,[e,i,this],this)}}function W_(t,e,a,i,o){const d=K_(i,t,e,a),u=Q_(o,i,e.lineHeight);return{itemWidth:d,itemHeight:u}}function K_(t,e,a,i){let o=t.text;return o&&typeof o!="string"&&(o=o.reduce((d,u)=>d.length>u.length?d:u)),e+a.size/2+i.measureText(o).width}function Q_(t,e,a){let i=t;return typeof e.text!="string"&&(i=Rj(e,a)),i}function Rj(t,e){const a=t.text?t.text.length:0;return e*a}function Z_(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var vf={id:"legend",_element:nv,start(t,e,a){const i=t.legend=new nv({ctx:t.ctx,options:a,chart:t});Fa.configure(t,i,a),Fa.addBox(t,i)},stop(t){Fa.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,a){const i=t.legend;Fa.configure(t,i,a),i.options=a},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,a){const i=e.datasetIndex,o=a.chart;o.isDatasetVisible(i)?(o.hide(i),e.hidden=!0):(o.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:a,pointStyle:i,textAlign:o,color:d,useBorderRadius:u,borderRadius:h}}=t.legend.options;return t._getSortedDatasetMetas().map(m=>{const p=m.controller.getStyle(a?0:void 0),b=vn(p.borderWidth);return{text:e[m.index].label,fillStyle:p.backgroundColor,fontColor:d,hidden:!m.visible,lineCap:p.borderCapStyle,lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:(b.width+b.height)/4,strokeStyle:p.borderColor,pointStyle:i||p.pointStyle,rotation:p.rotation,textAlign:o||p.textAlign,borderRadius:u&&(h||p.borderRadius),datasetIndex:m.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};const zr={average(t){if(!t.length)return!1;let e,a,i=new Set,o=0,d=0;for(e=0,a=t.length;e<a;++e){const h=t[e].element;if(h&&h.hasValue()){const m=h.tooltipPosition();i.add(m.x),o+=m.y,++d}}return d===0||i.size===0?!1:{x:[...i].reduce((h,m)=>h+m)/i.size,y:o/d}},nearest(t,e){if(!t.length)return!1;let a=e.x,i=e.y,o=Number.POSITIVE_INFINITY,d,u,h;for(d=0,u=t.length;d<u;++d){const m=t[d].element;if(m&&m.hasValue()){const p=m.getCenterPoint(),b=dT(e,p);b<o&&(o=b,h=m)}}if(h){const m=h.tooltipPosition();a=m.x,i=m.y}return{x:a,y:i}}};function Tn(t,e){return e&&(os(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function na(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function J_(t,e){const{element:a,datasetIndex:i,index:o}=e,d=t.getDatasetMeta(i).controller,{label:u,value:h}=d.getLabelAndValue(o);return{chart:t,label:u,parsed:d.getParsed(o),raw:t.data.datasets[i].data[o],formattedValue:h,dataset:d.getDataset(),dataIndex:o,datasetIndex:i,element:a}}function av(t,e){const a=t.chart.ctx,{body:i,footer:o,title:d}=t,{boxWidth:u,boxHeight:h}=e,m=Ls(e.bodyFont),p=Ls(e.titleFont),b=Ls(e.footerFont),y=d.length,v=o.length,N=i.length,D=vn(e.padding);let C=D.height,A=0,S=i.reduce((z,K)=>z+K.before.length+K.lines.length+K.after.length,0);if(S+=t.beforeBody.length+t.afterBody.length,y&&(C+=y*p.lineHeight+(y-1)*e.titleSpacing+e.titleMarginBottom),S){const z=e.displayColors?Math.max(h,m.lineHeight):m.lineHeight;C+=N*z+(S-N)*m.lineHeight+(S-1)*e.bodySpacing}v&&(C+=e.footerMarginTop+v*b.lineHeight+(v-1)*e.footerSpacing);let M=0;const F=function(z){A=Math.max(A,a.measureText(z).width+M)};return a.save(),a.font=p.string,At(t.title,F),a.font=m.string,At(t.beforeBody.concat(t.afterBody),F),M=e.displayColors?u+2+e.boxPadding:0,At(i,z=>{At(z.before,F),At(z.lines,F),At(z.after,F)}),M=0,a.font=b.string,At(t.footer,F),a.restore(),A+=D.width,{width:A,height:C}}function eD(t,e){const{y:a,height:i}=e;return a<i/2?"top":a>t.height-i/2?"bottom":"center"}function tD(t,e,a,i){const{x:o,width:d}=i,u=a.caretSize+a.caretPadding;if(t==="left"&&o+d+u>e.width||t==="right"&&o-d-u<0)return!0}function sD(t,e,a,i){const{x:o,width:d}=a,{width:u,chartArea:{left:h,right:m}}=t;let p="center";return i==="center"?p=o<=(h+m)/2?"left":"right":o<=d/2?p="left":o>=u-d/2&&(p="right"),tD(p,t,e,a)&&(p="center"),p}function lv(t,e,a){const i=a.yAlign||e.yAlign||eD(t,a);return{xAlign:a.xAlign||e.xAlign||sD(t,e,a,i),yAlign:i}}function nD(t,e){let{x:a,width:i}=t;return e==="right"?a-=i:e==="center"&&(a-=i/2),a}function aD(t,e,a){let{y:i,height:o}=t;return e==="top"?i+=a:e==="bottom"?i-=o+a:i-=o/2,i}function iv(t,e,a,i){const{caretSize:o,caretPadding:d,cornerRadius:u}=t,{xAlign:h,yAlign:m}=a,p=o+d,{topLeft:b,topRight:y,bottomLeft:v,bottomRight:N}=vi(u);let D=nD(e,h);const C=aD(e,m,p);return m==="center"?h==="left"?D+=p:h==="right"&&(D-=p):h==="left"?D-=Math.max(b,v)+o:h==="right"&&(D+=Math.max(y,N)+o),{x:Rs(D,0,i.width-e.width),y:Rs(C,0,i.height-e.height)}}function Oc(t,e,a){const i=vn(a.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function rv(t){return Tn([],na(t))}function lD(t,e,a){return $i(t,{tooltip:e,tooltipItems:a,type:"tooltip"})}function ov(t,e){const a=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return a?t.override(a):t}const Lj={beforeTitle:ta,title(t){if(t.length>0){const e=t[0],a=e.chart.data.labels,i=a?a.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return a[e.dataIndex]}return""},afterTitle:ta,beforeBody:ta,beforeLabel:ta,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const a=t.formattedValue;return Mt(a)||(e+=a),e},labelColor(t){const a=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:a.borderColor,backgroundColor:a.backgroundColor,borderWidth:a.borderWidth,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const a=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:a.pointStyle,rotation:a.rotation}},afterLabel:ta,afterBody:ta,beforeFooter:ta,footer:ta,afterFooter:ta};function Ms(t,e,a,i){const o=t[e].call(a,i);return typeof o>"u"?Lj[e].call(a,i):o}class cv extends Ri{static positioners=zr;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const a=this.chart,i=this.options.setContext(this.getContext()),o=i.enabled&&a.options.animation&&i.animations,d=new vj(this.chart,o);return o._cacheable&&(this._cachedAnimations=Object.freeze(d)),d}getContext(){return this.$context||(this.$context=lD(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,a){const{callbacks:i}=a,o=Ms(i,"beforeTitle",this,e),d=Ms(i,"title",this,e),u=Ms(i,"afterTitle",this,e);let h=[];return h=Tn(h,na(o)),h=Tn(h,na(d)),h=Tn(h,na(u)),h}getBeforeBody(e,a){return rv(Ms(a.callbacks,"beforeBody",this,e))}getBody(e,a){const{callbacks:i}=a,o=[];return At(e,d=>{const u={before:[],lines:[],after:[]},h=ov(i,d);Tn(u.before,na(Ms(h,"beforeLabel",this,d))),Tn(u.lines,Ms(h,"label",this,d)),Tn(u.after,na(Ms(h,"afterLabel",this,d))),o.push(u)}),o}getAfterBody(e,a){return rv(Ms(a.callbacks,"afterBody",this,e))}getFooter(e,a){const{callbacks:i}=a,o=Ms(i,"beforeFooter",this,e),d=Ms(i,"footer",this,e),u=Ms(i,"afterFooter",this,e);let h=[];return h=Tn(h,na(o)),h=Tn(h,na(d)),h=Tn(h,na(u)),h}_createItems(e){const a=this._active,i=this.chart.data,o=[],d=[],u=[];let h=[],m,p;for(m=0,p=a.length;m<p;++m)h.push(J_(this.chart,a[m]));return e.filter&&(h=h.filter((b,y,v)=>e.filter(b,y,v,i))),e.itemSort&&(h=h.sort((b,y)=>e.itemSort(b,y,i))),At(h,b=>{const y=ov(e.callbacks,b);o.push(Ms(y,"labelColor",this,b)),d.push(Ms(y,"labelPointStyle",this,b)),u.push(Ms(y,"labelTextColor",this,b))}),this.labelColors=o,this.labelPointStyles=d,this.labelTextColors=u,this.dataPoints=h,h}update(e,a){const i=this.options.setContext(this.getContext()),o=this._active;let d,u=[];if(!o.length)this.opacity!==0&&(d={opacity:0});else{const h=zr[i.position].call(this,o,this._eventPosition);u=this._createItems(i),this.title=this.getTitle(u,i),this.beforeBody=this.getBeforeBody(u,i),this.body=this.getBody(u,i),this.afterBody=this.getAfterBody(u,i),this.footer=this.getFooter(u,i);const m=this._size=av(this,i),p=Object.assign({},h,m),b=lv(this.chart,i,p),y=iv(i,p,b,this.chart);this.xAlign=b.xAlign,this.yAlign=b.yAlign,d={opacity:1,x:y.x,y:y.y,width:m.width,height:m.height,caretX:h.x,caretY:h.y}}this._tooltipItems=u,this.$context=void 0,d&&this._resolveAnimations().update(this,d),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:a})}drawCaret(e,a,i,o){const d=this.getCaretPosition(e,i,o);a.lineTo(d.x1,d.y1),a.lineTo(d.x2,d.y2),a.lineTo(d.x3,d.y3)}getCaretPosition(e,a,i){const{xAlign:o,yAlign:d}=this,{caretSize:u,cornerRadius:h}=i,{topLeft:m,topRight:p,bottomLeft:b,bottomRight:y}=vi(h),{x:v,y:N}=e,{width:D,height:C}=a;let A,S,M,F,z,K;return d==="center"?(z=N+C/2,o==="left"?(A=v,S=A-u,F=z+u,K=z-u):(A=v+D,S=A+u,F=z-u,K=z+u),M=A):(o==="left"?S=v+Math.max(m,b)+u:o==="right"?S=v+D-Math.max(p,y)-u:S=this.caretX,d==="top"?(F=N,z=F-u,A=S-u,M=S+u):(F=N+C,z=F+u,A=S+u,M=S-u),K=F),{x1:A,x2:S,x3:M,y1:F,y2:z,y3:K}}drawTitle(e,a,i){const o=this.title,d=o.length;let u,h,m;if(d){const p=ji(i.rtl,this.x,this.width);for(e.x=Oc(this,i.titleAlign,i),a.textAlign=p.textAlign(i.titleAlign),a.textBaseline="middle",u=Ls(i.titleFont),h=i.titleSpacing,a.fillStyle=i.titleColor,a.font=u.string,m=0;m<d;++m)a.fillText(o[m],p.x(e.x),e.y+u.lineHeight/2),e.y+=u.lineHeight+h,m+1===d&&(e.y+=i.titleMarginBottom-h)}}_drawColorBox(e,a,i,o,d){const u=this.labelColors[i],h=this.labelPointStyles[i],{boxHeight:m,boxWidth:p}=d,b=Ls(d.bodyFont),y=Oc(this,"left",d),v=o.x(y),N=m<b.lineHeight?(b.lineHeight-m)/2:0,D=a.y+N;if(d.usePointStyle){const C={radius:Math.min(p,m)/2,pointStyle:h.pointStyle,rotation:h.rotation,borderWidth:1},A=o.leftForLtr(v,p)+p/2,S=D+m/2;e.strokeStyle=d.multiKeyBackground,e.fillStyle=d.multiKeyBackground,wy(e,C,A,S),e.strokeStyle=u.borderColor,e.fillStyle=u.backgroundColor,wy(e,C,A,S)}else{e.lineWidth=bt(u.borderWidth)?Math.max(...Object.values(u.borderWidth)):u.borderWidth||1,e.strokeStyle=u.borderColor,e.setLineDash(u.borderDash||[]),e.lineDashOffset=u.borderDashOffset||0;const C=o.leftForLtr(v,p),A=o.leftForLtr(o.xPlus(v,1),p-2),S=vi(u.borderRadius);Object.values(S).some(M=>M!==0)?(e.beginPath(),e.fillStyle=d.multiKeyBackground,bd(e,{x:C,y:D,w:p,h:m,radius:S}),e.fill(),e.stroke(),e.fillStyle=u.backgroundColor,e.beginPath(),bd(e,{x:A,y:D+1,w:p-2,h:m-2,radius:S}),e.fill()):(e.fillStyle=d.multiKeyBackground,e.fillRect(C,D,p,m),e.strokeRect(C,D,p,m),e.fillStyle=u.backgroundColor,e.fillRect(A,D+1,p-2,m-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,a,i){const{body:o}=this,{bodySpacing:d,bodyAlign:u,displayColors:h,boxHeight:m,boxWidth:p,boxPadding:b}=i,y=Ls(i.bodyFont);let v=y.lineHeight,N=0;const D=ji(i.rtl,this.x,this.width),C=function(_){a.fillText(_,D.x(e.x+N),e.y+v/2),e.y+=v+d},A=D.textAlign(u);let S,M,F,z,K,R,w;for(a.textAlign=u,a.textBaseline="middle",a.font=y.string,e.x=Oc(this,A,i),a.fillStyle=i.bodyColor,At(this.beforeBody,C),N=h&&A!=="right"?u==="center"?p/2+b:p+2+b:0,z=0,R=o.length;z<R;++z){for(S=o[z],M=this.labelTextColors[z],a.fillStyle=M,At(S.before,C),F=S.lines,h&&F.length&&(this._drawColorBox(a,e,z,D,i),v=Math.max(y.lineHeight,m)),K=0,w=F.length;K<w;++K)C(F[K]),v=y.lineHeight;At(S.after,C)}N=0,v=y.lineHeight,At(this.afterBody,C),e.y-=d}drawFooter(e,a,i){const o=this.footer,d=o.length;let u,h;if(d){const m=ji(i.rtl,this.x,this.width);for(e.x=Oc(this,i.footerAlign,i),e.y+=i.footerMarginTop,a.textAlign=m.textAlign(i.footerAlign),a.textBaseline="middle",u=Ls(i.footerFont),a.fillStyle=i.footerColor,a.font=u.string,h=0;h<d;++h)a.fillText(o[h],m.x(e.x),e.y+u.lineHeight/2),e.y+=u.lineHeight+i.footerSpacing}}drawBackground(e,a,i,o){const{xAlign:d,yAlign:u}=this,{x:h,y:m}=e,{width:p,height:b}=i,{topLeft:y,topRight:v,bottomLeft:N,bottomRight:D}=vi(o.cornerRadius);a.fillStyle=o.backgroundColor,a.strokeStyle=o.borderColor,a.lineWidth=o.borderWidth,a.beginPath(),a.moveTo(h+y,m),u==="top"&&this.drawCaret(e,a,i,o),a.lineTo(h+p-v,m),a.quadraticCurveTo(h+p,m,h+p,m+v),u==="center"&&d==="right"&&this.drawCaret(e,a,i,o),a.lineTo(h+p,m+b-D),a.quadraticCurveTo(h+p,m+b,h+p-D,m+b),u==="bottom"&&this.drawCaret(e,a,i,o),a.lineTo(h+N,m+b),a.quadraticCurveTo(h,m+b,h,m+b-N),u==="center"&&d==="left"&&this.drawCaret(e,a,i,o),a.lineTo(h,m+y),a.quadraticCurveTo(h,m,h+y,m),a.closePath(),a.fill(),o.borderWidth>0&&a.stroke()}_updateAnimationTarget(e){const a=this.chart,i=this.$animations,o=i&&i.x,d=i&&i.y;if(o||d){const u=zr[e.position].call(this,this._active,this._eventPosition);if(!u)return;const h=this._size=av(this,e),m=Object.assign({},u,this._size),p=lv(a,e,m),b=iv(e,m,p,a);(o._to!==b.x||d._to!==b.y)&&(this.xAlign=p.xAlign,this.yAlign=p.yAlign,this.width=h.width,this.height=h.height,this.caretX=u.x,this.caretY=u.y,this._resolveAnimations().update(this,b))}}_willRender(){return!!this.opacity}draw(e){const a=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(a);const o={width:this.width,height:this.height},d={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const u=vn(a.padding),h=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;a.enabled&&h&&(e.save(),e.globalAlpha=i,this.drawBackground(d,e,o,a),bj(e,a.textDirection),d.y+=u.top,this.drawTitle(d,e,a),this.drawBody(d,e,a),this.drawFooter(d,e,a),yj(e,a.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,a){const i=this._active,o=e.map(({datasetIndex:h,index:m})=>{const p=this.chart.getDatasetMeta(h);if(!p)throw new Error("Cannot find a dataset at index "+h);return{datasetIndex:h,element:p.data[m],index:m}}),d=!hd(i,o),u=this._positionChanged(o,a);(d||u)&&(this._active=o,this._eventPosition=a,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,a,i=!0){if(a&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const o=this.options,d=this._active||[],u=this._getActiveElements(e,d,a,i),h=this._positionChanged(u,e),m=a||!hd(u,d)||h;return m&&(this._active=u,(o.enabled||o.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,a))),m}_getActiveElements(e,a,i,o){const d=this.options;if(e.type==="mouseout")return[];if(!o)return a.filter(h=>this.chart.data.datasets[h.datasetIndex]&&this.chart.getDatasetMeta(h.datasetIndex).controller.getParsed(h.index)!==void 0);const u=this.chart.getElementsAtEventForMode(e,d.mode,d,i);return d.reverse&&u.reverse(),u}_positionChanged(e,a){const{caretX:i,caretY:o,options:d}=this,u=zr[d.position].call(this,e,a);return u!==!1&&(i!==u.x||o!==u.y)}}var jf={id:"tooltip",_element:cv,positioners:zr,afterInit(t,e,a){a&&(t.tooltip=new cv({chart:t,options:a}))},beforeUpdate(t,e,a){t.tooltip&&t.tooltip.initialize(a)},reset(t,e,a){t.tooltip&&t.tooltip.initialize(a)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const a={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...a,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",a)}},afterEvent(t,e){if(t.tooltip){const a=e.replay;t.tooltip.handleEvent(e.event,a,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Lj},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const iD=(t,e,a,i)=>(typeof e=="string"?(a=t.push(e)-1,i.unshift({index:a,label:e})):isNaN(e)&&(a=null),a);function rD(t,e,a,i){const o=t.indexOf(e);if(o===-1)return iD(t,e,a,i);const d=t.lastIndexOf(e);return o!==d?a:o}const oD=(t,e)=>t===null?null:Rs(Math.round(t),0,e);function dv(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Nf extends Li{static id="category";static defaults={ticks:{callback:dv}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const a=this._addedLabels;if(a.length){const i=this.getLabels();for(const{index:o,label:d}of a)i[o]===d&&i.splice(o,1);this._addedLabels=[]}super.init(e)}parse(e,a){if(Mt(e))return null;const i=this.getLabels();return a=isFinite(a)&&i[a]===e?a:rD(i,e,xt(a,e),this._addedLabels),oD(a,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:a}=this.getUserBounds();let{min:i,max:o}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),a||(o=this.getLabels().length-1)),this.min=i,this.max=o}buildTicks(){const e=this.min,a=this.max,i=this.options.offset,o=[];let d=this.getLabels();d=e===0&&a===d.length-1?d:d.slice(e,a+1),this._valueRange=Math.max(d.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let u=e;u<=a;u++)o.push({value:u});return o}getLabelForValue(e){return dv.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const a=this.ticks;return e<0||e>a.length-1?null:this.getPixelForValue(a[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function cD(t,e){const a=[],{bounds:o,step:d,min:u,max:h,precision:m,count:p,maxTicks:b,maxDigits:y,includeBounds:v}=t,N=d||1,D=b-1,{min:C,max:A}=e,S=!Mt(u),M=!Mt(h),F=!Mt(p),z=(A-C)/(y+1);let K=fy((A-C)/D/N)*N,R,w,_,B;if(K<1e-14&&!S&&!M)return[{value:C},{value:A}];B=Math.ceil(A/K)-Math.floor(C/K),B>D&&(K=fy(B*K/D/N)*N),Mt(m)||(R=Math.pow(10,m),K=Math.ceil(K*R)/R),o==="ticks"?(w=Math.floor(C/K)*K,_=Math.ceil(A/K)*K):(w=C,_=A),S&&M&&d&&rT((h-u)/d,K/1e3)?(B=Math.round(Math.min((h-u)/K,b)),K=(h-u)/B,w=u,_=h):F?(w=S?u:w,_=M?h:_,B=p-1,K=(_-w)/B):(B=(_-w)/K,Xc(B,Math.round(B),K/1e3)?B=Math.round(B):B=Math.ceil(B));const T=Math.max(py(K),py(w));R=Math.pow(10,Mt(m)?T:m),w=Math.round(w*R)/R,_=Math.round(_*R)/R;let U=0;for(S&&(v&&w!==u?(a.push({value:u}),w<u&&U++,Xc(Math.round((w+U*K)*R)/R,u,uv(u,z,t))&&U++):w<u&&U++);U<B;++U){const V=Math.round((w+U*K)*R)/R;if(M&&V>h)break;a.push({value:V})}return M&&v&&_!==h?a.length&&Xc(a[a.length-1].value,h,uv(h,z,t))?a[a.length-1].value=h:a.push({value:h}):(!M||_===h)&&a.push({value:_}),a}function uv(t,e,{horizontal:a,minRotation:i}){const o=la(i),d=(a?Math.sin(o):Math.cos(o))||.001,u=.75*e*(""+t).length;return Math.min(e/d,u)}class dD extends Li{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,a){return Mt(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:a,maxDefined:i}=this.getUserBounds();let{min:o,max:d}=this;const u=m=>o=a?o:m,h=m=>d=i?d:m;if(e){const m=qa(o),p=qa(d);m<0&&p<0?h(0):m>0&&p>0&&u(0)}if(o===d){let m=d===0?1:Math.abs(d*.05);h(d+m),e||u(o-m)}this.min=o,this.max=d}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:a,stepSize:i}=e,o;return i?(o=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,o>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${o} ticks. Limiting to 1000.`),o=1e3)):(o=this.computeTickLimit(),a=a||11),a&&(o=Math.min(a,o)),o}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,a=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const o={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:a.precision,step:a.stepSize,count:a.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:a.minRotation||0,includeBounds:a.includeBounds!==!1},d=this._range||this,u=cD(o,d);return e.bounds==="ticks"&&oT(u,this,"value"),e.reverse?(u.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),u}configure(){const e=this.ticks;let a=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const o=(i-a)/Math.max(e.length-1,1)/2;a-=o,i+=o}this._startValue=a,this._endValue=i,this._valueRange=i-a}getLabelForValue(e){return of(e,this.chart.options.locale,this.options.ticks.format)}}class wf extends dD{static id="linear";static defaults={ticks:{callback:dj.formatters.numeric}};determineDataLimits(){const{min:e,max:a}=this.getMinMax(!0);this.min=mn(e)?e:0,this.max=mn(a)?a:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),a=e?this.width:this.height,i=la(this.options.ticks.minRotation),o=(e?Math.sin(i):Math.cos(i))||.001,d=this._resolveTickFontOptions(0);return Math.ceil(a/Math.min(40,d.lineHeight/o))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}const Ld={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},$s=Object.keys(Ld);function hv(t,e){return t-e}function mv(t,e){if(Mt(e))return null;const a=t._adapter,{parser:i,round:o,isoWeekday:d}=t._parseOpts;let u=e;return typeof i=="function"&&(u=i(u)),mn(u)||(u=typeof i=="string"?a.parse(u,i):a.parse(u)),u===null?null:(o&&(u=o==="week"&&(pd(d)||d===!0)?a.startOf(u,"isoWeek",d):a.startOf(u,o)),+u)}function fv(t,e,a,i){const o=$s.length;for(let d=$s.indexOf(t);d<o-1;++d){const u=Ld[$s[d]],h=u.steps?u.steps:Number.MAX_SAFE_INTEGER;if(u.common&&Math.ceil((a-e)/(h*u.size))<=i)return $s[d]}return $s[o-1]}function uD(t,e,a,i,o){for(let d=$s.length-1;d>=$s.indexOf(a);d--){const u=$s[d];if(Ld[u].common&&t._adapter.diff(o,i,u)>=e-1)return u}return $s[a?$s.indexOf(a):0]}function hD(t){for(let e=$s.indexOf(t)+1,a=$s.length;e<a;++e)if(Ld[$s[e]].common)return $s[e]}function pv(t,e,a){if(!a)t[e]=!0;else if(a.length){const{lo:i,hi:o}=rf(a,e),d=a[i]>=e?a[i]:a[o];t[d]=!0}}function mD(t,e,a,i){const o=t._adapter,d=+o.startOf(e[0].value,i),u=e[e.length-1].value;let h,m;for(h=d;h<=u;h=+o.add(h,1,i))m=a[h],m>=0&&(e[m].major=!0);return e}function gv(t,e,a){const i=[],o={},d=e.length;let u,h;for(u=0;u<d;++u)h=e[u],o[h]=u,i.push({value:h,major:!1});return d===0||!a?i:mD(t,i,o,a)}class xv extends Li{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,a={}){const i=e.time||(e.time={}),o=this._adapter=new Tk._date(e.adapters.date);o.init(a),Fr(i.displayFormats,o.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=a.normalized}parse(e,a){return e===void 0?null:mv(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,a=this._adapter,i=e.time.unit||"day";let{min:o,max:d,minDefined:u,maxDefined:h}=this.getUserBounds();function m(p){!u&&!isNaN(p.min)&&(o=Math.min(o,p.min)),!h&&!isNaN(p.max)&&(d=Math.max(d,p.max))}(!u||!h)&&(m(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&m(this.getMinMax(!1))),o=mn(o)&&!isNaN(o)?o:+a.startOf(Date.now(),i),d=mn(d)&&!isNaN(d)?d:+a.endOf(Date.now(),i)+1,this.min=Math.min(o,d-1),this.max=Math.max(o+1,d)}_getLabelBounds(){const e=this.getLabelTimestamps();let a=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(a=e[0],i=e[e.length-1]),{min:a,max:i}}buildTicks(){const e=this.options,a=e.time,i=e.ticks,o=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&o.length&&(this.min=this._userMin||o[0],this.max=this._userMax||o[o.length-1]);const d=this.min,u=this.max,h=mT(o,d,u);return this._unit=a.unit||(i.autoSkip?fv(a.minUnit,this.min,this.max,this._getLabelCapacity(d)):uD(this,h.length,a.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:hD(this._unit),this.initOffsets(o),e.reverse&&h.reverse(),gv(this,h,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let a=0,i=0,o,d;this.options.offset&&e.length&&(o=this.getDecimalForValue(e[0]),e.length===1?a=1-o:a=(this.getDecimalForValue(e[1])-o)/2,d=this.getDecimalForValue(e[e.length-1]),e.length===1?i=d:i=(d-this.getDecimalForValue(e[e.length-2]))/2);const u=e.length<3?.5:.25;a=Rs(a,0,u),i=Rs(i,0,u),this._offsets={start:a,end:i,factor:1/(a+1+i)}}_generate(){const e=this._adapter,a=this.min,i=this.max,o=this.options,d=o.time,u=d.unit||fv(d.minUnit,a,i,this._getLabelCapacity(a)),h=xt(o.ticks.stepSize,1),m=u==="week"?d.isoWeekday:!1,p=pd(m)||m===!0,b={};let y=a,v,N;if(p&&(y=+e.startOf(y,"isoWeek",m)),y=+e.startOf(y,p?"day":u),e.diff(i,a,u)>1e5*h)throw new Error(a+" and "+i+" are too far apart with stepSize of "+h+" "+u);const D=o.ticks.source==="data"&&this.getDataTimestamps();for(v=y,N=0;v<i;v=+e.add(v,h,u),N++)pv(b,v,D);return(v===i||o.bounds==="ticks"||N===1)&&pv(b,v,D),Object.keys(b).sort(hv).map(C=>+C)}getLabelForValue(e){const a=this._adapter,i=this.options.time;return i.tooltipFormat?a.format(e,i.tooltipFormat):a.format(e,i.displayFormats.datetime)}format(e,a){const o=this.options.time.displayFormats,d=this._unit,u=a||o[d];return this._adapter.format(e,u)}_tickFormatFunction(e,a,i,o){const d=this.options,u=d.ticks.callback;if(u)return zt(u,[e,a,i],this);const h=d.time.displayFormats,m=this._unit,p=this._majorUnit,b=m&&h[m],y=p&&h[p],v=i[a],N=p&&y&&v&&v.major;return this._adapter.format(e,o||(N?y:b))}generateTickLabels(e){let a,i,o;for(a=0,i=e.length;a<i;++a)o=e[a],o.label=this._tickFormatFunction(o.value,a,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const a=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((a.start+i)*a.factor)}getValueForPixel(e){const a=this._offsets,i=this.getDecimalForPixel(e)/a.factor-a.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const a=this.options.ticks,i=this.ctx.measureText(e).width,o=la(this.isHorizontal()?a.maxRotation:a.minRotation),d=Math.cos(o),u=Math.sin(o),h=this._resolveTickFontOptions(0).size;return{w:i*d+h*u,h:i*u+h*d}}_getLabelCapacity(e){const a=this.options.time,i=a.displayFormats,o=i[a.unit]||i.millisecond,d=this._tickFormatFunction(e,0,gv(this,[e],this._majorUnit),o),u=this._getLabelSize(d),h=Math.floor(this.isHorizontal()?this.width/u.w:this.height/u.h)-1;return h>0?h:1}getDataTimestamps(){let e=this._cache.data||[],a,i;if(e.length)return e;const o=this.getMatchingVisibleMetas();if(this._normalized&&o.length)return this._cache.data=o[0].controller.getAllParsedValues(this);for(a=0,i=o.length;a<i;++a)e=e.concat(o[a].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let a,i;if(e.length)return e;const o=this.getLabels();for(a=0,i=o.length;a<i;++a)e.push(mv(this,o[a]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return lj(e.sort(hv))}}function Bc(t,e,a){let i=0,o=t.length-1,d,u,h,m;a?(e>=t[i].pos&&e<=t[o].pos&&({lo:i,hi:o}=Dm(t,"pos",e)),{pos:d,time:h}=t[i],{pos:u,time:m}=t[o]):(e>=t[i].time&&e<=t[o].time&&({lo:i,hi:o}=Dm(t,"time",e)),{time:d,pos:h}=t[i],{time:u,pos:m}=t[o]);const p=u-d;return p?h+(m-h)*(e-d)/p:h}class NM extends xv{static id="timeseries";static defaults=xv.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),a=this._table=this.buildLookupTable(e);this._minPos=Bc(a,this.min),this._tableRange=Bc(a,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:a,max:i}=this,o=[],d=[];let u,h,m,p,b;for(u=0,h=e.length;u<h;++u)p=e[u],p>=a&&p<=i&&o.push(p);if(o.length<2)return[{time:a,pos:0},{time:i,pos:1}];for(u=0,h=o.length;u<h;++u)b=o[u+1],m=o[u-1],p=o[u],Math.round((b+m)/2)!==p&&d.push({time:p,pos:u/(h-1)});return d}_generate(){const e=this.min,a=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(a)||i.length===1)&&i.push(a),i.sort((o,d)=>o-d)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const a=this.getDataTimestamps(),i=this.getLabelTimestamps();return a.length&&i.length?e=this.normalize(a.concat(i)):e=a.length?a:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Bc(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const a=this._offsets,i=this.getDecimalForPixel(e)/a.factor-a.end;return Bc(this._table,i*this._tableRange+this._minPos,!0)}}const Ij="label";function bv(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function fD(t,e){const a=t.options;a&&e&&Object.assign(a,e)}function Oj(t,e){t.labels=e}function Bj(t,e){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ij;const i=[];t.datasets=e.map(o=>{const d=t.datasets.find(u=>u[a]===o[a]);return!d||!o.data||i.includes(d)?{...o}:(i.push(d),Object.assign(d,o),d)})}function pD(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ij;const a={labels:[],datasets:[]};return Oj(a,t.labels),Bj(a,t.datasets,e),a}function gD(t,e){const{height:a=150,width:i=300,redraw:o=!1,datasetIdKey:d,type:u,data:h,options:m,plugins:p=[],fallbackContent:b,updateMode:y,...v}=t,N=x.useRef(null),D=x.useRef(null),C=()=>{N.current&&(D.current=new Ii(N.current,{type:u,data:pD(h,d),options:m&&{...m},plugins:p}),bv(e,D.current))},A=()=>{bv(e,null),D.current&&(D.current.destroy(),D.current=null)};return x.useEffect(()=>{!o&&D.current&&m&&fD(D.current,m)},[o,m]),x.useEffect(()=>{!o&&D.current&&Oj(D.current.config.data,h.labels)},[o,h.labels]),x.useEffect(()=>{!o&&D.current&&h.datasets&&Bj(D.current.config.data,h.datasets,d)},[o,h.datasets]),x.useEffect(()=>{D.current&&(o?(A(),setTimeout(C)):D.current.update(y))},[o,m,h.labels,h.datasets,y]),x.useEffect(()=>{D.current&&(A(),setTimeout(C))},[u]),x.useEffect(()=>(C(),()=>A()),[]),Gs.createElement("canvas",{ref:N,role:"img",height:a,width:i,...v},b)}const xD=x.forwardRef(gD);function zj(t,e){return Ii.register(e),x.forwardRef((a,i)=>Gs.createElement(xD,{...a,ref:i,type:t}))}const Nd=zj("bar",Ck),Lm=zj("doughnut",Ek);async function Sf(t){const e=`/classroom/api/v1/professor/${encodeURIComponent(t)}/students`,a=await fetch(e,{headers:{Accept:"application/json"},credentials:"include"});if(!a.ok)throw new Error(`(${a.status})    .`);const i=await a.json();if(!Array.isArray(i))throw new Error("    .");return i}Ii.register(Nf,wf,yf,Mj,jf,vf);function bD(){const{lectureId:t}=ht(),[e,a]=x.useState([]),[i,o]=x.useState(null),[d,u]=x.useState(null),[h,m]=x.useState(null),[p,b]=x.useState(!0),[y,v]=x.useState(null);x.useEffect(()=>{let w=!0;return(async()=>{try{b(!0),v(null);const _=`/classroom/api/v1/professor/${encodeURIComponent(t)}/statis`,[B,T,U,V]=await Promise.all([Sf(t),fetch(`${_}/attendance`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${_}/task`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${_}/exam`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!T.ok)throw new Error(`(${T.status})    .`);if(!U.ok)throw new Error(`(${U.status})    .`);if(!V.ok)throw new Error(`(${V.status})    .`);const q=await T.json(),H=await U.json(),E=await V.json();if(!w)return;a(B),o(q),u(H),m(E)}catch(_){if(!w)return;v(_)}finally{w&&b(!1)}})(),()=>{w=!1}},[t]),x.useEffect(()=>{if(!p&&!y&&i&&e.length>0&&typeof window.bootstrap<"u"){const _=[...document.querySelectorAll('[data-bs-toggle="popover"]')].map(B=>new window.bootstrap.Popover(B));return()=>{_.forEach(B=>B.dispose())}}},[p,y,i,e]);const N=e.length>0?(()=>{const w=e.length,_=e.filter(H=>H.enrollStatusCd==="ENR_CANCEL"||H.enrollStatusCd==="ENR_WITHDRAW").length,B=e.filter(H=>H.enrollStatusCd==="ENR_ING"||H.enrollStatusCd==="ENR_DONE").length,T={};e.forEach(H=>{(H.enrollStatusCd==="ENR_ING"||H.enrollStatusCd==="ENR_DONE")&&(T[H.gradeCd]=(T[H.gradeCd]||0)+1)});const U=Object.entries(T).map(([H,E])=>({gradeCd:H,cnt:E})),V={};e.forEach(H=>{if(H.enrollStatusCd==="ENR_ING"||H.enrollStatusCd==="ENR_DONE"){const E=H.univDeptCd;V[E]||(V[E]={univDeptCd:H.univDeptCd,univDeptName:H.univDeptName,cnt:0}),V[E].cnt++}});const q=Object.values(V);return{stats:{totalCnt:w,activeCnt:B,dropoutCnt:_},byGrade:U,byDept:q}})():null,D=N?.byGrade?{labels:N.byGrade.map(w=>({"1ST":"1","2ND":"2","3RD":"3","4TH":"4"})[w.gradeCd]||w.gradeCd),datasets:[{data:N.byGrade.map(w=>w.cnt),backgroundColor:["rgba(54, 162, 235, 0.8)","rgba(255, 99, 132, 0.8)","rgba(255, 206, 86, 0.8)","rgba(75, 192, 192, 0.8)"]}]}:null,C=N?.byDept?{labels:N.byDept.map(w=>w.univDeptName||w.univDeptCd),datasets:[{data:N.byDept.map(w=>w.cnt),backgroundColor:["rgba(153, 102, 255, 0.8)","rgba(255, 159, 64, 0.8)","rgba(201, 203, 207, 0.8)","rgba(75, 192, 192, 0.8)"]}]}:null,A=i?.typeCount?(()=>{const{totalCnt:w,tbdCnt:_,okCnt:B,noCnt:T,earlyCnt:U,lateCnt:V,excpCnt:q}=i.typeCount,H=B+U+V+q,E=w>0?(H/w*100).toFixed(1):0,L=(i.attCountList||[]).map(Z=>{const k=Z.recordedCnt>0?Z.nonAbsentCnt/Z.recordedCnt*100:0,W=e.find(P=>P.enrollId===Z.enrollId);return{...Z,rate:k,name:W?`${W.lastName}${W.firstName}`:Z.enrollId}}),$=L.filter(Z=>Z.rate>=90),O=L.filter(Z=>Z.rate>=70&&Z.rate<90),Q=L.filter(Z=>Z.rate<70);return{avgRate:E,excellent:$.length,good:O.length,warning:Q.length,excellentList:$,goodList:O,warningList:Q,tbdCnt:_}})():null,S=d?(()=>{const{taskTypeCount:w,ongoingIndivtask:_,ongoingGrouptask:B,closedIndivtask:T,closedGrouptask:U,scoresByStudentAndTask:V}=d,q=w?.indivCnt||0,H=w?.groupCnt||0,E=(_?.ongoingTaskCnt||0)+(B?.ongoingTaskCnt||0),L=_?.submitRatePct||0,$=(T?.closedTaskCnt||0)+(U?.closedTaskCnt||0),O=T?.submitRatePct||0,Q={};V&&Array.isArray(V)&&V.forEach(Y=>{Y.score!==null&&Y.score!==void 0&&(Q[Y.enrollId]||(Q[Y.enrollId]={scores:[],total:0,count:0}),Q[Y.enrollId].scores.push(Y.score),Q[Y.enrollId].total+=Y.score,Q[Y.enrollId].count++)});const Z=Object.entries(Q).map(([Y,ee])=>{const ae=e.find(xe=>xe.enrollId===Y);return{enrollId:Y,name:ae?`${ae.lastName}${ae.firstName}`:Y,avgScore:ee.count>0?(ee.total/ee.count).toFixed(1):0}}).filter(Y=>Y.avgScore>0),k=[...Z].sort((Y,ee)=>ee.avgScore-Y.avgScore),W=k.slice(0,3),P=k.slice(-3).reverse(),G=Array(10).fill(0).map((Y,ee)=>({range:`${ee*10}-${(ee+1)*10}`,count:0}));return Z.forEach(Y=>{const ee=parseFloat(Y.avgScore),ae=Math.min(Math.floor(ee/10),9);G[ae].count++}),{indivCnt:q,groupCnt:H,ongoingCount:E,ongoingSubmissionRate:L,closedCount:$,closedSubmissionRate:O,scoreDistribution:G,topStudents:W,bottomStudents:P}})():null,M=h?(()=>{const{examTypeCount:w,ongoingExam:_,closedExam:B,scoresByStudentAndExam:T}=h,U=w?.totalCnt||0,V=w?.onlineCnt||0,q=w?.offlineCnt||0,H=_?.ongoingExamCnt||0,E=_?.submitRatePct||0,L=B?.closedExamCnt||0,$=B?.submitRatePct||0,O={};T&&Array.isArray(T)&&T.forEach(G=>{G.score!==null&&G.score!==void 0&&(O[G.enrollId]||(O[G.enrollId]={scores:[],total:0,count:0}),O[G.enrollId].scores.push(G.score),O[G.enrollId].total+=G.score,O[G.enrollId].count++)});const Q=Object.entries(O).map(([G,Y])=>{const ee=e.find(ae=>ae.enrollId===G);return{enrollId:G,name:ee?`${ee.lastName}${ee.firstName}`:G,avgScore:Y.count>0?(Y.total/Y.count).toFixed(1):0}}).filter(G=>G.avgScore>0),Z=[...Q].sort((G,Y)=>Y.avgScore-G.avgScore),k=Z.slice(0,3),W=Z.slice(-3).reverse(),P=Array(10).fill(0).map((G,Y)=>({range:`${Y*10}-${(Y+1)*10}`,count:0}));return Q.forEach(G=>{const Y=parseFloat(G.avgScore),ee=Math.min(Math.floor(Y/10),9);P[ee].count++}),{totalCnt:U,onlineCnt:V,offlineCnt:q,ongoingCount:H,ongoingSubmissionRate:E,closedCount:L,closedSubmissionRate:$,scoreDistribution:P,topStudents:k,bottomStudents:W}})():null,F={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{font:{size:11},padding:8,boxWidth:12}}}},z={responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}},plugins:{legend:{display:!1}}},K=S?.scoreDistribution?{labels:S.scoreDistribution.map(w=>w.range),datasets:[{label:" ",data:S.scoreDistribution.map(w=>w.count),backgroundColor:"rgba(54, 162, 235, 0.7)"}]}:null,R=M?.scoreDistribution?{labels:M.scoreDistribution.map(w=>w.range),datasets:[{label:" ",data:M.scoreDistribution.map(w=>w.count),backgroundColor:"rgba(255, 99, 132, 0.7)"}]}:null;return s.jsxs("section",{id:"dashboard-root",className:"container py-0","data-lecture-id":t,children:[s.jsx("style",{children:`
        @keyframes blink-slow {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.3; }
        }
        .blink-slow {
          animation: blink-slow 2s ease-in-out infinite;
        }
      `}),p&&s.jsx("div",{className:"text-muted",children:" "}),y&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:String(y.message||y)}),!p&&!y&&s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-lg-6",children:s.jsxs("div",{className:"card shadow-sm h-100",children:[s.jsx("div",{className:"card-header py-2",children:s.jsx("h2",{className:"h6 mb-0",children:" "})}),s.jsx("div",{className:"card-body pb-2",children:N&&s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-5",children:[s.jsx("div",{className:"text-center mb-2 small fw-semibold",children:" "}),D&&s.jsx("div",{style:{height:"140px",position:"relative"},children:s.jsx(Lm,{data:D,options:F})})]}),s.jsxs("div",{className:"col-5",children:[s.jsx("div",{className:"text-center mb-2 small fw-semibold",children:" "}),C&&s.jsx("div",{style:{height:"140px",position:"relative"},children:s.jsx(Lm,{data:C,options:F})})]}),s.jsxs("div",{className:"col-2 d-flex flex-column justify-content-center gap-3",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-muted small",children:""}),s.jsx("div",{className:"h5 mb-0 text-success",children:N.stats?.activeCnt||0})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-muted small",children:""}),s.jsx("div",{className:"h5 mb-0 text-danger",children:N.stats?.dropoutCnt||0})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-muted small",children:""}),s.jsx("div",{className:"h5 mb-0",children:N.stats?.totalCnt||0})]})]})]})})]})}),s.jsx("div",{className:"col-lg-6",children:s.jsxs("div",{className:"card shadow-sm h-100",children:[s.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between py-2",children:[s.jsx("h2",{className:"h6 mb-0",children:" "}),A&&A.tbdCnt>0&&s.jsxs("div",{className:"text-danger small blink-slow",children:["  ",A.tbdCnt," "]})]}),s.jsx("div",{className:"card-body pb-2",children:A?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center mb-3",children:[s.jsx("div",{className:"text-muted small",children:" "}),s.jsxs("div",{className:"display-6 fw-bold text-primary",children:[A.avgRate,"%"]})]}),s.jsxs("div",{className:"row g-2 text-center",children:[s.jsx("div",{className:"col-4",children:s.jsxs("div",{className:"p-2 bg-success bg-opacity-10 rounded",style:{cursor:A.excellentList.length>0?"pointer":"default"},"data-bs-toggle":A.excellentList.length>0?"popover":"","data-bs-trigger":"hover","data-bs-placement":"bottom","data-bs-html":"true","data-bs-content":A.excellentList.length>0?A.excellentList.map(w=>`${w.name} (${w.rate.toFixed(1)}%)`).join("<br>"):"",title:"90%   ",children:[s.jsx("div",{className:"small text-muted",children:"90% "}),s.jsxs("div",{className:"h5 mb-0 text-success",children:[A.excellent,""]})]})}),s.jsx("div",{className:"col-4",children:s.jsxs("div",{className:"p-2 bg-warning bg-opacity-10 rounded",style:{cursor:A.goodList.length>0?"pointer":"default"},"data-bs-toggle":A.goodList.length>0?"popover":"","data-bs-trigger":"hover","data-bs-placement":"bottom","data-bs-html":"true","data-bs-content":A.goodList.length>0?A.goodList.map(w=>`${w.name} (${w.rate.toFixed(1)}%)`).join("<br>"):"",title:"70~90%  ",children:[s.jsx("div",{className:"small text-muted",children:"70~90%"}),s.jsxs("div",{className:"h5 mb-0 text-warning",children:[A.good,""]})]})}),s.jsx("div",{className:"col-4",children:s.jsxs("div",{className:"p-2 bg-danger bg-opacity-10 rounded",style:{cursor:A.warningList.length>0?"pointer":"default"},"data-bs-toggle":A.warningList.length>0?"popover":"","data-bs-trigger":"hover","data-bs-placement":"bottom","data-bs-html":"true","data-bs-content":A.warningList.length>0?A.warningList.map(w=>`${w.name} (${w.rate.toFixed(1)}%)`).join("<br>"):"",title:"70%   ",children:[s.jsx("div",{className:"small text-muted",children:"70% "}),s.jsxs("div",{className:"h5 mb-0 text-danger",children:[A.warning,""]})]})})]})]}):s.jsx("div",{className:"text-muted",children:"  ."})})]})}),s.jsx("div",{className:"col-lg-6",children:s.jsxs("div",{className:"card shadow-sm h-100",children:[s.jsx("div",{className:"card-header py-2",children:s.jsx("h2",{className:"h6 mb-0",children:" "})}),s.jsx("div",{className:"card-body pb-2",children:S?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"row g-2 mb-3 text-center",children:[s.jsx("div",{className:"col-3",children:s.jsxs("div",{className:"p-2 bg-primary bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[s.jsx("div",{className:"small text-muted",children:""}),s.jsxs("div",{className:"h6 mb-0 text-primary",children:[S.indivCnt,""]}),s.jsx("div",{className:"small",style:{visibility:"hidden"},children:"-"})]})}),s.jsx("div",{className:"col-3",children:s.jsxs("div",{className:"p-2 bg-info bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[s.jsx("div",{className:"small text-muted",children:""}),s.jsxs("div",{className:"h6 mb-0 text-info",children:[S.groupCnt,""]}),s.jsx("div",{className:"small",style:{visibility:"hidden"},children:"-"})]})}),s.jsx("div",{className:"col-3",children:s.jsxs("div",{className:"p-2 bg-warning bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[s.jsx("div",{className:"small text-muted",children:" "}),s.jsxs("div",{className:"h6 mb-0 text-warning",children:[S.ongoingCount,""]}),s.jsxs("div",{className:"small text-muted",children:[" ",S.ongoingSubmissionRate.toFixed(1),"%"]})]})}),s.jsx("div",{className:"col-3",children:s.jsxs("div",{className:"p-2 bg-success bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[s.jsx("div",{className:"small text-muted",children:" "}),s.jsxs("div",{className:"h6 mb-0 text-success",children:[S.closedCount,""]}),s.jsxs("div",{className:"small text-muted",children:[" ",S.closedSubmissionRate.toFixed(1),"%"]})]})})]}),K&&s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"small fw-semibold mb-2",children:"   "}),s.jsx("div",{style:{height:"120px",position:"relative"},children:s.jsx(Nd,{data:K,options:z})})]}),S.topStudents.length>0&&s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-6",children:[s.jsx("div",{className:"small fw-semibold mb-2",children:"Top 3"}),s.jsx("table",{className:"table table-sm table-borderless mb-0",children:s.jsx("tbody",{children:S.topStudents.map((w,_)=>s.jsxs("tr",{children:[s.jsxs("td",{className:"text-muted",style:{width:"25px"},children:["#",_+1]}),s.jsx("td",{className:"small",children:w.name}),s.jsx("td",{className:"text-end fw-semibold small",children:w.avgScore})]},_))})})]}),s.jsxs("div",{className:"col-6",children:[s.jsx("div",{className:"small fw-semibold mb-2",children:" 3"}),s.jsx("table",{className:"table table-sm table-borderless mb-0",children:s.jsx("tbody",{children:S.bottomStudents.map((w,_)=>s.jsxs("tr",{children:[s.jsxs("td",{className:"text-muted",style:{width:"25px"},children:["#",_+1]}),s.jsx("td",{className:"small",children:w.name}),s.jsx("td",{className:"text-end fw-semibold small text-danger",children:w.avgScore})]},_))})})]})]})]}):s.jsx("div",{className:"text-muted",children:"  ."})})]})}),s.jsx("div",{className:"col-lg-6",children:s.jsxs("div",{className:"card shadow-sm h-100",children:[s.jsx("div",{className:"card-header py-2",children:s.jsx("h2",{className:"h6 mb-0",children:" "})}),s.jsx("div",{className:"card-body pb-2",children:M?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"row g-2 mb-3 text-center",children:[s.jsx("div",{className:"col-3",children:s.jsxs("div",{className:"p-2 bg-primary bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[s.jsx("div",{className:"small text-muted",children:""}),s.jsxs("div",{className:"h6 mb-0 text-primary",children:[M.onlineCnt,""]}),s.jsx("div",{className:"small",style:{visibility:"hidden"},children:"-"})]})}),s.jsx("div",{className:"col-3",children:s.jsxs("div",{className:"p-2 bg-info bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[s.jsx("div",{className:"small text-muted",children:""}),s.jsxs("div",{className:"h6 mb-0 text-info",children:[M.offlineCnt,""]}),s.jsx("div",{className:"small",style:{visibility:"hidden"},children:"-"})]})}),s.jsx("div",{className:"col-3",children:s.jsxs("div",{className:"p-2 bg-warning bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[s.jsx("div",{className:"small text-muted",children:" "}),s.jsxs("div",{className:"h6 mb-0 text-warning",children:[M.ongoingCount,""]}),s.jsxs("div",{className:"small text-muted",children:[" ",M.ongoingSubmissionRate!==null?M.ongoingSubmissionRate.toFixed(1):0,"%"]})]})}),s.jsx("div",{className:"col-3",children:s.jsxs("div",{className:"p-2 bg-success bg-opacity-10 rounded h-100 d-flex flex-column justify-content-center",children:[s.jsx("div",{className:"small text-muted",children:" "}),s.jsxs("div",{className:"h6 mb-0 text-success",children:[M.closedCount,""]}),s.jsxs("div",{className:"small text-muted",children:[" ",M.closedSubmissionRate!==null?M.closedSubmissionRate.toFixed(1):0,"%"]})]})})]}),R&&s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"small fw-semibold mb-2",children:"   "}),s.jsx("div",{style:{height:"120px",position:"relative"},children:s.jsx(Nd,{data:R,options:z})})]}),M.topStudents.length>0&&s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-6",children:[s.jsx("div",{className:"small fw-semibold mb-2",children:"Top 3"}),s.jsx("table",{className:"table table-sm table-borderless mb-0",children:s.jsx("tbody",{children:M.topStudents.map((w,_)=>s.jsxs("tr",{children:[s.jsxs("td",{className:"text-muted",style:{width:"25px"},children:["#",_+1]}),s.jsx("td",{className:"small",children:w.name}),s.jsx("td",{className:"text-end fw-semibold small",children:w.avgScore})]},_))})})]}),s.jsxs("div",{className:"col-6",children:[s.jsx("div",{className:"small fw-semibold mb-2",children:" 3"}),s.jsx("table",{className:"table table-sm table-borderless mb-0",children:s.jsx("tbody",{children:M.bottomStudents.map((w,_)=>s.jsxs("tr",{children:[s.jsxs("td",{className:"text-muted",style:{width:"25px"},children:["#",_+1]}),s.jsx("td",{className:"small",children:w.name}),s.jsx("td",{className:"text-end fw-semibold small text-danger",children:w.avgScore})]},_))})})]})]})]}):s.jsx("div",{className:"text-muted",children:"  ."})})]})})]})]})}Ii.register(Nf,wf,yf,jf,vf);const ot={defaultTitle:" ",subtitleLoading:"   ...",planHeading:"  ",planLoadingTitle:"   ...",planLoadingBody:" .",planEmpty:"   .",planGoalLabel:" ",planDescLabel:" ",overviewHeading:" ",overviewLoading:"   ...",overviewProfessorLabel:" ",overviewIndexLabel:"",overviewGoalLabel:" ",overviewPrereqLabel:" ",overviewCapacityLabel:"",overviewEndLabel:"",overviewGoalFallback:"  .",overviewPrereqFallback:"  .",overviewCapacityFallback:"  .",overviewProfessorFallback:"  ",overviewIndexFallback:" ",overviewEndFallback:"",scheduleHeading:" /",scheduleLoading:"   ...",scheduleEmpty:"  .",scheduleDay:"",scheduleTime:"",schedulePlace:"",gradeRatioHeading:"  ",gradeRatioLoading:"    ...",gradeRatioEmpty:"    .",gradeRatioLabel:"  ",genericError:"    .",missingLecture:"  ."},yD={MO:"",TU:"",WE:"",TH:"",FR:"",SA:"",SU:""},yv="/classroom/api/v1/common",vD=t=>{if(!t)return"-";if(typeof t=="string"&&/^\d{4}-\d{2}-\d{2}$/.test(t))return t;const e=new Date(t);if(Number.isNaN(e.getTime()))return"-";const a=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0");return`${a}-${i}-${o}`},xm=(t,e)=>{const a=typeof t=="string"?t.trim():"";if(!a)return s.jsx("span",{className:"text-body-secondary",children:e});const i=a.split(/\r?\n/);return i.map((o,d)=>s.jsxs(x.Fragment,{children:[o||"",d<i.length-1?s.jsx("br",{}):null]},`${d}-${o}`))};function jD(){const{lectureId:t}=ht(),[e,a]=x.useState(null),[i,o]=x.useState([]),[d,u]=x.useState([]),[h,m]=x.useState(1),[p,b]=x.useState([]),[y,v]=x.useState(!0),[N,D]=x.useState(null),{setLecture:C,formatYearTerm:A}=ds(),[S,M]=x.useState(ot.defaultTitle),[F,z]=x.useState(ot.subtitleLoading),K=T=>{if(!T||String(T).length<4)return"--:--";const U=String(T);return`${U.slice(0,2)}:${U.slice(2,4)}`},R=x.useMemo(()=>e?.professorNo?`${yv}/photo/professor/${encodeURIComponent(String(e.professorNo).trim())}`:null,[e?.professorNo]);x.useEffect(()=>{let T=!0;return(async()=>{try{v(!0),D(null);const U=`/classroom/api/v1/common/${encodeURIComponent(t)}`,[V,q,H,E]=await Promise.all([fetch(U,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${U}/schedule`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${U}/plan`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${U}/ratio`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!V.ok)throw new Error(`(${V.status})    .`);if(!q.ok)throw new Error(`(${q.status})    .`);if(!H.ok)throw new Error(`(${H.status})   .`);const L=await V.json(),$=await q.json(),O=await H.json(),Q=E.ok?await E.json():[];if(!T)return;if(a(L),C(L),L){M(L.subjectName||ot.defaultTitle);const k=L.professorName||ot.overviewProfessorFallback,W=A(L.yeartermCd)||ot.unknownTerm;z(`${k}  ${W}`)}else M(ot.defaultTitle),z(ot.subtitleLoading);o(Array.isArray($)?$:[]),b(Array.isArray(Q)?Q:[]);const Z=Array.isArray(O)?O:[];if(u(Z),Z.length){const k=Z.reduce((W,P)=>{const G=Number(P.lectureWeek);return Number.isFinite(G)?Math.min(W,G):W},Number(Z[0].lectureWeek)||1);m(k)}else m(null)}catch(U){if(!T)return;D(U)}finally{T&&v(!1)}})(),()=>{T=!1}},[t,C,A]),p.reduce((T,U)=>T+(U.ratio||0),0);const w=["rgba(54, 162, 235, 0.8)","rgba(255, 99, 132, 0.8)","rgba(255, 206, 86, 0.8)","rgba(75, 192, 192, 0.8)","rgba(153, 102, 255, 0.8)"],_={labels:["  "],datasets:p.map((T,U)=>({label:T.gradeCriteriaName||T.gradeCriteriaCd,data:[T.ratio||0],backgroundColor:w[U%w.length],borderWidth:0}))},B={responsive:!0,maintainAspectRatio:!1,indexAxis:"y",scales:{x:{stacked:!0,beginAtZero:!0,max:100,ticks:{callback:T=>`${T}%`}},y:{stacked:!0}},plugins:{legend:{display:!0,position:"bottom"},tooltip:{enabled:!0,callbacks:{label:function(T){let U=T.dataset.label||"";return U&&(U+=": "),T.parsed.x!==null&&(U+=T.parsed.x+"%"),U}}}}};return s.jsxs("section",{id:"prof-lecture-root",className:"container py-4","data-lecture-id":t||"","data-common-api":yv,children:[s.jsxs("header",{className:"mb-4",children:[s.jsx("h1",{className:"h3 mb-1 text-primary",id:"prof-lecture-title",children:S}),s.jsx("p",{className:"text-muted mb-0",id:"prof-lecture-subtitle",children:F})]}),N&&s.jsx("div",{id:"prof-lecture-alert",className:"alert alert-danger",role:"alert",children:N||ot.genericError}),y&&s.jsx("div",{className:"text-muted text-center py-4",children:" "}),!y&&!N&&s.jsxs("div",{className:"row g-4 align-items-stretch mb-4",children:[s.jsxs("div",{className:"col-12 col-xl-8 d-flex flex-column gap-4",children:[s.jsxs("section",{id:"plan-section",className:"card h-100 flex-fill","aria-labelledby":"plan-heading",style:{height:"350px !important"},children:[s.jsx("div",{className:"card-header d-flex align-items-center justify-content-between",children:s.jsxs("h2",{className:"h5 mb-0",id:"plan-heading",children:[" ",ot.planHeading]})}),s.jsxs("div",{className:"card-body d-flex flex-column",children:[s.jsx("ul",{className:"nav nav-tabs mb-3",children:d.slice().sort((T,U)=>Number(T.lectureWeek||0)-Number(U.lectureWeek||0)).map(T=>s.jsx("li",{className:"nav-item",children:s.jsxs("button",{className:`nav-link ${h===T.lectureWeek?"active":""}`,onClick:()=>m(T.lectureWeek),children:[T.lectureWeek,""]})},T.lectureWeek))}),s.jsx("div",{className:"tab-content flex-grow-1 border border-top-0 rounded-bottom p-3",children:h?(()=>{const T=d.find(U=>Number(U.lectureWeek)===Number(h));return T?s.jsxs("div",{className:"tab-pane fade show active",children:[s.jsxs("div",{className:"mb-2",children:[s.jsxs("div",{className:"fw-semibold mb-1 text-primary",children:[s.jsx("i",{className:"bi bi-bullseye me-2"}),ot.planGoalLabel]}),s.jsx("p",{className:"mb-0",children:xm(T.weekGoal,ot.overviewGoalFallback)})]}),s.jsxs("div",{className:"fw-semibold mb-1",children:[s.jsx("i",{className:"bi bi-journal-text me-2"}),ot.planDescLabel]}),s.jsx("p",{className:"text-break mb-0",children:xm(T.weekDesc,ot.overviewGoalFallback)})]}):s.jsx("div",{className:"text-muted",children:ot.planEmpty})})():s.jsx("div",{className:"text-muted",children:ot.planEmpty})})]})]}),p.length>0&&s.jsxs("section",{id:"grade-ratio-section",className:"card h-100 flex-fill","aria-labelledby":"grade-ratio-heading",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h2",{className:"h6 mb-0",id:"grade-ratio-heading",children:[" ",ot.gradeRatioHeading]})}),s.jsx("div",{className:"card-body",children:s.jsx("div",{style:{height:"200px"},children:s.jsx(Nd,{data:_,options:B})})})]})]}),s.jsxs("div",{className:"col-12 col-xl-4 d-flex flex-column gap-4",children:[e&&s.jsxs("section",{id:"overview-section",className:"card h-100 flex-fill","aria-labelledby":"overview-heading",style:{height:"350px !important"},children:[s.jsx("div",{className:"card-header",children:s.jsxs("h2",{className:"h6 mb-0",id:"overview-heading",children:[" ",ot.overviewHeading]})}),s.jsxs("div",{className:"card-body px-3 d-flex flex-column",id:"overview-body",children:[s.jsxs("div",{className:"d-flex gap-3",children:[R?s.jsx("img",{src:R,alt:`${e.professorName||ot.overviewProfessorFallback}`,className:"overview-photo flex-shrink-0"}):s.jsx("div",{className:"overview-photo-placeholder flex-shrink-0",children:ot.overviewProfessorFallback}),s.jsxs("div",{className:"flex-grow-1",children:[s.jsx("div",{className:"text-muted small mb-1",children:A(e.yeartermCd)||ot.unknownTerm}),s.jsx("div",{className:"fw-semibold",children:e.subjectName||ot.defaultTitle}),s.jsx("div",{className:"small text-body-secondary",children:`${ot.overviewProfessorLabel}: ${e.professorName||ot.overviewProfessorFallback}`}),s.jsx("div",{className:"small text-body-secondary",children:`${ot.overviewIndexLabel}: ${e.lectureIndex||ot.overviewIndexFallback}`})]})]}),s.jsxs("div",{className:"d-flex flex-column gap-0 mt-3 mb-0 border-top pt-3",children:[s.jsxs("div",{className:"d-flex",children:[s.jsx("dt",{className:"text-primary col-4",style:{fontSize:"0.9rem"},children:ot.overviewGoalLabel}),s.jsx("dd",{className:"mb-0 text-end col-8",style:{fontSize:"0.9rem"},children:xm(e.lectureGoal,ot.overviewGoalFallback)})]}),s.jsxs("div",{className:"d-flex",children:[s.jsx("dt",{className:"text-info col-4",style:{fontSize:"0.9rem"},children:ot.overviewPrereqLabel}),s.jsx("dd",{className:"mb-0 text-end col-8",style:{fontSize:"0.9rem"},children:e.prereqSubject||ot.overviewPrereqFallback})]}),s.jsxs("div",{className:"d-flex",children:[s.jsx("dt",{className:"text-success col-4",style:{fontSize:"0.9rem"},children:ot.overviewCapacityLabel}),s.jsx("dd",{className:"mb-0 text-end col-8",style:{fontSize:"0.9rem"},children:Number.isFinite(Number(e.maxCap))?`${e.maxCap}`:ot.overviewCapacityFallback})]}),s.jsxs("div",{className:"d-flex",children:[s.jsx("dt",{className:"text-danger col-4",style:{fontSize:"0.9rem"},children:ot.overviewEndLabel}),s.jsx("dd",{className:"mb-0 text-end col-8",style:{fontSize:"0.9rem"},children:e.endAt?vD(e.endAt):ot.overviewEndFallback})]})]})]})]}),s.jsxs("section",{id:"schedule-section",className:"card h-100 flex-fill","aria-labelledby":"schedule-heading",children:[s.jsx("div",{className:"card-header",children:s.jsxs("h2",{className:"h6 mb-0",id:"schedule-heading",children:[" ",ot.scheduleHeading]})}),s.jsx("div",{className:"card-body",children:i.length===0?s.jsx("div",{className:"text-body-secondary",children:ot.scheduleEmpty}):s.jsx("div",{className:"table-responsive border rounded",children:s.jsxs("table",{className:"table table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",style:{width:"5.5rem"},children:ot.scheduleDay}),s.jsx("th",{className:"text-center",style:{width:"9rem"},children:ot.scheduleTime}),s.jsx("th",{children:ot.schedulePlace})]})}),s.jsx("tbody",{children:i.map((T,U)=>T.slots.map((V,q)=>s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:yD[V.day]??V.day??""}),s.jsxs("td",{className:"text-center",children:[K(V.start)," ~ ",K(V.end)]}),s.jsx("td",{children:T.placeName===""?s.jsxs(s.Fragment,{children:[T.placeName,s.jsx("br",{}),"  209"]}):T.placeName||T.placeCd||" "})]},`${U}-${q}`)))})]})})})]})]})]})]})}function ND(){const{lectureId:t}=ht(),{lecture:e}=ds(),a=`/classroom/professor/${encodeURIComponent(t||"")}`,i=!!e?.ended,o=!!e?.finalized,d="       .",u=(h,m,p={})=>{const{end:b=!1,disabled:y=!1,tooltip:v}=p;return y?s.jsx("li",{className:"nav-item",children:s.jsx("span",{className:"nav-link disabled text-muted",title:v,"aria-disabled":"true",style:{cursor:"not-allowed"},children:m})},h):s.jsx("li",{className:"nav-item",children:s.jsx(Qv,{end:b,className:({isActive:N})=>`nav-link${N?" active":""}`,to:h,children:m})},h)};return s.jsxs("ul",{className:"nav nav-pills mb-3",children:[u(a,"",{end:!0}),u(`${a}/summary`," "),u(`${a}/board`,""),u(`${a}/attendance`,""),u(`${a}/task`,""),u(`${a}/exam`,""),u(`${a}/student`," "),u(`${a}/grades`,"/ ",{disabled:i||o,tooltip:i?"       .":o?d:void 0}),i?u(`${a}/finalize`,"  /"):null]})}function wD(){const{lectureId:t}=ht(),{setStudents:e,clearLectureScoped:a}=ds();return x.useEffect(()=>{let i=!0;return(async()=>{try{if(!t)return;const o=await Sf(t);if(!i)return;e(o)}catch{if(!i)return;e([])}})(),()=>{a(),i=!1}},[t]),s.jsxs(Ed,{role:"professor",lectureId:t,children:[s.jsx(ND,{}),s.jsx(Wv,{})]})}const bm=10;function SD(t){if(t?.tempSaveYn==="Y")return"DRAFT";if(t?.revealAt){const e=Date.now(),a=new Date(t.revealAt).getTime();if(Number.isFinite(a)&&a>e)return"SCHEDULED"}return"PUBLISHED"}function CD(t){return t==="NOTICE"?s.jsx("span",{className:"badge text-black border border-warning-subtle",style:{backgroundColor:"#ffc107"},children:""}):t==="MATERIAL"?s.jsx("span",{className:"badge text-black border border-info-subtle",style:{backgroundColor:"#0dcaf0"},children:""}):s.jsx("span",{className:"badge text-bg-secondary",children:""})}function AD(t){switch(t){case"DRAFT":return s.jsx("span",{className:"badge text-bg-secondary",children:""});case"SCHEDULED":return s.jsx("span",{className:"badge text-bg-info",children:""});case"PUBLISHED":return s.jsx("span",{className:"badge text-bg-success",children:""});default:return null}}const vv=t=>{if(!t)return"";const e=new Date(t);if(Number.isNaN(e.getTime()))return String(t);const a=p=>String(p).padStart(2,"0");new Date().getFullYear();const i=e.getFullYear(),o=a(e.getMonth()+1),d=a(e.getDate()),u=a(e.getHours()),h=a(e.getMinutes());return`${`${i}-${o}-${d}`} ${u}:${h}`};function ED(){const{lectureId:t}=ht(),[e,a]=x.useState([]),[i,o]=x.useState(!0),[d,u]=x.useState(null),[h,m]=x.useState("all"),[p,b]=x.useState(""),[y,v]=x.useState(""),[N,D]=x.useState(""),[C,A]=x.useState(1),[S,M]=x.useState("newest");x.useEffect(()=>{let q=!0;return(async()=>{try{o(!0),u(null);const H=`/classroom/api/v1/professor/board/${encodeURIComponent(t)}/post`,E=await fetch(H,{headers:{Accept:"application/json"},credentials:"include"});if(!E.ok)throw new Error(`(${E.status})    .`);const L=await E.json();if(!Array.isArray(L))throw new Error("    .");if(!q)return;a(L)}catch(H){if(!q)return;u(H)}finally{q&&o(!1)}})(),()=>{q=!1}},[t]);const F=x.useMemo(()=>e.map(q=>({...q,_status:SD(q)})),[e]),z=q=>q.postType||q.classification||"",K=x.useMemo(()=>{let q=F.length,H=0,E=0;for(const L of F){const $=z(L);$==="NOTICE"?H++:$==="MATERIAL"&&E++}return{all:q,notice:H,material:E}},[F]);x.useEffect(()=>{h==="all"?b(""):h==="notice"?b("NOTICE"):h==="material"&&b("MATERIAL"),A(1)},[h]);const R=x.useMemo(()=>{let q=F;if(p&&(q=q.filter(H=>z(H)===p)),y&&(q=q.filter(H=>H._status===y)),N&&N.trim().length){const H=N.trim().toLowerCase();q=q.filter(E=>String(E.title||"").toLowerCase().includes(H)||String(E.content||"").toLowerCase().includes(H))}return q.sort((H,E)=>{const L=new Date(H.createAt||H.createdAt).getTime(),$=new Date(E.createAt||E.createdAt).getTime();return S==="newest"?$-L:S==="oldest"?L-$:0}),q},[F,p,y,N,S]),w=Math.max(1,Math.ceil(R.length/bm)),_=x.useMemo(()=>R.slice((C-1)*bm,C*bm),[R,C]);x.useEffect(()=>{C>w&&A(1)},[w,C]);const B=(q,H)=>{const E=q._status,$=(q.lctPostId||q.postId||q.id)??q.id;if($==null)return null;const O=z(q),Q=vv(q.createAt||q.createdAt),Z=E==="SCHEDULED"&&q.revealAt?vv(q.revealAt):null;let k="";for(const G of[q.summary,q.content]){if(!G)continue;const Y=String(G).replace(/\s+/g," ").trim();if(Y.length){k=Y;break}}const W=q.title||"( )",P=`/classroom/professor/${encodeURIComponent(t)}/board/${encodeURIComponent(String($))}`;return s.jsx(st,{to:P,className:"list-group-item list-group-item-action text-reset text-decoration-none py-2",children:s.jsxs("div",{className:"d-flex align-items-center gap-2 flex-nowrap",children:[s.jsx("div",{className:"d-flex align-items-center gap-1 flex-shrink-0",children:CD(O)}),s.jsxs("div",{className:"flex-grow-1 text-truncate",style:{minWidth:0},children:[s.jsx("span",{className:"fw-semibold",children:W}),k&&s.jsxs("span",{className:"text-muted",children:["  ",k]})]}),Z&&s.jsxs("span",{className:"text-muted small text-nowrap flex-shrink-0",children:[": ",Z]}),AD(E),s.jsxs("span",{className:"text-muted small text-nowrap flex-shrink-0",children:[": ",Q]})]})},String($))},T=({id:q,label:H,active:E,onClick:L,badge:$})=>{const O={all:{backgroundColor:"#6c757d",color:"white"},notice:{backgroundColor:"#ffc107",color:"black"},material:{backgroundColor:"#0dcaf0",color:"black"}}[q]||{backgroundColor:"#6c757d",color:"white"};return s.jsxs("button",{className:`nav-link ${E?"active":""}`,id:`tab-${q}`,type:"button",onClick:L,role:"tab",children:[H," ",$!=null&&s.jsx("span",{className:"badge ms-1",style:O,children:$})]})},U=()=>s.jsx("nav",{className:"mt-3","aria-label":"  ",children:s.jsxs("ul",{className:"pagination pagination-sm mb-0",children:[s.jsx("li",{className:`page-item ${C<=1?"disabled":""}`,children:s.jsx("a",{className:"page-link",href:"#",onClick:q=>{q.preventDefault(),C>1&&A(C-1)},children:""})}),Array.from({length:w},(q,H)=>H+1).map(q=>s.jsx("li",{className:`page-item ${q===C?"active":""}`,children:s.jsx("a",{className:"page-link",href:"#",onClick:H=>{H.preventDefault(),A(q)},children:q})},q)),s.jsx("li",{className:`page-item ${C>=w?"disabled":""}`,children:s.jsx("a",{className:"page-link",href:"#",onClick:q=>{q.preventDefault(),C<w&&A(C+1)},children:""})})]})}),V=()=>_.length===0?s.jsx("div",{className:"text-center text-muted py-4",children:"   ."}):s.jsx("div",{className:"list-group list-group-flush",children:_.map((q,H)=>B(q))});return s.jsxs("section",{id:"board-root",className:"container py-0","data-lecture-id":t,children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("h1",{className:"h3 mb-0",children:""}),s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsxs("select",{id:"sort-by",className:"form-select form-select-sm",style:{minWidth:100},value:S,onChange:q=>M(q.target.value),children:[s.jsx("option",{value:"newest",children:""}),s.jsx("option",{value:"oldest",children:""})]}),s.jsxs("select",{id:"filter-type",className:"form-select form-select-sm",style:{minWidth:120},value:p,onChange:q=>b(q.target.value),children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"NOTICE",children:""}),s.jsx("option",{value:"MATERIAL",children:""})]}),s.jsxs("select",{id:"filter-status",className:"form-select form-select-sm",style:{minWidth:120},value:y,onChange:q=>v(q.target.value),children:[s.jsx("option",{value:"",children:" "}),s.jsx("option",{value:"PUBLISHED",children:""}),s.jsx("option",{value:"DRAFT",children:""}),s.jsx("option",{value:"SCHEDULED",children:""})]}),s.jsxs("div",{className:"input-group input-group-sm",style:{minWidth:220},children:[s.jsx("input",{id:"search-q",type:"text",className:"form-control",placeholder:"/ ",value:N,onChange:q=>{D(q.target.value),A(1)}}),s.jsx("button",{id:"btn-search",className:"btn btn-outline-secondary",onClick:()=>A(1),children:""})]})]})]}),s.jsxs("section",{className:"mt-4","aria-labelledby":"tablist-h",children:[s.jsxs("ul",{className:"nav nav-tabs mt-2",id:"post-tabs",role:"tablist",children:[s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsx(T,{id:"all",label:"",active:h==="all",onClick:()=>m("all"),badge:K.all})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsx(T,{id:"notice",label:"",active:h==="notice",onClick:()=>m("notice"),badge:K.notice})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsx(T,{id:"material",label:"",active:h==="material",onClick:()=>m("material"),badge:K.material})})]}),s.jsxs("div",{className:"tab-content border border-top-0 rounded-bottom p-3",children:[(i||d)&&s.jsxs("div",{children:[i&&s.jsx("div",{className:"text-muted",children:" "}),d&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:String(d.message||d)})]}),!i&&!d&&s.jsx(s.Fragment,{children:s.jsxs("div",{className:"tab-pane fade show active p-0",children:[V(),s.jsxs("div",{className:"mt-3 d-flex align-items-center",children:[s.jsx("div",{className:"flex-grow-1 d-flex justify-content-center",children:s.jsx(U,{})}),s.jsx(st,{id:"btn-create",className:"btn btn-sm btn-primary py-1 px-2",to:`/classroom/professor/${encodeURIComponent(t)}/board/new`,children:" "})]})]})})]}),s.jsx("div",{id:"notfound-box",className:"alert alert-danger mt-3 d-none",role:"alert"})]})]})}function Id({message:t="   ",resourceType:e=""}){const a=is(),{lectureId:i}=ht(),o=()=>{a(-1)},d=()=>{a(i?`/classroom/professor/${i}`:"/classroom/professor")};return s.jsx("div",{className:"container-fluid py-5",children:s.jsx("div",{className:"row justify-content-center",children:s.jsx("div",{className:"col-12 col-md-8 col-lg-6",children:s.jsx("div",{className:"card shadow-sm",children:s.jsxs("div",{className:"card-body text-center py-5",children:[s.jsx("div",{style:{fontSize:"5rem",color:"#dc3545",marginBottom:"1.5rem"},children:s.jsx("i",{className:"bi bi-exclamation-triangle"})}),s.jsx("h2",{className:"mb-3",style:{color:"#495057"},children:"404 Not Found"}),s.jsx("p",{className:"text-muted mb-2",style:{fontSize:"1.1rem"},children:t}),s.jsxs("p",{className:"text-muted mb-4",style:{fontSize:"0.95rem"},children:[" ",e,"()   ."]}),s.jsxs("div",{className:"d-flex gap-3 justify-content-center mt-4",children:[s.jsxs("button",{className:"btn btn-outline-secondary btn-lg",onClick:o,style:{minWidth:"140px"},children:[s.jsx("i",{className:"bi bi-arrow-left me-2"}),""]}),s.jsxs("button",{className:"btn btn-primary btn-lg",onClick:d,style:{minWidth:"140px"},children:[s.jsx("i",{className:"bi bi-house-door me-2"})," "]})]}),s.jsxs("div",{className:"mt-5 pt-4 border-top",children:[s.jsxs("p",{className:"text-muted small mb-1",children:[s.jsx("i",{className:"bi bi-info-circle me-1"}),"       :"]}),s.jsxs("ul",{className:"list-unstyled text-muted small",children:[s.jsxs("li",{children:["    ",e]}),s.jsx("li",{children:"  URL "}),s.jsxs("li",{children:["    ",e]})]})]})]})})})})})}const ym=t=>{if(!t)return"";const e=new Date(t);if(Number.isNaN(e.getTime()))return String(t);const a=i=>String(i).padStart(2,"0");return`${e.getFullYear()}-${a(e.getMonth()+1)}-${a(e.getDate())} ${a(e.getHours())}:${a(e.getMinutes())}`},TD=({t})=>{const e=t||"";return e==="NOTICE"?s.jsx("span",{className:"badge badge-type bg-warning text-dark border border-warning-subtle",children:""}):e==="MATERIAL"?s.jsx("span",{className:"badge badge-type bg-info text-dark border border-info-subtle",children:""}):s.jsx("span",{className:"badge badge-type text-bg-secondary",children:""})},kD=t=>{if(!t)return"PUBLISHED";if(t.tempSaveYn==="Y")return"DRAFT";if(t.revealAt){const e=new Date(t.revealAt);if(!Number.isNaN(e.getTime())&&e.getTime()>Date.now())return"SCHEDULED"}return"PUBLISHED"},_D=({status:t})=>{switch(t){case"DRAFT":return s.jsx("span",{className:"badge text-bg-secondary",children:""});case"SCHEDULED":return s.jsx("span",{className:"badge text-bg-primary",children:""});default:return s.jsx("span",{className:"badge text-bg-success",children:""})}},DD=Gs.memo(({r:t,depth:e=0,displayNameFor:a,fmtDateTime:i,getUserId:o,inlineReplyForm:d,openInlineReply:u,closeInlineReply:h,updateInlineReplyContent:m,handleDeleteReply:p,submitInlineReply:b})=>{const y=e>0,v=a(t.userId)||t.authorName||t.writerName||t.userName||"-",N=t.contentHtml,D=t.replyContent||t.content,C=String(t.lctReplyId||t.replyId||t.id),A=o&&o(),S=A&&String(A)===String(t.userId||""),M=!!d;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:`border rounded p-2 reply-item ${y?"reply-child":""} ${S?"reply-professor":""}`,"data-reply-id":C,style:S?{backgroundColor:"#f6f7f9"}:void 0,children:[s.jsxs("div",{className:"d-flex align-items-start justify-content-between mb-1",children:[s.jsxs("div",{className:"me-2",children:[s.jsx("strong",{className:"me-2",children:v}),s.jsx("span",{className:"small text-muted",children:i(t.createAt||t.createdAt)})]}),s.jsxs("div",{className:"btn-group btn-group-sm",children:[!y&&s.jsx("button",{className:"btn btn-outline-secondary",onClick:()=>M?h(C):u(C),children:M?"":""}),s.jsx("button",{className:"btn btn-outline-danger",onClick:()=>p(C),children:""})]})]}),s.jsx("div",{className:"reply-body text-start",children:N?s.jsx("div",{dangerouslySetInnerHTML:{__html:N}}):s.jsx("div",{style:{whiteSpace:"pre-wrap"},children:D||""})})]}),M&&s.jsxs("form",{className:"mt-2 p-2 border rounded bg-light",onSubmit:F=>b(F,C),children:[s.jsx("div",{className:"mb-2",children:s.jsx("textarea",{className:"form-control",rows:2,placeholder:" ",value:d.content||"",onChange:F=>m(C,F.target.value),style:{resize:"none",overflowY:"auto",minHeight:"60px",maxHeight:"60px"}})}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm py-1 px-2",onClick:()=>h(C),children:""}),s.jsx("button",{type:"submit",className:"btn btn-primary btn-sm py-1 px-2",disabled:d.submitting,children:d.submitting?"":""})]})]})]})});function MD(){const{lectureId:t,postId:e}=ht(),a=is(),[i,o]=x.useState(null),[d,u]=x.useState(!0),[h,m]=x.useState(null),[p,b]=x.useState(!1),{user:y,getUserId:v}=Jv(),{students:N}=ds(),[D,C]=x.useState([]),[A,S]=x.useState("asc"),[M,F]=x.useState(""),[z,K]=x.useState({variant:"",message:""}),[R,w]=x.useState(!1),[_,B]=x.useState(!1),[T,U]=x.useState({});x.useEffect(()=>{let P=!0;return(async()=>{try{u(!0),m(null),b(!1);const G=`/classroom/api/v1/professor/board/${encodeURIComponent(t)}/post/${encodeURIComponent(e)}`,Y=await fetch(G,{headers:{Accept:"application/json"},credentials:"include"});if(Y.status===404||Y.status===500){if(!P)return;b(!0);return}if(!Y.ok)throw new Error(`(${Y.status})   .`);const ee=await Y.json();if(!P)return;o(ee)}catch(G){if(!P)return;m(G)}finally{P&&u(!1)}})(),()=>{P=!1}},[t,e]);async function V(){const P=`/classroom/api/v1/professor/board/${encodeURIComponent(t)}/post/${encodeURIComponent(e)}/reply`,G=await fetch(P,{headers:{Accept:"application/json"},credentials:"include"});if(!G.ok)throw new Error(`(${G.status})   .`);const Y=await G.json();return Array.isArray(Y)?Y:[]}x.useEffect(()=>{let P=!0;return(async()=>{try{const G=await V();if(!P)return;C(G)}catch{}})(),()=>{P=!1}},[t,e]);const q=x.useMemo(()=>{const P=new Map;for(const ae of D){const xe=ae.parentReply||"";P.has(xe)||P.set(xe,[]),P.get(xe).push(ae)}const G=(ae,xe)=>{const me=new Date(ae.createAt||ae.createdAt||0).getTime(),$e=new Date(xe.createAt||xe.createdAt||0).getTime();return A==="desc"?$e-me:me-$e},Y=(P.get("")||P.get(null)||[]).slice().sort(G),ee=new Map;for(const[ae,xe]of P.entries())ae&&ee.set(ae,xe.slice().sort(G));return{roots:Y,childrenMap:ee}},[D,A]),H=P=>{const G=String(P||"");if(!G)return"-";const Y=Array.isArray(N)?N.find(ae=>String(ae.userId||"")===G):null;if(Y){const ae=Y.lastName||"",xe=Y.firstName||"",me=Y.univDeptName||"",$e=`${ae}${xe}`.trim()||Y.studentNo||G;return me?`${$e}(${me})`:$e}const ee=v&&v();if(ee&&String(ee)===G){const ae=y?.lastName||"",xe=y?.firstName||"";return`${`${ae}${xe}`.trim()||""} `}return""},E=async P=>{if(P.preventDefault(),!M.trim()){K({variant:"danger",message:" ."});return}try{w(!0),K({variant:"",message:""});const G=`/classroom/api/v1/professor/board/${encodeURIComponent(t)}/post/${encodeURIComponent(e)}/reply`,Y=await fetch(G,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({parentReplyId:null,replyContent:M})}),ee=await Y.text();let ae=null;try{ae=ee?JSON.parse(ee):null}catch{}if(!Y.ok)throw new Error(`   (HTTP ${Y.status})`);F(""),K({variant:"",message:""});const xe=await V();C(xe)}catch(G){K({variant:"danger",message:String(G.message||G)})}finally{w(!1)}},L=P=>{U(G=>({...G,[P]:{content:"",submitting:!1}}))},$=P=>{U(G=>{const Y={...G};return delete Y[P],Y})},O=(P,G)=>{U(Y=>({...Y,[P]:{...Y[P],content:G}}))},Q=async(P,G)=>{P.preventDefault();const Y=T[G];if(!Y||!Y.content.trim()){K({variant:"danger",message:" ."});return}try{U(se=>({...se,[G]:{...se[G],submitting:!0}})),K({variant:"",message:""});const ee=`/classroom/api/v1/professor/board/${encodeURIComponent(t)}/post/${encodeURIComponent(e)}/reply`,ae=await fetch(ee,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({parentReplyId:G||null,replyContent:Y.content})}),xe=await ae.text();let me=null;try{me=xe?JSON.parse(xe):null}catch{}if(!ae.ok)throw new Error(`   (HTTP ${ae.status})`);$(G),K({variant:"",message:""});const $e=await V();C($e)}catch(ee){K({variant:"danger",message:String(ee.message||ee)}),U(ae=>({...ae,[G]:{...ae[G],submitting:!1}}))}},Z=async P=>{const G=String(P||"");if(G&&window.confirm(`  ?
    .`))try{const Y=`/classroom/api/v1/professor/board/${encodeURIComponent(t)}/post/${encodeURIComponent(e)}/reply/${encodeURIComponent(G)}`,ee=await fetch(Y,{method:"DELETE",credentials:"include"});if(!ee.ok)throw new Error(`   (HTTP ${ee.status})`);const ae=await V();C(ae)}catch(Y){K({variant:"danger",message:String(Y.message||Y)})}},k=async()=>{if(window.confirm(" ?"))try{B(!0);const P=`/classroom/api/v1/professor/board/${encodeURIComponent(t)}/post/${encodeURIComponent(e)}`,G=await fetch(P,{method:"DELETE",headers:{Accept:"application/json"},credentials:"include"});if(G.status===204){a(`/classroom/professor/${encodeURIComponent(t)}/board`,{replace:!0});return}const Y=await G.text().catch(()=>"");throw new Error(` . (HTTP ${G.status})`)}catch(P){console.error(P),m(P),B(!1)}},W=({r:P,depth:G=0})=>{const Y=String(P.lctReplyId||P.replyId||P.id);return s.jsx(DD,{r:P,depth:G,displayNameFor:H,fmtDateTime:ym,getUserId:v,inlineReplyForm:T[Y],openInlineReply:L,closeInlineReply:$,updateInlineReplyContent:O,handleDeleteReply:Z,submitInlineReply:Q})};return p?s.jsx(Id,{message:"   ",resourceType:""}):s.jsx("section",{id:"board-post-root",className:"container py-4","data-lecture-id":t,children:s.jsx("div",{className:"board-layout mx-auto",style:{marginTop:0,marginBottom:0},children:s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-lg-7",children:s.jsx("div",{className:"card shadow-sm",children:s.jsxs("div",{className:"card-body",id:"post-body",children:[d&&s.jsx("div",{className:"skeleton",style:{height:"8rem"}}),h&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:String(h.message||h)}),!d&&!h&&i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"d-flex align-items-start justify-content-between gap-3 mb-3 flex-wrap py-1 px-2",id:"post-header",children:[s.jsxs("div",{className:"flex-grow-1",children:[s.jsxs("div",{className:"d-flex align-items-center flex-wrap gap-2 mb-2",id:"post-badge-row",children:[s.jsx(TD,{t:i.postType||i.classification}),s.jsx(_D,{status:kD(i)})]}),s.jsx("h1",{className:"h4 mb-2",id:"post-title",children:i.title||"( )"}),s.jsxs("div",{className:"d-flex flex-wrap meta-list mb-0",id:"post-meta-row",children:[s.jsxs("div",{className:"meta-item",children:[" ",ym(i.createAt||i.createdAt)]}),i.revealAt&&s.jsxs("div",{className:"meta-item",children:[" ",ym(i.revealAt)]}),i.authorName&&s.jsxs("div",{className:"meta-item",children:[" ",i.authorName]})]})]}),s.jsxs("div",{className:"d-flex align-items-start gap-2 post-header-actions",children:[s.jsx(st,{className:"btn btn-outline-secondary btn-sm py-1 px-2",id:"btn-edit-bottom",to:`/classroom/professor/${encodeURIComponent(t)}/board/${encodeURIComponent(e)}/edit`,children:""}),s.jsx("button",{className:"btn btn-outline-danger btn-sm py-1 px-2",id:"btn-delete-bottom",onClick:k,disabled:_,children:_?"...":""})]})]}),s.jsx("hr",{className:"my-3"}),s.jsx("article",{className:"post-content mb-4 p-1",id:"post-content",children:s.jsx("div",{dangerouslySetInnerHTML:{__html:i.contentHtml||i.content||""}})}),Array.isArray(i.attachments)&&i.attachments.length>0&&s.jsxs("div",{id:"attach-area",className:"mt-4",children:[s.jsx("h2",{className:"h6 mb-2",children:""}),s.jsx("ul",{className:"list-group",id:"attach-list",children:i.attachments.map((P,G)=>s.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[s.jsx("span",{className:"text-truncate me-2",title:P.fileName||P.name,children:P.fileName||P.name}),P.url&&s.jsx("a",{className:"btn btn-sm btn-outline-secondary py-1 px-2",href:P.url,children:""})]},G))})]})]})]})})}),s.jsx("div",{className:"col-lg-5",children:s.jsx("section",{id:"reply-section",style:{marginTop:0},children:s.jsxs("div",{className:"card shadow-sm",style:{marginBottom:0},children:[s.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between gap-2 flex-wrap py-2",children:[s.jsx("h2",{className:"h5 mb-0",children:""}),s.jsxs("div",{className:"btn-group btn-group-sm",role:"group","aria-label":" ",children:[s.jsx("button",{type:"button",className:`btn py-1 px-2 ${A==="desc"?"btn-primary":"btn-outline-secondary"}`,id:"reply-sort-newest","aria-pressed":A==="desc",onClick:()=>S("desc"),children:""}),s.jsx("button",{type:"button",className:`btn py-1 px-2 ${A==="asc"?"btn-primary":"btn-outline-secondary"}`,id:"reply-sort-oldest","aria-pressed":A==="asc",onClick:()=>S("asc"),children:""})]})]}),s.jsxs("div",{className:"card-body pb-2 p-2",children:[s.jsxs("form",{id:"reply-form",className:"vstack gap-2 mb-3",onSubmit:E,children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"reply-content",className:"form-label",children:" "}),s.jsx("textarea",{className:"form-control reply-textarea",id:"reply-content",rows:2,placeholder:" ",value:M,onChange:P=>F(P.target.value),style:{resize:"none",overflowY:"auto",minHeight:"60px",maxHeight:"60px"}})]}),s.jsx("div",{className:"d-flex justify-content-end",children:s.jsx("button",{type:"submit",className:"btn btn-primary btn-sm py-1 px-2",id:"reply-submit",disabled:R,children:R?"":""})})]}),s.jsx("hr",{className:"my-2"}),s.jsx("div",{className:"vstack gap-1",children:D.length===0?s.jsx("div",{id:"reply-empty",className:"text-muted small text-center py-4",children:"  .   ."}):s.jsx("div",{id:"reply-list",className:"vstack gap-2",children:q.roots.map(P=>s.jsxs("div",{className:"vstack gap-2",children:[s.jsx(W,{r:P,depth:0}),(q.childrenMap.get(P.lctReplyId||P.replyId||P.id)||[]).map(G=>s.jsx("div",{className:"ms-4",children:s.jsx(W,{r:G,depth:1})},G.lctReplyId||G.replyId||G.id))]},P.lctReplyId||P.replyId||P.id))})}),z.message&&s.jsx("div",{id:"reply-alert",className:`alert mt-4 alert-${z.variant||"secondary"}`,role:"alert",children:z.message})]})]})})})]})})})}function $D(){const{lectureId:t}=ht(),e=is(),a=x.useRef(null),i=x.useRef(null),[o,d]=x.useState("NOTICE"),[u,h]=x.useState(""),[m,p]=x.useState("PUBLISHED"),[b,y]=x.useState(""),[v,N]=x.useState(""),[D,C]=x.useState(""),[A,S]=x.useState([]),[M,F]=x.useState({show:!1,type:"danger",message:""});x.useEffect(()=>{let _=!1;const B=async()=>{if(!i.current&&!(!a.current||!window.ClassicEditor))try{const T=await window.ClassicEditor.create(a.current);if(_){T.destroy().catch(console.error);return}i.current=T}catch(T){console.error("CKEditor initialization failed:",T)}};if(window.ClassicEditor)B();else{const T=document.querySelector('script[src*="ckeditor"]');if(T)T.addEventListener("load",()=>{_||B()});else{const U=document.createElement("script");U.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",U.onload=()=>{_||B()},document.head.appendChild(U)}}return()=>{_=!0;const T=i.current;T&&T.ui&&T.ui.view&&T.ui.view.element&&T.destroy().catch(U=>{console.debug("Editor cleanup:",U)}),i.current=null}},[]);const z=async _=>{const B=Array.from(_.target.files||[]);S(B),B.length>0&&console.log("Selected files:",B)},K=()=>{const _=i.current?i.current.getData():"";let B="N",T=null;if(m==="DRAFT")B="Y";else if(m==="SCHEDULED"&&b&&v){const[U,V]=v.split(":");T=`${b}T${U.padStart(2,"0")}:${V.padStart(2,"0")}:00`}return{title:u,content:_,fileId:D,postType:o,tempSaveYn:B,revealAt:T}},R=_=>_.title.trim()?_.content.replace(/<[^>]*>/g,"").trim()?m==="SCHEDULED"&&!_.revealAt?(F({show:!0,type:"danger",message:"  .    ."}),!1):!0:(F({show:!0,type:"danger",message:" ."}),!1):(F({show:!0,type:"danger",message:" ."}),!1),w=async _=>{_.preventDefault(),F({show:!1,type:"danger",message:""});const B=K();if(!R(B))return;const T=`/classroom/api/v1/professor/board/${encodeURIComponent(t)}/post`;try{const U=await fetch(T,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(B)});if(!U.ok){const V=await U.text().catch(()=>"");throw new Error(`HTTP ${U.status} - ${V||" "}`)}await Ve.fire({title:" ",text:" .",icon:"success",confirmButtonText:""}),e(`/classroom/professor/${t}/board`)}catch(U){console.error(U),await Ve.fire({title:" ",text:`   . ${U.message}`,icon:"error",confirmButtonText:""})}};return s.jsxs("section",{id:"post-root",className:"container py-4",children:[s.jsxs("form",{id:"post-form",onSubmit:w,children:[M.show&&s.jsxs("div",{id:"alert-box",className:`alert alert-${M.type} alert-dismissible fade show`,role:"alert",children:[M.message,s.jsx("button",{type:"button",className:"btn-close",onClick:()=>F({...M,show:!1}),"aria-label":"Close"})]}),s.jsxs("div",{className:"row g-4",children:[s.jsx("div",{className:"col-lg-8",children:s.jsxs("div",{className:"card mb-4",children:[s.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[s.jsx("h5",{className:"card-title mb-0",style:{fontSize:"1.2em"},children:" "}),s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:()=>{d("MATERIAL"),h("  - React Hook  "),i.current&&i.current.setData(`
                        <p>,       .</p>
                        <p>  React Hook      . useState, useEffect, useContext   Hook  Hook    .</p>
                        <p> PDF       Hook       .</p>
                        <p>      .       Hook  .</p>
                        <p>            .</p>
                        <p>      .</p>
                      `)},children:""})]}),s.jsxs("div",{className:"card-body",children:[s.jsx("div",{className:"mb-3",children:s.jsxs("div",{className:"d-flex gap-2",children:[s.jsxs("select",{id:"postType",name:"postType",className:"form-select",style:{width:"120px"},value:o,onChange:_=>d(_.target.value),children:[s.jsx("option",{value:"NOTICE",children:""}),s.jsx("option",{value:"MATERIAL",children:""})]}),s.jsx("input",{type:"text",id:"title",name:"title",className:"form-control form-control-lg",maxLength:"200",placeholder:" ",value:u,onChange:_=>h(_.target.value),style:{flex:1}})]})}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"content",className:"form-label fs-5",children:""}),s.jsx("div",{ref:a,id:"ck-editor"})]})]})]})}),s.jsx("div",{className:"col-lg-4",children:s.jsxs("div",{className:"vstack gap-4",children:[s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h5",{className:"card-title mb-0",children:" "})}),s.jsx("div",{className:"card-body",children:s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-6",children:s.jsxs("fieldset",{children:[s.jsx("legend",{className:"visually-hidden",children:" "}),s.jsxs("div",{className:"form-check",children:[s.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stPublished",value:"PUBLISHED",checked:m==="PUBLISHED",onChange:_=>p(_.target.value)}),s.jsx("label",{className:"form-check-label",htmlFor:"stPublished",children:" "})]}),s.jsxs("div",{className:"form-check",children:[s.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stDraft",value:"DRAFT",checked:m==="DRAFT",onChange:_=>p(_.target.value)}),s.jsx("label",{className:"form-check-label",htmlFor:"stDraft",children:""})]}),s.jsxs("div",{className:"form-check",children:[s.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stScheduled",value:"SCHEDULED",checked:m==="SCHEDULED",onChange:_=>p(_.target.value)}),s.jsx("label",{className:"form-check-label",htmlFor:"stScheduled",children:" "})]})]})}),s.jsx("div",{className:"col-6",children:m==="SCHEDULED"&&s.jsxs("div",{id:"schedule-row",children:[s.jsx("label",{htmlFor:"publishDatetime",className:"form-label",children:""}),s.jsx("input",{type:"datetime-local",id:"publishDatetime",className:"form-control",style:{padding:"6px",minWidth:"180px"},value:b&&v?`${b}T${v}`:"",onChange:_=>{const B=_.target.value;if(B){const[T,U]=B.split("T");y(T),N(U)}}})]})})]})})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h5",{className:"card-title mb-0",children:""})}),s.jsxs("div",{className:"card-body",children:[s.jsx("input",{type:"file",id:"files",name:"files",className:"form-control",style:{padding:"6px"},multiple:!0,onChange:z}),s.jsx("div",{className:"form-text mt-2",children:A.length>0?s.jsx("ul",{className:"list-unstyled mb-0",children:A.map((_,B)=>s.jsxs("li",{className:"small",children:[" ",_.name," (",(_.size/1024).toFixed(1)," KB)"]},B))}):"  ."})]})]}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx(st,{className:"custom-btn custom-btn-outline-secondary custom-btn-md",to:`/classroom/professor/${encodeURIComponent(t)}/board`,children:""}),s.jsx("button",{type:"submit",className:"custom-btn custom-btn-primary custom-btn-md",children:""})]})]})})]})]}),s.jsx("style",{children:`
        .ck.ck-editor {
          max-width: 100%;
        }
        .ck-editor__editable {
          min-height: 400px;
        }
      `})]})}function RD(){const{lectureId:t,postId:e}=ht(),a=is(),i=x.useRef(null),o=x.useRef(null),[d,u]=x.useState("NOTICE"),[h,m]=x.useState(""),[p,b]=x.useState("PUBLISHED"),[y,v]=x.useState(""),[N,D]=x.useState(""),[C,A]=x.useState(""),[S,M]=x.useState([]),[F,z]=x.useState([]),[K,R]=x.useState(!0),[w,_]=x.useState({show:!1,message:""}),[B,T]=x.useState({show:!1,message:""}),U=Z=>String(Z).padStart(2,"0"),V=Z=>`${Z.getFullYear()}-${U(Z.getMonth()+1)}-${U(Z.getDate())}`,q=Z=>`${U(Z.getHours())}:${U(Z.getMinutes())}`,H=Z=>{if(Z.tempSaveYn==="Y")return"DRAFT";if(Z.revealAt){const k=new Date;if(new Date(Z.revealAt).getTime()>k.getTime())return"SCHEDULED"}return"PUBLISHED"};x.useEffect(()=>{let Z=!1;const k=async()=>{if(!o.current&&!(!i.current||!window.ClassicEditor))try{const W=await window.ClassicEditor.create(i.current);if(Z){W.destroy().catch(console.error);return}o.current=W}catch(W){console.error("CKEditor initialization failed:",W)}};if(window.ClassicEditor)k();else{const W=document.querySelector('script[src*="ckeditor"]');if(W)W.addEventListener("load",()=>{Z||k()});else{const P=document.createElement("script");P.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",P.onload=()=>{Z||k()},document.head.appendChild(P)}}return()=>{Z=!0;const W=o.current;W&&W.ui&&W.ui.view&&W.ui.view.element&&W.destroy().catch(P=>{console.debug("Editor cleanup:",P)}),o.current=null}},[]),x.useEffect(()=>{let Z=!0;return(async()=>{try{R(!0);const W=`/classroom/api/v1/professor/board/${encodeURIComponent(t)}/post/${encodeURIComponent(e)}`,P=await fetch(W,{headers:{Accept:"application/json"},credentials:"include"});if(!P.ok)throw new Error(`HTTP ${P.status}`);const G=await P.json();if(!Z)return;m(G.title||""),u(G.postType||"NOTICE"),A(G.attachFileId||""),Array.isArray(G.attachFileList)&&z(G.attachFileList);const Y=H(G);if(b(Y),Y==="SCHEDULED"&&G.revealAt){const ae=new Date(G.revealAt);Number.isNaN(ae.getTime())||(v(V(ae)),D(q(ae)))}R(!1);const ee=setInterval(()=>{o.current&&(o.current.setData(G.content||""),clearInterval(ee))},100);setTimeout(()=>clearInterval(ee),1e4)}catch(W){if(!Z)return;console.error(W),_({show:!0,message:"    ."}),R(!1)}})(),()=>{Z=!1}},[t,e]);const E=async Z=>{const k=Array.from(Z.target.files||[]);M(k),k.length>0&&console.log("Selected files:",k)},L=()=>{const Z=o.current?o.current.getData():"";let k="N",W=null;if(p==="DRAFT")k="Y";else if(p==="SCHEDULED"&&y&&N){const[P,G]=N.split(":");W=`${y}T${P.padStart(2,"0")}:${G.padStart(2,"0")}:00`}return{title:h,content:Z,fileId:C||null,postType:d,tempSaveYn:k,revealAt:W}},$=Z=>Z.title.trim()?Z.title.trim().length>100?(_({show:!0,message:"  100."}),!1):!Z.content||Z.content.replace(/<[^>]*>/g,"").trim().length===0?(_({show:!0,message:" ."}),!1):Z.content.length>1e3?(_({show:!0,message:"  1000."}),!1):p==="SCHEDULED"&&!Z.revealAt?(_({show:!0,message:"   /  ."}),!1):!0:(_({show:!0,message:" ."}),!1),O=async Z=>{Z.preventDefault(),_({show:!1,message:""}),T({show:!1,message:""});const k=L();if(!$(k))return;const W=`/classroom/api/v1/professor/board/${encodeURIComponent(t)}/post/${encodeURIComponent(e)}`;try{const P=await fetch(W,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(k)});if(P.status===204){T({show:!0,message:"."}),setTimeout(()=>{a(`/classroom/professor/${t}/board/${e}`)},300);return}const G=await P.text().catch(()=>"");throw new Error(`  (HTTP ${P.status}) ${G.slice(0,200)}`)}catch(P){console.error(P),_({show:!0,message:P.message||"   ."})}},Q=()=>{a(`/classroom/professor/${t}/board/${e}`)};return s.jsxs("section",{id:"post-edit-root",className:"container py-4",children:[K&&s.jsxs("div",{className:"alert alert-info",children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"  ..."]}),s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("h1",{className:"h3 mb-0",children:" "}),s.jsxs("div",{className:"d-flex gap-2",children:[s.jsx(st,{className:"attendance-btn attendance-btn-default btn-sm",to:`/classroom/professor/${encodeURIComponent(t)}/board/${encodeURIComponent(e)}`,children:""}),s.jsx(st,{className:"attendance-btn attendance-btn-default btn-sm",to:`/classroom/professor/${encodeURIComponent(t)}/board`,children:""})]})]}),w.show&&s.jsx("div",{id:"error-box",className:"alert alert-danger",role:"alert",children:w.message}),B.show&&s.jsx("div",{id:"toast-box",className:"alert alert-success",role:"alert",children:B.message}),s.jsxs("form",{id:"edit-form",className:"vstack gap-3",onSubmit:O,children:[s.jsxs("div",{className:"row g-3 align-items-end",children:[s.jsxs("div",{className:"col-12 col-md-4 col-lg-2",children:[s.jsxs("label",{htmlFor:"postType",className:"form-label",children:["",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsxs("select",{id:"postType",name:"postType",className:"form-select",value:d,onChange:Z=>u(Z.target.value),disabled:K,children:[s.jsx("option",{value:"NOTICE",children:""}),s.jsx("option",{value:"MATERIAL",children:""})]})]}),s.jsxs("div",{className:"col-12 col-md-8 col-lg-6",children:[s.jsxs("label",{htmlFor:"title",className:"form-label",children:["",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx("input",{type:"text",id:"title",name:"title",className:"form-control",maxLength:"100",placeholder:" ",value:h,onChange:Z=>m(Z.target.value),disabled:K})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"files",className:"form-label",children:"(    )"}),s.jsx("input",{type:"file",id:"files",name:"files",className:"form-control",multiple:!0,onChange:E,disabled:K}),s.jsx("div",{id:"file-list",className:"form-text",children:F.length>0?s.jsxs(s.Fragment,{children:[" :"," ",F.map((Z,k)=>{const W=Z.originName||` ${Z.fileOrder||k+1}`,P=Z.extension?`.${Z.extension}`:"";return`${W}${P}`}).join(", ")]}):"  "}),S.length>0&&s.jsxs("div",{className:"form-text",children:[" :"," ",S.map(Z=>`${Z.name} (${(Z.size/1024).toFixed(1)} KB)`).join(", ")]}),s.jsx("div",{id:"file-hint",className:"form-text",children:" 5.     ."})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"content",className:"form-label",children:[" ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx("div",{ref:i,id:"ck-editor"}),s.jsx("div",{className:"form-text",children:" :  1000"})]}),s.jsxs("div",{className:"d-flex flex-column flex-md-row justify-content-end align-items-start align-items-md-center gap-3",children:[s.jsxs("fieldset",{className:"flex-grow-1",children:[s.jsxs("legend",{className:"col-form-label pt-0 mb-2",children:["  ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsxs("div",{className:"d-flex flex-wrap gap-3",children:[s.jsxs("div",{className:"form-check",children:[s.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stPublished",value:"PUBLISHED",checked:p==="PUBLISHED",onChange:Z=>b(Z.target.value)}),s.jsx("label",{className:"form-check-label",htmlFor:"stPublished",children:" "})]}),s.jsxs("div",{className:"form-check",children:[s.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stDraft",value:"DRAFT",checked:p==="DRAFT",onChange:Z=>b(Z.target.value)}),s.jsx("label",{className:"form-check-label",htmlFor:"stDraft",children:""})]}),s.jsxs("div",{className:"form-check",children:[s.jsx("input",{className:"form-check-input",type:"radio",name:"status",id:"stScheduled",value:"SCHEDULED",checked:p==="SCHEDULED",onChange:Z=>b(Z.target.value)}),s.jsx("label",{className:"form-check-label",htmlFor:"stScheduled",children:""})]})]}),p==="SCHEDULED"&&s.jsxs("div",{id:"schedule-row",className:"row g-2 align-items-end mt-2",children:[s.jsxs("div",{className:"col-12 col-sm-6 col-md-4",children:[s.jsx("label",{htmlFor:"publishDate",className:"form-label",children:" "}),s.jsx("input",{type:"date",id:"publishDate",className:"form-control",value:y,onChange:Z=>v(Z.target.value)})]}),s.jsxs("div",{className:"col-12 col-sm-6 col-md-3",children:[s.jsx("label",{htmlFor:"publishTime",className:"form-label",children:" "}),s.jsx("input",{type:"time",id:"publishTime",className:"form-control",step:"60",value:N,onChange:Z=>D(Z.target.value)})]})]})]}),s.jsxs("div",{className:"ms-md-auto d-flex gap-2",children:[s.jsx("button",{type:"button",className:"attendance-btn attendance-btn-default",onClick:Q,disabled:K,children:""}),s.jsx("button",{type:"submit",className:"attendance-btn attendance-btn-save",disabled:K,children:""})]})]})]}),s.jsx("style",{jsx:!0,children:`
        .ck.ck-editor {
          max-width: 100%;
        }
        .ck-editor__editable {
          min-height: 400px;
        }
      `})]})}Ii.register(Mj,Nf,wf,yf,jf,vf);const jv=t=>String(t).padStart(2,"0"),LD=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?"-":`${String(e.getFullYear()).slice(-2)} ${jv(e.getMonth()+1)} ${jv(e.getDate())}`};function ID(){const{lectureId:t}=ht(),e=is(),{students:a}=ds(),i="/classroom/api/v1/professor/attendance",[o,d]=x.useState([]),[u,h]=x.useState(!0),[m,p]=x.useState(null),[b,y]=x.useState(null),[v,N]=x.useState(0),[D,C]=x.useState(!1),[A,S]=x.useState(!1),[M,F]=x.useState(null),[z,K]=x.useState([]),[R,w]=x.useState(!1),[_,B]=x.useState(null),[T,U]=x.useState(0),[V,q]=x.useState(new Map),[H,E]=x.useState({loading:!0,error:null,data:[]}),[L,$]=x.useState("no"),[O,Q]=x.useState(2);x.useEffect(()=>{let se=!0;return(async()=>{try{h(!0),p(null);const ue=await fetch(`${i}/${encodeURIComponent(t)}/all`,{credentials:"include",headers:{Accept:"application/json"}});if(!ue.ok)throw new Error(`(${ue.status})     .`);const te=await ue.json();if(!se)return;if(!Array.isArray(te))throw new Error("    .");d(te)}catch(ue){if(!se)return;p(ue)}finally{se&&h(!1)}})(),()=>{se=!1}},[t,v]),x.useEffect(()=>{let se=!0;return(async()=>{E({loading:!0,error:null,data:[]});const te=`${i}/${encodeURIComponent(t)}/summary`;try{const oe=await fetch(te,{credentials:"include",headers:{Accept:"application/json"}});if(!se)return;if(!oe.ok)throw new Error(`     (${oe.status})`);const we=await oe.json();se&&E({loading:!1,error:null,data:Array.isArray(we)?we:[]})}catch(oe){se&&E({loading:!1,error:oe,data:[]})}})(),()=>{se=!1}},[t,v]);const Z=x.useMemo(()=>{const se={total:0,ok:0,no:0,early:0,late:0,excp:0};for(const ue of o)se.total+=ue.totalCnt??0,se.ok+=ue.okCnt??0,se.no+=ue.noCnt??0,se.early+=ue.earlyCnt??0,se.late+=ue.lateCnt??0,se.excp+=ue.excpCnt??0;return se},[o]),k=x.useMemo(()=>{if(!H.data.length||!Array.isArray(a))return[];const se=new Map(a.map(ue=>[ue.enrollId,ue]));return H.data.map(ue=>({...ue,student:se.get(ue.enrollId)})).filter(ue=>ue.student?L==="no"?ue.noCnt>=O:L==="late"?ue.lateCnt>=O:L==="early"?ue.earlyCnt>=O:!1:!1).sort((ue,te)=>L==="no"?(te.noCnt||0)-(ue.noCnt||0):L==="late"?(te.lateCnt||0)-(ue.lateCnt||0):L==="early"?(te.earlyCnt||0)-(ue.earlyCnt||0):0)},[H.data,a,L,O]),W=async se=>{if(!(!Number.isFinite(se)||!(await Ve.fire({title:" ",html:`<strong>#${se} </strong> ?<br/>  .`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"",cancelButtonText:"",reverseButtons:!0})).isConfirmed))try{y(se);const te=await fetch(`${i}/${encodeURIComponent(t)}/${encodeURIComponent(se)}`,{method:"DELETE",credentials:"include"});if(!te.ok)throw new Error(`(${te.status})  .`);const we=await(await fetch(`${i}/${encodeURIComponent(t)}/all`,{credentials:"include",headers:{Accept:"application/json"}})).json().catch(()=>[]);d(Array.isArray(we)?we:[]),await Ve.fire({title:" ",text:`#${se}  .`,icon:"success",confirmButtonText:""})}catch(te){alert(te.message||String(te))}finally{y(null)}},P=async se=>{try{const ue=await fetch(`${i}/${encodeURIComponent(t)}?default_status=${encodeURIComponent(se)}`,{method:"POST",credentials:"include"});if(!ue.ok)throw new Error(`(${ue.status})   `);const te=await ue.json();if(typeof te!="number")throw new Error("  : round  ");const we=await(await fetch(`${i}/${encodeURIComponent(t)}/all`,{credentials:"include",headers:{Accept:"application/json"}})).json().catch(()=>[]);d(Array.isArray(we)?we:[]),C(!1),(await Ve.fire({title:"  ",text:" ?",icon:"success",showCancelButton:!0,confirmButtonColor:"#0d6efd",cancelButtonColor:"#6c757d",confirmButtonText:" ",cancelButtonText:"",reverseButtons:!0})).isConfirmed&&await G(te)}catch(ue){alert(ue.message||String(ue))}},G=async se=>{try{w(!0),B(null),S(!0),F(se),q(new Map),U(0);const ue=await fetch(`${i}/${encodeURIComponent(t)}/${encodeURIComponent(se)}/manual`,{credentials:"include",headers:{Accept:"application/json"}});if(!ue.ok)throw new Error(`(${ue.status})    `);const te=await ue.json();K(Array.isArray(te)?te:[])}catch(ue){B(ue)}finally{w(!1)}},Y=()=>{S(!1),F(null),K([]),q(new Map),U(0)},ee=(se,ue)=>{q(te=>{const oe=new Map(te);return oe.set(String(se),{attStatusCd:ue.attStatusCd,attComment:ue.attComment}),oe})},ae=se=>{setTimeout(()=>{const ue=document.querySelector(`tr[data-enroll-id="${z[se]?.enrollId}"]`);ue&&ue.scrollIntoView({behavior:"smooth",block:"nearest"})},50)},xe=()=>{U(se=>{const ue=Math.min(z.length-1,se+1);return ae(ue),ue})},me=async()=>{try{if(!M){await Ve.fire({title:"",text:"  .",icon:"error",confirmButtonText:""});return}const se=Array.from(V,([te,oe])=>({enrollId:te,attStatusCd:oe.attStatusCd,attComment:oe.attComment??null})),ue=await fetch(`${i}/${encodeURIComponent(t)}/${encodeURIComponent(M)}/manual`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(se)});if(!ue.ok)throw new Error(`(${ue.status})  `);await Ve.fire({title:" ",text:"  .",icon:"success",confirmButtonText:""}),N(te=>te+1),Y()}catch(se){await Ve.fire({title:" ",text:se.message||String(se),icon:"error",confirmButtonText:""})}},$e=x.useMemo(()=>o.slice().sort((se,ue)=>(ue.lctRound||0)-(se.lctRound||0)),[o]);return s.jsxs("section",{id:"attendance-root",className:"container py-0","data-lecture-id":t,children:[s.jsxs("div",{className:"d-flex align-items-center gap-2 mb-3",children:[s.jsx("h1",{className:"h3 mb-0",children:" "}),s.jsx("div",{className:"d-flex flex-wrap gap-2 align-items-center",children:s.jsx("button",{id:"btn-open-create-modal",className:"btn btn-sm btn-primary py-1 px-2",onClick:()=>C(!0),children:" "})})]}),s.jsxs("div",{className:"row g-4 mb-4",id:"summary-cards",children:[s.jsx("div",{className:"col-12 col-lg-3",children:s.jsxs("div",{className:"card h-100",children:[s.jsx("div",{className:"card-header",children:s.jsx("h5",{className:"card-title mb-0",children:"  "})}),s.jsx("div",{className:"card-body d-flex align-items-center justify-content-center",style:{height:"176px",overflow:"visible"},children:s.jsx("div",{style:{width:"100%",maxWidth:"280px",height:"152px"},children:s.jsx(Lm,{data:{labels:["","","","",""],datasets:[{data:[Z.ok,Z.no,Z.late,Z.early,Z.excp],backgroundColor:["#28a745","#dc3545","#ffc107","#fd7e14","#17a2b8"],borderWidth:2,borderColor:"#fff"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"right",labels:{padding:12,font:{size:12},boxWidth:14,generateLabels:se=>{const ue=se.data,te=ue.datasets[0].data.reduce((oe,we)=>oe+we,0);return ue.labels.map((oe,we)=>{const _e=ue.datasets[0].data[we],He=te>0?Math.round(_e/te*100):0;return{text:`${oe} ${_e} (${He}%)`,fillStyle:ue.datasets[0].backgroundColor[we],hidden:!1,index:we}})}}},tooltip:{callbacks:{label:se=>{const ue=se.label||"",te=se.parsed||0,oe=se.dataset.data.reduce((_e,He)=>_e+He,0),we=oe>0?Math.round(te/oe*100):0;return`${ue}: ${te} (${we}%)`}}}}}})})})]})}),s.jsx("div",{className:"col-12 col-lg-9",children:s.jsxs("div",{className:"card h-100",children:[s.jsx("div",{className:"card-header",children:s.jsx("h5",{className:"card-title mb-0",children:"    ( 4)"})}),s.jsx("div",{className:"card-body",style:{height:"176px",padding:"0.25rem"},children:(()=>{const se=o.slice().sort((te,oe)=>(oe.lctRound||0)-(te.lctRound||0)).slice(0,4).reverse(),ue=Math.max(...se.map(te=>te.totalCnt||0),1);return s.jsx(Nd,{data:{labels:se.map(te=>{const oe=te.lctPrintRound??te.lctRound??"-",we=te.attDay||te.startAt||te.endAt;if(!we)return`#${oe}`;const _e=new Date(we);if(Number.isNaN(_e.getTime()))return`#${oe}`;const He=String(_e.getMonth()+1).padStart(2,"0"),be=String(_e.getDate()).padStart(2,"0");return`#${oe} (${He}/${be})`}),datasets:[{label:"",data:se.map(te=>te.okCnt||0),backgroundColor:"#28a745"},{label:"",data:se.map(te=>te.noCnt||0),backgroundColor:"#dc3545"},{label:"",data:se.map(te=>te.lateCnt||0),backgroundColor:"#ffc107"},{label:"",data:se.map(te=>te.earlyCnt||0),backgroundColor:"#fd7e14"},{label:"",data:se.map(te=>te.excpCnt||0),backgroundColor:"#17a2b8"}]},options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!0,max:ue},y:{stacked:!0}},plugins:{legend:{display:!0,position:"bottom"},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(te){let oe=te.dataset.label||"";if(oe&&(oe+=": "),te.parsed.x!==null){const we=te.parsed.x,_e=ue>0?Math.round(we/ue*100):0;oe+=`${we} (${_e}%)`}return oe}}}}}})})()})]})})]}),u&&s.jsx("div",{className:"text-muted",children:" "}),m&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:String(m.message||m)}),!u&&!m&&s.jsx("section",{"aria-label":" ",children:s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-12 col-xl-8",children:s.jsxs("div",{className:"card h-100",children:[s.jsx("div",{className:"card-header",children:s.jsx("h5",{className:"card-title mb-0",children:"  "})}),s.jsx("div",{className:"card-body",style:{padding:0},children:o.length===0?s.jsx("div",{className:"text-center text-muted py-4",children:"  ."}):s.jsx(s.Fragment,{children:s.jsx("div",{className:"attendance-table-container",style:{border:"none",borderRadius:"0.375rem",overflow:"hidden"},children:s.jsx("div",{className:"attendance-table-scroll",children:s.jsxs("table",{className:"table table-sm align-middle mb-0",id:"round-table",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:80},className:"text-center",children:""}),s.jsx("th",{style:{width:120},className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{style:{width:80},className:"text-center",children:""})]})}),s.jsx("tbody",{id:"round-tbody",children:$e.map(se=>{const ue=se.lctPrintRound??se.lctRound??"-",te=LD(se.attDay||se.startAt||se.endAt);return s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:s.jsxs("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:oe=>{oe.preventDefault(),G(se.lctRound)},children:["#",ue]})}),s.jsx("td",{className:"small text-muted text-center",children:te}),s.jsx("td",{className:"text-center",children:se.okCnt>0&&s.jsx("span",{className:"badge bg-success-subtle text-success border border-success-subtle",children:se.okCnt})}),s.jsx("td",{className:"text-center",children:se.noCnt>0&&s.jsx("span",{className:"badge bg-danger-subtle text-danger border border-danger-subtle",children:se.noCnt})}),s.jsx("td",{className:"text-center",children:se.earlyCnt>0&&s.jsx("span",{className:"badge bg-warning text-dark",children:se.earlyCnt})}),s.jsx("td",{className:"text-center",children:se.lateCnt>0&&s.jsx("span",{className:"badge bg-warning text-dark",children:se.lateCnt})}),s.jsx("td",{className:"text-center",children:se.excpCnt>0&&s.jsx("span",{className:"badge bg-info-subtle text-info border border-info-subtle",children:se.excpCnt})}),s.jsx("td",{className:"text-center",children:se.tbdCnt>0&&s.jsx("span",{className:`badge bg-secondary ${se.tbdCnt>0?"blink-tbd":""}`,children:se.tbdCnt})}),s.jsx("td",{className:"text-center",children:s.jsx("button",{className:"btn btn-sm border-0",disabled:b===se.lctRound,onClick:()=>W(se.lctRound),children:s.jsx("span",{style:{color:"red"},children:""})})})]},se.lctRound??ue)})})]})})})})})]})}),s.jsx("div",{className:"col-12 col-xl-4",children:s.jsxs("div",{className:"card h-100",children:[s.jsx("div",{className:"card-header",children:s.jsx("h5",{className:"card-title mb-0",children:"   "})}),s.jsxs("div",{className:"card-body d-flex flex-column",style:{padding:0},children:[s.jsx("div",{className:"px-2 pt-1 pb-1 border-bottom",children:s.jsxs("div",{className:"d-flex align-items-center justify-content-end gap-2",children:[s.jsxs("div",{className:"btn-group flex-shrink-0",role:"group",children:[s.jsx("button",{type:"button",className:`btn btn-sm ${L==="no"?"btn-danger":"btn-outline-danger"}`,onClick:()=>$("no"),style:{minWidth:"50px"},children:""}),s.jsx("button",{type:"button",className:`btn btn-sm ${L==="late"?"btn-warning text-dark":"btn-outline-warning"}`,onClick:()=>$("late"),style:{minWidth:"50px"},children:""}),s.jsx("button",{type:"button",className:`btn btn-sm ${L==="early"?"btn-warning text-dark":"btn-outline-warning"}`,onClick:()=>$("early"),style:{minWidth:"50px"},children:""})]}),s.jsx("input",{type:"text",id:"filter-count",className:"form-control form-control-sm flex-shrink-0",style:{width:55,height:"31px"},value:O,onChange:se=>{const ue=se.target.value.replace(/[^0-9]/g,"");Q(ue===""?0:Math.max(0,Number(ue)))}}),s.jsx("span",{className:"small text-muted text-nowrap",children:" "})]})}),s.jsx("div",{className:"flex-grow-1",style:{minHeight:"200px",overflowY:"auto",maxHeight:"350px"},children:H.loading?s.jsx("div",{className:"text-center text-muted py-3",children:" "}):H.error?s.jsxs("div",{className:"alert alert-danger mb-0 small",children:[": ",String(H.error?.message)]}):s.jsx("div",{className:"list-group list-group-flush",children:k.length===0?s.jsx("div",{className:"text-center text-muted small py-4",children:"   ."}):k.map(({enrollId:se,student:ue,noCnt:te,lateCnt:oe,earlyCnt:we})=>s.jsxs("div",{className:"list-group-item list-group-item-action",onClick:()=>e(`/classroom/professor/${t}/student/${ue.studentNo}`),style:{cursor:"pointer"},children:[s.jsxs("div",{className:"d-flex w-100 justify-content-between",children:[s.jsxs("h6",{className:"mb-1",children:[ue.lastName,ue.firstName," ",s.jsxs("small",{className:"text-muted",children:["(",ue.studentNo,")"]})]}),s.jsx("small",{children:L==="no"?`${te} `:L==="late"?`${oe} `:`${we} `})]}),s.jsx("p",{className:"mb-1 small text-muted",children:ue.univDeptName})]},se))})})]}),s.jsxs("div",{className:"card-footer text-end small text-muted",children:[" ",k.length," "]})]})})]})}),D&&Qc.createPortal(s.jsx("div",{className:"d-flex align-items-center justify-content-center",tabIndex:-1,role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,zIndex:2e3,backgroundColor:"rgba(0,0,0,0.5)"},onClick:()=>C(!1),children:s.jsx("div",{className:"modal-dialog modal-xl",style:{maxHeight:"90vh"},onClick:se=>se.stopPropagation(),children:s.jsxs("div",{className:"modal-content rounded-4 h-100 d-flex flex-column",style:{backgroundColor:"#fff"},children:[s.jsxs("div",{className:"modal-header border-bottom p-3",children:[s.jsx("h5",{className:"modal-title",children:" "}),s.jsx("button",{type:"button",className:"btn-close ms-auto","aria-label":"",onClick:()=>C(!1)})]}),s.jsx("div",{className:"modal-body p-4",children:s.jsxs("div",{className:"row g-4 justify-content-center",style:{maxWidth:"900px",margin:"0 auto"},children:[s.jsx("div",{className:"col-4",children:s.jsxs("div",{role:"button",className:"d-flex flex-column align-items-center justify-content-center border rounded-3 mode-card shadow-sm",style:{width:"100%",aspectRatio:"1/1",cursor:"pointer",transition:"all 0.2s",backgroundColor:"#f8f9fa"},onClick:()=>P("OK"),onMouseEnter:se=>{se.currentTarget.style.transform="translateY(-4px)",se.currentTarget.style.boxShadow="0 0.5rem 1rem rgba(0,0,0,0.15)"},onMouseLeave:se=>{se.currentTarget.style.transform="translateY(0)",se.currentTarget.style.boxShadow=""},children:[s.jsx("div",{style:{fontSize:"4.5rem",marginBottom:"0.5rem",color:"#28a745",lineHeight:1},children:""}),s.jsx("div",{className:"h5 mb-1 fw-semibold",children:" "}),s.jsx("div",{className:"text-muted small",children:"   "})]})}),s.jsx("div",{className:"col-4",children:s.jsxs("div",{role:"button",className:"d-flex flex-column align-items-center justify-content-center border rounded-3 mode-card shadow-sm",style:{width:"100%",aspectRatio:"1/1",cursor:"pointer",transition:"all 0.2s",backgroundColor:"#f8f9fa"},onClick:()=>P("TBD"),onMouseEnter:se=>{se.currentTarget.style.transform="translateY(-4px)",se.currentTarget.style.boxShadow="0 0.5rem 1rem rgba(0,0,0,0.15)"},onMouseLeave:se=>{se.currentTarget.style.transform="translateY(0)",se.currentTarget.style.boxShadow=""},children:[s.jsx("div",{style:{fontSize:"4.5rem",marginBottom:"0.5rem",color:"#007bff",lineHeight:1},children:""}),s.jsx("div",{className:"h5 mb-1 fw-semibold",children:" "}),s.jsx("div",{className:"text-muted small",children:"  "})]})}),s.jsx("div",{className:"col-4",children:s.jsxs("div",{role:"button",className:"d-flex flex-column align-items-center justify-content-center border rounded-3 mode-card shadow-sm",style:{width:"100%",aspectRatio:"1/1",cursor:"pointer",transition:"all 0.2s",backgroundColor:"#f8f9fa"},onClick:()=>P("NO"),onMouseEnter:se=>{se.currentTarget.style.transform="translateY(-4px)",se.currentTarget.style.boxShadow="0 0.5rem 1rem rgba(0,0,0,0.15)"},onMouseLeave:se=>{se.currentTarget.style.transform="translateY(0)",se.currentTarget.style.boxShadow=""},children:[s.jsx("div",{style:{fontSize:"4.5rem",marginBottom:"0.5rem",color:"#dc3545",lineHeight:1},children:""}),s.jsx("div",{className:"h5 mb-1 fw-semibold",children:" "}),s.jsx("div",{className:"text-muted small",children:"   "})]})})]})}),s.jsx("div",{className:"modal-footer border-top p-3 d-flex justify-content-end gap-2",children:s.jsx("button",{type:"button",className:"btn btn-outline-secondary",onClick:()=>C(!1),children:""})})]})})}),document.body),A&&Qc.createPortal(s.jsx("div",{id:"studentsModal",className:"d-flex align-items-center justify-content-center",tabIndex:-1,role:"dialog","aria-modal":"true",style:{position:"fixed",inset:0,zIndex:2e3,backgroundColor:"rgba(0,0,0,0.5)"},onClick:Y,children:s.jsx("div",{className:"modal-dialog modal-xl",style:{maxHeight:"90vh"},onClick:se=>se.stopPropagation(),children:s.jsxs("div",{className:"modal-content rounded-4 h-100 d-flex flex-column",style:{backgroundColor:"#fff"},children:[s.jsxs("div",{className:"modal-header border-bottom p-3",children:[s.jsxs("h5",{className:"modal-title",children:["  ",s.jsxs("small",{className:"text-muted",children:["#",M]})]}),s.jsx("button",{type:"button",className:"btn-close ms-auto","aria-label":"",onClick:Y})]}),s.jsxs("div",{className:"modal-body d-flex flex-column flex-grow-1",style:{overflow:"hidden"},children:[s.jsxs("div",{id:"checker-panel",className:`card mb-0 ${z.length?"":"d-none"}`,children:[s.jsx("div",{className:"card-body",children:s.jsxs("div",{className:"row g-3 align-items-stretch",children:[s.jsx("div",{className:"col-12 col-md-3",children:s.jsx("div",{className:"d-flex h-100 align-items-center justify-content-center",children:s.jsx("img",{id:"chk-photo",alt:"",className:"d-block rounded-3",style:{width:135,height:135,objectFit:"cover",objectPosition:"top",border:"1px solid #dee2e6"},src:z[T]?.studentNo?`/classroom/api/v1/common/photo/student/${encodeURIComponent(t)}/${encodeURIComponent(z[T].studentNo)}`:void 0})})}),s.jsx("div",{className:"col-12 col-md-9",children:s.jsxs("div",{className:"row g-3 align-items-end",children:[s.jsx("div",{className:"col-12 col-lg-5",children:s.jsxs("div",{children:[s.jsxs("div",{className:"d-flex flex-wrap gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"small text-muted",children:""}),s.jsx("div",{id:"chk-studentNo",className:"fw-semibold",children:z[T]?.studentNo||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"small text-muted",children:""}),s.jsx("div",{id:"chk-name",className:"fw-semibold",children:`${z[T]?.lastName||""}${z[T]?.firstName||""}`})]})]}),s.jsxs("div",{className:"d-flex flex-wrap gap-3 mt-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"small text-muted",children:""}),s.jsx("div",{id:"chk-dept",className:"fw-semibold",children:z[T]?.univDeptName||"-"})]}),s.jsxs("div",{children:[s.jsx("div",{className:"small text-muted",children:""}),s.jsx("div",{id:"chk-grade",className:"fw-semibold",children:z[T]?.gradeName||z[T]?.grade||"-"})]})]})]})}),s.jsx("div",{className:"col-12 col-lg-7",children:s.jsxs("div",{className:"row g-2",children:[s.jsxs("div",{className:"col-12",children:[s.jsx("label",{htmlFor:"chk-comment",className:"form-label small text-muted mb-1",children:""}),s.jsx("input",{id:"chk-comment",type:"text",className:"form-control form-control-sm",placeholder:"",value:V.get(String(z[T]?.enrollId))?.attComment||z[T]?.attComment||"",onChange:se=>{const ue=z[T];if(!ue)return;const te=V.get(String(ue.enrollId))||{};ee(ue.enrollId,{attStatusCd:te.attStatusCd||ue.attStatusCd||"ATTD_TBD",attComment:se.target.value})}})]}),s.jsx("div",{className:"col-12",children:s.jsxs("div",{className:"d-flex flex-nowrap gap-1",children:[s.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm text-nowrap",onClick:()=>{const se=z[T];if(!se)return;const ue=V.get(String(se.enrollId))?.attComment||se.attComment||"";ee(se.enrollId,{attStatusCd:"ATTD_TBD",attComment:ue}),xe()},children:""}),s.jsx("button",{type:"button",className:"btn btn-success btn-sm text-nowrap",onClick:()=>{const se=z[T];if(!se)return;const ue=V.get(String(se.enrollId))?.attComment||se.attComment||"";ee(se.enrollId,{attStatusCd:"ATTD_OK",attComment:ue}),xe()},children:""}),s.jsx("button",{type:"button",className:"btn btn-danger btn-sm text-nowrap",onClick:()=>{const se=z[T];if(!se)return;const ue=V.get(String(se.enrollId))?.attComment||se.attComment||"";ee(se.enrollId,{attStatusCd:"ATTD_NO",attComment:ue}),xe()},children:""}),s.jsx("button",{type:"button",className:"btn btn-warning btn-sm text-dark text-nowrap",onClick:()=>{const se=z[T];if(!se)return;const ue=V.get(String(se.enrollId))?.attComment||se.attComment||"";ee(se.enrollId,{attStatusCd:"ATTD_EARLY",attComment:ue}),xe()},children:""}),s.jsx("button",{type:"button",className:"btn btn-warning btn-sm text-dark text-nowrap",onClick:()=>{const se=z[T];if(!se)return;const ue=V.get(String(se.enrollId))?.attComment||se.attComment||"";ee(se.enrollId,{attStatusCd:"ATTD_LATE",attComment:ue}),xe()},children:""}),s.jsx("button",{type:"button",className:"btn btn-info btn-sm text-nowrap",onClick:()=>{const se=z[T];if(!se)return;const ue=V.get(String(se.enrollId))?.attComment||se.attComment||"";ee(se.enrollId,{attStatusCd:"ATTD_EXCP",attComment:ue}),xe()},children:""})]})})]})})]})})]})}),s.jsx("div",{className:"table-responsive flex-grow-1",style:{maxHeight:"45vh",overflow:"auto"},children:s.jsxs("table",{className:"table table-sm table-bordered text-center align-middle mb-0",children:[s.jsx("thead",{className:"table-light",style:{position:"sticky",top:"-1px",zIndex:10},children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"64px",paddingTop:"12px",paddingBottom:"12px"},children:"#"}),s.jsx("th",{style:{width:"120px",paddingTop:"12px",paddingBottom:"12px"},children:""}),s.jsx("th",{style:{width:"80px",paddingTop:"12px",paddingBottom:"12px"},children:""}),s.jsx("th",{style:{width:"60px",paddingTop:"12px",paddingBottom:"12px"},children:""}),s.jsx("th",{style:{minWidth:"120px",paddingTop:"12px",paddingBottom:"12px"},children:""}),s.jsx("th",{style:{width:"80px",paddingTop:"12px",paddingBottom:"12px"},children:""}),s.jsx("th",{style:{minWidth:"200px",paddingTop:"12px",paddingBottom:"12px"},children:""})]})}),s.jsx("tbody",{id:"students-tbody",children:R?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"text-center text-muted",children:" "})}):_?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"text-center text-danger",children:"   ."})}):z.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"text-center text-muted",children:"   ."})}):z.map((se,ue)=>{const te=V.get(String(se.enrollId))||{},oe=te.attStatusCd||se.attStatusCd||"ATTD_TBD",we=te.attComment||se.attComment||"";return s.jsxs("tr",{"data-enroll-id":se.enrollId,className:ue===T?"table-active":"",onClick:()=>U(ue),style:{cursor:"pointer"},children:[s.jsx("td",{children:s.jsxs("button",{className:"btn btn-sm btn-outline-secondary",onClick:_e=>{_e.preventDefault(),U(ue)},children:["#",ue+1]})}),s.jsx("td",{className:"text-center",children:se.studentNo}),s.jsx("td",{className:"text-center",children:`${se.lastName||""}${se.firstName||""}`}),s.jsx("td",{className:"text-center",children:se.gradeName||se.grade||"-"}),s.jsx("td",{className:"text-center",children:se.univDeptName||"-"}),s.jsx("td",{children:(()=>{const _e={ATTD_TBD:{cls:"badge bg-secondary status-pill",label:""},ATTD_OK:{cls:"badge bg-success status-pill",label:""},ATTD_NO:{cls:"badge bg-danger status-pill",label:""},ATTD_EARLY:{cls:"badge bg-warning text-dark status-pill",label:""},ATTD_LATE:{cls:"badge bg-warning text-dark status-pill",label:""},ATTD_EXCP:{cls:"badge bg-info status-pill",label:""}},He=_e[oe]||_e.ATTD_TBD;return s.jsx("span",{className:He.cls,children:He.label})})()}),s.jsx("td",{children:s.jsx("input",{className:"form-control form-control-sm",value:we,onChange:_e=>ee(se.enrollId,{attStatusCd:oe,attComment:_e.target.value})})})]},se.enrollId)})})]})})]}),s.jsxs("div",{className:"modal-footer border-top p-3 d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",className:"attendance-btn attendance-btn-default",onClick:Y,children:""}),s.jsx("button",{id:"btn-submit-changes",type:"button",className:"attendance-btn attendance-btn-save",onClick:me,children:""})]})]})]})})}),document.body)]})}const zc=t=>String(t).padStart(2,"0"),Vr=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?"-":`${e.getFullYear()}-${zc(e.getMonth()+1)}-${zc(e.getDate())} ${zc(e.getHours())}:${zc(e.getMinutes())}`},Nv=(t,e)=>{const a=Date.now(),i=t?new Date(t).getTime():void 0,o=e?new Date(e).getTime():void 0;if(typeof i=="number"&&i>a)return"upcoming";if(typeof i=="number"&&i<=a){if(typeof o!="number"||o>=a)return"ongoing";if(o<a)return"closed"}return typeof o=="number"&&o<a?"closed":"unknown"},OD=t=>{switch(t){case"ongoing":return s.jsx("span",{className:"badge text-bg-success",children:" "});case"upcoming":return s.jsx("span",{className:"badge text-bg-secondary",children:""});case"closed":return s.jsx("span",{className:"badge text-bg-dark",children:""});default:return s.jsx("span",{className:"badge text-bg-light text-muted",children:"-"})}},BD={OFF:"",ON:""};function zD({open:t,entries:e,total:a,error:i,saving:o,onChange:d,onSubmit:u,onClose:h}){return x.useEffect(()=>{if(!t)return;const m=document.body.style.overflow,p=b=>{b.key==="Escape"&&h()};return document.body.style.overflow="hidden",document.addEventListener("keydown",p),()=>{document.body.style.overflow=m,document.removeEventListener("keydown",p)}},[t,h]),t?Qc.createPortal(s.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"exam-weight-modal-title",style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.45)",zIndex:1050,display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"},children:s.jsx("div",{className:"card shadow-lg",style:{width:"min(720px, 100%)",maxHeight:"90vh",overflow:"hidden"},children:s.jsxs("form",{onSubmit:u,className:"d-flex flex-column",style:{height:"100%"},children:[s.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[s.jsx("h2",{className:"h5 mb-0",id:"exam-weight-modal-title",children:"   "}),s.jsx("button",{type:"button",className:"btn-close","aria-label":"",onClick:h,disabled:o})]}),s.jsxs("div",{className:"card-body p-0",style:{overflowY:"auto"},children:[i&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:i}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",style:{width:56},children:"#"}),s.jsx("th",{scope:"col",children:""}),s.jsx("th",{scope:"col",className:"text-center",style:{width:200},children:" "}),s.jsx("th",{scope:"col",className:"text-end",style:{width:160},children:" "})]})}),s.jsx("tbody",{children:e.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"  ."})}):e.map((m,p)=>{const b=m.startAt?Vr(m.startAt):"-",y=m.endAt?Vr(m.endAt):"-";return s.jsxs("tr",{children:[s.jsxs("td",{className:"text-muted",children:["#",p+1]}),s.jsxs("td",{children:[s.jsx("div",{className:"fw-semibold text-truncate",title:m.examName,children:m.examName}),s.jsx("div",{className:"text-muted small",children:m.examTypeLabel})]}),s.jsx("td",{className:"text-center text-muted small",dangerouslySetInnerHTML:{__html:`${b}<br>~ ${y}`}}),s.jsx("td",{className:"text-end",children:s.jsx("input",{type:"text",className:"form-control form-control-sm text-end",style:{width:"50%",marginLeft:"auto"},value:m.value,onChange:v=>d(m.id,v.target.value),disabled:o,required:!0})})]},m.id||p)})})]})})]}),s.jsxs("div",{className:"card-footer d-flex flex-column flex-sm-row align-items-sm-center justify-content-between gap-2",children:[s.jsxs("div",{className:"fw-semibold",children:["  :",s.jsx("span",{className:a===100?"text-success":"text-danger",children:a})]}),s.jsx("div",{className:"text-muted small flex-grow-1 text-sm-end",children:"   100  ."}),s.jsx("div",{className:"d-flex gap-2",children:s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o||e.length===0,style:{padding:"6px 12px"},children:o?" ...":""})})]})]})})}),document.body):null}function UD(){const{lectureId:t}=ht(),[e,a]=x.useState([]),[i,o]=x.useState(!0),[d,u]=x.useState(null),[h,m]=x.useState(null),[p,b]=x.useState(!1),[y,v]=x.useState([]),[N,D]=x.useState(""),[C,A]=x.useState(!1),S=x.useCallback(async()=>{o(!0),u(null);try{const T=`/classroom/api/v1/professor/exam/${encodeURIComponent(t)}`,U=await fetch(T,{headers:{Accept:"application/json"},credentials:"include"});if(!U.ok)throw new Error(`(${U.status})    .`);const V=await U.json();if(!Array.isArray(V))throw new Error("    .");a(V)}catch(T){u(T)}finally{o(!1)}},[t]);x.useEffect(()=>{S()},[S]);const M=x.useMemo(()=>{const T=[],U=[],V=[],q=[];return e.forEach(H=>{const E=Nv(H.startAt,H.endAt);E==="upcoming"?U.push(H):E==="ongoing"?V.push(H):E==="closed"&&q.push(H),T.push(H)}),{all:T,upcoming:U,ongoing:V,closed:q}},[e]),F=T=>{const U=T.lctExamId??T.id,V=T.examName||T.title||"( )",q=t&&U?`/classroom/professor/${encodeURIComponent(t)}/exam/${encodeURIComponent(U)}`:null,H=Nv(T.startAt,T.endAt),E=`${Vr(T.startAt)} ~ ${Vr(T.endAt)}`;return s.jsxs("tr",{children:[s.jsxs("td",{children:[s.jsx("div",{className:"fw-semibold",children:V}),s.jsxs("div",{className:"text-muted small",children:[" ",Vr(T.createAt||T.createdAt)]})]}),s.jsx("td",{children:BD[T.examType]||T.examTypeName||T.examType||""}),s.jsx("td",{className:"text-muted small",children:E}),s.jsx("td",{children:Number.isFinite(Number(T.weightValue))?`${T.weightValue}%`:"-"}),s.jsx("td",{children:OD(H)}),s.jsx("td",{className:"text-center",children:q?s.jsx(st,{className:"btn btn-sm btn-outline-primary",to:q,children:""}):"-"})]})};x.useEffect(()=>{p||v(e.map(T=>({id:T.lctExamId??T.id,examName:T.examName||T.title||"( )",examTypeLabel:T.examTypeName||T.examType||" ",startAt:T.startAt,endAt:T.endAt,value:T.weightValue!=null?String(T.weightValue):""})).filter(T=>T.id!=null))},[e,p]);const z=x.useCallback(()=>{i||e.length===0||(D(""),v(e.map(T=>({id:T.lctExamId??T.id,examName:T.examName||T.title||"( )",examTypeLabel:T.examTypeName||T.examType||" ",startAt:T.startAt,endAt:T.endAt,value:T.weightValue!=null?String(T.weightValue):""})).filter(T=>T.id!=null)),b(!0))},[e,i]),K=x.useCallback(()=>{C||(b(!1),D(""))},[C]),R=x.useCallback((T,U)=>{v(V=>V.map(q=>{if(q.id!==T)return q;const H=U.replace(/[^0-9]/g,"").slice(0,3);if(H==="")return{...q,value:""};const E=Math.min(Number.parseInt(H,10)||0,100);return{...q,value:String(E)}})),D("")},[]),w=x.useMemo(()=>y.reduce((T,U)=>T+(Number.parseInt(U.value,10)||0),0),[y]),_=x.useCallback(async T=>{if(T.preventDefault(),C)return;if(!y.length){D("   .");return}const U=[];let V=0;for(const q of y){const H=Number.parseInt(q.value,10);if(!q.id){D(" ID .");return}if(!Number.isInteger(H)||H<0||H>100){D(`${q.examName}   0  100  .`);return}V+=H,U.push({lctExamId:q.id,weightValue:H})}if(V!==100){D(`   ${V}. 100  .`);return}try{A(!0),D("");const q=`/classroom/api/v1/professor/exam/${encodeURIComponent(t)}/weightValue`,H=await fetch(q,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(U)});if(!H.ok)throw new Error(`(${H.status})    .`);m({type:"success",message:"  ."}),b(!1),await S()}catch(q){console.error("[Exam] Failed to update weight values:",q),D(q instanceof Error?q.message:"    .")}finally{A(!1)}},[y,C,t,S]);x.useEffect(()=>{if(!h)return;const T=window.setTimeout(()=>m(null),4e3);return()=>window.clearTimeout(T)},[h]);const B=i||e.length===0||C;return s.jsxs("section",{id:"exam-root",className:"container py-0","data-lecture-id":t,children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("h1",{className:"h3 mb-0",children:""}),s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx(st,{to:`/classroom/professor/${encodeURIComponent(t)}/exam/offline/new`,className:"custom-btn custom-btn-primary custom-btn-sm",children:" "}),s.jsx("button",{type:"button",className:"custom-btn custom-btn-outline-primary custom-btn-sm",onClick:z,disabled:B,children:" "})]})]}),i&&s.jsx("div",{className:"text-muted",children:" ..."}),d&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:String(d.message||d)}),h&&!d&&s.jsx("div",{className:`alert mt-3 ${h.type==="success"?"alert-success":"alert-danger"}`,role:"alert",children:h.message}),!i&&!d&&s.jsxs("div",{className:"card shadow-sm p-0",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"h5 mb-0",children:" "})}),s.jsxs("div",{className:"card-body p-3",children:[s.jsxs("ul",{className:"nav nav-pills mb-3",id:"exam-status-tabs",role:"tablist",children:[s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link active",id:"exam-tab-all-btn","data-bs-toggle":"tab","data-bs-target":"#exam-tab-all",type:"button",role:"tab",children:[" ",s.jsx("span",{className:"badge bg-primary ms-1",id:"exam-count-all",children:M.all.length})]})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link",id:"exam-tab-upcoming-btn","data-bs-toggle":"tab","data-bs-target":"#exam-tab-upcoming",type:"button",role:"tab",children:[" ",s.jsx("span",{className:"badge bg-info ms-1",id:"exam-count-upcoming",children:M.upcoming.length})]})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link",id:"exam-tab-ongoing-btn","data-bs-toggle":"tab","data-bs-target":"#exam-tab-ongoing",type:"button",role:"tab",children:[" ",s.jsx("span",{className:"badge bg-success text-white ms-1",id:"exam-count-ongoing",children:M.ongoing.length})]})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link",id:"exam-tab-closed-btn","data-bs-toggle":"tab","data-bs-target":"#exam-tab-closed",type:"button",role:"tab",children:[" ",s.jsx("span",{className:"badge bg-secondary ms-1",id:"exam-count-closed",children:M.closed.length})]})})]}),s.jsxs("div",{className:"tab-content border-top",id:"exam-status-content",children:[s.jsx("div",{className:"tab-pane fade show active",id:"exam-tab-all",role:"tabpanel","aria-labelledby":"exam-tab-all-btn",children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"30%"},children:""}),s.jsx("th",{style:{width:"10%"},children:""}),s.jsx("th",{style:{width:"20%"},children:" "}),s.jsx("th",{style:{width:"10%"},children:""}),s.jsx("th",{style:{width:"10%"},children:" "}),s.jsx("th",{style:{width:"10%"},className:"text-center",children:""})]})}),s.jsx("tbody",{children:M.all.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"  ."})}):M.all.map(T=>s.jsx(F,{...T},T.lctExamId||T.id))})]})})}),s.jsx("div",{className:"tab-pane fade",id:"exam-tab-upcoming",role:"tabpanel","aria-labelledby":"exam-tab-upcoming-btn",children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"30%"},children:""}),s.jsx("th",{style:{width:"10%"},children:""}),s.jsx("th",{style:{width:"20%"},children:" "}),s.jsx("th",{style:{width:"10%"},children:""}),s.jsx("th",{style:{width:"10%"},children:" "}),s.jsx("th",{style:{width:"10%"},className:"text-center",children:""})]})}),s.jsx("tbody",{children:M.upcoming.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"  ."})}):M.upcoming.map(T=>s.jsx(F,{...T},T.lctExamId||T.id))})]})})}),s.jsx("div",{className:"tab-pane fade",id:"exam-tab-ongoing",role:"tabpanel","aria-labelledby":"exam-tab-ongoing-btn",children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"30%"},children:""}),s.jsx("th",{style:{width:"10%"},children:""}),s.jsx("th",{style:{width:"20%"},children:" "}),s.jsx("th",{style:{width:"10%"},children:""}),s.jsx("th",{style:{width:"10%"},children:" "}),s.jsx("th",{style:{width:"10%"},className:"text-center",children:""})]})}),s.jsx("tbody",{children:M.ongoing.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"  ."})}):M.ongoing.map(T=>s.jsx(F,{...T},T.lctExamId||T.id))})]})})}),s.jsx("div",{className:"tab-pane fade",id:"exam-tab-closed",role:"tabpanel","aria-labelledby":"exam-tab-closed-btn",children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"30%"},children:""}),s.jsx("th",{style:{width:"10%"},children:""}),s.jsx("th",{style:{width:"20%"},children:" "}),s.jsx("th",{style:{width:"10%"},children:""}),s.jsx("th",{style:{width:"10%"},children:" "}),s.jsx("th",{style:{width:"10%"},className:"text-center",children:""})]})}),s.jsx("tbody",{children:M.closed.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"  ."})}):M.closed.map(T=>s.jsx(F,{...T},T.lctExamId||T.id))})]})})})]})]})]}),s.jsx(zD,{open:p,entries:y,total:w,error:N,saving:C,onChange:R,onSubmit:_,onClose:K})]})}const Pa=t=>String(t).padStart(2,"0"),Im=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?"-":`${e.getFullYear()}-${Pa(e.getMonth()+1)}-${Pa(e.getDate())} ${Pa(e.getHours())}:${Pa(e.getMinutes())}`},FD=t=>{if(!t)return"-";const e=new Date(t);if(Number.isNaN(e.getTime()))return"-";const a=`${e.getFullYear()}-${Pa(e.getMonth()+1)}-${Pa(e.getDate())}`,i=`${Pa(e.getHours())}:${Pa(e.getMinutes())}`;return{date:a,time:i}},HD=(t,e)=>{const a=Im(t),i=Im(e);return a==="-"&&i==="-"?"-":i==="-"?a:`${a} ~ ${i}`},PD=t=>t==="OFF"?"":t==="ON"?"":t||" ",VD=t=>{if(!t)return"( )";const e=t.lastName||"",a=t.firstName||"",i=`${e} ${a}`.trim();return i||t.name||t.userName||t.userId||"( )"};function YD(){const{lectureId:t,examId:e}=ht(),{students:a}=ds(),i=is(),[o,d]=x.useState(null),[u,h]=x.useState(!0),[m,p]=x.useState(null),[b,y]=x.useState(!1),[v,N]=x.useState(!1);x.useEffect(()=>{if(!t||!e){p(new Error(" ID   ID  .")),h(!1);return}let R=!0;return(async()=>{try{h(!0),p(null),y(!1);const w=`/classroom/api/v1/professor/exam/${encodeURIComponent(t)}/${encodeURIComponent(e)}`,_=await fetch(w,{headers:{Accept:"application/json"},credentials:"include"});if(_.status===404||_.status===500){if(!R)return;y(!0);return}if(!_.ok)throw new Error(`(${_.status})    .`);const B=await _.json();if(!R)return;d(B||null)}catch(w){if(!R)return;p(w)}finally{R&&h(!1)}})(),()=>{R=!1}},[t,e]);const D=x.useMemo(()=>{const R=new Map;if(Array.isArray(a))for(const w of a)w?.enrollId!==void 0&&w?.enrollId!==null&&R.set(String(w.enrollId),w);return R},[a]),C=x.useMemo(()=>Array.isArray(o?.submitList)?o.submitList:[],[o]),A=a===null,S=x.useMemo(()=>{let R=0;for(const w of C)w?.submit?.submitAt&&(R+=1);return{total:C.length||(Array.isArray(a)?a.length:0),submitted:R}},[C,a]),M=u||A,F=`/classroom/professor/${encodeURIComponent(t||"")}/exam`,z=async()=>{if(confirm("   ?"))try{N(!0);const R=`/classroom/api/v1/professor/exam/${encodeURIComponent(t)}/${encodeURIComponent(e)}`,w=await fetch(R,{method:"DELETE",credentials:"include"});if(!w.ok){const _=await w.text().catch(()=>"");throw new Error(_||`(${w.status})   .`)}alert(" ."),i(F)}catch(R){alert(R instanceof Error?R.message:"    .")}finally{N(!1)}},K=()=>u?s.jsxs("div",{className:"text-center text-muted py-4",children:[s.jsx("div",{className:"spinner-border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})}),s.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):o?s.jsxs("dl",{className:"row mb-0",children:[s.jsx("dd",{className:"col-sm-12 fs-3 fw-bold",children:o.examName||"-"}),s.jsx("dt",{className:"col-sm-2",children:""}),s.jsx("dd",{className:"col-sm-10",children:Im(o.createAt||o.createdAt)}),s.jsx("dt",{className:"col-sm-2",children:""}),s.jsx("dd",{className:"col-sm-10",children:PD(o.examType)}),s.jsx("dt",{className:"col-sm-2",children:" "}),s.jsx("dd",{className:"col-sm-10",children:o.examDesc||o.notice||"-"}),s.jsx("dt",{className:"col-sm-2",children:" "}),s.jsx("dd",{className:"col-sm-10",children:HD(o.startAt,o.endAt)}),s.jsx("dt",{className:"col-sm-2",children:" "}),s.jsxs("dd",{className:"col-sm-10",children:[typeof o.weightValue=="number"?o.weightValue:"-","%"]})]}):s.jsx("div",{className:"text-center py-4",children:"   ."});return b?s.jsx(Id,{message:"   ",resourceType:""}):s.jsxs("section",{id:"exam-detail-root",className:"container py-0","data-lecture-id":t,"data-exam-id":e,children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-end mb-3 gap-2",children:[s.jsx(st,{to:`/classroom/professor/${encodeURIComponent(t||"")}/exam/${encodeURIComponent(e||"")}/edit`,className:"btn btn-sm btn-outline-primary",children:""}),s.jsx("button",{onClick:z,disabled:v,className:"btn btn-sm btn-outline-danger",children:v?" ...":""}),s.jsx(st,{to:F,className:"btn btn-sm btn-outline-secondary",children:""})]}),m?s.jsx("div",{className:"alert alert-danger",role:"alert",children:m?.message||"     ."}):null,s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"mb-4",style:{width:"60%"},children:s.jsxs("div",{className:"card shadow p-0",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"h5 mb-0",children:" "})}),s.jsx("div",{className:"card-body p-3 overflow-auto",id:"exam-info-body",children:K()})]})}),s.jsx("div",{className:"mb-4",style:{width:"40%"},children:s.jsxs("div",{className:"card shadow p-0",style:{height:"580px"},children:[s.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[s.jsx("h2",{className:"h5 mb-0",children:"  "}),s.jsxs("small",{className:"text-muted",children:[": ",S.submitted," / ",S.total]})]}),s.jsx("div",{className:"card-body p-0 overflow-auto",style:{height:"calc(580px - 56px)"},children:M?s.jsxs("div",{className:"text-center text-muted py-4",children:[s.jsx("div",{className:"spinner-border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})}),s.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):C.length===0?s.jsx("div",{className:"text-center text-muted py-4",children:"   ."}):s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"text-center",style:{width:120},children:""}),s.jsx("th",{scope:"col",className:"text-center",children:""}),s.jsx("th",{scope:"col",className:"text-center",style:{width:80},children:""}),s.jsx("th",{scope:"col",className:"text-center",style:{width:140},children:""})]})}),s.jsx("tbody",{id:"student-results-body",children:C.map((R,w)=>{const _=D.get(String(R?.enrollId)),B=R?.submit?.modifiedScore??R?.submit?.autoScore??R?.submit?.score,T=B==null||B===""?"-":B,U=R?.submit?.submitAt?FD(R.submit.submitAt):null;return s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:_?.studentNo||"-"}),s.jsx("td",{className:"text-center",children:VD(_)}),s.jsx("td",{className:"text-center",children:T}),s.jsx("td",{className:"text-center",children:U?s.jsxs(s.Fragment,{children:[U.date,s.jsx("br",{}),U.time]}):""})]},R?.enrollId??R?.id??w)})})]})})})]})})]})]})}const Uc=t=>String(t).padStart(2,"0"),gi=t=>!(t instanceof Date)||Number.isNaN(t.getTime())?"":`${t.getFullYear()}-${Uc(t.getMonth()+1)}-${Uc(t.getDate())}T${Uc(t.getHours())}:${Uc(t.getMinutes())}`,wv=t=>t?t.length===16?`${t}:00`:t:"",qD=t=>{const e=t?.lastName??"",a=t?.firstName??"";return`${e} ${a}`.trim()||t?.name||t?.userName||t?.userId||"(  )"},GD=t=>{const e=[];return t?.univDeptName&&e.push(t.univDeptName),t?.gradeName&&e.push(t.gradeName),e.join("  ")};function XD(){const{lectureId:t}=ht(),{students:e,setStudents:a}=ds(),i=is(),[o,d]=x.useState(""),[u,h]=x.useState(""),[m,p]=x.useState(""),[b,y]=x.useState(""),[v,N]=x.useState(""),[D,C]=x.useState({}),[A,S]=x.useState([]),[M,F]=x.useState(""),[z,K]=x.useState(!1),[R,w]=x.useState(!0),[_,B]=x.useState(""),[T,U]=x.useState([]);x.useEffect(()=>{const P=new Date;P.setSeconds(0,0),p(gi(P));const G=new Date(P.getTime()+3600*1e3);y(gi(G))},[]),x.useEffect(()=>{if(Array.isArray(e)){U(e),w(!1),B("");return}if(e===null&&t){let P=!0;return w(!0),B(""),(async()=>{try{const G=await Sf(t);if(!P)return;U(G),a(G),B("")}catch(G){if(!P)return;U([]),B(G instanceof Error?G.message:"   .")}finally{P&&w(!1)}})(),()=>{P=!1}}t||w(!1)},[t,e,a]),x.useEffect(()=>{C(P=>{const G={};return T.forEach((Y,ee)=>{const ae=String(Y?.enrollId??Y?.enrollID??ee);G[ae]=Object.prototype.hasOwnProperty.call(P,ae)?P[ae]:""}),G}),S([])},[T]);const V=x.useMemo(()=>T.length,[T]),q=z||R||V===0,H=(P=!0)=>{d(""),h(""),N("");const G=new Date;G.setSeconds(0,0),p(gi(G));const Y=new Date(G.getTime()+3600*1e3);y(gi(Y)),C(()=>{const ee={};return T.forEach((ae,xe)=>{const me=String(ae?.enrollId??ae?.enrollID??xe);ee[me]=""}),ee}),S([]),P&&F("")},E=P=>{P?.preventDefault?.(),H(!0)},L=()=>{q||(C(P=>{const G={...P};return T.forEach((Y,ee)=>{const ae=String(Y?.enrollId??Y?.enrollID??ee);G[ae]=String(Math.floor(Math.random()*101))}),G}),S([]),F(""))},$=(P,G)=>{C(Y=>({...Y,[P]:G})),S(Y=>Y.includes(P)?Y.filter(ee=>ee!==P):Y)},O=()=>{F("")},Q=()=>{const P=o.trim();if(!P)throw new Error(" .");const G=u.trim();if(!G)throw new Error("   .");const Y=wv(m),ee=wv(b);if(!Y)throw new Error("   .");if(!ee)throw new Error("   .");const ae=new Date(Y),xe=new Date(ee);if(Number.isNaN(ae.getTime())||Number.isNaN(xe.getTime()))throw new Error("    .");if(ae>xe)throw new Error("      .");let me=null;if(v.trim().length>0){const te=Number.parseInt(v,10);if(!Number.isInteger(te)||te<0||te>100)throw new Error("  0  100   .");me=te}if(T.length===0)throw new Error("    .");const $e=[],se=T.map((te,oe)=>{const we=te?.enrollId??te?.enrollID;if(we==null)throw new Error(" (enrollId)     .");const _e=String(we??oe),He=(D[_e]??"").trim();if(!He)throw $e.push(_e),new Error("   .");const be=Number.parseInt(He,10);if(!Number.isInteger(be)||be<0||be>100)throw $e.push(_e),new Error(" 0  100   .");return{enrollId:we,score:be}});S($e);const ue={examName:P,examDesc:G,startAt:Y,endAt:ee,eachResultList:se};return me!==null&&(ue.weightValue=me),ue},Z=async P=>{if(P.preventDefault(),O(),S([]),!t){F(" ID  .");return}let G;try{G=Q()}catch(ee){const ae=ee instanceof Error?ee.message:" .";F(ae);return}const Y=`/classroom/api/v1/professor/exam/${encodeURIComponent(t)}/offline`;try{K(!0);const ee=await fetch(Y,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(G)});if(!ee.ok){const xe=await ee.text().catch(()=>"");throw new Error(xe||`(${ee.status})  .`)}await Ve.fire({title:" ",text:" .",icon:"success",confirmButtonText:""});const ae=ee.headers.get("location");i(ae||`/classroom/professor/${encodeURIComponent(t)}/exam`)}catch(ee){const ae=ee instanceof Error?ee.message:"    .";F(ae)}finally{K(!1)}},k=x.useMemo(()=>R?s.jsxs("div",{className:"text-center text-muted py-4",children:[s.jsx("div",{className:"spinner-border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})}),s.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):_?s.jsx("div",{className:"alert alert-danger mb-0",role:"alert",children:_}):V===0?s.jsx("div",{className:"text-center text-muted py-4",children:"   ."}):null,[V,_,R]),W=()=>{d("2 "),N("20"),h(`  2 .

 : React Hooks, Context API, 
:  ( )
: 100 `);const P=new Date("2025-11-04T15:00:00"),G=new Date("2025-11-04T17:00:00");p(gi(P)),y(gi(G)),F("")};return s.jsxs("section",{id:"exam-offline-root",className:"container py-4",children:[M&&s.jsx("div",{id:"alert-box",className:"alert alert-danger",role:"alert",children:M}),s.jsxs("form",{id:"exam-offline-form",className:"vstack gap-4",onSubmit:Z,onReset:E,children:[s.jsxs("div",{className:"card shadow-sm p-0",children:[s.jsxs("div",{className:"card-header d-flex justify-content-between align-items-center",children:[s.jsx("strong",{children:" "}),s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:W,disabled:z,children:""})]}),s.jsxs("div",{className:"card-body p-3 vstack gap-3",children:[s.jsxs("div",{className:"row g-3",children:[s.jsxs("div",{className:"col-12 col-lg-3",children:[s.jsxs("label",{htmlFor:"exam-name",className:"form-label d-block text-start",children:[" ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx("input",{id:"exam-name",type:"text",className:"form-control",required:!0,maxLength:100,disabled:z,value:o,onChange:P=>d(P.target.value),placeholder:": 2 "})]}),s.jsxs("div",{className:"col-12 col-lg-3",children:[s.jsxs("label",{htmlFor:"exam-weight",className:"form-label d-block text-start",children:[" (%) ",s.jsx("span",{className:"text-muted",children:"()"})]}),s.jsx("input",{id:"exam-weight",type:"number",className:"form-control",min:0,max:100,step:1,disabled:z,value:v,onChange:P=>N(P.target.value),placeholder:"0~100"})]}),s.jsxs("div",{className:"col-12 col-lg-3",children:[s.jsxs("label",{htmlFor:"exam-start",className:"form-label d-block text-start",children:["   ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx("input",{id:"exam-start",type:"datetime-local",className:"form-control",required:!0,disabled:z,value:m,onChange:P=>p(P.target.value)})]}),s.jsxs("div",{className:"col-12 col-lg-3",children:[s.jsxs("label",{htmlFor:"exam-end",className:"form-label d-block text-start",children:["   ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx("input",{id:"exam-end",type:"datetime-local",className:"form-control",required:!0,disabled:z,value:b,onChange:P=>y(P.target.value)})]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"exam-desc",className:"form-label d-block text-start",children:["  ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx("textarea",{id:"exam-desc",className:"form-control",rows:5,required:!0,disabled:z,value:u,onChange:P=>h(P.target.value),placeholder:" , ,    ."})]})]})]}),s.jsxs("div",{className:"card shadow-sm p-0",children:[s.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between flex-wrap gap-2",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"  "}),s.jsx("small",{className:"text-muted ms-2",children:"* 0~100  "})]}),s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:L,disabled:q,children:"  "})]}),s.jsx("div",{className:"card-body p-3",children:k||s.jsx("div",{className:"row row-cols-1 row-cols-md-3 row-cols-lg-5 g-3",children:T.map((P,G)=>{const Y=String(P?.enrollId??P?.enrollID??G),ee=A.includes(Y),ae=GD(P);return s.jsx("div",{className:"col",children:s.jsx("div",{className:"card h-100 shadow-sm",children:s.jsxs("div",{className:"card-body p-2",children:[s.jsxs("div",{className:"fw-semibold",children:["#",G+1," ",qD(P)]}),s.jsxs("div",{className:"text-muted small",children:["(",P?.studentNo||" ",")"]}),ae&&s.jsx("div",{className:"text-muted small",children:ae}),s.jsxs("div",{className:"mt-2 d-flex align-items-center gap-2",children:[s.jsx("label",{htmlFor:`score-${Y}`,className:"form-label mb-0 small fw-bold",children:":"}),s.jsx("input",{id:`score-${Y}`,type:"number",min:0,max:100,className:`form-control form-control-sm${ee?" is-invalid":""}`,style:{width:"80px",padding:"6px"},disabled:z,value:D[Y]??"",onChange:xe=>$(Y,xe.target.value)})]}),ee&&s.jsx("div",{className:"invalid-feedback d-block small mt-1",children:"0-100  "})]})})},Y)})})})]}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"reset",className:"custom-btn custom-btn-outline-secondary custom-btn-md",disabled:z,children:""}),s.jsx("button",{type:"submit",className:"custom-btn custom-btn-primary custom-btn-md",disabled:z||V===0,children:z?" ...":" "})]})]})]})}const Fc=t=>String(t).padStart(2,"0"),Sv=t=>!(t instanceof Date)||Number.isNaN(t.getTime())?"":`${t.getFullYear()}-${Fc(t.getMonth()+1)}-${Fc(t.getDate())}T${Fc(t.getHours())}:${Fc(t.getMinutes())}`,Cv=t=>t?t.length===16?`${t}:00`:t:"";function WD(){const{lectureId:t,examId:e}=ht(),a=is(),[i,o]=x.useState(""),[d,u]=x.useState(""),[h,m]=x.useState(""),[p,b]=x.useState(""),[y,v]=x.useState(""),[N,D]=x.useState(""),[C,A]=x.useState(""),[S,M]=x.useState(!1),[F,z]=x.useState(!0);x.useEffect(()=>{if(!t||!e){A(" ID   ID  ."),z(!1);return}let B=!0;return(async()=>{try{z(!0),A("");const T=`/classroom/api/v1/professor/exam/${encodeURIComponent(t)}/${encodeURIComponent(e)}`,U=await fetch(T,{headers:{Accept:"application/json"},credentials:"include"});if(!U.ok)throw new Error(`(${U.status})    .`);const V=await U.json();if(!B)return;if(o(V.examName||""),u(V.examDesc||V.notice||""),v(typeof V.weightValue=="number"?String(V.weightValue):""),V.startAt){const q=new Date(V.startAt);Number.isNaN(q.getTime())||m(Sv(q))}if(V.endAt){const q=new Date(V.endAt);Number.isNaN(q.getTime())||b(Sv(q))}}catch(T){if(!B)return;A(T instanceof Error?T.message:"     .")}finally{B&&z(!1)}})(),()=>{B=!1}},[t,e]);const K=()=>{D(""),A("")},R=()=>{const B=i.trim();if(!B)throw new Error(" .");const T=d.trim();if(!T)throw new Error("  .");const U=Cv(h),V=Cv(p);if(!U)throw new Error("   .");if(!V)throw new Error("   .");const q=new Date(U),H=new Date(V);if(Number.isNaN(q.getTime())||Number.isNaN(H.getTime()))throw new Error("    .");if(q>H)throw new Error("      .");let E=null;if(y.trim().length>0){const $=Number.parseInt(y,10);if(!Number.isInteger($)||$<0||$>100)throw new Error("  0  100   .");E=$}const L={examName:B,examDesc:T,startAt:U,endAt:V};return E!==null&&(L.weightValue=E),L},w=async B=>{if(B.preventDefault(),K(),!t||!e){A(" ID   ID  .");return}let T;try{T=R()}catch(V){const q=V instanceof Error?V.message:" .";A(q);return}const U=`/classroom/api/v1/professor/exam/${encodeURIComponent(t)}/${encodeURIComponent(e)}`;try{M(!0);const V=await fetch(U,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(T)});if(!V.ok){const q=await V.text().catch(()=>"");throw new Error(q||`(${V.status})  .`)}D(" ."),setTimeout(()=>{a(`/classroom/professor/${encodeURIComponent(t)}/exam/${encodeURIComponent(e)}`)},1e3)}catch(V){const q=V instanceof Error?V.message:"    .";A(q)}finally{M(!1)}},_=`/classroom/professor/${encodeURIComponent(t||"")}/exam/${encodeURIComponent(e||"")}`;return s.jsxs("section",{id:"exam-edit-root",className:"container py-4",children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("nav",{"aria-label":"breadcrumb",children:s.jsxs("ol",{className:"breadcrumb mb-0",children:[s.jsx("li",{className:"breadcrumb-item",children:s.jsx(st,{to:`/classroom/professor/${encodeURIComponent(t||"")}/exam`,children:""})}),s.jsx("li",{className:"breadcrumb-item",children:s.jsx(st,{to:_,children:" "})}),s.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:""})]})}),s.jsx("div",{className:"d-flex gap-2",children:s.jsx(st,{className:"btn btn-sm btn-outline-secondary",to:_,children:""})})]}),C&&s.jsx("div",{id:"alert-box",className:"alert alert-danger",role:"alert",children:C}),N&&s.jsx("div",{id:"toast-box",className:"alert alert-success",role:"alert",children:N}),F?s.jsxs("div",{className:"text-center text-muted py-4",children:[s.jsx("div",{className:"spinner-border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})}),s.jsx("p",{className:"mt-2 mb-0",children:"   ..."})]}):s.jsxs("form",{id:"exam-edit-form",className:"vstack gap-4",onSubmit:w,children:[s.jsxs("div",{className:"card shadow-sm p-0",children:[s.jsx("div",{className:"card-header",children:s.jsx("strong",{children:" "})}),s.jsxs("div",{className:"card-body p-3 vstack gap-3",children:[s.jsxs("div",{className:"row g-3",children:[s.jsxs("div",{className:"col-12 col-lg-6",children:[s.jsxs("label",{htmlFor:"exam-name",className:"form-label d-block text-start",children:[" ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx("input",{id:"exam-name",type:"text",className:"form-control",required:!0,maxLength:100,disabled:S,value:i,onChange:B=>o(B.target.value),placeholder:": 2 "})]}),s.jsxs("div",{className:"col-12 col-lg-6",children:[s.jsxs("label",{htmlFor:"exam-weight",className:"form-label d-block text-start",children:[" (%) ",s.jsx("span",{className:"text-muted",children:"()"})]}),s.jsx("input",{id:"exam-weight",type:"number",className:"form-control",min:0,max:100,step:1,disabled:S,value:y,onChange:B=>v(B.target.value),placeholder:"0~100  "}),s.jsx("div",{className:"form-text",children:" 100%   ."})]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"exam-desc",className:"form-label d-block text-start",children:["  ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx("textarea",{id:"exam-desc",className:"form-control",rows:3,required:!0,disabled:S,value:d,onChange:B=>u(B.target.value),placeholder:" , ,    ."})]}),s.jsxs("div",{className:"row g-3",children:[s.jsxs("div",{className:"col-12 col-md-6",children:[s.jsxs("label",{htmlFor:"exam-start",className:"form-label d-block text-start",children:["   ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx("input",{id:"exam-start",type:"datetime-local",className:"form-control",required:!0,disabled:S,value:h,onChange:B=>m(B.target.value)})]}),s.jsxs("div",{className:"col-12 col-md-6",children:[s.jsxs("label",{htmlFor:"exam-end",className:"form-label d-block text-start",children:["   ",s.jsx("span",{className:"text-danger",children:"*"})]}),s.jsx("input",{id:"exam-end",type:"datetime-local",className:"form-control",required:!0,disabled:S,value:p,onChange:B=>b(B.target.value)}),s.jsx("div",{className:"form-text",children:"     ."})]})]})]})]}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx(st,{to:_,className:"btn btn-outline-secondary",disabled:S,children:""}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:S,children:S?" ...":" "})]})]})]})}const Av=t=>{if(!t)return"-";const e=new Date(t);if(Number.isNaN(e.getTime()))return"-";const a=i=>String(i).padStart(2,"0");return`${e.getFullYear()}-${a(e.getMonth()+1)}-${a(e.getDate())} ${a(e.getHours())}:${a(e.getMinutes())}`},Ev=t=>{if(!t)return"-";const e=new Date(t);if(Number.isNaN(e.getTime()))return"-";const a=i=>String(i).padStart(2,"0");return`${e.getFullYear()}-${a(e.getMonth()+1)}-${a(e.getDate())}`},Ys=(t,e)=>{const a=Date.now(),i=t?new Date(t).getTime():null,o=e?new Date(e).getTime():null;if(i&&i>a)return"upcoming";if(i&&i<=a){if(!o||o>=a)return"ongoing";if(o<a)return"closed"}return"ongoing"};function KD({open:t,entries:e,total:a,error:i,saving:o,onChange:d,onSubmit:u,onClose:h}){return x.useEffect(()=>{if(!t)return;const m=document.body.style.overflow,p=b=>{b.key==="Escape"&&h()};return document.body.style.overflow="hidden",document.addEventListener("keydown",p),()=>{document.body.style.overflow=m,document.removeEventListener("keydown",p)}},[t,h]),t?Qc.createPortal(s.jsx("div",{role:"dialog","aria-modal":"true","aria-labelledby":"task-weight-modal-title",style:{position:"fixed",inset:0,backgroundColor:"rgba(0, 0, 0, 0.45)",zIndex:1050,display:"flex",alignItems:"center",justifyContent:"center",padding:"1.5rem"},children:s.jsx("div",{className:"card shadow-lg",style:{width:"min(800px, 100%)",maxHeight:"90vh"},children:s.jsxs("form",{onSubmit:u,style:{display:"flex",flexDirection:"column",maxHeight:"90vh"},children:[s.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[s.jsx("h2",{className:"h5 mb-0",id:"task-weight-modal-title",children:"   "}),s.jsx("button",{type:"button",className:"btn-close","aria-label":"",onClick:h,disabled:o})]}),i&&s.jsx("div",{className:"alert alert-danger m-3 mb-0",role:"alert",children:i}),s.jsx("div",{className:"card-body p-0",style:{overflowY:"auto",flex:"1 1 auto"},children:s.jsxs("table",{className:"table table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#f8f9fa"},children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",style:{width:56},children:"#"}),s.jsx("th",{scope:"col",children:""}),s.jsx("th",{scope:"col",className:"text-center",style:{width:200},children:" "}),s.jsx("th",{scope:"col",className:"text-end",style:{width:160},children:" "})]})}),s.jsx("tbody",{children:e.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"  ."})}):e.map((m,p)=>{const b=m.startAt?Av(m.startAt):"-",y=m.endAt?Av(m.endAt):"-";return s.jsxs("tr",{children:[s.jsxs("td",{className:"text-muted",children:["#",p+1]}),s.jsxs("td",{children:[s.jsx("div",{className:"fw-semibold text-truncate",title:m.taskName,children:m.taskName}),s.jsx("div",{className:"text-muted small",children:m.taskType==="INDIV"?"":""})]}),s.jsx("td",{className:"text-center text-muted small",dangerouslySetInnerHTML:{__html:`${b}<br>~ ${y}`}}),s.jsx("td",{className:"text-end",children:s.jsx("input",{type:"text",className:"form-control form-control-sm text-end",style:{width:"50%",marginLeft:"auto"},value:m.value??"",onChange:v=>d(m.taskId,v.target.value),disabled:o,placeholder:"0"})})]},m.taskId||p)})})]})}),s.jsxs("div",{className:"card-footer d-flex flex-column flex-sm-row align-items-sm-center justify-content-between gap-2",children:[s.jsxs("div",{className:"fw-semibold",children:["  :",s.jsx("span",{className:a===100?"text-success":"text-danger",children:a})]}),s.jsx("div",{className:"text-muted small flex-grow-1 text-sm-end",children:"   100  ."}),s.jsx("div",{className:"d-flex gap-2",children:s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:o||e.length===0,style:{padding:"6px 12px"},children:o?" ...":""})})]})]})})}),document.body):null}const Ma=({t,lectureId:e,kind:a,weightValue:i})=>{const o=t.title||t.taskName||t.indivtaskName||t.grouptaskName||"( )",d=Ev(t.startAt),u=Ev(t.endAt),h=t.indivtaskId||t.id||t.taskId,m=t.grouptaskId||t.id||t.taskId,p=a==="indiv"?`/classroom/professor/${encodeURIComponent(e)}/task/indiv/${encodeURIComponent(h||"")}`:`/classroom/professor/${encodeURIComponent(e)}/task/group/${encodeURIComponent(m||"")}`,b=!!(t.attachFileId||t.fileId||Array.isArray(t.attachFileList)&&t.attachFileList.length>0),y=Ys(t.startAt,t.endAt),v=y==="upcoming"?s.jsx("span",{className:"badge bg-info",children:""}):y==="ongoing"?s.jsx("span",{className:"badge bg-success text-white",children:""}):s.jsx("span",{className:"badge bg-secondary",children:""}),N=i!=null&&i!==0?s.jsx("span",{className:"badge bg-primary",children:i}):s.jsx("span",{className:"badge bg-secondary",children:"X"});return s.jsxs("tr",{children:[s.jsx("td",{style:{width:"250px",overflow:"hidden",textOverflow:"ellipsis"},children:s.jsx(st,{to:p,className:"text-reset text-decoration-none",children:s.jsxs("div",{className:"d-flex align-items-center gap-1",children:[b&&s.jsx("i",{className:"bx bx-paperclip text-muted"}),s.jsx("div",{className:"fw-semibold text-primary",title:o,children:o})]})})}),s.jsx("td",{className:"text-center",style:{width:"80px"},children:v}),s.jsx("td",{className:"text-center",style:{width:"100px"},children:N}),s.jsxs("td",{className:"text-muted small text-center",style:{width:"120px",lineHeight:"1.4"},children:[s.jsx("div",{children:d}),s.jsxs("div",{children:["~ ",u]})]})]})};function QD(){const{lectureId:t}=ht(),[e,a]=x.useState([]),[i,o]=x.useState([]),[d,u]=x.useState({}),[h,m]=x.useState(!0),[p,b]=x.useState(null),[y,v]=x.useState(!1),[N,D]=x.useState([]),[C,A]=x.useState(""),[S,M]=x.useState(!1);x.useEffect(()=>{let H=!0;return(async()=>{try{m(!0),b(null);const E=`/classroom/api/v1/professor/task/${encodeURIComponent(t)}`,[L,$,O]=await Promise.all([fetch(`${E}/indiv`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${E}/group`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${E}/weight`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!L.ok||!$.ok)throw new Error("   .");const[Q,Z,k]=await Promise.all([L.json(),$.json(),O.ok?O.json():[]]);if(!H)return;a(Array.isArray(Q)?Q:[]),o(Array.isArray(Z)?Z:[]);const W={};Array.isArray(k)&&k.forEach(P=>{P.taskId&&(W[P.taskId]=P.weightValue)}),u(W)}catch(E){if(!H)return;b(E)}finally{H&&m(!1)}})(),()=>{H=!1}},[t]);const F=x.useMemo(()=>e.filter(H=>Ys(H.startAt,H.endAt)==="upcoming").length,[e]),z=x.useMemo(()=>e.filter(H=>Ys(H.startAt,H.endAt)==="ongoing").length,[e]),K=x.useMemo(()=>e.filter(H=>Ys(H.startAt,H.endAt)==="closed").length,[e]),R=x.useMemo(()=>i.filter(H=>Ys(H.startAt,H.endAt)==="upcoming").length,[i]),w=x.useMemo(()=>i.filter(H=>Ys(H.startAt,H.endAt)==="ongoing").length,[i]),_=x.useMemo(()=>i.filter(H=>Ys(H.startAt,H.endAt)==="closed").length,[i]),B=x.useMemo(()=>N.reduce((H,E)=>H+(parseInt(E.value)||0),0),[N]),T=x.useCallback(()=>{A("");const H=[];e.forEach(E=>{const L=E.indivtaskId||E.id||E.taskId,$=E.indivtaskName||E.taskName||"( )";H.push({taskType:"INDIV",taskId:L,taskName:$,startAt:E.startAt,endAt:E.endAt,value:d[L]??null})}),i.forEach(E=>{const L=E.grouptaskId||E.id||E.taskId,$=E.grouptaskName||E.taskName||"( )";H.push({taskType:"GROUP",taskId:L,taskName:$,startAt:E.startAt,endAt:E.endAt,value:d[L]??null})}),D(H),v(!0)},[e,i,d]),U=x.useCallback(()=>{v(!1),A("")},[]),V=x.useCallback((H,E)=>{D(L=>L.map($=>$.taskId===H?{...$,value:E===""?null:parseInt(E)||0}:$))},[]),q=x.useCallback(async H=>{H.preventDefault(),A(""),M(!0);try{for(const Z of N)if(Z.value!==null&&Z.value!==""){const k=Number(Z.value);if(isNaN(k)||!Number.isInteger(k)||k<0||k>100){A("  0~100   ."),M(!1);return}}const E=N.map(Z=>({taskType:Z.taskType,taskId:Z.taskId,weightValue:Z.value}));console.log("Submitting task weights:",E);const L=await fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(t)}/weight`,{method:"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(E)});if(!L.ok)throw new Error(`  (HTTP ${L.status})`);const $=await fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(t)}/weight`,{headers:{Accept:"application/json"},credentials:"include"}),O=$.ok?await $.json():[],Q={};Array.isArray(O)&&O.forEach(Z=>{Z.taskId&&(Q[Z.taskId]=Z.weightValue)}),u(Q),v(!1)}catch(E){A(E.message||"   .")}finally{M(!1)}},[N,t]);return s.jsxs("section",{id:"task-root",className:"container py-0","data-lecture-id":t,children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("h1",{className:"h3 mb-0",children:""}),s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsxs("div",{className:"btn-group",children:[s.jsx("button",{type:"button",className:"btn btn-sm btn-primary dropdown-toggle py-1 px-2","data-bs-toggle":"dropdown","aria-expanded":"false",children:" "}),s.jsxs("ul",{className:"dropdown-menu",children:[s.jsx("li",{children:s.jsx(st,{className:"dropdown-item",to:`/classroom/professor/${encodeURIComponent(t)}/task/indiv/new`,children:" "})}),s.jsx("li",{children:s.jsx(st,{className:"dropdown-item",to:`/classroom/professor/${encodeURIComponent(t)}/task/group/new`,children:" "})})]})]}),s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:T,disabled:e.length===0&&i.length===0,children:" "})]})]}),h&&s.jsx("div",{className:"text-muted",children:" "}),p&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:String(p.message||p)}),!h&&!p&&s.jsxs("div",{className:"row g-4 align-items-start",children:[s.jsx("div",{className:"col-12 col-xl-6",children:s.jsxs("div",{className:"card shadow-sm",children:[s.jsx("div",{className:"card-header d-flex align-items-center justify-content-between",children:s.jsx("h2",{className:"h5 mb-0",children:" "})}),s.jsxs("div",{className:"card-body",children:[s.jsxs("ul",{className:"nav nav-pills mb-3",id:"indiv-status-tabs",role:"tablist",children:[s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link active",id:"indiv-all-tab","data-bs-toggle":"tab","data-bs-target":"#indiv-all",type:"button",role:"tab","aria-selected":"true",children:[" ",s.jsx("span",{className:"badge rounded-pill bg-primary ms-1",id:"indiv-count-all",style:{minWidth:"30px"},children:e.length})]})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link",id:"indiv-upcoming-tab","data-bs-toggle":"tab","data-bs-target":"#indiv-upcoming",type:"button",role:"tab",children:[" ",s.jsx("span",{className:"badge rounded-pill bg-info ms-1",id:"indiv-count-upcoming",style:{minWidth:"30px"},children:F})]})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link",id:"indiv-ongoing-tab","data-bs-toggle":"tab","data-bs-target":"#indiv-ongoing",type:"button",role:"tab",children:[" ",s.jsx("span",{className:"badge rounded-pill bg-success text-white ms-1",id:"indiv-count-ongoing",style:{minWidth:"30px"},children:z})]})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link",id:"indiv-closed-tab","data-bs-toggle":"tab","data-bs-target":"#indiv-closed",type:"button",role:"tab",children:[" ",s.jsx("span",{className:"badge rounded-pill bg-secondary ms-1",id:"indiv-count-closed",style:{minWidth:"30px"},children:K})]})})]}),s.jsxs("div",{className:"tab-content",id:"indiv-status-content",children:[s.jsxs("div",{id:"indiv-all",className:"tab-pane fade show active",role:"tabpanel","aria-labelledby":"indiv-all-tab",children:[s.jsx("div",{id:"indiv-list-all",className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:""}),s.jsx("th",{className:"text-center",style:{width:80},children:""}),s.jsx("th",{className:"text-center",style:{width:100},children:""}),s.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),s.jsx("tbody",{children:e.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"  ."})}):e.map((H,E)=>{const L=H.indivtaskId||H.id||H.taskId;return s.jsx(Ma,{t:H,lectureId:t,kind:"indiv",weightValue:d[L]},L||E)})})]})}),s.jsx("nav",{className:"mt-3","aria-label":"    ",children:s.jsx("ul",{id:"indiv-pagination-all",className:"pagination pagination-sm mb-0"})})]}),s.jsxs("div",{id:"indiv-upcoming",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"indiv-upcoming-tab",children:[s.jsx("div",{id:"indiv-list-upcoming",className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:""}),s.jsx("th",{className:"text-center",style:{width:80},children:""}),s.jsx("th",{className:"text-center",style:{width:100},children:""}),s.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),s.jsx("tbody",{children:(()=>{const H=e.filter(E=>Ys(E.startAt,E.endAt)==="upcoming");return H.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"   ."})}):H.map((E,L)=>{const $=E.indivtaskId||E.id||E.taskId;return s.jsx(Ma,{t:E,lectureId:t,kind:"indiv",weightValue:d[$]},$||L)})})()})]})}),s.jsx("nav",{className:"mt-3","aria-label":"    ",children:s.jsx("ul",{id:"indiv-pagination-upcoming",className:"pagination pagination-sm mb-0"})})]}),s.jsxs("div",{id:"indiv-ongoing",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"indiv-ongoing-tab",children:[s.jsx("div",{id:"indiv-list-ongoing",className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:""}),s.jsx("th",{className:"text-center",style:{width:80},children:""}),s.jsx("th",{className:"text-center",style:{width:100},children:""}),s.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),s.jsx("tbody",{children:(()=>{const H=e.filter(E=>Ys(E.startAt,E.endAt)==="ongoing");return H.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"   ."})}):H.map((E,L)=>{const $=E.indivtaskId||E.id||E.taskId;return s.jsx(Ma,{t:E,lectureId:t,kind:"indiv",weightValue:d[$]},$||L)})})()})]})}),s.jsx("nav",{className:"mt-3","aria-label":"    ",children:s.jsx("ul",{id:"indiv-pagination-ongoing",className:"pagination pagination-sm mb-0"})})]}),s.jsxs("div",{id:"indiv-closed",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"indiv-closed-tab",children:[s.jsx("div",{id:"indiv-list-closed",className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:""}),s.jsx("th",{className:"text-center",style:{width:80},children:""}),s.jsx("th",{className:"text-center",style:{width:100},children:""}),s.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),s.jsx("tbody",{children:(()=>{const H=e.filter(E=>Ys(E.startAt,E.endAt)==="closed");return H.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"   ."})}):H.map((E,L)=>{const $=E.indivtaskId||E.id||E.taskId;return s.jsx(Ma,{t:E,lectureId:t,kind:"indiv",weightValue:d[$]},$||L)})})()})]})}),s.jsx("nav",{className:"mt-3","aria-label":"    ",children:s.jsx("ul",{id:"indiv-pagination-closed",className:"pagination pagination-sm mb-0"})})]})]})]})]})}),s.jsx("div",{className:"col-12 col-xl-6",children:s.jsxs("div",{className:"card shadow-sm",children:[s.jsx("div",{className:"card-header d-flex align-items-center justify-content-between",children:s.jsx("h2",{className:"h5 mb-0",children:" "})}),s.jsxs("div",{className:"card-body",children:[s.jsxs("ul",{className:"nav nav-pills mb-3",id:"group-status-tabs",role:"tablist",children:[s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link active",id:"group-all-tab","data-bs-toggle":"tab","data-bs-target":"#group-all",type:"button",role:"tab","aria-selected":"true",children:[" ",s.jsx("span",{className:"badge rounded-pill bg-primary ms-1",id:"group-count-all",style:{minWidth:"30px"},children:i.length})]})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link",id:"group-upcoming-tab","data-bs-toggle":"tab","data-bs-target":"#group-upcoming",type:"button",role:"tab",children:[" ",s.jsx("span",{className:"badge rounded-pill bg-info ms-1",id:"group-count-upcoming",style:{minWidth:"30px"},children:R})]})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link",id:"group-ongoing-tab","data-bs-toggle":"tab","data-bs-target":"#group-ongoing",type:"button",role:"tab",children:[" ",s.jsx("span",{className:"badge rounded-pill bg-success text-white ms-1",id:"group-count-ongoing",style:{minWidth:"30px"},children:w})]})}),s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:"nav-link",id:"group-closed-tab","data-bs-toggle":"tab","data-bs-target":"#group-closed",type:"button",role:"tab",children:[" ",s.jsx("span",{className:"badge rounded-pill bg-secondary ms-1",id:"group-count-closed",style:{minWidth:"30px"},children:_})]})})]}),s.jsxs("div",{className:"tab-content",id:"group-status-content",children:[s.jsxs("div",{id:"group-all",className:"tab-pane fade show active",role:"tabpanel","aria-labelledby":"group-all-tab",children:[s.jsx("div",{id:"group-list-all",className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:""}),s.jsx("th",{className:"text-center",style:{width:80},children:""}),s.jsx("th",{className:"text-center",style:{width:100},children:""}),s.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),s.jsx("tbody",{children:i.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"  ."})}):i.map((H,E)=>{const L=H.grouptaskId||H.id||H.taskId;return s.jsx(Ma,{t:H,lectureId:t,kind:"group",weightValue:d[L]},L||E)})})]})}),s.jsx("nav",{className:"mt-3","aria-label":"    ",children:s.jsx("ul",{id:"group-pagination-all",className:"pagination pagination-sm mb-0"})})]}),s.jsxs("div",{id:"group-upcoming",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"group-upcoming-tab",children:[s.jsx("div",{id:"group-list-upcoming",className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:""}),s.jsx("th",{className:"text-center",style:{width:80},children:""}),s.jsx("th",{className:"text-center",style:{width:100},children:""}),s.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),s.jsx("tbody",{children:(()=>{const H=i.filter(E=>Ys(E.startAt,E.endAt)==="upcoming");return H.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"   ."})}):H.map((E,L)=>{const $=E.grouptaskId||E.id||E.taskId;return s.jsx(Ma,{t:E,lectureId:t,kind:"group",weightValue:d[$]},$||L)})})()})]})}),s.jsx("nav",{className:"mt-3","aria-label":"    ",children:s.jsx("ul",{id:"group-pagination-upcoming",className:"pagination pagination-sm mb-0"})})]}),s.jsxs("div",{id:"group-ongoing",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"group-ongoing-tab",children:[s.jsx("div",{id:"group-list-ongoing",className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:""}),s.jsx("th",{className:"text-center",style:{width:80},children:""}),s.jsx("th",{className:"text-center",style:{width:100},children:""}),s.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),s.jsx("tbody",{children:(()=>{const H=i.filter(E=>Ys(E.startAt,E.endAt)==="ongoing");return H.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"   ."})}):H.map((E,L)=>{const $=E.grouptaskId||E.id||E.taskId;return s.jsx(Ma,{t:E,lectureId:t,kind:"group",weightValue:d[$]},$||L)})})()})]})}),s.jsx("nav",{className:"mt-3","aria-label":"    ",children:s.jsx("ul",{id:"group-pagination-ongoing",className:"pagination pagination-sm mb-0"})})]}),s.jsxs("div",{id:"group-closed",className:"tab-pane fade",role:"tabpanel","aria-labelledby":"group-closed-tab",children:[s.jsx("div",{id:"group-list-closed",className:"table-responsive",children:s.jsxs("table",{className:"table table-hover table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:""}),s.jsx("th",{className:"text-center",style:{width:80},children:""}),s.jsx("th",{className:"text-center",style:{width:100},children:""}),s.jsx("th",{className:"text-center",style:{width:120},children:" "})]})}),s.jsx("tbody",{children:(()=>{const H=i.filter(E=>Ys(E.startAt,E.endAt)==="closed");return H.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center text-muted py-4",children:"   ."})}):H.map((E,L)=>{const $=E.grouptaskId||E.id||E.taskId;return s.jsx(Ma,{t:E,lectureId:t,kind:"group",weightValue:d[$]},$||L)})})()})]})}),s.jsx("nav",{className:"mt-3","aria-label":"    ",children:s.jsx("ul",{id:"group-pagination-closed",className:"pagination pagination-sm mb-0"})})]})]})]})]})})]}),s.jsx("div",{id:"task-notice-box",className:"alert alert-danger mt-3 d-none",role:"alert"}),s.jsx(KD,{open:y,entries:N,total:B,error:C,saving:S,onChange:V,onSubmit:q,onClose:U})]})}const vm=t=>String(t).padStart(2,"0"),Hc=t=>{if(!t)return"-";const e=new Date(t);if(Number.isNaN(e.getTime()))return t;let a=e.getHours();const i=a>=12?"PM":"AM";return a=a%12,a=a||12,`${e.getFullYear()}-${vm(e.getMonth()+1)}-${vm(e.getDate())} ${i} ${a}:${vm(e.getMinutes())}`},ZD=(t,e=50)=>{if(t.length<=e)return t;const a=t.lastIndexOf(".");if(a===-1)return t.substring(0,e-3)+"...";const i=t.substring(a),o=t.substring(0,a),d=e-i.length-3;return d<=0?t.substring(0,e-3)+"...":o.substring(0,d)+"..."+i};function JD(){const{lectureId:t,indivtaskId:e}=ht(),a=is(),i="/classroom/api/v1/professor",o="/classroom/api/v1/professor/task",[d,u]=x.useState(null),[h,m]=x.useState([]),[p,b]=x.useState(!0),[y,v]=x.useState(null),[N,D]=x.useState(!1),[C,A]=x.useState(!1),[S,M]=x.useState(!1),[F,z]=x.useState(null),[K,R]=x.useState(null),w=x.useMemo(()=>`/classroom/professor/${encodeURIComponent(t||"")}/task`,[t]),_=x.useMemo(()=>`${w}/indiv/${encodeURIComponent(e||"")}/edit`,[w,e]);x.useEffect(()=>{let k=!0;return(async()=>{try{b(!0),v(null),D(!1);const[W,P]=await Promise.all([fetch(`${i}/${encodeURIComponent(t)}/students`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${o}/${encodeURIComponent(t)}/indiv/${encodeURIComponent(e)}`,{headers:{Accept:"application/json"},credentials:"include"})]);if(P.status===404||P.status===500){if(!k)return;D(!0);return}if(!W.ok||!P.ok)throw new Error("    .");const[G,Y]=await Promise.all([W.json(),P.json()]);if(!k)return;m(Array.isArray(G)?G:[]),u(Y||null)}catch(W){if(!k)return;v(W)}finally{k&&b(!1)}})(),()=>{k=!1}},[t,e]);const B=x.useMemo(()=>new Map((d?.studentSubmitList||[]).map(k=>[k.enrollId,k])),[d]),T=x.useMemo(()=>{const k=[],W=new Set;for(const P of h){const G=B.get(P.enrollId);G?.submitAt&&k.push({student:P,submission:G}),W.add(P.enrollId)}for(const P of d?.studentSubmitList||[])!W.has(P.enrollId)&&P.submitAt&&k.push({student:null,submission:P});return k},[h,B,d]),U=x.useMemo(()=>{const k=[];for(const W of h){const P=B.get(W.enrollId);P?.submitAt||k.push({student:W,submission:P||null})}return k},[h,B]),V=h.length,q=T.length,H=k=>k?{name:`${k.lastName||""}${k.firstName||""}`||k.name||k.userId||"( )",number:k.studentNo||""}:{name:"( )",number:""},E=x.useMemo(()=>{if(U.length===0)return null;const{name:k,number:W}=H(U[0].student);return{label:W?`${k} (${W})`:k,rest:U.length-1}},[U]),L=x.useMemo(()=>{if(!E)return"";const k=E.rest>0?`  ${E.rest}`:"";return`${E.label}${k}`},[E]),$=async()=>{if((await Ve.fire({title:" ",text:"  ?",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:"",confirmButtonColor:"#dc3545"})).isConfirmed)try{A(!0);const W=await fetch(`${o}/${encodeURIComponent(t)}/indiv/${encodeURIComponent(e)}`,{method:"DELETE",credentials:"include"});if(!W.ok&&W.status!==204)throw new Error(`(${W.status})  `);await Ve.fire({title:" ",text:" .",icon:"success",confirmButtonText:""}),a(w)}catch(W){await Ve.fire({title:" ",text:W.message||String(W),icon:"error",confirmButtonText:""})}finally{A(!1)}},O=async(k,W,P,G)=>{try{G(!0);const Y={enrollId:k,evaluScore:Number(W),evaluDesc:P};if(!Number.isFinite(Y.evaluScore)||Y.evaluScore<0||Y.evaluScore>100){await Ve.fire({title:" ",text:" 0~100   .",icon:"error",confirmButtonText:""});return}const ee=`${o}/${encodeURIComponent(t)}/indiv/${encodeURIComponent(e)}/eval`,ae=await fetch(ee,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(Y)});if(!ae.ok)throw new Error(`(${ae.status})  `);await Ve.fire({title:" ",text:" .",icon:"success",confirmButtonText:""});const xe=await fetch(`${o}/${encodeURIComponent(t)}/indiv/${encodeURIComponent(e)}`,{headers:{Accept:"application/json"},credentials:"include"});if(xe.ok){const me=await xe.json();u(me||null)}}catch(Y){await Ve.fire({title:" ",text:Y.message||String(Y),icon:"error",confirmButtonText:""})}finally{G(!1)}},Q=(k,W)=>{R(k),z(W)},Z=()=>{R(null),z(null)};return N?s.jsx(Id,{message:"   ",resourceType:""}):s.jsxs("section",{id:"indivtask-post-root",className:"container-fluid",style:{display:"flex",flexDirection:"column",padding:"1rem",maxHeight:"100vh"},children:[s.jsx("div",{style:{display:"flex",flexDirection:"row",gap:"0.75rem",height:"70vh",minHeight:0},children:p?s.jsx("div",{className:"card shadow-sm",style:{flex:1},children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"d-flex align-items-start flex-wrap mb-2",children:[s.jsx("span",{className:"badge skeleton",style:{width:64,height:22}}),s.jsx("span",{className:"badge skeleton ms-2",style:{width:56,height:22}})]}),s.jsx("h1",{className:"h4 mb-3 skeleton",style:{width:"60%",height:"1.5rem"}}),s.jsxs("div",{className:"d-flex flex-wrap meta-list mb-3",children:[s.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),s.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),s.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}})]}),s.jsx("hr",{className:"my-3"}),s.jsx("article",{className:"task-content mb-4",children:s.jsx("div",{className:"skeleton",style:{height:"8rem"}})})]})}):y?s.jsx("div",{className:"alert alert-danger",role:"alert",children:String(y.message||y)}):d?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"card shadow-sm",style:{flex:"3",minHeight:0,display:"flex",flexDirection:"column"},children:[s.jsx("div",{className:"card-header d-flex align-items-center justify-content-between",children:s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("span",{className:"badge text-bg-primary",children:""}),s.jsx("h1",{className:"h5 mb-0",children:d.indivtaskName||"( )"})]})}),s.jsxs("div",{className:"card-body",style:{overflow:"auto",flex:1,display:"flex",flexDirection:"column"},children:[!p&&d&&s.jsxs("div",{className:"d-flex gap-3 small mb-3",children:[s.jsxs("div",{children:[": ",s.jsx("span",{className:"fw-bold text-primary",children:Hc(d.startAt)})]}),s.jsxs("div",{children:[": ",s.jsx("span",{className:"fw-bold text-danger",children:Hc(d.endAt)})]})]}),s.jsx("article",{className:"task-content mb-4",style:{flex:1},dangerouslySetInnerHTML:{__html:d.indivtaskDesc||""}})]}),Array.isArray(d.attachFileList)&&d.attachFileList.length>0&&s.jsxs("div",{className:"card-footer p-1",id:"attach-area",children:[s.jsx("h2",{className:"h6 mb-2",children:""}),s.jsx("ul",{className:"list-group list-group-flush",id:"attach-list",children:d.attachFileList.map((k,W)=>{const P=k.fileOrder??k.order,G=k.originalFileName||k.originName||` ${P??W}`,Y=ZD(G,50),ee=typeof k.fileSize=="number"?`(${(k.fileSize/1024).toFixed(2)} KB)`:"",ae=P!=null?`/classroom/api/v1/common/task/${encodeURIComponent(t)}/indiv/${encodeURIComponent(e)}/attach/${encodeURIComponent(P)}`:void 0;return s.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[s.jsxs("div",{children:[s.jsx("i",{className:"bi bi-paperclip"})," ",Y," ",ee&&s.jsx("small",{className:"text-muted",children:ee})]}),ae?s.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:ae,children:s.jsx("i",{className:"bi bi-download"})}):s.jsx("span",{className:"text-muted small",children:" "})]},`${P??W}`)})})]}),s.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[s.jsx("a",{className:"custom-btn custom-btn-sm custom-btn-primary",id:"btn-edit-task",href:_,role:"button",children:""}),s.jsx("button",{className:"custom-btn custom-btn-sm custom-btn-danger",id:"btn-delete-task",type:"button",onClick:$,disabled:C,children:C?"":""})]})]}),s.jsxs("div",{className:"card shadow-sm",style:{flex:"2",minHeight:0,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[s.jsx("h3",{className:"h5 mb-0",children:" "}),s.jsxs("span",{className:"text-muted",children:[q," / ",V]})]}),s.jsx("div",{className:"card-body",style:{overflow:"auto",padding:0},children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-sm table-hover align-middle mb-0",children:[s.jsx("thead",{className:"table-light",style:{position:"sticky",top:0,zIndex:1},children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"55%"},className:"text-center",children:""}),s.jsx("th",{style:{width:"30%"},className:"text-center",children:""}),s.jsx("th",{style:{width:"15%"},className:"text-center",children:""})]})}),s.jsx("tbody",{children:T.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:4,className:"text-center text-muted py-3",children:"  ."})}):T.map(({student:k,submission:W},P)=>{const G=`${k?.lastName||""}${k?.firstName||""}`||k?.name||k?.userId||"( )",Y=k?.univDeptName||"",ee=k?.gradeName||"",ae=[Y,ee].filter(Boolean).join(", "),xe=ae?`${G} (${ae})`:G,me=W?.submitAt?Hc(W.submitAt):"-";(W?.submitFiles||[]).some(ue=>ue&&(ue.fileId||ue.originName||ue.originalFileName));const se=W?.evaluScore!=null?W.evaluScore:"-";return s.jsxs("tr",{onClick:()=>Q(k,W),style:{cursor:"pointer"},children:[s.jsx("td",{className:"text-center",children:xe}),s.jsx("td",{className:"text-center",style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:me}),s.jsx("td",{className:"text-center",children:se})]},`${W?.enrollId||P}`)})})]})})}),s.jsx("div",{className:"card-footer",children:s.jsxs("div",{className:"text-muted small",children:["  : ",U.length===0?"":L]})})]})]}):null}),F&&s.jsx(eM,{student:K,submission:F,lectureId:t,indivtaskId:e,onClose:Z,onEvalSubmit:O,toStudentLabel:H,fmtDateTime:Hc}),y&&s.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:y})]})}function eM({student:t,submission:e,lectureId:a,indivtaskId:i,onClose:o,onEvalSubmit:d,toStudentLabel:u,fmtDateTime:h}){const{name:m,number:p}=u(t),b=t?.studentNo||e?.studentNo||e?.enrollId||"",y=h(e?.submitAt),v=e?.submitFiles||[];return s.jsx("div",{className:"modal fade show",style:{display:"block",backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:-1,role:"dialog",onClick:o,children:s.jsx("div",{className:"modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable",onClick:N=>N.stopPropagation(),children:s.jsxs("div",{className:"modal-content",children:[s.jsxs("div",{className:"modal-header",children:[s.jsxs("h5",{className:"modal-title",children:[s.jsx("strong",{children:m}),p&&s.jsxs("span",{className:"text-muted small ms-2",children:["(",p,")"]})]}),s.jsx("button",{type:"button",className:"btn-close",onClick:o,"aria-label":"Close"})]}),s.jsxs("div",{className:"modal-body",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-muted small mb-1",children:""}),s.jsx("div",{children:s.jsx("span",{style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"inline-block",maxWidth:"100%"},children:y})})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-muted small mb-1",children:" "}),s.jsx("div",{className:"p-3 bg-light rounded",children:e?.submitDesc||"-"})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("div",{className:"text-muted small mb-2",children:" "}),s.jsx("ul",{className:"list-group",children:v&&v.length>0&&v.some(N=>N?.fileId)?v.map((N,D)=>{const C=N.fileOrder??N.order,A=N.originalFileName||N.originName||` ${C??D}`,S=typeof N.fileSize=="number"?`(${(N.fileSize/1024).toFixed(2)} KB)`:"",M=C!=null&&b?`/classroom/api/v1/common/${encodeURIComponent(a)}/indivtask/${encodeURIComponent(i)}/submit/${encodeURIComponent(b)}/attach/${encodeURIComponent(C)}`:void 0;return s.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[s.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[s.jsx("i",{className:"bi bi-paperclip"})," ",A]}),s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[S&&s.jsx("small",{className:"text-muted",children:S}),M&&s.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:M,children:""})]})]},`${C??D}`)}):s.jsx("li",{className:"list-group-item text-muted small",children:" "})})]}),s.jsxs("div",{className:"border-top pt-3",children:[s.jsx("h6",{className:"mb-3",children:""}),s.jsx(tM,{enrollId:e?.enrollId,defaultScore:e?.evaluScore,defaultDesc:e?.evaluDesc,onSubmit:d})]})]}),s.jsx("div",{className:"modal-footer",children:s.jsx("button",{type:"button",className:"btn btn-secondary",onClick:o,children:""})})]})})})}function tM({enrollId:t,defaultScore:e,defaultDesc:a,onSubmit:i}){const[o,d]=x.useState(e??""),[u,h]=x.useState(a??""),[m,p]=x.useState(!1);return s.jsxs("form",{className:"eval-form",onSubmit:b=>{b.preventDefault(),i(t,o,u,p)},children:[s.jsxs("div",{className:"row g-2 align-items-center",children:[s.jsxs("div",{className:"col-sm-3",children:[s.jsx("label",{className:"form-label",children:" (0-100)"}),s.jsx("input",{type:"number",className:"form-control form-control-sm eval-score",min:0,max:100,value:o,onChange:b=>d(b.target.value)})]}),s.jsxs("div",{className:"col-sm-9",children:[s.jsx("label",{className:"form-label",children:""}),s.jsx("textarea",{className:"form-control form-control-sm eval-desc",rows:2,value:u,onChange:b=>h(b.target.value)})]})]}),s.jsx("div",{className:"d-flex justify-content-end mt-2",children:s.jsx("button",{type:"submit",className:"btn btn-sm btn-primary btn-save-eval",disabled:m,children:m?"":""})})]})}const Pc=t=>String(t).padStart(2,"0"),Lr=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?t:`${e.getFullYear()}-${Pc(e.getMonth()+1)}-${Pc(e.getDate())} ${Pc(e.getHours())}:${Pc(e.getMinutes())}`},Tv=(t,e=50)=>typeof t!="string"?"":t.length<=e?t:`${t.substring(0,e)}...`,kv=t=>{if(typeof t!="number"||t<0)return"";const e=1024*1024,a=1024;return t>=e?`(${(t/e).toFixed(2)} MB)`:t>=a?`(${(t/a).toFixed(2)} KB)`:`(${t} Bytes)`};function sM(){const{lectureId:t,grouptaskId:e}=ht(),a=is(),i=`/classroom/professor/${encodeURIComponent(t||"")}/task`,o="/classroom/api/v1/professor",d="/classroom/api/v1/common/task",u="/classroom/api/v1/professor/task",h="/classroom/api/v1/common",[m,p]=x.useState(null),[b,y]=x.useState([]),[v,N]=x.useState(!0),[D,C]=x.useState(null),[A,S]=x.useState(!1),[M,F]=x.useState(!1),{getStudentPhotoUrl:z,getStudentPhotoBlobUrl:K,cacheStudentPhotoBlobUrl:R}=ds(),[w,_]=x.useState({}),B=x.useRef(new Set);x.useEffect(()=>{let O=!0;return(async()=>{try{N(!0),C(null),S(!1);const[Q,Z,k]=await Promise.all([fetch(`${u}/${encodeURIComponent(t)}/group/${encodeURIComponent(e)}`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${u}/${encodeURIComponent(t)}/group/${encodeURIComponent(e)}/jo`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${o}/${encodeURIComponent(t)}/students`,{headers:{Accept:"application/json"},credentials:"include"})]);if(Q.status===404||Q.status===500){if(!O)return;S(!0);return}if(!Q.ok)throw new Error(`(${Q.status})   `);if(!Z.ok)throw new Error(`(${Z.status})     `);const[W,P,G]=await Promise.all([Q.json(),Z.json(),k.ok?k.json():Promise.resolve([])]);if(!O)return;const Y={...W,groupList:P};p(Y),y(Array.isArray(G)?G:[])}catch(Q){if(!O)return;C(Q)}finally{O&&N(!1)}})(),()=>{O=!1}},[t,e,o,u]);const T=x.useMemo(()=>new Map(b.map(O=>[O.enrollId,O])),[b]),U=x.useMemo(()=>{const O=new Set;return Array.isArray(m?.groupList)&&m.groupList.forEach(Q=>{(Array.isArray(Q?.crewList)?Q.crewList:[]).forEach(W=>{const P=T.get(W.enrollId);P?.studentNo&&O.add(P.studentNo)});const k=Q?.leaderEnrollId;if(k){const W=T.get(k);W?.studentNo&&O.add(W.studentNo)}}),Array.from(O)},[m,T]);x.useEffect(()=>{U.forEach(O=>{if(!O||B.current.has(O))return;const Q=K(O);if(Q){_(k=>k[O]?k:{...k,[O]:Q});return}const Z=z(O,t);Z&&(B.current.add(O),fetch(Z,{credentials:"include"}).then(k=>k.ok?k.blob():null).then(k=>{if(!k)return;const W=URL.createObjectURL(k);R(O,W),_(P=>({...P,[O]:W}))}).catch(()=>{}).finally(()=>{B.current.delete(O)}))})},[U,t,K,z,R]);const V=async()=>{if((await Ve.fire({title:" ",text:"  ?",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:"",confirmButtonColor:"#dc3545"})).isConfirmed)try{F(!0);const Q=await fetch(`${u}/${encodeURIComponent(t)}/group/${encodeURIComponent(e)}`,{method:"DELETE",credentials:"include",headers:{Accept:"application/json"}});if(!(Q.status===204||Q.ok))throw new Error(`(${Q.status})  `);await Ve.fire({title:" ",text:" .",icon:"success",confirmButtonText:""}),a(i)}catch(Q){await Ve.fire({title:" ",text:Q.message||String(Q),icon:"error",confirmButtonText:""})}finally{F(!1)}},q=O=>O?.studentNo?w[O.studentNo]||K(O.studentNo)||z(O.studentNo,t)||`${h}/photo/student/${encodeURIComponent(t)}/${encodeURIComponent(O.studentNo)}`:null,H=O=>!Array.isArray(O)||O.length===0?s.jsx("p",{className:"text-muted mb-0",children:"  ."}):O.map((Q,Z)=>{const k=Array.isArray(Q?.crewList)?Q.crewList:[],W=Q.leaderEnrollId,P=W&&T.get(W)||null,G=P&&(`${P.lastName||""}${P.firstName||""}`||P.name||P.userId)||"-",Y=(P?.lastName||P?.firstName||G).charAt(0),ee=q(P),ae=k.length,xe=Q.submitAt?Lr(Q.submitAt):"",me=Q.submitAt?s.jsx("span",{className:"badge text-bg-success",children:" "}):s.jsx("span",{className:"badge text-bg-secondary",children:""}),$e=Q.submitAt?` ${xe}`:"",se=Q.groupName||`${Z+1}`,ue=P?.studentNo?` (${P.studentNo})`:"";Q?.submitFileId&&Q?.groupId&&`${u}${encodeURIComponent(t)}${encodeURIComponent(e)}${encodeURIComponent(Q.groupId)}`;const te=Q.attachFileList,oe=s.jsxs("div",{className:"mt-3",children:[s.jsx("div",{className:"small text-muted",children:" "}),Array.isArray(te)&&te.length>0?s.jsx("ul",{className:"list-group list-group-flush mt-1",children:te.map((we,_e)=>{const He=we.fileOrder??_e+1,be=we.originalFileName||we.originName||` ${He}`,qe=Tv(be,20),de=kv(we.fileSize),Ne=`${u}/${encodeURIComponent(t)}/group/${encodeURIComponent(e)}/submit/${encodeURIComponent(Q.groupId)}/${encodeURIComponent(He)}`;return s.jsx("li",{className:"list-group-item ps-0",children:s.jsxs("a",{href:Ne,className:"text-decoration-none text-body",title:be,children:[s.jsx("i",{className:"bi bi-paperclip"})," ",qe," ",de&&s.jsx("small",{className:"text-muted",children:de})]})},He)})}):s.jsx("div",{className:"mt-1",children:s.jsx("span",{className:"text-muted",children:"  ."})})]});return s.jsxs("div",{className:"accordion-item",children:[s.jsx("h2",{className:"accordion-header",id:`group-acc-head-${Z}`,children:s.jsx("button",{className:"accordion-button collapsed",type:"button","data-bs-toggle":"collapse","data-bs-target":`#group-acc-body-${Z}`,children:s.jsxs("div",{className:"group-summary",children:[ee?s.jsx("img",{className:"avatar-56 me-2",alt:`${G} `,src:ee}):s.jsx("span",{className:"avatar-fallback-56 me-2",children:Y}),s.jsxs("div",{className:"group-summary-text",children:[s.jsxs("div",{className:"group-summary-title",children:[s.jsx("span",{className:"fw-semibold",children:se}),me]}),s.jsxs("div",{className:"group-summary-meta",children:[s.jsxs("span",{children:[s.jsx("i",{className:"bi bi-person-badge"}),"  ",G,ue]}),s.jsxs("span",{children:[s.jsx("i",{className:"bi bi-people"}),"  ",ae,""]}),s.jsxs("span",{children:[s.jsx("i",{className:"bi bi-clock-history"})," ",$e]})]})]})]})})}),s.jsx("div",{id:`group-acc-body-${Z}`,className:"accordion-collapse collapse","data-bs-parent":"#group-accordion",children:s.jsxs("div",{className:"accordion-body",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"h6 mb-3",children:" "}),s.jsxs("div",{className:"row g-3",children:[s.jsxs("div",{className:"col-12 col-md-4",children:[s.jsx("div",{className:"small text-muted",children:" "}),s.jsx("div",{children:Q.submitAt?xe:s.jsx("span",{className:"text-muted",children:""})})]}),s.jsxs("div",{className:"col-12 col-md-8",children:[s.jsx("div",{className:"small text-muted",children:" "}),s.jsx("div",{className:"mt-1",dangerouslySetInnerHTML:{__html:Q?.submitDesc||'<span class="text-muted">  .</span>'}})]})]}),oe]}),s.jsxs("div",{children:[s.jsx("h3",{className:"h6 mb-3",children:" "}),s.jsx("div",{className:"row g-3",children:k.length===0?s.jsx("p",{className:"text-muted mb-0",children:"  ."}):k.map((we,_e)=>{const He=we?.enrollId&&T.get(we.enrollId)||null,be=He&&(`${He.lastName||""}${He.firstName||""}`||He.name||He.userId)||"-",qe=W&&we?.enrollId===W,de=He?.studentNo||"  ",De=we?.evaluScore!==""&&we?.evaluScore!=null?`${we.evaluScore} / 10`:"",Ue=we?.evaluAt?Lr(we.evaluAt):"",Xe=(He?.lastName||He?.firstName||be).charAt(0),Ge=q(He);return s.jsx("div",{className:"col-12 col-md-6 col-lg-4",children:s.jsxs("div",{className:"member-card h-100",children:[s.jsxs("div",{className:"d-flex align-items-center gap-3",children:[Ge?s.jsx("img",{className:"avatar-48",alt:`${be} `,src:Ge}):s.jsx("span",{className:"avatar-fallback-48",children:Xe}),s.jsxs("div",{children:[s.jsx("div",{className:"fw-semibold",children:be}),s.jsx("div",{className:"member-meta",children:de}),qe&&s.jsx("span",{className:"badge text-bg-primary mt-2",children:""})]})]}),s.jsxs("div",{className:"evaluation-box mt-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"fw-semibold",children:"  :"})," ",De]}),s.jsx("div",{className:"evaluation-note mt-2",children:we?.evaluDesc||""}),s.jsxs("div",{className:"evaluation-note mt-2",children:[" : ",Ue]})]})]})},we?.enrollId||_e)})})]})]})})]},Z)}),E=(m?.groupList||[]).length;(m?.groupList||[]).reduce((O,Q)=>O+(Q?.crewList?.length||0),0);const L=(m?.groupList||[]).filter(O=>O?.submitAt).length,$=x.useMemo(()=>`${i}/group/${encodeURIComponent(e||"")}/edit`,[i,e]);return A?s.jsx(Id,{message:"   ",resourceType:""}):s.jsxs("section",{id:"grouptask-post-root",className:"container-fluid",style:{display:"flex",flexDirection:"column",padding:"1rem",maxHeight:"100vh"},children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[s.jsx("nav",{"aria-label":"breadcrumb",children:s.jsxs("ol",{className:"breadcrumb mb-0",children:[s.jsx("li",{className:"breadcrumb-item",children:s.jsx(st,{id:"bc-task",to:i,children:""})}),s.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:""})]})}),s.jsxs("div",{className:"d-flex gap-2",children:[s.jsx(st,{className:"btn btn-sm btn-outline-secondary",id:"btn-edit",to:`/classroom/professor/${encodeURIComponent(t)}/task/group/${encodeURIComponent(e)}/edit`,children:""}),s.jsx("button",{className:"btn btn-sm btn-outline-danger",id:"btn-delete",onClick:V,disabled:M,children:M?"...":""}),s.jsx(st,{className:"btn btn-sm btn-outline-secondary",id:"btn-list",to:i,children:""})]})]}),s.jsx("div",{style:{display:"flex",flexDirection:"row",gap:"0.75rem",height:"70vh",minHeight:0},children:v?s.jsx("div",{className:"card shadow-sm",style:{flex:1},children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"d-flex align-items-start flex-wrap mb-2",children:[s.jsx("span",{className:"badge skeleton",style:{width:64,height:22}}),s.jsx("span",{className:"badge skeleton ms-2",style:{width:56,height:22}})]}),s.jsx("h1",{className:"h4 mb-3 skeleton",style:{width:"60%",height:"1.5rem"}}),s.jsxs("div",{className:"d-flex flex-wrap meta-list mb-3",children:[s.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),s.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}}),s.jsx("div",{className:"meta-item skeleton",style:{width:220,height:"1rem"}})]}),s.jsx("hr",{className:"my-3"}),s.jsx("article",{className:"task-content mb-4",children:s.jsx("div",{className:"skeleton",style:{height:"8rem"}})})]})}):D?s.jsx("div",{className:"alert alert-danger",role:"alert",children:String(D.message||D)}):m?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"card shadow-sm",style:{flex:"3",minHeight:0,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("span",{className:"badge text-bg-primary",children:""}),s.jsx("h1",{className:"h5 mb-0",children:m.grouptaskName||"( )"})]}),s.jsxs("div",{className:"d-flex gap-2",children:[s.jsx("a",{className:"btn btn-sm btn-primary",id:"btn-edit-task",href:$,role:"button",children:""}),s.jsx("button",{className:"btn btn-sm btn-danger",id:"btn-delete-task",type:"button",onClick:V,disabled:M,children:M?"":""})]})]}),s.jsxs("div",{className:"card-body",style:{overflow:"auto",flex:1,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{className:"d-flex flex-wrap gap-3 text-muted small mb-3",children:[s.jsxs("div",{children:[": ",s.jsx("span",{className:"text-body-secondary",children:Lr(m.createAt)})]}),s.jsxs("div",{children:[": ",s.jsx("span",{className:"text-body-secondary",children:Lr(m.startAt)})]}),s.jsxs("div",{children:[": ",s.jsx("span",{className:"text-body-secondary",children:Lr(m.endAt)})]})]}),s.jsx("hr",{className:"my-3"}),s.jsx("article",{className:"task-content mb-4",style:{flex:1},dangerouslySetInnerHTML:{__html:m.grouptaskDesc||""}})]}),Array.isArray(m.attachFileList)&&m.attachFileList.length>0&&s.jsxs("div",{className:"card-footer",id:"attach-area",children:[s.jsx("h2",{className:"h6 mb-2",children:""}),s.jsx("ul",{className:"list-group list-group-flush",id:"attach-list",children:m.attachFileList.map((O,Q)=>{const Z=O.fileOrder??O.order??Q,k=O.originalFileName||O.originName||` ${Z??Q}`,W=Tv(k),P=kv(O.fileSize),G=`${d}/${encodeURIComponent(t)}/group/${encodeURIComponent(e)}/attach/${encodeURIComponent(Z)}`;return s.jsx("li",{className:"list-group-item",children:s.jsxs("a",{href:G,className:"text-decoration-none text-body",title:k,children:[s.jsx("i",{className:"bi bi-paperclip"})," ",W," ",P&&s.jsx("small",{className:"text-muted",children:P})]})},`${Z??Q}`)})})]})]}),s.jsxs("div",{className:"card shadow-sm",style:{flex:"2",minHeight:0,display:"flex",flexDirection:"column"},children:[s.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[s.jsx("h3",{className:"h5 mb-0",children:"  "}),s.jsxs("span",{className:"text-muted",children:[L," / ",E]})]}),s.jsx("div",{className:"card-body",style:{overflow:"auto",padding:0},children:s.jsx("div",{id:"group-accordion",className:"accordion accordion-flush",children:H(m?.groupList||[])})})]})]}):null}),D&&s.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:D})]})}const Vc=t=>String(t).padStart(2,"0"),jm=t=>{if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?"":`${e.getFullYear()}-${Vc(e.getMonth()+1)}-${Vc(e.getDate())}T${Vc(e.getHours())}:${Vc(e.getMinutes())}`},nM=t=>Array.isArray(t)?t:t?.attachFileList&&Array.isArray(t.attachFileList)?t.attachFileList:[],aM=(t,e)=>{if(!Array.isArray(e))return"";for(const a of e){if(a?.bundleId)return a.bundleId;if(a?.fileId)return a.fileId}return""};function _v(){const{lectureId:t,indivtaskId:e}=ht(),a=is(),i="/classroom/api/v1/professor/task",o=!!e,[d,u]=x.useState(""),[h,m]=x.useState(""),[p,b]=x.useState(""),[y,v]=x.useState(""),[N,D]=x.useState(""),[C,A]=x.useState([]),[S,M]=x.useState(!1),[F,z]=x.useState(o),[K,R]=x.useState(""),[w,_]=x.useState(""),B=x.useRef(null),T=x.useRef(null);x.useEffect(()=>{let q=!1,H=null;const E=async()=>{if(!(q||T.current)&&B.current&&window.ClassicEditor)try{const O=B.current.ckeditorInstance;O&&await O.destroy();const Q=await window.ClassicEditor.create(B.current);if(q){Q.destroy().catch(console.error);return}H=Q,T.current=Q,B.current.ckeditorInstance=Q}catch(O){console.error("CKEditor initialization failed:",O)}},$=setTimeout(()=>{if(window.ClassicEditor)E();else{const O=document.querySelector('script[src*="ckeditor"]');if(O){const Q=()=>{q||E(),O.removeEventListener("load",Q)};O.addEventListener("load",Q)}else{const Q=document.createElement("script");Q.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",Q.onload=()=>{q||E()},document.head.appendChild(Q)}}},100);return()=>{q=!0,clearTimeout($);const O=T.current||H;O&&O.ui&&O.ui.view&&O.ui.view.element&&O.destroy().catch(Q=>{console.debug("Editor cleanup:",Q)}),T.current=null,B.current&&(B.current.ckeditorInstance=null)}},[]),x.useEffect(()=>{(async()=>{if(o)try{z(!0),R("");const H=`${i}/${encodeURIComponent(t)}/indiv/${encodeURIComponent(e)}`,E=await fetch(H,{headers:{Accept:"application/json"},credentials:"include"});if(!E.ok)throw new Error(`  (HTTP ${E.status})`);const L=await E.json();u(L.indivtaskName||""),b(jm(L.startAt)),v(jm(L.endAt));const $=nM(L.attachFileList),O=L.fileId||L.attachFileId||aM("",$);D(O),A($),z(!1);const Q=setInterval(()=>{T.current&&(T.current.setData(L.indivtaskDesc||""),clearInterval(Q))},100);setTimeout(()=>clearInterval(Q),1e4)}catch(H){R(H.message||String(H)),z(!1)}else{const H=new Date;H.setSeconds(0,0),b(jm(H.toISOString()))}})()},[t,e,o,i]);const U=async q=>{const H=Array.from(q.target.files||[]);if(H.length!==0){if(H.length>5){R(" 5   .");return}try{M(!0),R(""),_("");const E=new FormData;for(const k of H)E.append("files",k);const L=`/classroom/api/v1/common/${encodeURIComponent(t)}/upload?type=task`,$=await fetch(L,{method:"POST",body:E,credentials:"include"});if(!$.ok)throw new Error(`(${$.status})  `);const O=await $.json(),Q=O.bundleId||O.fileId||Array.isArray(O.fileIds)&&O.fileIds[0]||Array.isArray(O.files)&&O.files[0]?.fileId||Array.isArray(O.details)&&O.details[0]?.fileId||"",Z=Array.isArray(O.files)&&O.files||Array.isArray(O.details)&&O.details||[];D(Q),A(Z)}catch(E){R(E.message||String(E))}finally{M(!1)}}},V=async q=>{q.preventDefault();try{if(M(!0),R(""),_(""),!d.trim())throw new Error(" .");const H=T.current?T.current.getData():h;if(!H.trim())throw new Error("  .");if(!p)throw new Error("  .");if(p&&y&&p>y)throw new Error("     .");const E={indivtaskName:d.trim(),indivtaskDesc:H.trim(),startAt:p,endAt:y||null,attachFileId:N||""};if(o){E.indivtaskId=e;const L=`${i}/${encodeURIComponent(t)}/indiv/${encodeURIComponent(e)}`,$=await fetch(L,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(E)});if(!$.ok){const O=await $.text().catch(()=>$.statusText);throw new Error(` (${$.status}): ${O}`)}await Ve.fire({title:" ",text:" .",icon:"success",confirmButtonText:""}),a(`/classroom/professor/${encodeURIComponent(t)}/task/indiv/${encodeURIComponent(e)}`)}else{const L=`${i}/${encodeURIComponent(t)}/indiv`,$=await fetch(L,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(E)});if(!$.ok){const Q=await $.text().catch(()=>$.statusText);throw new Error(` (${$.status}): ${Q}`)}const O=$.headers.get("Location");await Ve.fire({title:" ",text:" .",icon:"success",confirmButtonText:""}),a(O||`/classroom/professor/${encodeURIComponent(t)}/task`)}}catch(H){R(H.message||String(H))}finally{M(!1)}};return F?s.jsx("section",{id:"task-form-root",className:"container py-4",children:s.jsx("div",{className:"text-muted",children:" ..."})}):s.jsxs("section",{id:"task-form-root",className:"container py-4",children:[s.jsxs("form",{id:"task-form",onSubmit:V,children:[K&&s.jsxs("div",{id:"error-box",className:"alert alert-danger alert-dismissible fade show",role:"alert",children:[K,s.jsx("button",{type:"button",className:"btn-close",onClick:()=>R(""),"aria-label":"Close"})]}),w&&s.jsxs("div",{id:"info-box",className:"alert alert-success alert-dismissible fade show",role:"alert",children:[w,s.jsx("button",{type:"button",className:"btn-close",onClick:()=>_(""),"aria-label":"Close"})]}),s.jsxs("div",{className:"row g-4",children:[s.jsx("div",{className:"col-lg-8",children:s.jsxs("div",{className:"card mb-4",children:[s.jsx("div",{className:"card-header",children:s.jsx("h5",{className:"card-title mb-0",style:{fontSize:"1.2em"},children:o?" ":" "})}),s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"task-name",className:"form-label",children:""}),s.jsx("input",{id:"task-name",type:"text",className:"form-control form-control-lg",maxLength:50,required:!0,disabled:S,value:d,onChange:q=>u(q.target.value),placeholder:" 5  ",style:{padding:"6px"}})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"task-desc",className:"form-label fs-5",children:" "}),!F&&s.jsx("div",{ref:B,id:"task-desc"})]})]})]})}),s.jsx("div",{className:"col-lg-4",children:s.jsxs("div",{className:"vstack gap-4",children:[s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h5",{className:"card-title mb-0",children:" "})}),s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"start-at",className:"form-label",children:" "}),s.jsx("input",{id:"start-at",type:"datetime-local",className:"form-control",required:!0,disabled:S,value:p,onChange:q=>b(q.target.value),style:{padding:"6px"}})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"end-at",className:"form-label",children:" "}),s.jsx("input",{id:"end-at",type:"datetime-local",className:"form-control",disabled:S,value:y,onChange:q=>v(q.target.value),style:{padding:"6px"}})]})]})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header",children:s.jsx("h5",{className:"card-title mb-0",children:""})}),s.jsxs("div",{className:"card-body",children:[s.jsx("input",{id:"file-input",type:"file",className:"form-control",multiple:!0,disabled:S,onChange:U,style:{padding:"6px"}}),s.jsx("div",{className:"form-text mt-2",children:N&&C.length>0?s.jsx("ul",{className:"list-unstyled mb-0",children:C.map((q,H)=>{const E=q.originName??q.originalName??` ${q.fileOrder??q.order??H}`,L=q.extension?`.${q.extension}`:"",$=typeof q.fileSize=="number"?` (${(q.fileSize/1024).toFixed(1)} KB)`:"";return s.jsxs("li",{className:"small",children:[" ",E,L,$]},H)})}):"  5   ."})]})]}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx(st,{to:o?`/classroom/professor/${encodeURIComponent(t)}/task/indiv/${encodeURIComponent(e)}`:`/classroom/professor/${encodeURIComponent(t)}/task`,className:"custom-btn custom-btn-outline-secondary custom-btn-md",children:""}),s.jsx("button",{id:"btn-submit",type:"submit",className:"custom-btn custom-btn-primary custom-btn-md",disabled:S,children:S?o?"":"":o?"":""})]})]})})]})]}),s.jsx("style",{children:`
        .ck.ck-editor {
          max-width: 100%;
        }
        .ck-editor__editable {
          min-height: 400px;
        }
      `})]})}const Yc=t=>String(t).padStart(2,"0"),lM=t=>{if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?"":`${e.getFullYear()}-${Yc(e.getMonth()+1)}-${Yc(e.getDate())}T${Yc(e.getHours())}:${Yc(e.getMinutes())}`},Dv=t=>{if(!t)return null;const e=String(t).trim();return e?/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}$/.test(e)?`${e}:00`:e:null},Mv=t=>({tempId:`GRP${Math.random().toString(36).slice(2,10)}`,groupName:` ${t+1}`,leaderEnrollId:null,members:[]});function iM(){const{lectureId:t}=ht(),e=is(),a="/classroom/api/v1/professor",i="/classroom/api/v1/professor/task",[o,d]=x.useState(""),[u,h]=x.useState(""),[m,p]=x.useState(""),[b,y]=x.useState(""),[v,N]=x.useState(""),[D,C]=x.useState([]),[A,S]=x.useState(!1),[M,F]=x.useState(""),[z,K]=x.useState(""),[R,w]=x.useState([]),[_,B]=x.useState(!1),[T,U]=x.useState(""),[V,q]=x.useState(""),[H,E]=x.useState(new Set),[L,$]=x.useState([]),O=x.useRef(null),Q=x.useRef(null),Z=x.useRef(null),k=de=>{F(de||" ."),K("")},W=de=>{K(de||"."),F("")},P=()=>{F(""),K("")};x.useEffect(()=>{const de=new Date;de.setSeconds(0,0),p(lM(de.toISOString()))},[]);const G=async()=>{if(!t){k("  .");return}try{B(!0),U(""),P();const de=`${a}/${encodeURIComponent(t)}/students`,Ne=await fetch(de,{headers:{Accept:"application/json"},credentials:"include"});if(!Ne.ok)throw new Error(`    (HTTP ${Ne.status})`);const De=await Ne.json(),Ue=new Set(["ENR_CANCEL","ENR_WITHDRAW"]),Xe=(Array.isArray(De)?De:[]).filter(Ge=>!Ue.has(Ge.enrollStatusCd)).map(Ge=>({enrollId:String(Ge.enrollId||""),studentNo:String(Ge.studentNo||""),studentName:`${Ge.lastName||""}${Ge.firstName||""}`.trim(),deptName:Ge.univDeptName||Ge.deptName||""})).filter(Ge=>Ge.enrollId);w(Xe),W(` ${Xe.length} .`)}catch(de){const Ne=de instanceof Error?de.message:"     .";w([]),U(Ne),k(Ne)}finally{B(!1)}};x.useEffect(()=>{G()},[t]),x.useEffect(()=>{E(de=>{const Ne=new Set(R.map(Xe=>Xe.enrollId)),De=new Set(L.flatMap(Xe=>Xe.members)),Ue=new Set;return de.forEach(Xe=>{Ne.has(Xe)&&!De.has(Xe)&&Ue.add(Xe)}),Ue})},[R,L]);const Y=x.useMemo(()=>new Set(L.flatMap(de=>de.members)),[L]),ee=x.useMemo(()=>{const de=V.trim().toLowerCase();return R.filter(Ne=>Y.has(Ne.enrollId)?!1:de?Ne.studentNo.toLowerCase().includes(de)||Ne.studentName.toLowerCase().includes(de)||Ne.deptName.toLowerCase().includes(de):!0)},[R,V,Y]),ae=de=>{E(Ne=>{const De=new Set(Ne);return De.has(de)?De.delete(de):De.add(de),De})},xe=()=>{if(H.size===0){k("  .");return}let de=0,Ne="";if($(De=>{const Ue=De.map(pt=>({...pt,members:[...pt.members]}));Ue.length===0&&Ue.push(Mv(0));const Xe=Ue.length-1,Ge=Ue[Xe],et=new Set(Ge.members);return H.forEach(pt=>{et.has(pt)||(et.add(pt),de+=1)}),Ge.groupName.trim()||(Ge.groupName=` ${Xe+1}`),Ge.members=Array.from(et),Ne=Ge.groupName,Ue}),de===0){k("  .");return}E(new Set),W(`${Ne} ${de} .`)},me=()=>{const de=L.reduce((Ne,De)=>Ne+De.members.length,0);if(de===0){W("  .");return}$(Ne=>Ne.map(De=>({...De,members:[],leaderEnrollId:null}))),W(` . ( ${de})`)},$e=()=>{$(de=>{const Ne=de.map(De=>({...De,members:[...De.members]}));return Ne.push(Mv(Ne.length)),Ne})},se=()=>{const de=L.length,Ne=L.filter(Ue=>Ue.members.length>0);$(Ne);const De=de-Ne.length;De>0?W(`  ${De} .`):W("   .")},ue=(de,Ne)=>{$(De=>De.map(Ue=>Ue.tempId===de?{...Ue,groupName:Ne}:Ue))},te=de=>{$(Ne=>Ne.map(De=>De.tempId===de?{...De,members:[],leaderEnrollId:null}:De)),W(" .")},oe=de=>{$(Ne=>Ne.filter(De=>De.tempId!==de)),W(" .")},we=(de,Ne)=>{$(De=>De.map(Ue=>Ue.tempId===de?{...Ue,leaderEnrollId:Ne}:Ue))},_e=(de,Ne)=>{$(De=>De.map(Ue=>{if(Ue.tempId!==de)return Ue;const Xe=Ue.members.filter(Ge=>Ge!==Ne);return{...Ue,members:Xe,leaderEnrollId:Ue.leaderEnrollId===Ne?null:Ue.leaderEnrollId}}))},He=async de=>{const Ne=Array.from(de.target.files||[]);if(Ne.length!==0){if(!t){k("  .");return}if(Ne.length>5){k(" 5   .");return}try{P(),S(!0);const De=new FormData;Ne.forEach(Rn=>De.append("files",Rn));const Ue=new URLSearchParams({type:"task"}),Xe=`/classroom/api/v1/common/${encodeURIComponent(t)}/upload?${Ue}`,Ge=await fetch(Xe,{method:"POST",body:De,credentials:"include"});if(!Ge.ok)throw new Error(`   (${Ge.status})`);const et=await Ge.json(),pt=et.bundleId||et.fileId||Array.isArray(et.fileIds)&&et.fileIds[0]||Array.isArray(et.files)&&et.files[0]?.fileId||Array.isArray(et.details)&&et.details[0]?.fileId||"",Os=Array.isArray(et.files)&&et.files||Array.isArray(et.details)&&et.details||[];N(pt),C(Os),W(" .")}catch(De){k(De instanceof Error?De.message:"    .")}finally{S(!1),de.target.value=""}}};x.useEffect(()=>{let de=!0,Ne=null;const De=async()=>{if(!(!de||Q.current)&&!(!window.ClassicEditor||!O.current))try{const Ge=O.current.ckeditorInstance;Ge&&await Ge.destroy();const et=await window.ClassicEditor.create(O.current,{toolbar:["heading","|","bold","italic","link","bulletedList","numberedList","blockQuote","|","insertTable","undo","redo"],placeholder:" ,  ,   ."});if(!de){et.destroy().catch(console.error);return}Ne=et,Q.current=et,O.current.ckeditorInstance=et,et.model.document.on("change:data",()=>{h(et.getData())})}catch(Ge){console.error("CKEditor initialization failed:",Ge)}},Xe=setTimeout(()=>{if(window.ClassicEditor)De();else{const Ge=document.querySelector('script[src*="ckeditor"]');if(Ge){const et=()=>{de&&De(),Ge.removeEventListener("load",et)};Ge.addEventListener("load",et)}else{const et=document.createElement("script");et.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",et.async=!0,et.onload=()=>{de&&De()},document.head.appendChild(et),Z.current=et}}},100);return()=>{de=!1,clearTimeout(Xe);const Ge=Q.current||Ne;Ge&&Ge.ui&&Ge.ui.view&&Ge.ui.view.element&&Ge.destroy().catch(et=>{console.debug("Editor cleanup:",et)}),Q.current=null,O.current&&(O.current.ckeditorInstance=null),Z.current=null}},[]);const be=async de=>{de.preventDefault(),P();try{if(!t)throw new Error("  .");const Ne=o.trim(),De=Q.current?Q.current.getData().trim():u.trim(),Ue=Dv(m),Xe=Dv(b);if(!Ne)throw new Error(" .");if(!De)throw new Error("  .");if(!Ue)throw new Error("  .");if(Ue&&Xe&&Ue>Xe)throw new Error("     .");const Ge={grouptaskName:Ne,grouptaskDesc:De,startAt:Ue,endAt:Xe,attachFileId:v||"",groups:L.map(vs=>({groupName:vs.groupName,leaderEnrollId:vs.leaderEnrollId,crews:vs.members}))};S(!0);const et=`${i}/${encodeURIComponent(t)}/group`,pt=await fetch(et,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(Ge),credentials:"include"});if(!pt.ok){let vs="";try{if((pt.headers.get("Content-Type")||"").includes("application/json")){const Ln=await pt.json();vs=Ln?.message||Ln?.error||JSON.stringify(Ln)}else vs=await pt.text()}catch{vs=""}throw new Error(`    (HTTP ${pt.status})${vs?` - ${vs}`:""}`)}const Os=await pt.json(),Rn=Os?.grouptaskId||Os?.id||Os?.data?.grouptaskId;alert("  ."),e(Rn?`/classroom/professor/${encodeURIComponent(t)}/task/group/${encodeURIComponent(Rn)}`:`/classroom/professor/${encodeURIComponent(t)}/task`)}catch(Ne){k(Ne instanceof Error?Ne.message:"    .")}finally{S(!1)}},qe=`mt-2${v||D.length?"":" d-none"}`;return s.jsxs("section",{id:"grouptask-form-root",className:"container py-4","data-lecture-id":t||"","data-prof-base":i,"data-common-base":"/classroom/api/v1/common",children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("nav",{"aria-label":"breadcrumb",children:s.jsxs("ol",{className:"breadcrumb mb-0",children:[s.jsx("li",{className:"breadcrumb-item",children:s.jsx(st,{to:`/classroom/professor/${encodeURIComponent(t||"")}/task/indiv`,children:""})}),s.jsx("li",{className:"breadcrumb-item active","aria-current":"page",children:" "})]})}),s.jsx("div",{className:"d-flex gap-2",children:s.jsx(st,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(t||"")}/task/group`,children:" "})})]}),s.jsxs("form",{id:"grouptask-form",className:"card shadow-sm",autoComplete:"off",onSubmit:be,children:[s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"row g-3 mb-3",children:[s.jsxs("div",{className:"col-12 col-md-6",children:[s.jsx("label",{htmlFor:"grouptask-name",className:"form-label required",children:""}),s.jsx("input",{type:"text",id:"grouptask-name",className:"form-control",maxLength:50,required:!0,placeholder:")   1 ",value:o,onChange:de=>d(de.target.value)}),s.jsx("div",{className:"form-hint",children:" 50"})]}),s.jsxs("div",{className:"col-12 col-md-3",children:[s.jsx("label",{htmlFor:"start-at",className:"form-label required",children:" "}),s.jsx("input",{type:"datetime-local",id:"start-at",className:"form-control",required:!0,value:m,onChange:de=>p(de.target.value)})]}),s.jsxs("div",{className:"col-12 col-md-3",children:[s.jsx("label",{htmlFor:"end-at",className:"form-label",children:" "}),s.jsx("input",{type:"datetime-local",id:"end-at",className:"form-control",value:b,onChange:de=>y(de.target.value)})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"grouptask-desc",className:"form-label required",children:" "}),s.jsx("textarea",{id:"grouptask-desc",className:"form-control d-none",ref:O,defaultValue:u,placeholder:" ,  ,   ."}),s.jsx("div",{className:"form-hint",children:" 4000 ()"})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"form-label",htmlFor:"file-input",children:""}),s.jsx("input",{type:"file",id:"file-input",className:"form-control",multiple:!0,onChange:He,disabled:A}),s.jsx("div",{className:"form-hint",children:"      . ( 5)"}),s.jsx("input",{type:"hidden",id:"attach-file-id",value:v,readOnly:!0}),s.jsxs("div",{id:"current-attach-box",className:qe,children:[s.jsxs("div",{className:"alert alert-info py-2 mb-2",children:["   ID: ",s.jsx("span",{id:"current-file-id",children:v||"()"})]}),D.length>0&&s.jsx("ul",{id:"current-file-list",className:"list-group small",children:D.map((de,Ne)=>{const De=de.originName??de.originalName??` ${de.fileOrder??de.order??Ne+1}`,Ue=de.extension?`.${de.extension}`:"",Xe=typeof de.fileSize=="number"?` (${de.fileSize.toLocaleString()}B)`:"";return s.jsxs("li",{className:"list-group-item",children:[De,Ue,Xe]},`${de.fileId||De}-${Ne}`)})})]})]}),s.jsx("hr",{className:"my-4"}),s.jsx("h2",{className:"h6 mb-2",children:" "}),s.jsx("div",{className:"form-hint mb-2",children:"      / ."}),s.jsxs("div",{className:"group-builder",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[s.jsx("strong",{children:" "}),s.jsxs("div",{className:"d-flex gap-2",children:[s.jsx("input",{type:"text",id:"student-search",className:"form-control form-control-sm",placeholder:"/ ",style:{width:180},value:V,onChange:de=>q(de.target.value)}),s.jsx("button",{className:"btn btn-sm btn-outline-secondary",type:"button",id:"btn-refresh-students",onClick:G,children:""})]})]}),s.jsxs("div",{className:"student-list list-scroll",id:"student-list",children:[_&&s.jsx("div",{className:"p-2 text-muted small text-center",children:" ..."}),!_&&T&&s.jsx("div",{className:"p-2 text-danger small text-center",children:T}),!_&&!T&&ee.length===0&&s.jsx("div",{className:"p-2 text-muted small text-center",children:"  ."}),!_&&!T&&ee.map(de=>s.jsx("label",{className:"d-flex align-items-center justify-content-between px-2 py-1 border-bottom",children:s.jsxs("span",{className:"small text-truncate",children:[s.jsx("input",{type:"checkbox",className:"form-check-input me-2","data-enroll":de.enrollId,checked:H.has(de.enrollId),onChange:()=>ae(de.enrollId)}),s.jsx("b",{children:de.studentNo}),"  ",de.studentName,de.deptName?s.jsxs("small",{className:"text-muted",children:[" / ",de.deptName]}):null]})},de.enrollId))]}),s.jsx("div",{className:"form-hint mt-1",children:'   "  "    .'})]}),s.jsxs("div",{className:"d-flex flex-column align-items-center justify-content-center",children:[s.jsx("button",{className:"btn btn-sm btn-primary mb-2",type:"button",id:"btn-assign-selected",onClick:xe,children:"  "}),s.jsx("button",{className:"btn btn-sm btn-outline-secondary",type:"button",id:"btn-unassign-all",onClick:me,children:"  "})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[s.jsx("strong",{children:""}),s.jsxs("div",{className:"d-flex gap-2",children:[s.jsx("button",{className:"btn btn-sm btn-outline-primary",type:"button",id:"btn-add-group",onClick:$e,children:" "}),s.jsx("button",{className:"btn btn-sm btn-outline-danger",type:"button",id:"btn-remove-empty-groups",onClick:se,children:"  "})]})]}),s.jsxs("div",{className:"group-list list-scroll p-2",id:"group-list",children:[L.length===0&&s.jsx("div",{className:"p-2 text-muted small text-center",children:" .    ."}),L.map(de=>s.jsxs("div",{className:"group-card","data-gid":de.tempId,children:[s.jsxs("div",{className:"group-header mb-2",children:[s.jsx("div",{className:"d-flex align-items-center gap-2",children:s.jsx("input",{className:"form-control form-control-sm group-name-input","data-gid":de.tempId,style:{width:220},value:de.groupName,onChange:Ne=>ue(de.tempId,Ne.target.value),placeholder:" "})}),s.jsxs("div",{className:"d-flex gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary btn-clear-members",onClick:()=>te(de.tempId),children:" "}),s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger btn-delete-group",onClick:()=>oe(de.tempId),children:" "})]})]}),s.jsxs("div",{className:"group-members",children:[de.members.length===0&&s.jsx("div",{className:"text-muted small",children:"  ."}),de.members.map(Ne=>{const De=R.find(Xe=>Xe.enrollId===Ne);if(!De)return null;const Ue=de.leaderEnrollId===Ne;return s.jsxs("div",{className:`member-badge${Ue?" leader":""}`,"data-enroll":Ne,children:[s.jsxs("span",{children:[s.jsx("b",{children:De.studentNo}),"  ",De.studentName]}),Ue&&s.jsx("span",{className:"badge text-bg-primary",children:""}),s.jsxs("span",{className:"member-actions",children:[!Ue&&s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary btn-set-leader",onClick:()=>we(de.tempId,Ne),children:" "}),s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-danger btn-remove-member",onClick:()=>_e(de.tempId,Ne),children:""})]})]},Ne)})]})]},de.tempId))]})]})]})]}),s.jsx("div",{className:"card-footer d-flex justify-content-end gap-2",children:s.jsx("button",{type:"submit",id:"btn-submit",className:"btn btn-primary",disabled:A,children:A?" ...":""})})]}),M&&s.jsx("div",{id:"error-box",className:"alert alert-danger mt-3",role:"alert",children:M}),z&&s.jsx("div",{id:"info-box",className:"alert alert-success mt-3",role:"alert",children:z})]})}const qc=t=>String(t).padStart(2,"0"),$v=t=>{if(!t)return"";const e=new Date(t);return Number.isNaN(e.getTime())?"":`${e.getFullYear()}-${qc(e.getMonth()+1)}-${qc(e.getDate())}T${qc(e.getHours())}:${qc(e.getMinutes())}`},rM=t=>Array.isArray(t)?t:t?.attachFileList&&Array.isArray(t.attachFileList)?t.attachFileList:[],oM=(t,e)=>{if(!Array.isArray(e))return"";for(const a of e){if(a?.bundleId)return a.bundleId;if(a?.fileId)return a.fileId}return""};function cM(){const{lectureId:t,grouptaskId:e}=ht(),a=is(),i="/classroom/api/v1/professor/task",o="/classroom/api/v1/common/task",[d,u]=x.useState(""),[h,m]=x.useState(""),[p,b]=x.useState(""),[y,v]=x.useState(""),[N,D]=x.useState(""),[C,A]=x.useState([]),[S,M]=x.useState(!1),[F,z]=x.useState(!0),[K,R]=x.useState(""),[w,_]=x.useState(""),B=x.useRef(null),T=x.useRef(null);x.useEffect(()=>{let q=!1,H=null;const E=async()=>{if(!(q||T.current)&&B.current&&window.ClassicEditor)try{const O=B.current.ckeditorInstance;O&&await O.destroy();const Q=await window.ClassicEditor.create(B.current);if(q){Q.destroy().catch(console.error);return}H=Q,T.current=Q,B.current.ckeditorInstance=Q}catch(O){console.error("CKEditor initialization failed:",O)}},$=setTimeout(()=>{if(window.ClassicEditor)E();else{const O=document.querySelector('script[src*="ckeditor"]');if(O){const Q=()=>{q||E(),O.removeEventListener("load",Q)};O.addEventListener("load",Q)}else{const Q=document.createElement("script");Q.src="https://cdn.ckeditor.com/ckeditor5/39.0.1/classic/ckeditor.js",Q.onload=()=>{q||E()},document.head.appendChild(Q)}}},100);return()=>{q=!0,clearTimeout($);const O=T.current||H;O&&O.ui&&O.ui.view&&O.ui.view.element&&O.destroy().catch(Q=>{console.debug("Editor cleanup:",Q)}),T.current=null,B.current&&(B.current.ckeditorInstance=null)}},[]),x.useEffect(()=>{(async()=>{try{z(!0),R("");const H=`${i}/${encodeURIComponent(t)}/group/${encodeURIComponent(e)}`,E=await fetch(H,{headers:{Accept:"application/json"},credentials:"include"});if(!E.ok)throw new Error(`  (HTTP ${E.status})`);const L=await E.json();u(L.grouptaskName||""),b($v(L.startAt)),v($v(L.endAt));const $=rM(L.attachFileList),O=L.fileId||L.attachFileId||oM("",$);D(O),A($),z(!1);const Q=setInterval(()=>{T.current&&(T.current.setData(L.grouptaskDesc||""),clearInterval(Q))},100);setTimeout(()=>clearInterval(Q),1e4)}catch(H){R(H.message||String(H)),z(!1)}})()},[t,e,i]);const U=async q=>{const H=Array.from(q.target.files||[]);if(H.length!==0){if(H.length>5){R(" 5   .");return}try{M(!0),R(""),_("");const E=new FormData;for(const k of H)E.append("files",k);const L=`/classroom/api/v1/common/${encodeURIComponent(t)}/upload?type=task`,$=await fetch(L,{method:"POST",body:E,credentials:"include"});if(!$.ok)throw new Error(`(${$.status})  `);const O=await $.json(),Q=O.bundleId||O.fileId||Array.isArray(O.fileIds)&&O.fileIds[0]||Array.isArray(O.files)&&O.files[0]?.fileId||Array.isArray(O.details)&&O.details[0]?.fileId||"",Z=Array.isArray(O.files)&&O.files||Array.isArray(O.details)&&O.details||[];D(Q),A(Z),_("    .")}catch(E){R(E.message||String(E))}finally{M(!1)}}},V=async q=>{q.preventDefault();try{if(M(!0),R(""),_(""),!d.trim())throw new Error(" .");const H=T.current?T.current.getData():h;if(!H.trim())throw new Error("  .");if(!p)throw new Error("  .");if(p&&y&&p>y)throw new Error("     .");const E={grouptaskId:e,grouptaskName:d.trim(),grouptaskDesc:H.trim(),startAt:p,endAt:y||null,attachFileId:N||""},L=`${i}/${encodeURIComponent(t)}/group/${encodeURIComponent(e)}`,$=await fetch(L,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(E)});if(!$.ok){const O=await $.text().catch(()=>$.statusText);throw new Error(` (${$.status}): ${O}`)}await Ve.fire({title:" ",text:" .",icon:"success",confirmButtonText:""}),a(`/classroom/professor/${encodeURIComponent(t)}/task/group/${encodeURIComponent(e)}`)}catch(H){R(H.message||String(H))}finally{M(!1)}};return F?s.jsx("section",{id:"task-group-edit-root",className:"container py-4",children:s.jsx("div",{className:"text-muted",children:" ..."})}):s.jsxs("section",{id:"task-group-edit-root",className:"container py-4",children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("nav",{"aria-label":"breadcrumb",children:s.jsxs("ol",{className:"breadcrumb mb-0",children:[s.jsxs("li",{children:[s.jsx(st,{className:"text-decoration-none",to:`/classroom/professor/${encodeURIComponent(t)}/task`,children:""}),s.jsx("span",{className:"mx-2",children:">"})]}),s.jsxs("li",{children:[s.jsx(st,{className:"text-decoration-none",to:`/classroom/professor/${encodeURIComponent(t)}/task`,children:" "}),s.jsx("span",{className:"mx-2",children:">"})]}),s.jsx("li",{className:"breadcrumb-item active fw-bold","aria-current":"page",children:" "})]})}),s.jsxs("div",{className:"d-flex gap-2",children:[s.jsx(st,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(t)}/task/group/${encodeURIComponent(e)}`,children:""}),s.jsx(st,{className:"btn btn-sm btn-outline-secondary",to:`/classroom/professor/${encodeURIComponent(t)}/task`,children:""})]})]}),s.jsxs("form",{id:"task-group-form",className:"card shadow-sm",onSubmit:V,children:[s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"task-name",className:"form-label",children:""}),s.jsx("input",{id:"task-name",type:"text",className:"form-control",maxLength:50,required:!0,disabled:S,value:d,onChange:q=>u(q.target.value),placeholder:"   "}),s.jsx("div",{className:"text-muted small",children:" 50"})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("label",{htmlFor:"task-desc",className:"form-label",children:" "}),s.jsx("div",{ref:B,id:"task-desc"}),s.jsx("div",{className:"text-muted small",children:" 4000()"})]}),s.jsxs("div",{className:"row g-3",children:[s.jsxs("div",{className:"col-12 col-md-6",children:[s.jsx("label",{htmlFor:"start-at",className:"form-label",children:" "}),s.jsx("input",{id:"start-at",type:"datetime-local",className:"form-control",required:!0,disabled:S,value:p,onChange:q=>b(q.target.value)})]}),s.jsxs("div",{className:"col-12 col-md-6",children:[s.jsx("label",{htmlFor:"end-at",className:"form-label",children:" "}),s.jsx("input",{id:"end-at",type:"datetime-local",className:"form-control",disabled:S,value:y,onChange:q=>v(q.target.value)})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{className:"form-label",children:""}),s.jsx("input",{id:"file-input",type:"file",className:"form-control",multiple:!0,disabled:S,onChange:U}),s.jsx("div",{className:"text-muted small",children:"      . ( 5)"}),N&&s.jsxs("div",{id:"current-attach-box",className:"mt-2",children:[s.jsxs("div",{className:"alert alert-info py-2 mb-2",children:["  ID: ",s.jsx("span",{id:"current-file-id",children:N||"()"})]}),s.jsx("ul",{id:"current-file-list",className:"list-group small",children:C.map((q,H)=>{const E=q.originName??q.originalName??` ${q.fileOrder??q.order??H}`,L=q.extension?`.${q.extension}`:"",$=typeof q.fileSize=="number"?` (${q.fileSize.toLocaleString()}B)`:"",O=q.fileOrder??q.order,Q=O==null?"#":`${o}/${encodeURIComponent(t)}/group/${encodeURIComponent(e)}/attach/${encodeURIComponent(O)}`;return s.jsxs("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[s.jsxs("div",{className:"text-truncate",style:{maxWidth:"70%"},children:[E,L,$]}),O!=null&&s.jsx("a",{className:"btn btn-sm btn-outline-secondary",href:Q,children:""})]},H)})})]})]})]}),s.jsxs("div",{className:"card-footer bg-white d-flex justify-content-between align-items-center flex-wrap gap-2",children:[s.jsxs("div",{children:[K&&s.jsx("div",{className:"alert alert-danger py-2 mb-0",children:K}),w&&s.jsx("div",{className:"alert alert-success py-2 mb-0",children:w})]}),s.jsxs("div",{className:"d-flex gap-2",children:[s.jsx("button",{type:"button",className:"btn btn-outline-secondary",disabled:S,onClick:()=>a(`/classroom/professor/${encodeURIComponent(t)}/task/group/${encodeURIComponent(e)}`),children:""}),s.jsx("button",{type:"submit",className:"btn btn-primary",disabled:S,children:S?" ...":""})]})]})]}),s.jsxs("div",{className:"alert alert-info mt-3",children:[s.jsx("strong",{children:":"}),"     (, , , )   .        ."]})]})}function dM(){const{lectureId:t}=ht(),{students:e,setStudents:a,getStudentPhotoUrl:i,getStudentPhotoBlobUrl:o,cacheStudentPhotoBlobUrl:d}=ds(),[u,h]=x.useState([]),[m,p]=x.useState(!0),[b,y]=x.useState(null),[v,N]=x.useState({department:"all",grade:"all",name:""}),[D,C]=x.useState({}),A=x.useRef(new Set);x.useEffect(()=>{let R=!0;return(async()=>{try{if(p(!0),y(null),Array.isArray(e)){h(e);return}const w=`/classroom/api/v1/professor/${encodeURIComponent(t)}/students`,_=await fetch(w,{headers:{Accept:"application/json"},credentials:"include"});if(!_.ok)throw new Error(`(${_.status})    .`);const B=await _.json();if(!R)return;const T=Array.isArray(B)?B:[];h(T),a(T)}catch(w){if(!R)return;y(w)}finally{R&&p(!1)}})(),()=>{R=!1}},[t,e,a]);const S=x.useMemo(()=>{if(!u)return[];const R=u.map(w=>w.univDeptName).filter(Boolean);return[...new Set(R)].sort()},[u]),M=x.useMemo(()=>{if(!u)return[];const R=u.map(w=>w.gradeName).filter(Boolean);return[...new Set(R)].sort()},[u]),F=x.useMemo(()=>u?u.filter(R=>{const w=[R.lastName,R.firstName].filter(Boolean).join(""),_=v.name?w.includes(v.name):!0,B=v.department==="all"?!0:R.univDeptName===v.department,T=v.grade==="all"?!0:R.gradeName===v.grade;return _&&B&&T}):[],[u,v]),z=x.useMemo(()=>F.map(R=>R.studentNo).filter(Boolean),[F]);x.useEffect(()=>{z.forEach(R=>{if(!R||A.current.has(R))return;const w=o(R);if(w){C(B=>B[R]?B:{...B,[R]:w});return}const _=i(R,t);_&&(A.current.add(R),fetch(_,{credentials:"include"}).then(B=>B.ok?B.blob():null).then(B=>{if(!B)return;const T=URL.createObjectURL(B);d(R,T),C(U=>({...U,[R]:T}))}).catch(()=>{}).finally(()=>{A.current.delete(R)}))})},[z,t,o,i,d]);const K=R=>{const{name:w,value:_}=R.target;N(B=>({...B,[w]:_}))};return s.jsxs("div",{children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-3",children:[s.jsx("h1",{className:"h4 mb-0",children:""}),s.jsxs("div",{className:"text-muted small",children:[" ",F.length,""]})]}),s.jsx("div",{className:"card shadow-sm mb-4 p-0",children:s.jsx("div",{className:"card-body p-3",children:s.jsx("div",{className:"row",children:s.jsx("div",{className:"col-lg-7",children:s.jsxs("div",{className:"row g-2 align-items-end",children:[s.jsxs("div",{className:"col-md",children:[s.jsx("label",{htmlFor:"filter-department",className:"form-label small",children:""}),s.jsxs("select",{id:"filter-department",name:"department",className:"form-select form-select-sm",value:v.department,onChange:K,children:[s.jsx("option",{value:"all",children:""}),S.map(R=>s.jsx("option",{value:R,children:R},R))]})]}),s.jsxs("div",{className:"col-md",children:[s.jsx("label",{htmlFor:"filter-grade",className:"form-label small",children:""}),s.jsxs("select",{id:"filter-grade",name:"grade",className:"form-select form-select-sm",value:v.grade,onChange:K,children:[s.jsx("option",{value:"all",children:""}),M.map(R=>s.jsx("option",{value:R,children:R},R))]})]}),s.jsxs("div",{className:"col-md",children:[s.jsx("label",{htmlFor:"filter-name",className:"form-label small",children:""}),s.jsx("input",{type:"text",id:"filter-name",name:"name",className:"form-control form-control-sm",value:v.name,onChange:K,placeholder:" ...",style:{padding:"4px"}})]})]})})})})}),m&&s.jsx("div",{className:"text-muted",children:" "}),b&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:String(b.message||b)}),!m&&!b&&s.jsx("div",{className:"row row-cols-2 row-cols-md-3 row-cols-lg-4 row-cols-xl-5 g-3",children:F.length===0?s.jsx("div",{className:"col-12",children:s.jsx("div",{className:"text-center text-muted py-5",children:"  ."})}):F.map((R,w)=>{const _=R.studentNo||R.userId||"",B=[R.lastName,R.firstName].filter(Boolean).join("")||_||"",T=R.univDeptName||"-",U=R.gradeName||"",V=R.email||"",q=D[_]||o(_)||null;return s.jsx("div",{className:"col",children:s.jsxs(st,{to:`/classroom/professor/${encodeURIComponent(t)}/student/${encodeURIComponent(_)}`,className:"card h-100 text-decoration-none text-reset p-0",children:[q&&s.jsx("div",{className:"bg-light rounded-top",style:{overflow:"hidden"},children:s.jsx("img",{src:q,alt:`${B} `,className:"w-100",style:{display:"block",height:"auto",objectFit:"contain"}})}),s.jsxs("div",{className:"card-body p-3",children:[s.jsxs("div",{className:"d-flex align-items-center gap-2 mb-1",children:[s.jsx("h3",{className:"h6 mb-0",children:B}),R.enrollStatusName&&s.jsx("span",{className:`badge ${R.enrollStatusCd==="ENR_ING"?"bg-primary":R.enrollStatusCd==="ENR_DONE"?"bg-success":R.enrollStatusCd==="ENR_CANCEL"?"bg-warning text-dark":R.enrollStatusCd==="ENR_WITHDRAW"?"bg-danger":"bg-secondary"}`,children:R.enrollStatusName})]}),s.jsxs("div",{className:"text-muted small mb-2",children:[" ",_||"-"]}),s.jsxs("dl",{className:"row small mb-0",children:[s.jsx("dt",{className:"col-4",children:""}),s.jsx("dd",{className:"col-8 text-end text-truncate",title:T,children:T}),U&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"col-4",children:""}),s.jsx("dd",{className:"col-8 text-end",children:U})]}),V&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"col-4",children:""}),s.jsx("dd",{className:"col-8 text-end text-truncate",title:V,children:V})]})]})]})]})},_||w)})})]})}const jl=t=>String(t).padStart(2,"0"),En=(t,e=!1)=>{if(!t)return"-";const a=new Date(t);if(Number.isNaN(a.getTime()))return"-";const i=`${a.getFullYear()}-${jl(a.getMonth()+1)}-${jl(a.getDate())}`,o=`${jl(a.getHours())}:${jl(a.getMinutes())}${e?`:${jl(a.getSeconds())}`:""}`;return`${i} ${o}`},uM=t=>{if(!t)return"-";const e=new Date(t);return Number.isNaN(e.getTime())?"-":`${e.getFullYear()}-${jl(e.getMonth()+1)}-${jl(e.getDate())}`},hM=t=>{const e=(t||"").toUpperCase();return e==="OFF"?"":e==="ON"||e==="ONL"?"":""},wd=t=>{if(t==null||t==="")return null;const e=Number(t);return Number.isFinite(e)?e:null},Rv=t=>{const e=wd(t?.modifiedScore);if(e!=null)return{score:e,type:"modified"};const a=wd(t?.autoScore);return a!=null?{score:a,type:"auto"}:{score:null,type:null}},mM=t=>{switch(t){case"ATTD_OK":return"badge bg-success-subtle text-success-emphasis";case"ATTD_LATE":return"badge bg-warning-subtle text-warning-emphasis";case"ATTD_ABSENT":return"badge bg-danger-subtle text-danger-emphasis";default:return"badge bg-secondary-subtle text-secondary-emphasis"}},Nm=(t,e,a)=>s.jsx("span",{className:t?"badge bg-success-subtle text-success-emphasis":"badge bg-secondary-subtle text-secondary-emphasis",children:t?e:a});function fM(){const{lectureId:t,studentNo:e}=ht(),{students:a,setStudents:i,getStudentPhotoUrl:o}=ds(),[d,u]=x.useState(null),[h,m]=x.useState(null),[p,b]=x.useState(!Array.isArray(a)),[y,v]=x.useState({loading:!0,records:[],error:null}),[N,D]=x.useState({loading:!0,records:[],error:null}),[C,A]=x.useState({loading:!0,records:[],error:null}),[S,M]=x.useState({loading:!0,records:[],error:null}),[F,z]=x.useState(null);x.useEffect(()=>{if(!t||!e)return;if(Array.isArray(a)){const L=a.find($=>String($.studentNo||$.userId||"")===String(e));u(L||null),b(!1),m(L?null:"    .");return}let E=!0;return b(!0),m(null),(async()=>{try{const L=`/classroom/api/v1/professor/${encodeURIComponent(t)}/students`,$=await fetch(L,{headers:{Accept:"application/json"},credentials:"include"});if(!$.ok)throw new Error(`(${$.status})     .`);const O=await $.json();if(!E)return;const Q=Array.isArray(O)?O:[];i(Q);const Z=Q.find(k=>String(k.studentNo||k.userId||"")===String(e));u(Z||null),m(Z?null:"    .")}catch(L){if(!E)return;u(null),m(L instanceof Error?L.message:"   .")}finally{E&&b(!1)}})(),()=>{E=!1}},[t,e,a,i]),x.useEffect(()=>{if(!t||!e)return;let E=!0;v($=>({...$,loading:!0,error:null}));const L=`/classroom/api/v1/professor/${encodeURIComponent(t)}/${encodeURIComponent(e)}/exam`;return(async()=>{try{const $=await fetch(L,{headers:{Accept:"application/json"},credentials:"include"});if(!$.ok)throw new Error(`(${$.status})     .`);const O=await $.json();if(!E)return;const Q=Array.isArray(O)?O:[];Q.sort((Z,k)=>{const W=new Date(Z?.startAt||0).getTime();return new Date(k?.startAt||0).getTime()-W}),v({loading:!1,records:Q,error:null})}catch($){if(!E)return;v({loading:!1,records:[],error:$ instanceof Error?$:new Error("     .")})}})(),()=>{E=!1}},[t,e]),x.useEffect(()=>{if(!t||!e)return;let E=!0;D($=>({...$,loading:!0,error:null}));const L=`/classroom/api/v1/professor/${encodeURIComponent(t)}/${encodeURIComponent(e)}/attendance`;return(async()=>{try{const $=await fetch(L,{headers:{Accept:"application/json"},credentials:"include"});if(!$.ok)throw new Error(`(${$.status})     .`);const O=await $.json();if(!E)return;const Q=Array.isArray(O)?O:[];Q.sort((Z,k)=>{const W=Z?.lctRound??Z?.lctPrintRound??0,P=k?.lctRound??k?.lctPrintRound??0;return W-P}),D({loading:!1,records:Q,error:null})}catch($){if(!E)return;D({loading:!1,records:[],error:$ instanceof Error?$:new Error("     .")})}})(),()=>{E=!1}},[t,e]),x.useEffect(()=>{if(!t||!e)return;let E=!0;A($=>({...$,loading:!0,error:null}));const L=`/classroom/api/v1/professor/${encodeURIComponent(t)}/${encodeURIComponent(e)}/indivtask`;return(async()=>{try{const $=await fetch(L,{headers:{Accept:"application/json"},credentials:"include"});if(!$.ok)throw new Error(`(${$.status})     .`);const O=await $.json();if(!E)return;const Q=Array.isArray(O)?O:[];Q.sort((Z,k)=>{const W=new Date(Z?.startAt||0).getTime();return new Date(k?.startAt||0).getTime()-W}),A({loading:!1,records:Q,error:null})}catch($){if(!E)return;A({loading:!1,records:[],error:$ instanceof Error?$:new Error("     .")})}})(),()=>{E=!1}},[t,e]),x.useEffect(()=>{if(!t||!e)return;let E=!0;M($=>({...$,loading:!0,error:null}));const L=`/classroom/api/v1/professor/${encodeURIComponent(t)}/${encodeURIComponent(e)}/grouptask`;return(async()=>{try{const $=await fetch(L,{headers:{Accept:"application/json"},credentials:"include"});if(!$.ok)throw new Error(`(${$.status})     .`);const O=await $.json();if(!E)return;const Q=Array.isArray(O)?O:[];Q.sort((Z,k)=>{const W=new Date(Z?.startAt||0).getTime();return new Date(k?.startAt||0).getTime()-W}),M({loading:!1,records:Q,error:null})}catch($){if(!E)return;M({loading:!1,records:[],error:$ instanceof Error?$:new Error("     .")})}})(),()=>{E=!1}},[t,e]),x.useEffect(()=>{if(y.error){z({variant:"alert-danger",message:"     ."});return}if(N.error){z({variant:"alert-danger",message:"     ."});return}!y.loading&&!N.loading&&y.records.length===0&&N.records.length===0?z({variant:"alert-info",message:"      ."}):z(null)},[y.loading,y.error,y.records.length,N.loading,N.error,N.records.length]);const K=x.useMemo(()=>d?[d.lastName,d.firstName].filter(Boolean).join("")||d.userName||d.userId||e||"":e||"",[d,e]),R=x.useMemo(()=>{if(!d)return"";const E=d.univDeptName||"",L=d.gradeName||"";return[E,L].filter(Boolean).join("  ")},[d]);d?.email,d?.enrollStatusName;const w=d?o(d.studentNo||d.userId||"",t):null,_=x.useMemo(()=>{const E=y.records.length,L=y.records.reduce((O,Q)=>O+(wd(Q?.weightValue)??0),0);if(!E)return{count:E,weightSum:L,finalClass:"alert alert-warning",finalText:"        ."};let $=0;if(y.records.forEach(O=>{const Q=wd(O?.weightValue)??0,Z=Rv(O),k=Z.score!=null&&O?.record?Z.score:0;$+=k*(Q/100)}),Math.abs(L-100)<1e-6){const O=Number.isFinite($)?$.toFixed(2):"0.00";return{count:E,weightSum:L,finalClass:"alert alert-primary",finalText:`   100%    ${O}.`}}return{count:E,weightSum:L,finalClass:"alert alert-warning",finalText:`     ${L}     .`}},[y.records]),B=x.useMemo(()=>N.records.map(E=>{const L=E?.lctPrintRound??E?.lctRound,$=L!=null?`${L}`:"-",O=E?.qrcodeFileId?"QR":"";return{roundLabel:$,methodLabel:O}}),[N.records]),T=x.useMemo(()=>N.records.length?[{label:"",cells:N.records.map((E,L)=>s.jsx("td",{className:"text-center",children:uM(E?.attDay)},`date-${L}`))},{label:"",cells:N.records.map((E,L)=>s.jsx("td",{className:"text-center",children:s.jsx("span",{className:mM(E?.attStatusCd),children:E?.attStatusName||""})},`status-${L}`))},{label:" ",cells:N.records.map((E,L)=>s.jsx("td",{className:"text-center",children:E?.attAt?En(E.attAt,!0):"-"},`time-${L}`))},{label:"",cells:N.records.map((E,L)=>s.jsx("td",{className:"text-center text-muted small",children:E?.attComment||"-"},`note-${L}`))}]:[],[N.records]),U=x.useMemo(()=>{const E=N.records.length;let L=0,$=0,O=0,Q=0,Z=0;N.records.forEach(ee=>{ee.attStatusCd==="ATTD_OK"?L++:ee.attStatusCd==="ATTD_LATE"?$++:ee.attStatusCd==="ATTD_EARLY"?O++:ee.attStatusCd==="ATTD_NO"||ee.attStatusCd==="ATTD_ABSENT"?Q++:ee.attStatusCd==="ATTD_EXCUSE"&&Z++});const k=E>0?(L/E*100).toFixed(1):0,W=E>0?($/E*100).toFixed(1):0,P=E>0?(O/E*100).toFixed(1):0,G=E>0?(Q/E*100).toFixed(1):0,Y=E>0?(Z/E*100).toFixed(1):0;return{totalLectures:E,attended:L,tardy:$,earlyLeave:O,absent:Q,excused:Z,attendanceRate:k,tardyRate:W,earlyLeaveRate:P,absentRate:G,excusedRate:Y}},[N.records]),V=x.useMemo(()=>y.loading?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"   ..."})}):y.error?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center text-danger py-4",children:y.error.message||"   ."})}):y.records.length?y.records.map((E,L)=>{const $=E?.startAt?En(E.startAt):"",O=E?.endAt?En(E.endAt):"",Q=[hM(E?.examType)],Z=[$,O?`~ ${O}`:""].filter(Boolean).join(" ");Z&&Q.push(Z);const k=Rv(E),W=k.type==="modified"?" ()":"";return s.jsxs("tr",{children:[s.jsxs("td",{children:[s.jsx("div",{className:"fw-semibold",children:E?.examName||"-"}),s.jsx("div",{className:"text-muted small",children:Q.join("  ")})]}),s.jsx("td",{className:"text-center",children:E?.weightValue!=null?E.weightValue:"-"}),s.jsx("td",{className:"text-center",children:Nm(E?.record,"","")}),s.jsx("td",{className:"text-center",children:E?.submitAt?En(E.submitAt,!0):"-"}),s.jsx("td",{className:"text-center",children:k.score!=null?`${k.score}${W}`:"-"}),s.jsx("td",{className:"text-muted small",children:E?.modifyReason||""})]},E?.examId||E?.lctExamId||L)}):s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"  ."})}),[y.loading,y.error,y.records]),q=x.useMemo(()=>C.loading?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"   ..."})}):C.error?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center text-danger py-4",children:C.error.message||"   ."})}):C.records.length?C.records.map((E,L)=>{const $=E?.startAt?En(E.startAt):"",O=E?.endAt?En(E.endAt):"",Q=[$,O?`~ ${O}`:""].filter(Boolean).join(" "),Z=!!E?.submitAt,k=!!E?.evaluAt;return s.jsxs("tr",{children:[s.jsxs("td",{children:[s.jsx("div",{className:"fw-semibold",children:E?.indivtaskName||"-"}),s.jsx("div",{className:"text-muted small",children:Q})]}),s.jsx("td",{className:"text-center",children:Nm(E?.submitTarget,"","")}),s.jsx("td",{className:"text-center",children:E?.submitTarget?Z?s.jsx("span",{className:"badge bg-success-subtle text-success-emphasis",children:" "}):s.jsx("span",{className:"badge bg-warning-subtle text-warning-emphasis",children:""}):"-"}),s.jsx("td",{className:"text-center",children:Z?En(E.submitAt,!0):"-"}),s.jsx("td",{className:"text-center",children:k&&E?.evaluScore!=null?E.evaluScore:"-"}),s.jsx("td",{className:"text-muted small",children:E?.evaluDesc||""})]},E?.indivtaskId||L)}):s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center text-muted py-4",children:"  ."})}),[C.loading,C.error,C.records]),H=x.useMemo(()=>S.loading?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"   ..."})}):S.error?s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"text-center text-danger py-4",children:S.error.message||"   ."})}):S.records.length?S.records.map((E,L)=>{const $=E?.startAt?En(E.startAt):"",O=E?.endAt?En(E.endAt):"",Q=[$,O?`~ ${O}`:""].filter(Boolean).join(" "),Z=!!E?.submitAt,k=!!E?.evaluAt;return s.jsxs("tr",{children:[s.jsxs("td",{children:[s.jsx("div",{className:"fw-semibold",children:E?.grouptaskName||"-"}),s.jsx("div",{className:"text-muted small",children:Q})]}),s.jsx("td",{className:"text-center",children:E?.groupName||"-"}),s.jsx("td",{className:"text-center",children:Nm(E?.submitTarget,"","")}),s.jsx("td",{className:"text-center",children:E?.submitTarget?Z?s.jsx("span",{className:"badge bg-success-subtle text-success-emphasis",children:" "}):s.jsx("span",{className:"badge bg-warning-subtle text-warning-emphasis",children:""}):"-"}),s.jsx("td",{className:"text-center",children:Z?En(E.submitAt,!0):"-"}),s.jsx("td",{className:"text-center",children:k&&E?.evaluScore!=null?E.evaluScore:"-"}),s.jsx("td",{className:"text-muted small",children:E?.evaluDesc||""})]},E?.grouptaskId||L)}):s.jsx("tr",{children:s.jsx("td",{colSpan:7,className:"text-center text-muted py-4",children:"  ."})}),[S.loading,S.error,S.records]);return s.jsxs("section",{id:"student-detail-root",className:"container py-4",children:[p&&s.jsx("div",{className:"text-muted mb-3",children:"   ..."}),h&&!p&&s.jsx("div",{className:"alert alert-warning mb-3",role:"alert",children:h}),F&&s.jsx("div",{id:"student-detail-notice",className:`alert ${F.variant}`,role:"alert",children:F.message}),s.jsxs("div",{className:"row mb-4",children:[s.jsx("div",{className:"col-12 col-lg-3 mb-3 mb-lg-0",children:s.jsx("div",{className:"card",style:{boxShadow:"0 0.375rem 0.75rem rgba(0, 0, 0, 0.45)"},children:s.jsxs("div",{className:"card-body p-3",children:[w&&s.jsx("div",{className:"mb-3",children:s.jsx("img",{src:w,alt:`${K} `,className:"w-100",style:{borderRadius:"0.5rem"}})}),s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"fw-bold fs-5",children:[K," (",e||"-",")"]}),R&&s.jsx("div",{className:"text-muted",children:R})]})]})})}),s.jsx("div",{className:"col-12 col-lg-9",children:s.jsxs("div",{className:"card",style:{boxShadow:"0 0.375rem 0.75rem rgba(0, 0, 0, 0.45)"},id:"student-attendance-card",children:[s.jsxs("div",{className:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2",children:[s.jsx("h2",{className:"h5 mb-0",children:" "}),s.jsxs("div",{className:"text-muted small",children:["  ",s.jsx("span",{id:"student-attendance-count",children:N.records.length}),""]})]}),s.jsxs("div",{className:"card-body",children:[s.jsx("div",{id:"student-attendance-pivot",className:"table-responsive",children:N.loading?s.jsx("div",{className:"text-center text-muted py-5",children:"   ..."}):N.error?s.jsx("div",{className:"text-center text-danger py-5",children:N.error.message||"   ."}):N.records.length?s.jsxs("table",{className:"table table-sm table-bordered align-middle mb-0",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",className:"bg-light text-center",style:{minWidth:"80px"},children:""}),B.map(({roundLabel:E,methodLabel:L},$)=>s.jsxs("th",{scope:"col",className:"text-center",children:[s.jsx("div",{className:"fw-semibold",children:E}),s.jsx("div",{className:"text-muted small",children:L})]},`att-head-${$}`))]})}),s.jsx("tbody",{children:T.map((E,L)=>s.jsxs("tr",{children:[s.jsx("th",{scope:"row",className:"bg-light text-center",style:{minWidth:"80px"},children:E.label}),E.cells]},`att-row-${L}`))})]}):s.jsx("div",{className:"text-center text-muted py-5",children:"   ."})}),s.jsx("div",{className:"text-muted small mt-2",children:"*     ."}),N.records.length>0&&s.jsxs("div",{className:"mt-4 pt-3 border-top",children:[s.jsx("h5",{className:"mb-3",children:""}),s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsxs("p",{className:"fs-3 fw-bold mb-0 me-3",children:[U.attendanceRate,"%"]}),s.jsxs("div",{className:"progress flex-grow-1",style:{height:"25px"},children:[s.jsx("div",{className:"progress-bar bg-success",role:"progressbar",style:{width:`${U.attendanceRate}%`},"aria-valuenow":U.attendanceRate,"aria-valuemin":"0","aria-valuemax":"100",title:`: ${U.attendanceRate}%`}),s.jsx("div",{className:"progress-bar bg-warning",role:"progressbar",style:{width:`${U.tardyRate}%`},"aria-valuenow":U.tardyRate,"aria-valuemin":"0","aria-valuemax":"100",title:`: ${U.tardyRate}%`}),s.jsx("div",{className:"progress-bar",role:"progressbar",style:{width:`${U.earlyLeaveRate}%`,backgroundColor:"#fd7e14"},"aria-valuenow":U.earlyLeaveRate,"aria-valuemin":"0","aria-valuemax":"100",title:`: ${U.earlyLeaveRate}%`}),s.jsx("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:`${U.excusedRate}%`},"aria-valuenow":U.excusedRate,"aria-valuemin":"0","aria-valuemax":"100",title:`: ${U.excusedRate}%`}),s.jsx("div",{className:"progress-bar bg-danger",role:"progressbar",style:{width:`${U.absentRate}%`},"aria-valuenow":U.absentRate,"aria-valuemin":"0","aria-valuemax":"100",title:`: ${U.absentRate}%`})]})]})]})]})]})})]}),s.jsxs("div",{className:"card mt-4",style:{boxShadow:"0 0.375rem 0.75rem rgba(0, 0, 0, 0.45)"},id:"student-exam-card",children:[s.jsxs("div",{className:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2",children:[s.jsx("h2",{className:"h5 mb-0",children:"  "}),s.jsxs("div",{className:"text-muted small d-flex flex-column flex-sm-row align-items-sm-center gap-2",children:[s.jsxs("span",{children:["  ",s.jsx("span",{id:"student-exam-count",children:_.count}),""]}),s.jsxs("span",{id:"student-exam-weight-summary",children:["  : ",_.weightSum,""]})]})]}),s.jsxs("div",{className:"card-body",children:[s.jsx("div",{className:`${_.finalClass} d-flex align-items-center justify-content-between`,role:"status",id:"student-exam-final-score",children:s.jsx("span",{children:_.finalText})}),s.jsx("div",{className:"table-responsive mt-3",children:s.jsxs("table",{className:"table table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:""}),s.jsx("th",{scope:"col",className:"text-center",style:{width:80},children:""}),s.jsx("th",{scope:"col",className:"text-center",style:{width:90},children:" "}),s.jsx("th",{scope:"col",className:"text-center",style:{width:180},children:" "}),s.jsx("th",{scope:"col",className:"text-center",style:{width:120},children:""}),s.jsx("th",{scope:"col",children:""})]})}),s.jsx("tbody",{id:"student-exam-tbody",children:V})]})}),s.jsx("div",{className:"text-muted small mt-2",children:"*          ."})]})]}),s.jsxs("div",{className:"card mt-4",style:{boxShadow:"0 0.375rem 0.75rem rgba(0, 0, 0, 0.45)"},id:"student-indivtask-card",children:[s.jsxs("div",{className:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2",children:[s.jsx("h2",{className:"h5 mb-0",children:"  "}),s.jsxs("div",{className:"text-muted small",children:[" ",s.jsx("span",{id:"student-indivtask-count",children:C.records.length}),""]})]}),s.jsxs("div",{className:"card-body",children:[s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:""}),s.jsx("th",{scope:"col",className:"text-center",style:{width:90},children:" "}),s.jsx("th",{scope:"col",className:"text-center",style:{width:100},children:" "}),s.jsx("th",{scope:"col",className:"text-center",style:{width:180},children:" "}),s.jsx("th",{scope:"col",className:"text-center",style:{width:80},children:""}),s.jsx("th",{scope:"col",children:" "})]})}),s.jsx("tbody",{id:"student-indivtask-tbody",children:q})]})}),s.jsx("div",{className:"text-muted small mt-2",children:"*      ."})]})]}),s.jsxs("div",{className:"card mt-4",style:{boxShadow:"0 0.375rem 0.75rem rgba(0, 0, 0, 0.45)"},id:"student-grouptask-card",children:[s.jsxs("div",{className:"card-header d-flex flex-column flex-md-row align-items-md-center justify-content-between gap-2",children:[s.jsx("h2",{className:"h5 mb-0",children:"  "}),s.jsxs("div",{className:"text-muted small",children:[" ",s.jsx("span",{id:"student-grouptask-count",children:S.records.length}),""]})]}),s.jsxs("div",{className:"card-body",children:[s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-sm align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",children:""}),s.jsx("th",{scope:"col",className:"text-center",style:{width:120},children:" "}),s.jsx("th",{scope:"col",className:"text-center",style:{width:90},children:" "}),s.jsx("th",{scope:"col",className:"text-center",style:{width:100},children:" "}),s.jsx("th",{scope:"col",className:"text-center",style:{width:180},children:" "}),s.jsx("th",{scope:"col",className:"text-center",style:{width:80},children:""}),s.jsx("th",{scope:"col",children:" "})]})}),s.jsx("tbody",{id:"student-grouptask-tbody",children:H})]})}),s.jsx("div",{className:"text-muted small mt-2",children:"*        ."})]})]})]})}function pM(){const{lectureId:t}=ht(),e=is(),{students:a}=ds(),[i,o]=x.useState(null),[d,u]=x.useState([]),[h,m]=x.useState([]),[p,b]=x.useState([]),[y,v]=x.useState([]),[N,D]=x.useState([]),[C,A]=x.useState(null),[S,M]=x.useState(null),[F,z]=x.useState(null),[K,R]=x.useState([]),[w,_]=x.useState(null),[B,T]=x.useState(null),[U,V]=x.useState([]),[q,H]=x.useState(null),[E,L]=x.useState(null),[$,O]=x.useState([]),[Q,Z]=x.useState(null),[k,W]=x.useState(null),[P,G]=x.useState([]),[Y,ee]=x.useState(null),[ae,xe]=x.useState(null),[me,$e]=x.useState({}),[se,ue]=x.useState(null),[te,oe]=x.useState(null),[we,_e]=x.useState({}),[He,be]=x.useState(!0),[qe,de]=x.useState(null),[Ne,De]=x.useState(!1),[Ue,Xe]=x.useState(1),[Ge,et]=x.useState(null),[pt,Os]=x.useState([]),[Rn,vs]=x.useState([]),[Gt,Ln]=x.useState({A:null,B:null,CD:[]}),[oa,us]=x.useState(null),[Qs,gs]=x.useState(!1),[Oi,ao]=x.useState(null),lo=[{code:"ATTD",name:""},{code:"EXAM",name:""},{code:"TASK",name:""},{code:"PRAC",name:""},{code:"MISC",name:""},{code:"TOTAL",name:""}],Xa=async()=>{if(!(!i||!N))try{let je=F;if(!je){const Ae=await fetch("/classroom/api/v1/common/lecture/evaluate/score-by-attendance-status",{headers:{Accept:"application/json"},credentials:"include"});if(!Ae.ok)throw new Error(`(${Ae.status})     .`);je=await Ae.json(),z(je)}const Me=N.map(Ae=>{const Le=(Ae.okCnt||0)+(Ae.noCnt||0)+(Ae.earlyCnt||0)+(Ae.lateCnt||0)+(Ae.excpCnt||0);if(Le===0)return{enrollId:Ae.enrollId,score:0,isFailed:!1,details:{ok:0,excp:0,early:0,late:0,no:0,totalRounds:0}};const X=Math.ceil(Le*.3),fe=(Ae.noCnt||0)+(Ae.excpCnt||0);if(fe>X)return{enrollId:Ae.enrollId,score:0,isFailed:!0,reason:`+(${fe}) > (${X})`,details:{ok:Ae.okCnt||0,excp:Ae.excpCnt||0,early:Ae.earlyCnt||0,late:Ae.lateCnt||0,no:Ae.noCnt||0,totalRounds:Le}};const Se=(Ae.okCnt||0)*(je.ATTD_OK||100),Te=(Ae.excpCnt||0)*(je.ATTD_EXCP||80),Ce=(Ae.earlyCnt||0)*(je.ATTD_EARLY||50),ke=(Ae.lateCnt||0)*(je.ATTD_LATE||50),Oe=(Ae.noCnt||0)*(je.ATTD_NO||0),Ee=(Se+Te+Ce+ke+Oe)/Le;return{enrollId:Ae.enrollId,score:Math.round(Ee*100)/100,isFailed:!1,details:{ok:Ae.okCnt||0,excp:Ae.excpCnt||0,early:Ae.earlyCnt||0,late:Ae.lateCnt||0,no:Ae.noCnt||0,totalRounds:Le}}});R(Me)}catch(je){console.error("   :",je),alert(je.message||"     .")}},Wa=async()=>{if(!i||!U||U.length===0){alert("   .    .");return}try{const je=await fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(t)}/weight`,{headers:{Accept:"application/json"},credentials:"include"});if(!je.ok)throw new Error(`(${je.status})     .`);const Me=await je.json(),Ae=Array.isArray(Me)?Me.filter(Ie=>Ie.weightValue>0):[];if(console.log("  :",Ae),Ae.length===0){alert("   .");return}const Le=Ae.filter(Ie=>Ie.taskType==="INDIV"),X=Ae.filter(Ie=>Ie.taskType==="GROUP"),fe=[];Le.length>0?fe.push(fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(t)}/indiv/summary`,{headers:{Accept:"application/json"},credentials:"include"})):fe.push(Promise.resolve(null)),X.length>0?fe.push(fetch(`/classroom/api/v1/professor/task/${encodeURIComponent(t)}/group/summary`,{headers:{Accept:"application/json"},credentials:"include"})):fe.push(Promise.resolve(null));const[Se,Te]=await Promise.all(fe),Ce=Se&&Se.ok?await Se.json():[],ke=Te&&Te.ok?await Te.json():[];console.log(" :",Ce),console.log(" :",ke);const Oe=U.map(Ie=>{const Ee=Ie.enrollId;let Be=0;return Le.forEach(Re=>{const Fe=Re.taskId,Ke=Re.weightValue,rt=Array.isArray(Ce)?Ce.find(Ft=>Ft.enrollId===Ee&&Ft.indivtaskId===Fe):null,$t=rt?.isTarget==="Y",It=rt?.submitAt!=null;let lt=0;$t&&It&&(lt=rt?.score||0),Be+=lt*Ke/100}),X.forEach(Re=>{const Fe=Re.taskId,Ke=Re.weightValue,rt=Array.isArray(ke)?ke.find(Ft=>Ft.enrollId===Ee&&Ft.grouptaskId===Fe):null,$t=rt?.grouptaskId!=null,It=rt?.submitAt!=null;let lt=0;$t&&It&&(lt=rt?.score||0),Be+=lt*Ke/100}),{enrollId:Ee,score:Math.round(Be*100)/100,details:{indivTasks:Le.map(Re=>{const Fe=Array.isArray(Ce)?Ce.find($t=>$t.enrollId===Ee&&$t.indivtaskId===Re.taskId):null,Ke=Fe?.isTarget==="Y",rt=Fe?.submitAt!=null;return{taskId:Re.taskId,taskName:Re.taskName,weight:Re.weightValue,score:Ke&&rt&&Fe?.score||0,isTarget:Ke,hasSubmission:rt}}),groupTasks:X.map(Re=>{const Fe=Array.isArray(ke)?ke.find($t=>$t.enrollId===Ee&&$t.grouptaskId===Re.taskId):null,Ke=Fe?.grouptaskId!=null,rt=Fe?.submitAt!=null;return{taskId:Re.taskId,taskName:Re.taskName,weight:Re.weightValue,score:Ke&&rt&&Fe?.score||0,isTarget:Ke,hasSubmission:rt}})}}});console.log("  :",Oe),O(Oe)}catch(je){console.error("   :",je),alert(je.message||"     .")}},Ka=async()=>{if(!i||!U||U.length===0){alert("   .    .");return}try{const je=Array.isArray(h)?h.filter(X=>X.weightValue>0):[];if(console.log("  :",je),je.length===0){alert("   .");return}const Me=await fetch(`/classroom/api/v1/professor/exam/${encodeURIComponent(t)}/summary`,{headers:{Accept:"application/json"},credentials:"include"});if(!Me.ok)throw new Error(`(${Me.status})      .`);const Ae=await Me.json();console.log("  :",Ae);const Le=U.map(X=>{const fe=X.enrollId;let Se=0;const Te=Array.isArray(Ae)?Ae.find(ke=>ke.enrollId===fe):null,Ce=je.map(ke=>{const Oe=ke.examId||ke.lctExamId,Ie=ke.weightValue,Ee=Te?.scoreList?.find(Ke=>Ke.lctExamId===Oe),Be=Ee?.isTarget==="Y",Re=Ee?.submitAt!=null;let Fe=0;return Be&&Re&&(Fe=Ee?.score||0),Se+=Fe*Ie/100,{examId:Oe,examName:ke.examName,weight:Ie,score:Fe,isTarget:Be,hasSubmission:Re}});return{enrollId:fe,score:Math.round(Se*100)/100,details:Ce}});console.log("  :",Le),G(Le)}catch(je){console.error("   :",je),alert(je.message||"     .")}},In=async()=>{if(!U||U.length===0){alert("    .    .");return}const je=["ATTD","EXAM","TASK","PRAC","MISC"],Me={ATTD:"",EXAM:"",TASK:"",PRAC:"",MISC:""},Ae=new Map(y.map(X=>[X.gradeCriteriaCd,X])),Le=je.map(X=>{const fe=Ae.get(X);return fe?{code:X,label:fe.gradeCriteriaName||Me[X]||X,ratio:Number(fe.ratio??0)}:null}).filter(Boolean);if(Le.length===0){alert("    .    .");return}try{gs(!0),ao(null),Os([]),vs([]);const X=await Promise.all(Le.map(async Te=>{const Ce="/classroom/api/v1/professor/"+encodeURIComponent(t)+"/end/score?section="+encodeURIComponent(Te.code),ke=await fetch(Ce,{headers:{Accept:"application/json"},credentials:"include"});if(!ke.ok)throw new Error("("+ke.status+") "+Te.label+"   .");const Oe=await ke.json(),Ie={};return Array.isArray(Oe)&&Oe.forEach(Ee=>{if(!Ee)return;const Be=String(Ee.enrollId);if(!Be)return;const Re=Ee.rawScore??Ee.score;if(Re==null)return;const Fe=Number(Re);Ie[Be]=Number.isFinite(Fe)?Fe:0}),{...Te,scores:Ie}})),Se=U.map(Te=>{const Ce=String(Te.enrollId),ke=X.map(Ee=>{const Re=Object.prototype.hasOwnProperty.call(Ee.scores,Ce)?Ee.scores[Ce]:null,Fe=Re!==null?Math.round(Re*Ee.ratio/100*100)/100:null;return{code:Ee.code,label:Ee.label,ratio:Ee.ratio,rawScore:Re,weightedScore:Fe}}),Oe=ke.some(Ee=>Ee.rawScore===null||Ee.rawScore===void 0),Ie=ke.reduce((Ee,Be)=>Be.rawScore===null||Be.rawScore===void 0?Ee:Ee+Be.rawScore*Be.ratio/100,0);return{enrollId:Te.enrollId,totalScore:Math.round(Ie*100)/100,breakdown:ke,hasMissing:Oe}}).slice().sort((Te,Ce)=>{if(Te.hasMissing!==Ce.hasMissing)return Te.hasMissing?1:-1;const ke=Number.isFinite(Te.totalScore)?Te.totalScore:-1/0,Oe=Number.isFinite(Ce.totalScore)?Ce.totalScore:-1/0;if(ke!==Oe)return Oe-ke;const Ie=Js.get(Te.enrollId),Ee=Js.get(Ce.enrollId),Be=(Ie?.studentNo||Ie?.userId||"").toString(),Re=(Ee?.studentNo||Ee?.userId||"").toString();return Be&&Re&&Be!==Re?Be.localeCompare(Re):String(Te.enrollId).localeCompare(String(Ce.enrollId))});vs(X.map(({scores:Te,...Ce})=>Ce)),Os(Se)}catch(X){console.error("  :",X),ao(X),alert(X.message||"    .")}finally{gs(!1)}},_l=async()=>{if(pt.length===0){await Ve.fire({title:"",text:"  .   .",icon:"warning",confirmButtonText:""});return}if((await Ve.fire({title:" ",text:`   ?
    .`,icon:"question",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed)try{const Me=pt.map(X=>{const Te=(X.breakdown.find(ke=>ke.code==="ATTD")?.rawScore||0)===0;let Ce="-";if(Te)Ce="F";else if(C?.subjectTypeCd==="SUBJ_RELATIVE"){const ke=pt.map(Ie=>{const Ee=Ie.breakdown.find(Be=>Be.code==="ATTD");return{enrollId:Ie.enrollId,totalScore:Ie.totalScore,isFail:(Ee?.rawScore||0)===0}}).filter(Ie=>!Ie.isFail).sort((Ie,Ee)=>Ee.totalScore-Ie.totalScore),Oe=ke.findIndex(Ie=>Ie.enrollId===X.enrollId);if(Oe!==-1){const Ie=Math.round(C.currentCap*(S?.A||0)/100),Ee=Math.round(C.currentCap*(S?.B||0)/100);let Be="C~D";Oe<Ie?Be="A":Oe<Ie+Ee&&(Be="B");const Re={A:Gt.A!==null?Gt.A:Math.floor(Ie/2),B:Gt.B!==null?Gt.B:Math.floor(Ee/2),CD:Gt.CD.length>0?Gt.CD:[Math.floor((C.currentCap-Ie-Ee)/4),Math.floor((C.currentCap-Ie-Ee)/2),Math.floor((C.currentCap-Ie-Ee)*3/4)]};if(Be==="A")Ce=ke.slice(0,Ie).findIndex(rt=>rt.enrollId===X.enrollId)<=Re.A?"A+":"A0";else if(Be==="B")Ce=ke.slice(Ie,Ie+Ee).findIndex(rt=>rt.enrollId===X.enrollId)<=Re.B?"B+":"B0";else{const Ke=ke.slice(Ie+Ee).findIndex($t=>$t.enrollId===X.enrollId),rt=Re.CD;Ke<=(rt[0]||0)?Ce="C+":Ke<=(rt[1]||0)?Ce="C0":Ke<=(rt[2]||0)?Ce="D+":Ce="D0"}}}else(C?.subjectTypeCd==="SUBJ_ABSOLUTE"||C?.subjectTypeCd==="SUBJ_PASSFAIL")&&(Ce="-");return{enrollId:String(X.enrollId),gpaCd:Ce}});if(Me.some(X=>X.gpaCd==="-")){await Ve.fire({title:"",text:"    .   .",icon:"warning",confirmButtonText:""});return}const Le=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(t)}/end/record`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(Me)});if(!Le.ok)throw new Error(`   (${Le.status})`);await Ve.fire({title:" ",text:"    .",icon:"success",confirmButtonText:""}),e(`/classroom/professor/${encodeURIComponent(t)}/finalize`)}catch(Me){console.error("  :",Me),await Ve.fire({title:"",text:Me.message||"    .",icon:"error",confirmButtonText:""})}},Qa=async()=>{if(K.length===0){await Ve.fire({title:"",text:"   .",icon:"warning",confirmButtonText:""});return}if((await Ve.fire({title:"  ",text:"   ?",icon:"question",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed)try{const Me=K.map(Le=>({enrollId:Le.enrollId,gradeCriteriaCd:"ATTD",rawScore:Le.score})),Ae=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(t)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(Me)});if(!Ae.ok)throw new Error(`(${Ae.status})    .`);await Ve.fire({title:" ",text:"   .",icon:"success",confirmButtonText:""}),T("all")}catch(Me){console.error("   :",Me),await Ve.fire({title:"",text:Me.message||"     .",icon:"error",confirmButtonText:""})}};x.useEffect(()=>{let je=!0;return(async()=>{try{be(!0),de(null);const Me=`/classroom/api/v1/professor/${encodeURIComponent(t)}/end`,[Ae,Le,X,fe,Se,Te,Ce,ke]=await Promise.all([fetch(`${Me}/progress`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${Me}/task`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${Me}/exam`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`${Me}/attendance`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/common/${encodeURIComponent(t)}/ratio`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/attendance/${encodeURIComponent(t)}/summary`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/common/${encodeURIComponent(t)}`,{headers:{Accept:"application/json"},credentials:"include"}),fetch("/classroom/api/v1/common/subject/evaluate/interval",{headers:{Accept:"application/json"},credentials:"include"})]);if(!Ae.ok)throw new Error(`(${Ae.status})    .`);if(!Le.ok)throw new Error(`(${Le.status})    .`);if(!X.ok)throw new Error(`(${X.status})    .`);if(!fe.ok)throw new Error(`(${fe.status})    .`);if(!Se.ok)throw new Error(`(${Se.status})    .`);if(!Te.ok)throw new Error(`(${Te.status})     .`);if(!Ce.ok)throw new Error(`(${Ce.status})    .`);if(!ke.ok)throw new Error(`(${ke.status})    .`);const Oe=await Ae.json(),Ie=await Le.json(),Ee=await X.json(),Be=await fe.json(),Re=await Se.json(),Fe=await Te.json(),Ke=await Ce.json(),rt=await ke.json();if(!je)return;o(Oe),u(Array.isArray(Ie)?Ie:[]),m(Array.isArray(Ee)?Ee:[]),b(Array.isArray(Be)?Be:[]),v(Array.isArray(Re)?Re:[]),D(Array.isArray(Fe)?Fe:[]),A(Ke),M(rt)}catch(Me){if(!je)return;de(Me)}finally{je&&be(!1)}})(),()=>{je=!1}},[t]),x.useEffect(()=>{Ne&&w===null&&q===null&&Q===null&&Y===null&&se===null&&(async()=>{try{console.log("===      ==="),console.log("  :",a?.length),a&&a.length>0&&(console.log("    :",a[0]),console.log(" enrollStatusCd :",a.map(Je=>Je.enrollStatusCd)));const je=Array.isArray(a)?a:[];console.log(" :",je.length),V(je);const Me=new Set(je.map(Je=>Je.enrollId)),[Ae,Le,X,fe,Se]=await Promise.all([fetch(`/classroom/api/v1/professor/${encodeURIComponent(t)}/end/score?section=ATTD`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/${encodeURIComponent(t)}/end/score?section=TASK`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/${encodeURIComponent(t)}/end/score?section=EXAM`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/${encodeURIComponent(t)}/end/score?section=PRAC`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/professor/${encodeURIComponent(t)}/end/score?section=MISC`,{headers:{Accept:"application/json"},credentials:"include"})]);console.log("===    ==="),Ae.ok||console.warn(`    (${Ae.status})`);const Te=Ae.ok?await Ae.json():[];console.log("  :",Te.length,"");const Ce=new Map(Array.isArray(Te)?Te.map(Je=>[Je.enrollId,Je.rawScore]):[]);_(Ce);let ke=0;Me.forEach(Je=>{Ce.has(Je)&&ke++}),ke===Me.size&&Me.size>0?(console.log(" : all"),T("all")):ke>0?(console.log(" : partial"),T("partial")):(console.log(" : none"),T("none")),console.log("===    ==="),Le.ok||console.warn(`    (${Le.status})`);const Oe=Le.ok?await Le.json():[];console.log("  :",Oe.length,"");const Ie=new Map(Array.isArray(Oe)?Oe.map(Je=>[Je.enrollId,Je.rawScore]):[]);H(Ie);let Ee=0;Me.forEach(Je=>{Ie.has(Je)&&Ee++}),Ee===Me.size&&Me.size>0?(console.log(" : all"),L("all")):Ee>0?(console.log(" : partial"),L("partial")):(console.log(" : none"),L("none")),console.log("===    ==="),X.ok||console.warn(`    (${X.status})`);const Be=X.ok?await X.json():[];console.log("  :",Be.length,"");const Re=new Map(Array.isArray(Be)?Be.map(Je=>[Je.enrollId,Je.rawScore]):[]);Z(Re);let Fe=0;Me.forEach(Je=>{Re.has(Je)&&Fe++}),Fe===Me.size&&Me.size>0?(console.log(" : all"),W("all")):Fe>0?(console.log(" : partial"),W("partial")):(console.log(" : none"),W("none")),console.log("===    ==="),fe.ok||console.warn(`    (${fe.status})`);const Ke=fe.ok?await fe.json():[];console.log("  :",Ke.length,"");const rt=new Map(Array.isArray(Ke)?Ke.map(Je=>[Je.enrollId,Je.rawScore]):[]);ee(rt);let $t=0;if(Me.forEach(Je=>{rt.has(Je)&&$t++}),$t===Me.size&&Me.size>0)console.log(" : all"),xe("all");else if($t>0){console.log(" : partial"),xe("partial");const Je={};rt.forEach((pn,xs)=>{Je[xs]=pn}),$e(Je)}else console.log(" : none"),xe("none");console.log("===    ==="),Se.ok||console.warn(`    (${Se.status})`);const It=Se.ok?await Se.json():[];console.log("  :",It.length,"");const lt=new Map(Array.isArray(It)?It.map(Je=>[Je.enrollId,Je.rawScore]):[]);ue(lt);let Ft=0;if(Me.forEach(Je=>{lt.has(Je)&&Ft++}),Ft===Me.size&&Me.size>0)console.log(" : all"),oe("all");else if(Ft>0){console.log(" : partial"),oe("partial");const Je={};lt.forEach((pn,xs)=>{Je[xs]=pn}),_e(Je)}else console.log(" : none"),oe("none");console.log("===      ===")}catch(je){console.error("   :",je),_(new Map),T("none"),H(new Map),L("none"),Z(new Map),W("none"),ee(new Map),xe("none"),ue(new Map),oe("none")}})()},[Ne,t,a]),x.useEffect(()=>{if(Ge===0&&B!==null&&K.length===0)if(B==="none")Xa();else{const je=U.map(Me=>{const Ae=w.get(Me.enrollId);return{enrollId:Me.enrollId,score:Ae!==void 0?Ae:null,isFailed:Ae===0}});R(je)}},[Ge,B,K.length]);const Zs=i?(()=>{const je=i.weekCnt*i.weeklyBlockCnt,Me=je>0?(i.recordedRoundCnt/je*100).toFixed(1):0;return{totalRounds:je,progressRate:Me}})():null,io=y.find(je=>je.gradeCriteriaCd==="TASK")?.ratio||0,Bi=y.find(je=>je.gradeCriteriaCd==="EXAM")?.ratio||0,js=(()=>{if(io===0)return{hasOngoingWeightedTasks:!1,ongoingTasks:[],taskWeightSum:0,isTaskWeightValid:!0,isTaskValid:!0,skipValidation:!0};const je=d.filter(X=>X.closedYn==="N"&&X.weightValue>0),Me=je.length>0,Ae=d.reduce((X,fe)=>X+(fe.weightValue||0),0),Le=Ae===100;return{hasOngoingWeightedTasks:Me,ongoingTasks:je,taskWeightSum:Ae,isTaskWeightValid:Le,isTaskValid:!Me&&Le,skipValidation:!1}})(),fn=(()=>{if(Bi===0)return{hasOngoingWeightedExams:!1,ongoingExams:[],examWeightSum:0,isExamWeightValid:!0,isExamValid:!0,skipValidation:!0};const je=h.filter(X=>X.closedYn==="N"&&X.weightValue>0),Me=je.length>0,Ae=h.reduce((X,fe)=>X+(fe.weightValue||0),0),Le=Ae===100;return{hasOngoingWeightedExams:Me,ongoingExams:je,examWeightSum:Ae,isExamWeightValid:Le,isExamValid:!Me&&Le,skipValidation:!1}})(),jn=(()=>{const je=p.length>0;return{hasIncompleteAttendance:je,incompleteRounds:p,isAttendanceValid:!je}})(),Js=x.useMemo(()=>new Map((a||[]).map(je=>[je.enrollId,je])),[a]),Dl=(()=>{if(!Zs)return[];const je=Zs.totalRounds;return je===0?[]:N.filter(Me=>((Me.noCnt||0)+(Me.excpCnt||0))/je*100>=30)})(),Za=Zs?Zs.progressRate>=100:!1,Ml=Za&&js.isTaskValid&&fn.isExamValid&&jn.isAttendanceValid;return s.jsxs("section",{className:"container py-3",children:[He&&s.jsx("div",{className:"text-muted",children:" "}),qe&&s.jsx("div",{className:"alert alert-danger",role:"alert",children:String(qe.message||qe)}),!He&&!qe&&s.jsx("div",{className:"vstack gap-4",children:s.jsxs("div",{className:"row g-4",children:[s.jsx("div",{className:"col-md-6",children:s.jsxs("div",{className:"card h-100",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"h5 mb-0",children:" "})}),s.jsxs("div",{className:"card-body",children:[Zs&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h6",{className:"fw-semibold mb-3",children:"  "}),s.jsxs("div",{className:"vstack gap-2",children:[s.jsxs("div",{children:[" ",Zs.totalRounds,"  ",s.jsxs("strong",{className:"text-primary",children:[i.recordedRoundCnt," "]})]}),s.jsx("div",{className:"progress",style:{height:"30px"},children:s.jsxs("div",{className:`progress-bar ${Za?"bg-success":"bg-warning"}`,role:"progressbar",style:{width:`${Zs.progressRate}%`},"aria-valuenow":Zs.progressRate,"aria-valuemin":"0","aria-valuemax":"100",children:[Zs.progressRate,"%"]})}),!Za&&s.jsx("div",{className:"alert alert-warning mb-0 small py-2",children:"      100% ."})]})]}),s.jsx("hr",{}),!js.skipValidation&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h6",{className:"fw-semibold mb-2",children:"  "}),s.jsxs("ul",{className:"list-group",children:[s.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${js.hasOngoingWeightedTasks?"list-group-item-danger":"list-group-item-success"}`,children:[s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("strong",{children:js.hasOngoingWeightedTasks?"    ":"  ."}),js.hasOngoingWeightedTasks&&s.jsx("a",{href:`/classroom/professor/${t}/task`,className:"text-decoration-none small",children:"  "})]}),s.jsx("span",{style:{fontSize:"1.5rem"},children:js.hasOngoingWeightedTasks?"":""})]}),s.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${js.isTaskWeightValid?"list-group-item-success":"list-group-item-danger"}`,children:[s.jsx("div",{children:s.jsxs("strong",{children:["  ",js.taskWeightSum,"."]})}),s.jsx("span",{style:{fontSize:"1.5rem"},children:js.isTaskWeightValid?"":""})]})]})]}),!fn.skipValidation&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h6",{className:"fw-semibold mb-2",children:"  "}),s.jsxs("ul",{className:"list-group",children:[s.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${fn.hasOngoingWeightedExams?"list-group-item-danger":"list-group-item-success"}`,children:[s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("strong",{children:fn.hasOngoingWeightedExams?"    ":"  ."}),fn.hasOngoingWeightedExams&&s.jsx("a",{href:`/classroom/professor/${t}/exam`,className:"text-decoration-none small",children:"  "})]}),s.jsx("span",{style:{fontSize:"1.5rem"},children:fn.hasOngoingWeightedExams?"":""})]}),s.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${fn.isExamWeightValid?"list-group-item-success":"list-group-item-danger"}`,children:[s.jsx("div",{children:s.jsxs("strong",{children:["  ",fn.examWeightSum,"."]})}),s.jsx("span",{style:{fontSize:"1.5rem"},children:fn.isExamWeightValid?"":""})]})]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("h6",{className:"fw-semibold mb-2",children:"  "}),s.jsxs("ul",{className:"list-group",children:[s.jsxs("li",{className:`list-group-item d-flex justify-content-between align-items-center py-2 ${jn.hasIncompleteAttendance?"list-group-item-danger":"list-group-item-success"}`,children:[s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("strong",{children:jn.hasIncompleteAttendance?"   ":"  ."}),jn.hasIncompleteAttendance&&s.jsx("a",{href:`/classroom/professor/${t}/attendance`,className:"text-decoration-none small",children:"  "})]}),s.jsx("span",{style:{fontSize:"1.5rem"},children:jn.hasIncompleteAttendance?"":""})]}),jn.hasIncompleteAttendance&&s.jsx("li",{className:"list-group-item list-group-item-warning py-2",children:s.jsxs("div",{className:"small",children:[s.jsx("strong",{children:"  :"}),s.jsx("div",{className:"mt-1",children:jn.incompleteRounds.map((je,Me)=>s.jsxs("span",{className:"badge bg-warning text-dark me-1",children:[je.lctRound,""]},Me))})]})})]})]}),s.jsx("hr",{}),s.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[s.jsx("div",{children:Ml?s.jsx("span",{className:"text-success",children:"     ."}):s.jsx("span",{className:"text-danger",children:"    ."})}),s.jsx("button",{className:"btn btn-primary",disabled:!Ml,onClick:()=>De(!0),children:"  "})]})]})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs("div",{className:"card h-100",children:[s.jsx("div",{className:"card-header",children:s.jsx("h2",{className:"h5 mb-0",children:""})}),s.jsx("div",{className:"card-body",children:y.length>0?s.jsxs("div",{className:"vstack gap-3",children:[s.jsxs("div",{children:[s.jsx("h6",{className:"fw-semibold mb-2",children:" "}),s.jsx("div",{className:"progress",style:{height:"30px"},children:y.map((je,Me)=>{const Ae=["#3498db","#e74c3c","#f39c12","#2ecc71","#9b59b6"],Le=Ae[Me%Ae.length];return s.jsxs("div",{className:"progress-bar d-flex align-items-center justify-content-center fw-semibold",role:"progressbar",style:{width:`${je.ratio}%`,backgroundColor:Le,color:"#fff"},"aria-valuenow":je.ratio,"aria-valuemin":"0","aria-valuemax":"100",children:[je.gradeCriteriaName," ",je.ratio,"%"]},Me)})}),s.jsx("div",{className:"mt-2 small text-muted",children:"  +   30%    F ."})]}),Dl.length>0&&s.jsx("div",{className:"alert alert-danger mb-0 py-2",children:s.jsxs("div",{className:"small",children:[s.jsxs("strong",{children:["  : ",Dl.length,""]}),s.jsx("div",{className:"mt-1",children:Dl.map((je,Me)=>{const Ae=Zs.totalRounds,Le=(je.noCnt||0)+(je.excpCnt||0),X=(Le/Ae*100).toFixed(1),fe=Js.get(je.enrollId),Se=fe&&(`${fe.lastName||""}${fe.firstName||""}`.trim()||fe.studentName)||je.enrollId;return s.jsxs("div",{className:"text-muted",children:[Se,": ",Le,"  (",X,"%)"]},Me)})})]})}),C&&s.jsxs("div",{className:"border-top pt-3",children:[s.jsxs("h6",{className:"fw-semibold mb-2",children:[" : ",C.subjectTypeName||C.subjectTypeCd]}),C.subjectTypeCd==="SUBJ_RELATIVE"&&s.jsxs("div",{className:"small",children:[s.jsx("p",{className:"mb-2",children:"    A, B, C~D  ."}),S&&C.currentCap&&s.jsxs("div",{className:"bg-light p-2 rounded",children:[s.jsx("div",{className:"fw-semibold mb-1",children:"     :"}),(()=>{const je=Math.round(C.currentCap*(S.A||0)/100),Me=Math.round(C.currentCap*(S.B||0)/100),Ae=C.currentCap-je-Me;return s.jsxs("ul",{className:"mb-1 ps-3",children:[s.jsxs("li",{children:["A : ",je," (",S.A||0,"%)"]}),s.jsxs("li",{children:["B : ",Me," (",S.B||0,"%)"]}),s.jsxs("li",{children:["C~D : ",Ae," (",100-(S.A||0)-(S.B||0),"%)"]})]})})(),s.jsx("div",{className:"text-muted",style:{fontSize:"0.85em"},children:"       ."})]})]}),C.subjectTypeCd==="SUBJ_ABSOLUTE"&&s.jsxs("div",{className:"small",children:[s.jsx("p",{className:"mb-2",children:"     ."}),s.jsxs("div",{className:"bg-light p-2 rounded",children:[s.jsx("div",{className:"fw-semibold mb-1",children:" :"}),s.jsxs("ul",{className:"mb-0 ps-3",children:[s.jsx("li",{children:"A+: 95 "}),s.jsx("li",{children:"A0: 90~94"}),s.jsx("li",{children:"B+: 85~89"}),s.jsx("li",{children:"B0: 80~84"}),s.jsx("li",{children:"C+: 75~79"}),s.jsx("li",{children:"C0: 70~74"}),s.jsx("li",{children:"D+: 65~69"}),s.jsx("li",{children:"D0: 60~64"}),s.jsx("li",{children:"F: 60 "})]})]})]}),C.subjectTypeCd==="SUBJ_PASSFAIL"&&s.jsxs("div",{className:"small",children:[s.jsx("p",{className:"mb-1",children:" PASS  FAIL ."}),s.jsx("div",{className:"text-muted",children:"      P(PASS)  F(FAIL) ."})]})]})]}):s.jsxs("div",{className:"text-center py-5",children:[s.jsx("i",{className:"bi bi-file-earmark-text display-4 d-block mb-3 opacity-25"}),s.jsx("p",{className:"text-muted mb-0",children:"  ."})]})})]})})]})}),Ne&&s.jsx("div",{className:"modal fade show d-block",style:{backgroundColor:"rgba(0,0,0,0.5)"},tabIndex:"-1",children:s.jsx("div",{className:"modal-dialog modal-xl modal-dialog-centered",style:{maxWidth:"1140px"},children:s.jsxs("div",{className:"modal-content",style:{height:"85vh",display:"flex",flexDirection:"column"},children:[s.jsxs("div",{className:"modal-header py-2",children:[s.jsx("h6",{className:"modal-title mb-0",children:" "}),s.jsx("button",{type:"button",className:"btn-close",onClick:()=>{De(!1),Xe(1),et(null)},"aria-label":"Close"})]}),s.jsxs("div",{className:"modal-body",style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[s.jsx("span",{className:`small ${Ue>=1?"fw-bold text-primary":"text-muted"}`,children:"1)  /"}),s.jsx("span",{className:`small ${Ue>=2?"fw-bold text-primary":"text-muted"}`,children:"2)  "}),s.jsx("span",{className:`small ${Ue>=3?"fw-bold text-primary":"text-muted"}`,children:"3)   "})]}),s.jsx("div",{className:"progress",style:{height:"8px"},children:s.jsx("div",{className:"progress-bar",style:{width:`${Ue/3*100}%`}})})]}),Ue===1?s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:s.jsxs("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:[s.jsx("ul",{className:"nav nav-tabs mb-3",role:"tablist",style:{flexShrink:0},children:lo.map((je,Me)=>{const Ae=y.find(fe=>fe.gradeCriteriaCd===je.code),Le=je.code==="TOTAL"||Ae&&Ae.ratio>0,X=Ge===Me;return s.jsx("li",{className:"nav-item",role:"presentation",children:s.jsxs("button",{className:`nav-link ${X?"active":""} ${Le?"":"disabled"}`,type:"button",onClick:()=>Le&&et(Me),disabled:!Le,style:X?{backgroundColor:"#0d6efd",color:"#fff",borderColor:"#0d6efd",borderBottomLeftRadius:0,borderBottomRightRadius:0,borderBottom:"none"}:Le?{backgroundColor:"#e7f3ff",color:"#0d6efd",borderColor:"#b6d4fe"}:{color:"#6c757d",backgroundColor:"#e9ecef",cursor:"not-allowed"},children:[je.name," ",Ae?`(${Ae.ratio}%)`:""]})},Me)})}),s.jsxs("div",{className:"tab-content",style:{flex:1,overflowY:"auto",minHeight:0},children:[Ge===null&&s.jsxs("div",{className:"alert alert-info text-center py-5",children:[s.jsx("h5",{className:"mb-3",children:"     "}),s.jsx("p",{className:"mb-0 text-muted",children:"        ."})]}),lo.map((je,Me)=>{const Ae=y.find(X=>X.gradeCriteriaCd===je.code),Le=Ge===Me;return s.jsx("div",{className:`tab-pane fade ${Le?"show active":""}`,children:Le&&s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header bg-light",children:s.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[s.jsxs("h6",{className:"mb-0",children:[je.name," ",Ae?`(${Ae.ratio}%)`:""]}),s.jsx("span",{className:"badge bg-primary",children:je.code})]})}),s.jsxs("div",{className:"card-body p-3",children:[je.code==="ATTD"&&s.jsx("div",{children:B===null?s.jsxs("div",{className:"text-center py-5",children:[s.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:s.jsx("span",{className:"visually-hidden",children:" ..."})}),s.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):B==="none"?s.jsx("div",{children:K.length===0?s.jsxs("div",{className:"alert alert-warning text-center py-5",children:[s.jsx("i",{className:"bi bi-exclamation-circle fs-1 mb-3 d-block"}),s.jsx("h5",{children:"   "}),s.jsx("p",{className:"mb-0",children:"    ."}),s.jsxs("button",{className:"btn btn-primary mt-3",onClick:Xa,children:[s.jsx("i",{className:"bi bi-calculator me-2"})," "]})]}):s.jsxs("div",{children:[F&&s.jsx("div",{className:"bg-light p-3 rounded mb-3",children:s.jsxs("div",{className:"d-flex align-items-center justify-content-between gap-3 flex-wrap",children:[s.jsxs("div",{className:"d-flex align-items-center gap-3 flex-wrap",children:[s.jsx("strong",{className:"me-2",children:"  :"}),s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("span",{className:"small",children:""}),s.jsx("input",{type:"number",className:"form-control form-control-sm text-center",value:F.ATTD_OK||100,disabled:!0,style:{width:"60px",backgroundColor:"#e9ecef",padding:"0"}})]}),s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("span",{className:"small",children:""}),s.jsx("input",{type:"number",className:"form-control form-control-sm text-center",value:F.ATTD_EXCP||80,onChange:X=>{const fe=parseInt(X.target.value)||0;z({...F,ATTD_EXCP:fe})},style:{width:"60px",padding:"0"}})]}),s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("span",{className:"small",children:""}),s.jsx("input",{type:"number",className:"form-control form-control-sm text-center",value:F.ATTD_LATE||50,onChange:X=>{const fe=parseInt(X.target.value)||0;z({...F,ATTD_LATE:fe})},style:{width:"60px",padding:"0"}})]}),s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("span",{className:"small",children:""}),s.jsx("input",{type:"number",className:"form-control form-control-sm text-center",value:F.ATTD_EARLY||50,onChange:X=>{const fe=parseInt(X.target.value)||0;z({...F,ATTD_EARLY:fe})},style:{width:"60px",padding:"0"}})]}),s.jsxs("div",{className:"d-flex align-items-center gap-2",children:[s.jsx("span",{className:"small",children:""}),s.jsx("input",{type:"number",className:"form-control form-control-sm text-center",value:F.ATTD_NO||0,disabled:!0,style:{width:"60px",backgroundColor:"#e9ecef",padding:"0"}})]})]}),s.jsxs("button",{className:"custom-btn custom-btn-primary custom-btn-sm",onClick:()=>{R([])},children:[s.jsx("i",{className:"bi bi-arrow-clockwise me-1"}),""]})]})}),s.jsxs("div",{className:"alert alert-warning py-2 mb-3",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"+     30%   F ."]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover align-middle mb-0",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"table-primary",children:[s.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"70px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"80px"},children:" "}),s.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),s.jsx("th",{className:"text-center",children:""})]})}),s.jsx("tbody",{children:K.map((X,fe)=>{const Se=Js.get(X.enrollId),Te=Se?`${Se.lastName||""}${Se.firstName||""}`.trim()||Se.studentName:"",Ce=Se?.studentNo||Se?.userId||"";return s.jsxs("tr",{className:X.isFailed?"table-danger":"",children:[s.jsx("td",{className:"text-center small",children:Ce}),s.jsx("td",{className:"text-center fw-semibold",children:Te||X.enrollId}),s.jsx("td",{className:"text-center",children:X.details?.ok||0}),s.jsx("td",{className:"text-center",children:X.details?.excp||0}),s.jsx("td",{className:"text-center",children:X.details?.late||0}),s.jsx("td",{className:"text-center",children:X.details?.early||0}),s.jsx("td",{className:"text-center",children:X.details?.no||0}),s.jsx("td",{className:"text-center fw-bold",children:X.details?.totalRounds||0}),s.jsx("td",{className:"text-center",children:s.jsx("span",{className:`badge ${X.isFailed?"bg-danger":"bg-primary"} fs-6 px-3 py-2`,children:X.isFailed?"F":X.score.toFixed(2)})}),s.jsx("td",{className:"text-center",children:X.isFailed&&X.reason&&s.jsx("span",{className:"badge bg-danger small",children:X.reason})})]},fe)})})]})}),s.jsx("div",{className:"d-flex justify-content-end mt-3",children:s.jsxs("button",{className:"btn btn-success",onClick:Qa,children:[s.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}):s.jsxs("div",{children:[(B==="all"||B==="partial")&&s.jsxs("div",{className:"alert alert-info mb-3",children:[s.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),B==="partial"&&s.jsxs("div",{className:"alert alert-warning mb-3",children:[s.jsx("strong",{children:"  :"}),s.jsx("div",{className:"mt-2",children:U.filter(X=>!w.has(X.enrollId)).map((X,fe)=>{const Se=`${X.lastName||""}${X.firstName||""}`.trim()||X.studentName,Te=X.studentNo||X.userId;return s.jsxs("span",{className:"badge bg-warning text-dark me-2",children:[Te," ",Se]},fe)})})]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover align-middle mb-0",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"table-primary",children:[s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""})]})}),s.jsx("tbody",{children:U.map((X,fe)=>{const Se=w.get(X.enrollId),Te=`${X.lastName||""}${X.firstName||""}`.trim()||X.studentName,Ce=X.studentNo||X.userId;return s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:Ce}),s.jsx("td",{className:"text-center fw-semibold",children:Te}),s.jsx("td",{className:"text-center",children:Se!==void 0?s.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:Se.toFixed(2)}):s.jsx("span",{className:"badge bg-secondary fs-6 px-3 py-2",children:"  "})})]},fe)})})]})}),s.jsx("div",{className:"d-flex justify-content-end mt-3",children:s.jsxs("button",{className:"btn btn-warning",onClick:()=>{T("none"),R([])},children:[s.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]})}),je.code==="EXAM"&&s.jsx("div",{children:k===null?s.jsxs("div",{className:"text-center py-5",children:[s.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:s.jsx("span",{className:"visually-hidden",children:" ..."})}),s.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):k==="none"?s.jsx("div",{children:P.length===0?s.jsxs("div",{className:"alert alert-warning text-center py-5",children:[s.jsx("i",{className:"bi bi-exclamation-circle fs-1 mb-3 d-block"}),s.jsx("h5",{children:"   "}),s.jsx("p",{className:"mb-0",children:"    ."}),s.jsxs("button",{className:"btn btn-primary mt-3",onClick:Ka,style:{backgroundColor:"#0d6efd",paddingLeft:"8px",paddingRight:"8px"},children:[s.jsx("i",{className:"bi bi-calculator me-2"})," "]})]}):s.jsxs("div",{children:[s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover align-middle mb-0",style:{fontSize:"0.9rem"},children:[s.jsx("thead",{children:s.jsxs("tr",{className:"table-primary",children:[s.jsx("th",{className:"text-center",style:{minWidth:"80px"},children:""}),s.jsx("th",{className:"text-center",style:{minWidth:"80px"},children:""}),P[0]?.details?.map((X,fe)=>s.jsxs("th",{className:"text-center",style:{minWidth:"100px"},children:[X.examName,s.jsx("br",{}),s.jsxs("small",{className:"text-muted",children:["(",X.weight,"%)"]})]},fe)),s.jsx("th",{className:"text-center bg-light",style:{minWidth:"100px"},children:s.jsx("strong",{children:""})})]})}),s.jsx("tbody",{children:P.map((X,fe)=>{const Se=U.find(ke=>ke.enrollId===X.enrollId),Te=Se?`${Se.lastName||""}${Se.firstName||""}`.trim()||Se.studentName:"",Ce=Se?Se.studentNo||Se.userId:"";return s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:Ce}),s.jsx("td",{className:"text-center fw-semibold",children:Te}),X.details?.map((ke,Oe)=>s.jsx("td",{className:"text-center",children:ke.isTarget?ke.hasSubmission?s.jsx("span",{className:"badge bg-info text-white",children:ke.score.toFixed(2)}):s.jsx("span",{className:"badge bg-warning text-dark",children:""}):s.jsx("span",{className:"badge bg-secondary text-white",children:""})},Oe)),s.jsx("td",{className:"text-center bg-light",children:s.jsx("strong",{className:"fs-6 text-primary",style:{cursor:"help"},title:(()=>{const ke=[];return X.details?.forEach(Oe=>{if(Oe.isTarget&&Oe.hasSubmission){const Ie=Oe.score*Oe.weight/100;ke.push(`${Oe.examName}: ${Oe.score}  ${Oe.weight}% = ${Ie.toFixed(2)}`)}}),ke.length>0?ke.join(`
`):" "})(),children:X.score.toFixed(2)})})]},fe)})})]})}),s.jsx("div",{className:"d-flex justify-content-end mt-3",children:s.jsxs("button",{className:"btn btn-success",onClick:async()=>{if(P.length===0){await Ve.fire({title:"",text:"   .",icon:"warning",confirmButtonText:""});return}if((await Ve.fire({title:"  ",text:"   ?",icon:"question",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed)try{const fe=P.map(Ce=>({enrollId:Ce.enrollId,gradeCriteriaCd:"EXAM",rawScore:Ce.score})),Se=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(t)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(fe)});if(!Se.ok)throw new Error(`(${Se.status})    .`);await Ve.fire({title:" ",text:"   .",icon:"success",confirmButtonText:""});const Te=new Map;P.forEach(Ce=>{Te.set(Ce.enrollId,Ce.score)}),Z(Te),W("all"),G([])}catch(fe){console.error("   :",fe),await Ve.fire({title:"",text:fe.message||"     .",icon:"error",confirmButtonText:""})}},children:[s.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}):s.jsxs("div",{children:[(k==="all"||k==="partial")&&s.jsxs("div",{className:"alert alert-info mb-3",children:[s.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),k==="partial"&&s.jsxs("div",{className:"alert alert-warning mb-3",children:[s.jsx("strong",{children:"  :"}),s.jsx("div",{className:"mt-2",children:U.filter(X=>!Q.has(X.enrollId)).map((X,fe)=>{const Se=`${X.lastName||""}${X.firstName||""}`.trim()||X.studentName,Te=X.studentNo||X.userId;return s.jsxs("span",{className:"badge bg-warning text-dark me-2",children:[Te," ",Se]},fe)})})]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover align-middle mb-0",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"table-primary",children:[s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""})]})}),s.jsx("tbody",{children:U.map((X,fe)=>{const Se=Q.get(X.enrollId),Te=`${X.lastName||""}${X.firstName||""}`.trim()||X.studentName,Ce=X.studentNo||X.userId;return s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:Ce}),s.jsx("td",{className:"text-center fw-semibold",children:Te}),s.jsx("td",{className:"text-center",children:Se!==void 0?s.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:Se.toFixed(2)}):s.jsx("span",{className:"badge bg-secondary fs-6 px-3 py-2",children:"  "})})]},fe)})})]})}),s.jsx("div",{className:"d-flex justify-content-end mt-3",children:s.jsxs("button",{className:"btn btn-warning",onClick:async()=>{W("none"),await Ka()},children:[s.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]})}),je.code==="TASK"&&s.jsx("div",{children:E===null?s.jsxs("div",{className:"text-center py-5",children:[s.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:s.jsx("span",{className:"visually-hidden",children:" ..."})}),s.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):E==="none"?s.jsx("div",{children:$.length===0?s.jsxs("div",{className:"alert alert-warning text-center py-5",children:[s.jsx("i",{className:"bi bi-exclamation-circle fs-1 mb-3 d-block"}),s.jsx("h5",{children:"   "}),s.jsx("p",{className:"mb-0",children:"    ."}),s.jsxs("button",{className:"btn btn-primary mt-3",onClick:Wa,style:{backgroundColor:"#0d6efd",paddingLeft:"8px",paddingRight:"8px"},children:[s.jsx("i",{className:"bi bi-calculator me-2"})," "]})]}):s.jsxs("div",{children:[s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover align-middle mb-0",style:{fontSize:"0.9rem"},children:[s.jsx("thead",{children:s.jsxs("tr",{className:"table-primary",children:[s.jsx("th",{className:"text-center",style:{minWidth:"80px"},children:""}),s.jsx("th",{className:"text-center",style:{minWidth:"80px"},children:""}),$[0]?.details?.indivTasks?.map((X,fe)=>s.jsxs("th",{className:"text-center",style:{minWidth:"100px"},children:[X.taskName,s.jsx("br",{}),s.jsxs("small",{className:"text-muted",children:["(",X.weight,"%)"]})]},`indiv-${fe}`)),$[0]?.details?.groupTasks?.map((X,fe)=>s.jsxs("th",{className:"text-center",style:{minWidth:"100px"},children:[X.taskName,s.jsx("br",{}),s.jsxs("small",{className:"text-muted",children:["(",X.weight,"%)"]})]},`group-${fe}`)),s.jsx("th",{className:"text-center bg-light",style:{minWidth:"100px"},children:s.jsx("strong",{children:""})})]})}),s.jsx("tbody",{children:$.map((X,fe)=>{const Se=U.find(ke=>ke.enrollId===X.enrollId),Te=Se?`${Se.lastName||""}${Se.firstName||""}`.trim()||Se.studentName:"",Ce=Se?Se.studentNo||Se.userId:"";return s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:Ce}),s.jsx("td",{className:"text-center fw-semibold",children:Te}),X.details?.indivTasks?.map((ke,Oe)=>s.jsx("td",{className:"text-center",children:ke.isTarget?ke.hasSubmission?s.jsx("span",{className:"badge bg-info text-white",children:ke.score.toFixed(2)}):s.jsx("span",{className:"badge bg-warning text-dark",children:""}):s.jsx("span",{className:"badge bg-secondary text-white",children:""})},`indiv-${Oe}`)),X.details?.groupTasks?.map((ke,Oe)=>s.jsx("td",{className:"text-center",children:ke.isTarget?ke.hasSubmission?s.jsx("span",{className:"badge bg-info text-white",children:ke.score.toFixed(2)}):s.jsx("span",{className:"badge bg-warning text-dark",children:""}):s.jsx("span",{className:"badge bg-secondary text-white",children:""})},`group-${Oe}`)),s.jsx("td",{className:"text-center bg-light",children:s.jsx("strong",{className:"fs-6 text-primary",style:{cursor:"help"},title:(()=>{const ke=[];return X.details?.indivTasks?.forEach(Oe=>{if(Oe.isTarget&&Oe.hasSubmission){const Ie=Oe.score*Oe.weight/100;ke.push(`${Oe.taskName}: ${Oe.score}  ${Oe.weight}% = ${Ie.toFixed(2)}`)}}),X.details?.groupTasks?.forEach(Oe=>{if(Oe.isTarget&&Oe.hasSubmission){const Ie=Oe.score*Oe.weight/100;ke.push(`${Oe.taskName}: ${Oe.score}  ${Oe.weight}% = ${Ie.toFixed(2)}`)}}),ke.length>0?ke.join(`
`):" "})(),children:X.score.toFixed(2)})})]},fe)})})]})}),s.jsx("div",{className:"d-flex justify-content-end mt-3",children:s.jsxs("button",{className:"btn btn-success",onClick:async()=>{if($.length===0){await Ve.fire({title:"",text:"   .",icon:"warning",confirmButtonText:""});return}if((await Ve.fire({title:"  ",text:"   ?",icon:"question",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed)try{const fe=$.map(Ce=>({enrollId:Ce.enrollId,gradeCriteriaCd:"TASK",rawScore:Ce.score})),Se=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(t)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(fe)});if(!Se.ok)throw new Error(`(${Se.status})    .`);await Ve.fire({title:" ",text:"   .",icon:"success",confirmButtonText:""});const Te=new Map;$.forEach(Ce=>{Te.set(Ce.enrollId,Ce.score)}),H(Te),L("all"),O([])}catch(fe){console.error("   :",fe),await Ve.fire({title:"",text:fe.message||"     .",icon:"error",confirmButtonText:""})}},children:[s.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}):s.jsxs("div",{children:[(E==="all"||E==="partial")&&s.jsxs("div",{className:"alert alert-info mb-3",children:[s.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),E==="partial"&&s.jsxs("div",{className:"alert alert-warning mb-3",children:[s.jsx("strong",{children:"  :"}),s.jsx("div",{className:"mt-2",children:U.filter(X=>!q.has(X.enrollId)).map((X,fe)=>{const Se=`${X.lastName||""}${X.firstName||""}`.trim()||X.studentName,Te=X.studentNo||X.userId;return s.jsxs("span",{className:"badge bg-warning text-dark me-2",children:[Te," ",Se]},fe)})})]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover align-middle mb-0",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"table-primary",children:[s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""})]})}),s.jsx("tbody",{children:U.map((X,fe)=>{const Se=q.get(X.enrollId),Te=`${X.lastName||""}${X.firstName||""}`.trim()||X.studentName,Ce=X.studentNo||X.userId;return s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:Ce}),s.jsx("td",{className:"text-center fw-semibold",children:Te}),s.jsx("td",{className:"text-center",children:Se!==void 0?s.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:Se.toFixed(2)}):s.jsx("span",{className:"badge bg-secondary fs-6 px-3 py-2",children:"  "})})]},fe)})})]})}),s.jsx("div",{className:"d-flex justify-content-end mt-3",children:s.jsxs("button",{className:"btn btn-warning",onClick:async()=>{L("none"),await Wa()},children:[s.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]})}),je.code==="PRAC"&&s.jsx("div",{children:ae===null?s.jsxs("div",{className:"text-center py-5",children:[s.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:s.jsx("span",{className:"visually-hidden",children:" ..."})}),s.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):ae==="all"?s.jsxs("div",{children:[s.jsxs("div",{className:"alert alert-info mb-3",children:[s.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover align-middle mb-0",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"table-primary",children:[s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""})]})}),s.jsx("tbody",{children:U.map((X,fe)=>{const Se=Y.get(X.enrollId),Te=`${X.lastName||""}${X.firstName||""}`.trim()||X.studentName,Ce=X.studentNo||X.userId;return s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:Ce}),s.jsx("td",{className:"text-center fw-semibold",children:Te}),s.jsx("td",{className:"text-center",children:s.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:Se.toFixed(2)})})]},fe)})})]})}),s.jsx("div",{className:"d-flex justify-content-end mt-3",children:s.jsxs("button",{className:"btn btn-warning",onClick:()=>{const X={};Y.forEach((fe,Se)=>{X[Se]=fe}),$e(X),xe("none")},children:[s.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]}):s.jsxs("div",{children:[ae==="partial"&&s.jsxs("div",{className:"alert alert-warning mb-3",children:[s.jsx("strong",{children:"    ."}),"       ."]}),s.jsxs("div",{className:"alert alert-info mb-3",children:[s.jsx("i",{className:"bi bi-info-circle me-2"}),"      . (0-100)"]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover align-middle mb-0",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"table-primary",children:[s.jsx("th",{className:"text-center",style:{width:"150px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"150px"},children:""}),s.jsx("th",{className:"text-center",children:""})]})}),s.jsx("tbody",{children:U.map((X,fe)=>{const Se=`${X.lastName||""}${X.firstName||""}`.trim()||X.studentName,Te=X.studentNo||X.userId,Ce=me[X.enrollId]??"";return s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:Te}),s.jsx("td",{className:"text-center fw-semibold",children:Se}),s.jsx("td",{className:"text-center",children:s.jsx("input",{type:"number",className:"form-control text-center",placeholder:"0-100",min:"0",max:"100",step:"0.01",value:Ce,onChange:ke=>{const Oe=ke.target.value;$e(Ie=>({...Ie,[X.enrollId]:Oe}))},style:{maxWidth:"120px",margin:"0 auto"}})})]},fe)})})]})}),s.jsx("div",{className:"d-flex justify-content-end mt-3",children:s.jsxs("button",{className:"btn btn-success",onClick:async()=>{if(Object.keys(me).length===0){await Ve.fire({title:"",text:"   .",icon:"warning",confirmButtonText:""});return}if((await Ve.fire({title:"  ",text:"   ?",icon:"question",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed)try{const fe=U.map(Ce=>({enrollId:Ce.enrollId,gradeCriteriaCd:"PRAC",rawScore:parseFloat(me[Ce.enrollId]||0)})),Se=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(t)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(fe)});if(!Se.ok)throw new Error(`(${Se.status})    .`);await Ve.fire({title:" ",text:"   .",icon:"success",confirmButtonText:""});const Te=new Map;fe.forEach(Ce=>{Te.set(Ce.enrollId,Ce.rawScore)}),ee(Te),xe("all"),$e({})}catch(fe){console.error("   :",fe),await Ve.fire({title:"",text:fe.message||"     .",icon:"error",confirmButtonText:""})}},children:[s.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}),je.code==="MISC"&&s.jsx("div",{children:te===null?s.jsxs("div",{className:"text-center py-5",children:[s.jsx("div",{className:"spinner-border text-primary mb-3",role:"status",children:s.jsx("span",{className:"visually-hidden",children:" ..."})}),s.jsx("p",{className:"text-muted mb-0",children:"    ..."})]}):te==="all"?s.jsxs("div",{children:[s.jsxs("div",{className:"alert alert-info mb-3",children:[s.jsx("i",{className:"bi bi-info-circle me-2"}),"    ."]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover align-middle mb-0",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"table-primary",children:[s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""}),s.jsx("th",{className:"text-center",children:""})]})}),s.jsx("tbody",{children:U.map((X,fe)=>{const Se=se.get(X.enrollId),Te=`${X.lastName||""}${X.firstName||""}`.trim()||X.studentName,Ce=X.studentNo||X.userId;return s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:Ce}),s.jsx("td",{className:"text-center fw-semibold",children:Te}),s.jsx("td",{className:"text-center",children:s.jsx("span",{className:"badge bg-primary fs-6 px-3 py-2",children:Se.toFixed(2)})})]},fe)})})]})}),s.jsx("div",{className:"d-flex justify-content-end mt-3",children:s.jsxs("button",{className:"btn btn-warning",onClick:()=>{const X={};se.forEach((fe,Se)=>{X[Se]=fe}),_e(X),oe("none")},children:[s.jsx("i",{className:"bi bi-pencil me-2"})," "]})})]}):s.jsxs("div",{children:[te==="partial"&&s.jsxs("div",{className:"alert alert-warning mb-3",children:[s.jsx("strong",{children:"    ."}),"       ."]}),s.jsxs("div",{className:"alert alert-info mb-3",children:[s.jsx("i",{className:"bi bi-info-circle me-2"}),"      . (0-100)"]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover align-middle mb-0",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"table-primary",children:[s.jsx("th",{className:"text-center",style:{width:"150px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"150px"},children:""}),s.jsx("th",{className:"text-center",children:""})]})}),s.jsx("tbody",{children:U.map((X,fe)=>{const Se=`${X.lastName||""}${X.firstName||""}`.trim()||X.studentName,Te=X.studentNo||X.userId,Ce=we[X.enrollId]??"";return s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:Te}),s.jsx("td",{className:"text-center fw-semibold",children:Se}),s.jsx("td",{className:"text-center",children:s.jsx("input",{type:"number",className:"form-control text-center",placeholder:"0-100",min:"0",max:"100",step:"0.01",value:Ce,onChange:ke=>{const Oe=ke.target.value;_e(Ie=>({...Ie,[X.enrollId]:Oe}))},style:{maxWidth:"120px",margin:"0 auto"}})})]},fe)})})]})}),s.jsx("div",{className:"d-flex justify-content-end mt-3",children:s.jsxs("button",{className:"btn btn-success",onClick:async()=>{if(Object.keys(we).length===0){await Ve.fire({title:"",text:"   .",icon:"warning",confirmButtonText:""});return}if((await Ve.fire({title:"  ",text:"   ?",icon:"question",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed)try{const fe=U.map(Ce=>({enrollId:Ce.enrollId,gradeCriteriaCd:"MISC",rawScore:parseFloat(we[Ce.enrollId]||0)})),Se=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(t)}/end/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify(fe)});if(!Se.ok)throw new Error(`(${Se.status})    .`);await Ve.fire({title:" ",text:"   .",icon:"success",confirmButtonText:""});const Te=new Map;fe.forEach(Ce=>{Te.set(Ce.enrollId,Ce.rawScore)}),ue(Te),oe("all"),_e({})}catch(fe){console.error("   :",fe),await Ve.fire({title:"",text:fe.message||"     .",icon:"error",confirmButtonText:""})}},children:[s.jsx("i",{className:"bi bi-save me-2"})," "]})})]})}),je.code==="TOTAL"&&s.jsxs("div",{children:[pt.length===0&&s.jsx("div",{className:"table-responsive mb-4",children:s.jsxs("table",{className:"table table-bordered align-middle",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",style:{width:"150px"},children:" "}),s.jsx("th",{className:"text-center",style:{width:"100px"},children:" "}),s.jsx("th",{className:"text-center",style:{width:"120px"},children:"  "}),s.jsx("th",{className:"text-center",children:""})]})}),s.jsxs("tbody",{children:[y.find(X=>X.gradeCriteriaCd==="ATTD")?.ratio>0&&s.jsxs("tr",{children:[s.jsx("td",{className:"text-center fw-semibold",children:""}),s.jsxs("td",{className:"text-center",children:[y.find(X=>X.gradeCriteriaCd==="ATTD")?.ratio||0,"%"]}),s.jsx("td",{className:"text-center",children:B===null?s.jsx("span",{className:"badge bg-secondary",children:"..."}):B==="all"?s.jsx("span",{className:"badge bg-info",children:""}):B==="partial"?s.jsx("span",{className:"badge bg-warning text-dark",children:""}):s.jsx("span",{className:"badge bg-danger",children:" "})}),s.jsxs("td",{className:"small",children:[B==="all"&&"    .",B==="partial"&&"    .",B==="none"&&"   ."]})]}),y.find(X=>X.gradeCriteriaCd==="TASK")?.ratio>0&&s.jsxs("tr",{children:[s.jsx("td",{className:"text-center fw-semibold",children:""}),s.jsxs("td",{className:"text-center",children:[y.find(X=>X.gradeCriteriaCd==="TASK")?.ratio||0,"%"]}),s.jsx("td",{className:"text-center",children:E===null?s.jsx("span",{className:"badge bg-secondary",children:"..."}):E==="all"?s.jsx("span",{className:"badge bg-info",children:""}):E==="partial"?s.jsx("span",{className:"badge bg-warning text-dark",children:""}):s.jsx("span",{className:"badge bg-danger",children:" "})}),s.jsxs("td",{className:"small",children:[E==="all"&&"    .",E==="partial"&&"    .",E==="none"&&"   ."]})]}),y.find(X=>X.gradeCriteriaCd==="EXAM")?.ratio>0&&s.jsxs("tr",{children:[s.jsx("td",{className:"text-center fw-semibold",children:""}),s.jsxs("td",{className:"text-center",children:[y.find(X=>X.gradeCriteriaCd==="EXAM")?.ratio||0,"%"]}),s.jsx("td",{className:"text-center",children:k===null?s.jsx("span",{className:"badge bg-secondary",children:"..."}):k==="all"?s.jsx("span",{className:"badge bg-info",children:""}):k==="partial"?s.jsx("span",{className:"badge bg-warning text-dark",children:""}):s.jsx("span",{className:"badge bg-danger",children:" "})}),s.jsxs("td",{className:"small",children:[k==="all"&&"    .",k==="partial"&&"    .",k==="none"&&"   ."]})]}),y.find(X=>X.gradeCriteriaCd==="PRAC")?.ratio>0&&s.jsxs("tr",{children:[s.jsx("td",{className:"text-center fw-semibold",children:""}),s.jsxs("td",{className:"text-center",children:[y.find(X=>X.gradeCriteriaCd==="PRAC")?.ratio||0,"%"]}),s.jsx("td",{className:"text-center",children:ae===null?s.jsx("span",{className:"badge bg-secondary",children:"..."}):ae==="all"?s.jsx("span",{className:"badge bg-info",children:""}):ae==="partial"?s.jsx("span",{className:"badge bg-warning text-dark",children:""}):s.jsx("span",{className:"badge bg-danger",children:" "})}),s.jsxs("td",{className:"small",children:[ae==="all"&&"    .",ae==="partial"&&"    .",ae==="none"&&"   ."]})]}),y.find(X=>X.gradeCriteriaCd==="MISC")?.ratio>0&&s.jsxs("tr",{children:[s.jsx("td",{className:"text-center fw-semibold",children:""}),s.jsxs("td",{className:"text-center",children:[y.find(X=>X.gradeCriteriaCd==="MISC")?.ratio||0,"%"]}),s.jsx("td",{className:"text-center",children:te===null?s.jsx("span",{className:"badge bg-secondary",children:"..."}):te==="all"?s.jsx("span",{className:"badge bg-info",children:""}):te==="partial"?s.jsx("span",{className:"badge bg-warning text-dark",children:""}):s.jsx("span",{className:"badge bg-danger",children:" "})}),s.jsxs("td",{className:"small",children:[te==="all"&&"    .",te==="partial"&&"    .",te==="none"&&"   ."]})]})]})]})}),pt.length===0&&(()=>{const X=y.filter(Te=>Te.ratio>0),fe={ATTD:B,TASK:E,EXAM:k,PRAC:ae,MISC:te},Se=X.every(Te=>fe[Te.gradeCriteriaCd]==="all");return X.some(Te=>fe[Te.gradeCriteriaCd]==="partial"),X.some(Te=>fe[Te.gradeCriteriaCd]==="none"),s.jsx("div",{className:"mb-4",children:Se?s.jsxs("div",{className:"alert alert-success",children:[s.jsx("i",{className:"bi bi-check-circle-fill me-2"}),s.jsx("strong",{children:"   !"}),"     ."]}):s.jsxs("div",{className:"alert alert-warning",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),s.jsx("strong",{children:"   ."}),"        ."]})})})(),pt.length===0&&s.jsx("div",{className:"d-flex justify-content-end",children:s.jsx("button",{className:"btn btn-success btn-lg",onClick:In,disabled:(()=>{const X=y.filter(Te=>Te.ratio>0),fe={ATTD:B,TASK:E,EXAM:k,PRAC:ae,MISC:te};return!X.every(Te=>fe[Te.gradeCriteriaCd]==="all")||Qs})(),children:Qs?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"})," ..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"bi bi-calculator me-2"}),"   "]})})}),Oi&&s.jsx("div",{className:"alert alert-danger mt-3",role:"alert",children:Oi.message||String(Oi)}),pt.length>0?s.jsxs("div",{className:"mt-4",children:[s.jsx("h6",{className:"fw-semibold mb-3",children:"  "}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover align-middle mb-0",style:{fontSize:"0.9rem"},children:[s.jsx("thead",{children:s.jsxs("tr",{className:"table-success",children:[s.jsx("th",{className:"text-center",style:{minWidth:"90px"},children:""}),s.jsx("th",{className:"text-center",style:{minWidth:"90px"},children:""}),Rn.map(X=>s.jsxs("th",{className:"text-center",style:{minWidth:"120px"},children:[X.label,s.jsx("br",{}),s.jsxs("small",{className:"text-muted",children:["(",X.ratio,"%)"]})]},X.code)),s.jsx("th",{className:"text-center bg-light",style:{minWidth:"120px"},children:s.jsx("strong",{children:""})})]})}),s.jsx("tbody",{children:pt.map(X=>{const fe=Js.get(X.enrollId),Se=fe&&(`${fe.lastName||""}${fe.firstName||""}`.trim()||fe.studentName)||"-",Te=fe&&(fe.studentNo||fe.userId)||"-",Ce=X.hasMissing??X.breakdown.some(ke=>ke.rawScore===null||ke.rawScore===void 0);return s.jsxs("tr",{className:Ce?"table-warning":"",children:[s.jsx("td",{className:"text-center",children:Te}),s.jsx("td",{className:"text-center fw-semibold",children:Se}),X.breakdown.map(ke=>{const Oe=ke.rawScore!==null&&ke.rawScore!==void 0,Ie=typeof ke.weightedScore=="number"?ke.weightedScore:0;return s.jsx("td",{className:"text-center",children:Oe?s.jsxs("div",{className:"d-flex flex-column align-items-center gap-1",children:[s.jsx("span",{className:"badge bg-primary-subtle text-primary border border-primary-subtle",children:ke.rawScore.toFixed(2)}),s.jsxs("small",{className:"text-muted",children:[" ",ke.ratio,"% = ",Ie.toFixed(2)]})]}):s.jsx("span",{className:"badge bg-warning text-dark",children:""})},ke.code)}),s.jsx("td",{className:"text-center",children:s.jsx("span",{className:`badge ${Ce?"bg-warning text-dark":"bg-success text-white"} fs-6`,children:X.totalScore.toFixed(2)})})]},X.enrollId)})})]})})]}):!Qs&&s.jsx("div",{className:"text-muted mt-3",children:"     ."})]})]})]})},Me)})]})]})}):Ue===2?s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:s.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:[(console.log("=== modalStep 2   ==="),console.log("totalScorePreview:",pt),console.log("totalScorePreview.length:",pt.length),console.log("studentMap:",Js),console.log("studentMap.size:",Js?.size),console.log("lectureInfo:",C),console.log("evaluateInterval:",S),null),!C||C.subjectTypeCd!=="SUBJ_RELATIVE"?s.jsxs("div",{className:"alert alert-info",children:[s.jsx("i",{className:"bi bi-info-circle me-2"}),s.jsx("strong",{children:" "}),s.jsxs("p",{className:"mb-0 mt-2",children:[C?.subjectTypeCd==="SUBJ_ABSOLUTE"&&"",C?.subjectTypeCd==="SUBJ_PASSFAIL"&&"PASS or FAIL",!C&&"  "]})]}):s.jsxs("div",{children:[s.jsx("h5",{className:"mb-4",children:"   ()"}),pt.length===0?s.jsxs("div",{className:"alert alert-warning",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),s.jsx("strong",{children:"  "}),s.jsx("p",{className:"mb-0 mt-2",children:'   ""  "   "   .'})]}):(()=>{console.log("===     ==="),console.log("totalScorePreview :",pt);const je=pt.map(Ee=>{const Be=Js.get(Ee.enrollId);console.log(`enrollId ${Ee.enrollId}:`,Be);const Re=Be&&(`${Be.lastName||""}${Be.firstName||""}`.trim()||Be.studentName)||"-",Fe=Be&&(Be.studentNo||Be.userId)||"-",rt=Ee.breakdown.find(It=>It.code==="ATTD")?.rawScore||0,$t={enrollId:Ee.enrollId,studentNo:Fe,name:Re,totalScore:Ee.totalScore,attendanceScore:rt,isFail:rt===0};return console.log("  :",$t),$t});console.log("studentsWithGrades:",je);const Me=je.filter(Ee=>Ee.isFail),Ae=je.filter(Ee=>!Ee.isFail);console.log("failStudents:",Me),console.log("regularStudents:",Ae),Ae.sort((Ee,Be)=>Be.totalScore-Ee.totalScore),console.log("  regularStudents:",Ae);const Le=Math.round(C.currentCap*(S?.A||0)/100),X=Math.round(C.currentCap*(S?.B||0)/100);console.log("  :",{currentCap:C.currentCap,evaluateInterval:S,aCount:Le,bCount:X});const fe=Ae.map((Ee,Be)=>{let Re="C~D";return Be<Le?Re="A":Be<Le+X&&(Re="B"),{...Ee,interval:Re,rank:Be+1}}),Se=fe.filter(Ee=>Ee.interval==="A"),Te=fe.filter(Ee=>Ee.interval==="B"),Ce=fe.filter(Ee=>Ee.interval==="C~D");console.log("  :",{aStudents:Se,bStudents:Te,cdStudents:Ce});const ke={A:Gt.A!==null?Gt.A:Math.floor(Se.length/2),B:Gt.B!==null?Gt.B:Math.floor(Te.length/2),CD:Gt.CD.length>0?Gt.CD:[Math.floor(Ce.length/4),Math.floor(Ce.length/2),Math.floor(Ce.length*3/4)]},Oe=(Ee,Be,Re)=>{if(Re==="A")return Be<=(ke.A||0)?"A+":"A0";if(Re==="B")return Be<=(ke.B||0)?"B+":"B0";if(Re==="C~D"){const Fe=ke.CD||[];return Be<=(Fe[0]||0)?"C+":Be<=(Fe[1]||0)?"C0":Be<=(Fe[2]||0)?"D+":"D0"}return Re},Ie=(Ee,Be,Re,Fe)=>{const Ke=(lt,Ft)=>Je=>{Je.dataTransfer.effectAllowed="move",us({interval:Ft,originalIdx:lt})},rt=lt=>{lt.preventDefault(),lt.dataTransfer.dropEffect="move"},$t=lt=>Ft=>{if(Ft.preventDefault(),!oa)return;const{interval:Je,originalIdx:pn}=oa;if(Fe==="A"&&Je==="A")Ln(xs=>({...xs,A:lt}));else if(Fe==="B"&&Je==="B")Ln(xs=>({...xs,B:lt}));else if(Fe==="C~D"&&Je==="C~D"){const xs=ke.CD.indexOf(pn);if(xs!==-1){const Ja=[...ke.CD];Ja[xs]=lt,Ln($l=>({...$l,CD:Ja.sort((gn,Cs)=>gn-Cs)}))}}us(null)},It=()=>{us(null)};return s.jsxs("div",{className:"mb-3",children:[s.jsxs("h6",{className:"fw-semibold mb-2",children:[Be," (",Ee.length,")"]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-sm table-bordered table-hover mb-0",style:{fontSize:"0.85rem"},children:[s.jsx("thead",{className:Re,children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",style:{width:"60px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"80px"},children:""})]})}),s.jsx("tbody",{children:Ee.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:"5",className:"text-center text-muted py-3",children:"   ."})}):s.jsx(s.Fragment,{children:Ee.map((lt,Ft)=>{const Je=Oe(lt,Ft,Fe),pn=Fe==="A"&&Ft===ke.A||Fe==="B"&&Ft===ke.B||Fe==="C~D"&&ke.CD.includes(Ft);return s.jsx(Gs.Fragment,{children:s.jsxs("tr",{style:{position:"relative",borderBottom:pn?"3px solid #dc3545":void 0},onDragOver:rt,onDrop:$t(Ft),children:[s.jsx("td",{className:"text-center",children:lt.rank||"-"}),s.jsx("td",{className:"text-center",children:lt.studentNo}),s.jsx("td",{className:"text-center",children:lt.name}),s.jsxs("td",{className:"text-center",style:{position:"relative"},children:[lt.totalScore.toFixed(2),pn&&s.jsx("div",{draggable:!0,onDragStart:Ke(Ft,Fe),onDragEnd:It,style:{position:"absolute",right:"-12px",top:"50%",transform:"translateY(-50%)",width:"24px",height:"24px",borderRadius:"50%",padding:0,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"14px",lineHeight:1,border:"2px solid white",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",backgroundColor:"#dc3545",color:"white",cursor:"grab",userSelect:"none",zIndex:100},onMouseDown:xs=>xs.currentTarget.style.cursor="grabbing",onMouseUp:xs=>xs.currentTarget.style.cursor="grab",children:""})]}),s.jsx("td",{className:"text-center",children:s.jsx("span",{className:`badge ${Je.startsWith("A")?"bg-info":Je.startsWith("B")?"bg-primary":Je.startsWith("C")||Je.startsWith("D")?"bg-warning":"bg-danger"}`,children:Je})})]})},lt.enrollId)})})})]})})]})};return s.jsxs("div",{children:[Me.length>0&&s.jsxs("div",{className:"mb-4 p-3 bg-danger bg-opacity-10 border border-danger rounded",children:[s.jsxs("h6",{className:"fw-semibold mb-2 text-danger",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"F  ( 0) (",Me.length,")"]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-sm table-bordered table-hover mb-0",style:{fontSize:"0.85rem"},children:[s.jsx("thead",{className:"table-danger",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"80px"},children:""})]})}),s.jsx("tbody",{children:Me.map(Ee=>s.jsxs("tr",{children:[s.jsx("td",{className:"text-center",children:Ee.studentNo}),s.jsx("td",{className:"text-center",children:Ee.name}),s.jsx("td",{className:"text-center",children:Ee.totalScore.toFixed(2)}),s.jsx("td",{className:"text-center",children:s.jsx("span",{className:"badge bg-danger",children:"F"})})]},Ee.enrollId))})]})})]}),s.jsxs("div",{className:"alert alert-info mb-3",children:[s.jsx("div",{className:"fw-semibold mb-2",children:"   "}),s.jsxs("div",{className:"d-flex gap-3",children:[s.jsxs("span",{children:["A: ",Se.length,""]}),s.jsxs("span",{children:["B: ",Te.length,""]}),s.jsxs("span",{children:["C~D: ",Ce.length,""]}),Me.length>0&&s.jsxs("span",{className:"text-danger",children:["F: ",Me.length,""]})]})]}),s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-4",children:Ie(Se,"A ","table-success","A")}),s.jsx("div",{className:"col-md-4",children:Ie(Te,"B ","table-primary","B")}),s.jsx("div",{className:"col-md-4",children:Ie(Ce,"C~D ","table-info","C~D")})]})]})})()]})]})}):s.jsx("div",{style:{flex:1,display:"flex",flexDirection:"column",minHeight:0},children:s.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"1rem"},children:[s.jsx("h5",{className:"mb-4",children:"   "}),s.jsxs("div",{className:"card mb-3",children:[s.jsx("div",{className:"card-header bg-light",children:s.jsx("h6",{className:"mb-0",children:"  "})}),s.jsx("div",{className:"card-body",children:s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-md-6",children:[s.jsx("strong",{children:" :"})," ",C?.subjectTypeName||"-"]}),s.jsxs("div",{className:"col-md-6",children:[s.jsx("strong",{children:" :"})," ",C?.currentCap||0,""]})]})})]}),s.jsxs("div",{className:"card mb-3",children:[s.jsx("div",{className:"card-header bg-light",children:s.jsx("h6",{className:"mb-0",children:"  "})}),s.jsx("div",{className:"card-body",children:s.jsx("div",{className:"d-flex gap-3 flex-wrap",children:y.filter(je=>je.ratio>0).map(je=>s.jsxs("div",{className:"badge bg-primary fs-6",children:[je.gradeCriteriaName,": ",je.ratio,"%"]},je.gradeCriteriaCd))})})]}),C?.subjectTypeCd==="SUBJ_RELATIVE"&&S&&s.jsxs("div",{className:"card mb-3",children:[s.jsx("div",{className:"card-header bg-light",children:s.jsx("h6",{className:"mb-0",children:"  "})}),s.jsx("div",{className:"card-body",children:s.jsxs("div",{className:"d-flex gap-3",children:[s.jsxs("span",{className:"badge bg-info fs-6",children:["A : ",S.A||0,"%"]}),s.jsxs("span",{className:"badge bg-primary fs-6",children:["B : ",S.B||0,"%"]}),s.jsxs("span",{className:"badge bg-warning fs-6",children:["C~D : ",100-(S.A||0)-(S.B||0),"%"]})]})})]}),s.jsxs("div",{className:"card",children:[s.jsx("div",{className:"card-header bg-light",children:s.jsx("h6",{className:"mb-0",children:"   ( )"})}),s.jsx("div",{className:"card-body",children:(()=>{if(pt.length===0)return s.jsx("div",{className:"alert alert-warning",children:"  .     ."});const je=pt.map(X=>{const fe=Js.get(X.enrollId),Se=fe&&(`${fe.lastName||""}${fe.firstName||""}`.trim()||fe.studentName)||"-",Te=fe&&(fe.studentNo||fe.userId)||"-",Oe=(X.breakdown.find(Ee=>Ee.code==="ATTD")?.rawScore||0)===0;let Ie="-";if(Oe)Ie="F";else if(C?.subjectTypeCd==="SUBJ_RELATIVE"){const Ee=pt.map(Re=>{const Fe=Re.breakdown.find(Ke=>Ke.code==="ATTD");return{enrollId:Re.enrollId,totalScore:Re.totalScore,isFail:(Fe?.rawScore||0)===0}}).filter(Re=>!Re.isFail).sort((Re,Fe)=>Fe.totalScore-Re.totalScore),Be=Ee.findIndex(Re=>Re.enrollId===X.enrollId);if(Be!==-1){const Re=Math.round(C.currentCap*(S?.A||0)/100),Fe=Math.round(C.currentCap*(S?.B||0)/100);let Ke="C~D";Be<Re?Ke="A":Be<Re+Fe&&(Ke="B");const rt={A:Gt.A!==null?Gt.A:Math.floor(Re/2),B:Gt.B!==null?Gt.B:Math.floor(Fe/2),CD:Gt.CD.length>0?Gt.CD:[Math.floor((C.currentCap-Re-Fe)/4),Math.floor((C.currentCap-Re-Fe)/2),Math.floor((C.currentCap-Re-Fe)*3/4)]};if(Ke==="A")Ie=Ee.slice(0,Re).findIndex(lt=>lt.enrollId===X.enrollId)<=rt.A?"A+":"A0";else if(Ke==="B")Ie=Ee.slice(Re,Re+Fe).findIndex(lt=>lt.enrollId===X.enrollId)<=rt.B?"B+":"B0";else{const It=Ee.slice(Re+Fe).findIndex(Ft=>Ft.enrollId===X.enrollId),lt=rt.CD;It<=(lt[0]||0)?Ie="C+":It<=(lt[1]||0)?Ie="C0":It<=(lt[2]||0)?Ie="D+":Ie="D0"}}}return{enrollId:X.enrollId,studentNo:Te,name:Se,totalScore:X.totalScore,finalGrade:Ie,isFail:Oe,breakdown:X.breakdown}}),Me=je.filter(X=>X.isFail),Le=[...je.filter(X=>!X.isFail),...Me];return s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-sm table-hover align-middle mb-0",style:{fontSize:"0.9rem"},children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{className:"text-center",style:{width:"60px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"100px"},children:""}),s.jsx("th",{className:"text-center",style:{width:"80px"},children:""}),Rn.map(X=>s.jsxs("th",{className:"text-center",style:{width:"80px"},children:[X.label,s.jsx("br",{}),s.jsxs("small",{className:"text-muted",children:["(",X.ratio,"%)"]})]},X.code)),s.jsx("th",{className:"text-center bg-light",style:{width:"80px"},children:s.jsx("strong",{children:""})}),s.jsx("th",{className:"text-center bg-success bg-opacity-10",style:{width:"80px"},children:s.jsx("strong",{children:""})})]})}),s.jsx("tbody",{children:Le.map((X,fe)=>s.jsxs("tr",{className:X.isFail?"table-danger":"",children:[s.jsx("td",{className:"text-center",children:fe+1}),s.jsx("td",{className:"text-center",children:X.studentNo}),s.jsx("td",{className:"text-center",children:X.name}),X.breakdown.map(Se=>s.jsx("td",{className:"text-center",children:Se.rawScore!==null&&Se.rawScore!==void 0?Se.rawScore.toFixed(1):"-"},Se.code)),s.jsx("td",{className:"text-center bg-light",children:s.jsx("strong",{children:X.totalScore.toFixed(2)})}),s.jsx("td",{className:"text-center",children:s.jsx("span",{className:`badge fs-6 ${X.finalGrade.startsWith("A")?"bg-info":X.finalGrade.startsWith("B")?"bg-primary":X.finalGrade.startsWith("C")||X.finalGrade.startsWith("D")?"bg-warning":X.finalGrade==="F"?"bg-danger":"bg-secondary"}`,children:X.finalGrade})})]},X.enrollId))})]})})})()})]})]})})]}),s.jsxs("div",{className:"modal-footer py-2",children:[Ue>1&&s.jsx("button",{type:"button",className:"btn btn-outline-secondary btn-sm",onClick:()=>Xe(Ue-1),children:" "}),s.jsx("div",{className:"ms-auto",children:Ue<3?s.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:()=>Xe(Ue+1),disabled:Ue===1&&(()=>{const je=y.filter(Le=>Le.ratio>0),Me={ATTD:B,TASK:E,EXAM:k,PRAC:ae,MISC:te};return!je.every(Le=>Me[Le.gradeCriteriaCd]==="all")||pt.length===0})(),style:{padding:"6px 12px"},children:" "}):s.jsx("button",{type:"button",className:"btn btn-primary btn-sm",onClick:_l,style:{padding:"6px 12px"},children:""})})]})]})})})]})}const Lv=["ATTD","TASK","EXAM","PRAC","MISC"],Iv={ATTD:"",TASK:"",EXAM:"",PRAC:"",MISC:""},gM=new Intl.NumberFormat("ko-KR",{minimumFractionDigits:0,maximumFractionDigits:2});function Gc(t){return typeof t!="number"||Number.isNaN(t)?"-":gM.format(t)}const xM=[{code:"P",label:"P"},{code:"NP",label:"NP"}],Uj=[{code:"A+",label:"A+(4.5)",score:4.5},{code:"A0",label:"A0(4.0)",score:4},{code:"B+",label:"B+(3.5)",score:3.5},{code:"B0",label:"B0(3.0)",score:3},{code:"C+",label:"C+(2.5)",score:2.5},{code:"C0",label:"C0(2.0)",score:2},{code:"D+",label:"D+(1.5)",score:1.5},{code:"D0",label:"D0(1.0)",score:1},{code:"F",label:"F(0.0)",score:0}],Ov=Uj.reduce((t,e)=>(t[e.code]=e.score,t),{});function bM(){const{lectureId:t}=ht(),{students:e,lecture:a}=ds(),[i,o]=x.useState([]),[d,u]=x.useState([]),[h,m]=x.useState(!0),[p,b]=x.useState(null),[y,v]=x.useState(""),[N,D]=x.useState(0),[C,A]=x.useState(null),[S,M]=x.useState(!1),[F,z]=x.useState(null),[K,R]=x.useState(!1);x.useEffect(()=>{let Y=!0;return t?((async()=>{try{m(!0),b(null);const ee=`/classroom/api/v1/professor/${encodeURIComponent(t)}`,[ae,xe]=await Promise.all([fetch(`${ee}/finalize/score`,{headers:{Accept:"application/json"},credentials:"include"}),fetch(`/classroom/api/v1/common/${encodeURIComponent(t)}/ratio`,{headers:{Accept:"application/json"},credentials:"include"})]);if(!ae.ok)throw new Error(`(${ae.status})     .`);if(!xe.ok)throw new Error(`(${xe.status})      .`);const[me,$e]=await Promise.all([ae.json(),xe.json()]);if(!Y)return;const se=Array.isArray(me)?me.slice().sort((ue,te)=>String(ue?.enrollId??"").localeCompare(String(te?.enrollId??""))):[];o(se),u(Array.isArray($e)?$e:[])}catch(ee){if(!Y)return;b(ee),o([]),u([])}finally{Y&&m(!1)}})(),()=>{Y=!1}):(o([]),u([]),m(!1),()=>{Y=!1})},[t,N]),x.useEffect(()=>{if(!C)return;const Y=ee=>{ee.key==="Escape"&&(ee.preventDefault(),S||(A(null),z(null)))};return document.addEventListener("keydown",Y),()=>{document.removeEventListener("keydown",Y)}},[C,S]);const w=x.useMemo(()=>{const Y=new Map;return Array.isArray(e)&&e.forEach(ee=>{if(!ee)return;const ae=ee.enrollId!=null?String(ee.enrollId):null;ae&&Y.set(ae,ee)}),Y},[e]),_=x.useMemo(()=>{if(!Array.isArray(d))return[];const Y=new Map(Lv.map((ee,ae)=>[ee,ae]));return d.map(ee=>{const ae=ee?.gradeCriteriaCd,xe=Number(ee?.ratio??0),me=ee?.gradeCriteriaName||Iv[ae]||ae||"",$e=Y.has(ae)?Y.get(ae):Lv.length;return{code:ae,label:me,ratio:xe,weight:$e}}).filter(ee=>ee.code).sort((ee,ae)=>ee.weight-ae.weight||ee.label.localeCompare(ae.label))},[d]),B=x.useMemo(()=>{const Y=new Set(_.map(xe=>xe.code)),ee=new Set;i.forEach(xe=>{xe?.sectionScores&&xe.sectionScores.forEach(me=>{if(!me?.gradeCriteriaCd)return;const $e=me.gradeCriteriaCd;Y.has($e)||ee.add($e)})});const ae=Array.from(ee).sort((xe,me)=>xe.localeCompare(me)).map(xe=>({code:xe,label:Iv[xe]||xe,ratio:null}));return[..._,...ae]},[_,i]);x.useMemo(()=>_.reduce((Y,ee)=>Y+(Number.isFinite(ee.ratio)?ee.ratio:0),0),[_]);const T=x.useMemo(()=>i.map(Y=>{const ee=Y?.enrollId!=null?String(Y.enrollId):"",ae=ee?w.get(ee):null,xe=ae?.studentNo||ae?.userId||"-",me=ae?[ae.lastName,ae.firstName].filter(Boolean).join("")||ae.studentName||ae.userName||ae.name||"":Y?.studentName||"",$e=me?`${me}(${xe})`:xe,se=ae?.univDeptName||"",ue=ae?.gradeName||"",te={};Array.isArray(Y?.sectionScores)&&Y.sectionScores.forEach(Ne=>{const De=Ne?.gradeCriteriaCd;De&&(te[De]=typeof Ne.rawScore=="number"?Ne.rawScore:null)});let oe=0,we=!1;B.forEach(Ne=>{const De=te[Ne.code];typeof De=="number"&&Ne.ratio!=null&&(oe+=De*Ne.ratio/100,we=!0)});const _e=typeof Y?.autoGrade=="number"?Y.autoGrade:null,He=typeof Y?.finalGrade=="number"?Y.finalGrade:null,qe=(Y?.changeReason||"").trim(),de=qe.length>0||He!=null&&(_e==null||Math.abs(He-_e)>Number.EPSILON*10);return{enrollId:ee,displayName:$e,studentNo:xe,department:se,grade:ue,gpaCd:Y?.gpaCd||"",autoGrade:_e,finalGrade:He,changeReason:qe,sections:te,totalScore:we?oe:null,changed:de}}),[i,w,B]),U=x.useMemo(()=>{const Y=y.trim().toLowerCase();return Y?T.filter(ee=>ee.displayName.toLowerCase().includes(Y)||ee.studentNo.toLowerCase().includes(Y)||ee.enrollId.toLowerCase().includes(Y)):T},[T,y]),V=Y=>{v(Y.target.value)},q=async()=>{if(!(!t||K||!(await Ve.fire({title:"  ",text:"  ?     .",icon:"warning",showCancelButton:!0,confirmButtonText:"",cancelButtonText:""})).isConfirmed))try{R(!0);const ee=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(t)}/finalize`,{method:"PUT",credentials:"include"});if(ee.status===204){await Ve.fire({title:" ",text:"  .",icon:"success",confirmButtonText:""});const $e=`/classroom/professor/${encodeURIComponent(t)}`;window.location.assign($e);return}const ae=`(${ee.status})    .`,xe=await ee.text().catch(()=>""),me=xe?.trim()?xe.trim():ae;await Ve.fire({title:"",text:me,icon:"error",confirmButtonText:""})}catch(ee){const ae=ee?.message||"      .";await Ve.fire({title:"",text:ae,icon:"error",confirmButtonText:""})}finally{R(!1)}},H=a?.subjectTypeCd==="SUBJ_PASSFAIL",E=!!a?.finalized,L=Y=>{const ee=a?.subjectTypeCd==="SUBJ_PASSFAIL";A({enrollId:Y.enrollId,name:Y.displayName,selected:Y.gpaCd||"",reason:Y.changeReason||"",passFail:ee,autoGrade:Y.autoGrade}),z(null)},$=()=>{S||(A(null),z(null))},O=Y=>{A(ee=>ee&&{...ee,selected:Y})},Q=Y=>{const{value:ee}=Y.target;A(ae=>ae&&{...ae,reason:ee})},Z=()=>{A(Y=>Y&&{...Y,reason:"     "})},k=Y=>Y==="A+"||Y==="A0"?"grade-btn grade-btn-a":Y==="B+"||Y==="B0"?"grade-btn grade-btn-b":Y==="C+"||Y==="C0"?"grade-btn grade-btn-c":Y==="D+"||Y==="D0"?"grade-btn grade-btn-d":Y==="F"?"grade-btn grade-btn-f":"grade-btn grade-btn-default",W=async()=>{if(!C||!t)return;const Y=C.reason.trim();if(!C.selected){await Ve.fire({title:"",text:"   .",icon:"warning",confirmButtonText:""});return}if(!Y){await Ve.fire({title:"",text:"    .",icon:"warning",confirmButtonText:""});return}try{M(!0),z(null);const ee=await fetch(`/classroom/api/v1/professor/${encodeURIComponent(t)}/finalize/score`,{method:"PATCH",headers:{"Content-Type":"application/json",Accept:"application/json"},credentials:"include",body:JSON.stringify({enrollId:C.enrollId,gpaCd:C.selected,changeReason:Y})});if(!ee.ok){let ae=`(${ee.status})    .`;try{const xe=await ee.json();xe&&typeof xe.message=="string"&&xe.message.trim().length>0&&(ae=xe.message)}catch{}throw new Error(ae)}o(ae=>ae.map(xe=>{if(String(xe.enrollId)!==String(C.enrollId))return xe;const me={...xe,gpaCd:C.selected,changeReason:Y};return!C.passFail&&Object.prototype.hasOwnProperty.call(Ov,C.selected)&&(me.finalGrade=Ov[C.selected]),me})),A(null),z(null),D(ae=>ae+1)}catch(ee){z(ee?.message||String(ee));return}finally{M(!1)}},P=()=>{if(!C)return null;const Y=C.passFail?xM:Uj,ee=C.selected;return s.jsx("div",{role:"dialog","aria-modal":"true",className:"position-fixed top-0 start-0 end-0 bottom-0 d-flex align-items-center justify-content-center",style:{backgroundColor:"rgba(0, 0, 0, 0.45)",zIndex:1050,padding:"1rem"},onClick:ae=>{ae.target===ae.currentTarget&&$()},children:s.jsxs("div",{className:"card shadow-lg w-100",style:{maxWidth:480},onClick:ae=>ae.stopPropagation(),children:[s.jsxs("div",{className:"card-header d-flex align-items-center justify-content-between",children:[s.jsxs("h2",{className:"h6 mb-0",children:[C.name,"  "]}),s.jsx("button",{type:"button",className:"btn-close","aria-label":"",onClick:$,disabled:S})]}),s.jsxs("div",{className:"card-body d-flex flex-column gap-3",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-muted small mb-2",children:"  ."}),s.jsx("div",{className:"d-flex flex-wrap gap-2",children:Y.map(ae=>{const xe=k(ae.code),me=ee===ae.code;return s.jsx("button",{type:"button",className:`${xe}${me?" selected":""}`,onClick:()=>O(ae.code),disabled:S,children:ae.label},ae.code)})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"d-flex align-items-center justify-content-between mb-2",children:[s.jsx("label",{htmlFor:"finalize-change-reason",className:"form-label small text-muted mb-0",children:" "}),s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:Z,disabled:S,children:""})]}),s.jsx("textarea",{id:"finalize-change-reason",className:"form-control",rows:3,value:C.reason,onChange:Q,placeholder:"  .",disabled:S})]}),F?s.jsx("div",{className:"alert alert-danger small mb-0",role:"alert",children:F}):null]}),s.jsxs("div",{className:"card-footer d-flex justify-content-end gap-2",children:[s.jsx("button",{type:"button",className:"custom-btn custom-btn-outline-secondary custom-btn-sm",onClick:$,disabled:S,children:""}),s.jsx("button",{type:"button",className:"custom-btn custom-btn-primary custom-btn-sm",onClick:W,disabled:S,children:S?" ...":" "})]})]})})},G=()=>{if(h)return s.jsx("div",{className:"card",style:{boxShadow:"0 0.375rem 0.75rem rgba(0, 0, 0, 0.45)"},children:s.jsxs("div",{className:"card-body text-center py-5",children:[s.jsx("div",{className:"spinner-border text-primary mb-3",role:"status","aria-hidden":"true"}),s.jsx("span",{className:"visually-hidden",children:"Loading..."}),s.jsx("div",{className:"text-muted small",children:"  ..."})]})});if(p){const Y=p?.message||String(p);return s.jsx("div",{className:"alert alert-danger",role:"alert",children:Y})}return s.jsx("div",{className:"card",style:{boxShadow:"0 0.375rem 0.75rem rgba(0, 0, 0, 0.45)"},children:s.jsxs("div",{className:"card-body",children:[s.jsxs("div",{className:"d-flex flex-column flex-lg-row align-items-lg-center justify-content-between gap-3 mb-3",children:[s.jsxs("div",{className:"d-flex flex-wrap align-items-center gap-2",children:[s.jsx("label",{htmlFor:"finalize-filter",className:"text-muted small mb-0",children:""}),s.jsx("input",{id:"finalize-filter",type:"search",value:y,onChange:V,className:"form-control form-control-sm",placeholder:",    ...",style:{minWidth:"320px",padding:"8px"}})]}),E?s.jsx("div",{className:"alert alert-success mb-0",role:"alert",style:{padding:"8px 12px"},children:"  ."}):s.jsx("button",{type:"button",className:"custom-btn custom-btn-primary",style:{padding:"8px",fontSize:"0.875rem"},onClick:q,disabled:K,children:K?"  ...":"  "})]}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover align-middle mb-0",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{scope:"col",style:{width:60},children:"#"}),s.jsx("th",{scope:"col",style:{minWidth:140},children:""}),B.map(Y=>s.jsxs("th",{scope:"col",className:"text-center",style:{minWidth:70},children:[s.jsx("div",{className:"fw-semibold",children:Y.label}),Y.ratio!=null&&s.jsxs("div",{className:"text-muted small",children:[Y.ratio,"%"]})]},Y.code)),s.jsx("th",{scope:"col",className:"text-center",style:{minWidth:70},children:""}),s.jsx("th",{scope:"col",className:"text-center",style:{minWidth:90},children:""}),s.jsx("th",{scope:"col",style:{minWidth:120},children:" "}),s.jsx("th",{scope:"col",style:{width:90}})]})}),s.jsx("tbody",{children:U.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:B.length+6,className:"text-center text-muted py-5",children:"   ."})}):U.map((Y,ee)=>{const ae=Y.changed;return s.jsxs("tr",{children:[s.jsxs("td",{className:"text-muted",children:["#",ee+1]}),s.jsxs("td",{children:[s.jsx("div",{className:"fw-semibold",children:Y.displayName}),(Y.department||Y.grade)&&s.jsxs("div",{className:"text-muted small",children:[Y.department,Y.department&&Y.grade?"  ":"",Y.grade]})]}),B.map(xe=>{const me=Y.sections[xe.code];return s.jsx("td",{className:"text-center",children:typeof me=="number"?s.jsx("span",{className:"fw-semibold",children:Gc(me)}):s.jsx("span",{className:"text-muted",children:"-"})},xe.code)}),s.jsx("td",{className:"text-center",children:Y.totalScore!=null?s.jsx("span",{className:"fw-bold",children:Gc(Y.totalScore)}):s.jsx("span",{className:"text-muted",children:"-"})}),s.jsx("td",{className:"text-center",children:(()=>{const xe=Y.finalGrade!=null?Y.finalGrade:null,me=Y.autoGrade!=null?Y.autoGrade:null,$e=xe??me,se=$e!=null?Gc($e):"-",ue=H?Y.gpaCd||"-":Y.gpaCd?`${Y.gpaCd} (${se})`:se!=="-"?se:"-",te=ae?`   ${me!=null?Gc(me):"-"}`:" ";return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:`fw-semibold mb-1${ae?" text-danger":""}`,children:ue}),s.jsx("div",{className:"text-muted small",children:te})]})})()}),s.jsx("td",{children:s.jsx("div",{className:"small text-break",children:ae?Y.changeReason||" ":" "})}),s.jsx("td",{className:"text-end",children:!E&&s.jsx("button",{type:"button",className:"btn btn-sm btn-outline-primary",onClick:()=>L(Y),children:""})})]},Y.enrollId||ee)})})]})})]})})};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"d-flex flex-column gap-4",children:[s.jsx("div",{className:"d-flex flex-column flex-sm-row align-items-sm-center justify-content-between gap-2",children:s.jsx("h1",{className:"h4 mb-0",children:"  /"})}),s.jsx("div",{className:"card",style:{boxShadow:"0 0.375rem 0.75rem rgba(0, 0, 0, 0.45)"},children:s.jsxs("div",{className:"card-body",children:[s.jsx("h2",{className:"h6 mb-2",children:"   "}),s.jsx("p",{className:"mb-3 text-muted small",children:"      ,      .              ."}),s.jsx("p",{className:"mb-3 text-danger small",children:"          F   ."}),s.jsx("div",{className:"d-flex flex-wrap align-items-center gap-2",children:_.length===0?s.jsx("span",{className:"badge bg-light text-dark border",style:{fontSize:"1.5em",padding:"0.5em 0.75em"},children:"   "}):_.map(Y=>s.jsxs("span",{className:"badge bg-light text-dark border",style:{fontSize:"1.5em",padding:"0.5em 0.75em"},children:[Y.label," ",Number.isFinite(Y.ratio)?`${Y.ratio}%`:""]},Y.code))})]})}),G()]}),P()]})}function yM(){return s.jsxs(KS,{children:[s.jsx(it,{path:"/",element:s.jsx(Cb,{to:"/classroom/student",replace:!0})}),s.jsx(it,{path:"/classroom/student",element:s.jsx(X2,{})}),s.jsxs(it,{path:"/classroom/student/:lectureId",element:s.jsx(e1,{}),children:[s.jsx(it,{index:!0,element:s.jsx(Z2,{})}),s.jsx(it,{path:"board",element:s.jsx(n1,{})}),s.jsx(it,{path:"board/:postId",element:s.jsx(L1,{})}),s.jsx(it,{path:"attendance",element:s.jsx(a1,{})}),s.jsx(it,{path:"exam",element:s.jsx(u1,{})}),s.jsx(it,{path:"exam/:examId",element:s.jsx(f1,{})}),s.jsx(it,{path:"task",element:s.jsx(w1,{})}),s.jsx(it,{path:"task/indiv/:indivtaskId",element:s.jsx(b1,{})}),s.jsx(it,{path:"task/group/:grouptaskId",element:s.jsx(S1,{})}),s.jsx(it,{path:"review",element:s.jsx(CE,{})}),s.jsx(it,{path:"grade",element:s.jsx(EE,{})})]}),s.jsx(it,{path:"/classroom/professor",element:s.jsx(TE,{})}),s.jsxs(it,{path:"/classroom/professor/:lectureId",element:s.jsx(wD,{}),children:[s.jsx(it,{index:!0,element:s.jsx(bD,{})}),s.jsx(it,{path:"summary",element:s.jsx(jD,{})}),s.jsx(it,{path:"board",element:s.jsx(ED,{})}),s.jsx(it,{path:"board/new",element:s.jsx($D,{})}),s.jsx(it,{path:"board/:postId/edit",element:s.jsx(RD,{})}),s.jsx(it,{path:"board/:postId",element:s.jsx(MD,{})}),s.jsx(it,{path:"attendance",element:s.jsx(ID,{})}),s.jsx(it,{path:"exam",element:s.jsx(UD,{})}),s.jsx(it,{path:"exam/offline/new",element:s.jsx(XD,{})}),s.jsx(it,{path:"exam/:examId",element:s.jsx(YD,{})}),s.jsx(it,{path:"exam/:examId/edit",element:s.jsx(WD,{})}),s.jsx(it,{path:"task",element:s.jsx(QD,{})}),s.jsx(it,{path:"task/indiv/new",element:s.jsx(_v,{})}),s.jsx(it,{path:"task/indiv/:indivtaskId/edit",element:s.jsx(_v,{})}),s.jsx(it,{path:"task/indiv/:indivtaskId",element:s.jsx(JD,{})}),s.jsx(it,{path:"task/group/new",element:s.jsx(iM,{})}),s.jsx(it,{path:"task/group/:grouptaskId/edit",element:s.jsx(cM,{})}),s.jsx(it,{path:"task/group/:grouptaskId",element:s.jsx(sM,{})}),s.jsx(it,{path:"student",element:s.jsx(dM,{})}),s.jsx(it,{path:"student/:studentNo",element:s.jsx(fM,{})}),s.jsx(it,{path:"grades",element:s.jsx(pM,{})}),s.jsx(it,{path:"finalize",element:s.jsx(bM,{})})]}),s.jsx(it,{path:"*",element:s.jsx(Cb,{to:"/classroom/student",replace:!0})})]})}lS.createRoot(document.getElementById("root")).render(s.jsx(x.StrictMode,{children:s.jsx(a2,{children:s.jsx(d2,{children:s.jsx(f2,{children:s.jsx(yM,{})})})})}));
